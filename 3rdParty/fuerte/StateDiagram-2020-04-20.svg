<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1017 669">
  <!-- svg-source:excalidraw -->
  <defs>
    <style>
      @font-face {
        font-family: "Virgil";
        src: url("https://excalidraw.com/FG_Virgil.woff2");
      }
      @font-face {
        font-family: "Cascadia";
        src: url("https://excalidraw.com/Cascadia.woff2");
      }
    </style>
  </defs>
  <rect x="0" y="0" width="1017" height="669" fill="#ffffff"></rect><g transform="translate(10 109.5) rotate(0 64.5 13)"><text x="0" y="18" font-family="Virgil" font-size="20px" fill="#000000" text-anchor="start">Disconnected</text></g><g transform="translate(19.5 584.5) rotate(0 50 13)"><text x="0" y="18" font-family="Virgil" font-size="20px" fill="#000000" text-anchor="start">Connected</text></g><g transform="translate(21.5 360.5) rotate(0 28 13)"><text x="0" y="18" font-family="Virgil" font-size="20px" fill="#000000" text-anchor="start">Failed</text></g><g><g transform="translate(629.5 150.5) rotate(0 0.3002867216197842 90.12996958408974)"><path d="M0.07427520565688606 -0.2615477364510298 C0.07672127299010749 29.81256850548089, -1.2359005231410265 150.24584745950997, -1.170786227658391 180.1780047018081 M1.771359670897946 0.3826739147398621 C1.521937038144097 30.682768253693357, 0.45870278372429324 150.87207315535287, 0.03253840788267559 180.52148690463045" style="stroke: rgb(0, 0, 0); stroke-width: 1px; fill: none;"></path></g><g transform="translate(629.5 150.5) rotate(0 0.3002867216197842 90.12996958408974)"><path d="M-10.348666948945988 150.26662272306223 C-7.677875799249627 158.68171135406809, -7.087784082501298 165.2728947649032, -1.3653622796479612 182.45739911326208 M-10.342058199206162 151.27758141418983 C-6.4325124332867905 161.53105035960684, -3.9209654655636115 169.93801922318139, 0.5189896844606847 180.0110586017091" style="stroke: rgb(0, 0, 0); stroke-width: 1px; fill: none;"></path></g><g transform="translate(629.5 150.5) rotate(0 0.3002867216197842 90.12996958408974)"><path d="M10.17126318163019 150.4956856447928 C8.713718568493059 158.87738521070125, 5.174965443903981 165.42247853951804, -1.3653622796479612 182.45739911326208 M10.177871931370015 151.50664433592038 C7.502302738579166 161.745079163273, 3.4287754762411833 170.07853918284312, 0.5189896844606847 180.0110586017091" style="stroke: rgb(0, 0, 0); stroke-width: 1px; fill: none;"></path></g></g><g><g transform="translate(625.5 391.5) rotate(0 -0.7472444994421608 81.80475186992905)"><path d="M0.5956783633679152 -0.40972186736762517 C0.32542507462203507 26.46044374691943, -1.7819602865725759 134.72834018853803, -2.284259702637792 162.09989397116004 M0.7897707037534567 0.461640883097425 C0.8540872658696028 27.593077458251887, -0.8011846186313776 137.05060737809478, -1.2129320041928437 164.01922560722568" style="stroke: rgb(0, 0, 0); stroke-width: 1px; fill: none;"></path></g><g transform="translate(625.5 391.5) rotate(0 -0.7472444994421608 81.80475186992905)"><path d="M-11.735861485094993 136.8718151471969 C-9.937031354832182 143.5367770579938, -4.6622854216772645 147.75652246724047, 0.13199275678955047 164.882362988377 M-10.332070181348591 135.28183828978058 C-6.849052333797734 144.91076981769604, -4.497638742599319 154.13906828006557, -0.6149542085546997 165.0053988560755" style="stroke: rgb(0, 0, 0); stroke-width: 1px; fill: none;"></path></g><g transform="translate(625.5 391.5) rotate(0 -0.7472444994421608 81.80475186992905)"><path d="M8.78307589916287 137.17711992401001 C5.557215372836724 143.8692076003118, 5.809506753198407 148.0142230497375, 0.13199275678955047 164.882362988377 M10.186867202909273 135.58714306659368 C6.993605998360335 145.2310624770241, 2.671721960385785 154.3600678032469, -0.6149542085546997 165.0053988560755" style="stroke: rgb(0, 0, 0); stroke-width: 1px; fill: none;"></path></g></g><g transform="translate(655 213.5) rotate(0 133.5 14.5)"><text x="0" y="23" font-family="Helvetica" font-size="20px" fill="#000000" text-anchor="start">startConnection -&gt; tryConnect</text></g><g transform="translate(656.5 450.5) rotate(0 60.5 14.5)"><text x="0" y="23" font-family="Helvetica" font-size="20px" fill="#000000" text-anchor="start">finishConnect</text></g><g transform="translate(318.5 387.5) rotate(0 93.5 14.5)"><text x="0" y="23" font-family="Helvetica" font-size="20px" fill="#000000" text-anchor="start">shutdownConnection</text></g><g transform="translate(173.5 339.5) rotate(0 26.5 14.5)"><text x="0" y="23" font-family="Helvetica" font-size="20px" fill="#000000" text-anchor="start">if SSL</text></g><g transform="translate(13.5 10) rotate(0 75 13)"><text x="0" y="18" font-family="Virgil" font-size="20px" fill="#000000" text-anchor="start">_active==false</text></g><g transform="translate(571 18) rotate(0 70 13)"><text x="0" y="18" font-family="Virgil" font-size="20px" fill="#000000" text-anchor="start">_active==true</text></g><g transform="translate(566 100.5) rotate(0 64.5 13)"><text x="0" y="18" font-family="Virgil" font-size="20px" fill="#000000" text-anchor="start">Disconnected</text></g><g transform="translate(584 342.5) rotate(0 50.5 13)"><text x="0" y="18" font-family="Virgil" font-size="20px" fill="#000000" text-anchor="start">Connecting</text></g><g transform="translate(578.5 579.5) rotate(0 50 13)"><text x="0" y="18" font-family="Virgil" font-size="20px" fill="#000000" text-anchor="start">Connected</text></g><g><g transform="translate(172.5 122.5) rotate(0 186.50939743289723 -3.4498075500130625)"><path d="M-0.2689074978232384 1.1661725744605065 C62.12632182588181 -0.2191428596774736, 311.97766305754584 -6.526549205680689, 374.31634178310634 -8.065787674486637 M-1.2975469173118472 -0.3072455601766706 C60.85417178937544 -1.2735550579304498, 310.43533078460644 -4.0276962626849615, 373.2695647119358 -5.401790146119893" style="stroke: rgb(0, 0, 0); stroke-width: 1px; fill: none;"></path></g><g transform="translate(172.5 122.5) rotate(0 186.50939743289723 -3.4498075500130625)"><path d="M347.18727383049725 5.828168504317603 C351.72463182012575 1.8072780137360152, 359.9980892243289 -0.5671031864374445, 373.7024246468022 -6.819874208755792 M346.17690787124036 4.452949215104184 C352.2369858504282 2.774608417723357, 361.2702555544283 -1.6141523623313923, 372.92707801375536 -5.577198013998569" style="stroke: rgb(0, 0, 0); stroke-width: 1px; fill: none;"></path></g><g transform="translate(172.5 122.5) rotate(0 186.50939743289723 -3.4498075500130625)"><path d="M346.86451432841056 -14.690501742305393 C351.5393011514465 -12.649170202096162, 359.908106173126 -8.962052641896342, 373.7024246468022 -6.819874208755792 M345.8541483691537 -16.065721031518812 C351.92373602928177 -11.935775185277269, 361.0484146536335 -10.513430538012008, 372.92707801375536 -5.577198013998569" style="stroke: rgb(0, 0, 0); stroke-width: 1px; fill: none;"></path></g></g><g transform="translate(214.5 74) rotate(0 120 14.5)"><text x="0" y="23" font-family="Helvetica" font-size="20px" fill="#000000" text-anchor="start">sendRequest: post activate</text></g><g><g transform="translate(570.5 612.5) rotate(0 -214.8970444248058 0.5185701997019123)"><path d="M0.6202938303351402 -0.19651589244604106 C-70.80430230448643 -0.07653986463944111, -356.9814825152357 0.4575070555011432, -428.8186442628503 0.8227879539132119 M0.3842747981473802 0.44878137219697223 C-71.25661061971138 0.8687759120141465, -358.59081419476615 0.9480044415468971, -430.4143826799467 1.2336562918499112" style="stroke: rgb(0, 0, 0); stroke-width: 1px; fill: none;"></path></g><g transform="translate(570.5 612.5) rotate(0 -214.8970444248058 0.5185701997019123)"><path d="M-402.5711285128188 -7.112800037374237 C-412.0116596433239 -6.745634952751083, -417.8725761172477 -3.8348407487447265, -431.82018699366597 1.6536287488415837 M-402.54804798876165 -8.992823274692038 C-411.97275105109776 -6.632083333521057, -420.5754930453595 -2.7851674200474683, -431.2264178643003 1.4832723597064614" style="stroke: rgb(0, 0, 0); stroke-width: 1px; fill: none;"></path></g><g transform="translate(570.5 612.5) rotate(0 -214.8970444248058 0.5185701997019123)"><path d="M-402.53123909128936 13.408369793312554 C-412.0004383269549 8.08294189320371, -417.8724205670098 5.300936919460817, -431.82018699366597 1.6536287488415837 M-402.5081585672322 11.528346555994753 C-411.89933883276603 7.22931611318244, -420.51502588459755 4.416628686427983, -431.2264178643003 1.4832723597064614" style="stroke: rgb(0, 0, 0); stroke-width: 1px; fill: none;"></path></g></g><g><g transform="translate(143.5 579.5) rotate(0 213.27191244194285 -0.41550134742038836)"><path d="M0.653195334970951 -0.8079856172204017 C71.3257958744963 -0.9073421890536943, 354.36735011885565 -1.6424127196272214, 425.12627115398647 -1.7651259198784828 M1.1206664334610106 0.8894095964357258 C71.95173366614928 1.1357986918215952, 355.5126061776156 0.35279968372235704, 425.8906295489147 0.21895566295832403" style="stroke: rgb(0, 0, 0); stroke-width: 1px; fill: none;"></path></g><g transform="translate(143.5 579.5) rotate(0 213.27191244194285 -0.41550134742038836)"><path d="M396.37676800835214 10.754512066460997 C407.5590392128362 6.699303892903543, 418.9373968600545 3.307023593300828, 424.51425915617494 1.4437277213856579 M396.84297718527995 11.137691548533589 C406.673867498381 6.286822122675272, 416.94762840714486 3.7877770560318336, 426.2555343512073 0.5386671283468605" style="stroke: rgb(0, 0, 0); stroke-width: 1px; fill: none;"></path></g><g transform="translate(143.5 579.5) rotate(0 213.27191244194285 -0.41550134742038836)"><path d="M396.3297961504831 -9.766642775077713 C407.3305201976426 -5.8006130776558225, 418.7272386270859 -1.1713998246255688, 424.51425915617494 1.4437277213856579 M396.7960053274109 -9.383463293005121 C406.7431430399013 -7.080937830074335, 417.0332784142855 -2.426275130266654, 426.2555343512073 0.5386671283468605" style="stroke: rgb(0, 0, 0); stroke-width: 1px; fill: none;"></path></g></g><g transform="translate(220.5 535) rotate(0 120 14.5)"><text x="0" y="23" font-family="Helvetica" font-size="20px" fill="#000000" text-anchor="start">sendRequest: post activate</text></g><g transform="translate(105.5 630) rotate(0 240 14.5)"><text x="0" y="23" font-family="Helvetica" font-size="20px" fill="#000000" text-anchor="start">asyncWriteNextRequest notices: no more stuff to send</text></g><g><g transform="translate(576.5 544.5) rotate(0 -236.3327897284366 -192.65298136403786)"><path d="M0.6391894564032554 -0.08574995845556255 C-22.707321351269883 -9.675613815089067, -96.4513543859124 -38.89422904501359, -141.23624460846185 -58.163495062291624 C-186.0211348310113 -77.43276107956966, -244.363565184176 -87.05500535815955, -268.0701518788934 -115.70134606212378 C-291.7767385736108 -144.347686766088, -249.29697705258928 -185.47930553605158, -283.4757647767663 -230.041539286077 C-317.65455250094334 -274.60377303610244, -441.5241974130273 -357.36665757348135, -473.1428782239556 -383.07474856227634 M0.44284691523760555 -1.3965545655414462 C-22.867560559200744 -11.362419845772287, -97.27582456160334 -39.28407982281099, -141.54543325114994 -58.30846625935286 C-185.81504194069655 -77.33285269589473, -241.5704602425173 -86.97636655222624, -265.1748052220419 -115.5428731847927 C-288.77915020156655 -144.10937981735916, -248.48317584642518 -184.76128279061368, -283.1715031282976 -229.70750605475158 C-317.85983041017005 -274.6537293188895, -441.74825237918645 -359.3639290425305, -473.3047689132765 -385.2202127696201" style="stroke: rgb(0, 0, 0); stroke-width: 1px; fill: none;"></path></g><g transform="translate(576.5 544.5) rotate(0 -236.3327897284366 -192.65298136403786)"><path d="M-444.75907118620376 -375.17440799215296 C-449.0164318889889 -379.86398850025773, -455.752944193703 -380.6592238857235, -473.3740010567382 -387.12500980954616 M-445.5358203835974 -375.634915381311 C-455.10592066268447 -380.5881197301689, -465.918115816875 -382.7553781916091, -472.307394717671 -384.97041669573633" style="stroke: rgb(0, 0, 0); stroke-width: 1px; fill: none;"></path></g><g transform="translate(576.5 544.5) rotate(0 -236.3327897284366 -192.65298136403786)"><path d="M-457.1100299294024 -358.78618598640617 C-458.7678649480189 -366.87767821401553, -462.99011292178596 -371.0090369639432, -473.3740010567382 -387.12500980954616 M-457.88677912679606 -359.2466933755642 C-462.6370570579889 -370.35010956910884, -468.79165272801896 -378.6974367966524, -472.307394717671 -384.97041669573633" style="stroke: rgb(0, 0, 0); stroke-width: 1px; fill: none;"></path></g></g><g transform="translate(98 147.5) rotate(0 6.5 13)"><text x="0" y="18" font-family="Virgil" font-size="20px" fill="#000000" text-anchor="start">a</text></g><g><g transform="translate(307.5 362.5) rotate(0 145.32176984688266 -107.34772112658248)"><path d="M-1.0662093892693518 1.0065705791115762 C2.61151788085699 -9.45370648552974, 4.035944929222264 -43.702321512003735, 21.168424294888972 -63.19086141437292 C38.300903660555676 -82.6794013167421, 65.67162740081548 -100.74040190229815, 101.72866680473089 -115.92466883510352 C137.7857062086463 -131.1089357679089, 206.02644083350899 -138.0745256885886, 237.51066071838142 -154.2964630112052 C268.9948806032539 -170.51840033382177, 281.83715280542776 -203.36359586566687, 290.63398611396553 -213.256292770803 M0.07520457219332455 -0.5200956560298802 C3.105600498430431 -10.901673598003883, 2.4047581421459725 -42.669720471811786, 19.40258778166026 -61.80519147764891 C36.400417421174545 -80.94066248348604, 65.69643850635737 -100.20352628997217, 102.06218240927905 -115.33292169105262 C138.42792631220073 -130.46231709213308, 205.98912342023107 -135.85338202726095, 237.59705119919033 -152.5815638841316 C269.2049789781496 -169.30974574100227, 282.6728287529076 -205.33993506323546, 291.7097490830347 -215.70201283227652" style="stroke: rgb(0, 0, 0); stroke-width: 1px; fill: none;"></path></g><g transform="translate(307.5 362.5) rotate(0 145.32176984688266 -107.34772112658248)"><path d="M286.7329769020971 -186.16862893815355 C284.67359750139883 -191.76264226604334, 286.61563221880436 -198.71286136173762, 291.21564406435937 -214.64536930900067 M285.7221419064399 -186.18470430712418 C287.43408265653346 -197.34155865115918, 288.92881117164984 -207.53965591447073, 292.2901766290888 -215.88393725361675" style="stroke: rgb(0, 0, 0); stroke-width: 1px; fill: none;"></path></g><g transform="translate(307.5 362.5) rotate(0 145.32176984688266 -107.34772112658248)"><path d="M269.4865502204016 -197.2898145358649 C271.2708017449248 -200.2264154921527, 277.0962440711546 -204.67245806673975, 291.21564406435937 -214.64536930900067 M268.4757152247444 -197.30588990483554 C276.4574717571473 -204.48706841039507, 284.19498596018843 -210.6595678172049, 292.2901766290888 -215.88393725361675" style="stroke: rgb(0, 0, 0); stroke-width: 1px; fill: none;"></path></g></g><g><g transform="translate(299.5 410.5) rotate(0 -101.57393288711086 -45.80279821323157)"><path d="M-0.17161328941583642 0.8549066081643104 C-1.9978329593936606 -4.994782891372839, 0.42538152386744876 -20.575128061076008, -10.803117300570012 -34.07521581500769 C-22.031616125007474 -47.57530356893937, -44.93996953318518 -70.60266971439124, -67.5426062360406 -80.14561991542578 C-90.14524293889602 -89.68857011646033, -123.86978337913752 -94.9134943470359, -146.41893751770257 -91.33291702121497 C-168.96809165626763 -87.75233969539404, -193.4522924358646 -64.24150495380164, -202.83753106743097 -58.66215596050024 M-0.9142711167410016 -0.5010762048885227 C-2.1530778679127494 -6.321762016328673, 2.8019845202689364 -20.55188876481106, -8.50948617387563 -33.687099150531 C-19.820956868020197 -46.822309536250934, -45.47589952795455 -69.77944722782821, -68.7830952816084 -79.31233851920814 C-92.09029103526224 -88.84522981058807, -125.98713449526579 -94.5592209745571, -148.3526606957987 -90.88444689881057 C-170.71818689633162 -87.20967282306403, -193.86232951252413 -62.49123238455504, -202.97625248480588 -57.26369406472892" style="stroke: rgb(0, 0, 0); stroke-width: 1px; fill: none;"></path></g><g transform="translate(299.5 410.5) rotate(0 -101.57393288711086 -45.80279821323157)"><path d="M-185.40344454492035 -83.8854836025078 C-191.79001677044928 -73.89785557793547, -198.62591498246402 -65.78187142076922, -203.53111418683082 -56.992912510447205 M-187.41661985735 -81.87098989494035 C-191.22443095177877 -76.6116437057051, -193.86369070169818 -69.97699110473125, -203.40417340371758 -57.43437085118145" style="stroke: rgb(0, 0, 0); stroke-width: 1px; fill: none;"></path></g><g transform="translate(299.5 410.5) rotate(0 -101.57393288711086 -45.80279821323157)"><path d="M-172.92958364712075 -67.59061334563907 C-183.35750706845377 -62.71867546016886, -194.09585341004592 -59.700542439601506, -203.53111418683082 -56.992912510447205 M-174.94275895955042 -65.57611963807162 C-181.84103818764217 -64.29120599358514, -187.53415276157406 -61.64586901415826, -203.40417340371758 -57.43437085118145" style="stroke: rgb(0, 0, 0); stroke-width: 1px; fill: none;"></path></g></g><g transform="translate(716 338) rotate(0 145.5 14.5)"><text x="0" y="23" font-family="Helvetica" font-size="20px" fill="#000000" text-anchor="start">(on timeout, fail connect request)</text></g><g><g transform="translate(98.5 560.5) rotate(0 101.06799873730168 -74.02342364501209)"><path d="M0.3479872450232506 0.09230451732873912 C7.960473528007666 -12.14899620860815, 20.258697675168513 -58.53785527398188, 44.83135597556829 -74.61570334285497 C69.40401427596808 -90.69355141172807, 121.2880696202318 -84.1246951247255, 147.78393704742194 -96.37478389590979 C174.2798044746121 -108.62487266709407, 194.40830104202033 -139.53373397042353, 203.80656053870916 -148.11623596996068 M-1.6705630641058087 1.030332548506558 C6.085557603749136 -11.625576092116535, 20.628440477363764 -60.01305050702145, 45.44244896005839 -76.5662490214035 C70.25645744275302 -93.11944753578554, 121.08897556773077 -86.20370340159783, 147.21348783206196 -98.28885853778571 C173.33800009639313 -110.3740136739736, 192.66976813744753 -140.54557060332348, 202.18952254604548 -149.07717983853072" style="stroke: rgb(0, 0, 0); stroke-width: 1px; fill: none;"></path></g><g transform="translate(98.5 560.5) rotate(0 101.06799873730168 -74.02342364501209)"><path d="M191.1959271613301 -123.17290621559151 C194.5142518796783 -126.34862719044648, 197.47638595532297 -134.37528441934012, 203.662462596111 -148.78802312593908 M190.1292103078009 -120.66214292432197 C195.2980961487974 -133.02142409518413, 200.1135662587617 -143.8486537139697, 201.20019060399383 -149.11935461368412" style="stroke: rgb(0, 0, 0); stroke-width: 1px; fill: none;"></path></g><g transform="translate(98.5 560.5) rotate(0 101.06799873730168 -74.02342364501209)"><path d="M175.90100252845627 -136.85447348182782 C182.5994644848549 -136.93184846980986, 189.07489153650005 -141.81580605611532, 203.662462596111 -148.78802312593908 M174.83428567492706 -134.34371019055828 C185.95037020911252 -141.25721960308283, 196.79484992846398 -146.69139874927404, 201.20019060399383 -149.11935461368412" style="stroke: rgb(0, 0, 0); stroke-width: 1px; fill: none;"></path></g></g><g transform="translate(297 397) rotate(0 5.5 14.5)"><text x="0" y="23" font-family="Helvetica" font-size="20px" fill="#000000" text-anchor="start">tt</text></g><g transform="translate(63.5 444) rotate(0 51 14.5)"><text x="0" y="23" font-family="Helvetica" font-size="20px" fill="#000000" text-anchor="start">idle timeout</text></g><g transform="translate(454 454) rotate(0 56.5 14.5)"><text x="0" y="23" font-family="Helvetica" font-size="20px" fill="#000000" text-anchor="start">write timeout</text></g><g transform="translate(41 222) rotate(0 65.5 14.5)"><text x="0" y="23" font-family="Helvetica" font-size="20px" fill="#000000" text-anchor="start">if queue empty</text></g><g transform="translate(341 182) rotate(0 85.5 14.5)"><text x="0" y="23" font-family="Helvetica" font-size="20px" fill="#000000" text-anchor="start">if queue non-empty</text></g></svg>