#  Boost.Atomic Library Jamfile
#
#  Copyright Helge Bahmann 2011.
#  Copyright Andrey Semashev 2018.
#
#  Distributed under the Boost Software License, Version 1.0.
#  (See accompanying file LICENSE_1_0.txt or copy at
#  http://www.boost.org/LICENSE_1_0.txt)

import common ;

project boost/atomic
    : requirements
      <threading>multi
      <link>shared:<define>BOOST_ATOMIC_DYN_LINK=1
      <link>static:<define>BOOST_ATOMIC_STATIC_LINK=1
      <define>BOOST_ATOMIC_SOURCE
      <target-os>windows:<define>BOOST_USE_WINDOWS_H
      <target-os>windows:<define>_WIN32_WINNT=0x0500
      <toolset>gcc,<target-os>windows:<linkflags>"-lkernel32"
    : usage-requirements
      <link>shared:<define>BOOST_ATOMIC_DYN_LINK=1
      <link>static:<define>BOOST_ATOMIC_STATIC_LINK=1
    : source-location ../src
    ;

alias atomic_sources
   : lockpool.cpp
   ;

explicit atomic_sources ;


lib boost_atomic
   : atomic_sources
   ;

boost-install boost_atomic ;
