<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Using IO</title>
<link rel="stylesheet" href="../../../../../../../doc/src/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.77.1">
<link rel="home" href="../../index.html" title="Chapter&#160;1.&#160;Boost.GIL.IO">
<link rel="up" href="../../index.html" title="Chapter&#160;1.&#160;Boost.GIL.IO">
<link rel="prev" href="tutorial.html" title="Tutorial">
<link rel="next" href="running_gil__io_tests.html" title="Running gil::io tests">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../../../../boost.png"></td>
<td align="center"><a href="../../../../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="tutorial.html"><img src="../../../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../../index.html"><img src="../../../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="running_gil__io_tests.html"><img src="../../../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
<div class="section gil_io_using_io">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="gil.io.using_io"></a><a class="link" href="using_io.html" title="Using IO">Using IO</a>
</h2></div></div></div>
<h3>
<a name="gil.io.using_io.h0"></a>
      <span class="phrase"><a name="gil.io.using_io.general_overview"></a></span><a class="link" href="using_io.html#gil.io.using_io.general_overview">General
      Overview</a>
    </h3>
<p>
      The tutorial pointed out some use cases for reading and writing images in various
      image formats. This section will provide a more thorough overview.
    </p>
<p>
      The next sections will introduce the Read and Write interface. But it might
      be worth poiting out that by using some advanced metaprogramming techniques
      the interface is rather small and hopefully easy to understand.
    </p>
<p>
      Besides the general interface the user also has the ability to interface directly
      with the underlying image format. For that each reader or writer provides access
      to the so-called backend. For instance:
    </p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">get_reader_backend</span><span class="special">&lt;</span> <span class="keyword">const</span> <span class="identifier">std</span><span class="special">::</span><span class="identifier">string</span>
                          <span class="special">,</span> <span class="identifier">tag_t</span>
                          <span class="special">&gt;::</span><span class="identifier">type</span> <span class="identifier">backend_t</span><span class="special">;</span>

<span class="identifier">backend_t</span> <span class="identifier">backend</span> <span class="special">=</span> <span class="identifier">read_image_info</span><span class="special">(</span> <span class="identifier">bmp_filename</span>
                                   <span class="special">,</span> <span class="identifier">tag_t</span><span class="special">()</span>
                                   <span class="special">);</span>

<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="identifier">backend</span><span class="special">.</span><span class="identifier">_info</span><span class="special">.</span><span class="identifier">_width</span> <span class="special">,</span> <span class="number">127</span> <span class="special">);</span>
<span class="identifier">BOOST_CHECK_EQUAL</span><span class="special">(</span> <span class="identifier">backend</span><span class="special">.</span><span class="identifier">_info</span><span class="special">.</span><span class="identifier">_height</span><span class="special">,</span> <span class="number">64</span> <span class="special">);</span>
</pre>
<p>
      Of course, the typedef can be removed when using c++11's auto feature.
    </p>
<h3>
<a name="gil.io.using_io.h1"></a>
      <span class="phrase"><a name="gil.io.using_io.read_interface"></a></span><a class="link" href="using_io.html#gil.io.using_io.read_interface">Read
      Interface</a>
    </h3>
<p>
      As the Tutorial demonstrated there are a few ways to read images. Here is an
      enumeration of all read functions with a short description:
    </p>
<pre class="programlisting"><span class="special">*</span> <span class="identifier">read_image</span> <span class="special">-</span> <span class="identifier">read</span> <span class="identifier">into</span> <span class="identifier">a</span> <span class="identifier">gil</span> <span class="identifier">image</span> <span class="identifier">with</span> <span class="identifier">no</span> <span class="identifier">conversion</span><span class="special">.</span> <span class="identifier">Memory</span> <span class="identifier">is</span> <span class="identifier">allocated</span><span class="special">.</span>
<span class="special">*</span> <span class="identifier">read_view</span>  <span class="special">-</span> <span class="identifier">read</span> <span class="identifier">into</span> <span class="identifier">a</span> <span class="identifier">gil</span> <span class="identifier">view</span> <span class="identifier">with</span> <span class="identifier">no</span> <span class="identifier">conversion</span><span class="special">.</span>
<span class="special">*</span> <span class="identifier">read_and_convert_image</span> <span class="special">-</span> <span class="identifier">read</span> <span class="keyword">and</span> <span class="identifier">convert</span> <span class="identifier">into</span> <span class="identifier">a</span> <span class="identifier">gil</span> <span class="identifier">image</span><span class="special">.</span> <span class="identifier">Memory</span> <span class="identifier">is</span> <span class="identifier">allocated</span><span class="special">.</span>
<span class="special">*</span> <span class="identifier">read_and_convert_view</span>  <span class="special">-</span> <span class="identifier">read</span> <span class="keyword">and</span> <span class="identifier">convert</span> <span class="identifier">into</span> <span class="identifier">a</span> <span class="identifier">gil</span> <span class="identifier">view</span><span class="special">.</span>
<span class="special">*</span> <span class="identifier">read_image_info</span> <span class="special">-</span> <span class="identifier">read</span> <span class="identifier">the</span> <span class="identifier">image</span> <span class="identifier">header</span><span class="special">.</span>
</pre>
<p>
      Conversion in this context is necessary if the source ( file ) has an incompatible
      color space with the destination ( gil image type ). If that's the case the
      user has to use the xxx_and_convert_xxx variants.
    </p>
<p>
      All functions take the filename or a device as the first parameter. The filename
      can be anything from a c string, std::string, std::wstring, and a boost::filesystem
      path. When using the path object the user needs to define the ADD_FS_PATH_SUPPORT
      compiler symbol to include the boost::filesystem dependency. Devices could
      be a FILE*, std::ifstream, and a TIFF* for TIFF images.
    </p>
<p>
      The second parameter is either an image or view type depending on the read_xxx
      function. The third and last parameter is either an instance of the image_read_settings&lt;FormatTag&gt;
      or just the FormatTag. The settings can be various depending on the format
      which is being read. But the all share settings for reading a partial image
      area. The first point describes the top left image coordinate whereas the second
      are the dimensions in x and y directions. Here an example of setting up partial
      read.
    </p>
<pre class="programlisting"><span class="identifier">read_image</span><span class="special">(</span> <span class="identifier">filename</span>
          <span class="special">,</span> <span class="identifier">img</span>
          <span class="special">,</span> <span class="identifier">image_read_settings</span><span class="special">&lt;</span> <span class="identifier">tiff_tag</span> <span class="special">&gt;(</span> <span class="identifier">point_t</span><span class="special">(</span> <span class="number">0</span><span class="special">,</span> <span class="number">0</span> <span class="special">),</span> <span class="identifier">point_t</span><span class="special">(</span> <span class="number">50</span><span class="special">,</span> <span class="number">50</span> <span class="special">)</span> <span class="special">)</span>
          <span class="special">);</span>
</pre>
<p>
      Each format supports reading just the header information, using read_image_info().
      Please refer to the format specific sections under 3.3. A basic example follows:
    </p>
<pre class="programlisting"><span class="identifier">image_read_info</span><span class="special">&lt;</span> <span class="identifier">tiff_t</span> <span class="special">&gt;</span> <span class="identifier">info</span> <span class="special">=</span> <span class="identifier">read_image_info</span><span class="special">(</span> <span class="identifier">filename</span>
                                                <span class="special">,</span> <span class="identifier">tiff_t</span><span class="special">()</span>
                                                <span class="special">);</span>
</pre>
<p>
      GIL also comes with a dynamic image extension. In the context of GIL.IO a user
      can define an any_image type based on several image types. The IO extension
      would then pick the matching image type to the current image file. The following
      example shows this feature:
    </p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">mpl</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span> <span class="identifier">gray8_image_t</span>
                   <span class="special">,</span> <span class="identifier">gray16_image_t</span>
                   <span class="special">,</span> <span class="identifier">rgb8_image_t</span>
                   <span class="special">,</span> <span class="identifier">rgba_image_t</span>
                   <span class="special">&gt;</span> <span class="identifier">my_img_types</span><span class="special">;</span>

<span class="identifier">any_image</span><span class="special">&lt;</span> <span class="identifier">my_img_types</span> <span class="special">&gt;</span> <span class="identifier">runtime_image</span><span class="special">;</span>

<span class="identifier">read_image</span><span class="special">(</span> <span class="identifier">filename</span>
          <span class="special">,</span> <span class="identifier">runtime_image</span>
          <span class="special">,</span> <span class="identifier">tiff_tag</span><span class="special">()</span>
          <span class="special">);</span>
</pre>
<p>
      During the review it became clear that there is a need to read big images scanline
      by scanline. To support such use case a scanline_reader is implemented for
      all supported image formats. The scanline_read_iterators will then allow to
      traverse through the image. The following code sample shows the usage:
    </p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">tiff_tag</span> <span class="identifier">tag_t</span><span class="special">;</span>

<span class="keyword">typedef</span> <span class="identifier">scanline_reader</span><span class="special">&lt;</span> <span class="keyword">typename</span> <span class="identifier">get_read_device</span><span class="special">&lt;</span> <span class="keyword">const</span> <span class="keyword">char</span><span class="special">*</span>
                                                 <span class="special">,</span> <span class="identifier">tag_t</span>
                                                 <span class="special">&gt;::</span><span class="identifier">type</span>
                        <span class="special">,</span> <span class="identifier">tag_t</span>
                        <span class="special">&gt;</span> <span class="identifier">reader_t</span><span class="special">;</span>

<span class="identifier">reader_t</span> <span class="identifier">reader</span> <span class="special">=</span> <span class="identifier">make_scanline_reader</span><span class="special">(</span> <span class="string">"C:/boost/libs/gil/io/test_images/tiff/test.tif"</span><span class="special">,</span> <span class="identifier">tag_t</span><span class="special">()</span> <span class="special">);</span>

<span class="keyword">typedef</span> <span class="identifier">rgba8_image_t</span> <span class="identifier">image_t</span><span class="special">;</span>

<span class="identifier">image_t</span> <span class="identifier">dst</span><span class="special">(</span> <span class="identifier">reader</span><span class="special">.</span><span class="identifier">_info</span><span class="special">.</span><span class="identifier">_width</span><span class="special">,</span> <span class="identifier">reader</span><span class="special">.</span><span class="identifier">_info</span><span class="special">.</span><span class="identifier">_height</span> <span class="special">);</span>
<span class="identifier">fill_pixels</span><span class="special">(</span> <span class="identifier">view</span><span class="special">(</span><span class="identifier">dst</span><span class="special">),</span> <span class="identifier">image_t</span><span class="special">::</span><span class="identifier">value_type</span><span class="special">()</span> <span class="special">);</span>

<span class="keyword">typedef</span> <span class="identifier">reader_t</span><span class="special">::</span><span class="identifier">iterator_t</span> <span class="identifier">iterator_t</span><span class="special">;</span>

<span class="identifier">iterator_t</span> <span class="identifier">it</span>  <span class="special">=</span> <span class="identifier">reader</span><span class="special">.</span><span class="identifier">begin</span><span class="special">();</span>
<span class="identifier">iterator_t</span> <span class="identifier">end</span> <span class="special">=</span> <span class="identifier">reader</span><span class="special">.</span><span class="identifier">end</span><span class="special">();</span>

<span class="keyword">for</span><span class="special">(</span> <span class="keyword">int</span> <span class="identifier">row</span> <span class="special">=</span> <span class="number">0</span><span class="special">;</span> <span class="identifier">it</span> <span class="special">!=</span> <span class="identifier">end</span><span class="special">;</span> <span class="special">++</span><span class="identifier">it</span><span class="special">,</span> <span class="special">++</span><span class="identifier">row</span> <span class="special">)</span>
<span class="special">{</span>
    <span class="identifier">copy_pixels</span><span class="special">(</span> <span class="identifier">interleaved_view</span><span class="special">(</span> <span class="identifier">reader</span><span class="special">.</span><span class="identifier">_info</span><span class="special">.</span><span class="identifier">_width</span>
                                    <span class="special">,</span> <span class="number">1</span>
                                    <span class="special">,</span> <span class="special">(</span> <span class="identifier">image_t</span><span class="special">::</span><span class="identifier">view_t</span><span class="special">::</span><span class="identifier">x_iterator</span> <span class="special">)</span> <span class="special">*</span><span class="identifier">it</span>
                                    <span class="special">,</span> <span class="identifier">reader</span><span class="special">.</span><span class="identifier">_scanline_length</span>
                                    <span class="special">)</span>
                <span class="special">,</span> <span class="identifier">subimage_view</span><span class="special">(</span> <span class="identifier">view</span><span class="special">(</span> <span class="identifier">dst</span> <span class="special">)</span>
                                <span class="special">,</span> <span class="number">0</span>
                                <span class="special">,</span> <span class="identifier">row</span>
                                <span class="special">,</span> <span class="identifier">reader</span><span class="special">.</span><span class="identifier">_info</span><span class="special">.</span><span class="identifier">_width</span>
                                <span class="special">,</span> <span class="number">1</span>
                                <span class="special">)</span>
                <span class="special">);</span>
<span class="special">}</span>
</pre>
<p>
      There are many ways to travese an image but for as of now only by scanline
      is supported.
    </p>
<h3>
<a name="gil.io.using_io.h2"></a>
      <span class="phrase"><a name="gil.io.using_io.write_interface"></a></span><a class="link" href="using_io.html#gil.io.using_io.write_interface">Write
      Interface</a>
    </h3>
<p>
      There is only one function for writing out images, write_view. Similar to reading
      the first parameter is either a filename or a device. The filename can be anything
      from a c string, std::string, std::wstring, and a boost::filesystem path. When
      using the path object the user needs to define the ADD_FS_PATH_SUPPORT compiler
      symbol to include the boost::filesystem dependency. Devices could be a FILE*,
      std::ifstream, and a TIFF* for TIFF images.
    </p>
<p>
      The second parameter is an view object to image being written. The third and
      last parameter is either a tag or an image_write_info&lt; FormatTag &gt; object
      containing more settings. One example for instance is the jpeg quality. Refer
      to the format specific sections under 3.3. to have a list of all the possible
      settings.
    </p>
<p>
      Writing an any_image&lt;...&gt; is supported. See the following example:
    </p>
<pre class="programlisting"><span class="keyword">typedef</span> <span class="identifier">mpl</span><span class="special">::</span><span class="identifier">vector</span><span class="special">&lt;</span> <span class="identifier">gray8_image_t</span>
                   <span class="special">,</span> <span class="identifier">gray16_image_t</span>
                   <span class="special">,</span> <span class="identifier">rgb8_image_t</span>
                   <span class="special">,</span> <span class="identifier">rgba_image_t</span>
                   <span class="special">&gt;</span> <span class="identifier">my_img_types</span><span class="special">;</span>


<span class="identifier">any_image</span><span class="special">&lt;</span> <span class="identifier">my_img_types</span> <span class="special">&gt;</span> <span class="identifier">runtime_image</span><span class="special">;</span>

<span class="comment">// fill any_image </span>

<span class="identifier">write_view</span><span class="special">(</span> <span class="identifier">filename</span>
          <span class="special">,</span> <span class="identifier">view</span><span class="special">(</span> <span class="identifier">runtime_image</span> <span class="special">)</span>
          <span class="special">,</span> <span class="identifier">tiff_tag</span><span class="special">()</span>
          <span class="special">);</span>
</pre>
<h3>
<a name="gil.io.using_io.h3"></a>
      <span class="phrase"><a name="gil.io.using_io.compiler_symbols"></a></span><a class="link" href="using_io.html#gil.io.using_io.compiler_symbols">Compiler
      Symbols</a>
    </h3>
<p>
      The following table gives an overview of all supported compiler symbols that
      can be set by the user:
    </p>
<div class="table">
<a name="gil.io.using_io.t0"></a><p class="title"><b>Table&#160;1.1.&#160;Compiler Symbols</b></p>
<div class="table-contents"><table class="table" summary="Compiler Symbols">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>
              <p>
                Symbol
              </p>
            </th>
<th>
              <p>
                Description
              </p>
            </th>
</tr></thead>
<tbody>
<tr>
<td>
              <p>
                BOOST_GIL_IO_ENABLE_GRAY_ALPHA
              </p>
            </td>
<td>
              <p>
                Enable the color space "gray_alpha".
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                BOOST_GIL_IO_ADD_FS_PATH_SUPPORT
              </p>
            </td>
<td>
              <p>
                Enable boost::filesystem 3.0 library.
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                BOOST_GIL_IO_PNG_FLOATING_POINT_SUPPORTED
              </p>
            </td>
<td>
              <p>
                Use libpng in floating point mode. This symbol is incompatible with
                BOOST_GIL_IO_PNG_FIXED_POINT_SUPPORTED.
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                BOOST_GIL_IO_PNG_FIXED_POINT_SUPPORTED
              </p>
            </td>
<td>
              <p>
                Use libpng in integer mode. This symbol is incompatible with BOOST_GIL_IO_PNG_FLOATING_POINT_SUPPORTED.
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                BOOST_GIL_EXTENSION_IO_JPEG_C_LIB_COMPILED_AS_CPLUSPLUS
              </p>
            </td>
<td>
              <p>
                libjpeg is compiled as c++ lib.
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                BOOST_GIL_EXTENSION_IO_PNG_C_LIB_COMPILED_AS_CPLUSPLUS
              </p>
            </td>
<td>
              <p>
                libpng is compiled as c++ lib.
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                BOOST_GIL_EXTENSION_IO_RAW_C_LIB_COMPILED_AS_CPLUSPLUS
              </p>
            </td>
<td>
              <p>
                libraw is compiled as c++ lib.
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                BOOST_GIL_EXTENSION_IO_TIFF_C_LIB_COMPILED_AS_CPLUSPLUS
              </p>
            </td>
<td>
              <p>
                libtiff is compiled as c++ lib.
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                BOOST_GIL_IO_TEST_ALLOW_READING_IMAGES
              </p>
            </td>
<td>
              <p>
                Allow basic test images to be read from local hard drive. The paths
                can be set in paths.hpp
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                BOOST_GIL_IO_TEST_ALLOW_WRITING_IMAGES
              </p>
            </td>
<td>
              <p>
                Allow images to be written to the local hard drive. The paths can
                be set in paths.hpp
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                BOOST_GIL_IO_USE_BMP_TEST_SUITE_IMAGES
              </p>
            </td>
<td>
              <p>
                Run tests using the bmp test images suite. See <a href="http://entropymine.com/jason/bmpsuite/" target="_top">http://entropymine.com/jason/bmpsuite/</a>
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                BOOST_GIL_IO_USE_PNG_TEST_SUITE_IMAGES
              </p>
            </td>
<td>
              <p>
                Run tests using the png test images suite. See <a href="http://www.schaik.com/pngsuite/pngsuite.html" target="_top">http://www.schaik.com/pngsuite/pngsuite.html</a>
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                BOOST_GIL_IO_USE_PNM_TEST_SUITE_IMAGES
              </p>
            </td>
<td>
              <p>
                Run tests using the pnm test images suite. Send me an email for accessing
                the files.
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                BOOST_GIL_IO_USE_TARGA_FILEFORMAT_TEST_SUITE_IMAGES
              </p>
            </td>
<td>
              <p>
                Run tests using the targa file format test images suite. See <a href="http://www.fileformat.info/format/tga/sample/index.htm" target="_top">http://www.fileformat.info/format/tga/sample/index.htm</a>
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                BOOST_GIL_IO_USE_TIFF_LIBTIFF_TEST_SUITE_IMAGES
              </p>
            </td>
<td>
              <p>
                Run tests using the targa file format test images suite. See <a href="http://www.remotesensing.org/libtiff/images.html" target="_top">http://www.remotesensing.org/libtiff/images.html</a>
              </p>
            </td>
</tr>
<tr>
<td>
              <p>
                BOOST_GIL_IO_USE_TIFF_GRAPHICSMAGICK_TEST_SUITE_IMAGES
              </p>
            </td>
<td>
              <p>
                Run tests using the targa file format test images suite. See <a href="ftp://ftp.graphicsmagick.org/pub/tiff-samples/tiff-sample-images-be.tar.gz" target="_top">ftp://ftp.graphicsmagick.org/pub/tiff-samples/tiff-sample-images-be.tar.gz</a>
              </p>
            </td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><h3>
<a name="gil.io.using_io.h4"></a>
      <span class="phrase"><a name="gil.io.using_io.supported_image_formats"></a></span><a class="link" href="using_io.html#gil.io.using_io.supported_image_formats">Supported
      Image Formats</a>
    </h3>
<h4>
<a name="gil.io.using_io.h5"></a>
      <span class="phrase"><a name="gil.io.using_io.bmp"></a></span><a class="link" href="using_io.html#gil.io.using_io.bmp">BMP</a>
    </h4>
<p>
      For a general overview of the BMP image file format go to the following <a href="http://en.wikipedia.org/wiki/BMP_file_format" target="_top">http://en.wikipedia.org/wiki/BMP_file_format</a>.
    </p>
<p>
      Please note, the code has not been tested on X Windows System variations of
      the BMP format which are usually referred to XBM and XPM formats.
    </p>
<p>
      Here, only the MS Windows and OS/2 format is relevant.
    </p>
<p>
      Currently the code is able to read and write the following image types:
    </p>
<p>
      Read: gray1_image_t, gray4_image_t, gray8_image_t, rgb8_image_t and, rgba8_image_t
      Write: rgb8_image_t and, rgba8_image_t
    </p>
<p>
      The lack of having an indexed image type in gil restricts the current interface
      to only write out non-indexed images. This is subject to change soon.
    </p>
<h4>
<a name="gil.io.using_io.h6"></a>
      <span class="phrase"><a name="gil.io.using_io.jpeg"></a></span><a class="link" href="using_io.html#gil.io.using_io.jpeg">JPEG</a>
    </h4>
<p>
      For a general overview of the JPEG image file format go to the following <a href="http://en.wikipedia.org/wiki/JPEG" target="_top">http://en.wikipedia.org/wiki/JPEG</a>.
    </p>
<p>
      This jpeg extension is based on the libjpeg library which can be found here,
      <span class="underline">JPEG_Lib</span>.
    </p>
<p>
      The user has to make sure this library is properly installed. I strongly recommend
      the user to build the library yourself. It could potentially save you a lot
      of trouble.
    </p>
<p>
      Currently the code is able to read and write the following image types:
    </p>
<p>
      Read: gray8_image_t, rgb8_image_t, cmyk8_image_t Write: gray8_image_t, rgb8_image_t,
      cmyk8_image_t
    </p>
<p>
      Reading YCbCr or YCCK images is possible but might result in inaccuracies since
      both color spaces aren't available yet for gil. For now these color space are
      read as rgb images. This is subject to change soon.
    </p>
<h4>
<a name="gil.io.using_io.h7"></a>
      <span class="phrase"><a name="gil.io.using_io.png"></a></span><a class="link" href="using_io.html#gil.io.using_io.png">PNG</a>
    </h4>
<p>
      For a general overview of the PNG image file format go to the following <a href="http://en.wikipedia.org/wiki/Portable_Network_Graphics" target="_top">http://en.wikipedia.org/wiki/Portable_Network_Graphics</a>.
    </p>
<p>
      This png extension is based on the libpng, which can be found here, _PNG_Lib.
    </p>
<p>
      The user has to make sure this library is properly installed. I strongly recommend
      the user to build the library yourself. It could potentially save you a lot
      of trouble.
    </p>
<p>
      Currently the code is able to read and write the following image types:
    </p>
<p>
      Read: gray1, gray2, gray4, gray8, gray16, gray_alpha_8, gray_alpha_16, rgb8,
      rgb16, rgba8, rgba16 Write: gray1, gray2, gray4, gray8, gray16, gray_alpha_8,
      gray_alpha_16, rgb8, rgb16, rgba8, rgba16
    </p>
<p>
      For reading gray_alpha images the user has to enable the ENABLE_GRAY_ALPHA
      compiler switch. This color space is defined in the toolbox by using gray_alpha.hpp.
    </p>
<h4>
<a name="gil.io.using_io.h8"></a>
      <span class="phrase"><a name="gil.io.using_io.pnm"></a></span><a class="link" href="using_io.html#gil.io.using_io.pnm">PNM</a>
    </h4>
<p>
      For a general overview of the PNM image file format go to the following <a href="http://en.wikipedia.org/wiki/Portable_anymap" target="_top">http://en.wikipedia.org/wiki/Portable_anymap</a>.
    </p>
<p>
      No external library is needed for the pnm format. Both ascii and binary formats
      are supported.
    </p>
<p>
      Currently the code is able to read and write the following image types:
    </p>
<p>
      Read: gray1, gray8, rgb8 Write: gray1, gray8, rgb8
    </p>
<p>
      When reading a mono text image the data is read as a gray8 image.
    </p>
<h4>
<a name="gil.io.using_io.h9"></a>
      <span class="phrase"><a name="gil.io.using_io.raw"></a></span><a class="link" href="using_io.html#gil.io.using_io.raw">RAW</a>
    </h4>
<p>
      For a general overview see _RAW_Wiki.
    </p>
<p>
      Currently the extension is only able to read rgb8 images.
    </p>
<h4>
<a name="gil.io.using_io.h10"></a>
      <span class="phrase"><a name="gil.io.using_io.targa"></a></span><a class="link" href="using_io.html#gil.io.using_io.targa">TARGA</a>
    </h4>
<p>
      For a general overview of the BMP image file format go to the following <span class="underline">TARGA_Wiki</span>.
    </p>
<p>
      Currently the code is able to read and write the following image types:
    </p>
<p>
      Read: rgb8_image_t and rgba8_image_t Write: rgb8_image_t and rgba8_image_t
    </p>
<p>
      The lack of having an indexed image type in gil restricts the current interface
      to only write out non-indexed images. This is subject to change soon.
    </p>
<h4>
<a name="gil.io.using_io.h11"></a>
      <span class="phrase"><a name="gil.io.using_io.tiff"></a></span><a class="link" href="using_io.html#gil.io.using_io.tiff">TIFF</a>
    </h4>
<p>
      For a general overview of the TIFF image file format go to the following <a href="http://en.wikipedia.org/wiki/Tagged_Image_File_Format" target="_top">http://en.wikipedia.org/wiki/Tagged_Image_File_Format</a>.
    </p>
<p>
      This tiff extension is based on the libtiff, which can be found, <a href="http://www.remotesensing.org/libtiff/" target="_top">http://www.remotesensing.org/libtiff/</a>.
    </p>
<p>
      The user has to make sure this library is properly installed. I strongly recommend
      the user to build the library yourself. It could potentially save you a lot
      of trouble.
    </p>
<p>
      TIFF images can virtually encode all kinds of channel sizes representing various
      color spaces. Even planar images are possible. For instance, rbg323 or gray7.
      The channels also can have specific formats, like integer values or floating
      point values. For a complete set of options please consult the following websites:
    </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
          <a href="http://www.awaresystems.be/imaging/tiff/tifftags/baseline.html" target="_top">http://www.awaresystems.be/imaging/tiff/tifftags/baseline.html</a>
        </li>
<li class="listitem">
          <a href="http://www.awaresystems.be/imaging/tiff/tifftags/extension.html" target="_top">http://www.awaresystems.be/imaging/tiff/tifftags/extension.html</a>
        </li>
</ul></div>
<p>
      The author of this extension is not claiming all tiff formats are supported.
      This extension is likely to be a moving target adding new features with each
      new milestone. Here is an incomplete lists:
    </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
          Multi-page tiffs - read only
        </li>
<li class="listitem">
          Strip tiffs - read and write support
        </li>
<li class="listitem">
          Tiled tiffs - read and write support with user defined tiled sizes
        </li>
<li class="listitem">
          bit images tiffs - fully supported, like gray1_image_t ( minisblack )
        </li>
<li class="listitem">
          planar tiffs - fully supported
        </li>
<li class="listitem">
          floating point tiffs - fully supported
        </li>
<li class="listitem">
          palette tiffs - supported but no indexed image type is available as of
          now
        </li>
</ul></div>
<p>
      This gil extension uses two different test image suites to test read and write
      capabilities. See test_image folder. It's advisable to use ImageMagick's test
      viewer to display images.
    </p>
<h3>
<a name="gil.io.using_io.h12"></a>
      <span class="phrase"><a name="gil.io.using_io.extending_gil__io_with_new_formats"></a></span><a class="link" href="using_io.html#gil.io.using_io.extending_gil__io_with_new_formats">Extending
      GIL::IO with new Formats</a>
    </h3>
<p>
      Extending the gil::io with new formats is meant to be simple and straightforward.
      Before adding I would recommend to have a look at existing implementations
      and then trying to follow a couple of guidelines:
    </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
          Create the following files for your new xxx format
          <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; ">
<li class="listitem">
                xxx_read.hpp // Only includes read code
              </li>
<li class="listitem">
                xxx_write.hpp // Only includes write code
              </li>
<li class="listitem">
                xxx_all.hpp // includes xxx_read.hpp and xxx_write.hpp
              </li>
</ul></div>
        </li>
<li class="listitem">
          Add the code to the boost::gil::detail namespace
        </li>
<li class="listitem">
          Create a tag type for the new format. Like this:
<pre class="programlisting"><span class="keyword">struct</span> <span class="identifier">xxx_tag</span> <span class="special">:</span> <span class="identifier">format_tag</span> <span class="special">{};</span>
</pre>
        </li>
<li class="listitem">
          Create the image_read_info for the new format. It contains all the information
          that are necessary to read an image. It should be filled and returned by
          the get_info() member of the reader class. See below.
<pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;&gt;</span> <span class="keyword">struct</span> <span class="identifier">image_read_info</span><span class="special">&lt;</span> <span class="identifier">xxx_tag</span> <span class="special">&gt;</span> <span class="special">{};</span>
</pre>
        </li>
<li class="listitem">
          Create the image_write_info for the new format. It contains all the information
          that are necessary to write an image.
<pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;&gt;</span> <span class="keyword">struct</span> <span class="identifier">image_write_info</span><span class="special">&lt;</span> <span class="identifier">xxx_tag</span> <span class="special">&gt;</span> <span class="special">{};</span>
</pre>
        </li>
<li class="listitem">
          Use the following reader skeleton as a start:
<pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span> <span class="keyword">typename</span> <span class="identifier">Device</span>
        <span class="special">,</span> <span class="keyword">typename</span> <span class="identifier">ConversionPolicy</span>
        <span class="special">&gt;</span>
<span class="keyword">class</span> <span class="identifier">reader</span><span class="special">&lt;</span> <span class="identifier">Device</span>
            <span class="special">,</span> <span class="identifier">xxx_tag</span>
            <span class="special">,</span> <span class="identifier">ConversionPolicy</span>
            <span class="special">&gt;</span>
            <span class="special">:</span> <span class="keyword">public</span> <span class="identifier">reader_base</span><span class="special">&lt;</span> <span class="identifier">xxx_tag</span>
                                <span class="special">,</span> <span class="identifier">ConversionPolicy</span>
                                <span class="special">&gt;</span>
<span class="special">{</span>
<span class="keyword">private</span><span class="special">:</span>

    <span class="keyword">typedef</span> <span class="keyword">typename</span> <span class="identifier">ConversionPolicy</span><span class="special">::</span><span class="identifier">color_converter_type</span> <span class="identifier">cc_t</span><span class="special">;</span>

<span class="keyword">public</span><span class="special">:</span>

    <span class="identifier">reader</span><span class="special">(</span> <span class="identifier">Device</span><span class="special">&amp;</span> <span class="identifier">device</span> <span class="special">)</span>
    <span class="special">:</span> <span class="identifier">_io_dev</span><span class="special">(</span> <span class="identifier">device</span> <span class="special">)</span>
    <span class="special">{}</span>

    <span class="identifier">reader</span><span class="special">(</span> <span class="identifier">Device</span><span class="special">&amp;</span>     <span class="identifier">device</span>
          <span class="special">,</span> <span class="keyword">const</span> <span class="identifier">cc_t</span><span class="special">&amp;</span> <span class="identifier">cc</span>
          <span class="special">)</span>
    <span class="special">:</span> <span class="identifier">_io_dev</span><span class="special">(</span> <span class="identifier">device</span> <span class="special">)</span>
    <span class="special">,</span> <span class="identifier">reader_base</span><span class="special">&lt;</span> <span class="identifier">xxx_tag</span>
                 <span class="special">,</span> <span class="identifier">ConversionPolicy</span>
                 <span class="special">&gt;(</span> <span class="identifier">cc</span> <span class="special">)</span>
    <span class="special">{}</span>

    <span class="identifier">image_read_info</span><span class="special">&lt;</span> <span class="identifier">xxx_tag</span> <span class="special">&gt;</span> <span class="identifier">get_info</span><span class="special">()</span>
    <span class="special">{</span>
        <span class="comment">// your implementation here</span>
    <span class="special">}</span>

    <span class="keyword">template</span><span class="special">&lt;</span> <span class="keyword">typename</span> <span class="identifier">View</span> <span class="special">&gt;</span>
    <span class="keyword">void</span> <span class="identifier">apply</span><span class="special">(</span> <span class="keyword">const</span> <span class="identifier">View</span><span class="special">&amp;</span> <span class="identifier">dst_view</span> <span class="special">)</span>
    <span class="special">{</span>
        <span class="comment">// your implementation here</span>
    <span class="special">}</span>
<span class="special">};</span>
</pre>
        </li>
<li class="listitem">
          The writer skeleton:
<pre class="programlisting"><span class="keyword">template</span><span class="special">&lt;</span> <span class="keyword">typename</span> <span class="identifier">Device</span> <span class="special">&gt;</span>
<span class="keyword">class</span> <span class="identifier">writer</span><span class="special">&lt;</span> <span class="identifier">Device</span>
            <span class="special">,</span> <span class="identifier">xxx_tag</span>
            <span class="special">&gt;</span>
<span class="special">{</span>
<span class="keyword">public</span><span class="special">:</span>

    <span class="identifier">writer</span><span class="special">(</span> <span class="identifier">Device</span> <span class="special">&amp;</span> <span class="identifier">file</span> <span class="special">)</span>
    <span class="special">:</span> <span class="identifier">out</span><span class="special">(</span><span class="identifier">file</span><span class="special">)</span>
    <span class="special">{}</span>

    <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">View</span><span class="special">&gt;</span>
    <span class="keyword">void</span> <span class="identifier">apply</span><span class="special">(</span> <span class="keyword">const</span> <span class="identifier">View</span><span class="special">&amp;</span> <span class="identifier">view</span> <span class="special">)</span>
    <span class="special">{</span>
        <span class="comment">// your implementation here</span>
    <span class="special">}</span>

    <span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">View</span><span class="special">&gt;</span>
    <span class="keyword">void</span> <span class="identifier">apply</span><span class="special">(</span> <span class="keyword">const</span> <span class="identifier">View</span><span class="special">&amp;</span>                        <span class="identifier">view</span>
              <span class="special">,</span> <span class="keyword">const</span> <span class="identifier">image_write_info</span><span class="special">&lt;</span> <span class="identifier">xxx_tag</span> <span class="special">&gt;&amp;</span> <span class="identifier">info</span> <span class="special">)</span>
    <span class="special">{</span>
        <span class="comment">// your implementation here</span>
    <span class="special">}</span>
<span class="special">};</span>
</pre>
        </li>
</ul></div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2013 Christian Henning<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="tutorial.html"><img src="../../../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../../index.html"><img src="../../../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="running_gil__io_tests.html"><img src="../../../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
</body>
</html>
