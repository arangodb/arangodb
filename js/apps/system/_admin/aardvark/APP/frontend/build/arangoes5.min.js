"use strict";module.define("org/arangodb-common",function(a,b){var c=require("internal"),d=require("fs"),e=require("org/arangodb/mimetypes").mimeTypes;Object.keys(c.errors).forEach(function(b){a[b]=c.errors[b].code}),a.errors=c.errors,a.ArangoError=c.ArangoError,a.defineModule=function(a,e){var f,g,h;f=d.read(e),h=c.db._collection("_modules"),null===h&&(h=c.db._create("_modules",{isSystem:!0})),a=b.normalize(a),g=h.firstExample({path:a}),null===g?h.save({path:a,content:f}):h.replace(g,{path:a,content:f})},a.guessContentType=function(a,b){var c=/\.([a-zA-Z0-9]+)$/,d=c.exec(a);if(null!==d){var f=d[1];if(e.hasOwnProperty(f)){var g=e[f];return g[1]?g[0]+"; charset=utf-8":g[0]}}return b?b:"text/plain; charset=utf-8"},a.normalizeURL=function(a){var b,c,d,e,f,g;if(""===a)return"./";for(d=a.split("/"),"."===d[0]||".."===d[0]?(f=d[0]+"/",d.shift(),e=d):""===d[0]?(f="/",d.shift(),e=d):(f="./",e=d),c=[],b=0;b<e.length;++b)if(g=e[b],".."===g)if(0===c.length)if("../"===f)c.push(g);else{if("./"!==f)throw"cannot use '..' to escape top-level-directory";f="../"}else".."===c[c.length-1]?c.push(g):c.pop();else""!==g&&"."!==g&&c.push(g);return f+c.join("/")},a.inspect=c.inspect,a.output=function(){c.output.apply(c.output,arguments)},a.print=c.print,a.printf=c.printf,a.sprintf=c.sprintf,a.printObject=c.printObject,a.printTable=function(b,d,e){e=e||{},void 0===e.totalString&&(e.totalString="%s document(s)\n");var f,g,h,i,j,k="...";void 0===d?i=b[0]:Array.isArray(d)?(i={},d.forEach(function(a){i[a]=null})):i=d,j=0,f=[],g=[[]];for(h in i)if(i.hasOwnProperty(h)){var l=null;d&&d.hasOwnProperty(h)&&d[h]>0&&(l=d[h]>=k.length?d[h]:k.length);var m=h;e.hasOwnProperty("rename")&&e.rename.hasOwnProperty(h)&&(m=e.rename[h]),f.push({id:h,fixedLength:l,length:l||m.length}),g[0][j++]=m}b.forEach(function(a,b){g[b+1]=[],f.forEach(function(c){if(a.hasOwnProperty(c.id)){var d;d=e.prettyStrings&&"string"==typeof a[c.id]?a[c.id]:JSON.stringify(a[c.id])||"",g[b+1].push(d),d.length>c.length&&!c.fixedLength&&(c.length=Math.min(d.length,100))}else g[b+1].push("")})});var n=function(){var b=[];return f.forEach(function(c){b.push(a.stringPadding("",c.length,"-","r"))}),e.framed?"+-"+b.join("-+-")+"-+\n":b.join("   ")+"\n"},o=function(){var d="";return e.framed&&(d+=n()),g.forEach(function(b,c){var g=[];b.forEach(function(c,d){var e=f[d].length,h=b[d];h.length>e&&(h=h.substr(0,e-k.length)+k),g.push(a.stringPadding(h,e," ","r"))}),d+=e.framed?"| "+g.join(" | ")+" |\n":g.join("   ")+"\n",0===c&&(d+=n())}),d+=n(),e.hideTotal||(d+=c.sprintf(e.totalString,String(b.length))),d};Array.isArray(b)&&(0===b.length?a.print(e.emptyString||"no document(s)"):a.print(o()))},a.stringPadding=function(a,b,c,d){function e(a,b){var c,d="";for(c=0;a>c;++c)d+=b;return d}if("undefined"==typeof b&&(b=0),"undefined"==typeof c&&(c=" "),b+1>=a.length)switch(d||"r"){case"l":a=e(b+1-a.length,c)+a;break;case"b":var f=b-a.length,g=Math.ceil(f/2),h=f-g;a=e(h+1,c)+a+e(g+1,c);break;default:a+=e(b+1-a.length,c)}return a},a.throwDownloadError=function(b){throw new a.ArangoError({errorNum:a.errors.ERROR_APPLICATION_DOWNLOAD_FAILED.code,errorMessage:a.errors.ERROR_APPLICATION_DOWNLOAD_FAILED.message+": "+String(b)})},a.throwFileNotFound=function(b){throw new a.ArangoError({errorNum:a.errors.ERROR_FILE_NOT_FOUND.code,errorMessage:a.errors.ERROR_FILE_NOT_FOUND.message+": "+String(b)})},a.throwBadParameter=function(b){throw new a.ArangoError({errorNum:a.errors.ERROR_BAD_PARAMETER.code,errorMessage:a.errors.ERROR_BAD_PARAMETER.message+": "+String(b)})},a.checkParameter=function(b,c,d){var e;for(e=0;e<c.length;++e){var f=c[e];"undefined"==typeof d[e]&&a.throwBadParameter(f[0]+" missing, usage: "+b),typeof d[e]!==f[1]&&a.throwBadParameter(f[0]+" should be a '"+f[1]+"', not '"+typeof d[e]+"'")}},a.checkAvailableVersions=function(a){var b,d=require("console");if(b=require("org/arangodb").isServer?d.info:c.print,void 0===a&&(a=c.version),null!==a.match(/beta|alpha|preview|devel/))return void b("You are using an alpha/beta/preview version ('"+a+"') of ArangoDB");try{var e="https://www.arangodb.com/repositories/versions.php?version=",f=c.download(e+a,"",{timeout:300}),g=JSON.parse(f.body);g.hasOwnProperty("bugfix")&&b("Please note that a new bugfix version '"+g.bugfix.version+"' is available"),g.hasOwnProperty("minor")&&b("Please note that a new minor version '"+g.minor.version+"' is available"),g.hasOwnProperty("major")&&b("Please note that a new major version '"+g.major.version+"' is available")}catch(h){d&&d.debug&&d.debug("cannot check for newer version: ",h.stack)}}}),module.define("org/arangodb",function(a,b){var c=require("internal"),d=require("org/arangodb-common");if(Object.keys(d).forEach(function(b){a[b]=d[b]}),a.isServer=!1,a.isClient=!0,a.ArangoCollection=require("org/arangodb/arango-collection").ArangoCollection,a.ArangoConnection=c.ArangoConnection,a.ArangoDatabase=require("org/arangodb/arango-database").ArangoDatabase,a.ArangoStatement=require("org/arangodb/arango-statement").ArangoStatement,a.ArangoQueryCursor=require("org/arangodb/arango-query-cursor").ArangoQueryCursor,"undefined"!=typeof c.arango)try{a.arango=c.arango,a.db=new a.ArangoDatabase(c.arango),c.db=a.db}catch(e){c.print("cannot connect to server: "+String(e))}a.plainServerVersion=function(){if(c.arango){var a=c.arango.getVersion(),b=a.match(/(.*)-(rc[0-9]*|devel)$/);return null!==b&&(a=b[1]),a}return void 0}}),module.define("org/arangodb/aql/explainer",function(a,b){function c(a){["COLOR_RESET","COLOR_CYAN","COLOR_BLUE","COLOR_GREEN","COLOR_MAGENTA","COLOR_YELLOW","COLOR_RED","COLOR_WHITE","COLOR_BOLD_CYAN","COLOR_BOLD_BLUE","COLOR_BOLD_GREEN","COLOR_BOLD_MAGENTA","COLOR_BOLD_YELLOW","COLOR_BOLD_RED","COLOR_BOLD_WHITE"].forEach(function(b){A[b]=a?y[b]:""})}function d(a){return"`"+a+"`"}function e(a){return A.COLOR_CYAN+a+A.COLOR_RESET}function f(a){return A.COLOR_BLUE+a+A.COLOR_RESET}function g(a){return A.COLOR_GREEN+a+A.COLOR_RESET}function h(a){return"#"===a[0]?A.COLOR_MAGENTA+a+A.COLOR_RESET:A.COLOR_YELLOW+a+A.COLOR_RESET}function i(a){return A.COLOR_GREEN+a+A.COLOR_RESET}function j(a){return A.COLOR_RED+a+A.COLOR_RESET}function k(a){return"`"+A.COLOR_YELLOW+a+A.COLOR_RESET+"`"}function l(a){return A.COLOR_MAGENTA+a+A.COLOR_RESET}function m(a){return A.COLOR_BOLD_BLUE+a+A.COLOR_RESET}function n(a){return 0>a&&(a=0),new Array(a).join(" ")}function o(a,b){var c=".{1,"+b+"}(\\s|$)|\\S+?(\\s|$)";return a.match(new RegExp(c,"g")).join("\n")}function p(a){B.appendLine(m("Query string:")),B.appendLine(" "+g(o(a,100).replace(/\n+/g,"\n ",a))),B.appendLine()}function q(a){if(void 0!==a){B.appendLine(m("Write query options:"));var b=Object.keys(a),c="Option".length;b.forEach(function(a){a.length>c&&(c=a.length)}),B.appendLine(" "+l("Option")+n(1+c-"Option".length)+"   "+l("Value")),b.forEach(function(b){B.appendLine(" "+e(b)+n(1+c-b.length)+"   "+g(JSON.stringify(a[b])))}),B.appendLine()}}function r(a){if(B.appendLine(m("Optimization rules applied:")),0===a.length)B.appendLine(" "+g("none"));else{var b=String("Id").length;B.appendLine(" "+n(1+b-String("Id").length)+l("Id")+"   "+l("RuleName"));for(var c=0;c<a.length;++c)B.appendLine(" "+n(1+b-String(c+1).length)+h(String(c+1))+"   "+e(a[c]))}B.appendLine()}function s(a){if(Array.isArray(a)&&0!==a.length){B.appendLine(m("Warnings:"));var b=String("Code").length;B.appendLine(" "+n(1+b-String("Code").length)+l("Code")+"   "+l("Message"));for(var c=0;c<a.length;++c)B.appendLine(" "+n(1+b-String(a[c].code).length)+h(a[c].code)+"   "+e(a[c].message));B.appendLine()}}function t(a){if(B.appendLine(m("Indexes used:")),0===a.length)B.appendLine(" "+g("none"));else{var b=String("Id").length,c=String("Collection").length,f=String("Unique").length,i=String("Sparse").length,o=String("Type").length,p=String("Selectivity Est.").length,q=String("Fields").length;a.forEach(function(a){var e=String(a.node).length;e>b&&(b=e),e=a.type.length,e>o&&(o=e),e=a.fields.map(d).join(", ").length,e>q&&(q=e),e=a.collection.length,e>c&&(c=e)});var r=" "+n(1+b-String("Id").length)+l("Id")+"   "+l("Type")+n(1+o-"Type".length)+"   "+l("Collection")+n(1+c-"Collection".length)+"   "+l("Unique")+n(1+f-"Unique".length)+"   "+l("Sparse")+n(1+i-"Sparse".length)+"   "+l("Selectivity Est.")+"   "+l("Fields")+n(1+q-"Fields".length)+"   "+l("Ranges");B.appendLine(r);for(var s=0;s<a.length;++s){var t=a[s].unique?"true":"false",u=a[s].hasOwnProperty("sparse")?a[s].sparse?"true":"false":"n/a",v=a[s].fields.map(k).join(", "),w=a[s].fields.map(d).join(", ").length,x="[ "+a[s].ranges+" ]",y=a[s].hasOwnProperty("selectivityEstimate")?(100*a[s].selectivityEstimate).toFixed(2)+" %":"n/a";r=" "+n(1+b-String(a[s].node).length)+h(String(a[s].node))+"   "+e(a[s].type)+n(1+o-a[s].type.length)+"   "+j(a[s].collection)+n(1+c-a[s].collection.length)+"   "+g(t)+n(1+f-t.length)+"   "+g(u)+n(1+i-u.length)+"   "+n(1+p-y.length)+g(y)+"   "+v+n(1+q-w)+"   "+x,B.appendLine(r)}}}function u(a,b){var c={},d={},o=null,u=0,v=String("Id").length,w=String("Est.").length,x=b.plan,y=function X(a,b){a.forEach(function(a){c[a.id]=a,0===b&&0===a.dependencies.length&&(o=a.id),"SubqueryNode"===a.type&&X(a.subquery.nodes,b+1),a.dependencies.forEach(function(b){d.hasOwnProperty(b)||(d[b]=[]),d[b].push(a.id)}),String(a.id).length>v&&(v=String(a.id).length),String(a.type).length>u&&(u=String(a.type).length),String(a.estimatedNrItems).length>w&&(w=String(a.estimatedNrItems).length)})};y(x.nodes,0);var z,A={},C={},D={},E=[],F=!0,G=function(a){return/^[0-9_]/.test(a.name)?h("#"+a.name):(C.hasOwnProperty(a.id)&&(D[a.name]=C[a.id]),h(a.name))},H=function Y(a){var b=!0;a:for(;b;){var c=a;switch(d=h=void 0,b=!1,F=F&&-1!==["value","object","object element","array"].indexOf(c.type),c.type){case"reference":if(A.hasOwnProperty(c.name)){var d=A[c.name];if(delete A[c.name],Array.isArray(d)){var h=Y(d[1])+"["+new Array(d[0]+1).join("*");return"no-op"!==d[2].type&&(h+=" "+e("FILTER")+" "+Y(d[2])),"no-op"!==d[3].type&&(h+=" "+e("LIMIT ")+" "+Y(d[3])),"no-op"!==d[4].type&&(h+=" "+e("RETURN ")+" "+Y(d[4])),h+="]"}return Y(d)+"[*]"}return G(c);case"collection":return j(c.name)+"   "+f("/* all collection documents */");case"value":return g(JSON.stringify(c.value));case"object":return c.hasOwnProperty("subNodes")?"{ "+c.subNodes.map(Y).join(", ")+" }":"{ }";case"object element":return g(JSON.stringify(c.name))+" : "+Y(c.subNodes[0]);case"calculated object element":return"[ "+Y(c.subNodes[0])+" ] : "+Y(c.subNodes[1]);case"array":return c.hasOwnProperty("subNodes")?"[ "+c.subNodes.map(Y).join(", ")+" ]":"[ ]";case"unary not":return"! "+Y(c.subNodes[0]);case"unary plus":return"+ "+Y(c.subNodes[0]);case"unary minus":return"- "+Y(c.subNodes[0]);case"array limit":return Y(c.subNodes[0])+", "+Y(c.subNodes[1]);case"attribute access":return Y(c.subNodes[0])+"."+k(c.name);case"indexed access":return Y(c.subNodes[0])+"["+Y(c.subNodes[1])+"]";case"range":return Y(c.subNodes[0])+" .. "+Y(c.subNodes[1])+"   "+f("/* range */");case"expand":case"expansion":c.subNodes.length>2?A[c.subNodes[0].subNodes[0].name]=[c.levels,c.subNodes[0].subNodes[1],c.subNodes[2],c.subNodes[3],c.subNodes[4]]:A[c.subNodes[0].subNodes[0].name]=c.subNodes[0].subNodes[1],a=c.subNodes[1],b=!0;continue a;case"verticalizer":a=c.subNodes[0],b=!0;continue a;case"user function call":return i(c.name)+"("+(c.subNodes&&c.subNodes[0].subNodes||[]).map(Y).join(", ")+")   "+f("/* user-defined function */");case"function call":return i(c.name)+"("+(c.subNodes&&c.subNodes[0].subNodes||[]).map(Y).join(", ")+")";case"plus":return Y(c.subNodes[0])+" + "+Y(c.subNodes[1]);case"minus":return Y(c.subNodes[0])+" - "+Y(c.subNodes[1]);case"times":return Y(c.subNodes[0])+" * "+Y(c.subNodes[1]);case"division":return Y(c.subNodes[0])+" / "+Y(c.subNodes[1]);case"modulus":return Y(c.subNodes[0])+" % "+Y(c.subNodes[1]);case"compare not in":return Y(c.subNodes[0])+" not in "+Y(c.subNodes[1]);case"compare in":return Y(c.subNodes[0])+" in "+Y(c.subNodes[1]);case"compare ==":return Y(c.subNodes[0])+" == "+Y(c.subNodes[1]);case"compare !=":return Y(c.subNodes[0])+" != "+Y(c.subNodes[1]);case"compare >":return Y(c.subNodes[0])+" > "+Y(c.subNodes[1]);case"compare >=":return Y(c.subNodes[0])+" >= "+Y(c.subNodes[1]);case"compare <":return Y(c.subNodes[0])+" < "+Y(c.subNodes[1]);case"compare <=":return Y(c.subNodes[0])+" <= "+Y(c.subNodes[1]);case"logical or":return Y(c.subNodes[0])+" || "+Y(c.subNodes[1]);case"logical and":return Y(c.subNodes[0])+" && "+Y(c.subNodes[1]);case"ternary":return Y(c.subNodes[0])+" ? "+Y(c.subNodes[1])+" : "+Y(c.subNodes[2]);default:return"unhandled node type ("+c.type+")"}}},I=function(a,b,c){var d=c.isConstant?g(JSON.stringify(c.bound)):H(c.bound);return k(a)+" "+b[c.include?1:0]+" "+d},J=function(a){var b=[];return a.forEach(function(a){var c=a.attr;a.lowConst.hasOwnProperty("bound")&&a.highConst.hasOwnProperty("bound")&&JSON.stringify(a.lowConst.bound)===JSON.stringify(a.highConst.bound)&&(a.equality=!0),a.equality?a.lowConst.hasOwnProperty("bound")?b.push(I(c,["==","=="],a.lowConst)):a.hasOwnProperty("lows")&&a.lows.forEach(function(a){b.push(I(c,["==","=="],a))}):(a.lowConst.hasOwnProperty("bound")&&b.push(I(c,[">",">="],a.lowConst)),a.highConst.hasOwnProperty("bound")&&b.push(I(c,["<","<="],a.highConst)),a.hasOwnProperty("lows")&&a.lows.forEach(function(a){b.push(I(c,[">",">="],a))}),a.hasOwnProperty("highs")&&a.highs.forEach(function(a){b.push(I(c,["<","<="],a))}))}),b.length>1?"("+b.join(" && ")+")":b[0]},K=function(a){switch(a.type){case"SingletonNode":return e("ROOT");case"NoResultsNode":return e("EMPTY")+"   "+f("/* empty result set */");case"EnumerateCollectionNode":return C[a.outVariable.id]=a.collection,e("FOR")+" "+G(a.outVariable)+" "+e("IN")+" "+j(a.collection)+"   "+f("/* full collection scan"+(a.random?", random order":"")+" */");case"EnumerateListNode":return e("FOR")+" "+G(a.outVariable)+" "+e("IN")+" "+G(a.inVariable)+"   "+f("/* list iteration */");case"IndexRangeNode":C[a.outVariable.id]=a.collection;var b=a.index;return b.ranges=a.ranges.map(J).join(" || "),b.collection=a.collection,b.node=a.id,E.push(b),e("FOR")+" "+G(a.outVariable)+" "+e("IN")+" "+j(a.collection)+"   "+f("/* "+(a.reverse?"reverse ":"")+a.index.type+" index scan */");case"CalculationNode":return e("LET")+" "+G(a.outVariable)+" = "+H(a.expression)+"   "+f("/* "+a.expressionType+" expression */");case"FilterNode":return e("FILTER")+" "+G(a.inVariable);case"AggregateNode":return e("COLLECT")+" "+a.aggregates.map(function(a){return G(a.outVariable)+" = "+G(a.inVariable)}).join(", ")+(a.count?" "+e("WITH COUNT"):"")+(a.outVariable?" "+e("INTO")+" "+G(a.outVariable):"")+(a.keepVariables?" "+e("KEEP")+" "+a.keepVariables.map(function(a){return G(a)}).join(", "):"")+"   "+f("/* "+a.aggregationOptions.method+"*/");case"SortNode":return e("SORT")+" "+a.elements.map(function(a){return G(a.inVariable)+" "+e(a.ascending?"ASC":"DESC")}).join(", ");case"LimitNode":return e("LIMIT")+" "+g(JSON.stringify(a.offset))+", "+g(JSON.stringify(a.limit));case"ReturnNode":return e("RETURN")+" "+G(a.inVariable);case"SubqueryNode":return e("LET")+" "+G(a.outVariable)+" = ...   "+f("/* subquery */");case"InsertNode":return z=a.modificationFlags,e("INSERT")+" "+G(a.inVariable)+" "+e("IN")+" "+j(a.collection);case"UpdateNode":return z=a.modificationFlags,a.hasOwnProperty("inKeyVariable")?e("UPDATE")+" "+G(a.inKeyVariable)+" "+e("WITH")+" "+G(a.inDocVariable)+" "+e("IN")+" "+j(a.collection):e("UPDATE")+" "+G(a.inDocVariable)+" "+e("IN")+" "+j(a.collection);case"ReplaceNode":return z=a.modificationFlags,a.hasOwnProperty("inKeyVariable")?e("REPLACE")+" "+G(a.inKeyVariable)+" "+e("WITH")+" "+G(a.inDocVariable)+" "+e("IN")+" "+j(a.collection):e("REPLACE")+" "+G(a.inDocVariable)+" "+e("IN")+" "+j(a.collection);case"UpsertNode":return z=a.modificationFlags,e("UPSERT")+" "+G(a.inDocVariable)+" "+e("INSERT")+" "+G(a.insertVariable)+" "+e(a.isReplace?"REPLACE":"UPDATE")+" "+G(a.updateVariable)+" "+e("IN")+" "+j(a.collection);case"RemoveNode":return z=a.modificationFlags,e("REMOVE")+" "+G(a.inVariable)+" "+e("IN")+" "+j(a.collection);case"RemoteNode":return e("REMOTE");case"DistributeNode":return e("DISTRIBUTE");case"ScatterNode":return e("SCATTER");case"GatherNode":return e("GATHER")}return"unhandled node type ("+a.type+")"},L=0,M=[],N=function(a,b){return n(1+a+a)+(b?"* ":"- ")},O=function(a){D={},F=!0,"SubqueryNode"===a.type&&M.push(L)},P=function(a){-1!==["EnumerateCollectionNode","EnumerateListNode","IndexRangeNode","SubqueryNode"].indexOf(a.type)?L++:"ReturnNode"===a.type&&M.length>0?L=M.pop():"SingletonNode"===a.type&&L++},Q=function(){return F?"   "+f("/* const assignment */"):""},R=function(){var a=[];for(var b in D)D.hasOwnProperty(b)&&a.push(h(b)+" : "+j(D[b]));return a.length>0?"   "+f("/* collections used:")+" "+a.join(", ")+" "+f("*/"):""},S=function(a){O(a);var b=" "+n(1+v-String(a.id).length)+h(a.id)+"   "+e(a.type)+n(1+u-String(a.type).length)+"   "+n(1+w-String(a.estimatedNrItems).length)+g(a.estimatedNrItems)+"   "+N(L,"SingletonNode"===a.type)+K(a);"CalculationNode"===a.type&&(b+=R()+Q()),B.appendLine(b),P(a)};p(a),B.appendLine(m("Execution plan:"));var T=" "+n(1+v-String("Id").length)+l("Id")+"   "+l("NodeType")+n(1+u-String("NodeType").length)+"   "+n(1+w-String("Est.").length)+l("Est.")+"   "+l("Comment");B.appendLine(T);for(var U=[o];U.length>0;){var V=U.pop(),W=c[V];S(W),d.hasOwnProperty(V)&&(U=U.concat(d[V])),"SubqueryNode"===W.type&&(U=U.concat([W.subquery.nodes[0].id]))}B.appendLine(),t(E),B.appendLine(),r(x.rules),q(z),s(b.warnings)}function v(a,b,d){if("string"==typeof a&&(a={query:a}),!(a instanceof Object))throw"ArangoStatement needs initial data";b=b||{},c(void 0===b.colors?!0:b.colors);var e=w._createStatement(a),f=e.explain(b);return B.clearOutput(),u(a.query,f,!0),void 0===d||d?void z(B.getOutput()):B.getOutput()}var w=require("org/arangodb").db,x=require("internal"),y=x.COLORS,z=x.print,A={};"function"==typeof x.printBrowser&&(z=x.printBrowser);var B={output:"",appendLine:function(a){a?this.output+=a+"\n":this.output+="\n"},getOutput:function(){return this.output},clearOutput:function(){this.output=""}};a.explain=v}),module.define("org/arangodb/aql/functions",function(a,b){var c=require("internal"),d=require("org/arangodb"),e=d.db,f=d.ArangoError,g=function(){var a=e._collection("_aqlfunctions");if(null===a){var b=new f;throw b.errorNum=d.errors.ERROR_ARANGO_COLLECTION_NOT_FOUND.code,b.errorMessage="collection '_aqlfunctions' not found",b}return a},h=function(a){var b=[];if(null!==a&&void 0!==a&&a.length>0){var c=a.toUpperCase();a.length>1&&"::"!==a.substr(a.length-2,2)&&(c+="::"),g().toArray().forEach(function(a){a.name.toUpperCase().substr(0,c.length)===c&&b.push(a)})}else b=g().toArray();return b},i=function(a){if("string"!=typeof a||!a.match(/^[a-zA-Z0-9_]+(::[a-zA-Z0-9_]+)+$/)||"_"===a.substr(0,1)){var b=new f;throw b.errorNum=d.errors.ERROR_QUERY_FUNCTION_INVALID_NAME.code,b.errorMessage=d.errors.ERROR_QUERY_FUNCTION_INVALID_NAME.message,b}},j=function(a,b){if("function"==typeof a&&(a=String(a)+"\n"),"string"==typeof a){if(a="("+a+"\n)",!c.parse)return a;try{if(c.parse(a,b))return a}catch(e){}}var g=new f;throw g.errorNum=d.errors.ERROR_QUERY_FUNCTION_INVALID_CODE.code,g.errorMessage=d.errors.ERROR_QUERY_FUNCTION_INVALID_CODE.message,g},k=function(a){var b=null;i(a);try{b=g().document(a.toUpperCase())}catch(e){}if(null===b){var h=new f;throw h.errorNum=d.errors.ERROR_QUERY_FUNCTION_NOT_FOUND.code,h.errorMessage=c.sprintf(d.errors.ERROR_QUERY_FUNCTION_NOT_FOUND.message,a),h}return g().remove(b._id),c.reloadAqlFunctions(),!0},l=function(a){if(0===a.length){var b=new f;throw b.errorNum=d.errors.ERROR_BAD_PARAMETER.code,b.errorMessage=d.errors.ERROR_BAD_PARAMETER.message,b}var e=0;return h(a).forEach(function(a){g().remove(a._id),e++}),e>0&&c.reloadAqlFunctions(),e},m=function(a,b,h){i(a),b=j(b,a);var k,l="(function() { var callback = "+b+"; return callback; })()";try{if(c&&c.hasOwnProperty("executeScript")){var m=c.executeScript(l,void 0,"(user function "+a+")");if("function"!=typeof m)throw k=new f,k.errorNum=d.errors.ERROR_QUERY_FUNCTION_INVALID_CODE.code,k.errorMessage=d.errors.ERROR_QUERY_FUNCTION_INVALID_CODE.message+": code must be contained in function",k}}catch(n){throw k=new f,k.errorNum=d.errors.ERROR_QUERY_FUNCTION_INVALID_CODE.code,k.errorMessage=d.errors.ERROR_QUERY_FUNCTION_INVALID_CODE.message,k}var o=e._executeTransaction({collections:{write:g().name()},action:function(a){var b=!1,c=require("internal").db._collection(a.collection),d=a.name;try{var e=c.document(d.toUpperCase());null!==e&&(c.remove(e._key),b=!0)}catch(f){}var g={_key:d.toUpperCase(),name:d,code:a.code,isDeterministic:a.isDeterministic||!1};return c.save(g),b},params:{name:a,code:b,isDeterministic:h,collection:g().name()}});return c.reloadAqlFunctions(),o},n=function(a){var b=[];return h(a).forEach(function(a){b.push({name:a.name,code:a.code.substr(1,a.code.length-2).trim()})}),b};a.unregister=k,a.unregisterGroup=l,a.register=m,a.toArray=n}),module.define("org/arangodb/aql/queries",function(a,b){var c=require("internal"),d=require("org/arangodb/arangosh");a.clearSlow=function(){var a=c.db,b=a._connection.DELETE("/_api/query/slow","");return d.checkRequestResult(b),b},a.slow=function(){var a=c.db,b=a._connection.GET("/_api/query/slow","");return d.checkRequestResult(b),b},a.current=function(){var a=c.db,b=a._connection.GET("/_api/query/current","");return d.checkRequestResult(b),b},a.properties=function(a){var b,e=c.db;return b=void 0===a?e._connection.GET("/_api/query/properties"):e._connection.PUT("/_api/query/properties",JSON.stringify(a)),d.checkRequestResult(b),b},a.kill=function(a){"object"==typeof a&&a.hasOwnProperty("id")&&(a=a.id);var b=c.db,e=b._connection.DELETE("/_api/query/"+encodeURIComponent(a),"");return d.checkRequestResult(e),e}}),module.define("org/arangodb/arango-collection-common",function(a,b){var c=require("org/arangodb/arango-collection").ArangoCollection,d=require("org/arangodb"),e=d.ArangoError,f=d.sprintf,g=d.db,h=require("org/arangodb/simple-query"),i=h.SimpleQueryAll,j=h.SimpleQueryByExample,k=h.SimpleQueryByCondition,l=h.SimpleQueryRange,m=h.SimpleQueryGeo,n=h.SimpleQueryNear,o=h.SimpleQueryWithin,p=h.SimpleQueryWithinRectangle,q=h.SimpleQueryFulltext;c.STATUS_CORRUPTED=0,c.STATUS_NEW_BORN=1,c.STATUS_UNLOADED=2,c.STATUS_LOADED=3,c.STATUS_UNLOADING=4,c.STATUS_DELETED=5,c.STATUS_LOADING=6,c.TYPE_DOCUMENT=2,c.TYPE_EDGE=3,c.prototype._PRINT=function(a){var b="unknown",d="unknown",e=this.name();switch(this.status()){case c.STATUS_NEW_BORN:b="new born";break;case c.STATUS_UNLOADED:b="unloaded";break;case c.STATUS_UNLOADING:b="unloading";break;case c.STATUS_LOADED:b="loaded";break;case c.STATUS_CORRUPTED:b="corrupted";break;case c.STATUS_DELETED:b="deleted"}switch(this.type()){case c.TYPE_DOCUMENT:d="document";break;case c.TYPE_EDGE:d="edge"}var f=require("internal").COLORS,g=a.useColor;a.output+="[ArangoCollection ",g&&(a.output+=f.COLOR_NUMBER),a.output+=this._id,g&&(a.output+=f.COLOR_RESET),a.output+=', "',g&&(a.output+=f.COLOR_STRING),a.output+=e||"unknown",g&&(a.output+=f.COLOR_RESET),a.output+='" (type '+d+", status "+b+")]"},c.prototype.toString=function(){return"[ArangoCollection: "+this._id+"]"},c.prototype.all=function(){return new i(this)},c.prototype.byExample=function(a){var b,c;if(1===arguments.length)b=a;else for(b={},c=0;c<arguments.length;c+=2)b[arguments[c]]=arguments[c+1];return new j(this,b)},c.prototype.byExampleHash=function(a,b){var c=this.byExample(b);return c._index=a,c._type="hash",c},c.prototype.byExampleSkiplist=function(a,b){var c=this.byExample(b);return c._index=a,c._type="skiplist",c},c.prototype.byConditionSkiplist=function(a,b){var c=new k(this,b);return c._index=a,c._type="skiplist",c},c.prototype.range=function(a,b,c){return new l(this,a,b,c,0)},c.prototype.closedRange=function(a,b,c){return new l(this,a,b,c,1)},c.prototype.geo=function(a,b){var c,f=function(a,b,c){var d,e=a.getIndexes();for(d=0;d<e.length;++d){var f=e[d];if("geo1"===f.type&&f.fields[0]===b&&f.geoJson===c)return f}return null},g=function(a,b,c){var d,e=a.getIndexes();for(d=0;d<e.length;++d){var f=e[d];if("geo2"===f.type&&f.fields[0]===b&&f.fields[1]===c)return f}return null};if(c=void 0===b?"object"==typeof a?this.index(a):f(this,a,!1):"boolean"==typeof b?f(this,a,b):g(this,a,b),null===c){var h=new e;throw h.errorNum=d.errors.ERROR_QUERY_GEO_INDEX_MISSING.code,h.errorMessage=require("internal").sprintf(d.errors.ERROR_QUERY_GEO_INDEX_MISSING.message,this.name()),h}return new m(this,c.id)},c.prototype.near=function(a,b){return new n(this,a,b)},c.prototype.within=function(a,b,c){return new o(this,a,b,c)},c.prototype.withinRectangle=function(a,b,c,d){return new p(this,a,b,c,d)},c.prototype.fulltext=function(a,b,c){return new q(this,a,b,c)},c.prototype.iterate=function(a,b){var c,h,i,j=1,k=null;if(void 0!==b&&(b.hasOwnProperty("probability")&&(j=b.probability),b.hasOwnProperty("limit")&&(k=b.limit)),null===k)j>=1?h=this.all():(c=f("FOR d IN %s FILTER rand() >= @prob RETURN d",this.name()),c=g._createStatement({query:c}),1>j&&c.bind("prob",j),h=c.execute());else{if("number"!=typeof k){var l=new e;throw l.errorNum=d.errors.ERROR_ILLEGAL_NUMBER.code,l.errorMessage="expecting a number, got "+String(k),l}j>=1?h=this.all().limit(k):(c=f("FOR d IN %s FILTER rand() >= @prob LIMIT %d RETURN d",this.name(),k),c=g._createStatement({query:c}),1>j&&c.bind("prob",j),h=c.execute())}for(i=0;h.hasNext();){var m=h.next();a(m,i),i++}},c.prototype.removeByExample=function(a,b,c){throw"cannot call abstract removeByExample function"},c.prototype.replaceByExample=function(a,b,c,d){throw"cannot call abstract replaceByExample function"},c.prototype.updateByExample=function(a,b,c,d,e){throw"cannot call abstract updateExample function"}}),module.define("org/arangodb/arango-collection",function(a,b){function c(a,b){a.fields=[];var c,d=function(d){a.hasOwnProperty(d)||(a[d]=b[c][d])};for(c=0;c<b.length;++c)if("string"==typeof b[c])a.fields.push(b[c]);else if("object"==typeof b[c]&&!Array.isArray(b[c])&&null!==b[c]){Object.keys(b[c]).forEach(d);break}return a}function d(a,b){this._database=a,this._dbName=a._name(),"string"==typeof b?(this._id=null,this._name=b,this._status=null,this._type=null):void 0!==b?(this._id=b.id,this._name=b.name,this._status=b.status,this._type=b.type):(this._id=null,this._name=null,this._status=null,this._type=null)}var e=require("internal"),f=require("org/arangodb/arangosh");a.ArangoCollection=d,require("org/arangodb/arango-collection-common");var g=require("org/arangodb").ArangoError;d.prototype._appendSyncParameter=function(a,b){return b&&(a+=-1===a.indexOf("?")?"?":"&",a+="waitForSync=true"),a},d.prototype._prefixurl=function(a){return"/_db/"===a.substr(0,5)?a:"/"===a[0]?"/_db/"+encodeURIComponent(this._dbName)+a:"/_db/"+encodeURIComponent(this._dbName)+"/"+a},d.prototype._baseurl=function(a){var b=this._database._collectionurl(this.name());return a&&(b+="/"+a),this._prefixurl(b)},d.prototype._documenturl=function(a){var b,c=a.split("/");return b=1===c.length?this._database._documenturl(this.name()+"/"+a,this.name()):this._database._documenturl(a,this.name()),this._prefixurl(b)},d.prototype._indexurl=function(){return this._prefixurl("/_api/index?collection="+encodeURIComponent(this.name()))},d.prototype._edgesQuery=function(a,b){if(a instanceof Array){var c,d=[];for(c=0;c<a.length;++c){var e=this._edgesQuery(a[c],b);d.push.apply(d,e)}return d}a.hasOwnProperty("_id")&&(a=a._id);var g="/_api/edges/"+encodeURIComponent(this.name())+"?vertex="+encodeURIComponent(a)+(b?"&direction="+b:""),h=this._database._connection.GET(this._prefixurl(g));return f.checkRequestResult(h),h.edges},d.prototype.toArray=function(){return this.all().toArray()};var h=f.createHelpHeadline("ArangoCollection help")+'ArangoCollection constructor:                                             \n > col = db.mycoll;                                                       \n > col = db._create("mycoll");                                            \n                                                                          \nAdministration Functions:                                                 \n  name()                                collection name                   \n  status()                              status of the collection          \n  type()                                type of the collection            \n  truncate()                            delete all documents              \n  properties()                          show collection properties        \n  drop()                                delete a collection               \n  load()                                load a collection into memory     \n  unload()                              unload a collection from memory   \n  rename(<new-name>)                    renames a collection              \n  getIndexes()                          return defined indexes            \n  refresh()                             refreshes the status and name     \n  _help()                               this help                         \n                                                                          \nDocument Functions:                                                       \n  count()                               return number of documents        \n  save(<data>)                          create document and return handle \n  document(<id>)                        get document by handle (_id or _key)\n  replace(<id>, <data>, <overwrite>)    overwrite document                \n  update(<id>, <data>, <overwrite>,     partially update document         \n         <keepNull>)                                                      \n  remove(<id>)                          delete document                   \n  exists(<id>)                          checks whether a document exists  \n  first()                               first inserted/updated document   \n  last()                                last inserted/updated document    \n                                                                          \nAttributes:                                                               \n  _database                             database object                   \n  _id                                   collection identifier             ';d.prototype._help=function(){e.print(h)},d.prototype.name=function(){return null===this._name&&this.refresh(),this._name},d.prototype.status=function(){var a;return null===this._status&&this.refresh(),a=this._status,this._status===d.STATUS_UNLOADING&&(this._status=null),a},d.prototype.type=function(){return null===this._type&&this.refresh(),this._type},d.prototype.properties=function(a){var b,c,d={doCompact:!0,journalSize:!0,isSystem:!1,isVolatile:!1,waitForSync:!0,shardKeys:!1,numberOfShards:!1,keyOptions:!1,indexBuckets:!0};if(void 0===a)c=this._database._connection.GET(this._baseurl("properties")),f.checkRequestResult(c);else{var e={};for(b in d)d.hasOwnProperty(b)&&d[b]&&a.hasOwnProperty(b)&&(e[b]=a[b]);c=this._database._connection.PUT(this._baseurl("properties"),JSON.stringify(e)),f.checkRequestResult(c)}var g={};for(b in d)d.hasOwnProperty(b)&&c.hasOwnProperty(b)&&void 0!==c[b]&&(g[b]=c[b]);return g},d.prototype.rotate=function(){var a=this._database._connection.PUT(this._baseurl("rotate"),"");return f.checkRequestResult(a),a.result},d.prototype.figures=function(){var a=this._database._connection.GET(this._baseurl("figures"));return f.checkRequestResult(a),a.figures},d.prototype.checksum=function(a,b){var c="";a&&(c+="?withRevisions=true"),b&&(c+=(""===c?"?":"&")+"withData=true");var d=this._database._connection.GET(this._baseurl("checksum")+c);return f.checkRequestResult(d),{checksum:d.checksum,revision:d.revision}},d.prototype.revision=function(){var a=this._database._connection.GET(this._baseurl("revision"));return f.checkRequestResult(a),a.revision},d.prototype.drop=function(){var a=this._database._connection.DELETE(this._baseurl());f.checkRequestResult(a),this._status=d.STATUS_DELETED;
var b,c=this._database;for(b in c)if(c.hasOwnProperty(b)){var e=c[b];e instanceof d&&e.name()===this.name()&&delete c[b]}},d.prototype.truncate=function(){var a=this._database._connection.PUT(this._baseurl("truncate"),"");f.checkRequestResult(a),this._status=null},d.prototype.load=function(a){var b={count:!0};void 0!==a&&(b.count=a);var c=this._database._connection.PUT(this._baseurl("load"),JSON.stringify(b));f.checkRequestResult(c),this._status=null},d.prototype.unload=function(){var a=this._database._connection.PUT(this._baseurl("unload"),"");f.checkRequestResult(a),this._status=null},d.prototype.rename=function(a){var b={name:a},c=this._database._connection.PUT(this._baseurl("rename"),JSON.stringify(b));f.checkRequestResult(c),delete this._database[this._name],this._database[a]=this,this._status=null,this._name=null},d.prototype.refresh=function(){var a=this._database._connection.GET(this._database._collectionurl(this._id)+"?useId=true");f.checkRequestResult(a),this._name=a.name,this._status=a.status,this._type=a.type},d.prototype.getIndexes=function(a){var b=this._database._connection.GET(this._indexurl()+"&withStats="+(a||!1));return f.checkRequestResult(b),b.indexes},d.prototype.index=function(a){a.hasOwnProperty("id")&&(a=a.id);var b=this._database._connection.GET(this._database._indexurl(a,this.name()));return f.checkRequestResult(b),b},d.prototype.dropIndex=function(a){a.hasOwnProperty("id")&&(a=a.id);var b=this._database._connection.DELETE(this._database._indexurl(a,this.name()));return null!==b&&b.error===!0&&b.errorNum===e.errors.ERROR_ARANGO_INDEX_NOT_FOUND.code?!1:(f.checkRequestResult(b),!0)},d.prototype.ensureCapConstraint=function(a,b){var c={type:"cap",size:a||void 0,byteSize:b||void 0},d=this._database._connection.POST(this._indexurl(),JSON.stringify(c));return f.checkRequestResult(d),d},d.prototype.ensureUniqueSkiplist=function(){var a=c({type:"skiplist",unique:!0},arguments),b=this._database._connection.POST(this._indexurl(),JSON.stringify(a));return f.checkRequestResult(b),b},d.prototype.ensureSkiplist=function(){var a=c({type:"skiplist",unique:!1},arguments),b=this._database._connection.POST(this._indexurl(),JSON.stringify(a));return f.checkRequestResult(b),b},d.prototype.ensureFulltextIndex=function(a,b){var c={type:"fulltext",minLength:b||void 0,fields:[a]},d=this._database._connection.POST(this._indexurl(),JSON.stringify(c));return f.checkRequestResult(d),d},d.prototype.ensureUniqueConstraint=function(){var a=c({type:"hash",unique:!0},arguments),b=this._database._connection.POST(this._indexurl(),JSON.stringify(a));return f.checkRequestResult(b),b},d.prototype.ensureHashIndex=function(){var a=c({type:"hash",unique:!1},arguments),b=this._database._connection.POST(this._indexurl(),JSON.stringify(a));return f.checkRequestResult(b),b},d.prototype.ensureGeoIndex=function(a,b){var c;if("string"!=typeof a)throw"usage: ensureGeoIndex(<lat>, <lon>) or ensureGeoIndex(<loc>[, <geoJson>])";c="boolean"==typeof b?{type:"geo",fields:[a],geoJson:b}:void 0===b?{type:"geo",fields:[a],geoJson:!1}:{type:"geo",fields:[a,b],geoJson:!1};var d=this._database._connection.POST(this._indexurl(),JSON.stringify(c));return f.checkRequestResult(d),d},d.prototype.ensureGeoConstraint=function(a,b){return this.ensureGeoIndex(a,b)},d.prototype.ensureIndex=function(a){if("object"!=typeof a||Array.isArray(a))throw"usage: ensureIndex(<description>)";var b=this._database._connection.POST(this._indexurl(),JSON.stringify(a));return f.checkRequestResult(b),b},d.prototype.count=function(){var a=this._database._connection.GET(this._baseurl("count"));return f.checkRequestResult(a),a.count},d.prototype.document=function(a){var b,c=null;if(a.hasOwnProperty("_id")&&(a.hasOwnProperty("_rev")&&(c=a._rev),a=a._id),b=null===c?this._database._connection.GET(this._documenturl(a)):this._database._connection.GET(this._documenturl(a),{"if-match":JSON.stringify(c)}),null!==b&&b.error===!0&&b.errorNum===e.errors.ERROR_ARANGO_COLLECTION_NOT_FOUND.code)throw new g(b);return f.checkRequestResult(b),b},d.prototype.exists=function(a){var b,c=null;if(void 0===a||null===a)throw new g({errorNum:e.errors.ERROR_ARANGO_DOCUMENT_HANDLE_BAD.code,errorMessage:e.errors.ERROR_ARANGO_DOCUMENT_HANDLE_BAD.message});return a.hasOwnProperty("_id")&&(a.hasOwnProperty("_rev")&&(c=a._rev),a=a._id),b=null===c?this._database._connection.HEAD(this._documenturl(a)):this._database._connection.HEAD(this._documenturl(a),{"if-match":JSON.stringify(c)}),null===b||b.error!==!0||b.errorNum!==e.errors.ERROR_ARANGO_COLLECTION_NOT_FOUND.code&&b.errorNum!==e.errors.ERROR_HTTP_NOT_FOUND.code&&b.errorNum!==e.errors.ERROR_HTTP_PRECONDITION_FAILED.code?(f.checkRequestResult(b),!0):!1},d.prototype.any=function(){var a=this._database._connection.PUT(this._prefixurl("/_api/simple/any"),JSON.stringify({collection:this._name}));return f.checkRequestResult(a),a.document},d.prototype.firstExample=function(a){var b,c;if(1===arguments.length)b=a;else for(b={},c=0;c<arguments.length;c+=2)b[arguments[c]]=arguments[c+1];var d={collection:this.name(),example:b},g=this._database._connection.PUT(this._prefixurl("/_api/simple/first-example"),JSON.stringify(d));return null!==g&&g.error===!0&&g.errorNum===e.errors.ERROR_HTTP_NOT_FOUND.code?null:(f.checkRequestResult(g),g.document)},d.prototype.first=function(a){var b={collection:this.name(),count:a},c=this._database._connection.PUT(this._prefixurl("/_api/simple/first"),JSON.stringify(b));return f.checkRequestResult(c),c.result},d.prototype.last=function(a){var b={collection:this.name(),count:a},c=this._database._connection.PUT(this._prefixurl("/_api/simple/last"),JSON.stringify(b));return f.checkRequestResult(c),c.result},d.prototype.save=d.prototype.insert=function(a,b,c,h){var i,j=this.type();if(void 0===j&&(j=d.TYPE_DOCUMENT),j===d.TYPE_DOCUMENT?(c=a,h=b,i="/_api/document?collection="+encodeURIComponent(this.name())):j===d.TYPE_EDGE&&("object"==typeof a&&a.hasOwnProperty("_id")&&(a=a._id),"object"==typeof b&&b.hasOwnProperty("_id")&&(b=b._id),i="/_api/edge?collection="+encodeURIComponent(this.name())+"&from="+encodeURIComponent(a)+"&to="+encodeURIComponent(b)),i=this._appendSyncParameter(i,h),void 0===c||"object"!=typeof c)throw new g({errorNum:e.errors.ERROR_ARANGO_DOCUMENT_TYPE_INVALID.code,errorMessage:e.errors.ERROR_ARANGO_DOCUMENT_TYPE_INVALID.message});var k=this._database._connection.POST(this._prefixurl(i),JSON.stringify(c));return f.checkRequestResult(k),k},d.prototype.remove=function(a,b,c){var d,h=null;if(void 0===a||null===a)throw new g({errorNum:e.errors.ERROR_ARANGO_DOCUMENT_HANDLE_BAD.code,errorMessage:e.errors.ERROR_ARANGO_DOCUMENT_HANDLE_BAD.message});a.hasOwnProperty("_id")&&(a.hasOwnProperty("_rev")&&(h=a._rev),a=a._id);var i="";if("object"==typeof b){if("undefined"!=typeof c)throw"too many arguments";var j=b;j.hasOwnProperty("overwrite")&&j.overwrite&&(i+="?policy=last"),j.hasOwnProperty("waitForSync")&&(c=j.waitForSync)}else b&&(i+="?policy=last");var k=this._documenturl(a)+i;if(k=this._appendSyncParameter(k,c),d=null===h?this._database._connection.DELETE(k):this._database._connection.DELETE(k,{"if-match":JSON.stringify(h)}),null!==d&&d.error===!0){if(b&&d.errorNum===e.errors.ERROR_ARANGO_DOCUMENT_NOT_FOUND.code)return!1;throw new g(d)}return f.checkRequestResult(d),!0},d.prototype.replace=function(a,b,c,d){var h,i=null;if(void 0===a||null===a)throw new g({errorNum:e.errors.ERROR_ARANGO_DOCUMENT_HANDLE_BAD.code,errorMessage:e.errors.ERROR_ARANGO_DOCUMENT_HANDLE_BAD.message});a.hasOwnProperty("_id")&&(a.hasOwnProperty("_rev")&&(i=a._rev),a=a._id);var j="";if("object"==typeof c){if("undefined"!=typeof d)throw"too many arguments";var k=c;k.hasOwnProperty("overwrite")&&k.overwrite&&(j+="?policy=last"),k.hasOwnProperty("waitForSync")&&(d=k.waitForSync)}else c&&(j+="?policy=last");var l=this._documenturl(a)+j;if(l=this._appendSyncParameter(l,d),h=null===i?this._database._connection.PUT(l,JSON.stringify(b)):this._database._connection.PUT(l,JSON.stringify(b),{"if-match":JSON.stringify(i)}),null!==h&&h.error===!0)throw new g(h);return f.checkRequestResult(h),h},d.prototype.update=function(a,b,c,d,h){var i,j=null;if(void 0===a||null===a)throw new g({errorNum:e.errors.ERROR_ARANGO_DOCUMENT_HANDLE_BAD.code,errorMessage:e.errors.ERROR_ARANGO_DOCUMENT_HANDLE_BAD.message});a.hasOwnProperty("_id")&&(a.hasOwnProperty("_rev")&&(j=a._rev),a=a._id);var k="";if("object"==typeof c){if("undefined"!=typeof d)throw"too many arguments";var l=c;l.hasOwnProperty("keepNull")||(l.keepNull=!0),k="?keepNull="+l.keepNull,l.hasOwnProperty("mergeObjects")||(l.mergeObjects=!0),k+="&mergeObjects="+l.mergeObjects,l.hasOwnProperty("overwrite")&&l.overwrite&&(k+="&policy=last")}else{var m="undefined"==typeof d?!0:d;k="?keepNull="+(m?"true":"false"),c&&(k+="&policy=last")}var n=this._documenturl(a)+k;if(n=this._appendSyncParameter(n,h),i=null===j?this._database._connection.PATCH(n,JSON.stringify(b)):this._database._connection.PATCH(n,JSON.stringify(b),{"if-match":JSON.stringify(j)}),null!==i&&i.error===!0)throw new g(i);return f.checkRequestResult(i),i},d.prototype.edges=function(a){return this._edgesQuery(a)},d.prototype.inEdges=function(a){return this._edgesQuery(a,"in")},d.prototype.outEdges=function(a){return this._edgesQuery(a,"out")},d.prototype.removeByExample=function(a,b,c){var d={collection:this._name,example:a,waitForSync:b,limit:c};if("object"==typeof b){if("undefined"!=typeof c)throw"too many parameters";d={collection:this._name,example:a,options:b}}var e=this._database._connection.PUT(this._prefixurl("/_api/simple/remove-by-example"),JSON.stringify(d));return f.checkRequestResult(e),e.deleted},d.prototype.replaceByExample=function(a,b,c,d){var e={collection:this._name,example:a,newValue:b,waitForSync:c,limit:d};if("object"==typeof c){if("undefined"!=typeof d)throw"too many parameters";e={collection:this._name,example:a,newValue:b,options:c}}var g=this._database._connection.PUT(this._prefixurl("/_api/simple/replace-by-example"),JSON.stringify(e));return f.checkRequestResult(g),g.replaced},d.prototype.updateByExample=function(a,b,c,d,e){var g={collection:this._name,example:a,newValue:b,keepNull:c,waitForSync:d,limit:e};if("object"==typeof c){if("undefined"!=typeof d)throw"too many parameters";var h=c;g={collection:this._name,example:a,newValue:b,options:h}}var i=this._database._connection.PUT(this._prefixurl("/_api/simple/update-by-example"),JSON.stringify(g));return f.checkRequestResult(i),i.updated},d.prototype.documents=function(a){var b={collection:this._name,keys:a||[]},c=this._database._connection.PUT(this._prefixurl("/_api/simple/lookup-by-keys"),JSON.stringify(b));return f.checkRequestResult(c),{documents:c.documents}},d.prototype.lookupByKeys=d.prototype.documents,d.prototype.removeByKeys=function(a){var b={collection:this._name,keys:a||[]},c=this._database._connection.PUT(this._prefixurl("/_api/simple/remove-by-keys"),JSON.stringify(b));return f.checkRequestResult(c),{removed:c.removed,ignored:c.ignored}}}),module.define("org/arangodb/arango-database",function(a,b){function c(a){this._connection=a,this._collectionConstructor=d,this._properties=null,this._registerCollection=function(a,b){this[a]=b}}var d,e=require("internal"),f=require("org/arangodb/arangosh");a.ArangoDatabase=c,d=require("org/arangodb/arango-collection").ArangoCollection;var g=require("org/arangodb").ArangoError,h=require("org/arangodb/arango-statement").ArangoStatement;c.indexRegex=/^([a-zA-Z0-9\-_]+)\/([0-9]+)$/,c.keyRegex=/^([a-zA-Z0-9_:\-@\.\(\)\+,=;\$!\*'%])+$/,c.prototype._appendSyncParameter=function(a,b){return b&&(a+=-1===a.indexOf("?")?"?":"&",a+="waitForSync=true"),a},c.prototype._collectionurl=function(a){return void 0===a?"/_api/collection":"/_api/collection/"+encodeURIComponent(a)},c.prototype._documenturl=function(a,b){var d=a.split("/");if(2!==d.length)throw new g({error:!0,code:e.errors.ERROR_HTTP_BAD_PARAMETER.code,errorNum:e.errors.ERROR_ARANGO_DOCUMENT_HANDLE_BAD.code,errorMessage:e.errors.ERROR_ARANGO_DOCUMENT_HANDLE_BAD.message});if(void 0!==b&&""!==b&&d[0]!==b)throw new g({error:!0,code:e.errors.ERROR_HTTP_BAD_PARAMETER.code,errorNum:e.errors.ERROR_ARANGO_CROSS_COLLECTION_REQUEST.code,errorMessage:e.errors.ERROR_ARANGO_CROSS_COLLECTION_REQUEST.message});if(null===c.keyRegex.exec(d[1]))throw new g({error:!0,code:e.errors.ERROR_HTTP_BAD_PARAMETER.code,errorNum:e.errors.ERROR_ARANGO_DOCUMENT_HANDLE_BAD.code,errorMessage:e.errors.ERROR_ARANGO_DOCUMENT_HANDLE_BAD.message});return"/_api/document/"+encodeURIComponent(d[0])+"/"+encodeURIComponent(d[1])},c.prototype._indexurl=function(a,b){if("string"==typeof a){var d=c.indexRegex.exec(a);null===d&&void 0!==b&&(a=b+"/"+a)}else"number"==typeof a&&void 0!==b&&(a=b+"/"+a);var f=a.split("/");if(2!==f.length)throw new g({error:!0,code:e.errors.ERROR_HTTP_BAD_PARAMETER.code,errorNum:e.errors.ERROR_ARANGO_INDEX_HANDLE_BAD.code,errorMessage:e.errors.ERROR_ARANGO_INDEX_HANDLE_BAD.message});if(void 0!==b&&""!==b&&f[0]!==b)throw new g({error:!0,code:e.errors.ERROR_HTTP_BAD_PARAMETER.code,errorNum:e.errors.ERROR_ARANGO_CROSS_COLLECTION_REQUEST.code,errorMessage:e.errors.ERROR_ARANGO_CROSS_COLLECTION_REQUEST.message});return"/_api/index/"+encodeURIComponent(f[0])+"/"+encodeURIComponent(f[1])};var i=f.createHelpHeadline("ArangoDatabase (db) help")+"Administration Functions:                                                 \n  _help()                               this help                         \n  _flushCache()                         flush and refill collection cache \n                                                                          \nCollection Functions:                                                     \n  _collections()                        list all collections              \n  _collection(<name>)                   get collection by identifier/name \n  _create(<name>, <properties>)         creates a new collection          \n  _createEdgeCollection(<name>)         creates a new edge collection     \n  _drop(<name>)                         delete a collection               \n                                                                          \nDocument Functions:                                                       \n  _document(<id>)                       get document by handle (_id)      \n  _replace(<id>, <data>, <overwrite>)   overwrite document                \n  _update(<id>, <data>, <overwrite>,    partially update document         \n          <keepNull>)                                                     \n  _remove(<id>)                         delete document                   \n  _exists(<id>)                         checks whether a document exists  \n  _truncate()                           delete all documents              \n                                                                          \nDatabase Management Functions:                                            \n  _createDatabase(<name>)               creates a new database            \n  _dropDatabase(<name>)                 drops an existing database        \n  _useDatabase(<name>)                  switches into an existing database\n  _drop(<name>)                         delete a collection               \n  _name()                               name of the current database      \n                                                                          \nQuery / Transaction Functions:                                            \n  _executeTransaction(<transaction>)    execute transaction               \n  _query(<query>)                       execute AQL query                 \n  _createStatement(<data>)              create and return AQL query       ";c.prototype._help=function(){e.print(i)},c.prototype.toString=function(){return'[object ArangoDatabase "'+this._name()+'"]'},c.prototype._collections=function(){var a=this._connection.GET(this._collectionurl());if(f.checkRequestResult(a),void 0!==a.collections){var b,c=a.collections,d=[];for(b=0;b<c.length;++b){var e=new this._collectionConstructor(this,c[b]);this._registerCollection(e._name,e),d.push(e)}return d}return void 0},c.prototype._collection=function(a){var b;b="number"==typeof a?this._collectionurl(a)+"?useId=true":this._collectionurl(a);var c=this._connection.GET(b);if(null!==c&&c.error===!0&&c.errorNum===e.errors.ERROR_ARANGO_COLLECTION_NOT_FOUND.code)return null;f.checkRequestResult(c);var d=c.name;return void 0!==d?(this._registerCollection(d,new this._collectionConstructor(this,c)),this[d]):null},c.prototype._create=function(a,b,c){var e={name:a,type:d.TYPE_DOCUMENT};void 0!==b&&["waitForSync","journalSize","isSystem","isVolatile","doCompact","keyOptions","shardKeys","numberOfShards","distributeShardsLike","indexBuckets"].forEach(function(a){b.hasOwnProperty(a)&&(e[a]=b[a])}),void 0!==c&&(e.type=c);var g=this._connection.POST(this._collectionurl(),JSON.stringify(e));f.checkRequestResult(g);var h=g.name;return void 0!==h?(this._registerCollection(h,new this._collectionConstructor(this,g)),this[h]):void 0},c.prototype._createDocumentCollection=function(a,b){return this._create(a,b,d.TYPE_DOCUMENT)},c.prototype._createEdgeCollection=function(a,b){return this._create(a,b,d.TYPE_EDGE)},c.prototype._truncate=function(a){var b;"string"!=typeof a&&(a=a._id);for(b in this)if(this.hasOwnProperty(b)){var c=this[b];if(c instanceof this._collectionConstructor&&(c._id===a||c._name===a))return c.truncate()}return void 0},c.prototype._drop=function(a){var b;for(b in this)if(this.hasOwnProperty(b)){var c=this[b];if(c instanceof this._collectionConstructor&&(c._id===a||c._name===a))return c.drop()}var d=this._collection(a);return d?d.drop():void 0},c.prototype._flushCache=function(){var a;for(a in this)if(this.hasOwnProperty(a)){var b=this[a];b instanceof this._collectionConstructor&&(b._status=null,this[a]=void 0)}try{this._collections()}catch(c){}this._properties=null},c.prototype._queryProperties=function(a){if(a||null===this._properties){var b="/_api/database/current",c=this._connection.GET(b);f.checkRequestResult(c),this._properties=c.result}return this._properties},c.prototype._id=function(){return this._queryProperties().id},c.prototype._isSystem=function(){return this._queryProperties().isSystem},c.prototype._name=function(){return this._queryProperties().name},c.prototype._path=function(){return this._queryProperties().path},c.prototype._index=function(a){a.hasOwnProperty("id")&&(a=a.id);var b=this._connection.GET(this._indexurl(a));return f.checkRequestResult(b),b},c.prototype._dropIndex=function(a){a.hasOwnProperty("id")&&(a=a.id);var b=this._connection.DELETE(this._indexurl(a));return null!==b&&b.error===!0&&b.errorNum===e.errors.ERROR_ARANGO_INDEX_NOT_FOUND.code?!1:(f.checkRequestResult(b),!0)},c.prototype._version=function(){var a=this._connection.GET("/_api/version");return f.checkRequestResult(a),a.version},c.prototype._document=function(a){var b,c=null;if(a.hasOwnProperty("_id")&&(a.hasOwnProperty("_rev")&&(c=a._rev),a=a._id),b=null===c?this._connection.GET(this._documenturl(a)):this._connection.GET(this._documenturl(a),{"if-match":JSON.stringify(c)}),null!==b&&b.error===!0&&b.errorNum===e.errors.ERROR_ARANGO_COLLECTION_NOT_FOUND.code)throw new g(b);return f.checkRequestResult(b),b},c.prototype._exists=function(a){var b,c=null;return a.hasOwnProperty("_id")&&(a.hasOwnProperty("_rev")&&(c=a._rev),a=a._id),b=null===c?this._connection.HEAD(this._documenturl(a)):this._connection.HEAD(this._documenturl(a),{"if-match":JSON.stringify(c)}),null===b||b.error!==!0||b.errorNum!==e.errors.ERROR_ARANGO_COLLECTION_NOT_FOUND.code&&b.errorNum!==e.errors.ERROR_HTTP_NOT_FOUND.code&&b.errorNum!==e.errors.ERROR_HTTP_PRECONDITION_FAILED.code?(f.checkRequestResult(b),!0):!1},c.prototype._remove=function(a,b,c){var d,h=null;a.hasOwnProperty("_id")&&(a.hasOwnProperty("_rev")&&(h=a._rev),a=a._id);var i="";if("object"==typeof b){if("undefined"!=typeof c)throw"too many arguments";var j=b;j.hasOwnProperty("overwrite")&&j.overwrite&&(i+="?policy=last"),j.hasOwnProperty("waitForSync")&&(c=j.waitForSync)}else b&&(i+="?policy=last");var k=this._documenturl(a)+i;if(k=this._appendSyncParameter(k,c),d=null===h?this._connection.DELETE(k):this._connection.DELETE(k,{"if-match":JSON.stringify(h)}),null!==d&&d.error===!0){if(b&&d.errorNum===e.errors.ERROR_ARANGO_DOCUMENT_NOT_FOUND.code)return!1;throw new g(d)}return f.checkRequestResult(d),!0},c.prototype._replace=function(a,b,c,d){var e,h=null;a.hasOwnProperty("_id")&&(a.hasOwnProperty("_rev")&&(h=a._rev),a=a._id);var i="";if("object"==typeof c){if("undefined"!=typeof d)throw"too many arguments";var j=c;j.hasOwnProperty("overwrite")&&j.overwrite&&(i+="?policy=last"),j.hasOwnProperty("waitForSync")&&(d=j.waitForSync)}else c&&(i+="?policy=last");var k=this._documenturl(a)+i;if(k=this._appendSyncParameter(k,d),e=null===h?this._connection.PUT(k,JSON.stringify(b)):this._connection.PUT(k,JSON.stringify(b),{"if-match":JSON.stringify(h)}),null!==e&&e.error===!0)throw new g(e);return f.checkRequestResult(e),e},c.prototype._update=function(a,b,c,d,e){var h,i=null;a.hasOwnProperty("_id")&&(a.hasOwnProperty("_rev")&&(i=a._rev),a=a._id);var j="";if("object"==typeof c){if("undefined"!=typeof d)throw"too many arguments";var k=c;k.hasOwnProperty("keepNull")||(k.keepNull=!0),j="?keepNull="+k.keepNull,k.hasOwnProperty("mergeObjects")||(k.mergeObjects=!0),j+="&mergeObjects="+k.mergeObjects,k.hasOwnProperty("overwrite")&&k.overwrite&&(j+="&policy=last")}else{var l="undefined"==typeof d?!0:d;j="?keepNull="+(l?"true":"false"),c&&(j+="&policy=last")}var m=this._documenturl(a)+j;if(m=this._appendSyncParameter(m,e),h=null===i?this._connection.PATCH(m,JSON.stringify(b)):this._connection.PATCH(m,JSON.stringify(b),{"if-match":JSON.stringify(i)}),null!==h&&h.error===!0)throw new g(h);return f.checkRequestResult(h),h},c.prototype._createStatement=function(a){return new h(this,a)},c.prototype._query=function(a,b,c,d){if("object"==typeof a&&null!==a&&1===arguments.length)return new h(this,a).execute();var e={query:a,bindVars:b||void 0,count:c&&c.count||!1,batchSize:c&&c.batchSize||void 0,options:d||void 0,cache:d&&d.cache||void 0};return new h(this,e).execute()},c.prototype._createDatabase=function(a,b,c){var d={name:a,options:b||{},users:c||[]},e=this._connection.POST("/_api/database",JSON.stringify(d));if(null!==e&&e.error===!0)throw new g(e);return f.checkRequestResult(e),e.result},c.prototype._dropDatabase=function(a){var b=this._connection.DELETE("/_api/database/"+encodeURIComponent(a));if(null!==b&&b.error===!0)throw new g(b);return f.checkRequestResult(b),b.result},c.prototype._listDatabases=function(){var a=this._connection.GET("/_api/database");if(null!==a&&a.error===!0)throw new g(a);return f.checkRequestResult(a),a.result},c.prototype._useDatabase=function(a){if(e.printBrowser)throw new g({error:!0,code:e.errors.ERROR_NOT_IMPLEMENTED.code,errorNum:e.errors.ERROR_NOT_IMPLEMENTED.code,errorMessage:"_useDatabase() is not supported in the web interface"});var b=this._connection.getDatabaseName();if(a===b)return!0;this._connection.setDatabaseName(a);try{this._queryProperties(!0),this._flushCache()}catch(c){if(this._connection.setDatabaseName(b),c.hasOwnProperty("errorNum"))throw c;throw new g({error:!0,code:e.errors.ERROR_BAD_PARAMETER.code,errorNum:e.errors.ERROR_BAD_PARAMETER.code,errorMessage:"cannot use database '"+a+"'"})}return!0},c.prototype._listEndpoints=function(){var a=this._connection.GET("/_api/endpoint");if(null!==a&&a.error===!0)throw new g(a);return f.checkRequestResult(a),a},c.prototype._executeTransaction=function(a){if(!a||"object"!=typeof a)throw new g({error:!0,code:e.errors.ERROR_HTTP_BAD_PARAMETER.code,errorNum:e.errors.ERROR_BAD_PARAMETER.code,errorMessage:"usage: _executeTransaction(<object>)"});if(!a.collections||"object"!=typeof a.collections)throw new g({error:!0,code:e.errors.ERROR_HTTP_BAD_PARAMETER.code,errorNum:e.errors.ERROR_BAD_PARAMETER.code,errorMessage:"missing/invalid collections definition for transaction"});if(!a.action||"string"!=typeof a.action&&"function"!=typeof a.action)throw new g({error:!0,code:e.errors.ERROR_HTTP_BAD_PARAMETER.code,errorNum:e.errors.ERROR_BAD_PARAMETER.code,errorMessage:"missing/invalid action definition for transaction"});"function"==typeof a.action&&(a.action=String(a.action));var b=this._connection.POST("/_api/transaction",JSON.stringify(a));if(null!==b&&b.error===!0)throw new g(b);return f.checkRequestResult(b),b.result}}),module.define("org/arangodb/arango-query-cursor",function(a,b){function c(a,b){this._database=a,this._dbName=a._name(),this.data=b,this._hasNext=!1,this._hasMore=!1,this._pos=0,this._count=0,this._total=0,void 0!==b.result&&(this._count=b.result.length,this._pos<this._count&&(this._hasNext=!0),void 0!==b.hasMore&&b.hasMore&&(this._hasMore=!0))}var d=require("internal"),e=require("org/arangodb/arangosh");a.ArangoQueryCursor=c,c.prototype.toString=function(){for(var a=d.isCaptureMode(),b=[],c=0;++c<=10&&this.hasNext();)b.push(this.next());var e="[object ArangoQueryCursor";if(this.data.id&&(e+=" "+this.data.id),null!==this._count&&void 0!==this._count&&(e+=", count: "+this._count),e+=", hasMore: "+(this.hasNext()?"true":"false"),e+="]",a||(d.print(e),e=""),b.length>0){if(a)d.print(b);else{var f=d.startCaptureMode();d.print(b),e+="\n\n"+d.stopCaptureMode(f)}this.hasNext()&&(e+="\ntype 'more' to show more documents\n",more=this)}return a||(d.print(e),e=""),e},c.prototype.toArray=function(){for(var a=[];this.hasNext();)a.push(this.next());return a};var f=e.createHelpHeadline("ArangoQueryCursor help")+'ArangoQueryCursor constructor:                                      \n > cursor = stmt.execute()                                          \nFunctions:                                                          \n  hasNext()                             returns true if there are   \n                                        more results to fetch       \n  next()                                returns the next document   \n  toArray()                             returns all data from the cursor\n  _help()                               this help                   \nAttributes:                                                         \n  _database                             database object             \nExample:                                                            \n > stmt = db._createStatement({ "query": "FOR c IN coll RETURN c" })\n > cursor = stmt.execute()                                          \n > documents = cursor.toArray()                                     \n > cursor = stmt.execute()                                          \n > while (cursor.hasNext()) { print(cursor.next())  }               ';c.prototype._help=function(){d.print(f)},c.prototype.hasNext=function(){return this._hasNext},c.prototype.next=function(){if(!this._hasNext)throw"No more results";var a=this.data.result[this._pos];if(this._pos++,this._pos===this._count&&(this._hasNext=!1,this._pos=0,this._hasMore&&this.data.id)){this._hasMore=!1;var b=this._database._connection.PUT(this._baseurl(),"");e.checkRequestResult(b),this.data=b,this._count=b.result.length,this._pos<this._count&&(this._hasNext=!0),void 0!==b.hasMore&&b.hasMore&&(this._hasMore=!0)}return a},c.prototype.dispose=function(){if(this.data.id){var a=this._database._connection.DELETE(this._baseurl(),"");e.checkRequestResult(a),this.data.id=void 0}},c.prototype.count=function(){return this.data.count},c.prototype.getExtra=function(){return this.data.extra||{}},c.prototype._baseurl=function(){return"/_db/"+encodeURIComponent(this._dbName)+"/_api/cursor/"+encodeURIComponent(this.data.id)}}),module.define("org/arangodb/arango-statement-common",function(a,b){function c(a,b){if(this._database=a,this._doCount=!1,this._batchSize=null,this._bindVars={},this._options=void 0,this._cache=void 0,!b)throw"ArangoStatement needs initial data";if("string"==typeof b?b={query:b}:"object"==typeof b&&"function"==typeof b.toAQL&&(b={query:b.toAQL()}),!(b instanceof Object))throw"ArangoStatement needs initial data";if(void 0===b.query||""===b.query)throw"ArangoStatement needs a valid query attribute";this.setQuery(b.query),b.bindVars instanceof Object&&this.bind(b.bindVars),b.options instanceof Object&&this.setOptions(b.options),void 0!==b.count&&this.setCount(b.count),void 0!==b.batchSize&&this.setBatchSize(b.batchSize),void 0!==b.cache&&this.setCache(b.cache)}c.prototype.bind=function(a,b){if(a instanceof Object){if(void 0!==b)throw"invalid bind parameter declaration";this._bindVars=a}else if("string"==typeof a)this._bindVars[a]=b;else{if("number"!=typeof a)throw"invalid bind parameter declaration";var c=String(parseInt(a,10));if(c!==String(a))throw"invalid bind parameter declaration";this._bindVars[c]=b}},c.prototype.getBindVariables=function(){return this._bindVars},c.prototype.getCache=function(){return this._cache},c.prototype.getCount=function(){return this._doCount},c.prototype.getBatchSize=function(){return this._batchSize},c.prototype.getOptions=function(){return this._options},c.prototype.getQuery=function(){return this._query},c.prototype.setCache=function(a){this._cache=a?!0:!1},c.prototype.setCount=function(a){this._doCount=a?!0:!1},c.prototype.setBatchSize=function(a){var b=parseInt(a,10);b>0&&(this._batchSize=b)},c.prototype.setOptions=function(a){this._options=a},c.prototype.setQuery=function(a){this._query=a&&"function"==typeof a.toAQL?a.toAQL():a},c.prototype.parse=function(){throw"cannot call abstract method parse()"},c.prototype.explain=function(){throw"cannot call abstract method explain()"},c.prototype.execute=function(){throw"cannot call abstract method execute()"},a.ArangoStatement=c}),module.define("org/arangodb/arango-statement",function(a,b){var c=require("internal"),d=require("org/arangodb/arangosh"),e=require("org/arangodb/arango-statement-common").ArangoStatement,f=require("org/arangodb/arango-query-cursor").ArangoQueryCursor;e.prototype.toString=function(){return d.getIdString(this,"ArangoStatement")};var g=d.createHelpHeadline("ArangoStatement help")+'Create an AQL query:                                                    \n > stmt = new ArangoStatement(db, { "query": "FOR..." })                \n > stmt = db._createStatement({ "query": "FOR..." })                    \nSet query options:                                                      \n > stmt.setBatchSize(<value>)           set the max. number of results  \n                                        to be transferred per roundtrip \n > stmt.setCount(<value>)               set count flag (return number of\n                                        results in "count" attribute)   \nGet query options:                                                      \n > stmt.setBatchSize()                  return the max. number of results\n                                        to be transferred per roundtrip \n > stmt.getCount()                      return count flag (return number\n                                        of results in "count" attribute)\n > stmt.getQuery()                      return query string             \n                                        results in "count" attribute)   \nBind parameters to a query:                                             \n > stmt.bind(<key>, <value>)            bind single variable            \n > stmt.bind(<values>)                  bind multiple variables         \nExecute query:                                                          \n > cursor = stmt.execute()              returns a cursor                \nGet all results in an array:                                            \n > docs = cursor.toArray()                                              \nOr loop over the result set:                                            \n > while (cursor.hasNext()) { print(cursor.next()) }                    ';e.prototype._help=function(){c.print(g)},e.prototype.parse=function(){var a={query:this._query},b=this._database._connection.POST("/_api/query",JSON.stringify(a));d.checkRequestResult(b);var c={bindVars:b.bindVars,collections:b.collections,
ast:b.ast};return c},e.prototype.explain=function(a){var b=this._options||{};"object"==typeof b&&"object"==typeof a&&Object.keys(a).forEach(function(c){b[c]=a[c]});var c={query:this._query,bindVars:this._bindVars,options:b},e=this._database._connection.POST("/_api/explain",JSON.stringify(c));return d.checkRequestResult(e),b&&b.allPlans?{plans:e.plans,warnings:e.warnings,stats:e.stats}:{plan:e.plan,warnings:e.warnings,stats:e.stats}},e.prototype.execute=function(){var a={query:this._query,count:this._doCount,bindVars:this._bindVars};this._batchSize&&(a.batchSize=this._batchSize),this._options&&(a.options=this._options),void 0!==this._cache&&(a.cache=this._cache);var b=this._database._connection.POST("/_api/cursor",JSON.stringify(a));return d.checkRequestResult(b),new f(this._database,b)},a.ArangoStatement=e}),module.define("org/arangodb/arangosh",function(a,b){var c=require("internal");a.getIdString=function(a,b){var c="[object "+b;return a._id?c+=":"+a._id:a.data&&a.data._id&&(c+=":"+a.data._id),c+="]"},a.createHelpHeadline=function(a){var b,c="",d=Math.abs(78-a.length)/2;for(b=0;d>b;++b)c+="-";return"\n"+c+" "+a+" "+c+"\n"};var d=require("org/arangodb"),e=d.ArangoError;a.checkRequestResult=function(a){if(void 0===a)throw new e({error:!0,code:500,errorNum:d.ERROR_INTERNAL,errorMessage:"Unknown error. Request result is empty"});if(a.hasOwnProperty("error")){if(a.error){if(a.errorNum===d.ERROR_TYPE_ERROR)throw new TypeError(a.errorMessage);throw new e(a)}delete a.error}return a},a.HELP=a.createHelpHeadline("Help")+"Predefined objects:                                                \n  arango:                               ArangoConnection           \n  db:                                   ArangoDatabase             \n  fm:                                   FoxxManager                \nExamples:                                                          \n > db._collections()                    list all collections       \n > db._create(<name>)                   create a new collection    \n > db._drop(<name>)                     drop a collection          \n > db.<name>.toArray()                  list all documents         \n > id = db.<name>.save({ ... })         save a document            \n > db.<name>.remove(<_id>)              delete a document          \n > db.<name>.document(<_id>)            retrieve a document        \n > db.<name>.replace(<_id>, {...})      overwrite a document       \n > db.<name>.update(<_id>, {...})       partially update a document\n > db.<name>.exists(<_id>)              check if document exists   \n > db._query(<query>).toArray()         execute an AQL query       \n > db._useDatabase(<name>)              switch database            \n > db._createDatabase(<name>)           create a new database      \n > db._listDatabases()                  list existing databases    \n > help                                 show help pages            \n > exit                                                            \nNote: collection names and statuses may be cached in arangosh.     \nTo refresh the list of collections and their statuses, issue:      \n > db._collections();                                              \n                                                                   \n"+(c.printBrowser?"To cancel the current prompt, press CTRL + z.                      \n                                                                   \nPlease note that all variables defined with the var keyword will   \ndisappear when the command is finished. To introduce variables that\nare persisting until the next command, omit the var keyword.       \n\nType 'tutorial' for a tutorial or 'help' to see common examples":"To cancel the current prompt, press CTRL + d.                      \n"),a.helpExtended=a.createHelpHeadline("More help")+"Pager:                                                              \n > stop_pager()                         stop the pager output       \n > start_pager()                        start the pager             \nPretty printing:                                                    \n > stop_pretty_print()                  stop pretty printing        \n > start_pretty_print()                 start pretty printing       \nColor output:                                                       \n > stop_color_print()                   stop color printing         \n > start_color_print()                  start color printing        \nPrint function:                                                     \n > print(x)                             std. print function         \n > print_plain(x)                       print without prettifying   \n                                        and without colors          \n > clear()                              clear screen                "}),module.define("org/arangodb/general-graph",function(a,b){var c=require("org/arangodb"),d=require("internal"),e=c.ArangoCollection,f=c.ArangoError,g=c.db,h=c.errors,i=require("underscore"),j=function(a){return"string"==typeof a?[a]:i.clone(a)},k=function(a){return a?Array.isArray(a)&&0===a.length?!1:"string"==typeof a||Array.isArray(a)?!0:!1:!1},l=function(a,b,d){var h=g._collection(a),i=!1;if(null!==h||d){if(!(h instanceof e)){var j=new f;throw j.errorNum=c.errors.ERROR_GRAPH_NOT_AN_ARANGO_COLLECTION.code,j.errorMessage=a+c.errors.ERROR_GRAPH_NOT_AN_ARANGO_COLLECTION.message,j}}else h=b===e.TYPE_DOCUMENT?g._create(a):g._createEdgeCollection(a),i=!0;return i},m=function(a,b){var d={},h={};return a.forEach(function(a){if(!(a.hasOwnProperty("collection")&&a.hasOwnProperty("from")&&a.hasOwnProperty("to")&&Array.isArray(a.from)&&Array.isArray(a.to))){var i=new f;throw i.errorNum=c.errors.ERROR_GRAPH_CREATE_MALFORMED_EDGE_DEFINITION.code,i.errorMessage=c.errors.ERROR_GRAPH_CREATE_MALFORMED_EDGE_DEFINITION.message,i}a.from.concat(a.to).forEach(function(a){l(a,e.TYPE_DOCUMENT,b),d[a]=g[a]}),l(a.collection,e.TYPE_EDGE,b),h[a.collection]=g[a.collection]}),[d,h]},n=function(){var a=g._graphs;if(null===a||void 0===a){var b=new f;throw b.errorNum=c.errors.ERROR_GRAPH_NO_GRAPH_COLLECTION.code,b.errorMessage=c.errors.ERROR_GRAPH_NO_GRAPH_COLLECTION.message,b}return a},o=function(a){return i.map(a,function(a){var b=a.collection;return b+=": [",b+=a.from.join(", "),b+="] -> [",b+=a.to.join(", "),b+="]"})},p=function(a){var b={};return i.each(i.functions(a),function(c){b[c]=function(){return a[c].apply(a,arguments)}}),b},q=function(a){if(void 0===a)return{};if("string"==typeof a)return{_id:a};if("object"==typeof a)return Array.isArray(a)?i.map(a,function(a){return"string"==typeof a?{_id:a}:a}):a;var b=new f;throw b.errorNum=c.errors.ERROR_GRAPH_INVALID_EXAMPLE_ARRAY_OBJECT_STRING.code,b.errorMessage=c.errors.ERROR_GRAPH_INVALID_EXAMPLE_ARRAY_OBJECT_STRING.message,b},r=function(a,b,d){var e=[],g=i.map(a,function(a){return a.name()});if(i.each(b,function(a){i.contains(g,a)||e.push(a)}),e.length>0){var h=new f;throw h.errorNum=c.errors.ERROR_BAD_PARAMETER.code,h.errorMessage=d+": "+e.join(" and ")+" are not known to the graph",h}return!0},s=function(a,b){this.query=a,b&&(this.type=b)};s.prototype.printQuery=function(){return this.query},s.prototype.isPathQuery=function(){return"path"===this.type},s.prototype.isPathVerticesQuery=function(){return"pathVertices"===this.type},s.prototype.isPathEdgesQuery=function(){return"pathEdges"===this.type},s.prototype.isEdgeQuery=function(){return"edge"===this.type},s.prototype.isVertexQuery=function(){return"vertex"===this.type},s.prototype.isNeighborQuery=function(){return"neighbor"===this.type},s.prototype.allowsRestrict=function(){return this.isEdgeQuery()||this.isVertexQuery()||this.isNeighborQuery()};var t=function(a){this.stack=[],this.callStack=[],this.bindVars={graphName:a.__name},this.graph=a,this.cursor=null,this.lastVar="",this._path=[],this._pathVertices=[],this._pathEdges=[],this._getPath=!1};t.prototype._addToPrint=function(a){var b=Array.prototype.slice.call(arguments);b.shift();var c={};c.name=a,b.length>0&&void 0!==b[0]?c.params=b:c.params=[],this.callStack.push(c)},t.prototype._PRINT=function(a){a.output="[ GraphAQL ",a.output+=this.graph.__name,i.each(this.callStack,function(b){a.prettyPrint&&(a.output+="\n"),a.output+=".",a.output+=b.name,a.output+="(";var c=0;for(c=0;c<b.params.length;++c)c>0&&(a.output+=", "),d.printRecursive(b.params[c],a);a.output+=")"}),a.output+=" ] "},t.prototype._clearCursor=function(){this.cursor&&(this.cursor.dispose(),this.cursor=null)},t.prototype._createCursor=function(){this.cursor||(this.cursor=this.execute())},t.prototype._edges=function(a,b){this._clearCursor(),this.options=b||{};var c=q(a),d="edges_"+this.stack.length,e="FOR "+d+" IN GRAPH_EDGES(@graphName";e+=this.getLastVar()?","+this.getLastVar():",{}",e+=",@options_"+this.stack.length+")",Array.isArray(c)||(c=[c]),this.options.edgeExamples=c,this.options.includeData=!0,this.bindVars["options_"+this.stack.length]=this.options;var f=new s(e,"edge");return this.stack.push(f),this.lastVar=d,this._path.push(d),this._pathEdges.push(d),this},t.prototype.edges=function(a){return this._addToPrint("edges",a),this._edges(a,{direction:"any"})},t.prototype.outEdges=function(a){return this._addToPrint("outEdges",a),this._edges(a,{direction:"outbound"})},t.prototype.inEdges=function(a){return this._addToPrint("inEdges",a),this._edges(a,{direction:"inbound"})},t.prototype._vertices=function(a,b,c){this._clearCursor(),this.options=b||{};var d=q(a),e="vertices_"+this.stack.length,f="FOR "+e+" IN GRAPH_VERTICES(@graphName,";if(void 0!==c)if(Array.isArray(c)){var g;for(f+="[",g=0;g<c.length;++g)g>0&&(f+=","),f+="MERGE(@vertexExample_"+this.stack.length+","+c[g]+")";f+="]"}else f+="MERGE(@vertexExample_"+this.stack.length+","+c+")";else f+="@vertexExample_"+this.stack.length;f+=",@options_"+this.stack.length+")",this.bindVars["vertexExample_"+this.stack.length]=d,this.bindVars["options_"+this.stack.length]=this.options;var h=new s(f,"vertex");return this.stack.push(h),this.lastVar=e,this._path.push(e),this._pathVertices.push(e),this},t.prototype.vertices=function(a){if(this._addToPrint("vertices",a),!this.getLastVar())return this._vertices(a);var b=this.getLastVar();return this._vertices(a,void 0,["{'_id': "+b+"._from}","{'_id': "+b+"._to}"])},t.prototype.fromVertices=function(a){if(this._addToPrint("fromVertices",a),!this.getLastVar())return this._vertices(a);var b=this.getLastVar();return this._vertices(a,void 0,"{'_id': "+b+"._from}")},t.prototype.toVertices=function(a){if(this._addToPrint("toVertices",a),!this.getLastVar())return this._vertices(a);var b=this.getLastVar();return this._vertices(a,void 0,"{'_id': "+b+"._to}")},t.prototype.getLastVar=function(){return""===this.lastVar?!1:this.lastVar},t.prototype.path=function(){this._clearCursor();var a=new s("","path");return this.stack.push(a),this},t.prototype.pathVertices=function(){this._clearCursor();var a=new s("","pathVertices");return this.stack.push(a),this},t.prototype.pathEdges=function(){this._clearCursor();var a=new s("","pathEdges");return this.stack.push(a),this},t.prototype.neighbors=function(a,b){this._addToPrint("neighbors",a,b);var c,d=q(a),e="neighbors_"+this.stack.length,f="FOR "+e+" IN GRAPH_NEIGHBORS(@graphName,"+this.getLastVar()+",@options_"+this.stack.length+")";c=b?i.clone(b):{},c.neighborExamples=d,c.includeData=!0,this.bindVars["options_"+this.stack.length]=c;var g=new s(f,"neighbor");return this.stack.push(g),this.lastVar=e,this._path.push(e),this._pathVertices.push(e),this},t.prototype._getLastRestrictableStatementInfo=function(){for(var a=this.stack.length-1;!this.stack[a].allowsRestrict();)a--;return{statement:this.stack[a],options:this.bindVars["options_"+a]}},t.prototype.restrict=function(a){var b=j(a);if(0===b.length)return this;this._addToPrint("restrict",a),this._clearCursor();var c,d=this._getLastRestrictableStatementInfo(),e=d.statement,f=d.options;return e.isEdgeQuery()?(r(this.graph._edgeCollections(),b,"edge collections"),c=f.edgeCollectionRestriction||[],f.edgeCollectionRestriction=c.concat(a)):(e.isVertexQuery()||e.isNeighborQuery())&&(r(this.graph._vertexCollections(),b,"vertex collections"),c=f.vertexCollectionRestriction||[],f.vertexCollectionRestriction=c.concat(a)),this},t.prototype.filter=function(a){this._addToPrint("filter",a),this._clearCursor();var b=[];if("[object Array]"!==Object.prototype.toString.call(a)){if("[object Object]"!==Object.prototype.toString.call(a)){var d=new f;throw d.errorNum=c.errors.ERROR_GRAPH_INVALID_EXAMPLE_ARRAY_OBJECT.code,d.errorMessage=c.errors.ERROR_GRAPH_INVALID_EXAMPLE_ARRAY_OBJECT.message,d}b=[a]}else b=a;var e="FILTER MATCHES("+this.getLastVar()+","+JSON.stringify(b)+")";return this.stack.push(new s(e)),this},t.prototype.printQuery=function(){return this.stack.map(function(a){return a.printQuery()}).join(" ")},t.prototype.execute=function(){this._clearCursor();var a=this.printQuery(),b=this.bindVars;return a+=this.stack[this.stack.length-1].isPathQuery()?" RETURN ["+this._path+"]":this.stack[this.stack.length-1].isPathVerticesQuery()?" RETURN FLATTEN(["+this._pathVertices+"])":this.stack[this.stack.length-1].isPathEdgesQuery()?" RETURN FLATTEN(["+this._pathEdges+"])":" RETURN "+this.getLastVar(),g._query(a,b,{count:!0})},t.prototype.toArray=function(){return this._createCursor(),this.cursor.toArray()},t.prototype.count=function(){return this._createCursor(),this.cursor.count()},t.prototype.hasNext=function(){return this._createCursor(),this.cursor.hasNext()},t.prototype.next=function(){return this._createCursor(),this.cursor.next()};var u=function(a,b){var d;if(arguments.length<2)throw d=new f,d.errorNum=c.errors.ERROR_GRAPH_INVALID_NUMBER_OF_ARGUMENTS.code,d.errorMessage=c.errors.ERROR_GRAPH_INVALID_NUMBER_OF_ARGUMENTS.message+"2",d;if("string"!=typeof a||""===a)throw d=new f,d.errorNum=c.errors.ERROR_GRAPH_INVALID_PARAMETER.code,d.errorMessage=c.errors.ERROR_GRAPH_INVALID_PARAMETER.message+" arg1 must not be empty",d;if(!k(b))throw d=new f,d.errorNum=c.errors.ERROR_GRAPH_INVALID_PARAMETER.code,d.errorMessage=c.errors.ERROR_GRAPH_INVALID_PARAMETER.message+" arg2 must not be empty",d;return{collection:a,from:j(b),to:j(b)}},v=function(a,b,d){var e;if(arguments.length<3)throw e=new f,e.errorNum=c.errors.ERROR_GRAPH_INVALID_NUMBER_OF_ARGUMENTS.code,e.errorMessage=c.errors.ERROR_GRAPH_INVALID_NUMBER_OF_ARGUMENTS.message+"3",e;if("string"!=typeof a||""===a)throw e=new f,e.errorNum=c.errors.ERROR_GRAPH_INVALID_PARAMETER.code,e.errorMessage=c.errors.ERROR_GRAPH_INVALID_PARAMETER.message+" arg1 must be non empty string",e;if(!k(b))throw e=new f,e.errorNum=c.errors.ERROR_GRAPH_INVALID_PARAMETER.code,e.errorMessage=c.errors.ERROR_GRAPH_INVALID_PARAMETER.message+" arg2 must be non empty string or array",e;if(!k(d))throw e=new f,e.errorNum=c.errors.ERROR_GRAPH_INVALID_PARAMETER.code,e.errorMessage=c.errors.ERROR_GRAPH_INVALID_PARAMETER.message+" arg3 must be non empty string or array",e;return{collection:a,from:j(b),to:j(d)}},w=function(){var a=n();return i.pluck(a.toArray(),"_key")},x=function(){return n().toArray()},y=function(){var a=[],b=arguments;return Object.keys(b).forEach(function(c){a.push(b[c])}),a},z=function(a){var b=arguments,c=0;Object.keys(b).forEach(function(d){c++,1!==c&&a.push(b[d])})},A=function(a){return a.from=a.from.sort(),a.to=a.to.sort(),a},B=function(a,b,d,g){Array.isArray(d)||(d=[]);var i,j,k,o=n(),p=!0;if(!a)throw i=new f,i.errorNum=c.errors.ERROR_GRAPH_CREATE_MISSING_NAME.code,i.errorMessage=c.errors.ERROR_GRAPH_CREATE_MISSING_NAME.message,i;if(b=b||[],!Array.isArray(b))throw i=new f,i.errorNum=c.errors.ERROR_GRAPH_CREATE_MALFORMED_EDGE_DEFINITION.code,i.errorMessage=c.errors.ERROR_GRAPH_CREATE_MALFORMED_EDGE_DEFINITION.message,i;var q=[],r={};b.forEach(function(a){var b=a.collection;if(-1!==q.indexOf(b))throw i=new f,i.errorNum=c.errors.ERROR_GRAPH_COLLECTION_MULTI_USE.code,i.errorMessage=c.errors.ERROR_GRAPH_COLLECTION_MULTI_USE.message,i;q.push(b),r[b]=a}),o.toArray().forEach(function(a){var b=a.edgeDefinitions;b.forEach(function(a){var b=a.collection;if(-1!==q.indexOf(b)&&JSON.stringify(a)!==JSON.stringify(r[b]))throw i=new f,i.errorNum=c.errors.ERROR_GRAPH_COLLECTION_USE_IN_MULTI_GRAPHS.code,i.errorMessage=b+" "+c.errors.ERROR_GRAPH_COLLECTION_USE_IN_MULTI_GRAPHS.message,i})});try{o.document(a)}catch(s){if(s.errorNum!==h.ERROR_ARANGO_DOCUMENT_NOT_FOUND.code)throw s;p=!1}if(p)throw i=new f,i.errorNum=c.errors.ERROR_GRAPH_DUPLICATE.code,i.errorMessage=c.errors.ERROR_GRAPH_DUPLICATE.message,i;j=m(b,!1),d.forEach(function(a){l(a,e.TYPE_DOCUMENT)}),b.forEach(function(a,c){var d=A(a);b[c]=d}),d=d.sort();var t=o.save({orphanCollections:d,edgeDefinitions:b,_key:a},g);return k=new H(a,b,j[0],j[1],d,t._rev,t._id)},C=function(a,b,c){Object.defineProperty(a,b,{enumerable:!1,writable:!0}),a[b]=c},D=function N(a,b,c,d){d.__idsToRemove[c]=1,a.forEach(function(e){var f=e.edgeDefinitions;e.edgeDefinitions&&f.forEach(function(e){var f=e.from,h=e.to,i=e.collection;if(-1!==f.indexOf(b)||-1!==h.indexOf(b)){var j=g._collection(i).edges(c);j.forEach(function(b){d.__idsToRemove.hasOwnProperty(b._id)||(d.__collectionsToLock[i]=1,N(a,i,b._id,d))})}})})},E=function(a,b){i.each(b,function(b){var d=g._collection(b),e=p(d),h=e.save;e.save=function(d,e,g){if("string"!=typeof d||-1===d.indexOf("/")||"string"!=typeof e||-1===e.indexOf("/")){var j=new f;throw j.errorNum=c.errors.ERROR_ARANGO_DOCUMENT_HANDLE_BAD.code,j.errorMessage=c.errors.ERROR_ARANGO_DOCUMENT_HANDLE_BAD.message,j}return a.__edgeDefinitions.forEach(function(a){if(a.collection===b){var g=d.split("/")[0],h=e.split("/")[0];if(!i.contains(a.from,g)||!i.contains(a.to,h)){var j=new f;throw j.errorNum=c.errors.ERROR_GRAPH_INVALID_EDGE.code,j.errorMessage=c.errors.ERROR_GRAPH_INVALID_EDGE.message+" between "+d+" and "+e+".",j}}}),h(d,e,g)},e.remove=function(c,d){-1===c.indexOf("/")&&(c=b+"/"+c);var e=n().toArray(),f=c.split("/")[0];a.__collectionsToLock[f]=1,D(e,f,c,a);try{g._executeTransaction({collections:{write:Object.keys(a.__collectionsToLock)},embed:!0,action:function(a){var b=require("internal").db;a.ids.forEach(function(c){a.options?b._remove(c,a.options):b._remove(c)})},params:{ids:Object.keys(a.__idsToRemove),options:d}})}catch(h){throw a.__idsToRemove={},a.__collectionsToLock={},h}return a.__idsToRemove={},a.__collectionsToLock={},!0},a[b]=e})},F=function(a,b){i.each(b,function(b){var c=g._collection(b),d=p(c);d.remove=function(c,d){var e=n().toArray(),f=b;-1===c.indexOf("/")&&(c=b+"/"+c),a.__collectionsToLock[f]=1,e.forEach(function(b){var d=b.edgeDefinitions;b.edgeDefinitions&&d.forEach(function(b){var d=b.from,h=b.to,i=b.collection;if(-1!==d.indexOf(f)||-1!==h.indexOf(f)){var j=g._collection(i).edges(c);j.length>0&&(a.__collectionsToLock[i]=1,j.forEach(function(b){D(e,i,b._id,a)}))}})});try{g._executeTransaction({collections:{write:Object.keys(a.__collectionsToLock)},embed:!0,action:function(a){var b=require("internal").db;a.ids.forEach(function(c){a.options?b._remove(c,a.options):b._remove(c)}),a.options?b._remove(a.vertexId,a.options):b._remove(a.vertexId)},params:{ids:Object.keys(a.__idsToRemove),options:d,vertexId:c}})}catch(h){throw a.__idsToRemove={},a.__collectionsToLock={},h}return a.__idsToRemove={},a.__collectionsToLock={},!0},a[b]=d})},G=function(a){Object.keys(a).forEach(function(b){"_"!==b.substring(0,1)&&delete a[b]}),a.__edgeDefinitions.forEach(function(b){E(a,[b.collection]),F(a,b.from),F(a,b.to)}),F(a,a.__orphanCollections)},H=function(a,b,c,d,e,f,g){b.forEach(function(a,c){var d=A(a);b[c]=d}),e||(e=[]);var h="object"==typeof ArangoClusterComm;h&&require("org/arangodb/cluster").isCoordinator()&&(h=!1);var i=this;C(this,"__useBuiltIn",h),C(this,"__name",a),C(this,"__vertexCollections",c),C(this,"__edgeCollections",d),C(this,"__edgeDefinitions",b),C(this,"__idsToRemove",{}),C(this,"__collectionsToLock",{}),C(this,"__id",g),C(this,"__rev",f),C(this,"__orphanCollections",e),G(i)},I=function(a){var b,d,e,g=n();try{b=g.document(a)}catch(i){if(i.errorNum!==h.ERROR_ARANGO_DOCUMENT_NOT_FOUND.code)throw i;var j=new f;throw j.errorNum=c.errors.ERROR_GRAPH_NOT_FOUND.code,j.errorMessage=c.errors.ERROR_GRAPH_NOT_FOUND.message,j}return d=m(b.edgeDefinitions,!0),e=b.orphanCollections,e||(e=[]),new H(a,b.edgeDefinitions,d[0],d[1],e,b._rev,b._id)},J=function(a){var b=n();return b.exists(a)},K=function(a,b,c){var d=!0;return c.forEach(function(c){if(c._key!==b){var e=c.edgeDefinitions;e&&e.forEach(function(b){var c=b.from,e=b.to,f=b.collection;(f===a||-1!==c.indexOf(a)||-1!==e.indexOf(a))&&(d=!1)});var f=c.orphanCollections;f&&-1!==f.indexOf(a)&&(d=!1)}}),d},L=function(a,b){var d,e=n();if(!e.exists(a)){var h=new f;throw h.errorNum=c.errors.ERROR_GRAPH_NOT_FOUND.code,h.errorMessage=c.errors.ERROR_GRAPH_NOT_FOUND.message,h}if(b===!0){var i=e.document(a),j=i.edgeDefinitions;j.forEach(function(a){var b=a.from,c=a.to,e=a.collection;d=n().toArray(),K(e,i._key,d)&&g._drop(e),b.forEach(function(a){K(a,i._key,d)&&g._drop(a)}),c.forEach(function(a){K(a,i._key,d)&&g._drop(a)})}),d=n().toArray(),i.orphanCollections||(i.orphanCollections=[]),i.orphanCollections.forEach(function(a){if(K(a,i._key,d))try{g._drop(a)}catch(b){}})}return e.remove(a),!0};H.prototype._edgeCollections=function(){return i.values(this.__edgeCollections)},H.prototype._vertexCollections=function(){var a=[];return i.each(this.__orphanCollections,function(b){a.push(g[b])}),i.union(i.values(this.__vertexCollections),a)},H.prototype._EDGES=function(a){var b;if(-1===a.indexOf("/"))throw b=new f,b.errorNum=c.errors.ERROR_GRAPH_NOT_FOUND.code,b.errorMessage=c.errors.ERROR_GRAPH_NOT_FOUND.message+": "+a,b;var d,e=[];for(d in this.__edgeCollections)this.__edgeCollections.hasOwnProperty(d)&&(e=this.__useBuiltIn?e.concat(this.__edgeCollections[d].EDGES(a)):e.concat(this.__edgeCollections[d].edges(a)));return e},H.prototype._INEDGES=function(a){var b;if(-1===a.indexOf("/"))throw b=new f,b.errorNum=c.errors.ERROR_GRAPH_NOT_FOUND.code,b.errorMessage=c.errors.ERROR_GRAPH_NOT_FOUND.message+": "+a,b;var d,e=[];for(d in this.__edgeCollections)this.__edgeCollections.hasOwnProperty(d)&&(e=this.__useBuiltIn?e.concat(this.__edgeCollections[d].INEDGES(a)):e.concat(this.__edgeCollections[d].inEdges(a)));return e},H.prototype._OUTEDGES=function(a){var b;if(-1===a.indexOf("/"))throw b=new f,b.errorNum=c.errors.ERROR_GRAPH_NOT_FOUND.code,b.errorMessage=c.errors.ERROR_GRAPH_NOT_FOUND.message+": "+a,b;var d,e=[];for(d in this.__edgeCollections)this.__edgeCollections.hasOwnProperty(d)&&(e=this.__useBuiltIn?e.concat(this.__edgeCollections[d].OUTEDGES(a)):e.concat(this.__edgeCollections[d].outEdges(a)));return e},H.prototype._edges=function(a){var b=new t(this);return b.outEdges(a)},H.prototype._vertices=function(a){var b=new t(this);return b.vertices(a)},H.prototype._fromVertex=function(a){if("string"!=typeof a||-1===a.indexOf("/")){var b=new f;throw b.errorNum=c.errors.ERROR_ARANGO_DOCUMENT_HANDLE_BAD.code,b.errorMessage=c.errors.ERROR_ARANGO_DOCUMENT_HANDLE_BAD.message,b}var d=this._getEdgeCollectionByName(a.split("/")[0]),e=d.document(a);if(e){var g=e._from,h=this._getVertexCollectionByName(g.split("/")[0]);return h.document(g)}},H.prototype._toVertex=function(a){if("string"!=typeof a||-1===a.indexOf("/")){var b=new f;throw b.errorNum=c.errors.ERROR_ARANGO_DOCUMENT_HANDLE_BAD.code,b.errorMessage=c.errors.ERROR_ARANGO_DOCUMENT_HANDLE_BAD.message,b}var d=this._getEdgeCollectionByName(a.split("/")[0]),e=d.document(a);if(e){var g=e._to,h=this._getVertexCollectionByName(g.split("/")[0]);return h.document(g)}},H.prototype._getEdgeCollectionByName=function(a){if(this.__edgeCollections[a])return this.__edgeCollections[a];var b=new f;throw b.errorNum=c.errors.ERROR_GRAPH_EDGE_COL_DOES_NOT_EXIST.code,b.errorMessage=c.errors.ERROR_GRAPH_EDGE_COL_DOES_NOT_EXIST.message+": "+a,b},H.prototype._getVertexCollectionByName=function(a){if(this.__vertexCollections[a])return this.__vertexCollections[a];var b=new f;throw b.errorNum=c.errors.ERROR_GRAPH_VERTEX_COL_DOES_NOT_EXIST.code,b.errorMessage=c.errors.ERROR_GRAPH_VERTEX_COL_DOES_NOT_EXIST.message+": "+a,b},H.prototype._neighbors=function(a,b){var c=new t(this);return b||(b={}),c.vertices(a).neighbors(b.neighborExamples,b).toArray()},H.prototype._commonNeighbors=function(a,b,c,d){var e=q(a),f=q(b),h="FOR e IN GRAPH_COMMON_NEIGHBORS(@graphName,@ex1,@ex2,@options1,@options2) RETURN e";c=c||{},d=d||{};var i={graphName:this.__name,options1:c,options2:d,ex1:e,ex2:f};return g._query(h,i,{count:!0}).toArray()},H.prototype._countCommonNeighbors=function(a,b,c,d){var e=q(a),f=q(b),h="FOR e IN GRAPH_COMMON_NEIGHBORS(@graphName,@ex1,@ex2,@options1,@options2) RETURN [e.left, e.right, LENGTH(e.neighbors)]";c=c||{},d=d||{};var i={graphName:this.__name,options1:c,options2:d,ex1:e,ex2:f},j=g._query(h,i,{count:!0}).toArray(),k={},l={},m=[];return j.forEach(function(a){k[a[0]]||(k[a[0]]=[]),l={},l[a[1]]=a[2],k[a[0]].push(l)}),Object.keys(k).forEach(function(a){l={},l[a]=k[a],m.push(l)}),m},H.prototype._commonProperties=function(a,b,c){var d=q(a),e=q(b),f="FOR e IN GRAPH_COMMON_PROPERTIES(@graphName,@ex1,@ex2,@options)  SORT  ATTRIBUTES(e)[0] RETURN e";c=c||{};var h={graphName:this.__name,options:c,ex1:d,ex2:e};return g._query(f,h,{count:!0}).toArray()},H.prototype._countCommonProperties=function(a,b,c){var d=q(a),e=q(b),f="FOR e IN GRAPH_COMMON_PROPERTIES(@graphName,@ex1,@ex2,@options) FOR a in ATTRIBUTES(e)  SORT  ATTRIBUTES(e)[0] RETURN [ ATTRIBUTES(e)[0], LENGTH(e[a]) ]";c=c||{};var h={graphName:this.__name,options:c,ex1:d,ex2:e},i=g._query(f,h,{count:!0}).toArray(),j=[];return i.forEach(function(a){var b={};b[a[0]]=a[1],j.push(b)}),j},H.prototype._paths=function(a){var b="RETURN GRAPH_PATHS(@graphName,@options)";a=a||{};var c={graphName:this.__name,options:a},d=g._query(b,c).toArray();return d},H.prototype._shortestPath=function(a,b,c){var d=q(a),e=q(b),f="RETURN GRAPH_SHORTEST_PATH(@graphName,@ex1,@ex2,@options)";c=c||{};var h={graphName:this.__name,options:c,ex1:d,ex2:e},i=g._query(f,h).toArray();return i},H.prototype._distanceTo=function(a,b,c){var d=q(a),e=q(b),f="RETURN GRAPH_DISTANCE_TO(@graphName,@ex1,@ex2,@options)";c=c||{};var h={graphName:this.__name,options:c,ex1:d,ex2:e},i=g._query(f,h).toArray();return i[0]},H.prototype._absoluteEccentricity=function(a,b){var c=q(a),d="RETURN GRAPH_ABSOLUTE_ECCENTRICITY(@graphName,@ex1,@options)";b=b||{};var e={graphName:this.__name,options:b,ex1:c},f=g._query(d,e).toArray();return 1===f.length?f[0]:f},H.prototype._eccentricity=function(a){var b="RETURN GRAPH_ECCENTRICITY(@graphName,@options)";a=a||{};var c={graphName:this.__name,options:a},d=g._query(b,c).toArray();return 1===d.length?d[0]:d},H.prototype._absoluteCloseness=function(a,b){var c=q(a),d="RETURN GRAPH_ABSOLUTE_CLOSENESS(@graphName,@ex1,@options)";b=b||{};var e={graphName:this.__name,options:b,ex1:c},f=g._query(d,e).toArray();return 1===f.length?f[0]:f},H.prototype._closeness=function(a){var b="RETURN GRAPH_CLOSENESS(@graphName,@options)";a=a||{};var c={graphName:this.__name,options:a},d=g._query(b,c).toArray();return 1===d.length?d[0]:d},H.prototype._absoluteBetweenness=function(a,b){var c="RETURN GRAPH_ABSOLUTE_BETWEENNESS(@graphName,@example,@options)";b=b||{};var d={example:a,graphName:this.__name,options:b},e=g._query(c,d).toArray();return 1===e.length?e[0]:e},H.prototype._betweenness=function(a){var b="RETURN GRAPH_BETWEENNESS(@graphName,@options)";a=a||{};var c={graphName:this.__name,options:a},d=g._query(b,c).toArray();return 1===d.length?d[0]:d},H.prototype._radius=function(a){var b="RETURN GRAPH_RADIUS(@graphName,@options)";a=a||{};var c={graphName:this.__name,options:a},d=g._query(b,c).toArray();return 1===d.length?d[0]:d},H.prototype._diameter=function(a){var b="RETURN GRAPH_DIAMETER(@graphName,@options)";a=a||{};var c={graphName:this.__name,options:a},d=g._query(b,c).toArray();return 1===d.length?d[0]:d},H.prototype._extendEdgeDefinitions=function(a){a=A(a);var b,d=this,e=a.collection;if(void 0!==this.__edgeCollections[e])throw b=new f,b.errorNum=c.errors.ERROR_GRAPH_COLLECTION_MULTI_USE.code,b.errorMessage=c.errors.ERROR_GRAPH_COLLECTION_MULTI_USE.message,b;g._graphs.toArray().forEach(function(d){var g=d.edgeDefinitions;g.forEach(function(d){var g=d.collection;if(g===e&&JSON.stringify(d)!==JSON.stringify(a))throw b=new f,b.errorNum=c.errors.ERROR_GRAPH_COLLECTION_USE_IN_MULTI_GRAPHS.code,b.errorMessage=g+" "+c.errors.ERROR_GRAPH_COLLECTION_USE_IN_MULTI_GRAPHS.message,b})}),m([a]),this.__edgeDefinitions.push(a),g._graphs.update(this.__name,{edgeDefinitions:this.__edgeDefinitions}),this.__edgeCollections[a.collection]=g[a.collection],a.from.forEach(function(a){d[a]=g[a];var b=d.__orphanCollections.indexOf(a);-1!==b&&d.__orphanCollections.splice(b,1),void 0===d.__vertexCollections[a]&&(d.__vertexCollections[a]=g[a])}),a.to.forEach(function(a){d[a]=g[a];var b=d.__orphanCollections.indexOf(a);-1!==b&&d.__orphanCollections.splice(b,1),void 0===d.__vertexCollections[a]&&(d.__vertexCollections[a]=g[a])}),G(this)};var M=function(a,b,c,d,e){var f=[],h=I(a._key),j=a.edgeDefinitions,k=!1;j.forEach(function(c,d){c.collection===b.collection?(k=!0,j[d].from=b.from,j[d].to=b.to,g._graphs.update(a._key,{edgeDefinitions:j}),a._key===e.__name&&(e.__edgeDefinitions[d].from=b.from,e.__edgeDefinitions[d].to=b.to)):(f=i.union(f,c.from),f=i.union(f,c.to))}),k&&(a._key===e.__name?(c.forEach(function(a){void 0===e.__vertexCollections[a]&&(e.__vertexCollections[a]=g[a]);try{e._removeVertexCollection(a,!1)}catch(b){}}),d.forEach(function(a){-1===f.indexOf(a)&&(delete e.__vertexCollections[a],e._addVertexCollection(a))})):(c.forEach(function(a){try{h._removeVertexCollection(a,!1)}catch(b){}}),d.forEach(function(a){-1===f.indexOf(a)&&(delete h.__vertexCollections[a],h._addVertexCollection(a))})))};H.prototype._editEdgeDefinitions=function(a){a=A(a);var b=this;if(void 0===this.__edgeCollections[a.collection]){var d=new f;throw d.errorNum=c.errors.ERROR_GRAPH_EDGE_COLLECTION_NOT_USED.code,d.errorMessage=c.errors.ERROR_GRAPH_EDGE_COLLECTION_NOT_USED.message,d}m([a]);var e,g=[];this.__edgeDefinitions.forEach(function(b){a.collection===b.collection&&(e=b)});var h=i.union(e.from,e.to),j=i.union(a.from,a.to);h.forEach(function(a){-1===j.indexOf(a)&&g.push(a)});var k=n().toArray();k.forEach(function(c){M(c,a,j,g,b)}),G(this)},H.prototype._deleteEdgeDefinition=function(a,b){if(void 0===this.__edgeCollections[a]){var d=new f;throw d.errorNum=c.errors.ERROR_GRAPH_EDGE_COLLECTION_NOT_USED.code,d.errorMessage=c.errors.ERROR_GRAPH_EDGE_COLLECTION_NOT_USED.message,d}var e,h=this.__edgeDefinitions,j=this,k=[],l=[];h.forEach(function(b,c){b.collection===a?(e=c,l=b.from,l=i.union(l,b.to)):(k=i.union(k,b.from),k=i.union(k,b.to))}),this.__edgeDefinitions.splice(e,1),l.forEach(function(a){-1===k.indexOf(a)&&j.__orphanCollections.push(a)}),G(this),g._graphs.update(this.__name,{orphanCollections:this.__orphanCollections,edgeDefinitions:this.__edgeDefinitions}),b&&g._drop(a)},H.prototype._addVertexCollection=function(a,b){var d,e=g._collection(a);if(null===e){if(b===!1)throw d=new f,d.errorNum=c.errors.ERROR_GRAPH_VERTEX_COL_DOES_NOT_EXIST.code,d.errorMessage=a+c.errors.ERROR_GRAPH_VERTEX_COL_DOES_NOT_EXIST.message,d;g._create(a)}else if(2!==e.type())throw d=new f,d.errorNum=c.errors.ERROR_GRAPH_WRONG_COLLECTION_TYPE_VERTEX.code,d.errorMessage=c.errors.ERROR_GRAPH_WRONG_COLLECTION_TYPE_VERTEX.message,d;if(void 0!==this.__vertexCollections[a])throw d=new f,d.errorNum=c.errors.ERROR_GRAPH_COLLECTION_USED_IN_EDGE_DEF.code,d.errorMessage=c.errors.ERROR_GRAPH_COLLECTION_USED_IN_EDGE_DEF.message,d;if(i.contains(this.__orphanCollections,a))throw d=new f,d.errorNum=c.errors.ERROR_GRAPH_COLLECTION_USED_IN_ORPHANS.code,d.errorMessage=c.errors.ERROR_GRAPH_COLLECTION_USED_IN_ORPHANS.message,d;this.__orphanCollections.push(a),G(this),g._graphs.update(this.__name,{orphanCollections:this.__orphanCollections})},H.prototype._orphanCollections=function(){return this.__orphanCollections},H.prototype._removeVertexCollection=function(a,b){var d;if(null===g._collection(a))throw d=new f,
d.errorNum=c.errors.ERROR_GRAPH_VERTEX_COL_DOES_NOT_EXIST.code,d.errorMessage=c.errors.ERROR_GRAPH_VERTEX_COL_DOES_NOT_EXIST.message,d;var e=this.__orphanCollections.indexOf(a);if(-1===e)throw d=new f,d.errorNum=c.errors.ERROR_GRAPH_NOT_IN_ORPHAN_COLLECTION.code,d.errorMessage=c.errors.ERROR_GRAPH_NOT_IN_ORPHAN_COLLECTION.message,d;if(this.__orphanCollections.splice(e,1),delete this[a],g._graphs.update(this.__name,{orphanCollections:this.__orphanCollections}),b===!0){var h=n().toArray();K(a,null,h)&&g._drop(a)}G(this)},H.prototype._getConnectingEdges=function(a,b,c){c=c||{};var d={includeData:!0};c.vertex1CollectionRestriction&&(d.startVertexCollectionRestriction=c.vertex1CollectionRestriction),c.vertex2CollectionRestriction&&(d.endVertexCollectionRestriction=c.vertex2CollectionRestriction),c.edgeCollectionRestriction&&(d.edgeCollectionRestriction=c.edgeCollectionRestriction),c.edgeExamples&&(d.edgeExamples=c.edgeExamples),b&&(d.neighborExamples=b);var e="RETURN GRAPH_EDGES(@graphName,@vertexExample,@options)",f={graphName:this.__name,vertexExample:a,options:d},h=g._query(e,f).toArray();return h[0]},H.prototype._PRINT=function(a){var b=this.__name,c=o(this.__edgeDefinitions);a.output+="[ Graph ",a.output+=b,a.output+=" EdgeDefinitions: ",d.printRecursive(c,a),a.output+=" VertexCollections: ",d.printRecursive(this.__orphanCollections,a),a.output+=" ]"},a._undirectedRelation=u,a._directedRelation=function(){return v.apply(this,arguments)},a._relation=v,a._graph=I,a._edgeDefinitions=y,a._extendEdgeDefinitions=z,a._create=B,a._drop=L,a._exists=J,a._list=w,a._listObjects=x}),module.define("org/arangodb/graph-blueprint",function(a,b){var c=require("org/arangodb"),d=require("org/arangodb/is"),e=require("org/arangodb/graph-common"),f=e.Edge,g=e.Graph,h=e.Vertex,i=e.GraphArray,j=e.Iterator,k=require("org/arangodb/api/graph").GraphAPI;f.prototype.setProperty=function(a,b){var c,d=this._properties;return d[a]=b,this._graph.emptyCachedPredecessors(),c=k.putEdge(this._graph._properties._key,this._properties._key,d),this._properties=c.edge,a},h.prototype.edges=function(a,b){var c,d,e=new i;for(d=k.postEdges(this._graph._vertices._database,this._graph._properties._key,this,{filter:{direction:a,labels:b}});d.hasNext();)c=new f(this._graph,d.next()),e.push(c);return e},h.prototype.getInEdges=function(){var a=Array.prototype.slice.call(arguments);return this.edges("in",a)},h.prototype.getOutEdges=function(){var a=Array.prototype.slice.call(arguments);return this.edges("out",a)},h.prototype.getEdges=function(){var a=Array.prototype.slice.call(arguments);return this.edges("any",a)},h.prototype.inbound=function(){return this.getInEdges()},h.prototype.outbound=function(){return this.getOutEdges()},h.prototype.setProperty=function(a,b){var c,d=this._properties;return d[a]=b,c=k.putVertex(this._graph._properties._key,this._properties._key,d),this._properties=c.vertex,a},g.prototype.initialize=function(a,b,e){var f;return d.notExisty(b)&&d.notExisty(e)?f=k.getGraph(a):("object"==typeof b&&"function"==typeof b.name&&(b=b.name()),"object"==typeof e&&"function"==typeof e.name&&(e=e.name()),f=k.postGraph({_key:a,vertices:b,edges:e})),this._properties=f.graph,this._vertices=c.db._collection(this._properties.edgeDefinitions[0].from[0]),this._edges=c.db._collection(this._properties.edgeDefinitions[0].collection),this._verticesCache={},this._edgesCache={},this.predecessors={},this.distances={},this},g.getAll=function(){return k.getAllGraphs()},g.drop=function(a){k.deleteGraph(a)},g.prototype.drop=function(){k.deleteGraph(this._properties._key)},g.prototype._saveEdge=function(a,b,c,d){var e;return this.emptyCachedPredecessors(),d._key=a,d._from=b,d._to=c,e=k.postEdge(this._properties._key,d),new f(this,e.edge)},g.prototype._saveVertex=function(a,b){var c;return d.existy(a)&&(b._key=a),c=k.postVertex(this._properties._key,b),new h(this,c.vertex)},g.prototype._replaceVertex=function(a,b){k.putVertex(this._properties._key,a,b)},g.prototype._replaceEdge=function(a,b){k.putEdge(this._properties._key,a,b)},g.prototype.getVertex=function(a){var b=k.getVertex(this._properties._key,a);return d.notExisty(b)?null:new h(this,b.vertex)},g.prototype.getVertices=function(){var a=k.getVertices(this._vertices._database,this._properties._key,{}),b=this,c=function(a){return new h(b,a)};return new j(c,a,"[vertex iterator]")},g.prototype.getEdge=function(a){var b=k.getEdge(this._properties._key,a);return d.notExisty(b)?null:new f(this,b.edge)},g.prototype.getEdges=function(){var a=k.getEdges(this._vertices._database,this._properties._key,{}),b=this,c=function(a){return new f(b,a)};return new j(c,a,"[edge iterator]")},g.prototype.removeVertex=function(a){this.emptyCachedPredecessors(),k.deleteVertex(this._properties._key,a._properties._key),a._properties=void 0},g.prototype.removeEdge=function(a){this.emptyCachedPredecessors(),k.deleteEdge(this._properties._key,a._properties._key),this._edgesCache[a._properties._id]=void 0,a._properties=void 0},a.Edge=f,a.Graph=g,a.Vertex=h,a.GraphArray=i,require("org/arangodb/graph/algorithms-common")}),module.define("org/arangodb/graph-common",function(a,b){var c,d,e,f,g,h=require("org/arangodb/is");g=function(a,b,c){this.next=function(){return b.hasNext()?a(b.next()):void 0},this.hasNext=function(){return b.hasNext()},this._PRINT=function(a){a.output+=c}},f=function(a){void 0!==a&&(this.length=a)},f.prototype=new Array(0),f.prototype.map=function(a,b){var c,d=this.length;if("function"!=typeof a)throw new TypeError;var e=new f(d);for(c=0;d>c;c++)this.hasOwnProperty(c)&&(e[c]=a.call(b,this[c],c,this));return e},f.prototype.getInVertex=function(){return this.map(function(a){return a.getInVertex()})},f.prototype.getOutVertex=function(){return this.map(function(a){return a.getOutVertex()})},f.prototype.getPeerVertex=function(a){return this.map(function(b){return b.getPeerVertex(a)})},f.prototype.setProperty=function(a,b){return this.map(function(c){return c.setProperty(a,b)})},f.prototype.edges=function(){return this.map(function(a){return a.edges()})},f.prototype.outbound=function(){return this.map(function(a){return a.outbound()})},f.prototype.inbound=function(){return this.map(function(a){return a.inbound()})},f.prototype.getInEdges=function(){var a=arguments;return this.map(function(b){return b.getInEdges.apply(b,a)})},f.prototype.getOutEdges=function(){var a=arguments;return this.map(function(b){return b.getOutEdges.apply(b,a)})},f.prototype.getEdges=function(){var a=arguments;return this.map(function(b){return b.getEdges.apply(b,a)})},f.prototype.degree=function(){return this.map(function(a){return a.degree()})},f.prototype.inDegree=function(){return this.map(function(a){return a.inDegree()})},f.prototype.inDegree=function(){return this.map(function(a){return a.outDegree()})},f.prototype.properties=function(){return this.map(function(a){return a.properties()})},c=function(a,b){this._graph=a,this._id=b._key,this._properties=b},c.prototype.getId=function(){return this._properties._key},c.prototype.getLabel=function(){return this._properties.$label},c.prototype.getProperty=function(a){return this._properties[a]},c.prototype.getPropertyKeys=function(){return this._properties.propertyKeys},c.prototype.properties=function(){return this._properties._shallowCopy},c.prototype.getInVertex=function(){return this._graph.getVertex(this._properties._to)},c.prototype.getOutVertex=function(){return this._graph.getVertex(this._properties._from)},c.prototype.getPeerVertex=function(a){return a._properties._id===this._properties._to?this._graph.getVertex(this._properties._from):a._properties._id===this._properties._from?this._graph.getVertex(this._properties._to):null},c.prototype._PRINT=function(a){this._properties._id?void 0!==this._properties._key?"string"==typeof this._properties._key?a.output+='Edge("'+this._properties._key+'")':a.output+="Edge("+this._properties._key+")":a.output+="Edge(<"+this._id+">)":a.output+="[deleted Edge]"},e=function(a,b){this._graph=a,this._id=b._key,this._properties=b},e.prototype.addInEdge=function(a,b,c,d){return this._graph.addEdge(a,this,b,c,d)},e.prototype.addOutEdge=function(a,b,c,d){return this._graph.addEdge(this,a,b,c,d)},e.prototype.degree=function(){return this.getEdges().length},e.prototype.inDegree=function(){return this.getInEdges().length},e.prototype.outDegree=function(){return this.getOutEdges().length},e.prototype.getId=function(){return this._properties._key},e.prototype.getProperty=function(a){return this._properties[a]},e.prototype.getPropertyKeys=function(){return this._properties.propertyKeys},e.prototype.properties=function(){return this._properties._shallowCopy},e.prototype._PRINT=function(a){this._properties._id?void 0!==this._properties._key?"string"==typeof this._properties._key?a.output+='Vertex("'+this._properties._key+'")':a.output+="Vertex("+this._properties._key+")":a.output+="Vertex(<"+this._id+">)":a.output+="[deleted Vertex]"},d=function(a,b,c,d){this.initialize(a,b,c,d)},d.prototype._prepareEdgeData=function(a,b){var c;return h.notExisty(a)&&h.object(b)&&(a=b,b=null),h.notExisty(b)&&h.existy(a)&&h.existy(a.$label)&&(b=a.$label),c=h.notExisty(a)||h.noObject(a)?{}:a._shallowCopy||{},c.$label=b,c},d.prototype._prepareVertexData=function(a){var b;return b=h.notExisty(a)||h.noObject(a)?{}:a._shallowCopy||{}},d.prototype.getOrAddVertex=function(a){var b=this.getVertex(a);return null===b&&(b=this.addVertex(a)),b},d.prototype.addEdge=function(a,b,c,d,e,f){var g,i;return g=h.string(a)?a:a._properties._id,i=h.string(b)?b:b._properties._id,this._saveEdge(c,g,i,this._prepareEdgeData(e,d),f)},d.prototype.addVertex=function(a,b,c){return this._saveVertex(a,this._prepareVertexData(b),c)},d.prototype.replaceVertex=function(a,b){this._replaceVertex(a,b)},d.prototype.replaceEdge=function(a,b){this._replaceEdge(a,b)},d.prototype.order=function(){return this._vertices.count()},d.prototype.size=function(){return this._edges.count()},d.prototype.emptyCachedPredecessors=function(){this.predecessors={}},d.prototype.getCachedPredecessors=function(a,b){var c;return this.predecessors[a.getId()]&&(c=this.predecessors[a.getId()][b.getId()]),c},d.prototype.setCachedPredecessors=function(a,b,c){this.predecessors[a.getId()]||(this.predecessors[a.getId()]={}),this.predecessors[a.getId()][b.getId()]=c},d.prototype.constructVertex=function(a){var b,c;"string"==typeof a?b=a:(b=a._id,c=a._rev);var d=this._verticesCache[b];if(void 0===d||d._rev!==c){var f=this._vertices.document(b);if(!f)throw"accessing a deleted vertex";this._verticesCache[b]=d=new e(this,f)}return d},d.prototype.constructEdge=function(a){var b,d,e,f;if("string"==typeof a?b=a:(b=a._id,d=a._rev),e=this._edgesCache[b],void 0===e||e._rev!==d){if(f=this._edges.document(b),!f)throw"accessing a deleted edge";this._edgesCache[b]=e=new c(this,f)}return e},d.prototype._PRINT=function(a){a.output+='Graph("'+this._properties._key+'")'},a.Edge=c,a.Graph=d,a.Vertex=e,a.GraphArray=f,a.Iterator=g}),module.define("org/arangodb/graph",function(a,b){var c=require("org/arangodb/graph-blueprint");Object.keys(c).forEach(function(b){a[b]=c[b]})}),module.define("org/arangodb/graph/traversal",function(a,b){function c(a){if(null===a||"object"!=typeof a)return a;var b;if(Array.isArray(a))b=[],a.forEach(function(a){b.push(c(a))});else if(a instanceof Object){if(J&&a instanceof J)return a;b={},Object.keys(a).forEach(function(d){b[d]=c(a[d])})}return b}function d(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function e(a){var b=a;"string"==typeof b&&(b=K._collection(b));var c="object"==typeof ArangoClusterComm;return c&&require("org/arangodb/cluster").isCoordinator()&&(c=!1),{edgeCollection:b,useBuiltIn:c,getVertexId:function(a){return a._id},getPeerVertex:function(a,b){return a._from===b._id?K._document(a._to):a._to===b._id?K._document(a._from):null},getInVertex:function(a){return K._document(a._to)},getOutVertex:function(a){return K._document(a._from)},getEdgeId:function(a){return a._id},getEdgeFrom:function(a){return a._from},getEdgeTo:function(a){return a._to},getLabel:function(a){return a.$label},getAllEdges:function(a){return this.useBuiltIn?this.edgeCollection.EDGES(a._id):this.edgeCollection.edges(a._id)},getInEdges:function(a){return this.useBuiltIn?this.edgeCollection.INEDGES(a._id):this.edgeCollection.inEdges(a._id)},getOutEdges:function(a){return this.useBuiltIn?this.edgeCollection.OUTEDGES(a._id):this.edgeCollection.outEdges(a._id)}}}function f(a){var b=a;return"string"==typeof b&&(b=F._graph(b)),{graph:b,getVertexId:function(a){return a._id},getPeerVertex:function(a,b){return a._from===b._id?K._document(a._to):a._to===b._id?K._document(a._from):null},getInVertex:function(a){return K._document(a._to)},getOutVertex:function(a){return K._document(a._from)},getEdgeId:function(a){return a._id},getEdgeFrom:function(a){return a._from},getEdgeTo:function(a){return a._to},getLabel:function(a){return a.$label},getAllEdges:function(a){return this.graph._EDGES(a._id)},getInEdges:function(a){return this.graph._INEDGES(a._id)},getOutEdges:function(a){return this.graph._OUTEDGES(a._id)}}}function g(a){return{graph:new E.Graph(a),getVertexId:function(a){return a.getId()},getPeerVertex:function(a,b){return a.getPeerVertex(b)},getInVertex:function(a){return a.getInVertex()},getOutVertex:function(a){return a.getOutVertex()},getEdgeId:function(a){return a.getId()},getEdgeFrom:function(a){return a._properties._from},getEdgeTo:function(a){return a._properties._to},getLabel:function(a){return a.getLabel()},getAllEdges:function(a){return a.edges()},getInEdges:function(a){return a.inbound()},getOutEdges:function(a){return a.outbound()}}}function h(a,b,c){var d,e=a.datasource,f=[],g=e.getOutEdges(b);return g.length>1&&a.sort&&g.sort(a.sort),d=a.buildVertices?a.expandFilter?function(b){try{var d=e.getInVertex(b);a.expandFilter(a,d,b,c)&&f.push({edge:b,vertex:d})}catch(g){}}:function(a){try{var b=e.getInVertex(a);f.push({edge:a,vertex:b})}catch(c){}}:a.expandFilter?function(b){var d=e.getEdgeTo(b),g={_id:d,_key:d.substr(d.indexOf("/")+1)};a.expandFilter(a,g,b,c)&&f.push({edge:b,vertex:g})}:function(a){var b=e.getEdgeTo(a),c={_id:b,_key:b.substr(b.indexOf("/")+1)};f.push({edge:a,vertex:c})},g.forEach(d),f}function i(a,b,c){var d=a.datasource,e=[],f=d.getInEdges(b);f.length>1&&a.sort&&f.sort(a.sort);var g;return g=a.buildVertices?a.expandFilter?function(b){try{var f=d.getOutVertex(b);a.expandFilter(a,f,b,c)&&e.push({edge:b,vertex:f})}catch(g){}}:function(a){try{var b=d.getOutVertex(a);e.push({edge:a,vertex:b})}catch(c){}}:a.expandFilter?function(b){var f=d.getEdgeFrom(b),g={_id:f,_key:f.substr(f.indexOf("/")+1)};a.expandFilter(a,g,b,c)&&e.push({edge:b,vertex:g})}:function(a){var b=d.getEdgeFrom(a),c={_id:b,_key:b.substr(b.indexOf("/")+1)};e.push({edge:a,vertex:c})},f.forEach(g),e}function j(a,b,c){var d=a.datasource,e=[],f=d.getAllEdges(b);f.length>1&&a.sort&&f.sort(a.sort);var g;return g=a.buildVertices?a.expandFilter?function(f){try{var g=d.getPeerVertex(f,b);a.expandFilter(a,g,f,c)&&e.push({edge:f,vertex:g})}catch(h){}}:function(a){try{var c=d.getPeerVertex(a,b);e.push({edge:a,vertex:c})}catch(f){}}:a.expandFilter?function(f){var g=d.getEdgeFrom(f);g===b._id&&(g=d.getEdgeTo(f));var h={_id:g,_key:g.substr(g.indexOf("/")+1)};a.expandFilter(a,h,f,c)&&e.push({edge:f,vertex:h})}:function(a){var c=d.getEdgeFrom(a);c===b._id&&(c=d.getEdgeTo(a));var f={_id:c,_key:c.substr(c.indexOf("/")+1)};e.push({edge:a,vertex:f})},f.forEach(g),e}function k(a,b,c){var d,e=a.datasource,f=[];Array.isArray(a.labels)||(a.labels=[a.labels]);var g=e.getOutEdges(b);if(void 0!==g)for(d=0;d<g.length;++d){var h=g[d],i=e.getLabel(h);a.labels.indexOf(i)>=0&&f.push({edge:h,vertex:e.getInVertex(h)})}return f}function l(a,b,c){var d,e=a.datasource,f=[];Array.isArray(a.labels)||(a.labels=[a.labels]);var g=a.datasource.getInEdges(b);if(void 0!==g)for(d=0;d<g.length;++d){var h=g[d],i=e.getLabel(h);a.labels.indexOf(i)>=0&&f.push({edge:h,vertex:e.getOutVertex(h)})}return f}function m(a,b,c){var d,e=a.datasource,f=[];Array.isArray(a.labels)||(a.labels=[a.labels]);var g=a.datasource.getAllEdges(b);if(void 0!==g)for(d=0;d<g.length;++d){var h=g[d],i=e.getLabel(h);a.labels.indexOf(i)>=0&&f.push({edge:h,vertex:e.getPeerVertex(h,b)})}return f}function n(a,b,d,e){b&&b.visited&&(b.visited.vertices&&b.visited.vertices.push(c(d)),b.visited.paths&&b.visited.paths.push(c(e)))}function o(a,b,c,d){b&&(b.hasOwnProperty("count")?++b.count:b.count=1)}function p(){}function q(){return""}function r(a,b,c){return c&&c.vertices&&c.vertices.length>a.maxDepth?D.PRUNE:void 0}function s(a,b,c){return c&&c.vertices&&c.vertices.length<=a.minDepth?D.EXCLUDE:void 0}function t(a,b,c){Array.isArray(a.matchingAttributes)||(a.matchingAttributes=[a.matchingAttributes]);var d=!1;a.matchingAttributes.forEach(function(a){var c=0,e=Object.keys(a);e.forEach(function(d){b[d]&&b[d]===a[d]&&c++}),c>0&&c===e.length&&(d=!0)});var e;return d||(e="exclude"),e}function u(a,b,c,d){var e=[];return a.forEach(function(a){var f=a(b,c,d);Array.isArray(f)||(f=[f]),e=e.concat(f)}),e}function v(a){function b(a){if(void 0!==a&&null!==a){var d=!1;if("string"==typeof a)a===D.EXCLUDE?(c.visit=!1,d=!0):a===D.PRUNE?(c.expand=!1,d=!0):""===a&&(d=!0);else if(Array.isArray(a)){var e;for(e=0;e<a.length;++e)b(a[e]);d=!0}if(!d){var f=new I;throw f.errorNum=G.errors.ERROR_GRAPH_INVALID_FILTER_RESULT.code,f.errorMessage=G.errors.ERROR_GRAPH_INVALID_FILTER_RESULT.message,f}}}var c={visit:!0,expand:!0};return b(a),c}function w(a,b,c,d){var e,f=a.uniqueness,g=a.datasource;if(f.vertices!==D.UNIQUE_NONE){if(e=g.getVertexId(c),b.vertices[e]===!0)return!1;b.vertices[e]=!0}if(null!==d&&f.edges!==D.UNIQUE_NONE){if(e=g.getEdgeId(d),b.edges[e]===!0)return!1;b.edges[e]=!0}return!0}function x(a){var b=!1;return a.order===D.POST_ORDER?a.itemOrder===D.FORWARD&&(b=!0):(a.order===D.PRE_ORDER||a.order===D.PRE_ORDER_EXPANDER)&&(a.itemOrder===D.BACKWARD&&a.strategy===D.BREADTH_FIRST?b=!0:a.itemOrder===D.FORWARD&&a.strategy===D.DEPTH_FIRST&&(b=!0)),b}function y(){return{requiresEndVertex:function(){return!1},getPathItems:function(a,b){var c={},d=b.length-1;return b.forEach(function(b,e){e!==d&&(c[a(b)]=!0)}),c},createPath:function(a,b){for(var c={edges:[],vertices:[]},d=a[b];;){if(null!==d.edge&&c.edges.unshift(d.edge),c.vertices.unshift(d.vertex),b=d.parentIndex,0>b)break;d=a[b]}return c},run:function(a,b,c){for(var d=a.maxIterations,e=0,f=[{edge:null,vertex:c,parentIndex:-1}],g={edges:{},vertices:{}},h=0,i=1,j=x(a);1===i&&h<f.length||-1===i&&h>=0;){var k,l=f[h],m=l.vertex,n=l.edge;if(e++>d){var o=new I;throw o.errorNum=G.errors.ERROR_GRAPH_TOO_MANY_ITERATIONS.code,o.errorMessage=G.errors.ERROR_GRAPH_TOO_MANY_ITERATIONS.message,o}if(L(),null===l.visit||void 0===l.visit){if(l.visit=!1,k=this.createPath(f,h),a.uniqueness.vertices===D.UNIQUE_PATH&&(g.vertices=this.getPathItems(a.datasource.getVertexId,k.vertices)),a.uniqueness.edges===D.UNIQUE_PATH&&(g.edges=this.getPathItems(a.datasource.getEdgeId,k.edges)),!w(a,g,m,n)){h<f.length-1?h+=i:i=-1;continue}var p=v(a.filter(a,m,k));if(a.order===D.PRE_ORDER&&p.visit?a.visitor(a,b,m,k):l.visit=p.visit||!1,p.expand){var q,r=a.expander(a,m,k);for(j&&r.reverse(),a.order===D.PRE_ORDER_EXPANDER&&p.visit&&a.visitor(a,b,m,k,r),q=0;q<r.length;++q)r[q].parentIndex=h,f.push(r[q])}else a.order===D.PRE_ORDER_EXPANDER&&p.visit&&a.visitor(a,b,m,k,[]);a.order===D.POST_ORDER&&(h<f.length-1?h+=i:i=-1)}else a.order===D.POST_ORDER&&l.visit&&(k=this.createPath(f,h),a.visitor(a,b,m,k)),h+=i}}}}function z(){return{requiresEndVertex:function(){return!1},getPathItems:function(a,b){var c={};return b.forEach(function(b){c[a(b)]=!0}),c},run:function(a,b,c){for(var d=a.maxIterations,e=0,f=[{edge:null,vertex:c,visit:null}],g={edges:[],vertices:[]},h={edges:{},vertices:{}},i=x(a),j=a.uniqueness,k=j.vertices!==D.UNIQUE_NONE||j.edges!==D.UNIQUE_NONE;f.length>0;){if(e++>d){var l=new I;throw l.errorNum=G.errors.ERROR_GRAPH_TOO_MANY_ITERATIONS.code,l.errorMessage=G.errors.ERROR_GRAPH_TOO_MANY_ITERATIONS.message,l}L();var m=f[f.length-1],n=m.vertex,o=m.edge;if(null===m.visit||void 0===m.visit){if(m.visit=!1,k&&(j.vertices===D.UNIQUE_PATH&&(h.vertices=this.getPathItems(a.datasource.getVertexId,g.vertices)),j.edges===D.UNIQUE_PATH&&(h.edges=this.getPathItems(a.datasource.getEdgeId,g.edges)),!w(a,h,n,o))){f.pop();continue}null!==o&&g.edges.push(o),g.vertices.push(n);var p=v(a.filter(a,n,g));if(a.order===D.PRE_ORDER&&p.visit?a.visitor(a,b,n,g):m.visit=p.visit||!1,p.expand){var q,r=a.expander(a,n,g);for(i&&r.reverse(),a.order===D.PRE_ORDER_EXPANDER&&p.visit&&a.visitor(a,b,n,g,r),q=0;q<r.length;++q)r[q].visit=null,f.push(r[q])}else a.order===D.PRE_ORDER_EXPANDER&&p.visit&&a.visitor(a,b,n,g,[])}else a.order===D.POST_ORDER&&m.visit&&a.visitor(a,b,n,g),f.pop(),g.edges.length>0&&g.edges.pop(),g.vertices.pop()}}}}function A(){return{nodes:{},requiresEndVertex:function(){return!0},makeNode:function(a){var b=a._id;return this.nodes.hasOwnProperty(b)||(this.nodes[b]={vertex:a,dist:1/0}),this.nodes[b]},vertexList:function(a){for(var b=[];a;)b.push(a),a=a.parent;return b},buildPath:function(a){for(var b={vertices:[a.vertex],edges:[]},c=a;c.parent;)b.vertices.unshift(c.parent.vertex),b.edges.unshift(c.parentEdge),c=c.parent;return b},run:function(a,b,c,d){var e=a.maxIterations,f=0,g=new H(function(a){return a.dist}),h=this.makeNode(c);for(h.dist=0,g.push(h);g.size()>0;){if(f++>e){var i=new I;throw i.errorNum=G.errors.ERROR_GRAPH_TOO_MANY_ITERATIONS.code,i.errorMessage=G.errors.ERROR_GRAPH_TOO_MANY_ITERATIONS.message,i}L();var j,k,l=g.pop();if(l.vertex._id===d._id){var m=this.vertexList(l).reverse();for(k=m.length,j=0;k>j;++j)m[j].hide||a.visitor(a,b,m[j].vertex,this.buildPath(m[j]));return}if(!l.visited){if(l.dist===1/0)break;l.visited=!0;var n=this.buildPath(l),o=v(a.filter(a,l.vertex,n));if(o.visit||(l.hide=!0),o.expand){var p=l.dist,q=a.expander(a,l.vertex,n);for(k=q.length,j=0;k>j;++j){var r=this.makeNode(q[j].vertex);if(!r.visited){var s=q[j].edge,t=1;a.distance?t=a.distance(a,l.vertex,r.vertex,s):a.weight&&(t="number"==typeof s[a.weight]?s[a.weight]:a.defaultWeight?a.defaultWeight:1/0);var u=p+t;u<r.dist&&(r.dist=u,r.parent=l,r.parentEdge=s,g.push(r))}}}}}}}}function B(){return{nodes:{},requiresEndVertex:function(){return!0},makeNode:function(a){var b=a._id;return this.nodes.hasOwnProperty(b)||(this.nodes[b]={vertex:a,dist:1/0}),this.nodes[b]},vertexList:function(a){for(var b=[];a;)b.push(a),a=a.parent;return b},buildPath:function(a){for(var b={vertices:[a.vertex],edges:[]},c=a;c.parent;)b.vertices.unshift(c.parent.vertex),b.edges.unshift(c.parentEdge),c=c.parent;return b},run:function(a,b,c,e){var f=a.maxIterations,g=0,h=new H(function(a){return a.dist}),i=this.makeNode(c);for(i.dist=0,h.push(i);h.size()>0;){if(g++>f){var j=new I;throw j.errorNum=G.errors.ERROR_GRAPH_TOO_MANY_ITERATIONS.code,j.errorMessage=G.errors.ERROR_GRAPH_TOO_MANY_ITERATIONS.message,j}var k,l,m=h.pop();if(e.hasOwnProperty(m.vertex._id)&&(delete e[m.vertex._id],a.visitor(a,b,m,this.buildPath(m)),d(e)))return;if(!m.visited){if(m.dist===1/0)break;m.visited=!0;var n=this.buildPath(m),o=v(a.filter(a,m.vertex,n));if(o.visit||(m.hide=!0),o.expand){var p=m.dist,q=a.expander(a,m.vertex,n);for(l=q.length,k=0;l>k;++k){var r=this.makeNode(q[k].vertex);if(!r.visited){var s=q[k].edge,t=1;a.distance?t=a.distance(a,m.vertex,r.vertex,s):a.weight&&(t="number"==typeof s[a.weight]?s[a.weight]:a.defaultWeight?a.defaultWeight:1/0);var u=p+t;u<r.dist&&(r.dist=u,r.parent=m,r.parentEdge=s,h.push(r))}}}}}}}}function C(){return{nodes:{},requiresEndVertex:function(){return!0},makeNode:function(a){var b=a._id;return this.nodes.hasOwnProperty(b)||(this.nodes[b]={vertex:a,f:0,g:0,h:0}),this.nodes[b]},vertexList:function(a){for(var b=[];a;)b.push(a),a=a.parent;return b},buildPath:function(a){for(var b={vertices:[a.vertex],edges:[]},c=a;c.parent;)b.vertices.unshift(c.parent.vertex),b.edges.unshift(c.parentEdge),c=c.parent;return b},run:function(a,b,c,d){var e=a.maxIterations,f=0,g=new H(function(a){return a.f});for(g.push(this.makeNode(c));g.size()>0;){if(f++>e){var h=new I;throw h.errorNum=G.errors.ERROR_GRAPH_TOO_MANY_ITERATIONS.code,h.errorMessage=G.errors.ERROR_GRAPH_TOO_MANY_ITERATIONS.message,h}L();var i,j,k=g.pop();if(k.vertex._id===d._id){var l=this.vertexList(k);for(a.order!==D.PRE_ORDER&&l.reverse(),j=l.length,i=0;j>i;++i)a.visitor(a,b,l[i].vertex,this.buildPath(l[i]));return}k.closed=!0;var m=this.buildPath(k),n=a.expander(a,k.vertex,m);for(j=n.length,i=0;j>i;++i){var o=this.makeNode(n[i].vertex);if(!o.closed){var p=k.g+1,q=o.visited;if(!q||p<o.g){var r=n[i].edge;o.visited=!0,o.parent=k,o.parentEdge=r,o.h=1,a.distance&&!o.h&&(o.h=a.distance(a,o.vertex,d,r)),o.g=p,o.f=o.g+o.h,q?g.rescoreElement(o):g.push(o)}}}}}}}var D,E=require("org/arangodb/graph-blueprint"),F=require("org/arangodb/general-graph"),G=require("org/arangodb"),H=require("org/arangodb/heap").BinaryHeap,I=G.ArangoError,J=require("internal").ShapedJson,K=G.db,L=function(){};try{"function"==typeof AQL_QUERY_IS_KILLED&&(L=function(){if(AQL_QUERY_IS_KILLED()){var a=new I;throw a.errorNum=G.errors.ERROR_QUERY_KILLED.code,a.errorMessage=G.errors.ERROR_QUERY_KILLED.message,a}})}catch(M){}var N=function(a,b){this.message=a||"traversal intentionally aborted by user",this.options=b||{},this._intentionallyAborted=!0};N.prototype=new Error,D=function(a){function b(a,b,c){var e;if(null===a||void 0===a)for(e in b)if(b.hasOwnProperty(e)){a=e;break}if("string"==typeof a&&(a=a.toLowerCase().replace(/-/,""),null!==b[a]&&void 0!==b[a]))return b[a];for(e in b)if(b.hasOwnProperty(e)&&b[e]===a)return a;throw d=new I,d.errorNum=G.errors.ERROR_BAD_PARAMETER.code,d.errorMessage="invalid value for "+c,d}var c,d,e={order:D.PRE_ORDER,itemOrder:D.FORWARD,strategy:D.DEPTH_FIRST,uniqueness:{vertices:D.UNIQUE_NONE,edges:D.UNIQUE_PATH},visitor:n,filter:null,expander:h,datasource:null,maxIterations:1e7,minDepth:0,maxDepth:256,buildVertices:!0};if("object"!=typeof a)throw d=new I,d.errorNum=G.errors.ERROR_BAD_PARAMETER.code,d.errorMessage=G.errors.ERROR_BAD_PARAMETER.message,d;for(c in e)e.hasOwnProperty(c)&&(a.hasOwnProperty(c)&&void 0!==a[c]||(a[c]=e[c]));if(a.uniqueness={vertices:b(a.uniqueness&&a.uniqueness.vertices,{none:D.UNIQUE_NONE,global:D.UNIQUE_GLOBAL,path:D.UNIQUE_PATH},"uniqueness.vertices"),edges:b(a.uniqueness&&a.uniqueness.edges,{path:D.UNIQUE_PATH,none:D.UNIQUE_NONE,global:D.UNIQUE_GLOBAL},"uniqueness.edges")},a.strategy=b(a.strategy,{depthfirst:D.DEPTH_FIRST,breadthfirst:D.BREADTH_FIRST,astar:D.ASTAR_SEARCH,dijkstra:D.DIJKSTRA_SEARCH,dijkstramulti:D.DIJKSTRA_SEARCH_MULTI},"strategy"),a.order=b(a.order,{preorder:D.PRE_ORDER,postorder:D.POST_ORDER,preorderexpander:D.PRE_ORDER_EXPANDER},"order"),a.itemOrder=b(a.itemOrder,{forward:D.FORWARD,backward:D.BACKWARD},"itemOrder"),"function"!=typeof a.visitor)throw d=new I,d.errorNum=G.errors.ERROR_BAD_PARAMETER.code,d.errorMessage="invalid visitor function",d;var f=[];if(void 0!==a.minDepth&&null!==a.minDepth&&a.minDepth>0&&f.push(s),void 0!==a.maxDepth&&null!==a.maxDepth&&a.maxDepth>0&&f.push(r),Array.isArray(a.filter)||("function"==typeof a.filter?a.filter=[a.filter]:a.filter=[]),a.filter.forEach(function(a){if("function"!=typeof a)throw d=new I,d.errorNum=G.errors.ERROR_BAD_PARAMETER.code,d.errorMessage="invalid filter function",d;f.push(a)}),f.length>1?a.filter=function(a,b,c){return u(f,a,b,c)}:1===f.length?a.filter=f[0]:a.filter=q,"function"!=typeof a.expander&&(a.expander=b(a.expander,{outbound:h,inbound:i,any:j},"expander")),"function"!=typeof a.expander)throw d=new I,d.errorNum=G.errors.ERROR_BAD_PARAMETER.code,d.errorMessage="invalid expander function",d;if("object"!=typeof a.datasource)throw d=new I,d.errorNum=G.errors.ERROR_BAD_PARAMETER.code,d.errorMessage="invalid datasource",d;this.config=a},D.prototype.traverse=function(a,b,c){var d;if(d=this.config.strategy===D.ASTAR_SEARCH?C():this.config.strategy===D.DIJKSTRA_SEARCH?A():this.config.strategy===D.DIJKSTRA_SEARCH_MULTI?B():this.config.strategy===D.BREADTH_FIRST?y():z(),void 0===b||null===b||"object"!=typeof b){var e=new I;throw e.errorNum=G.errors.ERROR_BAD_PARAMETER.code,e.errorMessage=G.errors.ERROR_BAD_PARAMETER.message+": invalid startVertex specified for traversal",e}if(d.requiresEndVertex()&&(void 0===c||null===c||"object"!=typeof c)){var f=new I;throw f.errorNum=G.errors.ERROR_BAD_PARAMETER.code,f.errorMessage=G.errors.ERROR_BAD_PARAMETER.message+": invalid endVertex specified for traversal",f}try{d.run(this.config,a,b,c)}catch(g){if("object"!=typeof g||!g._intentionallyAborted)throw g}},D.UNIQUE_NONE=0,D.UNIQUE_PATH=1,D.UNIQUE_GLOBAL=2,D.BREADTH_FIRST=0,D.DEPTH_FIRST=1,D.ASTAR_SEARCH=2,D.DIJKSTRA_SEARCH=3,D.DIJKSTRA_SEARCH_MULTI=4,D.PRE_ORDER=0,D.POST_ORDER=1,D.PRE_ORDER_EXPANDER=2,D.FORWARD=0,D.BACKWARD=1,D.PRUNE="prune",D.EXCLUDE="exclude",a.collectionDatasourceFactory=e,a.generalGraphDatasourceFactory=f,a.graphDatasourceFactory=g,a.outboundExpander=h,a.inboundExpander=i,a.anyExpander=j,a.expandOutEdgesWithLabels=k,a.expandInEdgesWithLabels=l,a.expandEdgesWithLabels=m,a.trackingVisitor=n,a.countingVisitor=o,a.doNothingVisitor=p,a.visitAllFilter=q,a.maxDepthFilter=r,a.minDepthFilter=s,a.includeMatchingAttributesFilter=t,a.abortedException=N,a.Traverser=D}),module.define("org/arangodb/is",function(a,b){function c(a){return null!==a&&void 0!==a}function d(a){return!c(a)}function e(a){return a!==!1&&c(a)}function f(a){return!e(a)}["Object","Array","Boolean","Date","Function","Number","String","RegExp"].forEach(function(b){a[b.toLowerCase()]=function(a){return Object.prototype.toString.call(a)==="[object "+b+"]"},a["no"+b]=function(a){return Object.prototype.toString.call(a)!=="[object "+b+"]"}}),a.existy=c,a.notExisty=d,a.truthy=e,a.falsy=f}),module.define("org/arangodb/mimetypes",function(a,b){a.mimeTypes={gif:["image/gif",!1],jpg:["image/jpg",!1],png:["image/png",!1],tiff:["image/tiff",!1],ico:["image/x-icon",!1],css:["text/css",!0],js:["text/javascript",!0],json:["application/json",!0],html:["text/html",!0],htm:["text/html",!0],pdf:["application/pdf",!1],ps:["application/postscript",!1],txt:["text/plain",!0],text:["text/plain",!0],xml:["application/xml",!0],dtd:["application/xml-dtd",!0],svg:["image/svg+xml",!0],ttf:["application/x-font-ttf",!1],otf:["application/x-font-opentype",!1],woff:["application/font-woff",!1],eot:["application/vnd.ms-fontobject",!1],bz2:["application/x-bzip2",!1],gz:["application/x-gzip",!1],tgz:["application/x-tar",!1],zip:["application/x-compressed-zip",!1],doc:["application/msword",!1],docx:["application/vnd.openxmlformats-officedocument.wordprocessingml.document",!1],dotx:["application/vnd.openxmlformats-officedocument.wordprocessingml.template",!1],potx:["application/vnd.openxmlformats-officedocument.presentationml.template",!1],ppsx:["application/vnd.openxmlformats-officedocument.presentationml.slideshow",!1],ppt:["application/vnd.ms-powerpoint",!1],pptx:["application/vnd.openxmlformats-officedocument.presentationml.presentation",!1],xls:["application/vnd.ms-excel",!1],xlsb:["application/vnd.ms-excel.sheet.binary.macroEnabled.12",!1],xlsx:["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",!1],xltx:["application/vnd.openxmlformats-officedocument.spreadsheetml.template",!1],swf:["application/x-shockwave-flash",!1]},a.extensions={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"image/svg+xml":["svg"],"application/postscript":["ps"],"image/png":["png"],"application/x-font-ttf":["ttf"],"application/vnd.ms-excel.sheet.binary.macroEnabled.12":["xlsb"],"application/x-font-opentype":["otf"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/x-bzip2":["bz2"],"application/json":["json"],"application/pdf":["pdf"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.ms-fontobject":["eot"],"application/xml-dtd":["dtd"],"application/x-shockwave-flash":["swf"],"image/gif":["gif"],"image/jpg":["jpg"],"application/xml":["xml"],
"application/vnd.ms-excel":["xls"],"image/tiff":["tiff"],"application/vnd.ms-powerpoint":["ppt"],"application/font-woff":["woff"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"text/plain":["txt","text"],"application/x-tar":["tgz"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/x-gzip":["gz"],"text/javascript":["js"],"text/html":["html","htm"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"image/x-icon":["ico"],"application/x-compressed-zip":["zip"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"text/css":["css"],"application/msword":["doc"]}}),module.define("org/arangodb/replication",function(a,b){var c=require("internal"),d=require("org/arangodb/arangosh"),e={},f={};e.state=function(){var a=c.db,b=a._connection.GET("/_api/replication/logger-state");return d.checkRequestResult(b),b},e.tickRanges=function(){var a=c.db,b=a._connection.GET("/_api/replication/logger-tick-ranges");return d.checkRequestResult(b),b},e.firstTick=function(){var a=c.db,b=a._connection.GET("/_api/replication/logger-first-tick");return d.checkRequestResult(b),b.firstTick},f.start=function(a){var b=c.db,e="";void 0!==a&&(e="?from="+encodeURIComponent(a));var f=b._connection.PUT("/_api/replication/applier-start"+e,"");return d.checkRequestResult(f),f},f.stop=f.shutdown=function(){var a=c.db,b=a._connection.PUT("/_api/replication/applier-stop","");return d.checkRequestResult(b),b},f.state=function(){var a=c.db,b=a._connection.GET("/_api/replication/applier-state");return d.checkRequestResult(b),b},f.forget=function(){var a=c.db,b=a._connection.DELETE("/_api/replication/applier-state");return d.checkRequestResult(b),b},f.properties=function(a){var b,e=c.db;return b=void 0===a?e._connection.GET("/_api/replication/applier-config"):e._connection.PUT("/_api/replication/applier-config",JSON.stringify(a)),d.checkRequestResult(b),b};var g=function(a){var b=c.db,e=JSON.stringify(a||{}),f=b._connection.PUT("/_api/replication/sync",e);return d.checkRequestResult(f),f},h=function(a,b){var e=c.db;b=b||{},b.restrictType="include",b.restrictCollections=[a],b.includeSystem=!0,b.incremental=!0;var f=JSON.stringify(b),g=e._connection.PUT("/_api/replication/sync",f);return d.checkRequestResult(g),g},i=function(){var a=c.db,b=a._connection.GET("/_api/replication/server-id");return d.checkRequestResult(b),b.serverId};a.logger=e,a.applier=f,a.sync=g,a.syncCollection=h,a.serverId=i}),module.define("org/arangodb/simple-query-common",function(a,b){function c(a,b,c,d){this._documents=a,this._countTotal=a.length,this._skip=b,this._limit=c,this._cached=!1,this._extra={};var e=this;null!==d&&void 0!==d&&"object"==typeof d&&(["stats","warnings","profile"].forEach(function(a){d.hasOwnProperty(a)&&(e._extra[a]=d[a])}),this._cached=d.cached||!1),this.execute()}function d(){this._execution=null,this._skip=0,this._limit=null,this._countQuery=null,this._countTotal=null,this._batchSize=null}function e(a,b){return 0===a._limit?a=a.clone():0===b?(a=a.clone(),a._limit=0):null===a._limit?(a=a.clone(),a._limit=b):(a=a.clone(),b<a._limit&&(a._limit=b)),a}function f(a){this._collection=a}function g(a,b){this._collection=a,this._example=b}function h(a,b){this._collection=a,this._condition=b}function i(a,b,c,d,e){this._collection=a,this._attribute=b,this._left=c,this._right=d,this._type=e}function j(a,b){this._collection=a,this._index=b}function k(a,b,c,d){if(this._collection=a,this._attribute=b,this._query=c,this._index=void 0===d?null:d,void 0===d){var e,f=a.getIndexes();for(e=0;e<f.length;++e){var g=f[e];"fulltext"===g.type&&g.fields[0]===b&&(null===this._index?this._index=g.id:g.indexSubstrings&&!this._index.indexSubstrings&&(this._index=g.id))}}if(null===this._index){var h=new q;throw h.errorNum=p.ERROR_QUERY_FULLTEXT_INDEX_MISSING,h.errorMessage=p.errors.ERROR_QUERY_FULLTEXT_INDEX_MISSING.message,h}}var l,m,n,o,p=require("org/arangodb"),q=p.ArangoError;c.prototype.execute=function(){null===this._skip&&(this._skip=0);var a=this._documents.length,b=0,c=a;if(0<this._skip)b=this._skip,b>c&&(b=c);else if(this._skip<0){var d=-this._skip;c>d&&(b=c-d)}null!==this._limit&&b+this._limit<c&&(c=b+this._limit),this._current=b,this._stop=c,this._countQuery=c-b},c.prototype._PRINT=function(a){var b;b="GeneralArrayCursor([.. "+this._documents.length+" docs .., cached: "+String(this._cached)+"])",null!==this._skip&&0!==this._skip&&(b+=".skip("+this._skip+")"),null!==this._limit&&(b+=".limit("+this._limit+")"),a.output+=b},c.prototype.toArray=c.prototype.elements=function(){return this._documents},c.prototype.count=function(){return this._countTotal},c.prototype.getExtra=function(){return this._extra||{}},c.prototype.hasNext=function(){return this._current<this._stop},c.prototype.next=function(){return this._current<this._stop?this._documents[this._current++]:void 0},c.prototype.dispose=function(){this._documents=null,this._skip=null,this._limit=null,this._countTotal=null,this._countQuery=null,this._current=null,this._stop=null,this._extra=null},d.prototype.clone=function(){throw"cannot clone abstract query"},d.prototype.execute=function(){throw"cannot execute abstract query"},d.prototype.limit=function(a){if(null!==this._execution)throw"query is already executing";if(0>a){var b=new q;throw b.errorNum=p.ERROR_BAD_PARAMETER,b.errorMessage="limit must be non-negative",b}return e(this,a)},d.prototype.skip=function(a){var b,c;if((void 0===a||null===a)&&(a=0),null!==this._execution)throw"query is already executing";return null===this._limit?(b=this.clone(),null===this._skip||0===this._skip?b._skip=a:b._skip+=a):(c=this.clone().toArray(),b=new l(c),b._skip=a,b._countTotal=c._countTotal),b},d.prototype.toArray=function(){var a;for(this.execute(),a=[];this.hasNext();)a.push(this.next());return a},d.prototype.getBatchSize=function(){return this._batchSize},d.prototype.setBatchSize=function(a){a>=1&&(this._batchSize=a)},d.prototype.count=function(a){return this.execute(),void 0!==a&&a?this._countQuery:this._countTotal},d.prototype.hasNext=function(){return this.execute(),this._execution.hasNext()},d.prototype.next=function(){return this.execute(),this._execution.next()},d.prototype.dispose=function(){null!==this._execution&&this._execution.dispose(),this._execution=null,this._countQuery=null,this._countTotal=null},f.prototype=new d,f.prototype.constructor=f,f.prototype.clone=function(){var a;return a=new f(this._collection),a._skip=this._skip,a._limit=this._limit,a},f.prototype._PRINT=function(a){var b;b="SimpleQueryAll("+this._collection.name()+")",null!==this._skip&&0!==this._skip&&(b+=".skip("+this._skip+")"),null!==this._limit&&(b+=".limit("+this._limit+")"),a.output+=b},l=function(a){this._documents=a},l.prototype=new d,l.prototype.constructor=l,l.prototype.clone=function(){var a;return a=new l(this._documents),a._skip=this._skip,a._limit=this._limit,a},l.prototype.execute=function(){null===this._execution&&(null===this._skip&&(this._skip=0),this._execution=new c(this._documents,this._skip,this._limit))},l.prototype._PRINT=function(a){var b;b="SimpleQueryArray(documents)",null!==this._skip&&0!==this._skip&&(b+=".skip("+this._skip+")"),null!==this._limit&&(b+=".limit("+this._limit+")"),a.output+=b},g.prototype=new d,g.prototype.constructor=g,g.prototype.clone=function(){var a;return a=new g(this._collection,this._example),a._skip=this._skip,a._limit=this._limit,a._type=this._type,a._index=this._index,a},g.prototype._PRINT=function(a){var b;b="SimpleQueryByExample("+this._collection.name()+")",null!==this._skip&&0!==this._skip&&(b+=".skip("+this._skip+")"),null!==this._limit&&(b+=".limit("+this._limit+")"),a.output+=b},h.prototype=new d,h.prototype.constructor=h,h.prototype.clone=function(){var a;return a=new h(this._collection,this._condition),a._skip=this._skip,a._limit=this._limit,a._type=this._type,a._index=this._index,a},h.prototype._PRINT=function(a){var b;b="SimpleQueryByCondition("+this._collection.name()+")",null!==this._skip&&0!==this._skip&&(b+=".skip("+this._skip+")"),null!==this._limit&&(b+=".limit("+this._limit+")"),a.output+=b},i.prototype=new d,i.prototype.constructor=i,i.prototype.clone=function(){var a;return a=new i(this._collection,this._attribute,this._left,this._right,this._type),a._skip=this._skip,a._limit=this._limit,a},i.prototype._PRINT=function(a){var b;b="SimpleQueryRange("+this._collection.name()+")",null!==this._skip&&0!==this._skip&&(b+=".skip("+this._skip+")"),null!==this._limit&&(b+=".limit("+this._limit+")"),a.output+=b},j.prototype._PRINT=function(a){var b;b="GeoIndex("+this._collection.name()+", "+this._index+")",a.output+=b},j.prototype.near=function(a,b){return new m(this._collection,a,b,this._index)},j.prototype.within=function(a,b,c){return new n(this._collection,a,b,c,this._index)},j.prototype.withinRectangle=function(a,b,c,d){return new o(this._collection,a,b,c,d,this._index)},m=function(a,b,c,d){var e,f;if(this._collection=a,this._latitude=b,this._longitude=c,this._index=void 0===d?null:d,this._distance=null,void 0===d)for(e=a.getIndexes(),f=0;f<e.length;++f){var g=e[f];("geo1"===g.type||"geo2"===g.type)&&(null===this._index?this._index=g.id:g.id<this._index&&(this._index=g.id))}if(null===this._index){var h=new q;throw h.errorNum=p.ERROR_QUERY_GEO_INDEX_MISSING,h.errorMessage=require("internal").sprintf(p.errors.ERROR_QUERY_GEO_INDEX_MISSING.message,a.name()),h}},m.prototype=new d,m.prototype.constructor=m,m.prototype.clone=function(){var a;return a=new m(this._collection,this._latitude,this._longitude,this._index),a._skip=this._skip,a._limit=this._limit,a._distance=this._distance,a},m.prototype._PRINT=function(a){var b;b="SimpleQueryNear("+this._collection.name()+", "+this._latitude+", "+this._longitude+", "+this._index+")",null!==this._skip&&0!==this._skip&&(b+=".skip("+this._skip+")"),null!==this._limit&&(b+=".limit("+this._limit+")"),a.output+=b},m.prototype.distance=function(a){var b;return b=this.clone(),a?b._distance=a:b._distance="distance",b},n=function(a,b,c,d,e){var f,g;if(this._collection=a,this._latitude=b,this._longitude=c,this._index=void 0===e?null:e,this._radius=d,this._distance=null,void 0===e)for(f=a.getIndexes(),g=0;g<f.length;++g){var h=f[g];("geo1"===h.type||"geo2"===h.type)&&(null===this._index?this._index=h.id:h.id<this._index&&(this._index=h.id))}if(null===this._index){var i=new q;throw i.errorNum=p.ERROR_QUERY_GEO_INDEX_MISSING,i.errorMessage=p.errors.ERROR_QUERY_GEO_INDEX_MISSING.message,i}},n.prototype=new d,n.prototype.constructor=n,n.prototype.clone=function(){var a;return a=new n(this._collection,this._latitude,this._longitude,this._radius,this._index),a._skip=this._skip,a._limit=this._limit,a._distance=this._distance,a},n.prototype._PRINT=function(a){var b;b="SimpleQueryWithin("+this._collection.name()+", "+this._latitude+", "+this._longitude+", "+this._radius+", "+this._index+")",null!==this._skip&&0!==this._skip&&(b+=".skip("+this._skip+")"),null!==this._limit&&(b+=".limit("+this._limit+")"),a.output+=b},n.prototype.distance=function(a){var b;return b=this.clone(),a?b._distance=a:b._distance="distance",b},o=function(a,b,c,d,e,f){var g,h;if(this._collection=a,this._latitude1=b,this._longitude1=c,this._latitude2=d,this._longitude2=e,this._index=void 0===f?null:f,void 0===f)for(g=a.getIndexes(),h=0;h<g.length;++h){var i=g[h];("geo1"===i.type||"geo2"===i.type)&&(null===this._index?this._index=i.id:i.id<this._index&&(this._index=i.id))}if(null===this._index){var j=new q;throw j.errorNum=p.ERROR_QUERY_GEO_INDEX_MISSING,j.errorMessage=p.errors.ERROR_QUERY_GEO_INDEX_MISSING.message,j}},o.prototype=new d,o.prototype.constructor=o,o.prototype.clone=function(){var a;return a=new o(this._collection,this._latitude1,this._longitude1,this._latitude2,this._longitude2,this._index),a._skip=this._skip,a._limit=this._limit,a},o.prototype._PRINT=function(a){var b;b="SimpleQueryWithinRectangle("+this._collection.name()+", "+this._latitude1+", "+this._longitude1+", "+this._latitude2+", "+this._longitude2+", "+this._index+")",null!==this._skip&&0!==this._skip&&(b+=".skip("+this._skip+")"),null!==this._limit&&(b+=".limit("+this._limit+")"),a.output+=b},k.prototype=new d,k.prototype.constructor=k,k.prototype.clone=function(){var a;return a=new k(this._collection,this._attribute,this._query,this._index),a._skip=this._skip,a._limit=this._limit,a},k.prototype._PRINT=function(a){var b;b="SimpleQueryFulltext("+this._collection.name()+", "+this._attribute+', "'+this._query+'")',null!==this._skip&&0!==this._skip&&(b+=".skip("+this._skip+")"),null!==this._limit&&(b+=".limit("+this._limit+")"),a.output+=b},a.GeneralArrayCursor=c,a.SimpleQueryAll=f,a.SimpleQueryArray=l,a.SimpleQueryByExample=g,a.SimpleQueryByCondition=h,a.SimpleQueryRange=i,a.SimpleQueryGeo=j,a.SimpleQueryNear=m,a.SimpleQueryWithin=n,a.SimpleQueryWithinRectangle=o,a.SimpleQueryFulltext=k}),module.define("org/arangodb/simple-query",function(a,b){var c=require("org/arangodb/arangosh"),d=require("org/arangodb/arango-query-cursor").ArangoQueryCursor,e=require("org/arangodb/simple-query-common"),f=e.GeneralArrayCursor,g=e.SimpleQueryAll,h=e.SimpleQueryArray,i=e.SimpleQueryByExample,j=e.SimpleQueryByCondition,k=e.SimpleQueryFulltext,l=e.SimpleQueryGeo,m=e.SimpleQueryNear,n=e.SimpleQueryRange,o=e.SimpleQueryWithin,p=e.SimpleQueryWithinRectangle;g.prototype.execute=function(a){if(null===this._execution){void 0!==a&&a>0&&(this._batchSize=a);var b={collection:this._collection.name()};null!==this._limit&&(b.limit=this._limit),null!==this._skip&&(b.skip=this._skip),null!==this._batchSize&&(b.batchSize=this._batchSize);var e=this._collection._database._connection.PUT("/_api/simple/all",JSON.stringify(b));c.checkRequestResult(e),this._execution=new d(this._collection._database,e),e.hasOwnProperty("count")&&(this._countQuery=e.count)}},i.prototype.execute=function(a){if(null===this._execution){void 0!==a&&a>0&&(this._batchSize=a);var b={collection:this._collection.name(),example:this._example};null!==this._limit&&(b.limit=this._limit),null!==this._skip&&(b.skip=this._skip),null!==this._batchSize&&(b.batchSize=this._batchSize);var e="by-example";if(this.hasOwnProperty("_type"))switch(b.index=this._index,this._type){case"hash":e="by-example-hash";break;case"skiplist":e="by-example-skiplist"}var f=this._collection._database._connection.PUT("/_api/simple/"+e,JSON.stringify(b));c.checkRequestResult(f),this._execution=new d(this._collection._database,f),f.hasOwnProperty("count")&&(this._countQuery=f.count,this._countTotal=f.count)}},j.prototype.execute=function(a){if(null===this._execution){void 0!==a&&a>0&&(this._batchSize=a);var b={collection:this._collection.name(),condition:this._condition};null!==this._limit&&(b.limit=this._limit),null!==this._skip&&(b.skip=this._skip),null!==this._batchSize&&(b.batchSize=this._batchSize);var e="by-condition";if(this.hasOwnProperty("_type"))switch(b.index=this._index,this._type){case"skiplist":e="by-condition-skiplist"}var f=this._collection._database._connection.PUT("/_api/simple/"+e,JSON.stringify(b));c.checkRequestResult(f),this._execution=new d(this._collection._database,f),f.hasOwnProperty("count")&&(this._countQuery=f.count,this._countTotal=f.count)}},n.prototype.execute=function(a){if(null===this._execution){void 0!==a&&a>0&&(this._batchSize=a);var b={collection:this._collection.name(),attribute:this._attribute,right:this._right,left:this._left,closed:1===this._type};null!==this._limit&&(b.limit=this._limit),null!==this._skip&&(b.skip=this._skip),null!==this._batchSize&&(b.batchSize=this._batchSize);var e=this._collection._database._connection.PUT("/_api/simple/range",JSON.stringify(b));c.checkRequestResult(e),this._execution=new d(this._collection._database,e),e.hasOwnProperty("count")&&(this._countQuery=e.count)}},m.prototype.execute=function(a){if(null===this._execution){void 0!==a&&a>0&&(this._batchSize=a);var b={collection:this._collection.name(),latitude:this._latitude,longitude:this._longitude};null!==this._limit&&(b.limit=this._limit),null!==this._skip&&(b.skip=this._skip),null!==this._index&&(b.geo=this._index),null!==this._distance&&(b.distance=this._distance),null!==this._batchSize&&(b.batchSize=this._batchSize);var e=this._collection._database._connection.PUT("/_api/simple/near",JSON.stringify(b));c.checkRequestResult(e),this._execution=new d(this._collection._database,e),e.hasOwnProperty("count")&&(this._countQuery=e.count)}},o.prototype.execute=function(a){if(null===this._execution){void 0!==a&&a>0&&(this._batchSize=a);var b={collection:this._collection.name(),latitude:this._latitude,longitude:this._longitude,radius:this._radius};null!==this._limit&&(b.limit=this._limit),null!==this._skip&&(b.skip=this._skip),null!==this._index&&(b.geo=this._index),null!==this._distance&&(b.distance=this._distance),null!==this._batchSize&&(b.batchSize=this._batchSize);var e=this._collection._database._connection.PUT("/_api/simple/within",JSON.stringify(b));c.checkRequestResult(e),this._execution=new d(this._collection._database,e),e.hasOwnProperty("count")&&(this._countQuery=e.count)}},p.prototype.execute=function(a){if(null===this._execution){void 0!==a&&a>0&&(this._batchSize=a);var b={collection:this._collection.name(),latitude1:this._latitude1,longitude1:this._longitude1,latitude2:this._latitude2,longitude2:this._longitude2};null!==this._limit&&(b.limit=this._limit),null!==this._skip&&(b.skip=this._skip),null!==this._index&&(b.geo=this._index),null!==this._distance&&(b.distance=this._distance),null!==this._batchSize&&(b.batchSize=this._batchSize);var e=this._collection._database._connection.PUT("/_api/simple/within-rectangle",JSON.stringify(b));c.checkRequestResult(e),this._execution=new d(this._collection._database,e),e.hasOwnProperty("count")&&(this._countQuery=e.count)}},k.prototype.execute=function(a){if(null===this._execution){void 0!==a&&a>0&&(this._batchSize=a);var b={collection:this._collection.name(),attribute:this._attribute,query:this._query};null!==this._limit&&(b.limit=this._limit),null!==this._index&&(b.index=this._index),null!==this._skip&&(b.skip=this._skip),null!==this._batchSize&&(b.batchSize=this._batchSize);var e=this._collection._database._connection.PUT("/_api/simple/fulltext",JSON.stringify(b));c.checkRequestResult(e),this._execution=new d(this._collection._database,e),e.hasOwnProperty("count")&&(this._countQuery=e.count)}},a.GeneralArrayCursor=f,a.SimpleQueryAll=g,a.SimpleQueryArray=h,a.SimpleQueryByExample=i,a.SimpleQueryByCondition=j,a.SimpleQueryFulltext=k,a.SimpleQueryGeo=l,a.SimpleQueryNear=m,a.SimpleQueryRange=n,a.SimpleQueryWithin=o,a.SimpleQueryWithinRectangle=p}),module.define("org/arangodb/tutorial",function(a,b){var c=0,d="Type 'tutorial' again to get to the next chapter.",e=[{title:"Welcome to the tutorial!",text:"This is a user-interactive tutorial on ArangoDB and the ArangoDB shell.\nIt will give you a first look into ArangoDB and how it works."},{title:"JavaScript Shell",text:"On this shell's prompt, you can issue arbitrary JavaScript commands.\nSo you are able to do things like...:\n\n  number = 123;\n  number = number * 10;"},{title:"Running Complex Instructions",text:"You can also run more complex instructions, such as for loops:\n\n  for (i = 0; i < 10; i++) { number = number + 1; }"},{title:"Printing Results",text:'As you can see, the result of the last command executed is printed automatically. To explicitly print a value at any other time, there is the print function:\n\n  for (i = 0; i < 5; ++i) { print("I am a JavaScript shell"); }'},{title:"Creating Collections",text:"ArangoDB is a document database. This means that we store data as documents (which are similar to JavaScript objects) in so-called 'collections'. Let's create a collection named 'places' now:\n\n  db._create('places');\n\nNote: each collection is identified by a unique name. Trying to create a collection that already exists will produce an error."},{title:"Displaying Collections",text:"Now you can take a look at the collection(s) you just created:\n\n  db._collections();\n\nPlease note that all collections will be returned, including ArangoDB's pre-defined system collections."},{title:"Creating Documents",text:'Now we have a collection, but it is still empty. So let\'s create some documents!\n\n  db.places.save({ _key : "foo", city : "foo-city" });\n  for (i = 0; i <= 10; i++) { db.places.save({ _key: "example" + i, zipcode: i }) };'},{title:"Displaying All Documents",text:"You want to take a look at your docs? No problem:\n\n  db.places.toArray();"},{title:"Counting Documents",text:"To see how many documents there are in a collection, use the 'count' method:\n\n  db.places.count();"},{title:"Retrieving Single Documents",text:"As you can see, each document has some meta attributes '_id', '_key' and '_rev'.\nThe '_key' attribute can be used to quickly retrieve a single document from a collection:\n\n  db.places.document(\"foo\");\n  db.places.document(\"example5\");"},{title:"Retrieving Single Documents",text:"The '_id' attribute can also be used to retrieve documents using the 'db' object:\n\n  db._document(\"places/foo\");\n  db._document(\"places/example5\");"},{title:"Modifying Documents",text:'You can modify existing documents. Try to add a new attribute to a document and verify whether it has been added:\n\n  db._update("places/foo", { zipcode: 39535 });\n  db._document("places/foo");'},{title:"Document Revisions",text:"Note that after updating the document, its '_rev' attribute changed automatically.\nThe '_rev' attribute contains a document revision number, and it can be used for conditional modifications. Here's an example of how to avoid lost updates in case multiple clients are accessing the documents in parallel:\n\n  doc = db._document(\"places/example1\");\n  db._update(\"places/example1\", { someValue: 23 });\n  db._update(doc, { someValue: 42 });\n\nNote that the first update will succeed because it was unconditional. The second update however is conditional because we're also passing the document's revision id in the first parameter to _update. As the revision id we're passing to update does not match the document's current revision anymore, the update is rejected."},{title:"Removing Documents",text:'Deleting single documents can be achieved by providing the document _id or _key:\n\n  db._remove("places/example7");\n  db.places.remove("example8");\n  db.places.count();'},{title:"Searching Documents",text:'Searching for documents with specific attributes can be done by using the byExample method:\n\n  db._create("users");\n  for (i = 0; i < 10; ++i) { db.users.save({ name: "username" + i, active: (i % 3 == 0), age: 30 + i }); }\n  db.users.byExample({ active: false }).toArray();\n  db.users.byExample({ name: "username3", active: true }).toArray();\n'},{title:"Running AQL Queries",text:'ArangoDB also provides a query language for more complex matching:\n\n  db._query("FOR u IN users FILTER u.active == true && u.age >= 33 RETURN { username: u.name, age: u.age }").toArray();'},{title:"Using Databases",text:"By default, the ArangoShell connects to the default database. The default database is named '_system'. To create another database, use the '_createDatabase' method of the 'db' object. To switch into an existing database, use '_useDatabase'. To get rid of a database and all of its collections, use '_dropDatabase':\n\n  db._createDatabase(\"mydb\");\n  db._useDatabase(\"mydb\");\n  db._dropDatabase(\"mydb\");"}];a._PRINT=function(a){function b(a){return a.replace(/\n {2}(.+?)(?=\n)/g,"\n  "+f.COLOR_MAGENTA+"$1"+f.COLOR_RESET)}var f=require("internal").COLORS,g=f.COLOR_BOLD_BLUE+(c+1)+". "+e[c].title+f.COLOR_RESET;a.output+="\n\n"+g+"\n\n"+b(e[c].text+"\n")+"\n",++c,c>=e.length?(a.output+="Congratulations! You finished the tutorial.\n",c=0):a.output+=d+"\n"}}),module.define("underscore",function(a,b){(function(){function c(a){function b(b,c,d,e,f,g){for(;f>=0&&g>f;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=v(d,f,4);var g=!C(c)&&u.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function d(a){return function(b,c,d){c=w(c,d);for(var e=B(b),f=a>0?0:e-1;f>=0&&e>f;f+=a)if(c(b[f],f,b))return f;return-1}}function e(a,b,c){return function(d,e,f){var g=0,h=B(d);if("number"==typeof f)a>0?g=f>=0?f:Math.max(f+h,g):h=f>=0?Math.min(f+1,h):f+h+1;else if(c&&f&&h)return f=c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(m.call(d,g,h),u.isNaN),f>=0?f+g:-1;for(f=a>0?g:h-1;f>=0&&h>f;f+=a)if(d[f]===e)return f;return-1}}function f(a,b){var c=H.length,d=a.constructor,e=u.isFunction(d)&&d.prototype||j,f="constructor";for(u.has(a,f)&&!u.contains(b,f)&&b.push(f);c--;)f=H[c],f in a&&a[f]!==e[f]&&!u.contains(b,f)&&b.push(f)}var g=this,h=g._,i=Array.prototype,j=Object.prototype,k=Function.prototype,l=i.push,m=i.slice,n=j.toString,o=j.hasOwnProperty,p=Array.isArray,q=Object.keys,r=k.bind,s=Object.create,t=function(){},u=function S(a){return a instanceof S?a:this instanceof S?void(this._wrapped=a):new S(a)};"undefined"!=typeof a?("undefined"!=typeof b&&b.exports&&(a=b.exports=u),a._=u):g._=u,u.VERSION="1.8.3";var v=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},w=function(a,b,c){return null==a?u.identity:u.isFunction(a)?v(a,b,c):u.isObject(a)?u.matcher(a):u.property(a)};u.iteratee=function(a,b){return w(a,b,1/0)};var x=function(a,b){return function(c){var d=arguments.length;if(2>d||null==c)return c;for(var e=1;d>e;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;h>i;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},y=function(a){if(!u.isObject(a))return{};if(s)return s(a);t.prototype=a;var b=new t;return t.prototype=null,b},z=function(a){return function(b){return null==b?void 0:b[a]}},A=Math.pow(2,53)-1,B=z("length"),C=function(a){var b=B(a);return"number"==typeof b&&b>=0&&A>=b};u.each=u.forEach=function(a,b,c){b=v(b,c);var d,e;if(C(a))for(d=0,e=a.length;e>d;d++)b(a[d],d,a);else{var f=u.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},u.map=u.collect=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=Array(e),g=0;e>g;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f},u.reduce=u.foldl=u.inject=c(1),u.reduceRight=u.foldr=c(-1),u.find=u.detect=function(a,b,c){var d;return d=C(a)?u.findIndex(a,b,c):u.findKey(a,b,c),void 0!==d&&-1!==d?a[d]:void 0},u.filter=u.select=function(a,b,c){var d=[];return b=w(b,c),u.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},u.reject=function(a,b,c){return u.filter(a,u.negate(w(b)),c)},u.every=u.all=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},u.some=u.any=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},u.contains=u.includes=u.include=function(a,b,c,d){return C(a)||(a=u.values(a)),("number"!=typeof c||d)&&(c=0),u.indexOf(a,b,c)>=0},u.invoke=function(a,b){var c=m.call(arguments,2),d=u.isFunction(b);return u.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},u.pluck=function(a,b){return u.map(a,u.property(b))},u.where=function(a,b){return u.filter(a,u.matcher(b))},u.findWhere=function(a,b){return u.find(a,u.matcher(b))},u.max=function(a,b,c){var d,e,f=-(1/0),g=-(1/0);if(null==b&&null!=a){a=C(a)?a:u.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],d>f&&(f=d)}else b=w(b,c),u.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-(1/0)&&f===-(1/0))&&(f=a,g=e)});return f},u.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=C(a)?a:u.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],f>d&&(f=d)}else b=w(b,c),u.each(a,function(a,c,d){e=b(a,c,d),(g>e||e===1/0&&f===1/0)&&(f=a,g=e)});return f},u.shuffle=function(a){for(var b,c=C(a)?a:u.values(a),d=c.length,e=Array(d),f=0;d>f;f++)b=u.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},u.sample=function(a,b,c){return null==b||c?(C(a)||(a=u.values(a)),a[u.random(a.length-1)]):u.shuffle(a).slice(0,Math.max(0,b))},u.sortBy=function(a,b,c){return b=w(b,c),u.pluck(u.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var D=function(a){return function(b,c,d){var e={};return c=w(c,d),u.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};u.groupBy=D(function(a,b,c){u.has(a,c)?a[c].push(b):a[c]=[b]}),u.indexBy=D(function(a,b,c){a[c]=b}),u.countBy=D(function(a,b,c){u.has(a,c)?a[c]++:a[c]=1}),u.toArray=function(a){return a?u.isArray(a)?m.call(a):C(a)?u.map(a,u.identity):u.values(a):[]},u.size=function(a){return null==a?0:C(a)?a.length:u.keys(a).length},u.partition=function(a,b,c){b=w(b,c);var d=[],e=[];return u.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},u.first=u.head=u.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:u.initial(a,a.length-b)},u.initial=function(a,b,c){return m.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},u.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:u.rest(a,Math.max(0,a.length-b))},u.rest=u.tail=u.drop=function(a,b,c){return m.call(a,null==b||c?1:b)},u.compact=function(a){return u.filter(a,u.identity)};var E=function T(a,b,c,d){for(var e=[],f=0,g=d||0,h=B(a);h>g;g++){var i=a[g];if(C(i)&&(u.isArray(i)||u.isArguments(i))){b||(i=T(i,b,c));var j=0,k=i.length;for(e.length+=k;k>j;)e[f++]=i[j++]}else c||(e[f++]=i)}return e};u.flatten=function(a,b){return E(a,b,!1)},u.without=function(a){return u.difference(a,m.call(arguments,1))},u.uniq=u.unique=function(a,b,c,d){u.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=w(c,d));for(var e=[],f=[],g=0,h=B(a);h>g;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?u.contains(f,j)||(f.push(j),e.push(i)):u.contains(e,i)||e.push(i)}return e},u.union=function(){return u.uniq(E(arguments,!0,!0))},u.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=B(a);e>d;d++){var f=a[d];if(!u.contains(b,f)){for(var g=1;c>g&&u.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},u.difference=function(a){var b=E(arguments,!0,!0,1);return u.filter(a,function(a){return!u.contains(b,a)})},u.zip=function(){return u.unzip(arguments)},u.unzip=function(a){for(var b=a&&u.max(a,B).length||0,c=Array(b),d=0;b>d;d++)c[d]=u.pluck(a,d);return c},u.object=function(a,b){for(var c={},d=0,e=B(a);e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},u.findIndex=d(1),u.findLastIndex=d(-1),u.sortedIndex=function(a,b,c,d){c=w(c,d,1);for(var e=c(b),f=0,g=B(a);g>f;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f},u.indexOf=e(1,u.findIndex,u.sortedIndex),u.lastIndexOf=e(-1,u.findLastIndex),u.range=function(a,b,c){null==b&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e};var F=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=y(a.prototype),g=a.apply(f,e);return u.isObject(g)?g:f};u.bind=function(a,b){if(r&&a.bind===r)return r.apply(a,m.call(arguments,1));if(!u.isFunction(a))throw new TypeError("Bind must be called on a function");var c=m.call(arguments,2),d=function e(){return F(a,e,b,this,c.concat(m.call(arguments)))};return d},u.partial=function(a){var b=m.call(arguments,1),c=function d(){for(var c=0,e=b.length,f=Array(e),g=0;e>g;g++)f[g]=b[g]===u?arguments[c++]:b[g];for(;c<arguments.length;)f.push(arguments[c++]);return F(a,d,this,this,f)};return c},u.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw new Error("bindAll must be passed function names");for(b=1;d>b;b++)c=arguments[b],a[c]=u.bind(a[c],a);return a},u.memoize=function(a,b){var c=function d(c){var e=d.cache,f=""+(b?b.apply(this,arguments):c);return u.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c;
},u.delay=function(a,b){var c=m.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},u.defer=u.partial(u.delay,u,1),u.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:u.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=u.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},u.debounce=function(a,b,c){var d,e,f,g,h,i=function j(){var i=u.now()-g;b>i&&i>=0?d=setTimeout(j,b-i):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=u.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},u.wrap=function(a,b){return u.partial(b,a)},u.negate=function(a){return function(){return!a.apply(this,arguments)}},u.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},u.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},u.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=null),c}},u.once=u.partial(u.before,2);var G=!{toString:null}.propertyIsEnumerable("toString"),H=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];u.keys=function(a){if(!u.isObject(a))return[];if(q)return q(a);var b=[];for(var c in a)u.has(a,c)&&b.push(c);return G&&f(a,b),b},u.allKeys=function(a){if(!u.isObject(a))return[];var b=[];for(var c in a)b.push(c);return G&&f(a,b),b},u.values=function(a){for(var b=u.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},u.mapObject=function(a,b,c){b=w(b,c);for(var d,e=u.keys(a),f=e.length,g={},h=0;f>h;h++)d=e[h],g[d]=b(a[d],d,a);return g},u.pairs=function(a){for(var b=u.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},u.invert=function(a){for(var b={},c=u.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},u.functions=u.methods=function(a){var b=[];for(var c in a)u.isFunction(a[c])&&b.push(c);return b.sort()},u.extend=x(u.allKeys),u.extendOwn=u.assign=x(u.keys),u.findKey=function(a,b,c){b=w(b,c);for(var d,e=u.keys(a),f=0,g=e.length;g>f;f++)if(d=e[f],b(a[d],d,a))return d},u.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;u.isFunction(b)?(e=u.allKeys(g),d=v(b,c)):(e=E(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;i>h;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},u.omit=function(a,b,c){if(u.isFunction(b))b=u.negate(b);else{var d=u.map(E(arguments,!1,!1,1),String);b=function(a,b){return!u.contains(d,b)}}return u.pick(a,b,c)},u.defaults=x(u.allKeys,!0),u.create=function(a,b){var c=y(a);return b&&u.extendOwn(c,b),c},u.clone=function(a){return u.isObject(a)?u.isArray(a)?a.slice():u.extend({},a):a},u.tap=function(a,b){return b(a),a},u.isMatch=function(a,b){var c=u.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;d>f;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var I=function U(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof u&&(a=a._wrapped),b instanceof u&&(b=b._wrapped);var e=n.call(a);if(e!==n.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(u.isFunction(g)&&g instanceof g&&u.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var i=c.length;i--;)if(c[i]===a)return d[i]===b;if(c.push(a),d.push(b),f){if(i=a.length,i!==b.length)return!1;for(;i--;)if(!U(a[i],b[i],c,d))return!1}else{var j,k=u.keys(a);if(i=k.length,u.keys(b).length!==i)return!1;for(;i--;)if(j=k[i],!u.has(b,j)||!U(a[j],b[j],c,d))return!1}return c.pop(),d.pop(),!0};u.isEqual=function(a,b){return I(a,b)},u.isEmpty=function(a){return null==a?!0:C(a)&&(u.isArray(a)||u.isString(a)||u.isArguments(a))?0===a.length:0===u.keys(a).length},u.isElement=function(a){return!(!a||1!==a.nodeType)},u.isArray=p||function(a){return"[object Array]"===n.call(a)},u.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},u.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){u["is"+a]=function(b){return n.call(b)==="[object "+a+"]"}}),u.isArguments(arguments)||(u.isArguments=function(a){return u.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(u.isFunction=function(a){return"function"==typeof a||!1}),u.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},u.isNaN=function(a){return u.isNumber(a)&&a!==+a},u.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===n.call(a)},u.isNull=function(a){return null===a},u.isUndefined=function(a){return void 0===a},u.has=function(a,b){return null!=a&&o.call(a,b)},u.noConflict=function(){return g._=h,this},u.identity=function(a){return a},u.constant=function(a){return function(){return a}},u.noop=function(){},u.property=z,u.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},u.matcher=u.matches=function(a){return a=u.extendOwn({},a),function(b){return u.isMatch(b,a)}},u.times=function(a,b,c){var d=Array(Math.max(0,a));b=v(b,c,1);for(var e=0;a>e;e++)d[e]=b(e);return d},u.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},u.now=Date.now||function(){return(new Date).getTime()};var J={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},K=u.invert(J),L=function(a){var b=function(b){return a[b]},c="(?:"+u.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};u.escape=L(J),u.unescape=L(K),u.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),u.isFunction(d)?d.call(a):d};var M=0;u.uniqueId=function(a){var b=++M+"";return a?a+b:b},u.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},P=/\\|'|\r|\n|\u2028|\u2029/g,Q=function(a){return"\\"+O[a]};u.template=function(a,b,c){!b&&c&&(b=c),b=u.defaults({},b,u.templateSettings);var d=RegExp([(b.escape||N).source,(b.interpolate||N).source,(b.evaluate||N).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(P,Q),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,u)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},u.chain=function(a){var b=u(a);return b._chain=!0,b};var R=function(a,b){return a._chain?u(b).chain():b};u.mixin=function(a){u.each(u.functions(a),function(b){var c=u[b]=a[b];u.prototype[b]=function(){var a=[this._wrapped];return l.apply(a,arguments),R(this,c.apply(u,a))}})},u.mixin(u),u.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=i[a];u.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],R(this,c)}}),u.each(["concat","join","slice"],function(a){var b=i[a];u.prototype[a]=function(){return R(this,b.apply(this._wrapped,arguments))}}),u.prototype.value=function(){return this._wrapped},u.prototype.valueOf=u.prototype.toJSON=u.prototype.value,u.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return u})}).call(this)}),global.DEFINE_MODULE("internal",function(){function a(a){if(i.hasOwnProperty(a))return i[a];var b,c=a.charCodeAt(0);return b=16>c?"\\u000":256>c?"\\u00":4096>c?"\\u0":"\\u",b+=c.toString(16),i[a]=b,b}function b(b){return'"'+b.replace(n,a)+'"'}function c(a){var b,c="";if(a.prettyPrint)for(c+="\n",b=0;b<a.level;++b)c+="  ";a.output+=c}function d(a,b){var d=b.useColor;if(0===a.length)d&&(b.output+=j.COLOR_PUNCTUATION),b.output+="[ ]",d&&(b.output+=j.COLOR_RESET);else{d&&(b.output+=j.COLOR_PUNCTUATION),b.output+="[",d&&(b.output+=j.COLOR_RESET);var e=b.level+1,f=" ";b.level=e;for(var g=0;g<a.length;g++){d&&(b.output+=j.COLOR_PUNCTUATION),b.output+=f,d&&(b.output+=j.COLOR_RESET),c(b);var i=b.path;b.path+="["+g+"]",m(a[g],b),b.emit&&b.output.length>=b.emit&&(h.output(b.output),b.output=""),b.path=i,f=", "}b.level=e-1,b.output+=" ",c(b),d&&(b.output+=j.COLOR_PUNCTUATION),b.output+="]",d&&(b.output+=j.COLOR_RESET)}}function e(a,d){var e=d.useColor,f=" ";e&&(d.output+=j.COLOR_PUNCTUATION),d.output+="{",e&&(d.output+=j.COLOR_RESET);var g=d.level+1;d.level=g;var i;try{i=Object.keys(a)}catch(k){i=[]}for(var l=0,n=i.length;n>l;++l){var o=i[l],p=a[o];e&&(d.output+=j.COLOR_PUNCTUATION),d.output+=f,e&&(d.output+=j.COLOR_RESET),c(d),e&&(d.output+=j.COLOR_INDEX),d.output+=b(o),e&&(d.output+=j.COLOR_RESET),d.output+=" : ";var q=d.path;d.path+="["+o+"]",m(p,d),d.path=q,f=", ",d.emit&&d.output.length>=d.emit&&(h.output(d.output),d.output="")}d.level=g-1,d.output+=" ",c(d),e&&(d.output+=j.COLOR_PUNCTUATION),d.output+="}",e&&(d.output+=j.COLOR_RESET)}function f(){for(var a=0;a<arguments.length;++a){var b,c=arguments[a];if(null===c)b="null";else if(void 0===c)b="undefined";else if("object"==typeof c)try{b=JSON.stringify(c)}catch(d){b=String(c)}else b=String(c);h.outputBuffer+=b}}function g(){for(var a=h.output,b=0;b<arguments.length;++b)if(b>0&&a(" "),"string"==typeof arguments[b])a(arguments[b]);else{var c={customInspect:!0,emit:16384,level:0,limitString:80,names:[],output:"",path:"~",prettyPrint:l,seen:[],showFunction:!1,useColor:k,useToString:!0};m(arguments[b],c),a(c.output)}a("\n")}var h={};global.ArangoError?(h.ArangoError=global.ArangoError,delete global.ArangoError):(h.ArangoError=function(a){void 0!==a&&(this.error=a.error,this.code=a.code,this.errorNum=a.errorNum,this.errorMessage=a.errorMessage),this.message=this.toString()},h.ArangoError.prototype=new Error),h.ArangoError.prototype._PRINT=function(a){a.output+=this.toString()},h.ArangoError.prototype.toString=function(){var a=this.errorNum,b=this.errorMessage||this.message;return"[ArangoError "+a+": "+b+"]"},global.SleepAndRequeue&&(h.SleepAndRequeue=global.SleepAndRequeue,delete global.SleepAndRequeue,h.SleepAndRequeue.prototype._PRINT=function(a){a.output+=this.toString()},h.SleepAndRequeue.prototype.toString=function(){return"[SleepAndRequeue sleep: "+this.sleep+"]"}),h.threadNumber=0,global.THREAD_NUMBER&&(h.threadNumber=global.THREAD_NUMBER,delete global.THREAD_NUMBER),h.developmentMode=!1,global.LOGFILE_PATH&&(h.logfilePath=global.LOGFILE_PATH,delete global.LOGFILE_PATH),h.quiet=!1,global.ARANGO_QUIET&&(h.quiet=global.ARANGO_QUIET,delete global.ARANGO_QUIET),h.valgrind=!1,global.VALGRIND&&(h.valgrind=global.VALGRIND,delete global.VALGRIND),h.coverage=!1,global.COVERAGE&&(h.coverage=global.COVERAGE,delete global.COVERAGE),h.version="unknown",global.VERSION&&(h.version=global.VERSION,delete global.VERSION),h.platform="unknown",global.SYS_PLATFORM&&(h.platform=global.SYS_PLATFORM,delete global.SYS_PLATFORM),h.bytesSentDistribution=[],global.BYTES_SENT_DISTRIBUTION&&(h.bytesSentDistribution=global.BYTES_SENT_DISTRIBUTION,delete global.BYTES_SENT_DISTRIBUTION),h.bytesReceivedDistribution=[],global.BYTES_RECEIVED_DISTRIBUTION&&(h.bytesReceivedDistribution=global.BYTES_RECEIVED_DISTRIBUTION,delete global.BYTES_RECEIVED_DISTRIBUTION),h.connectionTimeDistribution=[],global.CONNECTION_TIME_DISTRIBUTION&&(h.connectionTimeDistribution=global.CONNECTION_TIME_DISTRIBUTION,delete global.CONNECTION_TIME_DISTRIBUTION),h.requestTimeDistribution=[],global.REQUEST_TIME_DISTRIBUTION&&(h.requestTimeDistribution=global.REQUEST_TIME_DISTRIBUTION,delete global.REQUEST_TIME_DISTRIBUTION),h.startupPath="",global.STARTUP_PATH&&(h.startupPath=global.STARTUP_PATH,delete global.STARTUP_PATH),""===h.startupPath&&(h.startupPath="."),global.CONFIGURE_ENDPOINT&&(h.configureEndpoint=global.CONFIGURE_ENDPOINT,delete global.CONFIGURE_ENDPOINT),global.REMOVE_ENDPOINT&&(h.removeEndpoint=global.REMOVE_ENDPOINT,delete global.REMOVE_ENDPOINT),global.LIST_ENDPOINTS&&(h.listEndpoints=global.LIST_ENDPOINTS,delete global.LIST_ENDPOINTS),global.SYS_BASE64DECODE&&(h.base64Decode=global.SYS_BASE64DECODE,delete global.SYS_BASE64DECODE),global.SYS_BASE64ENCODE&&(h.base64Encode=global.SYS_BASE64ENCODE,delete global.SYS_BASE64ENCODE),global.SYS_DEBUG_SEGFAULT&&(h.debugSegfault=global.SYS_DEBUG_SEGFAULT,delete global.SYS_DEBUG_SEGFAULT),global.SYS_DEBUG_SET_FAILAT&&(h.debugSetFailAt=global.SYS_DEBUG_SET_FAILAT,delete global.SYS_DEBUG_SET_FAILAT),global.SYS_DEBUG_REMOVE_FAILAT&&(h.debugRemoveFailAt=global.SYS_DEBUG_REMOVE_FAILAT,delete global.SYS_DEBUG_REMOVE_FAILAT),global.SYS_DEBUG_CLEAR_FAILAT&&(h.debugClearFailAt=global.SYS_DEBUG_CLEAR_FAILAT,delete global.SYS_DEBUG_CLEAR_FAILAT),global.SYS_DEBUG_CAN_USE_FAILAT&&(h.debugCanUseFailAt=global.SYS_DEBUG_CAN_USE_FAILAT,delete global.SYS_DEBUG_CAN_USE_FAILAT),global.SYS_DOWNLOAD&&(h.download=global.SYS_DOWNLOAD,delete global.SYS_DOWNLOAD),global.SYS_EXECUTE&&(h.executeScript=global.SYS_EXECUTE,delete global.SYS_EXECUTE),global.SYS_GET_CURRENT_REQUEST&&(h.getCurrentRequest=global.SYS_GET_CURRENT_REQUEST,delete global.SYS_GET_CURRENT_REQUEST),global.SYS_GET_CURRENT_RESPONSE&&(h.getCurrentResponse=global.SYS_GET_CURRENT_RESPONSE,delete global.SYS_GET_CURRENT_RESPONSE),h.extend=function(a,b){return Object.getOwnPropertyNames(b).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))}),a},global.SYS_LOAD&&(h.load=global.SYS_LOAD,delete global.SYS_LOAD),global.SYS_LOG_LEVEL&&(h.logLevel=global.SYS_LOG_LEVEL,delete global.SYS_LOG_LEVEL),global.SYS_MD5&&(h.md5=global.SYS_MD5,delete global.SYS_MD5),global.SYS_GEN_RANDOM_NUMBERS&&(h.genRandomNumbers=global.SYS_GEN_RANDOM_NUMBERS,delete global.SYS_GEN_RANDOM_NUMBERS),global.SYS_GEN_RANDOM_ALPHA_NUMBERS&&(h.genRandomAlphaNumbers=global.SYS_GEN_RANDOM_ALPHA_NUMBERS,delete global.SYS_GEN_RANDOM_ALPHA_NUMBERS),global.SYS_GEN_RANDOM_SALT&&(h.genRandomSalt=global.SYS_GEN_RANDOM_SALT,delete global.SYS_GEN_RANDOM_SALT),global.SYS_HMAC&&(h.hmac=global.SYS_HMAC,delete global.SYS_HMAC),global.SYS_PBKDF2&&(h.pbkdf2=global.SYS_PBKDF2,delete global.SYS_PBKDF2),global.SYS_CREATE_NONCE&&(h.createNonce=global.SYS_CREATE_NONCE,delete global.SYS_CREATE_NONCE),global.SYS_CHECK_AND_MARK_NONCE&&(h.checkAndMarkNonce=global.SYS_CHECK_AND_MARK_NONCE,delete global.SYS_CHECK_AND_MARK_NONCE),global.SYS_OUTPUT&&(h.stdOutput=global.SYS_OUTPUT,h.output=h.stdOutput,delete global.SYS_OUTPUT),global.SYS_PARSE&&(h.parse=global.SYS_PARSE,delete global.SYS_PARSE),global.SYS_PARSE_FILE&&(h.parseFile=global.SYS_PARSE_FILE,delete global.SYS_PARSE_FILE),global.SYS_PROCESS_STATISTICS&&(h.processStatistics=global.SYS_PROCESS_STATISTICS,delete global.SYS_PROCESS_STATISTICS),global.SYS_RAND&&(h.rand=global.SYS_RAND,delete global.SYS_RAND),global.SYS_SHA512&&(h.sha512=global.SYS_SHA512,delete global.SYS_SHA512),global.SYS_SHA384&&(h.sha384=global.SYS_SHA384,delete global.SYS_SHA384),global.SYS_SHA256&&(h.sha256=global.SYS_SHA256,delete global.SYS_SHA256),global.SYS_SHA224&&(h.sha224=global.SYS_SHA224,delete global.SYS_SHA224),global.SYS_SHA1&&(h.sha1=global.SYS_SHA1,delete global.SYS_SHA1),global.SYS_SERVER_STATISTICS&&(h.serverStatistics=global.SYS_SERVER_STATISTICS,delete global.SYS_SERVER_STATISTICS),global.SYS_SLEEP&&(h.sleep=global.SYS_SLEEP,delete global.SYS_SLEEP),global.SYS_TIME&&(h.time=global.SYS_TIME,delete global.SYS_TIME),global.SYS_WAIT&&(h.wait=global.SYS_WAIT,delete global.SYS_WAIT),global.SYS_IMPORT_CSV_FILE&&(h.importCsvFile=global.SYS_IMPORT_CSV_FILE,delete global.SYS_IMPORT_CSV_FILE),global.SYS_IMPORT_JSON_FILE&&(h.importJsonFile=global.SYS_IMPORT_JSON_FILE,delete global.SYS_IMPORT_JSON_FILE),global.SYS_PROCESS_CSV_FILE&&(h.processCsvFile=global.SYS_PROCESS_CSV_FILE,delete global.SYS_PROCESS_CSV_FILE),global.SYS_PROCESS_JSON_FILE&&(h.processJsonFile=global.SYS_PROCESS_JSON_FILE,delete global.SYS_PROCESS_JSON_FILE),global.SYS_CLIENT_STATISTICS&&(h.clientStatistics=global.SYS_CLIENT_STATISTICS,delete global.SYS_CLIENT_STATISTICS),global.SYS_HTTP_STATISTICS&&(h.httpStatistics=global.SYS_HTTP_STATISTICS,delete global.SYS_HTTP_STATISTICS),global.SYS_EXECUTE_EXTERNAL&&(h.executeExternal=global.SYS_EXECUTE_EXTERNAL,delete global.SYS_EXECUTE_EXTERNAL),global.SYS_EXECUTE_EXTERNAL_AND_WAIT&&(h.executeExternalAndWait=global.SYS_EXECUTE_EXTERNAL_AND_WAIT,delete global.SYS_EXECUTE_EXTERNAL_AND_WAIT),global.SYS_KILL_EXTERNAL&&(h.killExternal=global.SYS_KILL_EXTERNAL,delete global.SYS_KILL_EXTERNAL),global.SYS_STATUS_EXTERNAL&&(h.statusExternal=global.SYS_STATUS_EXTERNAL,delete global.SYS_STATUS_EXTERNAL),global.SYS_REGISTER_TASK&&(h.registerTask=global.SYS_REGISTER_TASK,delete global.SYS_REGISTER_TASK),global.SYS_UNREGISTER_TASK&&(h.unregisterTask=global.SYS_UNREGISTER_TASK,delete global.SYS_UNREGISTER_TASK),global.SYS_GET_TASK&&(h.getTask=global.SYS_GET_TASK,delete global.SYS_GET_TASK),global.SYS_TEST_PORT&&(h.testPort=global.SYS_TEST_PORT,delete global.SYS_TEST_PORT),global.SYS_IS_IP&&(h.isIP=global.SYS_IS_IP,delete global.SYS_IS_IP),h.unitTests=function(){return global.SYS_UNIT_TESTS},h.setUnitTestsResult=function(a){global.SYS_UNIT_TESTS_RESULT=a},h.toArgv=function(a,b){"undefined"==typeof b&&(b=!1);var c=[];for(var d in a)if(a.hasOwnProperty(d))if("commandSwitches"===d){for(var e="",f=0;f<a[d].length;f++)a[d][f].length>1?c.push(a[d][f]):e+=a[d][f];e.length>0&&c.push(e)}else"flatCommands"===d?c=c.concat(a[d]):b?c.push("--"+d+"="+a[d]):(c.push("--"+d),a[d]!==!1?a[d]!==!0?c.push(a[d]):c.push("true"):c.push("false"));return c},h.parseArgv=function(a,b){function c(b,d,e){if(d.indexOf(":")>0){var f=d.indexOf(":"),h=d.slice(0,f);b.hasOwnProperty(h)||(b[h]={}),c(b[h],d.slice(f+1,d.length),e)}else"true"===a[g+1]?b[d]=!0:"false"===a[g+1]?b[d]=!1:isNaN(a[g+1])?b[d]=a[g+1]:b[d]=parseInt(a[g+1])}function d(a,b){a.hasOwnProperty("commandSwitches")||(a.commandSwitches=[]),a.commandSwitches.push(b)}function e(a,b){for(var c=0;c<b.length;c++)d(a,b[c])}function f(a,b){a.hasOwnProperty("flatCommands")||(a.flatCommands=[]),a.flatCommands.push(b)}var g,h=!1,i={};for(g=b;g<a.length;g++){var j=a[g];if(h)f(i,j);else if(j.length>2&&"--"===j.slice(0,2)){var k=j.slice(2,j.length);a.length>g&&"-"!==a[g+1].slice(0,1)?(c(i,k,a[g+1]),g++):d(i,k)}else"--"===j?h=!0:j.length>1&&"-"===j.slice(0,1)?e(i,j.slice(1,j.length)):f(i,j)}return i},h.COLORS={},global.COLORS?(h.COLORS=global.COLORS,delete global.COLORS):["COLOR_RED","COLOR_BOLD_RED","COLOR_GREEN","COLOR_BOLD_GREEN","COLOR_BLUE","COLOR_BOLD_BLUE","COLOR_YELLOW","COLOR_BOLD_YELLOW","COLOR_WHITE","COLOR_BOLD_WHITE","COLOR_CYAN","COLOR_BOLD_CYAN","COLOR_MAGENTA","COLOR_BOLD_MAGENTA","COLOR_BLACK","COLOR_BOLD_BLACK","COLOR_BLINK","COLOR_BRIGHT","COLOR_RESET"].forEach(function(a){h.COLORS[a]=""}),h.COLORS.COLOR_PUNCTUATION=h.COLORS.COLOR_RESET,h.COLORS.COLOR_STRING=h.COLORS.COLOR_BRIGHT,h.COLORS.COLOR_NUMBER=h.COLORS.COLOR_BRIGHT,h.COLORS.COLOR_INDEX=h.COLORS.COLOR_BRIGHT,h.COLORS.COLOR_TRUE=h.COLORS.COLOR_BRIGHT,h.COLORS.COLOR_FALSE=h.COLORS.COLOR_BRIGHT,h.COLORS.COLOR_NULL=h.COLORS.COLOR_BRIGHT,h.COLORS.COLOR_UNDEFINED=h.COLORS.COLOR_BRIGHT;var i={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},j=h.COLORS,k=!1;global.COLOR_OUTPUT&&(k=global.COLOR_OUTPUT,delete global.COLOR_OUTPUT);var l=!1;global.PRETTY_PRINT&&(l=global.PRETTY_PRINT,delete global.PRETTY_PRINT);var m,n=/[\\\"\x00-\x1f]/g,o=/function ([^\(]*)?\(\) \{ \[native code\] \}/,p=/function ([^\(]*)?\((.*)\) \{/;h.printRecursive=m=function(a,c){var f=c.useColor,g=c.customInspect,i=c.useToString,k=c.limitString,l=c.showFunction;"undefined"==typeof c.seen&&(c.seen=[],c.names=[]);var m=c.seen.indexOf(a);if(m>=0)c.output+=c.names[m];else if(a&&(a instanceof Object||"object"==typeof a&&null===Object.getPrototypeOf(a)))if(c.seen.push(a),c.names.push(c.path),g&&"function"==typeof a._PRINT)a._PRINT(c),c.emit&&c.output.length>=c.emit&&(h.output(c.output),c.output="");else if(a instanceof Array)d(a,c);else if(a.toString===Object.prototype.toString||"object"==typeof a&&null===Object.getPrototypeOf(a)){var n=!1;try{(a instanceof Set||a instanceof Map||a instanceof WeakSet||a instanceof WeakMap||"function"==typeof a[Symbol.iterator])&&(c.output+=a.toString(),n=!0)}catch(q){}n||e(a,c),c.emit&&c.output.length>=c.emit&&(h.output(c.output),c.output="")}else if("function"==typeof a)try{var r=a.toString();if(c.level>0&&!l){var s=r.split("\n"),t=s[0],u=o.exec(t);null!==u?void 0===u[1]?c.output+="function { [native code] }":c.output+="function "+u[1]+" { [native code] }":(u=p.exec(t),null!==u?void 0===u[1]?c.output+="function ("+u[2]+") { ... }":c.output+="function "+u[1]+" ("+u[2]+") { ... }":(t=t.substr(8,t.length-10).trim(),c.output+='[Function "'+t+'" ...]'))}else c.output+=r}catch(v){h.stdOutput(String(v)),c.output+="[Function]"}else if(i&&"function"==typeof a.toString)try{c.output+=a.toString()}catch(w){c.output+="[Object ",e(a,c),c.output+="]"}else c.output+="[Object ",e(a,c),c.output+="]";else void 0===a?(f&&(c.output+=j.COLOR_UNDEFINED),c.output+="undefined",f&&(c.output+=j.COLOR_RESET)):"string"==typeof a?(f&&(c.output+=j.COLOR_STRING),k&&k<a.length&&(a=a.substr(0,k)+"..."),c.output+=b(a),f&&(c.output+=j.COLOR_RESET)):"boolean"==typeof a?(f&&(c.output+=a?j.COLOR_TRUE:j.COLOR_FALSE),c.output+=String(a),f&&(c.output+=j.COLOR_RESET)):"number"==typeof a?(f&&(c.output+=j.COLOR_NUMBER),c.output+=String(a),f&&(c.output+=j.COLOR_RESET)):null===a?(f&&(c.output+=j.COLOR_NULL),c.output+=String(a),f&&(c.output+=j.COLOR_RESET)):"symbol"==typeof a?(f&&(c.output+=j.COLOR_NULL),c.output+=a.toString(),f&&(c.output+=j.COLOR_RESET)):c.output+=String(a)};var q=Function.prototype.call.bind(Object.prototype.hasOwnProperty);h.flatten=function(a,b){if(!a||"object"!=typeof a&&"function"!=typeof a)return a;if(a instanceof Date)return a.toJSON();b||(b=[]);var c,d,e,f=Object.create(null),g=a;for("function"==typeof a&&(f.__exec=String(a));g&&!(-1!==b.indexOf(g)||a.constructor&&g===a.constructor.prototype);){b.push(g),c=Object.getOwnPropertyNames(g);for(var i=0;i<c.length;i++)d=c[i],("function"!=typeof g||"arguments"!==d&&"caller"!==d&&"callee"!==d)&&("_"===d.charAt(0)||q(f,d)||(e=a[d],-1===b.indexOf(e)||"object"!=typeof e&&"function"!=typeof e?f[d]=h.flatten(e,b):f[d]="[Circular]"));g=Object.getPrototypeOf(g)}return a.constructor&&a.constructor.name&&(a instanceof Error&&a.name===Error.name?f.name=a.constructor.name:q(f,"constructor")||(f.constructor={name:a.constructor.name})),f},h.inspect=function(a,b){var c={customInspect:b&&b.customInspect,emit:!1,level:0,limitString:!1,names:[],output:"",prettyPrint:!0,path:"~",seen:[],showFunction:!0,useColor:!1,useToString:!1};return b&&b.hasOwnProperty("prettyPrint")&&(c.prettyPrint=b.prettyPrint),m(a,c),c.output},global.SYS_SPRINTF&&(h.sprintf=global.SYS_SPRINTF,delete global.SYS_SPRINTF);var r=h.sprintf;return h.printf=function(){h.output(r.apply(r,arguments))},"function"==typeof h.printBrowser?(h.printShell=g,h.print=h.printBrowser):h.print=g,h.printObject=e,h.isCaptureMode=function(){return h.output===f},h.startCaptureMode=function(){var a=h.output;return h.outputBuffer="",h.output=f,a},h.stopCaptureMode=function(a){var b=h.outputBuffer;return h.outputBuffer="",void 0!==a?h.output=a:h.output=h.stdOutput,b},h.startPager=function(){},global.SYS_START_PAGER&&(h.startPager=global.SYS_START_PAGER,delete global.SYS_START_PAGER),h.stopPager=function(){},global.SYS_STOP_PAGER&&(h.stopPager=global.SYS_STOP_PAGER,delete global.SYS_STOP_PAGER),h.startPrettyPrint=function(a){l||a||h.print("using pretty printing"),l=!0},h.stopPrettyPrint=function(a){l&&!a&&h.print("disabled pretty printing"),l=!1},h.startColorPrint=function(a,b){var c={arangodb:{COLOR_PUNCTUATION:h.COLORS.COLOR_RESET,COLOR_STRING:h.COLORS.COLOR_BOLD_MAGENTA,COLOR_NUMBER:h.COLORS.COLOR_BOLD_GREEN,COLOR_INDEX:h.COLORS.COLOR_BOLD_CYAN,COLOR_TRUE:h.COLORS.COLOR_BOLD_MAGENTA,COLOR_FALSE:h.COLORS.COLOR_BOLD_MAGENTA,COLOR_NULL:h.COLORS.COLOR_BOLD_YELLOW,COLOR_UNDEFINED:h.COLORS.COLOR_BOLD_YELLOW}};if(k||b||h.print("starting color printing"),void 0===a||null===a)a=null;else if("string"==typeof a){a=a.toLowerCase();var d;if(c.hasOwnProperty(a)){j=c[a];for(d in h.COLORS)h.COLORS.hasOwnProperty(d)&&!j.hasOwnProperty(d)&&(j[d]=h.COLORS[d])}else{j=h.COLORS;var e=function(a){["COLOR_STRING","COLOR_NUMBER","COLOR_INDEX","COLOR_TRUE","COLOR_FALSE","COLOR_NULL","COLOR_UNDEFINED"].forEach(function(b){j[b]=h.COLORS[a]})};for(d in h.COLORS)if(h.COLORS.hasOwnProperty(d)&&d.replace(/^COLOR_/,"").toLowerCase()===a){e(d);break}}}k=!0},h.stopColorPrint=function(a){k&&!a&&h.print("disabled color printing"),k=!1},"undefined"!=typeof ENV&&(h.env=new global.ENV,delete global.ENV),"undefined"!=typeof SYS_OPTIONS&&(h.options=global.SYS_OPTIONS,delete global.SYS_OPTIONS),global.print=function(){var a=require("internal");a.print.apply(a.print,arguments)},global.printf=function(){var a=require("internal");a.printf.apply(a.printf,arguments)},global.print_plain=function(){for(var a=require("internal").output,b=require("internal").printRecursive,c=0;c<arguments.length;++c)if(c>0&&a(" "),"string"==typeof arguments[c])a(arguments[c]);else{var d={names:[],seen:[],path:"~",level:0,output:"",prettyPrint:!1,useColor:!1,customInspect:!0};b(arguments[c],d),a(d.output)}a("\n")},global.start_pretty_print=function(){require("internal").startPrettyPrint()},global.stop_pretty_print=function(){require("internal").stopPrettyPrint()},global.start_color_print=function(a){require("internal").startColorPrint(a,!1)},global.stop_color_print=function(){require("internal").stopColorPrint()},global.EXPORTS_SLOW_BUFFER&&(Object.keys(global.EXPORTS_SLOW_BUFFER).forEach(function(a){h[a]=global.EXPORTS_SLOW_BUFFER[a]}),delete global.EXPORTS_SLOW_BUFFER),global.APP_PATH&&(h.appPath=global.APP_PATH,delete global.APP_PATH),global.DEV_APP_PATH&&(h.devAppPath=global.APP_PATH,delete global.DEV_APP_PATH),h}()),function(){var a=require("internal");a.errors={ERROR_NO_ERROR:{code:0,message:"no error"},ERROR_FAILED:{code:1,message:"failed"},ERROR_SYS_ERROR:{code:2,message:"system error"},ERROR_OUT_OF_MEMORY:{code:3,message:"out of memory"},ERROR_INTERNAL:{code:4,message:"internal error"},ERROR_ILLEGAL_NUMBER:{code:5,message:"illegal number"},ERROR_NUMERIC_OVERFLOW:{code:6,message:"numeric overflow"},ERROR_ILLEGAL_OPTION:{code:7,message:"illegal option"},ERROR_DEAD_PID:{code:8,message:"dead process identifier"},ERROR_NOT_IMPLEMENTED:{code:9,message:"not implemented"},ERROR_BAD_PARAMETER:{code:10,message:"bad parameter"},ERROR_FORBIDDEN:{code:11,message:"forbidden"},ERROR_OUT_OF_MEMORY_MMAP:{code:12,message:"out of memory in mmap"},ERROR_CORRUPTED_CSV:{code:13,message:"csv is corrupt"},ERROR_FILE_NOT_FOUND:{code:14,message:"file not found"},ERROR_CANNOT_WRITE_FILE:{code:15,message:"cannot write file"},ERROR_CANNOT_OVERWRITE_FILE:{code:16,message:"cannot overwrite file"},ERROR_TYPE_ERROR:{code:17,message:"type error"},ERROR_LOCK_TIMEOUT:{code:18,message:"lock timeout"},ERROR_CANNOT_CREATE_DIRECTORY:{code:19,message:"cannot create directory"},ERROR_CANNOT_CREATE_TEMP_FILE:{code:20,message:"cannot create temporary file"},ERROR_REQUEST_CANCELED:{code:21,message:"canceled request"},ERROR_DEBUG:{code:22,message:"intentional debug error"},ERROR_AID_NOT_FOUND:{code:23,message:"internal error with attribute ID in shaper"},ERROR_LEGEND_INCOMPLETE:{code:24,message:"internal error if a legend could not be created"},ERROR_IP_ADDRESS_INVALID:{code:25,message:"IP address is invalid"},ERROR_LEGEND_NOT_IN_WAL_FILE:{code:26,message:"internal error if a legend for a marker does not yet exist in the same WAL file"},ERROR_FILE_EXISTS:{code:27,message:"file exists"},ERROR_LOCKED:{code:28,message:"locked"},ERROR_HTTP_BAD_PARAMETER:{code:400,message:"bad parameter"},ERROR_HTTP_UNAUTHORIZED:{code:401,message:"unauthorized"},ERROR_HTTP_FORBIDDEN:{code:403,message:"forbidden"},ERROR_HTTP_NOT_FOUND:{code:404,message:"not found"},ERROR_HTTP_METHOD_NOT_ALLOWED:{code:405,message:"method not supported"},ERROR_HTTP_PRECONDITION_FAILED:{code:412,message:"precondition failed"},ERROR_HTTP_SERVER_ERROR:{code:500,message:"internal server error"},ERROR_HTTP_CORRUPTED_JSON:{code:600,message:"invalid JSON object"},ERROR_HTTP_SUPERFLUOUS_SUFFICES:{code:601,message:"superfluous URL suffices"},ERROR_ARANGO_ILLEGAL_STATE:{code:1e3,message:"illegal state"},ERROR_ARANGO_SHAPER_FAILED:{code:1001,message:"could not shape document"},ERROR_ARANGO_DATAFILE_SEALED:{code:1002,message:"datafile sealed"},ERROR_ARANGO_UNKNOWN_COLLECTION_TYPE:{code:1003,message:"unknown type"},ERROR_ARANGO_READ_ONLY:{code:1004,message:"read only"},ERROR_ARANGO_DUPLICATE_IDENTIFIER:{code:1005,message:"duplicate identifier"},ERROR_ARANGO_DATAFILE_UNREADABLE:{code:1006,message:"datafile unreadable"},ERROR_ARANGO_DATAFILE_EMPTY:{code:1007,message:"datafile empty"},ERROR_ARANGO_RECOVERY:{code:1008,message:"logfile recovery error"},ERROR_ARANGO_CORRUPTED_DATAFILE:{code:1100,message:"corrupted datafile"},ERROR_ARANGO_ILLEGAL_PARAMETER_FILE:{code:1101,message:"illegal or unreadable parameter file"},ERROR_ARANGO_CORRUPTED_COLLECTION:{code:1102,message:"corrupted collection"},ERROR_ARANGO_MMAP_FAILED:{code:1103,message:"mmap failed"},ERROR_ARANGO_FILESYSTEM_FULL:{code:1104,message:"filesystem full"},ERROR_ARANGO_NO_JOURNAL:{code:1105,message:"no journal"},ERROR_ARANGO_DATAFILE_ALREADY_EXISTS:{code:1106,message:"cannot create/rename datafile because it already exists"},ERROR_ARANGO_DATADIR_LOCKED:{code:1107,message:"database directory is locked"},ERROR_ARANGO_COLLECTION_DIRECTORY_ALREADY_EXISTS:{code:1108,message:"cannot create/rename collection because directory already exists"},ERROR_ARANGO_MSYNC_FAILED:{code:1109,message:"msync failed"},ERROR_ARANGO_DATADIR_UNLOCKABLE:{code:1110,message:"cannot lock database directory"},ERROR_ARANGO_SYNC_TIMEOUT:{code:1111,message:"sync timeout"},ERROR_ARANGO_CONFLICT:{code:1200,message:"conflict"},ERROR_ARANGO_DATADIR_INVALID:{code:1201,message:"invalid database directory"},ERROR_ARANGO_DOCUMENT_NOT_FOUND:{code:1202,message:"document not found"},ERROR_ARANGO_COLLECTION_NOT_FOUND:{code:1203,message:"collection not found"},ERROR_ARANGO_COLLECTION_PARAMETER_MISSING:{code:1204,message:"parameter 'collection' not found"},ERROR_ARANGO_DOCUMENT_HANDLE_BAD:{code:1205,message:"illegal document handle"},ERROR_ARANGO_MAXIMAL_SIZE_TOO_SMALL:{code:1206,message:"maximal size of journal too small"},ERROR_ARANGO_DUPLICATE_NAME:{code:1207,message:"duplicate name"},ERROR_ARANGO_ILLEGAL_NAME:{code:1208,message:"illegal name"},ERROR_ARANGO_NO_INDEX:{code:1209,message:"no suitable index known"},ERROR_ARANGO_UNIQUE_CONSTRAINT_VIOLATED:{code:1210,message:"unique constraint violated"},ERROR_ARANGO_INDEX_NOT_FOUND:{code:1212,message:"index not found"},ERROR_ARANGO_CROSS_COLLECTION_REQUEST:{code:1213,message:"cross collection request not allowed"},ERROR_ARANGO_INDEX_HANDLE_BAD:{code:1214,message:"illegal index handle"},ERROR_ARANGO_CAP_CONSTRAINT_ALREADY_DEFINED:{code:1215,message:"cap constraint already defined"},ERROR_ARANGO_DOCUMENT_TOO_LARGE:{code:1216,message:"document too large"},ERROR_ARANGO_COLLECTION_NOT_UNLOADED:{code:1217,message:"collection must be unloaded"},ERROR_ARANGO_COLLECTION_TYPE_INVALID:{code:1218,message:"collection type invalid"},ERROR_ARANGO_VALIDATION_FAILED:{code:1219,message:"validator failed"},ERROR_ARANGO_PARSER_FAILED:{code:1220,message:"parser failed"},ERROR_ARANGO_DOCUMENT_KEY_BAD:{
code:1221,message:"illegal document key"},ERROR_ARANGO_DOCUMENT_KEY_UNEXPECTED:{code:1222,message:"unexpected document key"},ERROR_ARANGO_DATADIR_NOT_WRITABLE:{code:1224,message:"server database directory not writable"},ERROR_ARANGO_OUT_OF_KEYS:{code:1225,message:"out of keys"},ERROR_ARANGO_DOCUMENT_KEY_MISSING:{code:1226,message:"missing document key"},ERROR_ARANGO_DOCUMENT_TYPE_INVALID:{code:1227,message:"invalid document type"},ERROR_ARANGO_DATABASE_NOT_FOUND:{code:1228,message:"database not found"},ERROR_ARANGO_DATABASE_NAME_INVALID:{code:1229,message:"database name invalid"},ERROR_ARANGO_USE_SYSTEM_DATABASE:{code:1230,message:"operation only allowed in system database"},ERROR_ARANGO_ENDPOINT_NOT_FOUND:{code:1231,message:"endpoint not found"},ERROR_ARANGO_INVALID_KEY_GENERATOR:{code:1232,message:"invalid key generator"},ERROR_ARANGO_INVALID_EDGE_ATTRIBUTE:{code:1233,message:"edge attribute missing"},ERROR_ARANGO_INDEX_DOCUMENT_ATTRIBUTE_MISSING:{code:1234,message:"index insertion warning - attribute missing in document"},ERROR_ARANGO_INDEX_CREATION_FAILED:{code:1235,message:"index creation failed"},ERROR_ARANGO_WRITE_THROTTLE_TIMEOUT:{code:1236,message:"write-throttling timeout"},ERROR_ARANGO_COLLECTION_TYPE_MISMATCH:{code:1237,message:"collection type mismatch"},ERROR_ARANGO_COLLECTION_NOT_LOADED:{code:1238,message:"collection not loaded"},ERROR_ARANGO_DATAFILE_FULL:{code:1300,message:"datafile full"},ERROR_ARANGO_EMPTY_DATADIR:{code:1301,message:"server database directory is empty"},ERROR_REPLICATION_NO_RESPONSE:{code:1400,message:"no response"},ERROR_REPLICATION_INVALID_RESPONSE:{code:1401,message:"invalid response"},ERROR_REPLICATION_MASTER_ERROR:{code:1402,message:"master error"},ERROR_REPLICATION_MASTER_INCOMPATIBLE:{code:1403,message:"master incompatible"},ERROR_REPLICATION_MASTER_CHANGE:{code:1404,message:"master change"},ERROR_REPLICATION_LOOP:{code:1405,message:"loop detected"},ERROR_REPLICATION_UNEXPECTED_MARKER:{code:1406,message:"unexpected marker"},ERROR_REPLICATION_INVALID_APPLIER_STATE:{code:1407,message:"invalid applier state"},ERROR_REPLICATION_UNEXPECTED_TRANSACTION:{code:1408,message:"invalid transaction"},ERROR_REPLICATION_INVALID_APPLIER_CONFIGURATION:{code:1410,message:"invalid replication applier configuration"},ERROR_REPLICATION_RUNNING:{code:1411,message:"cannot perform operation while applier is running"},ERROR_REPLICATION_APPLIER_STOPPED:{code:1412,message:"replication stopped"},ERROR_REPLICATION_NO_START_TICK:{code:1413,message:"no start tick"},ERROR_REPLICATION_START_TICK_NOT_PRESENT:{code:1414,message:"start tick not present"},ERROR_CLUSTER_NO_AGENCY:{code:1450,message:"could not connect to agency"},ERROR_CLUSTER_NO_COORDINATOR_HEADER:{code:1451,message:"missing coordinator header"},ERROR_CLUSTER_COULD_NOT_LOCK_PLAN:{code:1452,message:"could not lock plan in agency"},ERROR_CLUSTER_COLLECTION_ID_EXISTS:{code:1453,message:"collection ID already exists"},ERROR_CLUSTER_COULD_NOT_CREATE_COLLECTION_IN_PLAN:{code:1454,message:"could not create collection in plan"},ERROR_CLUSTER_COULD_NOT_READ_CURRENT_VERSION:{code:1455,message:"could not read version in current in agency"},ERROR_CLUSTER_COULD_NOT_CREATE_COLLECTION:{code:1456,message:"could not create collection"},ERROR_CLUSTER_TIMEOUT:{code:1457,message:"timeout in cluster operation"},ERROR_CLUSTER_COULD_NOT_REMOVE_COLLECTION_IN_PLAN:{code:1458,message:"could not remove collection from plan"},ERROR_CLUSTER_COULD_NOT_REMOVE_COLLECTION_IN_CURRENT:{code:1459,message:"could not remove collection from current"},ERROR_CLUSTER_COULD_NOT_CREATE_DATABASE_IN_PLAN:{code:1460,message:"could not create database in plan"},ERROR_CLUSTER_COULD_NOT_CREATE_DATABASE:{code:1461,message:"could not create database"},ERROR_CLUSTER_COULD_NOT_REMOVE_DATABASE_IN_PLAN:{code:1462,message:"could not remove database from plan"},ERROR_CLUSTER_COULD_NOT_REMOVE_DATABASE_IN_CURRENT:{code:1463,message:"could not remove database from current"},ERROR_CLUSTER_SHARD_GONE:{code:1464,message:"no responsible shard found"},ERROR_CLUSTER_CONNECTION_LOST:{code:1465,message:"cluster internal HTTP connection broken"},ERROR_CLUSTER_MUST_NOT_SPECIFY_KEY:{code:1466,message:"must not specify _key for this collection"},ERROR_CLUSTER_GOT_CONTRADICTING_ANSWERS:{code:1467,message:"got contradicting answers from different shards"},ERROR_CLUSTER_NOT_ALL_SHARDING_ATTRIBUTES_GIVEN:{code:1468,message:"not all sharding attributes given"},ERROR_CLUSTER_MUST_NOT_CHANGE_SHARDING_ATTRIBUTES:{code:1469,message:"must not change the value of a shard key attribute"},ERROR_CLUSTER_UNSUPPORTED:{code:1470,message:"unsupported operation or parameter"},ERROR_CLUSTER_ONLY_ON_COORDINATOR:{code:1471,message:"this operation is only valid on a coordinator in a cluster"},ERROR_CLUSTER_READING_PLAN_AGENCY:{code:1472,message:"error reading Plan in agency"},ERROR_CLUSTER_COULD_NOT_TRUNCATE_COLLECTION:{code:1473,message:"could not truncate collection"},ERROR_CLUSTER_AQL_COMMUNICATION:{code:1474,message:"error in cluster internal communication for AQL"},ERROR_ARANGO_DOCUMENT_NOT_FOUND_OR_SHARDING_ATTRIBUTES_CHANGED:{code:1475,message:"document not found or sharding attributes changed"},ERROR_CLUSTER_COULD_NOT_DETERMINE_ID:{code:1476,message:"could not determine my ID from my local info"},ERROR_QUERY_KILLED:{code:1500,message:"query killed"},ERROR_QUERY_PARSE:{code:1501,message:"%s"},ERROR_QUERY_EMPTY:{code:1502,message:"query is empty"},ERROR_QUERY_SCRIPT:{code:1503,message:"runtime error '%s'"},ERROR_QUERY_NUMBER_OUT_OF_RANGE:{code:1504,message:"number out of range"},ERROR_QUERY_VARIABLE_NAME_INVALID:{code:1510,message:"variable name '%s' has an invalid format"},ERROR_QUERY_VARIABLE_REDECLARED:{code:1511,message:"variable '%s' is assigned multiple times"},ERROR_QUERY_VARIABLE_NAME_UNKNOWN:{code:1512,message:"unknown variable '%s'"},ERROR_QUERY_COLLECTION_LOCK_FAILED:{code:1521,message:"unable to read-lock collection %s"},ERROR_QUERY_TOO_MANY_COLLECTIONS:{code:1522,message:"too many collections"},ERROR_QUERY_DOCUMENT_ATTRIBUTE_REDECLARED:{code:1530,message:"document attribute '%s' is assigned multiple times"},ERROR_QUERY_FUNCTION_NAME_UNKNOWN:{code:1540,message:"usage of unknown function '%s()'"},ERROR_QUERY_FUNCTION_ARGUMENT_NUMBER_MISMATCH:{code:1541,message:"invalid number of arguments for function '%s()', expected number of arguments: minimum: %d, maximum: %d"},ERROR_QUERY_FUNCTION_ARGUMENT_TYPE_MISMATCH:{code:1542,message:"invalid argument type in call to function '%s()'"},ERROR_QUERY_INVALID_REGEX:{code:1543,message:"invalid regex value"},ERROR_QUERY_BIND_PARAMETERS_INVALID:{code:1550,message:"invalid structure of bind parameters"},ERROR_QUERY_BIND_PARAMETER_MISSING:{code:1551,message:"no value specified for declared bind parameter '%s'"},ERROR_QUERY_BIND_PARAMETER_UNDECLARED:{code:1552,message:"bind parameter '%s' was not declared in the query"},ERROR_QUERY_BIND_PARAMETER_TYPE:{code:1553,message:"bind parameter '%s' has an invalid value or type"},ERROR_QUERY_INVALID_LOGICAL_VALUE:{code:1560,message:"invalid logical value"},ERROR_QUERY_INVALID_ARITHMETIC_VALUE:{code:1561,message:"invalid arithmetic value"},ERROR_QUERY_DIVISION_BY_ZERO:{code:1562,message:"division by zero"},ERROR_QUERY_ARRAY_EXPECTED:{code:1563,message:"array expected"},ERROR_QUERY_FAIL_CALLED:{code:1569,message:"FAIL(%s) called"},ERROR_QUERY_GEO_INDEX_MISSING:{code:1570,message:"no suitable geo index found for geo restriction on '%s'"},ERROR_QUERY_FULLTEXT_INDEX_MISSING:{code:1571,message:"no suitable fulltext index found for fulltext query on '%s'"},ERROR_QUERY_INVALID_DATE_VALUE:{code:1572,message:"invalid date value"},ERROR_QUERY_MULTI_MODIFY:{code:1573,message:"multi-modify query"},ERROR_QUERY_MODIFY_IN_SUBQUERY:{code:1574,message:"modify operation in subquery"},ERROR_QUERY_COMPILE_TIME_OPTIONS:{code:1575,message:"query options must be readable at query compile time"},ERROR_QUERY_EXCEPTION_OPTIONS:{code:1576,message:"query options expected"},ERROR_QUERY_COLLECTION_USED_IN_EXPRESSION:{code:1577,message:"collection '%s' used as expression operand"},ERROR_QUERY_DISALLOWED_DYNAMIC_CALL:{code:1578,message:"disallowed dynamic call to '%s'"},ERROR_QUERY_ACCESS_AFTER_MODIFICATION:{code:1579,message:"access after data-modification"},ERROR_QUERY_FUNCTION_INVALID_NAME:{code:1580,message:"invalid user function name"},ERROR_QUERY_FUNCTION_INVALID_CODE:{code:1581,message:"invalid user function code"},ERROR_QUERY_FUNCTION_NOT_FOUND:{code:1582,message:"user function '%s()' not found"},ERROR_QUERY_FUNCTION_RUNTIME_ERROR:{code:1583,message:"user function runtime error: %s"},ERROR_QUERY_BAD_JSON_PLAN:{code:1590,message:"bad execution plan JSON"},ERROR_QUERY_NOT_FOUND:{code:1591,message:"query ID not found"},ERROR_QUERY_IN_USE:{code:1592,message:"query with this ID is in use"},ERROR_CURSOR_NOT_FOUND:{code:1600,message:"cursor not found"},ERROR_CURSOR_BUSY:{code:1601,message:"cursor is busy"},ERROR_TRANSACTION_INTERNAL:{code:1650,message:"internal transaction error"},ERROR_TRANSACTION_NESTED:{code:1651,message:"nested transactions detected"},ERROR_TRANSACTION_UNREGISTERED_COLLECTION:{code:1652,message:"unregistered collection used in transaction"},ERROR_TRANSACTION_DISALLOWED_OPERATION:{code:1653,message:"disallowed operation inside transaction"},ERROR_TRANSACTION_ABORTED:{code:1654,message:"transaction aborted"},ERROR_USER_INVALID_NAME:{code:1700,message:"invalid user name"},ERROR_USER_INVALID_PASSWORD:{code:1701,message:"invalid password"},ERROR_USER_DUPLICATE:{code:1702,message:"duplicate user"},ERROR_USER_NOT_FOUND:{code:1703,message:"user not found"},ERROR_USER_CHANGE_PASSWORD:{code:1704,message:"user must change his password"},ERROR_APPLICATION_INVALID_NAME:{code:1750,message:"invalid application name"},ERROR_APPLICATION_INVALID_MOUNT:{code:1751,message:"invalid mount"},ERROR_APPLICATION_DOWNLOAD_FAILED:{code:1752,message:"application download failed"},ERROR_APPLICATION_UPLOAD_FAILED:{code:1753,message:"application upload failed"},ERROR_KEYVALUE_INVALID_KEY:{code:1800,message:"invalid key declaration"},ERROR_KEYVALUE_KEY_EXISTS:{code:1801,message:"key already exists"},ERROR_KEYVALUE_KEY_NOT_FOUND:{code:1802,message:"key not found"},ERROR_KEYVALUE_KEY_NOT_UNIQUE:{code:1803,message:"key is not unique"},ERROR_KEYVALUE_KEY_NOT_CHANGED:{code:1804,message:"key value not changed"},ERROR_KEYVALUE_KEY_NOT_REMOVED:{code:1805,message:"key value not removed"},ERROR_KEYVALUE_NO_VALUE:{code:1806,message:"missing value"},ERROR_TASK_INVALID_ID:{code:1850,message:"invalid task id"},ERROR_TASK_DUPLICATE_ID:{code:1851,message:"duplicate task id"},ERROR_TASK_NOT_FOUND:{code:1852,message:"task not found"},ERROR_GRAPH_INVALID_GRAPH:{code:1901,message:"invalid graph"},ERROR_GRAPH_COULD_NOT_CREATE_GRAPH:{code:1902,message:"could not create graph"},ERROR_GRAPH_INVALID_VERTEX:{code:1903,message:"invalid vertex"},ERROR_GRAPH_COULD_NOT_CREATE_VERTEX:{code:1904,message:"could not create vertex"},ERROR_GRAPH_COULD_NOT_CHANGE_VERTEX:{code:1905,message:"could not change vertex"},ERROR_GRAPH_INVALID_EDGE:{code:1906,message:"invalid edge"},ERROR_GRAPH_COULD_NOT_CREATE_EDGE:{code:1907,message:"could not create edge"},ERROR_GRAPH_COULD_NOT_CHANGE_EDGE:{code:1908,message:"could not change edge"},ERROR_GRAPH_TOO_MANY_ITERATIONS:{code:1909,message:"too many iterations - try increasing the value of 'maxIterations'"},ERROR_GRAPH_INVALID_FILTER_RESULT:{code:1910,message:"invalid filter result"},ERROR_GRAPH_COLLECTION_MULTI_USE:{code:1920,message:"multi use of edge collection in edge def"},ERROR_GRAPH_COLLECTION_USE_IN_MULTI_GRAPHS:{code:1921,message:"edge collection already used in edge def"},ERROR_GRAPH_CREATE_MISSING_NAME:{code:1922,message:"missing graph name"},ERROR_GRAPH_CREATE_MALFORMED_EDGE_DEFINITION:{code:1923,message:"malformed edge definition"},ERROR_GRAPH_NOT_FOUND:{code:1924,message:"graph not found"},ERROR_GRAPH_DUPLICATE:{code:1925,message:"graph already exists"},ERROR_GRAPH_VERTEX_COL_DOES_NOT_EXIST:{code:1926,message:"vertex collection does not exist or is not part of the graph"},ERROR_GRAPH_WRONG_COLLECTION_TYPE_VERTEX:{code:1927,message:"not a vertex collection"},ERROR_GRAPH_NOT_IN_ORPHAN_COLLECTION:{code:1928,message:"not in orphan collection"},ERROR_GRAPH_COLLECTION_USED_IN_EDGE_DEF:{code:1929,message:"collection already used in edge def"},ERROR_GRAPH_EDGE_COLLECTION_NOT_USED:{code:1930,message:"edge collection not used in graph"},ERROR_GRAPH_NOT_AN_ARANGO_COLLECTION:{code:1931,message:" is not an ArangoCollection"},ERROR_GRAPH_NO_GRAPH_COLLECTION:{code:1932,message:"collection _graphs does not exist"},ERROR_GRAPH_INVALID_EXAMPLE_ARRAY_OBJECT_STRING:{code:1933,message:"Invalid example type. Has to be String, Array or Object"},ERROR_GRAPH_INVALID_EXAMPLE_ARRAY_OBJECT:{code:1934,message:"Invalid example type. Has to be Array or Object"},ERROR_GRAPH_INVALID_NUMBER_OF_ARGUMENTS:{code:1935,message:"Invalid number of arguments. Expected: "},ERROR_GRAPH_INVALID_PARAMETER:{code:1936,message:"Invalid parameter type."},ERROR_GRAPH_INVALID_ID:{code:1937,message:"Invalid id"},ERROR_GRAPH_COLLECTION_USED_IN_ORPHANS:{code:1938,message:"collection used in orphans"},ERROR_GRAPH_EDGE_COL_DOES_NOT_EXIST:{code:1939,message:"edge collection does not exist or is not part of the graph"},ERROR_SESSION_UNKNOWN:{code:1950,message:"unknown session"},ERROR_SESSION_EXPIRED:{code:1951,message:"session expired"},SIMPLE_CLIENT_UNKNOWN_ERROR:{code:2e3,message:"unknown client error"},SIMPLE_CLIENT_COULD_NOT_CONNECT:{code:2001,message:"could not connect to server"},SIMPLE_CLIENT_COULD_NOT_WRITE:{code:2002,message:"could not write to server"},SIMPLE_CLIENT_COULD_NOT_READ:{code:2003,message:"could not read from server"},ERROR_MALFORMED_MANIFEST_FILE:{code:3e3,message:"malformed manifest file"},ERROR_INVALID_APPLICATION_MANIFEST:{code:3001,message:"manifest file is invalid"},ERROR_MANIFEST_FILE_ATTRIBUTE_MISSING:{code:3002,message:"missing manifest attribute"},ERROR_CANNOT_EXTRACT_APPLICATION_ROOT:{code:3003,message:"unable to extract app root path"},ERROR_INVALID_FOXX_OPTIONS:{code:3004,message:"invalid foxx options"},ERROR_FAILED_TO_EXECUTE_SCRIPT:{code:3005,message:"failed to execute script"},ERROR_SYNTAX_ERROR_IN_SCRIPT:{code:3006,message:"syntax error in script"},ERROR_INVALID_MOUNTPOINT:{code:3007,message:"mountpoint is invalid"},ERROR_NO_FOXX_FOUND:{code:3008,message:"No foxx found at this location"},ERROR_APP_NOT_FOUND:{code:3009,message:"App not found"},ERROR_APP_NEEDS_CONFIGURATION:{code:3010,message:"App not configured"},ERROR_MODULE_NOT_FOUND:{code:3100,message:"cannot locate module"},ERROR_MODULE_SYNTAX_ERROR:{code:3101,message:"syntax error in module"},ERROR_MODULE_BAD_WRAPPER:{code:3102,message:"failed to wrap module"},ERROR_MODULE_FAILURE:{code:3103,message:"failed to invoke module"},ERROR_MODULE_UNKNOWN_FILE_TYPE:{code:3110,message:"unknown file type"},ERROR_MODULE_PATH_MUST_BE_ABSOLUTE:{code:3111,message:"path must be absolute"},ERROR_MODULE_CAN_NOT_ESCAPE:{code:3112,message:"cannot use '..' to escape top-level-directory"},ERROR_MODULE_DRIVE_LETTER:{code:3113,message:"drive local path is not supported"},ERROR_MODULE_BAD_MODULE_ORIGIN:{code:3120,message:"corrupted module origin"},ERROR_MODULE_BAD_PACKAGE_ORIGIN:{code:3121,message:"corrupted package origin"},ERROR_MODULE_DOCUMENT_IS_EMPTY:{code:3125,message:"no content"},ERROR_MODULE_MAIN_NOT_READABLE:{code:3130,message:"cannot read main file"},ERROR_MODULE_MAIN_NOT_JS:{code:3131,message:"main file is not of type 'js'"},RESULT_ELEMENT_EXISTS:{code:1e4,message:"element not inserted into structure, because it already exists"},RESULT_ELEMENT_NOT_FOUND:{code:10001,message:"element not found in structure"},ERROR_APP_ALREADY_EXISTS:{code:2e4,message:"newest version of app already installed"},ERROR_QUEUE_ALREADY_EXISTS:{code:21e3,message:"named queue already exists"},ERROR_DISPATCHER_IS_STOPPING:{code:21001,message:"dispatcher stopped"},ERROR_QUEUE_UNKNOWN:{code:21002,message:"named queue does not exist"},ERROR_QUEUE_FULL:{code:21003,message:"named queue is full"}}}(),global.DEFINE_MODULE("console",function(){function a(a,b){j(a,h+b)}function b(a){var b=require("internal").ShapedJson,c=[];a.length>0&&"string"!=typeof a[0]&&c.push("%s");for(var d=0;d<a.length;++d){var e=a[d];"object"==typeof e&&(void 0!==b&&e instanceof b?e=g(e,{prettyPrint:!1}):null===e?e="null":e instanceof Date||e instanceof RegExp?e=String(e):(Object.prototype.isPrototypeOf(e)||Array.isArray(e))&&(e=g(e,{prettyPrint:!1}))),c.push(e)}return c}var c,d={},e=require("internal"),f=e.sprintf,g=e.inspect,h="";try{c=Object.create(null)}catch(i){c={}}var j;return global.SYS_LOG?(j=global.SYS_LOG,delete global.SYS_LOG):j=function(a,b){"undefined"!=typeof jqconsole&&jqconsole.Write(b+"\n","jssuccess")},d.assert=function(c){if(!c){var d,e=Array.prototype.slice.call(arguments,1);try{d=f.apply(f,b(e))}catch(g){d=d=g+": "+e}a("error",d),require("assert").ok(c,d)}},d.debug=function(){var c;try{c=f.apply(f,b(arguments))}catch(d){c=d+": "+arguments}a("debug",c)},d.debugLines=function(){var c;try{c=f.apply(f,b(arguments))}catch(d){c=d+": "+arguments}for(var e=c.split("\n"),g=0;g<e.length;++g)a("debug",e[g])},d.dir=function(b){a("info",g(b))},d.error=function(){var c;try{c=f.apply(f,b(arguments))}catch(d){c=d+": "+arguments}a("error",c)},d.errorLines=function(){var c;try{c=f.apply(f,b(arguments))}catch(d){c=d+": "+arguments}for(var e=c.split("\n"),g=0;g<e.length;++g)a("error",e[g])},global.SYS_GETLINE&&(d.getline=global.SYS_GETLINE,delete global.SYS_GETLINE),d.group=function(){var c;try{c=f.apply(f,b(arguments))}catch(d){c=d+": "+arguments}h+="  ",a("info",c)},d.groupCollapsed=function(){var c;try{c=f.apply(f,b(arguments))}catch(d){c=d+": "+arguments}a("info",c),h+="  "},d.groupEnd=function(){h=h.substr(2)},d.info=function(){var c;try{c=f.apply(f,b(arguments))}catch(d){c=d+": "+arguments}a("info",c)},d.infoLines=function(){var c;try{c=f.apply(f,b(arguments))}catch(d){c=d+": "+arguments}for(var e=c.split("\n"),g=0;g<e.length;++g)a("info",e[g])},d.log=d.info,d.logLines=d.infoLines,d.time=function(a){if("string"!=typeof a)throw new Error("label must be a string");var b="undefined"==typeof Symbol?"%"+a:Symbol["for"](a);c[b]=Date.now()},d.timeEnd=function(b){var d="undefined"==typeof Symbol?"%"+b:Symbol["for"](b),e=c[d];if(!e)throw new Error("No such label: "+b);var g=Date.now()-e;delete c[d],a("info",f("%s: %dms",b,g))},d.trace=function(){var c=new Error;c.name="Trace",c.message=f.apply(f,b(arguments)),Error.captureStackTrace(c,d.trace);for(var e=c.stack.split("\n");!e[e.length-1];)e.pop();for(var g=0;g<e.length;++g)a("info",e[g])},d.warn=function(){var c;try{c=f.apply(f,b(arguments))}catch(d){c=d+": "+arguments}a("warning",c)},d.warnLines=function(){var c;try{c=f.apply(f,b(arguments))}catch(d){c=d+": "+arguments}var e,g=c.split("\n");for(e=0;e<g.length;++e)a("warning",g[e])},d}()),function(){var a=require("internal");global.ArangoConnection&&(a.ArangoConnection=global.ArangoConnection),global.SYS_ARANGO&&(a.arango=global.SYS_ARANGO,delete global.SYS_ARANGO),a.wal={flush:function(b,c){if(a.arango){var d=b?"true":"false",e=c?"true":"false";return void a.arango.PUT("/_admin/wal/flush?waitForSync="+d+"&waitForCollector="+e,"")}throw"not connected"},properties:function(b){if(a.arango)return void 0!==b?a.arango.PUT("/_admin/wal/properties",JSON.stringify(b)):a.arango.GET("/_admin/wal/properties","");throw"not connected"},transactions:function(){if(a.arango)return a.arango.GET("/_admin/wal/transactions","");throw"not connected"}},a.reloadAqlFunctions=function(){if(a.arango)return void a.arango.POST("/_admin/aql/reload","");throw"not connected"},a.reloadRouting=function(){if(a.arango)return void a.arango.POST("/_admin/routing/reload","");throw"not connected"},a.routingCache=function(){if(a.arango)return a.arango.GET("/_admin/routing/routes","");throw"not connected"},a.reloadAuth=function(){if(a.arango)return void a.arango.POST("/_admin/auth/reload","");throw"not connected"},a.executeServer=function(b){if(a.arango)return a.arango.POST("/_admin/execute",b);throw"not connected"},a.appendCurlRequest=function(b,c,d){return function(e,f,g,h){var i,j,k,l=!1;if("string"!=typeof g&&void 0!==g&&(l=!0,g=a.inspect(g)),j="shell> curl ","POST"===e?(i=a.arango.POST_RAW(f,g,h),j+="-X "+e+" "):"PUT"===e?(i=a.arango.PUT_RAW(f,g,h),j+="-X "+e+" "):"GET"===e?i=a.arango.GET_RAW(f,h):"DELETE"===e?(i=a.arango.DELETE_RAW(f,h),j+="-X "+e+" "):"PATCH"===e?(i=a.arango.PATCH_RAW(f,g,h),j+="-X "+e+" "):"HEAD"===e?(i=a.arango.HEAD_RAW(f,h),j+="-X "+e+" "):"OPTION"===e&&(i=a.arango.OPTION_RAW(f,g,h),j+="-X "+e+" "),void 0!==h&&""!==h)for(k in h)h.hasOwnProperty(k)&&(j+="--header '"+k+": "+h[k]+"' ");return void 0!==g&&""!==g&&(j+="--data-binary @- "),j+="--dump - http://localhost:8529"+f,b(j),void 0!==g&&""!==g&&g&&(d(" &lt;&lt;EOF\n"),l?c(g):d(g),d("\nEOF")),d("\n\n"),i}},a.appendRawResponse=function(b,c){return function(d){var e,f=d.headers;b("HTTP/1.1 "+f["http/1.1"]+"\n");for(e in f)f.hasOwnProperty(e)&&"http/1.1"!==e&&"server"!==e&&"connection"!==e&&"content-length"!==e&&b(e+": "+f[e]+"\n");b("\n"),void 0!==d.body&&(c(a.inspect(d.body)),b("\n"))}},a.appendJsonResponse=function(b,c){return function(b){var d=a.appendRawResponse(c,c),e=b.body;b.body=JSON.parse(b.body),d(b),b.body=e}},a.log=function(b,c){a.output(b,": ",c,"\n")};try{"undefined"!=typeof window&&(a.sprintf=function(a){var b=arguments.length;if(0===b)return"";if(1>=b)return String(a);var c,d=[];for(c=1;c<arguments.length;++c)d.push(arguments[c]);return c=0,a.replace(/%[dfs]/,function(){return String(d[c++])})})}catch(b){}}(),function(){Object.defineProperty(Object.prototype,"_shallowCopy",{get:function(){var a=this;return this.propertyKeys.reduce(function(b,c){return b[c]=a[c],b},{})}}),Object.defineProperty(Object.prototype,"propertyKeys",{get:function(){return Object.keys(this).filter(function(a){return"_"!==a.charAt(0)&&"$"!==a.charAt(0)})}})}(),"undefined"==typeof global&&"undefined"!=typeof window&&(global=window),global.Buffer=require("buffer").Buffer,global.process=require("process"),global.setInterval=global.setInterval||function(){},global.clearInterval=global.clearInterval||function(){},global.setTimeout=global.setTimeout||function(){},global.clearTimeout=global.clearTimeout||function(){},global.aqlQuery=function(){var a,b,c,d=arguments[0],e={},f=d[0];for(c=1;c<arguments.length;c++)b=arguments[c],a="value"+(c-1),b.constructor&&"ArangoCollection"===b.constructor.name&&(a="@"+a,b=b.name()),e[a]=b,f+="@"+a+d[c];return{query:f,bindVars:e}},global.start_pager=function(){var a=require("internal");a.startPager()},global.stop_pager=function(){var a=require("internal");a.stopPager()},global.help=function(){var a=require("internal"),b=require("org/arangodb"),c=require("org/arangodb/arangosh");a.print(c.HELP),b.ArangoDatabase.prototype._help(),b.ArangoCollection.prototype._help(),b.ArangoStatement.prototype._help(),b.ArangoQueryCursor.prototype._help(),a.print(c.helpExtended)},global.clear=function(){for(var a=require("internal"),b="",c=0;100>c;++c)b+="\n";a.print(b)},global.console=global.console||require("console"),global.db=require("org/arangodb").db,global.arango=require("org/arangodb").arango,global.fm=require("org/arangodb/foxx/manager"),global.ArangoStatement=require("org/arangodb/arango-statement").ArangoStatement,global.tutorial=require("org/arangodb/tutorial");var initHelp=function(){var a=require("internal");if(a.db)try{a.db._collections()}catch(b){}a.quiet!==!0&&(require("org/arangodb").checkAvailableVersions(),a.arango&&a.arango.isConnected&&a.arango.isConnected()&&a.print("Type 'tutorial' for a tutorial or 'help' to see common examples"))};if("undefined"==typeof window){if(initHelp(),global.IS_EXECUTE_SCRIPT||global.IS_EXECUTE_STRING||global.IS_CHECK_SCRIPT||global.IS_UNIT_TESTS||global.IS_JS_LINT)try{var __fs__=require("fs"),__rcf__=__fs__.join(__fs__.home(),".arangosh.rc");if(__fs__.exists(__rcf__)){var __content__=__fs__.read(__rcf__);eval(__content__)}}catch(e){require("console").warn("arangosh.rc: %s",String(e))}try{delete global.IS_EXECUTE_SCRIPT,delete global.IS_EXECUTE_STRING,delete global.IS_CHECK_SCRIPT,delete global.IS_UNIT_TESTS,delete global.IS_JS_LINT}catch(e){}}