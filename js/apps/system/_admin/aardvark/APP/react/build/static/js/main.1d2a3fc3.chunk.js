/*! For license information please see main.1d2a3fc3.chunk.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return r})),i.d(t,"c",(function(){return a})),i.d(t,"d",(function(){return o})),i.d(t,"h",(function(){return s})),i.d(t,"e",(function(){return l})),i.d(t,"g",(function(){return c})),i.d(t,"f",(function(){return d}));var n=function(){return{type:"@@cluster/checkHealth"}},r=function(e){return{type:"@@cluster/checkHealthSuccess",payload:e}},a=function(e){return{type:"@@cluster/fetchShardDetails",payload:e}},o=function(e){return{type:"@@cluster/fetchShardDetailsSuccess",payload:e}},s=function(){return{type:"@@cluster/unselectShardDetails"}},l=function(){return{type:"@@cluster/fetchShardOverview"}},c=function(){return{type:"@@cluster/rebalanceShards"}},d=function(e){return{type:"@@cluster/moveShard",payload:e}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i(33),r=i(5),a=i(6),o=i(4),s=i.n(o),l=i(19);function c(e,t){var i;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return d(e,t)}(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var h=function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=new(function(){function e(){Object(r.a)(this,e),this.todoList=new Map,this.repeatAll()}return Object(a.a)(e,[{key:"registerTask",value:function(e,t){this.todoList.set(e,t)}},{key:"stopTask",value:function(e){this.todoList.delete(e)}},{key:"repeatAll",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,i,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.todoList.size>0){t=c(this.todoList);try{for(t.s();!(i=t.n()).done;)r=i.value,a=Object(n.a)(r,2),a[1].execute()}catch(o){t.e(o)}finally{t.f()}}return e.next=4,h(1e4);case 4:e.next=0;break;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}())},function(e,t,i){"use strict";var n=i(24),r=i(14),a=i(33),o={shortToServer:new Map,serverToShort:new Map,selected:"",shardDistribution:{}},s=function(e){for(var t=new Map,i=new Map,n=0,r=Object.entries(e);n<r.length;n++){var o=r[n],s=Object(a.a)(o,2),l=s[0],c=s[1];c.hasOwnProperty("ShortName")&&(t.set(l,c.ShortName),i.set(c.ShortName,l))}return{serverToShort:t,shortToServer:i}},l=function(e,t){var i=e.selected,n=e.shardDistribution;return 1===Object.keys(t).length?t.hasOwnProperty(i)?Object(r.a)({},n,t):n:t},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@@cluster/checkHealthSuccess":var i=s(t.payload),n=i.serverToShort,a=i.shortToServer;return Object(r.a)({},e,{serverToShort:n,shortToServer:a});case"@@cluster/fetchShardDetails":return Object(r.a)({},e,{selected:t.payload});case"@@cluster/fetchShardDetailsSuccess":var c=l(e,t.payload);return Object(r.a)({},e,{shardDistribution:c});case"@@cluster/unselectShardDetails":return Object(r.a)({},e,{selected:""});default:return e}},d=i(4),h=i.n(d),u=i(19),p=i(5),f=i(6),g=i(193),m=i(8),v=function(e){console.log(e)},_=new(function(){function e(){var t;Object(p.a)(this,e);t=window.location.origin,this.db=new g.Database({url:t}),this.clusterApi=this.db.route("_admin/cluster")}return Object(f.a)(e,[{key:"fetchShardSpecifics",value:function(){var e=Object(u.a)(h.a.mark((function e(t){var i,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.clusterApi.put("collectionShardDistribution",{collection:t});case 2:i=e.sent,n=i.body,200===(r=i.statusCode)?k.dispatch(Object(m.d)(n.results)):v({message:"Collection ".concat(t," shard distribution resulted in HTTP Code: ").concat(r)});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchShardsOverview",value:function(){var e=Object(u.a)(h.a.mark((function e(){var t,i,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.clusterApi.get("shardDistribution");case 2:t=e.sent,i=t.body,200===(n=t.statusCode)?k.dispatch(Object(m.d)(i.results)):v({message:"Shard distribution overview resulted in HTTP Code: ".concat(n)});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"triggerRebalanceShards",value:function(){var e=Object(u.a)(h.a.mark((function e(){var t,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.clusterApi.post("rebalanceShards",{});case 2:t=e.sent,201!==(i=t.statusCode)&&v({message:"Failed to trigger shard rebalancing. HTTP Code: ".concat(i)});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"triggerMoveShard",value:function(){var e=Object(u.a)(h.a.mark((function e(t){var i,n,r,a,o,s,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.collection,n=t.shard,r=t.fromServer,a=t.toServer,e.next=3,this.clusterApi.post("moveShard",{database:this.db.name,collection:i,shard:n,fromServer:r,toServer:a});case 3:o=e.sent,s=o.body,202!==(l=o.statusCode)&&v({message:"Failed to trigger shard move. HTTP Code: ".concat(l,", response: ").concat(s)});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clusterCheckHealth",value:function(){var e=Object(u.a)(h.a.mark((function e(){var t,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.clusterApi.get("health");case 2:t=e.sent,i=t.body,200===t.statusCode&&k.dispatch(Object(m.b)(i.Health));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}()),b=new Proxy(_,{get:function(e,t){var i=e[t];return"function"===typeof i?Object(u.a)(h.a.mark((function t(){var n=arguments;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.apply(e,n);case 3:return t.abrupt("return",t.sent);case 6:t.prev=6,t.t0=t.catch(0),v(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])}))):i}}),w=function(e){return function(e){return function(t){switch(t.type){case"@@cluster/fetchShardDetails":b.fetchShardSpecifics(t.payload);break;case"@@cluster/fetchShardOverview":b.fetchShardsOverview();break;case"@@cluster/rebalanceShards":b.triggerRebalanceShards();break;case"@@cluster/moveShard":b.triggerMoveShard(t.payload)}return e(t)}}},y=function(e){return function(e){return function(t){return e(t)}}},x=Object(n.c)({cluster:c}),C={cluster:o},S=Object(n.a)(w,y);var T=Object(n.d)(x,C,S),k=t.a=T},,,,,,,,,,,,,,function(e,t,i){var n={"./applicationListView.ejs":364,"./applicationsView.ejs":365,"./applierView.ejs":366,"./arangoTabbar.ejs":367,"./arangoTable.ejs":368,"./clusterView.ejs":369,"./collectionsItemView.ejs":370,"./collectionsView.ejs":371,"./dashboardView.ejs":372,"./databaseView.ejs":373,"./dbSelectionView.ejs":374,"./documentView.ejs":375,"./documentsView.ejs":376,"./edgeDefinitionTable.ejs":377,"./editListEntryView.ejs":378,"./filterSelect.ejs":379,"./footerView.ejs":380,"./foxxActiveView.ejs":381,"./foxxEditView.ejs":382,"./foxxMountView.ejs":383,"./foxxRepoView.ejs":384,"./graphManagementView.ejs":385,"./graphSettingsView.ejs":386,"./graphViewGroupByEntry.ejs":387,"./graphViewer2.ejs":388,"./helpUsView.ejs":389,"./indicesView.ejs":390,"./lineChartDetailView.ejs":391,"./loadingTableView.ejs":392,"./loggerView.ejs":393,"./loggerViewEntries.ejs":394,"./loginView.ejs":395,"./modalApplicationMount.ejs":397,"./modalBase.ejs":399,"./modalCollectionInfo.ejs":400,"./modalDownloadFoxx.ejs":401,"./modalGraph.ejs":402,"./modalGraphTable.ejs":403,"./modalHotkeys.ejs":404,"./modalTable.ejs":405,"./modalTestResults.ejs":406,"./navigationView.ejs":407,"./nodeView.ejs":408,"./nodesView.ejs":409,"./notificationItem.ejs":410,"./notificationView.ejs":411,"./progressBase.ejs":412,"./queryManagementViewActive.ejs":413,"./queryManagementViewSlow.ejs":414,"./queryView.ejs":415,"./queryViewOutput.ejs":416,"./replicationView.ejs":417,"./scaleView.ejs":418,"./serviceDetailView.ejs":419,"./serviceInstallGitHubView.ejs":420,"./serviceInstallNewView.ejs":421,"./serviceInstallUploadView.ejs":422,"./serviceInstallUrlView.ejs":423,"./serviceInstallView.ejs":424,"./shardsView.ejs":425,"./spotlightView.ejs":426,"./statisticBarView.ejs":427,"./storeDetailView.ejs":431,"./subNavigationView.ejs":432,"./supportView.ejs":433,"./tableView.ejs":438,"./userBarView.ejs":439,"./userManagementView.ejs":440,"./userPermissionView.ejs":441,"./validationView.ejs":442,"./viewView.ejs":443,"./viewsView.ejs":444,"./warningList.ejs":445};function r(e){var t=a(e);return i(t)}function a(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=a,e.exports=r,r.id=54},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){!function(){"use strict";window.PaginationView=Backbone.View.extend({collection:null,paginationDiv:"",idPrefix:"",rerender:function(){},jumpTo:function(e){this.collection.setPage(e),this.rerender()},firstPage:function(){this.jumpTo(1)},lastPage:function(){this.jumpTo(this.collection.getLastPageNumber())},firstDocuments:function(){this.jumpTo(1)},lastDocuments:function(){this.jumpTo(this.collection.getLastPageNumber())},prevDocuments:function(){this.jumpTo(this.collection.getPage()-1)},nextDocuments:function(){this.jumpTo(this.collection.getPage()+1)},renderPagination:function(){$(this.paginationDiv).html("");var e=this,t=this.collection.getPage(),i=this.collection.getLastPageNumber(),n=$(this.paginationDiv),r={page:t,lastPage:i,click:function(t){var i=window.location.hash.split("/");"documents"===i[2]?(r.page=t,window.location.hash=i[0]+"/"+i[1]+"/"+i[2]+"/"+t):(e.jumpTo(t),r.page=t)}};n.html(""),n.pagination(r),$(this.paginationDiv).prepend('<ul class="pre-pagi"><li><a id="'+this.idPrefix+'_first" class="pagination-button"><span><i class="fa fa-angle-double-left"/></span></a></li></ul>'),$(this.paginationDiv).append('<ul class="las-pagi"><li><a id="'+this.idPrefix+'_last" class="pagination-button"><span><i class="fa fa-angle-double-right"/></span></a></li></ul>')}})}()},function(e,t){!function(){"use strict";window.ApplicationDetailView=Backbone.View.extend({el:"#content",divs:["#readme","#swagger","#app-info","#sideinformation","#information","#settings"],navs:["#service-info","#service-api","#service-readme","#service-settings"],template:templateEngine.createTemplate("serviceDetailView.ejs"),remove:function(){return this.$el.empty().off(),this.stopListening(),this.unbind(),delete this.el,this},events:{"click .open":"openApp","click .delete":"deleteApp","click #app-deps":"showDepsDialog","click #app-switch-mode":"toggleDevelopment","click #app-scripts [data-script]":"runScript","click #app-tests":"runTests","click #app-replace":"replaceApp","click #download-app":"downloadApp","click .subMenuEntries li":"changeSubview","click #jsonLink":"toggleSwagger","mouseenter #app-scripts":"showDropdown","mouseleave #app-scripts":"hideDropdown"},resize:function(e){e?$(".innerContent").css("height","auto"):($(".innerContent").height($(".centralRow").height()-150),$("#swagger iframe").height($(".centralRow").height()-150),$("#swagger #swaggerJsonContent").height($(".centralRow").height()-150))},toggleSwagger:function(){var e=function(e){$("#jsonLink").html("JSON"),this.jsonEditor.setValue(JSON.stringify(e,null,"\t"),1),$("#swaggerJsonContent").show(),$("#swagger iframe").hide()}.bind(this);if("Swagger"===$("#jsonLink").html()){var t=arangoHelper.databaseUrl("/_admin/aardvark/foxxes/docs/swagger.json?mount="+encodeURIComponent(this.model.get("mount")));arangoHelper.download(t,e)}else $("#swaggerJsonContent").hide(),$("#swagger iframe").show(),$("#jsonLink").html("Swagger")},changeSubview:function(e){if(_.each(this.navs,(function(e){$(e).removeClass("active")})),$(e.currentTarget).addClass("active"),_.each(this.divs,(function(e){$(".headerButtonBar").hide(),$(e).hide()})),"service-readme"===e.currentTarget.id)this.resize(!0),$("#readme").show();else if("service-api"===e.currentTarget.id){this.resize(),$("#swagger").show(),$("#swaggerIframe").remove();var t=window.location.pathname.split("/"),i=window.location.protocol+"//"+window.location.hostname+":"+window.location.port+"/"+t[1]+"/"+t[2]+"/_admin/aardvark/foxxes/docs/index.html?mount="+this.model.get("mount");$("<iframe/>",{id:"swaggerIframe",src:i}).appendTo("#swagger").on("load",(function(){$("#swagger").height($(".centralRow").height()-150)}))}else"service-info"===e.currentTarget.id?(this.resize(!0),this.render(),$("#information").show(),$("#sideinformation").show()):"service-settings"===e.currentTarget.id&&(this.resize(!0),this.showConfigDialog(),$(".headerButtonBar").show(),$("#settings").show())},downloadApp:function(){this.model.isSystem()||this.model.download()},replaceApp:function(){window.App.replaceApp=!0,window.App.replaceAppData={model:this.model,mount:this.model.get("mount")},window.App.navigate("services/install",{trigger:!0})},updateConfig:function(){this.model.getConfiguration(function(){$("#app-warning")[this.model.needsAttention()?"show":"hide"](),$("#app-warning-config")[this.model.needsConfiguration()?"show":"hide"](),this.model.needsConfiguration()?$("#app-config").addClass("error"):$("#app-config").removeClass("error")}.bind(this))},updateDeps:function(){this.model.getDependencies(function(){$("#app-warning")[this.model.needsAttention()?"show":"hide"](),$("#app-warning-deps")[this.model.hasUnconfiguredDependencies()?"show":"hide"](),this.model.hasUnconfiguredDependencies()?$("#app-deps").addClass("error"):$("#app-deps").removeClass("error")}.bind(this))},toggleDevelopment:function(){this.model.toggleDevelopment(!this.model.isDevelopment(),function(){this.model.isDevelopment()?($(".app-switch-mode").text("Set Production"),$("#app-development-indicator").css("display","inline"),$("#app-development-path").css("display","inline")):($(".app-switch-mode").text("Set Development"),$("#app-development-indicator").css("display","none"),$("#app-development-path").css("display","none"))}.bind(this))},runScript:function(e){e.preventDefault();var t=$(e.currentTarget).attr("data-script"),i=[window.modalView.createBlobEntry("app_script_arguments","Script arguments","",null,"optional",!1,[{rule:function(e){return e&&JSON.parse(e)},msg:"Must be well-formed JSON or empty"}])],n=[window.modalView.createSuccessButton("Run script",function(){var e=$("#app_script_arguments").val();e=e&&JSON.parse(e),window.modalView.hide(),this.model.runScript(t,e,(function(e,i){var n;n=e?"<p>The script failed with an error"+(e.statusCode?" (HTTP "+e.statusCode+")":"")+":</p><pre>"+e.message+"</pre>":i?"<p>Script results:</p><pre>"+arangoHelper.escapeHtml(i)+"</pre>":"<p>The script ran successfully.</p>",window.modalView.show("modalTable.ejs",'Result of script "'+t+'"',void 0,void 0,void 0,n)}))}.bind(this))];window.modalView.show("modalTable.ejs",'Run script "'+t+'" on "'+this.model.get("mount")+'"',n,i)},showSwagger:function(e){e.preventDefault(),this.render("swagger")},showReadme:function(e){e.preventDefault(),this.render("readme")},runTests:function(e){e.preventDefault();var t="<p><strong>WARNING:</strong> Running tests may result in destructive side-effects including data loss. Please make sure not to run tests on a production database.</p>";this.model.isDevelopment()&&(t+="<p><strong>WARNING:</strong> This app is running in <strong>development mode</strong>. If any of the tests access the app's HTTP API they may become non-deterministic.</p>");var i=[window.modalView.createSuccessButton("Run tests",function(){window.modalView.hide(),this.model.runTests({reporter:"suite"},(function(e,t){window.modalView.show("modalTestResults.ejs","Test results",void 0,void 0,void 0,e||t)}))}.bind(this))];window.modalView.show("modalTable.ejs",'Run tests for app "'+this.model.get("mount")+'"',i,void 0,void 0,t)},render:function(e){return this.resize(),this.model.fetchThumbnail(function(){var t=function(t,i){var n=this;t?arangoHelper.arangoError("DB","Could not get current database"):($(this.el).html(this.template.render({app:this.model,baseUrl:arangoHelper.databaseUrl("",i),mode:e,installed:!0})),n.jsonEditor=ace.edit("swaggerJsonEditor"),n.jsonEditor.setReadOnly(!0),n.jsonEditor.getSession().setMode("ace/mode/json"),$.ajax({type:"GET",url:this.appUrl(i),headers:{accept:"text/html,*/*;q=0.9"},success:function(){$(".open",n.el).prop("disabled",!1)}}),this.updateConfig(),this.updateDeps(),"swagger"===e&&$.ajax({url:"./foxxes/docs/swagger.json?mount="+encodeURIComponent(this.model.get("mount")),success:function(e){Object.keys(e.paths).length<1&&(n.render("readme"),$("#app-show-swagger").attr("disabled","true"))}})),this.breadcrumb()}.bind(this);arangoHelper.currentDatabase(t),_.isEmpty(this.model.get("config"))&&$("#service-settings").attr("disabled",!0)}.bind(this)),$(this.el)},breadcrumb:function(){var e="Service: "+this.model.get("name")+'<i class="fa fa-ellipsis-v" aria-hidden="true"></i>',t='<p class="mount"><span>Contributors:</span>';this.model.get("contributors")&&this.model.get("contributors").length>0?_.each(this.model.get("contributors"),(function(e){e.email?t+='<a href="mailto:'+e.email+'">'+(e.name||e.email)+"</a>":e.name&&(t+="<a>contributor.name</a>")})):t+="No contributors",t+="</p>",$(".information").append(t),this.model.get("author")&&$(".information").append('<p class="mount"><span>Author:</span>'+this.model.get("author")+"</p>"),this.model.get("mount")&&$(".information").append('<p class="mount"><span>Mount:</span>'+this.model.get("mount")+"</p>"),this.model.get("development")&&this.model.get("path")&&$(".information").append('<p class="path"><span>Path:</span>'+this.model.get("path")+"</p>"),$("#subNavigationBar .breadcrumb").html(e)},openApp:function(){var e=function(e,t){e?arangoHelper.arangoError("DB","Could not get current database"):window.open(this.appUrl(t),this.model.get("title")).focus()}.bind(this);arangoHelper.currentDatabase(e)},deleteApp:function(){var e=[window.modalView.createDeleteButton("Delete",function(){var e={teardown:$("#app_delete_run_teardown").is(":checked")};this.model.destroy(e,(function(e,t){e||!1!==t.error||(window.modalView.hide(),window.App.navigate("services",{trigger:!0}))}))}.bind(this))],t=[window.modalView.createCheckboxEntry("app_delete_run_teardown","Run teardown?",!0,"Should this app's teardown script be executed before removing the app?",!0)];window.modalView.show("modalTable.ejs",'Delete Foxx App mounted at "'+this.model.get("mount")+'"',e,t,void 0,"<p>Are you sure? There is no way back...</p>",!0)},appUrl:function(e){return arangoHelper.databaseUrl(this.model.get("mount"),e)},applyConfig:function(){var e={};_.each(this.model.get("config"),(function(t,i){var n=$("#app_config_"+CryptoJS.MD5(i).toString()),r=n.val();if("boolean"!==t.type&&"bool"!==t.type)return""===r&&t.hasOwnProperty("default")?(e[i]=t.default,void("json"===t.type&&(e[i]=JSON.stringify(t.default)))):void("number"===t.type?e[i]=parseFloat(r):"integer"===t.type||"int"===t.type?e[i]=parseInt(r,10):"json"===t.type?e[i]=r&&JSON.stringify(JSON.parse(r)):e[i]=r);e[i]=n.is(":checked")})),this.model.setConfiguration(e,function(){this.updateConfig(),arangoHelper.arangoNotification(this.model.get("name"),"Settings applied.")}.bind(this))},showConfigDialog:function(){if(_.isEmpty(this.model.get("config")))$("#settings .buttons").html($("#hidden_buttons").html());else{var e=_.map(this.model.get("config"),(function(e,t){var i=void 0===e.default?"":String(e.default),n=void 0===e.current?"":String(e.current),r="createTextEntry",a=!1,o=[];return"boolean"===e.type||"bool"===e.type?(r="createCheckboxEntry",e.default=e.default||!1,i=e.default||!1,n=e.current||!1):"json"===e.type?(r="createBlobEntry",i=void 0===e.default?"":JSON.stringify(e.default),n=void 0===e.current?"":JSON.stringify(e.current),o.push({rule:function(e){return e&&JSON.parse(e)},msg:"Must be well-formed JSON or empty."})):"integer"===e.type||"int"===e.type?o.push({rule:Joi.number().integer().optional().allow(""),msg:"Has to be an integer."}):"number"===e.type?o.push({rule:Joi.number().optional().allow(""),msg:"Has to be a number."}):("password"===e.type&&(r="createPasswordEntry"),o.push({rule:Joi.string().optional().allow(""),msg:"Has to be a string."})),void 0===e.default&&!1!==e.required&&(a=!0,o.unshift({rule:Joi.any().required(),msg:"This field is required."})),window.modalView[r]("app_config_"+CryptoJS.MD5(t).toString(),t,n,e.description,i,a,o)})),t=[window.modalView.createSuccessButton("Apply",this.applyConfig.bind(this))];window.modalView.show("modalTable.ejs","Configuration",t,e,null,null,null,null,null,"settings"),$(".modal-footer").prepend($("#hidden_buttons").html())}},applyDeps:function(){var e={};_.each(this.model.get("deps"),(function(t,i){var n=$("#app_deps_"+i);e[i]=window.arangoHelper.escapeHtml(n.val())})),this.model.setDependencies(e,function(){window.modalView.hide(),this.updateDeps()}.bind(this))},showDepsDialog:function(){if(!_.isEmpty(this.model.get("deps"))){var e=_.map(this.model.get("deps"),(function(e,t){var i=void 0===e.current?"":String(e.current),n=e.definition.name;"*"!==e.definition.version&&(n+="@"+e.definition.version);var r=[{rule:Joi.string().optional().allow(""),msg:"Has to be a string."}];return e.definition.required&&r.push({rule:Joi.string().required(),msg:"This value is required."}),window.modalView.createTextEntry("app_deps_"+t,e.title,i,n,"",e.definition.required,r)})),t=[window.modalView.createSuccessButton("Apply",this.applyDeps.bind(this))];window.modalView.show("modalTable.ejs","Dependencies",t,e)}},showDropdown:function(){_.isEmpty(this.model.get("scripts"))||$("#scripts_dropdown").show(200)},hideDropdown:function(){$("#scripts_dropdown").hide()}})}()},function(e,t){!function(){"use strict";window.ApplicationsView=Backbone.View.extend({el:"#content",readOnly:!1,template:templateEngine.createTemplate("applicationsView.ejs"),events:{"click #addApp":"createInstallModal","click #foxxToggle":"slideToggle","click #checkDevel":"toggleDevel","click #checkProduction":"toggleProduction","click #checkSystem":"toggleSystem"},fixCheckboxes:function(){this._showDevel?$("#checkDevel").attr("checked","checked"):$("#checkDevel").removeAttr("checked"),this._showSystem?$("#checkSystem").attr("checked","checked"):$("#checkSystem").removeAttr("checked"),this._showProd?$("#checkProduction").attr("checked","checked"):$("#checkProduction").removeAttr("checked"),$("#checkDevel").next().removeClass("fa fa-check-square-o fa-square-o").addClass("fa"),$("#checkSystem").next().removeClass("fa fa-check-square-o fa-square-o").addClass("fa"),$("#checkProduction").next().removeClass("fa fa-check-square-o fa-square-o").addClass("fa"),arangoHelper.setCheckboxStatus("#foxxDropdown")},toggleDevel:function(){var e=this;this._showDevel=!this._showDevel,_.each(this._installedSubViews,(function(t){t.toggle("devel",e._showDevel)})),this.fixCheckboxes()},toggleProduction:function(){var e=this;this._showProd=!this._showProd,_.each(this._installedSubViews,(function(t){t.toggle("production",e._showProd)})),this.fixCheckboxes()},toggleSystem:function(){this._showSystem=!this._showSystem;var e=this;_.each(this._installedSubViews,(function(t){t.toggle("system",e._showSystem)})),this.fixCheckboxes()},reload:function(){var e=this;_.each(this._installedSubViews,(function(e){e.undelegateEvents()})),this.collection.fetch({success:function(){e.createSubViews(),e.render()}})},createSubViews:function(){var e=this;this._installedSubViews={},e.collection.each((function(t){var i=new window.FoxxActiveView({model:t,appsView:e});e._installedSubViews[t.get("mount")]=i}))},initialize:function(){this._installedSubViews={},this._showDevel=!0,this._showProd=!0,this._showSystem=!1},slideToggle:function(){$("#foxxToggle").toggleClass("activated"),$("#foxxDropdownOut").slideToggle(200)},createInstallModal:function(e){this.readOnly||(e.preventDefault(),window.App.navigate("services/install",{trigger:!0}))},setReadOnly:function(){this.readOnly=!0,$("#addApp").parent().parent().addClass("disabled"),$("#addApp").addClass("disabled")},render:function(){this.collection.sort(),$(this.el).html(this.template.render({})),_.each(this._installedSubViews,(function(e){$("#installedList").append(e.render())})),this.delegateEvents(),$("#checkDevel").attr("checked",this._showDevel),$("#checkProduction").attr("checked",this._showProd),$("#checkSystem").attr("checked",this._showSystem),arangoHelper.setCheckboxStatus("#foxxDropdown");var e=this;return _.each(this._installedSubViews,(function(t){t.toggle("devel",e._showDevel),t.toggle("system",e._showSystem)})),arangoHelper.fixTooltips("icon_arangodb","left"),arangoHelper.checkDatabasePermissions(this.setReadOnly.bind(this)),this},installCallback:function(e){var t=this;if(!1===e.error)this.collection.fetch({success:function(){window.modalView.hide(),t.reload(),arangoHelper.arangoNotification("Services","Service "+e.name+" installed.")}});else{var i=e;switch(e.hasOwnProperty("responseJSON")&&(i=e.responseJSON),i.errorNum){case 1752:arangoHelper.arangoError("Services","Unable to download application from the given repository.");break;default:arangoHelper.arangoError("Services",i.errorNum+". "+i.errorMessage)}}}})}()},function(e,t){!function(){"use strict";window.ApplierView=Backbone.View.extend({el:"#content",template:templateEngine.createTemplate("applierView.ejs"),endpoint:null,events:{},render:function(){this.getMode()},breadcrumb:function(e){var t=this;if(window.App.naviView){var i="Database";e&&(i=i+": "+e),$("#subNavigationBar .breadcrumb").html(i)}else window.setTimeout((function(){t.breadcrumb()}),100)},continueRender:function(){this.$el.html(this.template.render({}))},getApplierState:function(e,t){var i,n=this;i="_system"===this.database||t?this.endpoint+"/_api/replication/applier-state":this.endpoint+"/_db/"+this.database+"/_api/replication/applier-state",t?(i+="?global=true",n.breadcrumb("All databases")):n.breadcrumb(n.database),$.ajax({type:"GET",cache:!1,url:i,contentType:"application/json",success:function(e){n.$el.html(n.template.render({data:e}))},error:function(){arangoHelper.arangoError("Replication","Could not fetch the applier state of: "+e)}})},getMode:function(e){var t=this;$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_admin/aardvark/replication/mode"),contentType:"application/json",success:function(e){3===e.mode||2===e.mode?t.getApplierState(this.endpoint,!0):t.getApplierState(this.endpoint,!1)},error:function(){arangoHelper.arangoError("Replication","Could not fetch the replication state.")}})}})}()},function(e,t){!function(){"use strict";window.ClusterView=Backbone.View.extend({el:"#content",template:templateEngine.createTemplate("clusterView.ejs"),events:{},coordshortSuccess:void 0,statsEnabled:!1,historyInit:!1,initDone:!1,interval:1e4,maxValues:100,knownServers:[],chartData:{},charts:{},nvcharts:[],startHistory:{},startHistoryAccumulated:{},initialize:function(e){var t=this;window.App.isCluster&&(this.dbServers=e.dbServers,this.coordinators=e.coordinators,this.updateServerTime(),window.setInterval((function(){if("#cluster"===window.location.hash||""===window.location.hash||"#"===window.location.hash){t.getCoordStatHistory((function(e){t.rerenderValues(e),t.rerenderGraphs(e)}))}else{t.getCoordStatHistory((function(e){t.rerenderGraphs(e,!0)}))}}),this.interval))},render:function(){var e=this;this.$el.html(this.template.render({})),this.initDone||(void 0!==this.coordinators.first()?this.getServerStatistics():this.waitForCoordinators(),this.initDone=!0),this.initGraphs();this.getCoordStatHistory((function(t){e.rerenderValues(t)}))},waitForCoordinators:function(){var e=this;window.setTimeout((function(){e.coordinators?e.getServerStatistics():e.waitForCoordinators()}),500)},updateServerTime:function(){this.serverTime=(new Date).getTime()},getServerStatistics:function(){var e=this;this.data=void 0;var t=this.coordinators.first();this.statCollectCoord=new window.ClusterStatisticsCollection([],{host:t.get("address")}),this.statCollectDBS=new window.ClusterStatisticsCollection([],{host:t.get("address")});var i=[];_.each(this.dbServers,(function(e){e.each((function(e){i.push(e)}))})),_.each(i,(function(i){if("ok"===i.get("status")){-1===e.knownServers.indexOf(i.id)&&e.knownServers.push(i.id);var n=new window.Statistics({name:i.id});n.url=t.get("protocol")+"://"+t.get("address")+"/_admin/clusterStatistics?DBserver="+i.get("name"),e.statCollectDBS.add(n)}})),this.coordinators.forEach((function(t){if("ok"===t.get("status")){-1===e.knownServers.indexOf(t.id)&&e.knownServers.push(t.id);var i=new window.Statistics({name:t.id});i.url=t.get("protocol")+"://"+t.get("address")+"/_admin/statistics",e.statCollectCoord.add(i)}}));e.getCoordStatHistory((function(t){e.rerenderValues(t),e.rerenderGraphs(t)})),e.renderNodes()},rerenderValues:function(e){this.renderNodes(),this.renderValue("#clusterConnections",Math.round(e.clientConnectionsCurrent)),this.renderValue("#clusterConnectionsAvg",Math.round(e.clientConnections15M));var t=e.physicalMemory,i=e.residentSizeCurrent;this.renderValue("#clusterRam",[i,t])},renderValue:function(e,t,i,n){if("number"===typeof t)$(e).html(t);else if($.isArray(t)){var r=t[0],a=1/(t[1]/r)*100;a>90?i=!0:a>70&&a<90&&(n=!0),isNaN(a)?$(e).html("n/a"):$(e).html(a.toFixed(1)+" %")}else"string"===typeof t&&$(e).html(t);i?($(e).addClass("negative"),$(e).removeClass("warning"),$(e).removeClass("positive")):n?($(e).addClass("warning"),$(e).removeClass("positive"),$(e).removeClass("negative")):($(e).addClass("positive"),$(e).removeClass("negative"),$(e).removeClass("warning"))},renderNodes:function(){var e=this,t=function(e){var t=0,i=0,n=0,r=0;_.each(e,(function(e){"Coordinator"===e.Role?(t++,"GOOD"!==e.Status&&i++):"DBServer"===e.Role&&(n++,"GOOD"!==e.Status&&r++)})),i>0?this.renderValue("#clusterCoordinators",t-i+"/"+t,!0):this.renderValue("#clusterCoordinators",t),r>0?this.renderValue("#clusterDBServers",n-r+"/"+n,!0):this.renderValue("#clusterDBServers",n)}.bind(this);$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_admin/cluster/health"),contentType:"application/json",processData:!1,async:!0,success:function(e){t(e.Health)},error:function(){e.renderValue("#clusterCoordinators","N/A",!0),e.renderValue("#clusterDBServers","N/A",!0)}})},initValues:function(){_.each(["#clusterNodes","#clusterRam","#clusterConnections","#clusterConnectionsAvg"],(function(e){$(e).html('<i class="fa fa-spin fa-circle-o-notch" style="color: rgba(0, 0, 0, 0.64);"></i>')}))},graphData:{data:{sent:[],received:[]},http:[],average:[]},checkArraySizes:function(){var e=this;_.each(e.chartsOptions,(function(t,i){_.each(t.options,(function(t,n){t.values.length>e.maxValues-1&&e.chartsOptions[i].options[n].values.shift()}))}))},formatDataForGraph:function(e){var t=this;t.historyInit?(t.checkArraySizes(),t.chartsOptions[0].options[0].values.push({x:e.times[e.times.length-1],y:e.bytesSentPerSecond[e.bytesSentPerSecond.length-1]}),t.chartsOptions[0].options[1].values.push({x:e.times[e.times.length-1],y:e.bytesReceivedPerSecond[e.bytesReceivedPerSecond.length-1]}),t.chartsOptions[1].options[0].values.push({x:e.times[e.times.length-1],y:t.calcTotalHttp(e.http,e.bytesSentPerSecond.length-1)}),t.chartsOptions[2].options[0].values.push({x:e.times[e.times.length-1],y:e.avgRequestTime[e.bytesSentPerSecond.length-1]})):(_.each(e.times,(function(i,n){t.chartsOptions[0].options[0].values.push({x:i,y:e.bytesSentPerSecond[n]}),t.chartsOptions[0].options[1].values.push({x:i,y:e.bytesReceivedPerSecond[n]}),t.chartsOptions[1].options[0].values.push({x:i,y:t.calcTotalHttp(e.http,n)}),t.chartsOptions[2].options[0].values.push({x:i,y:e.avgRequestTime[n]})})),t.historyInit=!0)},chartsOptions:[{id:"#clusterData",type:"bytes",count:2,options:[{area:!0,values:[],key:"Bytes out",color:"rgb(23,190,207)",strokeWidth:2,fillOpacity:.1},{area:!0,values:[],key:"Bytes in",color:"rgb(188, 189, 34)",strokeWidth:2,fillOpacity:.1}]},{id:"#clusterHttp",type:"number",options:[{area:!0,values:[],key:"Requests per second",color:"rgb(0, 166, 90)",fillOpacity:.1}]},{id:"#clusterAverage",data:[],type:"seconds",options:[{area:!0,values:[],key:"Seconds",color:"rgb(243, 156, 18)",fillOpacity:.1}]}],initGraphs:function(){var e=this;_.each(e.chartsOptions,(function(t){nv.addGraph((function(){var i;e.charts[t.id]=nv.models.stackedAreaChart().options({useInteractiveGuideline:!0,showControls:!1,noData:"No data...",duration:0}),e.charts[t.id].xAxis.axisLabel("").tickFormat((function(e){var t=new Date(1e3*e);return(t.getHours()<10?"0":"")+t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()+":"+(t.getSeconds()<10?"0":"")+t.getSeconds()})).staggerLabels(!1),e.charts[t.id].yAxis.axisLabel("").tickFormat((function(e){var i;return"bytes"===t.type?null===e?"N/A":(i=parseFloat(d3.format(".2f")(e)),prettyBytes(i)):"seconds"===t.type?null===e?"N/A":i=parseFloat(d3.format(".3f")(e)):"number"===t.type?null===e?"N/A":i=parseFloat(d3.format(".2f")(e)):void 0}));var n=e.returnGraphOptions(t.id);return n.length>0?_.each(n,(function(e,i){t.options[i].values=e})):t.options[0].values=[],i=t.options,e.chartData[t.id]=d3.select(t.id).append("svg").datum(i).transition().duration(300).call(e.charts[t.id]).each("start",(function(){window.setTimeout((function(){d3.selectAll(t.id+" *").each((function(){this.__transition__&&(this.__transition__.duration=0)}))}),0)})),nv.utils.windowResize(e.charts[t.id].update),e.nvcharts.push(e.charts[t.id]),e.charts[t.id]}))}))},returnGraphOptions:function(e){return"#clusterData"===e?[this.chartsOptions[0].options[0].values,this.chartsOptions[0].options[1].values]:"#clusterHttp"===e?[this.chartsOptions[1].options[0].values]:"#clusterAverage"===e?[this.chartsOptions[2].options[0].values]:[]},rerenderGraphs:function(e,t){if(this.statsEnabled){var i,n,r=this;this.formatDataForGraph(e),_.each(r.chartsOptions,(function(e){(n=r.returnGraphOptions(e.id)).length>0?_.each(n,(function(t,i){e.options[i].values=t})):e.options[0].values=[],i=e.options,void 0!==t&&!1!==t||i[0].values.length>0&&r.historyInit&&r.charts[e.id]&&r.charts[e.id].update()}))}},calcTotalHttp:function(e,t){var i=0;return _.each(e,(function(e){i+=e[t]})),i},getCoordStatHistory:function(e){var t=this;if(this.coordshortSuccess||void 0===this.coordshortSuccess||(Date.now()-this.coordshortTimestamp)/1e3>60){this.coordshortSuccess=!1;var i="statistics/coordshort";frontendConfig.react&&(i=arangoHelper.databaseUrl("/_admin/aardvark/"+i)),$.ajax({url:i,json:!0,type:"GET",success:function(i){t.coordshortTimestamp=Date.now(),t.coordshortSuccess=!0,t.statsEnabled=i.enabled,e(i.data)},error:function(){t.coordshortTimestamp=Date.now(),t.coordshortSuccess=!1}})}}})}()},function(e,t){!function(){"use strict";window.CollectionListItemView=Backbone.View.extend({tagName:"div",className:"tile pure-u-1-1 pure-u-sm-1-2 pure-u-md-1-3 pure-u-lg-1-4 pure-u-xl-1-6",template:templateEngine.createTemplate("collectionsItemView.ejs"),initialize:function(e){this.collectionsView=e.collectionsView},events:{"click .iconSet.icon_arangodb_settings2":"createEditPropertiesModal","click .pull-left":"noop","click .icon_arangodb_settings2":"editProperties","click .spanInfo":"showProperties",click:"selectCollection"},render:function(){return this.model.get("locked")||"corrupted"===this.model.get("status")?($(this.el).addClass("locked"),$(this.el).addClass(this.model.get("lockType"))):$(this.el).removeClass("locked"),"loading"!==this.model.get("status")&&"unloading"!==this.model.get("status")||$(this.el).addClass("locked"),$(this.el).html(this.template.render({model:this.model})),$(this.el).attr("id","collection_"+this.model.get("name")),this},editProperties:function(e){if(this.model.get("locked"))return 0;e.stopPropagation(),this.createEditPropertiesModal()},showProperties:function(e){if(this.model.get("locked"))return 0;e.stopPropagation(),this.createInfoModal()},selectCollection:function(e){return $(e.target).hasClass("disabled")||this.model.get("locked")||"loading"===this.model.get("status")||"corrupted"===this.model.get("status")?0:void("unloaded"===this.model.get("status")?this.loadCollection():window.App.navigate("collection/"+encodeURIComponent(this.model.get("name"))+"/documents/1",{trigger:!0}))},noop:function(e){e.stopPropagation()},unloadCollection:function(){var e=function(e){e?arangoHelper.arangoError("Collection error",this.model.get("name")+" could not be unloaded."):void 0===e?(this.model.set("status","unloading"),this.render()):"#collections"===window.location.hash?(this.model.set("status","unloaded"),this.render()):arangoHelper.arangoNotification("Collection "+this.model.get("name")+" unloaded.")}.bind(this);this.model.unloadCollection(e),window.modalView.hide()},loadCollection:function(){var e=function(e){e?arangoHelper.arangoError("Collection error",this.model.get("name")+" could not be loaded."):void 0===e?(this.model.set("status","loading"),this.render()):"#collections"===window.location.hash?(this.model.set("status","loaded"),this.render()):arangoHelper.arangoNotification("Collection "+this.model.get("name")+" loaded.")}.bind(this);this.model.loadCollection(e),window.modalView.hide()},truncateCollection:function(){this.model.truncateCollection(),window.modalView.hide()},warumupCollection:function(){this.model.warumupCollection(),window.modalView.hide()},deleteCollection:function(){this.model.destroy({error:function(e,t){arangoHelper.arangoError("Could not drop collection: "+t.responseJSON.errorMessage)},success:function(){window.modalView.hide()}}),this.collectionsView.render()},saveModifiedCollection:function(){var e=function(e,t){if(e)arangoHelper.arangoError("Error","Could not get coordinator info");else{var i;i=t?this.model.get("name"):$("#change-collection-name").val();var n=this.model.get("status");if("loaded"===n){var r=function(e){e?arangoHelper.arangoError("Collection error: "+e.responseText):(this.collectionsView.render(),window.modalView.hide())}.bind(this),a=function(e){if(e)arangoHelper.arangoError("Collection error: "+e.responseText);else{var t,i=$("#change-collection-sync").val();frontendConfig.isCluster&&(t=$("#change-replication-factor").val()),this.model.changeCollection(i,t,r)}}.bind(this);!1===frontendConfig.isCluster?this.model.renameCollection(i,a):a()}else if("unloaded"===n)if(this.model.get("name")!==i){var o=function(e,t){e?arangoHelper.arangoError("Collection error: "+t.responseText):(this.collectionsView.render(),window.modalView.hide())}.bind(this);!1===frontendConfig.isCluster?this.model.renameCollection(i,o):o()}else window.modalView.hide()}}.bind(this);window.isCoordinator(e)},createEditPropertiesModal:function(){var e=function(e,t){if(e)arangoHelper.arangoError("Error","Could not get coordinator info");else{var i=!1;"loaded"===this.model.get("status")&&(i=!0);var n=[],r=[];t||r.push(window.modalView.createTextEntry("change-collection-name","Name",this.model.get("name"),!1,"",!0,[{rule:Joi.string().regex(/^[a-zA-Z]/),msg:"Collection name must always start with a letter."},{rule:Joi.string().regex(/^[a-zA-Z0-9\-_]*$/),msg:'Only Symbols "_" and "-" are allowed.'},{rule:Joi.string().required(),msg:"No collection name given."}]));var a=function(){r.push(window.modalView.createReadOnlyEntry("change-collection-id","ID",this.model.get("id"),"")),r.push(window.modalView.createReadOnlyEntry("change-collection-type","Type",this.model.get("type"),"")),r.push(window.modalView.createReadOnlyEntry("change-collection-status","Status",this.model.get("status"),"")),n.push(window.modalView.createDeleteButton("Delete",this.deleteCollection.bind(this))),n.push(window.modalView.createDeleteButton("Truncate",this.truncateCollection.bind(this))),"rocksdb"===frontendConfig.engine&&n.push(window.modalView.createDeleteButton("Load Indexes into Memory",this.warumupCollection.bind(this))),i?n.push(window.modalView.createNotificationButton("Unload",this.unloadCollection.bind(this))):n.push(window.modalView.createNotificationButton("Load",this.loadCollection.bind(this))),n.push(window.modalView.createSuccessButton("Save",this.saveModifiedCollection.bind(this)));window.modalView.show(["modalTable.ejs","indicesView.ejs"],"Modify Collection",n,r,null,null,this.events,null,["General","Indexes"]),"loaded"===this.model.get("status")?this.getIndex():$($("#infoTab").children()[1]).remove()}.bind(this);if(i){this.model.getProperties((function(e,t){if(e)arangoHelper.arangoError("Collection","Could not fetch properties");else{var i=t.waitForSync;r.push(window.modalView.createSelectEntry("change-collection-sync","Wait for sync",i,"Synchronize to disk before returning from a create or update of a document.",[{value:!1,label:"No"},{value:!0,label:"Yes"}]))}a()}))}else a()}}.bind(this);window.isCoordinator(e)},bindIndexEvents:function(){this.unbindIndexEvents();var e=this;$("#indexEditView #addIndex").bind("click",(function(){e.toggleNewIndexView(),$("#cancelIndex").unbind("click"),$("#cancelIndex").bind("click",(function(){e.toggleNewIndexView()})),$("#createIndex").unbind("click"),$("#createIndex").bind("click",(function(){e.createIndex()}))})),$("#newIndexType").bind("change",(function(){e.selectIndexType()})),$(".deleteIndex").bind("click",(function(t){e.prepDeleteIndex(t)})),$("#infoTab a").bind("click",(function(e){if($("#indexDeleteModal").remove(),"Indexes"!==$(e.currentTarget).html()||$(e.currentTarget).parent().hasClass("active")||($("#newIndexView").hide(),$("#indexEditView").show(),$("#modal-dialog .modal-footer .button-danger").hide(),$("#modal-dialog .modal-footer .button-success").hide(),$("#modal-dialog .modal-footer .button-notification").hide()),"General"===$(e.currentTarget).html()&&!$(e.currentTarget).parent().hasClass("active")){$("#modal-dialog .modal-footer .button-danger").show(),$("#modal-dialog .modal-footer .button-success").show(),$("#modal-dialog .modal-footer .button-notification").show();var t=$(".index-button-bar2")[0];$("#cancelIndex").is(":visible")&&($("#cancelIndex").detach().appendTo(t),$("#createIndex").detach().appendTo(t))}}))},unbindIndexEvents:function(){$("#indexEditView #addIndex").unbind("click"),$("#newIndexType").unbind("change"),$("#infoTab a").unbind("click"),$(".deleteIndex").unbind("click")},createInfoModal:function(){var e=function(e,t,i){if(e)arangoHelper.arangoError("Figures","Could not get revision.");else{var n={figures:i,revision:t,model:this.model};window.modalView.show("modalCollectionInfo.ejs","Collection: "+(this.model.get("name").length>64?this.model.get("name").substr(0,64)+"...":this.model.get("name")),[],n)}}.bind(this),t=function(t,i){if(t)arangoHelper.arangoError("Figures","Could not get figures.");else{var n=i;this.model.getRevision(e,n)}}.bind(this);this.model.getFigures(t)},resetIndexForms:function(){$("#indexHeader input").val("").prop("checked",!1),$("#newIndexType").val("Geo").prop("selected",!0),this.selectIndexType()},createIndex:function(){var e,t,i,n=this,r={};switch($("#newIndexType").val()){case"Ttl":e=$("#newTtlFields").val();var a=parseInt($("#newTtlExpireAfter").val(),10)||0;r={type:"ttl",fields:n.stringToArray(e),expireAfter:a};break;case"Geo":e=$("#newGeoFields").val();var o=n.checkboxToValue("#newGeoJson"),s=n.checkboxToValue("#newGeoConstraint"),l=n.checkboxToValue("#newGeoIgnoreNull");r={type:"geo",fields:n.stringToArray(e),geoJson:o,constraint:s,ignoreNull:l};break;case"Hash":e=$("#newHashFields").val(),t=n.checkboxToValue("#newHashUnique"),i=n.checkboxToValue("#newHashSparse"),r={type:"hash",fields:n.stringToArray(e),unique:t,sparse:i};break;case"Fulltext":e=$("#newFulltextFields").val();var c=parseInt($("#newFulltextMinLength").val(),10)||0;r={type:"fulltext",fields:n.stringToArray(e),minLength:c};break;case"Skiplist":e=$("#newSkiplistFields").val(),t=n.checkboxToValue("#newSkiplistUnique"),i=n.checkboxToValue("#newSkiplistSparse"),r={type:"skiplist",fields:n.stringToArray(e),unique:t,sparse:i}}window.modalView.hide(),n.model.createIndex(r,(function(e,t){if(e)if(t){var i=JSON.parse(t.responseText);arangoHelper.arangoError("Document error",i.errorMessage)}else arangoHelper.arangoError("Document error","Could not create index.");n.refreshCollectionsView()}))},lastTarget:null,prepDeleteIndex:function(e){var t=this;this.lastTarget=e,this.lastId=$(this.lastTarget.currentTarget).parent().parent().first().children().first().text(),$("#modal-dialog .modal-footer").after('<div id="indexDeleteModal" style="display:block;" class="alert alert-error modal-delete-confirmation"><strong>Really delete?</strong><button id="indexConfirmDelete" class="button-danger pull-right modal-confirm-delete">Yes</button><button id="indexAbortDelete" class="button-neutral pull-right">No</button></div>'),$("#indexConfirmDelete").unbind("click"),$("#indexConfirmDelete").bind("click",(function(){$("#indexDeleteModal").remove(),t.deleteIndex()})),$("#indexAbortDelete").unbind("click"),$("#indexAbortDelete").bind("click",(function(){$("#indexDeleteModal").remove()}))},refreshCollectionsView:function(){window.App.arangoCollectionsStore.fetch({success:function(){window.App.collectionsView.render()}})},deleteIndex:function(){var e=function(e){e?(arangoHelper.arangoError("Could not delete index"),$("tr th:contains('"+this.lastId+"')").parent().children().last().html('<span class="deleteIndex icon_arangodb_roundminus" data-original-title="Delete index" title="Delete index"></span>'),this.model.set("locked",!1),this.refreshCollectionsView()):e||void 0===e||($("tr th:contains('"+this.lastId+"')").parent().remove(),this.model.set("locked",!1),this.refreshCollectionsView()),this.refreshCollectionsView()}.bind(this);this.model.set("locked",!0),this.model.deleteIndex(this.lastId,e),$("tr th:contains('"+this.lastId+"')").parent().children().last().html('<i class="fa fa-circle-o-notch fa-spin"></i>')},selectIndexType:function(){$(".newIndexClass").hide();var e=$("#newIndexType").val();$("#newIndexType"+e).show()},getIndex:function(){var e=function(e,t){e?window.arangoHelper.arangoError("Index",t.errorMessage):this.renderIndex(t)}.bind(this);this.model.getIndex(e)},renderIndex:function(e){this.index=e;var t="collectionInfoTh modal-text";if(this.index){var i="",n="";_.each(this.index.indexes,(function(e){n="primary"===e.type||"edge"===e.type?'<span class="icon_arangodb_locked" data-original-title="No action"></span>':'<span class="deleteIndex icon_arangodb_roundminus" data-original-title="Delete index" title="Delete index"></span>',void 0!==e.fields&&(i=e.fields.join(", "));var r=e.id.indexOf("/"),a=e.id.substr(r+1,e.id.length),o=e.hasOwnProperty("selectivityEstimate")?(100*e.selectivityEstimate).toFixed(2)+"%":"n/a",s=e.hasOwnProperty("sparse")?e.sparse:"n/a";$("#collectionEditIndexTable").append("<tr><th class="+JSON.stringify(t)+">"+a+"</th><th class="+JSON.stringify(t)+">"+e.type+"</th><th class="+JSON.stringify(t)+">"+e.unique+"</th><th class="+JSON.stringify(t)+">"+s+"</th><th class="+JSON.stringify(t)+">"+o+"</th><th class="+JSON.stringify(t)+">"+i+"</th><th class="+JSON.stringify(t)+">"+n+"</th></tr>")}))}this.bindIndexEvents()},toggleNewIndexView:function(){var e=$(".index-button-bar2")[0];$("#indexEditView").is(":visible")?($("#indexEditView").hide(),$("#newIndexView").show(),$("#cancelIndex").detach().appendTo("#modal-dialog .modal-footer"),$("#createIndex").detach().appendTo("#modal-dialog .modal-footer")):($("#indexEditView").show(),$("#newIndexView").hide(),$("#cancelIndex").detach().appendTo(e),$("#createIndex").detach().appendTo(e)),arangoHelper.fixTooltips(".icon_arangodb, .arangoicon","right"),this.resetIndexForms()},stringToArray:function(e){var t=[];return e.split(",").forEach((function(e){""!==(e=e.replace(/(^\s+|\s+$)/g,""))&&t.push(e)})),t},checkboxToValue:function(e){return $(e).prop("checked")}})}()},function(e,t){!function(){"use strict";window.CollectionsView=Backbone.View.extend({el:"#content",el2:"#collectionsThumbnailsIn",readOnly:!1,defaultReplicationFactor:0,minReplicationFactor:0,maxReplicationFactor:0,maxNumberOfShards:0,searchTimeout:null,refreshRate:1e4,template:templateEngine.createTemplate("collectionsView.ejs"),remove:function(){return this.$el.empty().off(),this.stopListening(),this.unbind(),delete this.el,this},refetchCollections:function(){var e=this;this.collection.fetch({cache:!1,success:function(){e.checkLockedCollections()}})},checkLockedCollections:function(){var e=function(e,t){var i=this;e||(this.collection.each((function(e){e.set("locked",!1)})),_.each(t,(function(e){var t=i.collection.findWhere({id:e.collection});t.set("locked",!0),t.set("lockType",e.type),t.set("desc",e.desc)})),this.collection.each((function(e){e.get("locked")||($("#collection_"+e.get("name")).find(".corneredBadge").removeClass("loaded unloaded"),$("#collection_"+e.get("name")+" .corneredBadge").text(e.get("status")),$("#collection_"+e.get("name")+" .corneredBadge").addClass(e.get("status"))),e.get("locked")||"loading"===e.get("status")?($("#collection_"+e.get("name")).addClass("locked"),e.get("locked")?($("#collection_"+e.get("name")).find(".corneredBadge").removeClass("loaded unloaded"),$("#collection_"+e.get("name")).find(".corneredBadge").addClass("inProgress"),$("#collection_"+e.get("name")+" .corneredBadge").text(e.get("desc"))):$("#collection_"+e.get("name")+" .corneredBadge").text(e.get("status"))):($("#collection_"+e.get("name")).removeClass("locked"),$("#collection_"+e.get("name")+" .corneredBadge").text(e.get("status")),$("#collection_"+e.get("name")+" .corneredBadge").hasClass("inProgress")&&($("#collection_"+e.get("name")+" .corneredBadge").text(e.get("status")),$("#collection_"+e.get("name")+" .corneredBadge").removeClass("inProgress"),$("#collection_"+e.get("name")+" .corneredBadge").addClass("loaded")),"unloaded"===e.get("status")&&$("#collection_"+e.get("name")+" .icon_arangodb_info").addClass("disabled"))})))}.bind(this);frontendConfig.ldapEnabled||window.arangoHelper.syncAndReturnUnfinishedAardvarkJobs("index",e)},initialize:function(){var e=this;this.defaultReplicationFactor=frontendConfig.defaultReplicationFactor,this.minReplicationFactor=frontendConfig.minReplicationFactor,this.maxReplicationFactor=frontendConfig.maxReplicationFactor,this.maxNumberOfShards=frontendConfig.maxNumberOfShards,window.setInterval((function(){"#collections"===window.location.hash&&window.VISIBLE&&e.refetchCollections()}),e.refreshRate)},render:function(){this.checkLockedCollections();var e=!1;$("#collectionsDropdown").is(":visible")&&(e=!0),$(this.el).html(this.template.render({})),this.setFilterValues(),!0===e&&$("#collectionsDropdown2").show();var t,i=this.collection.searchOptions;this.collection.getFiltered(i).forEach((function(e){$("#collectionsThumbnailsIn",this.el).append(new window.CollectionListItemView({model:e,collectionsView:this}).render().el)}),this),"none"===$("#collectionsDropdown2").css("display")?$("#collectionsToggle").removeClass("activated"):$("#collectionsToggle").addClass("activated"),arangoHelper.setCheckboxStatus("#collectionsDropdown");try{t=i.searchPhrase.length}catch(n){}return $("#searchInput").val(i.searchPhrase),$("#searchInput").focus(),$("#searchInput")[0].setSelectionRange(t,t),arangoHelper.fixTooltips(".icon_arangodb, .arangoicon","left"),arangoHelper.checkDatabasePermissions(this.setReadOnly.bind(this)),this},setReadOnly:function(){this.readOnly=!0,$("#createCollection").parent().parent().addClass("disabled")},events:{"click #createCollection":"createCollection","keydown #searchInput":"restrictToSearchPhraseKey","change #searchInput":"restrictToSearchPhrase","click #searchSubmit":"restrictToSearchPhrase","click .checkSystemCollections":"checkSystem","click #checkLoaded":"checkLoaded","click #checkUnloaded":"checkUnloaded","click #checkDocument":"checkDocument","click #checkEdge":"checkEdge","click #sortName":"sortName","click #sortType":"sortType","click #sortOrder":"sortOrder","click #collectionsToggle":"toggleView","click .css-label":"checkBoxes"},updateCollectionsView:function(){var e=this;this.collection.fetch({cache:!1,success:function(){e.render()}})},toggleView:function(){$("#collectionsToggle").toggleClass("activated"),$("#collectionsDropdown2").slideToggle(200)},checkBoxes:function(e){var t=e.currentTarget.id;$("#"+t).click()},checkSystem:function(){var e=this.collection.searchOptions,t=e.includeSystem;e.includeSystem=!0===$(".checkSystemCollections").is(":checked"),t!==e.includeSystem&&this.render()},checkEdge:function(){var e=this.collection.searchOptions,t=e.includeEdge;e.includeEdge=!0===$("#checkEdge").is(":checked"),t!==e.includeEdge&&this.render()},checkDocument:function(){var e=this.collection.searchOptions,t=e.includeDocument;e.includeDocument=!0===$("#checkDocument").is(":checked"),t!==e.includeDocument&&this.render()},checkLoaded:function(){var e=this.collection.searchOptions,t=e.includeLoaded;e.includeLoaded=!0===$("#checkLoaded").is(":checked"),t!==e.includeLoaded&&this.render()},checkUnloaded:function(){var e=this.collection.searchOptions,t=e.includeUnloaded;e.includeUnloaded=!0===$("#checkUnloaded").is(":checked"),t!==e.includeUnloaded&&this.render()},sortName:function(){var e=this.collection.searchOptions,t=e.sortBy;e.sortBy=!0===$("#sortName").is(":checked")?"name":"type",t!==e.sortBy&&this.render()},sortType:function(){var e=this.collection.searchOptions,t=e.sortBy;e.sortBy=!0===$("#sortType").is(":checked")?"type":"name",t!==e.sortBy&&this.render()},sortOrder:function(){var e=this.collection.searchOptions,t=e.sortOrder;e.sortOrder=!0===$("#sortOrder").is(":checked")?-1:1,t!==e.sortOrder&&this.render()},setFilterValues:function(){var e=this.collection.searchOptions;$("#checkLoaded").attr("checked",e.includeLoaded),$("#checkUnloaded").attr("checked",e.includeUnloaded),$(".checkSystemCollections").attr("checked",e.includeSystem),$("#checkEdge").attr("checked",e.includeEdge),$("#checkDocument").attr("checked",e.includeDocument),$("#sortName").attr("checked","type"!==e.sortBy),$("#sortType").attr("checked","type"===e.sortBy),$("#sortOrder").attr("checked",1!==e.sortOrder)},search:function(){var e=this.collection.searchOptions,t=$("#searchInput").val();t!==e.searchPhrase&&(e.searchPhrase=t,this.render())},resetSearch:function(){this.searchTimeout&&(clearTimeout(this.searchTimeout),this.searchTimeout=null),this.collection.searchOptions.searchPhrase=null},restrictToSearchPhraseKey:function(){var e=this;this.resetSearch(),e.searchTimeout=setTimeout((function(){e.search()}),200)},restrictToSearchPhrase:function(){this.resetSearch(),this.search()},createCollection:function(e){if(!this.readOnly){e.preventDefault();var t=this;$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_api/engine"),contentType:"application/json",processData:!1,success:function(e){t.engine=e,t.createNewCollectionModal(e)},error:function(){arangoHelper.arangoError("Engine","Could not fetch ArangoDB Engine details.")}})}},submitCreateCollection:function(){var e=this,t=function(t,i){if(t)arangoHelper.arangoError("DB","Could not check coordinator state");else{var n=$("#new-collection-name").val(),r=$("#new-collection-size").val(),a=Number($("#new-replication-factor").val()),o=Number($("#new-write-concern").val()),s=$("#new-collection-type").val(),l=$("#new-collection-sync").val(),c=1,d=[],h="",u="";if(""===a&&(a=e.defaultReplicationFactor?e.defaultReplicationFactor:1),""===o&&(o=1),"true"===$("#is-satellite-collection").val()&&(a="satellite"),i){if(frontendConfig.isEnterprise&&""!==$("#smart-join-attribute").val()&&(h=$("#smart-join-attribute").val().trim()),frontendConfig.isEnterprise)try{u=$("#distribute-shards-like").val().trim()}catch(v){}try{c=$("#new-collection-shards").val()}catch(v){c=1}if(""===c&&(c=1),(c=parseInt(c,10))<1)return arangoHelper.arangoError("Number of shards has to be an integer value greater or equal 1"),0;0===(d=_.pluck($("#new-collection-shardKeys").select2("data"),"text")).length?d.push("_key"):_.each(d,(function(e,t){d[t]=arangoHelper.escapeHtml(e)}))}if("_"===n.substr(0,1))return arangoHelper.arangoError('No "_" allowed as first character!'),0;var p="true"===l;if(r>0)try{r=1024*JSON.parse(r)*1024}catch(b){return arangoHelper.arangoError("Please enter a valid number"),0}if(""===n)return arangoHelper.arangoError("No collection name entered!"),0;var f=function(e,t){if(e)try{t=JSON.parse(t.responseText),arangoHelper.arangoError("Error",t.errorMessage)}catch(i){}else"#collections"===window.location.hash&&this.updateCollectionsView(),arangoHelper.arangoNotification("Collection",'Collection "'+t.name+'" successfully created.')}.bind(this),g=!1;try{Number.parseInt(o)>Number.parseInt(a)&&(arangoHelper.arangoError("New Collection","Write concern is not allowed to be greater than replication factor"),g=!0)}catch(w){}var m={collName:n,wfs:p,isSystem:!1,collType:s,shards:c,shardKeys:d};""!==h&&(m.smartJoinAttribute=h),m.distributeShardsLike=u,""===u&&window.App.isCluster&&(m.replicationFactor="satellite"===a?a:Number(a),m.writeConcern=Number(o)),g||(this.collection.newCollection(m,f),window.modalView.hide(),arangoHelper.arangoNotification("Collection",'Collection "'+n+'" will be created.'))}}.bind(this);window.isCoordinator(t)},createNewCollectionModal:function(){var e=this;$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_api/database/current"),contentType:"application/json",processData:!1,success:function(t){e.createNewCollectionModalReal(t.result)},error:function(){arangoHelper.arangoError("Engine","Could not fetch default collection properties.")}})},createNewCollectionModalReal:function(e){var t=function(t,i){if(t)arangoHelper.arangoError("DB","Could not check coordinator state");else{var n=[],r=[],a={},o=[];if(r.push(window.modalView.createTextEntry("new-collection-name","Name","",!1,"",!0,[{rule:Joi.string().regex(/^[a-zA-Z]/),msg:"Collection name must always start with a letter."},{rule:Joi.string().regex(/^[a-zA-Z0-9\-_]*$/),msg:'Only symbols, "_" and "-" are allowed.'},{rule:Joi.string().required(),msg:"No collection name given."}])),r.push(window.modalView.createSelectEntry("new-collection-type","Type","","The type of the collection to create.",[{value:2,label:"Document"},{value:3,label:"Edge"}])),i)if("single"!==e.sharding&&!frontendConfig.forceOneShard?r.push(window.modalView.createTextEntry("new-collection-shards","Number of shards",1===this.maxNumberOfShards?String(this.maxNumberOfShards):0,"The number of shards to create. The maximum value is "+this.maxNumberOfShards+". You cannot change this afterwards.","",!0)):r.push(window.modalView.createReadOnlyEntry("new-collection-shards-readonly","Number of shards",1===this.maxNumberOfShards?String(this.maxNumberOfShards):1,"")),r.push(window.modalView.createSelect2Entry("new-collection-shardKeys","Shard keys","","The keys used to distribute documents on shards. Type the key and press return to add it.","_key",!1)),window.App.isCluster){var s=this.minReplicationFactor?this.minReplicationFactor:1,l=this.maxReplicationFactor?this.maxReplicationFactor:10,c="";e.replicationFactor&&((c=parseInt(e.replicationFactor))<s&&(c=s),c>l&&(c=l)),r.push(window.modalView.createTextEntry("new-replication-factor","Replication factor",String(c),"Numeric value. Must be between "+s+" and "+l+". Total number of copies of the data in the cluster","",!1,[{rule:Joi.string().allow("").optional().regex(/^[1-9][0-9]*$/),msg:"Must be a number between "+s+" and "+l+"."}]))}if(n.push(window.modalView.createSuccessButton("Save",this.submitCreateCollection.bind(this))),window.App.isCluster&&(frontendConfig.isEnterprise&&("single"===e.sharding||frontendConfig.forceOneShard||o.push(window.modalView.createTextEntry("distribute-shards-like","Distribute shards like","","Name of another collection that should be used as a prototype for sharding this collection.","",!1,[])),o.push(window.modalView.createSelectEntry("is-satellite-collection","SatelliteCollection","","Create SatelliteCollection? This will disable replication factor.",[{value:!1,label:"No"},{value:!0,label:"Yes"}])),o.push(window.modalView.createTextEntry("smart-join-attribute","SmartJoin attribute","","String attribute name. Can be left empty if SmartJoins are not used.","",!1,[]))),o.push(window.modalView.createTextEntry("new-write-concern","Write concern",e.writeConcern?e.writeConcern:"","Numeric value. Must be at least 1. Must be smaller or equal compared to the replication factor. Total number of copies of the data in the cluster that are required for each write operation. If we get below this value the collection will be read-only until enough copies are created.","",!1,[{rule:Joi.string().allow("").optional().regex(/^[1-9]*$/),msg:"Must be a number. Must be at least 1 and has to be smaller or equal compared to the replicationFactor."}]))),o.push(window.modalView.createSelectEntry("new-collection-sync","Wait for sync","","Synchronize to disk before returning from a create or update of a document.",[{value:!1,label:"No"},{value:!0,label:"Yes"}])),a.header="Advanced",a.content=o,window.modalView.show("modalTable.ejs","New Collection",n,r,a),$("#s2id_new-collection-shardKeys .select2-search-field input").on("focusout",(function(e){$(".select2-drop").is(":visible")&&($("#select2-search-field input").is(":focus")||window.setTimeout((function(){$(e.currentTarget).parent().parent().parent().select2("close")}),200))})),window.App.isCluster&&frontendConfig.isEnterprise){var d=["#new-replication-factor","#new-write-concern","#new-collection-shards","#smart-join-attribute"];$("#is-satellite-collection").on("change",(function(e){"true"===$("#is-satellite-collection").val()?(_.each(d,(function(e){$(e).prop("disabled",!0)})),$("#s2id_new-collection-shardKeys").select2("disable")):(_.each(d,(function(e){$(e).prop("disabled",!1)})),$("#s2id_new-collection-shardKeys").select2("enable")),_.each(d,(function(e){$(e).val("").focus().focusout()}))}))}}}.bind(this);window.isCoordinator(t)}})}()},function(e,t){!function(){"use strict";function e(e,t){return void 0!==e&&null!==e||(e=0),e.toFixed(t)}window.DashboardView=Backbone.View.extend({el:"#content",interval:1e4,defaultTimeFrame:12e5,reRender:!0,reRenderDistribution:!0,isVisible:!0,distributionCharts:{totalTimeDistribution:null,dataTransferDistribution:null},residentChart:null,history:{},graphs:{},events:{"click .subViewNavbar .subMenuEntry":"toggleViews"},tendencies:{asyncPerSecondCurrent:["asyncPerSecondCurrent","asyncPerSecondPercentChange"],syncPerSecondCurrent:["syncPerSecondCurrent","syncPerSecondPercentChange"],clientConnectionsCurrent:["clientConnectionsCurrent","clientConnectionsPercentChange"],clientConnectionsAverage:["clientConnections15M","clientConnections15MPercentChange"],numberOfThreadsCurrent:["numberOfThreadsCurrent","numberOfThreadsPercentChange"],numberOfThreadsAverage:["numberOfThreads15M","numberOfThreads15MPercentChange"],virtualSizeCurrent:["virtualSizeCurrent","virtualSizePercentChange"],virtualSizeAverage:["virtualSize15M","virtualSize15MPercentChange"]},barCharts:{totalTimeDistribution:["queueTimeDistributionPercent","requestTimeDistributionPercent"],dataTransferDistribution:["bytesSentDistributionPercent","bytesReceivedDistributionPercent"]},barChartsElementNames:{queueTimeDistributionPercent:"Queue",requestTimeDistributionPercent:"Computation",bytesSentDistributionPercent:"Bytes sent",bytesReceivedDistributionPercent:"Bytes received"},getDetailFigure:function(e){return $(e.currentTarget).attr("id").replace(/ChartButton/g,"")},showDetail:function(e){var t,i=this,n=this.getDetailFigure(e);t=this.dygraphConfig.getDetailChartConfig(n),this.getHistoryStatistics(n),this.detailGraphFigure=n,window.modalView.hideFooter=!0,window.modalView.hide(),window.modalView.show("modalGraph.ejs",t.header,void 0,void 0,void 0,void 0,this.events),window.modalView.hideFooter=!1,$("#modal-dialog").on("hidden",(function(){i.hidden()})),$("#modal-dialog").toggleClass("modal-chart-detail",!0),t.height=.7*$(window).height(),t.width=$(".modal-inner-detail").width(),t.labelsDiv=$(t.labelsDiv)[0],this.detailGraph=new Dygraph(document.getElementById("lineChartDetail"),this.history[this.server][n],t)},hidden:function(){this.detailGraph.destroy(),delete this.detailGraph,delete this.detailGraphFigure},getCurrentSize:function(e){return"#"!==e.substr(0,1)&&(e="#"+e),$(e).attr("style",""),{height:$(e).height(),width:$(e).width()}},prepareDygraphs:function(){var e,t=this;this.dygraphConfig.getDashBoardFigures().forEach((function(i){e=t.dygraphConfig.getDefaultConfig(i);var n=t.getCurrentSize(e.div);e.height=n.height,e.width=n.width,t.graphs[i]=new Dygraph(document.getElementById(e.div),t.history[t.server][i]||[],e)}))},initialize:function(e){this.options=e,this.dygraphConfig=e.dygraphConfig,this.d3NotInitialized=!0,this.events["click .dashboard-sub-bar-menu-sign"]=this.showDetail.bind(this),this.events["mousedown .dygraph-rangesel-zoomhandle"]=this.stopUpdating.bind(this),this.events["mouseup .dygraph-rangesel-zoomhandle"]=this.startUpdating.bind(this),void 0===e.serverToShow&&(e.serverToShow={}),void 0===e.serverToShow.target&&0===window.location.hash.indexOf("#node/")&&(e.serverToShow.target=window.location.hash.split("/")[1]),this.serverInfo=e.serverToShow,this.serverInfo?this.server=this.serverInfo.target:this.server="-local-",this.history[this.server]={}},toggleViews:function(e){var t=e.currentTarget.id.split("-")[0],i=this;_.each(["requests","system"],(function(e){t!==e?$("#"+e).hide():($("#"+e).show(),i.resize(),$(window).resize())})),$(".subMenuEntries").children().removeClass("active"),$("#"+t+"-statistics").addClass("active"),window.setTimeout((function(){i.resize(),$(window).resize()}),200)},updateCharts:function(){var e=this;this.detailGraph?this.updateLineChart(this.detailGraphFigure,!0):(this.prepareD3Charts(this.isUpdating),this.prepareResidentSize(this.isUpdating),this.updateTendencies(),Object.keys(this.graphs).forEach((function(t){e.updateLineChart(t,!1)})))},updateTendencies:function(){var e=this,t=this.tendencies,i="";Object.keys(t).forEach((function(t){var n="",r=0;e.history.hasOwnProperty(e.server)&&e.history[e.server].hasOwnProperty(t)&&(r=e.history[e.server][t][1]),r<0?i="#d05448":(i="#77DB99",n="+"),e.history.hasOwnProperty(e.server)&&e.history[e.server].hasOwnProperty(t)?$("#"+t).html(e.history[e.server][t][0]+'<br/><span class="dashboard-figurePer" style="color: '+i+';">'+n+r+"%</span>"):$("#"+t).html('<br/><span class="dashboard-figurePer" style="color: #000;"><p class="dataNotReadyYet">data not ready yet</p></span>')}))},updateDateWindow:function(e,t){var i=(new Date).getTime();return t&&e.dateWindow_?[e.dateWindow_[0],i-e.dateWindow_[1]-5*this.interval>0?e.dateWindow_[1]:i]:[i-this.defaultTimeFrame,i]},updateLineChart:function(e,t){var i=t?this.detailGraph:this.graphs[e],n={file:this.history[this.server][e],dateWindow:this.updateDateWindow(i,t)},r=0,a=[];_.each(n.file,(function(e){var t=e[0].getSeconds()-e[0].getSeconds()%10;n.file[r][0].setSeconds(t),a.push(n.file[r][0]),r++}));for(var o=new Date(Math.max.apply(null,a)),s=new Date(Math.min.apply(null,a)),l=new Date(s.getTime()),c=[],d=[];l<o;)l=new Date(l.setSeconds(l.getSeconds()+10)),d.push(l);_.each(d,(function(e){var t=!1;_.each(n.file,(function(i){Math.floor(e.getTime()/1e3)===Math.floor(i[0].getTime()/1e3)&&(t=!0)})),!1===t&&e<new Date&&c.push(e)})),_.each(c,(function(t){"systemUserTime"!==e&&"requests"!==e&&"pageFaults"!==e&&"dataTransfer"!==e||n.file.push([t,0,0]),"totalTime"===e&&n.file.push([t,0,0,0])})),void 0===n.file?($("#loadingScreen span").text("Statistics not ready yet. Waiting."),"#dashboard"!==window.location.hash&&""!==window.location.hash&&"#"!==window.location.hash||($("#loadingScreen").show(),$("#content").hide())):($("#content").show(),$("#loadingScreen").hide(),n.file.sort((function(e,t){return new Date(t[0])-new Date(e[0])})),i.updateOptions(n)),$(window).trigger("resize"),this.resize()},mergeDygraphHistory:function(e,t){var i,n=this;this.dygraphConfig.getDashBoardFigures(!0).forEach((function(r){if(n.dygraphConfig.mapStatToFigure[r]&&(n.history[n.server][r]||(n.history[n.server][r]=[]),i=[],n.dygraphConfig.mapStatToFigure[r].forEach((function(n){e[n]&&("times"===n?i.push(new Date(1e3*e[n][t])):i.push(e[n][t]))})),i.length>1)){var a=0,o=0;9===i.length&&(a+=i[1],a+=i[6],a+=i[7],a+=i[8],o+=i[2],o+=i[3],o+=i[4],o+=i[5],i=[i[0],a,o]),n.history[n.server][r].unshift(i)}}))},cutOffHistory:function(e,t){for(var i=this.history[this.server][e];0!==i.length&&!(i[i.length-1][0]>=t);)i.pop()},cutOffDygraphHistory:function(e){var t=this,i=new Date(e);this.dygraphConfig.getDashBoardFigures(!0).forEach((function(e){t.dygraphConfig.mapStatToFigure[e]&&t.history[t.server][e]&&t.cutOffHistory(e,i)}))},mergeHistory:function(t){var i,n=this;for(i=0;i<t.times.length;++i)this.mergeDygraphHistory(t,i);this.cutOffDygraphHistory((new Date).getTime()-this.defaultTimeFrame),Object.keys(this.tendencies).forEach((function(i){var r=1;"virtualSizeCurrent"===i||"virtualSizeAverage"===i?(t[n.tendencies[i][0]]/=1073741824,r=2):("clientConnectionsCurrent"===i||"numberOfThreadsCurrent"===i)&&(r=0),n.history[n.server][i]=[e(t[n.tendencies[i][0]],r),e(100*t[n.tendencies[i][1]],1)]})),Object.keys(this.barCharts).forEach((function(e){n.history[n.server][e]=n.mergeBarChartData(n.barCharts[e],t)})),n.history[n.server].physicalMemory=t.physicalMemory,n.history[n.server].residentSizeCurrent=t.residentSizeCurrent,n.history[n.server].residentSizePercent=t.residentSizePercent,n.history[n.server].residentSizeChart=[{key:"",color:this.dygraphConfig.colors[1],values:[{label:"used",value:100*t.residentSizePercent}]},{key:"",color:this.dygraphConfig.colors[2],values:[{label:"used",value:100-100*t.residentSizePercent}]}],this.nextStart=t.nextStart},mergeBarChartData:function(e,t){var i,n={key:this.barChartsElementNames[e[0]],color:this.dygraphConfig.colors[1],values:[]},r={key:this.barChartsElementNames[e[1]],color:this.dygraphConfig.colors[2],values:[]};for(i=t[e[0]].values.length-1;i>=0;--i)n.values.push({label:this.getLabel(t[e[0]].cuts,i),value:t[e[0]].values[i]}),r.values.push({label:this.getLabel(t[e[1]].cuts,i),value:t[e[1]].values[i]});return[n,r]},getLabel:function(e,t){return e[t]?0===t?"0 - "+e[t]:e[t-1]+" - "+e[t]:">"+e[t-1]},checkState:function(){"#dashboard"===window.location.hash||"#node"===window.location.hash.substr(0,5)?this.isVisible=!0:(this.residentChart=null,this.isVisible=!1,this.reRender=!0,this.reRenderDistribution=!1)},renderStatisticBox:function(e,t,i,n){if($("#node-info #nodeattribute-"+e).length)$("#node-info #nodeattribute-"+e).html(t);else{var r="";r+=6===n?'<div class="pure-u-1-2 pure-u-md-1-3 pure-u-lg-1-6" style="background-color: #fff">':'<div class="pure-u-1-2 pure-u-md-1-4" style="background-color: #fff">',r+='<div class="valueWrapper">',r+=i?'<div id="nodeattribute-'+e+'" class="value tippy" title="'+t+'">'+t+"</div>":'<div id="nodeattribute-'+e+'" class="value">'+t+"</div>",r+='<div class="graphLabel">'+e+"</div>",r+="</div>",r+="</div>",$("#node-info").append(r)}},getNodeInfo:function(){var e=this;frontendConfig.isCluster?(this.serverInfo.isDBServer?this.renderStatisticBox("Role","DBServer",void 0,6):this.renderStatisticBox("Role","Coordinator",void 0,6),this.renderStatisticBox("Host",this.serverInfo.raw,this.serverInfo.raw,6),$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_admin/clusterNodeVersion?ServerID="+this.serverInfo.target),contentType:"application/json",processData:!1,success:function(t){e.renderStatisticBox("Version",frontendConfig.version.version,void 0,6),e.renderStatisticBox("Edition",frontendConfig.version.license,void 0,6)},error:function(t){e.renderStatisticBox("Version","Error"),e.renderStatisticBox("Edition","Error")}}),$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_admin/clusterNodeEngine?ServerID="+this.serverInfo.target),contentType:"application/json",processData:!1,success:function(t){e.renderStatisticBox("Engine",t.name,void 0,6)},error:function(t){e.renderStatisticBox("Engine","Error",void 0,6)}}),$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_admin/clusterNodeStats?ServerID="+this.serverInfo.target),contentType:"application/json",processData:!1,success:function(t){e.renderStatisticBox("Uptime",moment.duration(t.server.uptime,"seconds").humanize(),void 0,6)},error:function(t){e.renderStatisticBox("Uptime","Error",void 0,6)}})):(this.renderStatisticBox("Version",frontendConfig.version.version),this.renderStatisticBox("Edition",frontendConfig.version.license),this.renderStatisticBox("Engine",frontendConfig.engine),$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_admin/statistics"),contentType:"application/json",processData:!1,success:function(t){e.renderStatisticBox("Uptime",moment.duration(t.server.uptime,"seconds").humanize())},error:function(){e.renderStatisticBox("Uptime","N/A")}})),arangoHelper.createTooltips()},getStatistics:function(e,t){var i=this;i.checkState();var n=arangoHelper.databaseUrl("/_admin/aardvark/statistics/short","_system"),r="?start=";i.nextStart?("number"===typeof i.nextStart&&(i.nextStart=Number.parseInt(i.nextStart)),r+=i.nextStart):r+=Number.parseInt(((new Date).getTime()-i.defaultTimeFrame)/1e3),"-local-"!==i.server&&(i.serverInfo.target&&(r+="&DBserver="+encodeURIComponent(i.serverInfo.target)),i.history.hasOwnProperty(i.server)||(i.history[i.server]={})),$.ajax({url:n+r,xhrFields:{withCredentials:!0},crossDomain:!0,async:!0,success:function(n){n.times.length>0&&(i.isUpdating=!0,i.mergeHistory(n)),!1!==i.isUpdating&&(e&&e(n.enabled,t),i.updateCharts())},error:function(e){arangoHelper.arangoError("Statistics","stat fetch req error:"+JSON.stringify(e))}})},getHistoryStatistics:function(e){var t=this,i="statistics/long",n="?filter="+this.dygraphConfig.mapStatToFigure[e].join();"-local-"!==t.server&&(i=t.server.endpoint+arangoHelper.databaseUrl("/_admin/aardvark/statistics/cluster"),n+="&type=long&DBserver="+encodeURIComponent(t.server.target),t.history.hasOwnProperty(t.server)||(t.history[t.server]={}));var r=window.location.href.split("/"),a=r[0]+"//"+r[2]+"/"+r[3]+"/_system/"+r[5]+"/"+r[6]+"/";$.ajax({url:a+i+n,async:!0,success:function(i){var n;for(t.history[t.server][e]=[],n=0;n<i.times.length;++n)t.mergeDygraphHistory(i,n)}})},addEmptyDataLabels:function(){0===$(".dataNotReadyYet").length&&($("#dataTransferDistribution").prepend('<p class="dataNotReadyYet"> data not ready yet </p>'),$("#totalTimeDistribution").prepend('<p class="dataNotReadyYet"> data not ready yet </p>'),$(".dashboard-bar-chart-title").append('<p class="dataNotReadyYet"> data not ready yet </p>'))},removeEmptyDataLabels:function(){$(".dataNotReadyYet").remove()},prepareResidentSize:function(t){var i=this,n=this.getCurrentSize("#residentSizeChartContainer"),r=i.history[i.server].residentSizeCurrent/1024/1024,a="";a=r<1025?e(r,2)+" MB":e(r/1024,2)+" GB";var o,s=e(100*i.history[i.server].residentSizePercent,2);if(i.history[i.server].physicalMemory)if(this.removeEmptyDataLabels(),o=[prettyBytes(i.history[i.server].physicalMemory)],void 0!==i.history[i.server].residentSizeChart)if(this.removeEmptyDataLabels(),i.reRender&&i.isVisible){var l={top:($("#residentSizeChartContainer").outerHeight()-$("#residentSizeChartContainer").height())/2,right:1,bottom:($("#residentSizeChartContainer").outerHeight()-$("#residentSizeChartContainer").height())/2,left:1};Number.isNaN(l.top)&&(l.top=1),Number.isNaN(l.bottom)&&(l.bottom=1),nv.addGraph((function(){return i.residentChart=nv.models.multiBarHorizontalChart().x((function(e){return e.label})).y((function(e){return e.value})).width(n.width).height(n.height).margin(l).showValues(!1).showYAxis(!1).showXAxis(!1).showLegend(!1).showControls(!1).stacked(!0),i.residentChart.yAxis.tickFormat((function(e){return e+"%"})).showMaxMin(!1),i.residentChart.xAxis.showMaxMin(!1),d3.select("#residentSizeChart svg").datum(i.history[i.server].residentSizeChart).call(i.residentChart),d3.select("#residentSizeChart svg").select(".nv-zeroLine").remove(),t&&(d3.select("#residentSizeChart svg").select("#total").remove(),d3.select("#residentSizeChart svg").select("#percentage").remove()),d3.select(".dashboard-bar-chart-title .percentage").html(a+" ("+s+" %)"),d3.select(".dashboard-bar-chart-title .absolut").html(o[0]),nv.utils.windowResize(i.residentChart.update),i.residentChart}),(function(){d3.selectAll("#residentSizeChart .nv-bar").on("click",(function(){}))})),i.reRender=!1}else i.residentChart&&i.isVisible&&(i.residentChart.width(n.width),i.residentChart.height(n.height),d3.select(".dashboard-bar-chart-title .percentage").html(a+" ("+s+" %)"),d3.select(".dashboard-bar-chart-title .absolut").html(o[0]),d3.select("#residentSizeChart svg").datum(i.history[i.server].residentSizeChart).call(i.residentChart),nv.utils.windowResize(i.residentChart.update));else this.addEmptyDataLabels();else this.addEmptyDataLabels()},prepareD3Charts:function(t){var i=this;this.d3NotInitialized&&(!1,this.d3NotInitialized=!1),_.each(Object.keys({totalTimeDistribution:["queueTimeDistributionPercent","requestTimeDistributionPercent"],dataTransferDistribution:["bytesSentDistributionPercent","bytesReceivedDistributionPercent"]}),(function(t){var n=i.getCurrentSize("#"+t+"Container .dashboard-interior-chart"),r="#"+t+"Container svg";void 0===i.history[i.server].residentSizeChart?i.addEmptyDataLabels():i.removeEmptyDataLabels(),i.reRenderDistribution&&i.isVisible?($("#"+t+"Container").append('<div class="dashboard-legend-inner"><span style="color: rgb(238, 190, 77);"><div style="display: inline-block; position: relative; bottom: .5ex; padding-left: 1em; height: 1px; border-bottom: 2px solid rgb(238, 190, 77);"></div> Bytes sent</span><span style="color: rgb(142, 209, 220);"><div style="display: inline-block; position: relative; bottom: .5ex; padding-left: 1em; height: 1px; border-bottom: 2px solid rgb(142, 209, 220);"></div> Bytes received</span></div>'),nv.addGraph((function(){var a=[0,.25,.5,.75,1],o=75,s=23,l=6;return n.width<219?(a=[0,.5,1],o=72,s=21,l=5):n.width<299?(a=[0,.3334,.6667,1],o=77):n.width<379?o=87:n.width<459?o=95:n.width<539?o=100:n.width<619&&(o=105),i.distributionCharts[t]=nv.models.multiBarHorizontalChart().x((function(e){return e.label})).y((function(e){return e.value})).width(n.width).height(n.height).margin({top:5,right:20,bottom:s,left:o}).showValues(!1).showYAxis(!0).showXAxis(!0).showLegend(!1).showControls(!1).forceY([0,1]),i.distributionCharts[t].yAxis.showMaxMin(!1),d3.select(".nv-y.nv-axis").selectAll("text").attr("transform","translate (0, "+l+")"),i.distributionCharts[t].yAxis.tickValues(a).tickFormat((function(t){return e(100*t*100/100,0)+"%"})),i.history[i.server][t]?d3.select(r).datum(i.history[i.server][t]).call(i.distributionCharts[t]):d3.select(r).datum([]).call(i.distributionCharts[t]),nv.utils.windowResize(i.distributionCharts[t].update),i.distributionCharts[t]}),(function(){d3.selectAll(r+" .nv-bar").on("click",(function(){}))}))):i.distributionCharts[t]&&i.isVisible&&(i.distributionCharts[t].width(n.width),i.distributionCharts[t].height(n.height),i.history[i.server][t]?d3.select(r).datum(i.history[i.server][t]).call(i.distributionCharts[t]):d3.select(r).datum([]).call(i.distributionCharts[t]),nv.utils.windowResize(i.distributionCharts[t].update))})),i.reRenderDistribution&&i.isVisible&&(i.reRenderDistribution=!1)},stopUpdating:function(){this.isUpdating=!1},startUpdating:function(){var e=this;e.timer||(e.timer=window.setInterval((function(){window.App.isCluster?window.location.hash.indexOf(e.serverInfo.target)>-1&&e.getStatistics():e.getStatistics()}),e.interval))},clearInterval:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){this.timer&&clearInterval(this.timer)})),resize:function(){if(this.isUpdating){var e,t=this;_.each(this.graphs,(function(i){e=t.getCurrentSize(i.maindiv_.id),i.resize(e.width,e.height)})),this.detailGraph&&(e=this.getCurrentSize(this.detailGraph.maindiv_.id),this.detailGraph.resize(e.width,e.height)),this.prepareD3Charts(!0),this.prepareResidentSize(!0)}},template:templateEngine.createTemplate("dashboardView.ejs"),checkEnabledStatistics:function(){return!(!frontendConfig.statisticsEnabled||"_system"!==frontendConfig.db)||($(this.el).html(""),this.server?$(this.el).append('<div style="color: red">Server statistics ('+this.server+") are disabled.</div>"):$(this.el).append('<div style="color: red">Server statistics are disabled.</div>'),!1)},render:function(e){if(this.checkEnabledStatistics())if(void 0===this.serverInfo&&(this.serverInfo={isDBServer:!1}),!0!==this.serverInfo.isDBServer){this.delegateEvents(this.events);var t=function(e,t){t||($(this.el).html(this.template.render({hideStatistics:!1})),this.getNodeInfo()),this.prepareDygraphs(),this.isUpdating&&(this.prepareD3Charts(),this.prepareResidentSize(),this.updateTendencies(),$(window).trigger("resize")),this.startUpdating(),$(window).resize()}.bind(this),i=function(){$(this.el).html(""),$(".contentDiv").remove(),$(".headerBar").remove(),$(".dashboard-headerbar").remove(),$(".dashboard-row").remove(),$(this.el).append('<div style="color: red">You do not have permission to view this page.</div>'),$(this.el).append("<div style=\"color: red\">You can switch to '_system' to see the dashboard.</div>")}.bind(this);if("_system"!==frontendConfig.db)return void i();var n=function(n,r){n||(r?this.getStatistics(t,e):i())}.bind(this);void 0===window.App.currentDB.get("name")?window.setTimeout(function(){"_system"===window.App.currentDB.get("name")?this.options.database.hasSystemAccess(n):i()}.bind(this),300):this.options.database.hasSystemAccess(n)}else $(this.el).html(this.template.render({hideStatistics:!0})),frontendConfig.isCluster?($("#requests-statistics").remove(),$("#system-statistics").remove()):$("#subNavigationBar .breadcrumb").html(""),this.getNodeInfo()}})}()},function(e,t){!function(){"use strict";window.DatabaseView=Backbone.View.extend({users:null,el:"#content",readOnly:!1,template:templateEngine.createTemplate("databaseView.ejs"),dropdownVisible:!1,currentDB:"",events:{"click #createDatabase":"createDatabase","click #submitCreateDatabase":"submitCreateDatabase","click .editDatabase":"editDatabase","click #userManagementView .icon":"editDatabase","click #selectDatabase":"updateDatabase","click #submitDeleteDatabase":"submitDeleteDatabase","click .contentRowInactive a":"changeDatabase","keyup #databaseSearchInput":"search","click #databaseSearchSubmit":"search","click #databaseToggle":"toggleSettingsDropdown","click .css-label":"checkBoxes","click #dbSortDesc":"sorting"},sorting:function(){$("#dbSortDesc").is(":checked")?this.collection.setSortingDesc(!0):this.collection.setSortingDesc(!1),this.checkVisibility(),this.render()},initialize:function(){this.collection.fetch({async:!0,cache:!1})},checkBoxes:function(e){var t=e.currentTarget.id;$("#"+t).click()},setReadOnly:function(){$("#createDatabase").parent().parent().addClass("disabled")},render:function(){arangoHelper.checkDatabasePermissions(this.continueRender.bind(this),this.continueRender.bind(this))},continueRender:function(e){var t=this;e&&(this.readOnly=e);return this.collection.getCurrentDatabase((function(i,n){i?arangoHelper.arangoError("DB","Could not get current database properties"):(t.currentDB=n,t.collection.fetch({cache:!1,success:function(){t.collection.sort(),$(t.el).html(t.template.render({collection:t.collection,searchString:"",currentDB:t.currentDB,readOnly:e})),e&&t.setReadOnly(),!0===t.dropdownVisible&&($("#dbSortDesc").attr("checked",t.collection.sortOptions.desc),$("#databaseToggle").addClass("activated"),$("#databaseDropdown2").show()),arangoHelper.setCheckboxStatus("#databaseDropdown"),t.replaceSVGs()}}))})),this},checkVisibility:function(){$("#databaseDropdown").is(":visible")?this.dropdownVisible=!0:this.dropdownVisible=!1,arangoHelper.setCheckboxStatus("#databaseDropdown")},toggleSettingsDropdown:function(){var e=this;$("#dbSortDesc").attr("checked",this.collection.sortOptions.desc),$("#databaseToggle").toggleClass("activated"),$("#databaseDropdown2").slideToggle(200,(function(){e.checkVisibility()}))},selectedDatabase:function(){return $("#selectDatabases").val()},handleError:function(e,t){409===e.status?arangoHelper.arangoError("DB","Database "+t+" already exists."):400===e.status?arangoHelper.arangoError("DB","Invalid Parameters: "+e.responseJSON.errorMessage):403===e.status&&arangoHelper.arangoError("DB","Insufficient rights. Execute this from _system database")},validateDatabaseInfo:function(e,t){return""===t?(arangoHelper.arangoError("DB","You have to define an owner for the new database"),!1):""===e?(arangoHelper.arangoError("DB","You have to define a name for the new database"),!1):0===e.indexOf("_")?(arangoHelper.arangoError("DB ","Database name should not start with _"),!1):!!e.match(/^[a-zA-Z][a-zA-Z0-9_-]*$/)||(arangoHelper.arangoError("DB","Database name may only contain numbers, letters, _ and -"),!1)},createDatabase:function(e){e.preventDefault(),$("#createDatabase").parent().parent().hasClass("disabled")||this.createAddDatabaseModal()},switchDatabase:function(e){if(!$(e.target).parent().hasClass("iconSet")){var t=$(e.currentTarget).find("h5").text();if(""!==t){var i=this.collection.createDatabaseURL(t);window.location.replace(i)}}},submitCreateDatabase:function(){var e=this,t=$("#newDatabaseName").val(),i=$("#newUser").val(),n=$("#newSharding").val();frontendConfig.forceOneShard&&(n="single");var r=$("#new-replication-factor").val(),a=$("#new-write-concern").val(),o={name:t,options:{sharding:n,replicationFactor:Number(r),writeConcern:Number(a)},users:[{username:i}]};this.collection.create(o,{error:function(i,n){e.handleError(n,t)},success:function(t){"#databases"===window.location.hash&&e.updateDatabases(),arangoHelper.arangoNotification("Database "+t.get("name")+" created.")}}),arangoHelper.arangoNotification("Database creation in progress."),window.modalView.hide()},submitDeleteDatabase:function(e){this.collection.where({name:e})[0].destroy({wait:!0,url:arangoHelper.databaseUrl("/_api/database/"+e)}),this.updateDatabases(),window.App.naviView.dbSelectionView.render($("#dbSelect")),window.modalView.hide()},changeDatabase:function(e){var t=$(e.currentTarget).attr("id"),i=this.collection.createDatabaseURL(t);window.location.replace(i)},updateDatabases:function(){var e=this;this.collection.fetch({cache:!1,success:function(){e.render(),window.App.handleSelectDatabase()}})},editDatabase:function(e){var t=this.evaluateDatabaseName($(e.currentTarget).attr("id"),"_edit-database"),i=!0;t===this.currentDB&&(i=!1),this.createEditDatabaseModal(t,i)},search:function(){var e,t,i,n;e=$("#databaseSearchInput"),t=arangoHelper.escapeHtml($("#databaseSearchInput").val()),n=this.collection.filter((function(e){return-1!==e.get("name").indexOf(t)})),$(this.el).html(this.template.render({collection:n,searchString:t,currentDB:this.currentDB,readOnly:this.readOnly})),this.replaceSVGs(),i=(e=$("#databaseSearchInput")).val().length,e.focus(),e[0].setSelectionRange(i,i)},replaceSVGs:function(){$(".svgToReplace").each((function(){var e=$(this),t=e.attr("id"),i=e.attr("src");$.get(i,(function(i){var n=$(i).find("svg");n.attr("id",t).attr("class","tile-icon-svg").removeAttr("xmlns:a"),e.replaceWith(n)}),"xml")}))},remove:function(){return this.$el.empty().off(),this.stopListening(),this.unbind(),delete this.el,this},evaluateDatabaseName:function(e,t){var i=e.lastIndexOf(t);return e.substring(0,i)},createEditDatabaseModal:function(e,t){var i=[],n=[];n.push(window.modalView.createReadOnlyEntry("id_name","Name",e,"")),t?i.push(window.modalView.createDeleteButton("Delete",this.submitDeleteDatabase.bind(this,e))):i.push(window.modalView.createDisabledButton("Delete")),window.modalView.show("modalTable.ejs","Delete database",i,n)},createAddDatabaseModal:function(){var e=this;$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_admin/server/databaseDefaults"),contentType:"application/json",processData:!1,success:function(t){e.createAddDatabaseModalReal(t)},error:function(){arangoHelper.arangoError("Engine","Could not fetch ArangoDB database defaults.")}})},createAddDatabaseModalReal:function(e){var t=e,i=[],n=[];if(n.push(window.modalView.createTextEntry("newDatabaseName","Name","",!1,"Database Name",!0,[{rule:Joi.string().regex(/^[a-zA-Z]/),msg:"Database name must start with a letter."},{rule:Joi.string().regex(/^[a-zA-Z0-9\-_]*$/),msg:'Only Symbols "_" and "-" are allowed.'},{rule:Joi.string().required(),msg:"No database name given."}])),window.App.isCluster&&(n.push(window.modalView.createTextEntry("new-replication-factor","Replication factor",t.replicationFactor,"Numeric value. Must be at least 1. Total number of copies of the data in the cluster","Default replication factor",!1,[{rule:Joi.string().allow("").optional().regex(/^([1-9]|10)$/),msg:"Must be a number between 1 and 10."}])),n.push(window.modalView.createTextEntry("new-write-concern","Write concern",t.writeConcern,"Numeric value. Must be at least 1. Must be smaller or equal compared to the replication factor. Total number of copies of the data in the cluster that are required for each write operation. If we get below this value the collection will be read-only until enough copies are created.","Default write concern",!1,[{rule:Joi.string().allow("").optional().regex(/^([1-9]|10)$/),msg:"Must be a number between 1 and 10. Has to be smaller or equal compared to the replicationFactor."}]))),window.App.isCluster&&frontendConfig.isEnterprise&&!frontendConfig.forceOneShard){n.push(window.modalView.createSelectEntry("newSharding","Sharding","flexible","Selects the default sharding setup for new collections in this database. *flexible* means that shards of different collections by default will be randomly distributed to database servers. *single* means that collections by default will use the same sharding setup (number of shards and shard distribution) as one of the system collections.",[{value:"",label:"flexible"},{value:"single",label:"single"}]))}var r=[];window.App.userCollection.each((function(e){r.push({value:e.get("user"),label:e.get("user")})})),n.push(window.modalView.createSelectEntry("newUser","Username",null!==this.users?this.users.whoAmI():"root","Please define the owner of this database. This will be the only user having initial access to this database if authentication is turned on. Please note that if you specify a username different to your account you will not be able to access the database with your account after having creating it. Specifying a username is mandatory even with authentication turned off. If there is a failure you will be informed.",r)),i.push(window.modalView.createSuccessButton("Create",this.submitCreateDatabase.bind(this))),window.modalView.show("modalTable.ejs","Create Database",i,n),$("#useDefaultPassword").change((function(){"true"===$("#useDefaultPassword").val()?$("#row_newPassword").hide():$("#row_newPassword").show()})),$("#row_newPassword").hide()}})}()},function(e,t){!function(){"use strict";window.DBSelectionView=Backbone.View.extend({template:templateEngine.createTemplate("dbSelectionView.ejs"),events:{"click .dbSelectionLink":"changeDatabase"},initialize:function(e){this.current=e.current},changeDatabase:function(e){var t=$(e.currentTarget).closest(".dbSelectionLink.tab").attr("id"),i=this.collection.createDatabaseURL(t);window.location.replace(i)},render:function(e){var t=function(t,i){t?arangoHelper.arangoError("DB","Could not fetch databases"):(this.$el=e,this.$el.html(this.template.render({list:i,current:this.current.get("name")})),this.delegateEvents())}.bind(this);return this.collection.getDatabasesForUser(t),this.el}})}()},function(e,t){!function(){"use strict";var e=function(e){var t=e.split("/");return"collection/"+encodeURIComponent(t[0])+"/"+encodeURIComponent(t[1])};window.DocumentView=Backbone.View.extend({el:"#content",readOnly:!1,colid:0,docid:0,customView:!1,defaultMode:"tree",editFromActive:!1,editToActive:!1,template:templateEngine.createTemplate("documentView.ejs"),events:{"click #saveDocumentButton":"saveDocument","click #deleteDocumentButton":"deleteDocumentModal","click #confirmDeleteDocument":"deleteDocument","click #document-from":"navigateToDocument","click #document-to":"navigateToDocument","click #edit-from .fa-edit":"editFrom","click #edit-from .fa-check":"applyFrom","click #edit-from .fa-times":"abortFrom","click #edit-to .fa-edit":"editTo","click #edit-to .fa-check":"applyTo","click #edit-to .fa-times":"abortTo","keydown #documentEditor .ace_editor":"keyPress","keyup .jsoneditor .search input":"checkSearchBox","click #addDocument":"addDocument"},remove:function(){return this.$el.empty().off(),this.stopListening(),this.unbind(),delete this.el,this},checkSearchBox:function(e){""===$(e.currentTarget).val()&&this.editor.expandAll()},initialize:function(){var e=localStorage.getItem("JSONEditorMode");e&&(this.defaultMode=e)},addDocument:function(e){this.readOnly||window.App.documentsView.addDocumentModal(e)},storeMode:function(e){localStorage.setItem("JSONEditorMode",e),this.defaultMode=e,this.editor.setMode(this.defaultMode)},keyPress:function(e){(e.ctrlKey&&13===e.keyCode||e.metaKey&&13===e.keyCode)&&(e.preventDefault(),this.saveDocument())},editor:0,setType:function(){var e=this,t=function(t,i,n){t?e.renderNotFound(n):(this.type=n,this.breadcrumb(),this.fillInfo(),this.fillEditor(),arangoHelper.checkCollectionPermissions(this.colid,this.changeViewToReadOnly.bind(this)))}.bind(this);this.collection.getDocument(this.colid,this.docid,t)},renderNotFound:function(e,t){var i="Document not found",n="ID";t&&(i="Collection not found",n="name"),$(".document-info-div").remove(),$(".headerButton").remove(),$(".document-content-div").html('<div class="infoBox errorBox"><h4>Error</h4><p>'+i+". Requested "+n+' was: "'+arangoHelper.escapeHtml(e)+'".</p></div>')},deleteDocumentModal:function(){if(!this.readOnly){var e=[],t=[];t.push(window.modalView.createReadOnlyEntry("doc-delete-button","Confirm delete, document id is",this.type._id||this.docid,void 0,void 0,!1,/[<>&'"]/)),e.push(window.modalView.createDeleteButton("Delete",this.deleteDocument.bind(this))),window.modalView.show("modalTable.ejs","Delete Document",e,t)}},deleteDocument:function(){var e=function(){if(this.customView)this.customDeleteFunction&&this.customDeleteFunction();else{var e="collection/"+encodeURIComponent(this.colid)+"/documents/1";window.modalView.hide(),window.App.navigate(e,{trigger:!0})}}.bind(this);if(this.type._from&&this.type._to){this.collection.deleteEdge(this.colid,this.docid,(function(t){t?arangoHelper.arangoError("Edge error","Could not delete edge"):e()}))}else{this.collection.deleteDocument(this.colid,this.docid,(function(t){t?arangoHelper.arangoError("Error","Could not delete document"):e()}))}},navigateToDocument:function(e){if($(e.target).hasClass("unsaved"))this.editFromActive?arangoHelper.arangoWarning("Document","Unsaved _from value found. Save changes first."):arangoHelper.arangoWarning("Document","Unsaved _to value found. Save changes first.");else{var t=$(e.target).attr("documentLink"),i=(t.split("%").length-1)%3;decodeURIComponent(t)!==t&&0!==i&&(t=decodeURIComponent(t)),t&&window.App.navigate(t,{trigger:!0})}},editFrom:function(){this.editEdge("from")},applyFrom:function(){this.applyEdge("from")},abortFrom:function(){this.abortEdge("from")},editTo:function(){this.editEdge("to")},applyTo:function(){this.applyEdge("to")},abortTo:function(){this.abortEdge("to")},setEditMode:function(e,t){"from"===e?this.editFromActive=t:this.editToActive=t},toggleEditIcons:function(e,t){var i="#edit-"+e;t?($(i+" .fa-edit").show(),$(i+" .fa-check").hide(),$(i+" .fa-times").hide()):($(i+" .fa-edit").hide(),$(i+" .fa-check").show(),$(i+" .fa-times").show())},editEdge:function(e){this.setEditMode(e,!0),this.toggleEditIcons(e),this.addEdgeEditInputBox(e)},addEdgeEditInputBox:function(e){var t,i=this.collection.first();t="from"===e?i.get("_from"):i.get("_to"),$("#document-"+e).hide(),$("#document-"+e).after('<input type="text" id="input-edit-'.concat(e,'" value=').concat(arangoHelper.escapeHtml(t),' placeholder="').concat(arangoHelper.escapeHtml(t),'">'))},applyEdge:function(e){var t=this.collection.first();this.setEditMode(e,!1);var i=$("#input-edit-".concat(e)).val(),n=!1;"from"===e?i!==t.get("_from")&&(n=!0):i!==t.get("_to")&&(n=!0),n&&($("#document-"+e).html(arangoHelper.escapeHtml(i)),$("#document-"+e).addClass("unsaved"),this.enableSaveButton()),this.toggleEditIcons(e,!0),$("#input-edit-".concat(e)).remove(),$("#document-"+e).show()},abortEdge:function(e){this.setEditMode(e,!1),this.toggleEditIcons(e,!0),$("#input-edit-".concat(e)).remove(),$("#document-"+e).show()},fillInfo:function(){var t=this.collection.first(),i=t.get("_id"),n=t.get("_key"),r=t.get("_rev"),a=t.get("_from"),o=t.get("_to");if($("#document-type").css("margin-left","10px"),$("#document-type").text("_id:"),$("#document-id").css("margin-left","0"),$("#document-id").text(i),$("#document-key").text(n),$("#document-rev").text(r),a&&o){var s=e(a),l=e(o);$("#document-from").text(a),$("#document-from").attr("documentLink",s),$("#document-to").text(o),$("#document-to").attr("documentLink",l)}else $(".edge-info-container").hide(),$(".edge-edit-container").hide()},fillEditor:function(){var e=this.removeReadonlyKeys(this.collection.first().attributes);$(".disabledBread").last().text(this.collection.first().get("_key")),this.editor.set(e),$(".ace_content").attr("font-size","11pt")},jsonContentChanged:function(){this.enableSaveButton()},resize:function(){$("#documentEditor").height($(".centralRow").height()-300)},render:function(){$(this.el).html(this.template.render({})),this.resize(),this.disableSaveButton();var e=this,t=document.getElementById("documentEditor"),i={onChange:function(){e.jsonContentChanged()},onModeChange:function(t){e.storeMode(t)},search:!0,mode:"tree",modes:["tree","code"],ace:window.ace};this.editor=new JSONEditor(t,i);var n=localStorage.getItem("JSONEditorMode");return"code"!==n&&"tree"!==n||(this.defaultMode=n),this.defaultMode&&this.editor.setMode(this.defaultMode),this},changeViewToReadOnly:function(){this.readOnly=!0,$(".breadcrumb").find("a").html($(".breadcrumb").find("a").html()+" (read-only)"),this.editor.setMode("view"),$(".jsoneditor-modes").hide(),$(".bottomButtonBar button").addClass("disabled"),$(".bottomButtonBar button").unbind("click"),$("#addDocument").addClass("disabled")},cleanupEditor:function(){this.editor&&this.editor.destroy()},removeReadonlyKeys:function(e){return _.omit(e,["_key","_id","_from","_to","_rev"])},saveDocument:function(){if(void 0===$("#saveDocumentButton").attr("disabled"))if("_"===this.collection.first().attributes._id.substr(0,1)){var e=[],t=[];t.push(window.modalView.createReadOnlyEntry("doc-save-system-button","Caution","You are modifying a system collection. Really continue?",void 0,void 0,!1,/[<>&'"]/)),e.push(window.modalView.createSuccessButton("Save",this.confirmSaveDocument.bind(this))),window.modalView.show("modalTable.ejs","Modify System Collection",e,t)}else this.confirmSaveDocument()},confirmSaveDocument:function(){var e,t=this;window.modalView.hide();try{e=this.editor.get()}catch(o){return this.errorConfirmation(o),void this.disableSaveButton()}if(e=JSON.stringify(e),"edge"===this.type||this.type._from){var i=function(e,i,n){if(e)arangoHelper.arangoError("Error",i.responseJSON.errorMessage);else{if(i[0].error)return void arangoHelper.arangoError("Error",i[0].errorMessage);this.successConfirmation();var r=this.collection.first(),a=i[0].new._from,o=i[0].new._to;r.set("_from",a),r.set("_to",o),$("#document-from").removeClass("unsaved"),$("#document-to").removeClass("unsaved"),$("#document-from").attr("documentlink","collection/"+arangoHelper.escapeHtml(a)),$("#document-to").attr("documentlink","collection/"+arangoHelper.escapeHtml(o)),this.disableSaveButton(),t.customView&&t.customSaveFunction&&t.customSaveFunction(i)}}.bind(this),n=$("#document-from").html(),r=$("#document-to").html();this.collection.saveEdge(this.colid,this.docid,n,r,e,i)}else{var a=function(e,i){e||i[0]&&i[0].error?i[0]&&i[0].error?arangoHelper.arangoError("Error",i[0].errorMessage):arangoHelper.arangoError("Error",i.responseJSON.errorMessage):(this.successConfirmation(),this.disableSaveButton(),t.customView&&t.customSaveFunction&&t.customSaveFunction(i))}.bind(this);this.collection.saveDocument(this.colid,this.docid,e,a)}},successConfirmation:function(){arangoHelper.arangoNotification("Document saved.")},errorConfirmation:function(e){arangoHelper.arangoError("Document editor: ",e)},enableSaveButton:function(){$("#saveDocumentButton").prop("disabled",!1),$("#saveDocumentButton").addClass("button-success"),$("#saveDocumentButton").removeClass("button-close")},disableSaveButton:function(){$("#saveDocumentButton").prop("disabled",!0),$("#saveDocumentButton").addClass("button-close"),$("#saveDocumentButton").removeClass("button-success")},breadcrumb:function(){var e=window.location.hash.split("/");$("#subNavigationBar .breadcrumb").html('<a href="#collection/'+e[1]+'/documents/1">Collection: '+(e[1].length>64?e[1].substr(0,64)+"...":e[1])+'</a><i class="fa fa-chevron-right"></i>'+this.type.charAt(0).toUpperCase()+this.type.slice(1)+": "+e[2])},escaped:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}})}()},function(e,t){!function(){"use strict";window.DocumentsView=window.PaginationView.extend({filters:{0:!0},filterId:0,paginationDiv:"#documentsToolbarF",idPrefix:"documents",addDocumentSwitch:!0,activeFilter:!1,lastCollectionName:void 0,restoredFilters:[],editMode:!1,allowUpload:!1,el:"#content",table:"#documentsTableID",template:templateEngine.createTemplate("documentsView.ejs"),collectionContext:{prev:null,next:null},unbindEvents:function(){this.$el.empty().off(),this.stopListening(),this.unbind()},editButtons:["#deleteSelected","#moveSelected"],initialize:function(e){this.documentStore=e.documentStore,this.collectionsStore=e.collectionsStore,this.tableView=new window.TableView({el:this.table,collection:this.collection}),this.tableView.setRowClick(this.clicked.bind(this)),this.tableView.setRemoveClick(this.remove.bind(this))},resize:function(){var e=!1;_.each($(".documentsDropdown").first().children(),(function(t){$(t).is(":visible")&&(e=!0)})),e?($("#docPureTable").height($(".centralRow").height()-210-57),$("#docPureTable .pure-table-body").css("max-height",$("#docPureTable").height()-47)):($("#docPureTable").height($(".centralRow").height()-210),$("#docPureTable .pure-table-body").css("max-height",$("#docPureTable").height()-47))},setCollectionId:function(e,t){var i=this;this.collection.setCollection(e,t),this.collection.setPage(t),this.page=t;var n=function(t,n,r){t?i.renderNotFound(this.collection.collectionID):(this.type=n,this.collectionName=r?r.name:e,0===i.restoredFilters.length&&(this.collection.getDocuments(this.getDocsCallback.bind(this)),this.collectionModel=this.collectionsStore.get(e),this.renderPaginationElements()),this.breadcrumb())}.bind(this);arangoHelper.collectionApiType(e,null,n)},getDocsCallback:function(e){$("#documents_last").css("visibility","hidden"),$("#documents_first").css("visibility","hidden"),e?(window.progressView.hide(),arangoHelper.arangoError("Document error","Could not fetch requested documents.")):e&&void 0===e||(window.progressView.hide(),this.drawTable(),this.renderPaginationElements(),arangoHelper.checkCollectionPermissions(this.collection.collectionID,this.changeViewToReadOnly))},renderNotFound:function(e){$(".headerButton").remove(),$("#documentSize").hide(),$("#docPureTable").html('<div class="infoBox errorBox"><h4>Error</h4><p>Collection not found. Requested name was: "'+arangoHelper.escapeHtml(e)+'".</p></div>'),$("#subNavigationBar .breadcrumb").html()},events:{"click #collectionPrev":"prevCollection","click #collectionNext":"nextCollection","click #filterCollection":"filterCollection","click #markDocuments":"editDocuments","click #importCollection":"importCollection","click #exportCollection":"exportCollection","click #filterSend":"sendFilter","click #addFilterItem":"addFilterItem","click .removeFilterItem":"removeFilterItem","click #deleteSelected":"deleteSelectedDocs","click #moveSelected":"moveSelectedDocs","click #addDocumentButton":"addDocumentModal","click #documents_first":"firstDocuments","click #documents_last":"lastDocuments","click #documents_prev":"prevDocuments","click #documents_next":"nextDocuments","click #confirmDeleteBtn":"confirmDelete","click .key":"nop",keyup:"returnPressedHandler","keydown .queryline input":"filterValueKeydown","click #importModal":"showImportModal","click #resetView":"resetView","click #confirmDocImport":"startUpload","click #exportDocuments":"startDownload","change #documentSize":"setPagesize","change #docsSort":"setSorting"},showSpinner:function(){$(".upload-indicator").show()},hideSpinner:function(){$(".upload-indicator").hide()},showImportModal:function(){$("#docImportModal").modal("show")},hideImportModal:function(){$("#docImportModal").modal("hide")},setPagesize:function(){var e=$("#documentSize").find(":selected").val();this.collection.setPagesize(e),this.collection.getDocuments(this.getDocsCallback.bind(this))},setSorting:function(){var e=$("#docsSort").val();""!==e&&void 0!==e&&null!==e||(e="_key"),this.collection.setSort(e)},returnPressedHandler:function(e){13===e.keyCode&&$(e.target).is($("#docsSort"))&&this.collection.getDocuments(this.getDocsCallback.bind(this)),13===e.keyCode&&!1===$("#confirmDeleteBtn").attr("disabled")&&this.confirmDelete()},nop:function(e){e.stopPropagation()},resetView:function(){$("input").val(""),$("select").val("=="),this.removeAllFilterItems(),$("#documentSize").val(this.collection.getPageSize()),$("#documents_last").css("visibility","visible"),$("#documents_first").css("visibility","visible"),this.addDocumentSwitch=!0,this.collection.resetFilter(),this.collection.loadCollectionConfig((function(e){e&&arangoHelper.arangoError("Document","Could not fetch documents count")})),this.restoredFilters=[],this.allowUpload=!1,this.files=void 0,this.file=void 0,$("#confirmDocImport").attr("disabled",!0),this.markFilterToggle(),this.collection.getDocuments(this.getDocsCallback.bind(this))},startDownload:function(){var e=this.collection.buildDownloadDocumentQuery();if(""!==e||void 0!==e||null!==e){var t="query/result/download/"+btoa(JSON.stringify(e));arangoHelper.download(t)}else arangoHelper.arangoError("Document error","could not download documents")},startUpload:function(){var e=function(e,t){e?arangoHelper.arangoError("Upload",t):(arangoHelper.arangoMessage("Upload",t),this.hideImportModal(),this.resetView()),this.hideSpinner()}.bind(this);!0===this.allowUpload&&(this.showSpinner(),this.collection.uploadDocuments(this.file,e))},uploadSetup:function(){var e=this;$("#importDocuments").change((function(t){e.files=t.target.files||t.dataTransfer.files,e.file=e.files[0],$("#confirmDocImport").attr("disabled",!1),e.allowUpload=!0}))},buildCollectionLink:function(e){return"collection/"+encodeURIComponent(e.get("name"))+"/documents/1"},markFilterToggle:function(){this.restoredFilters.length>0?$("#filterCollection").addClass("activated"):$("#filterCollection").removeClass("activated")},editDocuments:function(e){if(!$(e.currentTarget).hasClass("disabled")){$("#importCollection").removeClass("activated"),$("#exportCollection").removeClass("activated"),this.markFilterToggle(),$("#markDocuments").toggleClass("activated"),this.changeEditMode(),$("#filterHeader").hide(),$("#importHeader").hide(),$("#editHeader").slideToggle(1),$("#exportHeader").hide();var t=this;window.setTimeout((function(){t.resize()}),50)}},filterCollection:function(){$("#importCollection").removeClass("activated"),$("#exportCollection").removeClass("activated"),$("#markDocuments").removeClass("activated"),this.changeEditMode(!1),this.markFilterToggle(),this.activeFilter=!0,$("#importHeader").hide(),$("#editHeader").hide(),$("#exportHeader").hide(),$("#filterHeader").slideToggle(1);var e,t=this;for(e in window.setTimeout((function(){t.resize()}),50),this.filters)if(this.filters.hasOwnProperty(e))return void $("#attribute_name"+e).focus()},exportCollection:function(){$("#importCollection").removeClass("activated"),$("#filterHeader").removeClass("activated"),$("#markDocuments").removeClass("activated"),this.changeEditMode(!1),$("#exportCollection").toggleClass("activated"),this.markFilterToggle(),$("#exportHeader").slideToggle(1),$("#importHeader").hide(),$("#filterHeader").hide(),$("#editHeader").hide();var e=this;window.setTimeout((function(){e.resize()}),50)},importCollection:function(e){if(!$(e.currentTarget).hasClass("disabled")){this.markFilterToggle(),$("#markDocuments").removeClass("activated"),this.changeEditMode(!1),$("#importCollection").toggleClass("activated"),$("#exportCollection").removeClass("activated"),$("#importHeader").slideToggle(1),$("#filterHeader").hide(),$("#editHeader").hide(),$("#exportHeader").hide();var t=this;window.setTimeout((function(){t.resize()}),50)}},changeEditMode:function(e){!1===e||!0===this.editMode?($("#docPureTable .pure-table-body .pure-table-row").css("cursor","default"),$(".deleteButton").fadeIn(),$(".addButton").fadeIn(),$(".selected-row").removeClass("selected-row"),this.editMode=!1,this.tableView.setRowClick(this.clicked.bind(this))):($("#docPureTable .pure-table-body .pure-table-row").css("cursor","copy"),$(".deleteButton").fadeOut(),$(".addButton").fadeOut(),$(".selectedCount").text(0),this.editMode=!0,this.tableView.setRowClick(this.editModeClick.bind(this)))},getFilterContent:function(){var e,t,i=[];for(e in this.filters)if(this.filters.hasOwnProperty(e)){t=$("#attribute_value"+e).val();try{t=JSON.parse(t)}catch(n){t=String(t)}""!==$("#attribute_name"+e).val()&&void 0!==$("#operator"+e).val()&&i.push({attribute:$("#attribute_name"+e).val(),operator:$("#operator"+e).val(),value:t})}return i},sendFilter:function(){this.restoredFilters=this.getFilterContent();var e=this;this.collection.resetFilter(),this.addDocumentSwitch=!1,_.each(this.restoredFilters,(function(t){void 0!==t.operator&&e.collection.addFilter(t.attribute,t.operator,t.value)})),this.collection.setToFirst(),this.collection.getDocuments(this.getDocsCallback.bind(this)),this.markFilterToggle()},restoreFilter:function(){var e=this,t=0;this.filterId=0,$("#docsSort").val(this.collection.getSort()),_.each(this.restoredFilters,(function(i){0!==t&&e.addFilterItem(),void 0!==i.operator&&($("#attribute_name"+t).val(i.attribute),$("#operator"+t).val(i.operator),$("#attribute_value"+t).val(i.value)),t++,e.collection.addFilter(i.attribute,i.operator,i.value)})),e.rerender()},addFilterItem:function(){var e=++this.filterId;$("#filterHeader").append(' <div class="queryline querylineAdd"><input id="attribute_name'+e+'" type="text" placeholder="Attribute name"><select name="operator" id="operator'+e+'" class="filterSelect">    <option value="==">==</option>    <option value="!=">!=</option>    <option value="&lt;">&lt;</option>    <option value="&lt;=">&lt;=</option>    <option value="&gt;">&gt;</option>    <option value="&gt;=">&gt;=</option>    <option value="LIKE">LIKE</option>    <option value="IN">IN</option>    <option value="=~">NOT IN</option>    <option value="REGEX">REGEX</option></select><input id="attribute_value'+e+'" type="text" placeholder="Attribute value" class="filterValue"> <a class="removeFilterItem" id="removeFilter'+e+'"><i class="fa fa-minus-circle"></i></a></div>'),this.filters[e]=!0,this.checkFilterState()},filterValueKeydown:function(e){13===e.keyCode&&this.sendFilter()},checkFilterState:function(){if(1===$("#filterHeader .queryline").length)$("#filterHeader .removeFilterItem").remove();else if(0===$("#filterHeader .queryline").first().find(".removeFilterItem").length){var e=$("#filterHeader .queryline").first().children().first().attr("id"),t=e.substr(14,e.length);$("#filterHeader .queryline").first().find(".add-filter-item").after(' <a class="removeFilterItem" id="removeFilter'+t+'"><i class="fa fa-minus-circle"></i></a>')}0===$("#filterHeader .queryline").first().find(".add-filter-item").length&&$("#filterHeader .queryline").first().find(".filterValue").after('<a id="addFilterItem" class="add-filter-item"><i style="margin-left: 4px;" class="fa fa-plus-circle"></i></a>')},removeFilterItem:function(e){var t=e.currentTarget,i=t.id.replace(/^removeFilter/,"");delete this.filters[i],delete this.restoredFilters[i],$(t.parentElement).remove(),this.checkFilterState()},removeAllFilterItems:function(){var e,t=$("#filterHeader").children().length;for(e=1;e<=t;e++)$("#removeFilter"+e).parent().remove();this.filters={0:!0},this.filterId=0},addDocumentModal:function(e){if(!$(e.currentTarget).hasClass("disabled")){var t=window.location.hash.split("/")[1],i=[],n=[],r=function(e,t){if(e)arangoHelper.arangoError("Error","Could not fetch collection type");else{this.collection.getSmartJoinAttribute()?(n.push(this.createDocumentKeyInput(!0)),n.push(window.modalView.createTextEntry("new-smart-val-attr","SmartJoin value ("+this.collection.getSmartJoinAttribute()+")",void 0,"This smartJoinAttribute must be populated for all documents in the collection, and must always contain a string value.","",!0,[{rule:Joi.string(),msg:""}])),n.push(window.modalView.createJsonEditor()),i.push(window.modalView.createSuccessButton("Create",this.addSmartAttributeDocument.bind(this))),window.modalView.show("modalTable.ejs","Create document",i,n),$("#new-document-key-attr").css("width","50%").css("float","right"),$("#new-document-key-attr").before('<input type="text" id="new-document-key-prefix-attr" value="" placeholder="<smart-prefix>" disabled style="width: 40%; float: left;"><div style="width: 2px; float: left; margin-top: 15px; margin-left: 5px; font-weight: 800;">:</div>'),$("new-smart-val-attr").unbind("keyup"),$("#new-smart-val-attr").on("keyup",(function(e){$("#new-document-key-prefix-attr").val($(e.currentTarget).val())}))):this.collection.getSmartGraphAttribute()?(n.push(this.createDocumentKeyInput(!1)),n.push(window.modalView.createTextEntry("new-smartGraph-val-attr","SmartGraph Value ("+this.collection.getSmartGraphAttribute()+")",void 0,"This smartGraphAttribute can be populated for all documents in the collection and then contain a string value. Otherwise it will be null.","",!1,[{rule:Joi.string().allow("").optional(),msg:""}])),n.push(window.modalView.createJsonEditor()),i.push(window.modalView.createSuccessButton("Create",this.addSmartGraphDocument.bind(this))),window.modalView.show("modalTable.ejs","Create document",i,n),$("#new-document-key-attr").css("width","50%").css("float","right"),$("#new-document-key-attr").before('<input type="text" id="new-document-key-prefix-attr" value="" placeholder="<smart-prefix>" disabled style="width: 40%; float: left;"><div style="width: 2px; float: left; margin-top: 15px; margin-left: 5px; font-weight: 800;">:</div>'),$("#new-smartGraph-val-attr").unbind("keyup"),$("#new-smartGraph-val-attr").on("keyup",(function(e){$("#new-document-key-prefix-attr").val($(e.currentTarget).val())}))):"edge"===t?(n.push(window.modalView.createTextEntry("new-edge-from-attr","_from","","document _id: document handle of the linked vertex (incoming relation)",void 0,!1,[{rule:Joi.string().required(),msg:"No _from attribute given."}])),n.push(window.modalView.createTextEntry("new-edge-to","_to","","document _id: document handle of the linked vertex (outgoing relation)",void 0,!1,[{rule:Joi.string().required(),msg:"No _to attribute given."}])),n.push(window.modalView.createTextEntry("new-edge-key-attr","_key",void 0,"the edge's unique key (optional attribute, leave empty for autogenerated key)","is optional: leave empty for autogenerated key",!1,[{rule:Joi.string().allow("").optional(),msg:""}])),n.push(window.modalView.createJsonEditor()),i.push(window.modalView.createSuccessButton("Create",this.addEdge.bind(this))),window.modalView.show("modalTable.ejs","Create edge",i,n)):(n.push(this.createDocumentKeyInput(!1)),n.push(window.modalView.createJsonEditor()),i.push(window.modalView.createSuccessButton("Create",this.addDocument.bind(this))),window.modalView.show("modalTable.ejs","Create document",i,n));var r=document.getElementById("jsoneditor");this.resize();var a={onChange:function(){},onModeChange:function(e){},search:!0,mode:"code",modes:["tree","code"],ace:window.ace};this.editor=new JSONEditor(r,a)}}.bind(this);arangoHelper.collectionApiType(t,!0,r)}},createDocumentKeyInput:function(e){var t="leave empty for autogenerated key",i="the documents unique key";return e?t="":i+=" (optional attribute, leave empty for autogenerated key)",window.modalView.createTextEntry("new-document-key-attr","_key",void 0,i,t,e||!1,[{rule:Joi.string().allow("").optional(),msg:""}])},addEdge:function(){var e,t=window.location.hash.split("/")[1],i=$(".modal-body #new-edge-from-attr").last().val(),n=$(".modal-body #new-edge-to").last().val(),r=$(".modal-body #new-edge-key-attr").last().val();try{e=this.editor.get()}catch(x){return void arangoHelper.arangoError("failed to parse JSON document",x.message)}this.documentStore.createTypeEdge(t,i,n,""!==r||void 0!==r?r:null,e,this.goToDocument)},addDocument:function(){var e,t=window.location.hash.split("/")[1],i=$(".modal-body #new-document-key-attr").last().val();try{e=this.editor.get()}catch(x){return void arangoHelper.arangoError("failed to parse JSON document",x.message)}this.documentStore.createTypeDocument(t,""!==i||void 0!==i?i:null,e,this.goToDocument)},addSmartAttributeDocument:function(){var e,t=window.location.hash.split("/")[1],i=$(".modal-body #new-document-key-attr").last().val(),n=$(".modal-body #new-smart-val-attr").last().val();try{e=this.editor.get()}catch(x){return void arangoHelper.arangoError("failed to parse JSON document",x.message)}this.documentStore.createTypeDocument(t,""!==i||void 0!==i?i:null,e,this.goToDocument,!1,this.collection.getSmartJoinAttribute(),n,null,null)},addSmartGraphDocument:function(){var e,t=window.location.hash.split("/")[1],i=$(".modal-body #new-document-key-attr").last().val(),n=$(".modal-body #new-smartGraph-val-attr").last().val();try{e=this.editor.get()}catch(x){return void arangoHelper.arangoError("failed to parse JSON document",x.message)}""===n&&(n=null);var r=null;this.collection.getSmartGraphAttribute()&&(r=this.collection.getSmartGraphAttribute()),""===i&&(i=null),this.documentStore.createTypeDocument(t,i,e,this.goToDocument,!1,null,null,r,n)},goToDocument:function(e,t,i){if(e)arangoHelper.arangoError("Error",i.errorMessage);else{var n;window.modalView.hide(),t=t.split("/");try{n="collection/"+t[0]+"/"+t[1],decodeURI(n)}catch(r){n="collection/"+t[0]+"/"+encodeURIComponent(t[1])}window.location.hash=n}},moveSelectedDocs:function(){var e=[],t=[];0!==this.getSelectedDocs().length?(t.push(window.modalView.createTextEntry("move-documents-to","Move to","",!1,"collection-name",!0,[{rule:Joi.string().regex(/^[a-zA-Z]/),msg:"Collection name must always start with a letter."},{rule:Joi.string().regex(/^[a-zA-Z0-9\-_]*$/),msg:'Only Symbols "_" and "-" are allowed.'},{rule:Joi.string().required(),msg:"No collection name given."}])),e.push(window.modalView.createSuccessButton("Move",this.confirmMoveSelectedDocs.bind(this))),window.modalView.show("modalTable.ejs","Move documents",e,t)):arangoHelper.arangoMessage("Move documents","No documents selected!")},confirmMoveSelectedDocs:function(){var e=this.getSelectedDocs(),t=this,i=$("#move-documents-to").val(),n=function(e){e?arangoHelper.arangoError("Error","Could not move document."):(t.collection.setTotalMinusOne(),this.collection.getDocuments(this.getDocsCallback.bind(this)),$("#markDocuments").click(),window.modalView.hide())}.bind(this);_.each(e,(function(e){t.collection.moveDocument(e,t.collection.collectionID,i,n)}))},deleteSelectedDocs:function(){var e=[],t=[],i=this.getSelectedDocs();0!==i.length?(t.push(window.modalView.createReadOnlyEntry(void 0,i.length+" documents selected","Do you want to delete all selected documents?",void 0,void 0,!1,void 0)),e.push(window.modalView.createDeleteButton("Delete",this.confirmDeleteSelectedDocs.bind(this))),window.modalView.show("modalTable.ejs","Delete documents",e,t)):arangoHelper.arangoMessage("Delete documents","No documents selected!")},confirmDeleteSelectedDocs:function(){var e=this.getSelectedDocs(),t=[],i=this;_.each(e,(function(e){if("document"===i.type){var n=function(e){e?(t.push(!1),arangoHelper.arangoError("Document error","Could not delete document.")):(t.push(!0),i.collection.setTotalMinusOne(),i.collection.getDocuments(this.getDocsCallback.bind(this)),$("#markDocuments").click(),window.modalView.hide())}.bind(i);i.documentStore.deleteDocument(i.collection.collectionID,e,n)}else if("edge"===i.type){var r=function(e){e?(t.push(!1),arangoHelper.arangoError("Edge error","Could not delete edge")):(i.collection.setTotalMinusOne(),t.push(!0),i.collection.getDocuments(this.getDocsCallback.bind(this)),$("#markDocuments").click(),window.modalView.hide())}.bind(i);i.documentStore.deleteEdge(i.collection.collectionID,e,r)}}))},getSelectedDocs:function(){var e=[];return _.each($("#docPureTable .pure-table-body .pure-table-row"),(function(t){$(t).hasClass("selected-row")&&e.push($($(t).children()[1]).find(".key").text())})),e},remove:function(e){$(e.currentTarget).hasClass("disabled")||(this.docid=$(e.currentTarget).parent().parent().prev().find(".key").text(),$("#confirmDeleteBtn").attr("disabled",!1),$("#docDeleteModal").modal("show"))},confirmDelete:function(){$("#confirmDeleteBtn").attr("disabled",!0),"source"!==window.location.hash.split("/")[3]&&this.reallyDelete()},reallyDelete:function(){if("document"===this.type){var e=function(e){e?arangoHelper.arangoError("Error","Could not delete document"):(this.collection.setTotalMinusOne(),this.collection.getDocuments(this.getDocsCallback.bind(this)),$("#docDeleteModal").modal("hide"))}.bind(this);this.documentStore.deleteDocument(this.collection.collectionID,this.docid,e)}else if("edge"===this.type){var t=function(e){e?arangoHelper.arangoError("Edge error","Could not delete edge"):(this.collection.setTotalMinusOne(),this.collection.getDocuments(this.getDocsCallback.bind(this)),$("#docDeleteModal").modal("hide"))}.bind(this);this.documentStore.deleteEdge(this.collection.collectionID,this.docid,t)}},editModeClick:function(e){var t=$(e.currentTarget);t.hasClass("selected-row")?t.removeClass("selected-row"):t.addClass("selected-row");var i=this.getSelectedDocs();$(".selectedCount").text(i.length),_.each(this.editButtons,(function(e){i.length>0?($(e).prop("disabled",!1),$(e).removeClass("button-neutral"),$(e).removeClass("disabled"),"#moveSelected"===e?$(e).addClass("button-success"):$(e).addClass("button-danger")):($(e).prop("disabled",!0),$(e).addClass("disabled"),$(e).addClass("button-neutral"),"#moveSelected"===e?$(e).removeClass("button-success"):$(e).removeClass("button-danger"))}))},clicked:function(e){var t,i=e.currentTarget,n=$(i).attr("id").substr(4);try{t="collection/"+this.collection.collectionID+"/"+n,decodeURI(n)}catch(r){t="collection/"+this.collection.collectionID+"/"+encodeURIComponent(n)}window.location.hash=t},drawTable:function(){this.tableView.setElement($("#docPureTable")).render(),arangoHelper.fixTooltips(".icon_arangodb, .arangoicon","top"),this.resize(),document.querySelectorAll("code").forEach((function(e){window.hljs.highlightBlock(e)}))},checkCollectionState:function(){this.lastCollectionName===this.collectionName?this.activeFilter&&(this.filterCollection(),this.restoreFilter()):void 0!==this.lastCollectionName&&(this.collection.resetFilter(),this.collection.setSort(""),this.restoredFilters=[],this.activeFilter=!1)},render:function(){return this.collectionName=window.location.hash.split("/")[1],$(this.el).html(this.template.render({})),2===this.type?this.type="document":3===this.type&&(this.type="edge"),this.tableView.setElement($(this.table)).drawLoading(),this.collectionContext=this.collectionsStore.getPosition(this.collection.collectionID),this.checkCollectionState(),this.lastCollectionName=this.collectionName,this.uploadSetup(),arangoHelper.fixTooltips([".icon_arangodb",".arangoicon","top","[data-toggle=tooltip]",".upload-info"]),this.selectActivePagesize(),this.markFilterToggle(),this.resize(),this},changeViewToReadOnly:function(){$(".breadcrumb").html($(".breadcrumb").html()+" (read-only)"),$("#importCollection").addClass("disabled"),$("#markDocuments").addClass("disabled"),$("#addDocumentButton").addClass("disabled"),$("#addDocumentButton .fa-plus-circle").css("color","#d3d3d3"),$("#addDocumentButton .fa-plus-circle").css("cursor","not-allowed"),$(".deleteButton").addClass("disabled"),$(".deleteButton .fa-minus-circle").css("color","#d3d3d3"),$(".deleteButton .fa-minus-circle").css("cursor","not-allowed")},rerender:function(){this.collection.getDocuments(this.getDocsCallback.bind(this)),this.resize()},selectActivePagesize:function(){$("#documentSize").val(this.collection.getPageSize())},renderPaginationElements:function(){this.renderPagination();var e=$("#totalDocuments");0===e.length&&($("#documentsToolbarFL").append('<a id="totalDocuments" class="totalDocuments"></a>'),e=$("#totalDocuments")),"document"===this.type&&e.html(numeral(this.collection.getTotal()).format("0,0")+" doc(s)"),"edge"===this.type&&e.html(numeral(this.collection.getTotal()).format("0,0")+" edge(s)"),this.collection.getTotal()>this.collection.MAX_SORT?($("#docsSort").attr("disabled",!0),$("#docsSort").attr("placeholder","Sort limit reached (docs count)")):($("#docsSort").attr("disabled",!1),$("#docsSort").attr("placeholder","Sort by attribute"))},breadcrumb:function(){var e=this;window.App.naviView&&void 0!==$("#subNavigationBar .breadcrumb").html()?($("#subNavigationBar .breadcrumb").html("Collection: "+arangoHelper.escapeHtml(this.collectionName.length>64?this.collectionName.substr(0,64)+"...":this.collectionName)),arangoHelper.buildCollectionSubNav(this.collectionName,"Content")):window.setTimeout((function(){e.breadcrumb()}),100)}})}()},function(e,t){!function(){"use strict";window.FilterSelectView=Backbone.View.extend({el:"#filterSelectDiv",filterOptionsEl:".filterOptions",initialize:function(e){this.name=e.name,this.options=e.options,this.position=e.position,this.callback=e.callback,this.multiple=e.multiple},template:templateEngine.createTemplate("filterSelect.ejs"),events:{"click .filterOptions .inactive":"changeState","click .filterOptions .active":"changeState","click #showAll":"showAll","click #closeFilter":"hide","keyup .filterInput input":"filter"},remove:function(){return this.$el.empty().off(),this.stopListening(),this.unbind(),delete this.el,this},changeState:function(e){var t=$(e.currentTarget).attr("name");$(e.currentTarget).hasClass("active")?(this.options[t].active=!1,$(e.currentTarget).removeClass("active").addClass("inactive"),$(e.currentTarget).find(".marked").css("visibility","hidden")):(this.options[t].active=!0,$(e.currentTarget).removeClass("inactive").addClass("active"),$(e.currentTarget).find(".marked").css("visibility","visible")),this.callback&&this.callback(this.options)},filter:function(){var e=$("#"+this.name+"-filter").val();_.each(this.options,(function(t){t.name.search(e)>-1?$("#"+t.name+"-option").css("display","block"):$("#"+t.name+"-option").css("display","none")}))},clearFilter:function(){$("#"+this.name+"-filter").val(""),this.filter()},showAll:function(){this.clearFilter(),_.each(this.options,(function(e){e.active=!1,$("#"+e.name+"-option").removeClass("active").addClass("inactive"),$("#"+e.name+"-option").find(".marked").css("visibility","hidden")})),this.callback(this.options)},render:function(){var e=this;$("#filterSelectDiv").on("click",(function(t){"filterSelectDiv"===t.target.id&&e.hide()})),_.each(e.options,(function(e){e.color||(e.color=arangoHelper.alphabetColors[e.name.charAt(0).toLowerCase()])})),this.$el.html(this.template.render({name:e.name,options:e.options})),$("#filterSelectDiv > div").css("right",this.position.right+"px"),$("#filterSelectDiv > div").css("top",this.position.top+30),this.show(),$("#"+this.name+"-filter").focus()},show:function(){$(this.el).show()},hide:function(){$("#filterSelectDiv").unbind("click"),$(this.el).hide(),this.remove()}})}()},function(e,t){!function(){"use strict";window.FooterView=Backbone.View.extend({el:"#footerBar",system:{},isOffline:!0,isOfflineCounter:0,firstLogin:!0,timer:15e3,lap:0,timerFunction:null,events:{"click .footer-center p":"showShortcutModal"},initialize:function(){var e=this;window.setInterval((function(){e.getVersion()}),e.timer),e.getVersion(),window.VISIBLE=!0,document.addEventListener("visibilitychange",(function(){window.VISIBLE=!window.VISIBLE})),$("#offlinePlaceholder button").on("click",(function(){e.getVersion()})),window.setTimeout((function(){!0===window.frontendConfig.isCluster&&($(".health-state").css("cursor","pointer"),$(".health-state").on("click",(function(){window.App.navigate("#nodes",{trigger:!0})})))}),1e3)},template:templateEngine.createTemplate("footerView.ejs"),showServerStatus:function(e){window.App.isCluster?this.renderClusterState(e):!0===e?($("#healthStatus").removeClass("negative"),$("#healthStatus").addClass("positive"),$(".health-state").html("GOOD"),$(".health-icon").html('<i class="fa fa-check-circle"></i>'),$("#offlinePlaceholder").hide()):($("#healthStatus").removeClass("positive"),$("#healthStatus").addClass("negative"),$(".health-state").html("UNKNOWN"),$(".health-icon").html('<i class="fa fa-exclamation-circle"></i>'),window.modalView.hide(),$("#offlinePlaceholder").show(),Noty.clearQueue(),Noty.closeAll(),this.reconnectAnimation(0))},reconnectAnimation:function(e){var t=this;0===e&&(t.lap=e,$("#offlineSeconds").text(t.timer/1e3),clearTimeout(t.timerFunction)),t.lap<this.timer/1e3&&(t.lap++,$("#offlineSeconds").text(t.timer/1e3-t.lap),t.timerFunction=window.setTimeout((function(){t.timer/1e3-t.lap===0?t.getVersion():t.reconnectAnimation(t.lap)}),1e3))},renderClusterState:function(e){if(e){$("#offlinePlaceholder").hide();$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_admin/cluster/health"),contentType:"application/json",processData:!1,async:!0,success:function(e){!function(e){window.clusterHealth=e.Health;var t=0;0!==Object.keys(window.clusterHealth).length?(_.each(window.clusterHealth,(function(e){"DBServer"!==e.Role&&"Coordinator"!==e.Role||"GOOD"!==e.Status&&t++})),t>0?($("#healthStatus").removeClass("positive"),$("#healthStatus").addClass("negative"),1===t?$(".health-state").html(t+" NODE ERROR"):$(".health-state").html(t+" NODES ERROR"),$(".health-icon").html('<i class="fa fa-exclamation-circle"></i>')):($("#healthStatus").removeClass("negative"),$("#healthStatus").addClass("positive"),$(".health-state").html("NODES OK"),$(".health-icon").html('<i class="fa fa-check-circle"></i>'))):($(".health-state").html("HEALTH ERROR"),$("#healthStatus").removeClass("positive"),$("#healthStatus").addClass("negative"),$(".health-icon").html('<i class="fa fa-exclamation-circle"></i>'))}(e)}})}else $("#healthStatus").removeClass("positive"),$("#healthStatus").addClass("negative"),$(".health-state").html(window.location.host+" OFFLINE"),$(".health-icon").html('<i class="fa fa-exclamation-circle"></i>'),$("#offlinePlaceholder").show(),this.reconnectAnimation(0)},showShortcutModal:function(){window.arangoHelper.hotkeysFunctions.showHotkeysModal()},getVersion:function(){var e=this;$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_api/version"),contentType:"application/json",processData:!1,async:!0,success:function(t){frontendConfig.version=t,frontendConfig.version.hasOwnProperty("version")||(frontendConfig.version.version="N/A"),e.showServerStatus(!0),!0===e.isOffline&&(e.isOffline=!1,e.isOfflineCounter=0,e.firstLogin?e.firstLogin=!1:window.setTimeout((function(){e.showServerStatus(!0)}),1e3),e.system.name=t.server,e.system.version=t.version,e.render())},error:function(t){401===t.status?(e.showServerStatus(!0),window.App.navigate("login",{trigger:!0})):(e.isOffline=!0,e.isOfflineCounter++,e.isOfflineCounter>=1&&e.showServerStatus(!1))}}),e.system.hasOwnProperty("database")||$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_api/database/current"),contentType:"application/json",processData:!1,async:!0,success:function(t){var i=t.result.name;e.system.database=i;var n=window.setInterval((function(){$("#databaseNavi")&&(window.clearTimeout(n),n=null,e.render())}),50)}})},renderVersion:function(){this.system.hasOwnProperty("database")&&this.system.hasOwnProperty("name")&&$(this.el).html(this.template.render({name:this.system.name,version:this.system.version,database:this.system.database}))},render:function(){return this.system.version||this.getVersion(),$(this.el).html(this.template.render({name:this.system.name,version:this.system.version})),this}})}()},function(e,t){},function(e,t){!function(){"use strict";window.FoxxActiveView=Backbone.View.extend({tagName:"div",className:"foxxTile tile pure-u-1-1 pure-u-sm-1-2 pure-u-md-1-3 pure-u-lg-1-4 pure-u-xl-1-5",template:templateEngine.createTemplate("foxxActiveView.ejs"),_show:!0,events:{click:"openAppDetailView"},openAppDetailView:function(){window.App.navigate("service/"+encodeURIComponent(this.model.get("mount")),{trigger:!0})},toggle:function(e,t){switch(e){case"devel":this.model.isDevelopment()&&(this._show=t);break;case"production":this.model.isDevelopment()||this.model.isSystem()||(this._show=t);break;case"system":this.model.isSystem()&&(this._show=t)}this._show?$(this.el).show():$(this.el).hide()},render:function(){return this.model.fetchThumbnail(function(){$(this.el).html(this.template.render({model:this.model}));var e=function(){this.model.needsConfiguration()&&($(this.el).find(".warning-icons").length>0?$(this.el).find(".warning-icons").append('<span class="fa fa-cog" title="Needs configuration"></span>'):$(this.el).find("img").after('<span class="warning-icons"><span class="fa fa-cog" title="Needs configuration"></span></span>'))}.bind(this),t=function(){this.model.hasUnconfiguredDependencies()&&($(this.el).find(".warning-icons").length>0?$(this.el).find(".warning-icons").append('<span class="fa fa-cubes" title="Unconfigured dependencies"></span>'):$(this.el).find("img").after('<span class="warning-icons"><span class="fa fa-cubes" title="Unconfigured dependencies"></span></span>'))}.bind(this);this.model.getConfiguration(e),this.model.getDependencies(t)}.bind(this)),$(this.el)}})}()},function(e,t){!function(){"use strict";window.FoxxRepoView=Backbone.View.extend({tagName:"div",className:"foxxTile tile pure-u-1-1 pure-u-sm-1-2 pure-u-md-1-3 pure-u-lg-1-4 pure-u-xl-1-5",template:templateEngine.createTemplate("foxxRepoView.ejs"),_show:!0,categories:[],events:{"click .installFoxx":"installStoreService","click .borderBox":"goToServiceDetail","click img":"goToServiceDetail","click .foxxDesc":"goToServiceDetail"},initialize:function(e){this.categories=[],this.fetchCategories(),e.functionsCollection&&(this.functionsCollection=e.functionsCollection),e.upgrade&&(this._upgrade=e.upgrade)},openAppDetailView:function(){window.App.navigate("service/detail/"+encodeURIComponent(this.model.get("name")),{trigger:!0})},render:function(){return this.model.fetchThumbnail(function(e){e&&$(this.el).remove();var t=this.model.get("defaultThumbnailUrl");if(this.model.get("manifest"))try{this.model.get("manifest").thumbnail&&(t=this.model.getThumbnailUrl())}catch(i){}$(this.el).html(this.template.render({model:this.model.toJSON(),thumbnail:t,upgrade:this._upgrade}))}.bind(this)),this.model.get("categories")&&$(this.el).attr("category",this.model.get("categories")),$(this.el)},goToServiceDetail:function(e){window.App.navigate("store/"+encodeURIComponent(this.model.get("name")),{trigger:!0})},installStoreService:function(e){this.toInstall=$(e.currentTarget).attr("appId"),this.version=$(e.currentTarget).attr("appVersion"),arangoHelper.createMountPointModal(this.installFoxxFromStore.bind(this))},categoriesCallbackFunction:function(e){this.categoryOptions=e,this.applyFilter()},onlyUnique:function(e,t,i){return i.indexOf(e)===t},fetchCategories:function(){var e=[];_.each(window.App.foxxRepo.models,(function(t){_.each(t.get("categories"),(function(t){e.push(t)}))})),this.categories=e.filter(this.onlyUnique)},renderCategories:function(e){var t,i=this;this.categoryOptions||(this.categoryOptions={}),_.each(this.categories,(function(e,n){i.categoryOptions[n]&&(t=i.categoryOptions[n].active),i.categoryOptions[e]={name:e,active:t||!1}}));var n=$(e.currentTarget).position();n.right="30",this.categoryView=new window.FilterSelectView({name:"Category",options:i.categoryOptions,position:n,callback:i.categoriesCallbackFunction.bind(this),multiple:!1}),this.categoryView.render()},resetFilters:function(){_.each(this.categoryOptions,(function(e){e.active=!1})),this.applyFilter()},isFilterActive:function(e){var t=!1;return _.each(e,(function(e){e.active&&(t=!0)})),t},applyFilter:function(){var e=this;this.isFilterActive(this.categoryOptions)?(_.each($("#availableFoxxes").children(),(function(t){var i=$(t).attr("category").split(","),n=!1;_.each(i,(function(t){!0===e.categoryOptions[t].active&&(n=!0)})),n?($(t).show(),$(t).attr("shown","true")):($(t).hide(),$(t).attr("shown","false"))})),this.changeButton("category")):(_.each($("#availableFoxxes").children(),(function(e){$(e).show(),$(e).attr("shown","true")})),this.changeButton());var t=0;_.each($("#logEntries").children(),(function(e){"block"===$(e).css("display")&&t++})),1===t?($(".logBorder").css("visibility","hidden"),$("#noLogEntries").hide()):0===t?$("#noLogEntries").show():($(".logBorder").css("visibility","visible"),$("#noLogEntries").hide())},changeButton:function(e){e?($("#categorySelection").addClass("button-success").removeClass("button-default"),$("#filterDesc").html(e),$("#foxxFilters").show()):($("#categorySelection").addClass("button-default").removeClass("button-success"),$("#foxxFilters").hide(),$("#filterDesc").html(""))},installFoxxFromStore:function(e){var t,i,n;window.modalView.modalTestAll()&&(this._upgrade?t=window.App.replaceAppData.mount:"/"!==(t=window.arangoHelper.escapeHtml($("#new-app-mount").val())).charAt(0)&&(t="/"+t),i={name:this.toInstall,version:this.version},n=arangoHelper.getFoxxFlags(),this.collection.install("store",i,t,n,this.installCallback.bind(this)),window.modalView.hide(),this._upgrade?arangoHelper.arangoNotification("Services","Upgrading "+this.toInstall+"."):arangoHelper.arangoNotification("Services","Installing "+this.toInstall+"."),this.toInstall=null,this.version=null)},installCallback:function(e){window.App.navigate("#services",{trigger:!0}),window.App.applicationsView.installCallback(e)}})}()},function(e,t){!function(){"use strict";window.GraphManagementView=Backbone.View.extend({el:"#content",template:templateEngine.createTemplate("graphManagementView.ejs"),edgeDefintionTemplate:templateEngine.createTemplate("edgeDefinitionTable.ejs"),eCollList:[],removedECollList:[],readOnly:!1,dropdownVisible:!1,initialize:function(e){this.options=e},events:{"click #deleteGraph":"deleteGraph","click .icon_arangodb_settings2.editGraph":"editGraph","click #createGraph":"addNewGraph","keyup #graphManagementSearchInput":"search","click #graphManagementSearchSubmit":"search","click .tile-graph":"redirectToGraphViewer","click #graphManagementToggle":"toggleGraphDropdown","click .css-label":"checkBoxes","change #graphSortDesc":"sorting"},toggleTab:function(e){var t=e.currentTarget.id;t=t.replace("tab-",""),$("#tab-content-create-graph .tab-pane").removeClass("active"),$("#tab-content-create-graph #"+t).addClass("active"),"exampleGraphs"===t?$("#modal-dialog .modal-footer .button-success").css("display","none"):$("#modal-dialog .modal-footer .button-success").css("display","initial"),"smartGraph"===t?this.setSmartGraphRows(!0):"satelliteGraph"===t?this.setSatelliteGraphRows(!0):"createGraph"===t&&this.setGeneralGraphRows(!1)},generalGraphRows:["row_general-numberOfShards","row_general-replicationFactor","row_general-writeConcern"],neededSmartGraphRows:["smartGraphInfo","row_new-smartGraphAttribute","row_new-numberOfShards","row_new-replicationFactor","row_new-writeConcern","row_new-isDisjoint"],notNeededSatelliteGraphRows:["row_general-numberOfShards","row_general-replicationFactor","row_general-writeConcern"],setGeneralGraphRows:function(e){this.setCacheModeState(e),this.hideSmartGraphRows(),_.each(this.generalGraphRows,(function(e){$("#"+e).show()}))},setSatelliteGraphRows:function(e){$("#createGraph").addClass("active"),this.setCacheModeState(e),this.showGeneralGraphRows(),this.hideSmartGraphRows(),_.each(this.notNeededSatelliteGraphRows,(function(e){$("#"+e).hide()}))},setSmartGraphRows:function(e){$("#createGraph").addClass("active"),this.setCacheModeState(e),this.hideGeneralGraphRows(),_.each(this.neededSmartGraphRows,(function(e){$("#"+e).show()}))},hideSmartGraphRows:function(){_.each(this.neededSmartGraphRows,(function(e){$("#"+e).hide()}))},showGeneralGraphRows:function(){_.each(this.generalGraphRows,(function(e){$("#"+e).show()}))},hideGeneralGraphRows:function(){_.each(this.generalGraphRows,(function(e){$("#"+e).hide()}))},redirectToGraphViewer:function(e){var t=$(e.currentTarget).attr("id");t&&(t=t.substr(0,t.length-5),window.App.navigate("graph/"+encodeURIComponent(t),{trigger:!0}))},loadGraphViewer:function(e,t){var i=function(t){if(t)arangoHelper.arangoError("","");else{var i=this.collection.get(e).get("edgeDefinitions");if(!i||0===i.length)return;var n={type:"gharial",graphName:e,baseUrl:arangoHelper.databaseUrl("/")},r=$("#content").width()-75;$("#content").html("");var a=arangoHelper.calculateCenterDivHeight();this.ui=new GraphViewerUI($("#content")[0],n,r,$(".centralRow").height()-135,{nodeShaper:{label:"_key",color:{type:"attribute",key:"_key"}}},!0),$(".contentDiv").height(a)}}.bind(this);t?this.collection.fetch({cache:!1,success:function(){i()}}):i()},handleResize:function(e){this.width&&this.width===e||(this.width=e,this.ui&&this.ui.changeWidth(e))},addNewGraph:function(e){e.preventDefault(),this.readOnly||(frontendConfig.isCluster&&frontendConfig.isEnterprise?this.createEditGraphModal():(this.createEditGraphModal(),$("#tab-smartGraph").parent().remove(),$("#tab-satelliteGraph").parent().remove()))},deleteGraph:function(){var e=this,t=$("#editGraphName")[0].value;if($("#dropGraphCollections").is(":checked")){this.collection.dropAndDeleteGraph(t,(function(i,n){window.modalView.hide(),i?e.collection.remove(e.collection.get(t)):n&&n.error&&n.errorMessage?arangoHelper.arangoError("Graph",n.errorMessage):arangoHelper.arangoError("Graph","Could not delete Graph."),e.updateGraphManagementView()}))}else this.collection.get(t).destroy({success:function(){e.updateGraphManagementView(),window.modalView.hide()},error:function(e,t){var i=JSON.parse(t.responseText).errorMessage;arangoHelper.arangoError(i),window.modalView.hide()}})},checkBoxes:function(e){var t=e.currentTarget.id;$("#"+t).click()},checkVisibility:function(){$("#graphManagementDropdown").is(":visible")?this.dropdownVisible=!0:this.dropdownVisible=!1,arangoHelper.setCheckboxStatus("#graphManagementDropdown")},toggleGraphDropdown:function(){var e=this;$("#graphSortDesc").attr("checked",this.collection.sortOptions.desc),$("#graphManagementToggle").toggleClass("activated"),$("#graphManagementDropdown2").slideToggle(200,(function(){e.checkVisibility()}))},sorting:function(){$("#graphSortDesc").is(":checked")?this.collection.setSortingDesc(!0):this.collection.setSortingDesc(!1),this.checkVisibility(),this.render()},createExampleGraphs:function(e){var t=$(e.currentTarget).attr("graph-id"),i=this;$.ajax({type:"POST",url:arangoHelper.databaseUrl("/_admin/aardvark/graph-examples/create/"+encodeURIComponent(t)),success:function(){window.modalView.hide(),i.updateGraphManagementView(),arangoHelper.arangoNotification("Example Graphs","Graph: "+t+" created.")},error:function(i){if(window.modalView.hide(),i.responseText)try{var n=JSON.parse(i.responseText);arangoHelper.arangoError("Example Graphs",n.errorMessage)}catch(e){arangoHelper.arangoError("Example Graphs","Could not create example graph: "+t)}else arangoHelper.arangoError("Example Graphs","Could not create example graph: "+t)}})},forgetCachedCollectionsState:function(){var e,t=[];for(this.options.collectionCollection.models.forEach((function(e){e.get("isSystem")||t.push(e.id)})),e=0;e<this.counter;e++)$("#newEdgeDefinitions"+e).select2({tags:this.eCollList}),$("#newEdgeDefinitions"+e).select2("data",this.cachedNewEdgeDefinitions),$("#newEdgeDefinitions"+e).attr("disabled",this.cachedNewEdgeDefinitionsState),$("#fromCollections"+e).select2({tags:t}),$("#fromCollections"+e).select2("data",this.cachedFromCollections),$("#fromCollections"+e).attr("disabled",this.cachedFromCollectionsState),$("#toCollections"+e).select2({tags:t}),$("#toCollections"+e).select2("data",this.cachedToCollections),$("#toCollections"+e).attr("disabled",this.cachedToCollectionsState);$("#newVertexCollections").select2({tags:t}),$("#newVertexCollections").select2("data",this.cachedNewVertexCollections),$("#newVertexCollections").attr("disabled",this.cachedNewVertexCollectionsState)},rememberCachedCollectionsState:function(){var e;for(e=0;e<this.counter;e++)$("#newEdgeDefinitions"+e).select2({tags:[]}),this.cachedNewEdgeDefinitions=$("#newEdgeDefinitions"+e).select2("data"),this.cachedNewEdgeDefinitionsState=$("#newEdgeDefinitions"+e).attr("disabled"),$("#newEdgeDefinitions"+e).select2("data",""),$("#newEdgeDefinitions"+e).attr("disabled",!1),$("#newEdgeDefinitions"+e).change(),$("#fromCollections"+e).select2({tags:[]}),this.cachedFromCollections=$("#fromCollections"+e).select2("data"),this.cachedFromCollectionsState=$("#fromCollections"+e).attr("disabled"),$("#fromCollections"+e).select2("data",""),$("#fromCollections"+e).attr("disabled",!1),$("#fromCollections"+e).change(),$("#toCollections"+e).select2({tags:[]}),this.cachedToCollections=$("#toCollections"+e).select2("data"),this.cachedToCollectionsState=$("#toCollections"+e).attr("disabled"),$("#toCollections"+e).select2("data",""),$("#toCollections"+e).attr("disabled",!1),$("#toCollections"+e).change();$("#newVertexCollections").select2({tags:[]}),this.cachedNewVertexCollections=$("#newVertexCollections").select2("data"),this.cachedNewVertexCollectionsState=$("#newVertexCollections").attr("disabled"),$("#newVertexCollections").select2("data",""),$("#newVertexCollections").attr("disabled",!1),$("#newVertexCollections").change()},setCacheModeState:function(e){frontendConfig.isCluster&&frontendConfig.isEnterprise&&(e?this.forgetCachedCollectionsState():this.rememberCachedCollectionsState())},render:function(e,t){var i=this;return this.collection.fetch({cache:!1,success:function(){i.collection.sort(),$(i.el).html(i.template.render({graphs:i.collection,searchString:""})),!0===i.dropdownVisible&&($("#graphManagementDropdown2").show(),$("#graphSortDesc").attr("checked",i.collection.sortOptions.desc),$("#graphManagementToggle").toggleClass("activated"),$("#graphManagementDropdown").show()),i.events['change tr[id*="newEdgeDefinitions"]']=i.setFromAndTo.bind(i),i.events["click .graphViewer-icon-button"]=i.addRemoveDefinition.bind(i),i.events["click #graphTab a"]=i.toggleTab.bind(i),i.events["click .createExampleGraphs"]=i.createExampleGraphs.bind(i),i.events["focusout .select2-search-field input"]=function(e){$(".select2-drop").is(":visible")&&($("#select2-search-field input").is(":focus")||window.setTimeout((function(){$(e.currentTarget).parent().parent().parent().select2("close")}),200))},arangoHelper.setCheckboxStatus("#graphManagementDropdown"),arangoHelper.checkDatabasePermissions(i.setReadOnly.bind(i))}}),e&&this.loadGraphViewer(e,t),this},setReadOnly:function(){this.readOnly=!0,$("#createGraph").parent().parent().addClass("disabled"),$("#createGraph").addClass("disabled")},setFromAndTo:function(e){e.stopPropagation();var t,i=this.calculateEdgeDefinitionMap();if($("#tab-smartGraph").parent().hasClass("active")){if(e.added){if(-1===this.eCollList.indexOf(e.added.id)&&-1!==this.removedECollList.indexOf(e.added.id))return t=e.currentTarget.id.split("row_newEdgeDefinitions")[1],$('input[id*="newEdgeDefinitions'+t+'"]').select2("val",null),void $('input[id*="newEdgeDefinitions'+t+'"]').attr("placeholder","The collection "+e.added.id+" is already used.");this.removedECollList.push(e.added.id),this.eCollList.splice(this.eCollList.indexOf(e.added.id),1)}else e.removed&&(this.eCollList.push(e.removed.id),this.removedECollList.splice(this.removedECollList.indexOf(e.removed.id),1));i[e.val]?(t=e.currentTarget.id.split("row_newEdgeDefinitions")[1],$("#s2id_fromCollections"+t).select2("val",i[e.val].from),$("#fromCollections"+t).attr("disabled",!0),$("#s2id_toCollections"+t).select2("val",i[e.val].to),$("#toCollections"+t).attr("disabled",!0)):(t=e.currentTarget.id.split("row_newEdgeDefinitions")[1],$("#s2id_fromCollections"+t).select2("val",null),$("#fromCollections"+t).attr("disabled",!1),$("#s2id_toCollections"+t).select2("val",null),$("#toCollections"+t).attr("disabled",!1))}},editGraph:function(e){e.stopPropagation(),this.collection.fetch({cache:!1}),this.graphToEdit=this.evaluateGraphName($(e.currentTarget).attr("id"),"_settings");var t=this.collection.findWhere({_key:this.graphToEdit});t.get("isSmart")?this.createEditGraphModal(t,!0):"satellite"===t.get("replicationFactor")?this.createEditGraphModal(t,!1,!0):this.createEditGraphModal(t)},saveEditedGraph:function(){var e,t,i,n,r=$("#editGraphName")[0].value,a=_.pluck($("#newVertexCollections").select2("data"),"text"),o=[],s={};if($("[id^=s2id_newEdgeDefinitions]").toArray().forEach((function(r){if(n=(n=$(r).attr("id")).replace("s2id_newEdgeDefinitions",""),(e=_.pluck($("#s2id_newEdgeDefinitions"+n).select2("data"),"text")[0])&&""!==e&&(t=_.pluck($("#s2id_fromCollections"+n).select2("data"),"text"),i=_.pluck($("#s2id_toCollections"+n).select2("data"),"text"),0!==t.length&&0!==i.length)){var a={collection:e,from:t,to:i};o.push(a),s[e]=a}})),0===o.length)return $("#s2id_newEdgeDefinitions0 .select2-choices").css("border-color","red"),$("#s2id_newEdgeDefinitions0").parent().parent().next().find(".select2-choices").css("border-color","red"),void $("#s2id_newEdgeDefinitions0").parent().parent().next().next().find(".select2-choices").css("border-color","red");var l=this.collection.findWhere({_key:r}),c=l.get("edgeDefinitions"),d=l.get("orphanCollections"),h=[];d.forEach((function(e){-1===a.indexOf(e)&&l.deleteVertexCollection(e)})),a.forEach((function(e){-1===d.indexOf(e)&&l.addVertexCollection(e)}));var u=[],p=[],f=[];c.forEach((function(e){var t=e.collection;h.push(t);var i=s[t];void 0===i?f.push(t):JSON.stringify(i)!==JSON.stringify(e)&&p.push(t)})),o.forEach((function(e){var t=e.collection;-1===h.indexOf(t)&&u.push(t)})),u.forEach((function(e){l.addEdgeDefinition(s[e])})),p.forEach((function(e){l.modifyEdgeDefinition(s[e])})),f.forEach((function(e){l.deleteEdgeDefinition(e)})),this.updateGraphManagementView(),window.modalView.hide()},evaluateGraphName:function(e,t){var i=e.lastIndexOf(t);return e.substring(0,i)},search:function(){var e,t,i,n;e=$("#graphManagementSearchInput"),t=arangoHelper.escapeHtml($("#graphManagementSearchInput").val()),n=this.collection.filter((function(e){return-1!==e.get("_key").indexOf(t)})),$(this.el).html(this.template.render({graphs:n,searchString:t})),i=(e=$("#graphManagementSearchInput")).val().length,e.focus(),e[0].setSelectionRange(i,i)},updateGraphManagementView:function(){var e=this;this.collection.fetch({cache:!1,success:function(){e.render()}})},createNewGraph:function(){var e,t,i,n,r=$("#createNewGraphName").val(),a=_.pluck($("#newVertexCollections").select2("data"),"text"),o=[],s=this;if(!r)return arangoHelper.arangoError("A name for the graph has to be provided."),0;if(this.collection.findWhere({_key:r}))return arangoHelper.arangoError("The graph '"+r+"' already exists."),0;if($("[id^=s2id_newEdgeDefinitions]").toArray().forEach((function(r){n=(n=$(r).attr("id")).replace("s2id_newEdgeDefinitions",""),(e=_.pluck($("#s2id_newEdgeDefinitions"+n).select2("data"),"text")[0])&&""!==e&&(t=_.pluck($("#s2id_fromCollections"+n).select2("data"),"text"),i=_.pluck($("#s2id_toCollections"+n).select2("data"),"text"),1!==t&&1!==i&&o.push({collection:e,from:t,to:i}))})),0===o.length)return $("#s2id_newEdgeDefinitions0 .select2-choices").css("border-color","red"),$("#s2id_newEdgeDefinitions0").parent().parent().next().find(".select2-choices").css("border-color","red"),void $("#s2id_newEdgeDefinitions0").parent().parent().next().next().find(".select2-choices").css("border-color","red");var l={name:r,edgeDefinitions:o,orphanCollections:a};if($("#tab-smartGraph").parent().hasClass("active")){if(""===$("#new-numberOfShards").val()||""===$("#new-smartGraphAttribute").val())return void arangoHelper.arangoError("SmartGraph creation","numberOfShards and/or smartGraphAttribute not set!");l.isSmart=!0,l.options={numberOfShards:parseInt($("#new-numberOfShards").val()),smartGraphAttribute:$("#new-smartGraphAttribute").val(),replicationFactor:parseInt($("#new-replicationFactor").val()),minReplicationFactor:parseInt($("#new-writeConcern").val()),isDisjoint:$("#new-isDisjoint").is(":checked")}}else $("#tab-satelliteGraph").parent().hasClass("active")?l.options={replicationFactor:"satellite"}:frontendConfig.isCluster&&($("#general-numberOfShards").val().length>0&&(l.options={numberOfShards:parseInt($("#general-numberOfShards").val())}),$("#general-replicationFactor").val().length>0&&(l.options?l.options.replicationFactor=parseInt($("#general-replicationFactor").val()):l.options={replicationFactor:parseInt($("#general-replicationFactor").val())}),$("#general-writeConcern").val().length>0&&(l.options?l.options.minReplicationFactor=parseInt($("#general-writeConcern").val()):l.options={minReplicationFactor:parseInt($("#general-writeConcern").val())}));this.collection.create(l,{success:function(){s.updateGraphManagementView(),window.modalView.hide()},error:function(e,t){var i=JSON.parse(t.responseText).errorMessage;i=(i=i.replace("<","")).replace(">",""),arangoHelper.arangoError(i)}})},createEditGraphModal:function(e,t,i){var n,r=[],a=[],o=[],s=this.options.collectionCollection.models,l=this,c="",d=[{collection:"",from:"",to:""}],h="",u=function(e,t){return(e=e.toLowerCase())<(t=t.toLowerCase())?-1:e>t?1:0};if(this.eCollList=[],this.removedECollList=[],s.forEach((function(e){e.get("isSystem")||("edge"===e.get("type")?l.eCollList.push(e.id):a.push(e.id))})),this.counter=0,e){if(n=t?"Edit SmartGraph":i?"Edit SatelliteGraph":"Edit Graph",c=e.get("_key"),(d=e.get("edgeDefinitions"))&&0!==d.length||(d=[{collection:"",from:"",to:""}]),h=e.get("orphanCollections"),o.push(window.modalView.createReadOnlyEntry("editGraphName","Name",c,"The name to identify the graph. Has to be unique")),t&&o.push(window.modalView.createReadOnlyEntry("smartGraphAttribute","SmartGraph Attribute",e.get("smartGraphAttribute"),"The attribute name that is used to smartly shard the vertices of a graph. \nEvery vertex in this Graph has to have this attribute. \n")),e.get("numberOfShards")&&o.push(window.modalView.createReadOnlyEntry("numberOfShards","Shards",e.get("numberOfShards"),"Number of shards the graph is using.")),e.get("replicationFactor")&&o.push(window.modalView.createReadOnlyEntry("replicationFactor","Replication factor",e.get("replicationFactor"),"Total number of desired copies of the data in the cluster.")),e.get("minReplicationFactor")&&o.push(window.modalView.createReadOnlyEntry("writeConcern","Write concern",e.get("minReplicationFactor"),"Numeric value. Must be at least 1. Must be smaller or equal compared to the replication factor. Total number of copies of the data in the cluster that are required for each write operation. If we get below this value the collection will be read-only until enough copies are created.")),t){var p="No";e.get("isDisjoint")&&(p="Yes"),o.push(window.modalView.createReadOnlyEntry("isDisjoint","Disjoint SmartGraph",p,"Disjoint SmartGraph: Creating edges between different SmartGraph components is not allowed."))}r.push(window.modalView.createDeleteButton("Delete",this.deleteGraph.bind(this))),r.push(window.modalView.createNotificationButton("Reset display settings",this.resetDisplaySettings.bind(this))),r.push(window.modalView.createSuccessButton("Save",this.saveEditedGraph.bind(this)))}else n="Create Graph",o.push(window.modalView.createTextEntry("createNewGraphName","Name","","The name to identify the graph. Has to be unique.","graphName",!0)),r.push(window.modalView.createSuccessButton("Create",this.createNewGraph.bind(this)));if(!0===frontendConfig.isEnterprise&&frontendConfig.isCluster&&!e&&(o.push(window.modalView.createTextEntry("new-numberOfShards","Shards*","","Number of shards the SmartGraph is using.","",!1,[{rule:Joi.string().allow("").optional().regex(/^[0-9]*$/),msg:"Must be a number."}])),o.push(window.modalView.createTextEntry("new-replicationFactor","Replication factor","","Numeric value. Must be at least 1. Total number of copies of the data in the cluster.","",!1,[{rule:Joi.string().allow("").optional().regex(/^[1-9]*$/),msg:"Must be a number."}])),o.push(window.modalView.createTextEntry("new-writeConcern","Write concern","","Numeric value. Must be at least 1. Must be smaller or equal compared to the replication factor. Total number of copies of the data in the cluster that are required for each write operation. If we get below this value the collection will be read-only until enough copies are created.","",!1,[{rule:Joi.string().allow("").optional().regex(/^[1-9]*$/),msg:"Numeric value. Must be at least 1. Must be smaller or equal compared to the replication factor. Total number of copies of the data in the cluster that are required for each write operation. If we get below this value the collection will be read-only until enough copies are created."}])),o.push(window.modalView.createCheckboxEntry("new-isDisjoint","Create disjoint graph",!1,"Creates a Disjoint SmartGraph. Creating edges between different SmartGraph components is not allowed.")),o.push(window.modalView.createTextEntry("new-smartGraphAttribute","SmartGraph Attribute*","","The attribute name that is used to smartly shard the vertices of a graph. \nEvery vertex in this Graph has to have this attribute. \nCannot be modified later.","",!1,[{rule:Joi.string().allow("").optional(),msg:"Must be a string."}]))),frontendConfig.isCluster&&!e&&(o.push(window.modalView.createTextEntry("general-numberOfShards","Shards","","Number of shards the graph is using.","",!1,[{rule:Joi.string().allow("").optional().regex(/^[0-9]*$/),msg:"Must be a number."}])),o.push(window.modalView.createTextEntry("general-replicationFactor","Replication factor","","Numeric value. Must be at least 1. Total number of desired copies of the data in the cluster.","",!1,[{rule:Joi.string().allow("").optional().regex(/^[1-9]*$/),msg:"Must be a number."}])),o.push(window.modalView.createTextEntry("general-writeConcern","Write concern","","Numeric value. Must be at least 1. Must be smaller or equal compared to the replication factor. Total number of copies of the data in the cluster that are required for each write operation. If we get below this value the collection will be read-only until enough copies are created.","",!1,[{rule:Joi.string().allow("").optional().regex(/^[1-9]*$/),msg:"Must be a number. Must be at least 1 and has to be smaller or equal compared to the replicationFactor."}]))),d.forEach((function(e){0===l.counter?(e.collection&&(l.removedECollList.push(e.collection),l.eCollList.splice(l.eCollList.indexOf(e.collection),1)),o.push(window.modalView.createSelect2Entry("newEdgeDefinitions"+l.counter,"Edge definitions",e.collection,"An edge definition defines a relation of the graph","Edge definitions",!0,!1,!0,1,l.eCollList.sort(u)))):o.push(window.modalView.createSelect2Entry("newEdgeDefinitions"+l.counter,"Edge definitions",e.collection,"An edge definition defines a relation of the graph","Edge definitions",!1,!0,!1,1,l.eCollList.sort(u))),o.push(window.modalView.createSelect2Entry("fromCollections"+l.counter,"fromCollections",e.from,"The collections that contain the start vertices of the relation.","fromCollections",!0,!1,!1,null,a.sort(u))),o.push(window.modalView.createSelect2Entry("toCollections"+l.counter,"toCollections",e.to,"The collections that contain the end vertices of the relation.","toCollections",!0,!1,!1,null,a.sort(u))),l.counter++})),o.push(window.modalView.createSelect2Entry("newVertexCollections","Vertex collections",h,"Collections that are part of a graph but not used in an edge definition","Vertex Collections",!1,!1,!1,null,a.sort(u))),window.modalView.show("modalGraphTable.ejs",n,r,o,void 0,void 0,this.events),$("#tab-createGraph").parent().hasClass("active")&&l.hideSmartGraphRows(),e){var f;for($(".modal-body table").css("border-collapse","separate"),$(".modal-body .spacer").remove(),f=0;f<=this.counter;f++)$("#row_fromCollections"+f).show(),$("#row_toCollections"+f).show(),$("#row_newEdgeDefinitions"+f).addClass("first"),$("#row_fromCollections"+f).addClass("middle"),$("#row_toCollections"+f).addClass("last"),$("#row_toCollections"+f).after('<tr id="spacer'+f+'" class="spacer"></tr>');$("#graphTab").hide(),$("#modal-dialog .modal-delete-confirmation").append('<fieldset><input type="checkbox" id="dropGraphCollections" name="" value=""><label for="dropGraphCollections">also drop collections?</label></fieldset>')}},resetDisplaySettings:function(){var e=$("#editGraphName").val(),t=new window.GraphSettingsView({name:e,userConfig:window.App.userConfig});t.setDefaults(!0,!0),t.remove(),window.modalView.hide(),arangoHelper.arangoNotification("Graph","Reset successful.")},addRemoveDefinition:function(e){var t=[];this.options.collectionCollection.models.forEach((function(e){e.get("isSystem")||"edge"!==e.get("type")&&t.push(e.id)})),e.stopPropagation();var i,n,r=$(e.currentTarget).attr("id");if(-1===r.indexOf("addAfter_newEdgeDefinitions"))-1!==r.indexOf("remove_newEdgeDefinitions")&&(i=r.split("remove_newEdgeDefinitions")[1],$("#row_newEdgeDefinitions"+i).remove(),$("#row_fromCollections"+i).remove(),$("#row_toCollections"+i).remove(),$("#spacer"+i).remove());else for(this.counter++,$("#row_newVertexCollections").before(this.edgeDefintionTemplate.render({number:this.counter})),$("#newEdgeDefinitions"+this.counter).select2({tags:this.eCollList,showSearchBox:!1,minimumResultsForSearch:-1,width:"336px",maximumSelectionSize:1}),$("#fromCollections"+this.counter).select2({tags:t,showSearchBox:!1,minimumResultsForSearch:-1,width:"336px"}),$("#toCollections"+this.counter).select2({tags:t,showSearchBox:!1,minimumResultsForSearch:-1,width:"336px"}),window.modalView.undelegateEvents(),window.modalView.delegateEvents(this.events),arangoHelper.fixTooltips(".icon_arangodb, .arangoicon","right"),$(".modal-body .spacer").remove(),n=0;n<=this.counter;n++)$("#row_fromCollections"+n).show(),$("#row_toCollections"+n).show(),$("#row_newEdgeDefinitions"+n).addClass("first"),$("#row_fromCollections"+n).addClass("middle"),$("#row_toCollections"+n).addClass("last"),$("#row_toCollections"+n).after('<tr id="spacer'+n+'" class="spacer"></tr>')},calculateEdgeDefinitionMap:function(){var e={};return this.collection.models.forEach((function(t){t.get("edgeDefinitions").forEach((function(t){e[t.collection]={from:t.from,to:t.to}}))})),e}})}()},function(e,t){!function(){"use strict";window.GraphSettingsView=Backbone.View.extend({el:"#graphSettingsContent",remove:function(){return this.$el.empty().off(),this.stopListening(),this},general:{graph:{type:"divider",name:"Graph"},nodeStart:{type:"string",name:"Startnode",desc:"A valid node id or space seperated list of id's. If empty, a random node will be chosen.",value:2},layout:{type:"select",name:"Layout",desc:"Different graph algorithms. No overlap is very fast (more than 5000 nodes), force is slower (less than 5000 nodes) and fruchtermann is the slowest (less than 500 nodes).",noverlap:{name:"No overlap",val:"noverlap"},force:{name:"Force",val:"force"},fruchtermann:{name:"Fruchtermann",val:"fruchtermann"}},renderer:{type:"select",name:"Renderer",desc:"Canvas enables editing, WebGL is only for displaying a graph but much faster.",canvas:{name:"Canvas",val:"canvas"},webgl:{name:"WebGL (experimental)",val:"webgl"}},depth:{desc:"Search depth, starting from your start node.",type:"number",name:"Search Depth",value:2},limit:{desc:"Limit nodes count. If empty or zero, no limit is set.",type:"number",name:"Limit",value:250}},specific:{nodes:{type:"divider",name:"Nodes"},nodeLabel:{type:"string",name:"Label",desc:"Node label. Please choose a valid and available node attribute.",default:"_key"},nodeLabelByCollection:{type:"select",name:"Add Collection Name",desc:"Append collection name to the label?",yes:{name:"Yes",val:"true"},no:{name:"No",val:"false"}},nodeColorByCollection:{type:"select",name:"Color By Collections",no:{name:"No",val:"false"},yes:{name:"Yes",val:"true"},desc:"Should nodes be colorized by their collection? If enabled, node color and node color attribute will be ignored."},nodeColor:{type:"color",name:"Color",desc:"Default node color. RGB or HEX value.",default:"#2ecc71"},nodeColorAttribute:{type:"string",name:"Color Attribute",desc:"If an attribute is given, nodes will then be colorized by the attribute. This setting ignores default node color if set."},nodeSizeByEdges:{type:"select",name:"Size By Connections",yes:{name:"Yes",val:"true"},no:{name:"No",val:"false"},desc:"Should nodes be sized by their edges count? If enabled, node sizing attribute will be ignored."},nodeSize:{type:"string",name:"Sizing Attribute",desc:"Default node size. Numeric value > 0."},edges:{type:"divider",name:"Edges"},edgeLabel:{type:"string",name:"Label",desc:"Default edge label."},edgeLabelByCollection:{type:"select",name:"Add Collection Name",desc:"Set label text by collection. If activated edge label attribute will be ignored.",yes:{name:"Yes",val:"true"},no:{name:"No",val:"false"}},edgeColorByCollection:{type:"select",name:"Color By Collections",no:{name:"No",val:"false"},yes:{name:"Yes",val:"true"},desc:"Should edges be colorized by their collection? If enabled, edge color and edge color attribute will be ignored."},edgeColor:{type:"color",name:"Color",desc:"Default edge color. RGB or HEX value.",default:"#cccccc"},edgeColorAttribute:{type:"string",name:"Color Attribute",desc:"If an attribute is given, edges will then be colorized by the attribute. This setting ignores default edge color if set."},edgeEditable:{type:"select",hide:"true",name:"Editable",yes:{name:"Yes",val:"true"},no:{name:"No",val:"false"},desc:"Should edges be editable?"},edgeType:{type:"select",name:"Type",desc:"The type of the edge",line:{name:"Line",val:"line"},arrow:{name:"Arrow",val:"arrow"},curve:{name:"Curve",val:"curve"},dotted:{name:"Dotted",val:"dotted"},dashed:{name:"Dashed",val:"dashed"},tapered:{name:"Tapered",val:"tapered"}}},template:templateEngine.createTemplate("graphSettingsView.ejs"),initialize:function(e){this.name=e.name,this.userConfig=e.userConfig,this.saveCallback=e.saveCallback,e.noDefinedGraph&&(this.noDefinedGraph=e.noDefinedGraph)},events:{"click #saveGraphSettings":"saveGraphSettings","click #restoreGraphSettings":"setDefaults","keyup #graphSettingsView input":"checkEnterKey","keyup #graphSettingsView select":"checkEnterKey",'change input[type="range"]':"saveGraphSettings",'change input[type="color"]':"checkColor","change select":"saveGraphSettings","focus #graphSettingsView input":"lastFocus","focus #graphSettingsView select":"lastFocus",'focusout #graphSettingsView input[type="text"]':"checkinput"},lastFocus:function(e){this.lastFocussed=e.currentTarget.id,this.lastFocussedValue=$(e.currentTarget).val()},checkinput:function(e){new Date-this.lastSaved>500&&e.currentTarget.id===this.lastFocussed&&this.lastFocussedValue!==$(e.currentTarget).val()&&this.saveGraphSettings()},checkEnterKey:function(e){13===e.keyCode&&this.saveGraphSettings(e)},getGraphSettings:function(e){var t=this,i=frontendConfig.db+"_"+this.name;this.userConfig.fetch({success:function(n){t.graphConfig=n.toJSON().graphs[i],e&&t.continueRender()}})},checkColor:function(){this.lastConfigChange?new Date-this.lastConfigChange>750&&this.saveGraphSettings(null,!0):this.saveGraphSettings(null,!0)},saveGraphSettings:function(e,t,i,n,r,a){var o=this,s=function(){var e=!$("#g_nodeColor").is(":disabled"),t=!$("#g_edgeColor").is(":disabled");window.App.graphViewer.updateColors(e,t,$("#g_nodeColor").val(),$("#g_edgeColor").val())};if(this.noDefinedGraph){t?s():"g_layout"===e.currentTarget.id?window.App.graphViewer.rerenderAQL($("#g_layout").val(),null):"g_nodeColorByCollection"===e.currentTarget.id?"true"===$("#g_nodeColorByCollection").val()?window.App.graphViewer.switchNodeColorByCollection(!0):window.App.graphViewer.switchNodeColorByCollection(!1):"g_edgeColorByCollection"===e.currentTarget.id?"true"===$("#g_edgeColorByCollection").val()?window.App.graphViewer.switchEdgeColorByCollection(!0):window.App.graphViewer.switchEdgeColorByCollection(!1):"g_nodeSizeByEdges"===e.currentTarget.id?"true"===$("#g_nodeSizeByEdges").val()?window.App.graphViewer.switchNodeSizeByCollection(!0):window.App.graphViewer.switchNodeSizeByCollection(!1):"g_edgeType"===e.currentTarget.id&&window.App.graphViewer.switchEdgeType($("#g_edgeType").val())}else{o.lastSaved=new Date;var l=frontendConfig.db+"_"+this.name,c={};if(n)c[l]=n;else{var d,h={};$("#graphSettingsView select").each((function(e,t){d=t.id,h[d.substr(2,t.id.length)]=$(t).val()})),$("#graphSettingsView input").each((function(e,t){d=t.id,h[d.substr(2,t.id.length)]=$(t).val()})),c[l]=h}i&&(c[l].nodeStart=i),c[l].edgeEditable="true";var u=function(){if(o.lastConfigChange=new Date,window.App.graphViewer){if(e){if("g_layout"===e.currentTarget.id)return void window.App.graphViewer.switchLayout($("#g_layout").val());if("g_nodeColorByCollection"===e.currentTarget.id)return void("true"===$("#g_nodeColorByCollection").val()?window.App.graphViewer.switchNodeColorByCollection(!0):$("#g_nodeColorAttribute").is(":disabled")?window.App.graphViewer.switchNodeColorByCollection(!1):window.App.graphViewer.switchNodeColorByCollection(!1,!0));if("g_edgeColorByCollection"===e.currentTarget.id)return void("true"===$("#g_edgeColorByCollection").val()?window.App.graphViewer.switchEdgeColorByCollection(!0):$("#g_nodeColorAttribute").is(":disabled")?window.App.graphViewer.switchEdgeColorByCollection(!1):window.App.graphViewer.switchEdgeColorByCollection(!1,!0))}""!==t&&void 0!==t?s():window.App.graphViewer.render(o.lastFocussed)}else r||arangoHelper.arangoNotification("Graph "+this.name,"Configuration saved.");a&&a()}.bind(this);this.userConfig.setItem("graphs",c,u)}this.handleDependencies()},setDefaults:function(e,t,i){var n={layout:"force",renderer:"canvas",depth:"2",limit:"250",nodeColor:"#2ecc71",nodeColorAttribute:"",nodeColorByCollection:"true",edgeColor:"#cccccc",edgeColorAttribute:"",edgeColorByCollection:"false",nodeLabel:"_key",edgeLabel:"",edgeType:"arrow",nodeSize:"",nodeSizeByEdges:"true",edgeEditable:"true",nodeLabelByCollection:"false",edgeLabelByCollection:"false",nodeStart:"",barnesHutOptimize:!0};!0===e?t?this.saveGraphSettings(null,null,null,n,t,i):this.saveGraphSettings(null,null,null,n):(this.saveGraphSettings(null,null,null,n,null),this.render(),window.App.graphViewer.render(this.lastFocussed))},toggle:function(){$(this.el).is(":visible")?this.hide():this.show()},show:function(){$(this.el).show("slide",{direction:"right"},250)},hide:function(){$(this.el).hide("slide",{direction:"right"},250)},render:function(){this.noDefinedGraph?this.continueRender():(this.getGraphSettings(!0),this.lastSaved=new Date)},handleDependencies:function(){"true"===$("#g_nodeSizeByEdges").val()?$("#g_nodeSize").prop("disabled",!0):$("#g_nodeSize").removeAttr("disabled"),"true"===$("#g_nodeColorByCollection").val()?($("#g_nodeColorAttribute").prop("disabled",!0),$("#g_nodeColor").prop("disabled",!0)):($("#g_nodeColorAttribute").removeAttr("disabled"),$("#g_nodeColor").removeAttr("disabled")),this.noDefinedGraph||""!==$("#g_nodeColorAttribute").val()&&$("#g_nodeColor").prop("disabled",!0),"true"===$("#g_edgeColorByCollection").val()?($("#g_edgeColorAttribute").prop("disabled",!0),$("#g_edgeColor").prop("disabled",!0)):($("#g_edgeColorAttribute").removeAttr("disabled"),$("#g_edgeColor").removeAttr("disabled")),this.noDefinedGraph||""!==$("#g_edgeColorAttribute").val()&&$("#g_edgeColor").prop("disabled",!0)},continueRender:function(){$(this.el).html(this.template.render({general:this.general,specific:this.specific})),arangoHelper.fixTooltips(".gv-tooltips","top"),this.graphConfig?_.each(this.graphConfig,(function(e,t){$("#g_"+t).val(e)})):this.noDefinedGraph?this.fitSettingsAQLMode():this.setDefaults(!0),this.handleDependencies()},fitSettingsAQLMode:function(){_.each(["g_nodeStart","g_depth","g_limit","g_renderer","g_nodeLabel","g_nodeLabelByCollection","g_nodeColorAttribute","g_nodeSize","g_edgeLabel","g_edgeColorAttribute","g_edgeLabelByCollection"],(function(e){$("#"+e).parent().prev().remove(),$("#"+e).parent().remove()})),$("#saveGraphSettings").remove(),$("#restoreGraphSettings").remove(),$("#g_nodeColorByCollection").val("false"),$("#g_edgeColorByCollection").val("false"),$("#g_nodeSizeByEdges").val("false"),$("#g_edgeType").val("arrow"),$("#g_layout").val("force")}})}()},function(e,t){!function(){"use strict";window.GraphViewer=Backbone.View.extend({el:"#content",remove:function(){return this.$el.empty().off(),this.stopListening(),this.unbind(),delete this.el,this},template:templateEngine.createTemplate("graphViewer2.ejs"),initialize:function(e){var t=this;e.id&&(this.setElement(e.id),this.graphData=e.data,this.aqlMode=!0),e.noDefinedGraph&&(this.noDefinedGraph=e.noDefinedGraph,this.graphData=e.data),this.name=e.name,this.userConfig=e.userConfig,this.documentStore=e.documentStore,void 0!==this.name&&this.collection.fetch({cache:!1,success:function(i){t.model=t.collection.findWhere({_key:e.name}).toJSON()}})},colors:{hotaru:["#364C4A","#497C7F","#92C5C0","#858168","#CCBCA5"],random1:["#292F36","#4ECDC4","#F7FFF7","#DD6363","#FFE66D"],jans:["rgba(166, 109, 161, 1)","rgba(64, 74, 83, 1)","rgba(90, 147, 189, 1)","rgba(153,63,0,1)","rgba(76,0,92,1)","rgba(25,25,25,1)","rgba(0,92,49,1)","rgba(43,206,72,1)","rgba(255,204,153,1)","rgba(128,128,128,1)","rgba(148,255,181,1)","rgba(143,124,0,1)","rgba(157,204,0,1)","rgba(194,0,136,1)","rgba(0,51,128,1)","rgba(255,164,5,1)","rgba(255,168,187,1)","rgba(66,102,0,1)","rgba(255,0,16,1)","rgba(94,241,242,1)","rgba(0,153,143,1)","rgba(224,255,102,1)","rgba(116,10,255,1)","rgba(153,0,0,1)","rgba(255,255,128,1)","rgba(255,255,0,1)","rgba(255,80,5,1)"],gv:["#68BDF6","#6DCE9E","#FF756E","#DE9BF9","#FB95AF","#FFD86E","#A5ABB6"]},activeNodes:[],selectedNodes:{},aqlMode:!1,events:{"click #downloadPNG":"downloadPNG","click #loadFullGraph":"loadFullGraphModal","click #reloadGraph":"reloadGraph","click #settingsMenu":"toggleSettings","click #toggleForce":"toggleLayout","click #selectNodes":"toggleLasso"},cursorX:0,cursorY:0,layouting:!1,model:null,viewStates:{captureMode:!1},graphConfig:null,graphSettings:null,downloadPNG:function(){var e=parseInt($("#graph-container").width(),10);sigma.plugins.image(this.currentGraph,this.currentGraph.renderers[0],{download:!0,size:e,clip:!0,labels:!0,background:"white",zoom:!1})},loadFullGraphModal:function(){var e=[],t=[];t.push(window.modalView.createReadOnlyEntry("load-full-graph-a","Caution","Really load full graph? If no limit is set, your result set could be too big.")),e.push(window.modalView.createSuccessButton("Load full graph",this.loadFullGraph.bind(this))),window.modalView.show("modalTable.ejs","Load full graph",e,t)},loadFullGraph:function(){var e=this,t={};this.graphConfig&&(delete(t=_.clone(this.graphConfig)).layout,delete t.edgeType,delete t.renderer),t.mode="all",$.ajax({type:"GET",url:arangoHelper.databaseUrl("/_admin/aardvark/graph/"+encodeURIComponent(this.name)),contentType:"application/json",data:t,success:function(t){e.killCurrentGraph(),e.renderGraph(t)},error:function(e){arangoHelper.arangoError("Graph","Could not load full graph.")}}),window.modalView.hide()},resize:function(){$("#graph-container").width($(".centralContent").width()),$("#graph-container").height($(".centralRow").height()-155)},toggleSettings:function(){this.graphSettingsView.toggle()},render:function(e){this.$el.html(this.template.render({})),$("#subNavigationBar .breadcrumb").html("Graph: "+this.name),this.resize(),this.fetchGraph(e),this.initFullscreen()},initFullscreen:function(){var e=this;if(!1===window.App.initializedFullscreen||void 0===window.App.initializedFullscreen){window.App.initializedFullscreen=!0,this.isFullscreen=!1;var t=function(t){(document.webkitIsFullScreen||document.mozFullScreen||null!==document.msFullscreenElement)&&(!1===e.isFullscreen?(e.isFullscreen=!0,$("#toggleForce").css("bottom","10px"),$("#toggleForce").css("right","10px"),$("#objectCount").css("bottom","10px"),$("#objectCount").css("left","10px"),$(".nodeInfoDiv").css("top","10px"),$(".nodeInfoDiv").css("left","10px")):(e.isFullscreen=!1,$("#toggleForce").css("bottom","40px"),$("#toggleForce").css("right","40px"),$("#objectCount").css("bottom","50px"),$("#objectCount").css("left","25px"),$(".nodeInfoDiv").css("top",""),$(".nodeInfoDiv").css("left","165px")))};document.addEventListener&&(document.addEventListener("webkitfullscreenchange",t,!1),document.addEventListener("mozfullscreenchange",t,!1),document.addEventListener("fullscreenchange",t,!1),document.addEventListener("MSFullscreenChange",t,!1))}},renderAQLPreview:function(e){this.$el.html(this.template.render({})),this.$el.find(".headerBar").remove();var t=$(".centralRow").height()-250;this.$el.find("#graph-container").css("height",t),this.graphData.modified=this.parseData(this.graphData.original,this.graphData.graphInfo);var i=!1;try{this.renderGraph(this.graphData.modified,null,!0),i=!0}catch(n){}return i},renderAQL:function(e){this.$el.html(this.template.render({})),$("#subNavigationBar .breadcrumb").html("AQL Graph"),$("#subNavigationBar .bottom").html(""),$(".queries-menu").removeClass("active"),this.resize(),this.graphData.modified=this.parseData(this.graphData.original,this.graphData.graphInfo),this.renderGraph(this.graphData.modified,null,!1),this.initFullscreen(),this.graphSettingsView=new window.GraphSettingsView({name:this.name,userConfig:void 0,saveCallback:void 0,noDefinedGraph:!0}),this.graphSettingsView.render()},killCurrentGraph:function(){if(this.currentGraph&&this.currentGraph.renderers)for(var e in this.currentGraph.renderers)try{this.currentGraph.renderers[e].clear(),this.currentGraph.kill(e)}catch(t){}},rerenderAQL:function(e,t){this.killCurrentGraph(),this.renderGraph(this.graphData.modified,null,!1,e,"canvas"),"true"===$("#g_nodeColorByCollection").val()?this.switchNodeColorByCollection(!0):$("#g_nodeColor").is(":disabled")?this.updateColors(!0,!0,null,null,!0):this.ncolor?this.updateColors(!0,!0,this.ncolor,this.ecolor):this.updateColors(!0,!0,"#2ecc71","#2ecc71"),"true"===$("#g_edgeColorByCollection").val()?this.switchEdgeColorByCollection(!0):$("#g_edgeColor").is(":disabled")?this.updateColors(!0,!0,null,null,!0):this.ecolor?this.updateColors(!0,!0,this.ncolor,this.ecolor):this.updateColors(!0,!0,"#2ecc71","#2ecc71")},buildCollectionColors:function(){var e=this;if(!e.collectionColors){e.collectionColors={};var t=0,i={},n={};_.each(this.currentGraph.graph.nodes(),(function(e){i[e.id]=void 0})),_.each(e.currentGraph.graph.edges(),(function(e){n[e.id]=void 0})),_.each(i,(function(i,n){void 0===e.collectionColors[n.split("/")[0]]&&(e.collectionColors[n.split("/")[0]]={color:e.colors.jans[t]},t++)})),t=0,_.each(n,(function(i,n){void 0===e.collectionColors[n.split("/")[0]]&&(e.collectionColors[n.split("/")[0]]={color:e.colors.jans[t]},t++)}))}},switchNodeColorByCollection:function(e,t){var i=this;i.buildCollectionColors(),e?(i.currentGraph.graph.nodes().forEach((function(e){e.color=i.collectionColors[e.id.split("/")[0]].color})),i.currentGraph.refresh()):t?this.updateColors(!0,null,null,null,t):this.ncolor?this.updateColors(!0,null,this.ncolor,this.ecolor):this.updateColors(!0,null,"#2ecc71","#2ecc71")},switchEdgeColorByCollection:function(e,t){var i=this;i.buildCollectionColors(),e?(i.currentGraph.graph.edges().forEach((function(e){e.color=i.collectionColors[e.id.split("/")[0]].color})),i.currentGraph.refresh()):t?this.updateColors(!0,null,null,null,t):this.ecolor?this.updateColors(null,!0,this.ncolor,this.ecolor):this.updateColors(null,!0,"#2ecc71","#2ecc71")},buildCollectionSizes:function(){var e=this;if(!e.nodeEdgesCount){e.nodeEdgesCount={};var t={};_.each(this.currentGraph.graph.edges(),(function(i){void 0===t[i.id]&&(t[i.id]=!0,void 0===e.nodeEdgesCount[i.source]?e.nodeEdgesCount[i.source]=1:e.nodeEdgesCount[i.source]+=1,void 0===e.nodeEdgesCount[i.target]?e.nodeEdgesCount[i.target]=1:e.nodeEdgesCount[i.target]+=1)}))}},switchNodeSizeByCollection:function(e){var t=this;e?(t.buildCollectionSizes(),t.currentGraph.graph.nodes().forEach((function(e){e.size=t.nodeEdgesCount[e.id]}))):t.currentGraph.graph.nodes().forEach((function(e){e.size=15})),t.currentGraph.refresh()},switchEdgeType:function(e){var t={nodes:this.currentGraph.graph.nodes(),edges:this.currentGraph.graph.edges(),settings:{}};this.killCurrentGraph(),this.renderGraph(t,null,!1,null,null,e)},switchLayout:function(e){var t={nodes:this.currentGraph.graph.nodes(),edges:this.currentGraph.graph.edges(),settings:{}};this.killCurrentGraph(),this.renderGraph(t,null,!1,e),"true"===$("#g_nodeColorByCollection").val()&&this.switchNodeColorByCollection(!0),"true"===$("#g_edgeColorByCollection").val()?this.switchEdgeColorByCollection(!0):this.switchEdgeColorByCollection(!1)},parseData:function(e,t){var i={},n={},r="#2ecc71",a={nodes:[],edges:[],settings:{}};if(this.ncolor&&(r=this.ncolor),"object"===t){_.each(e,(function(e){e.edges&&e.vertices&&(_.each(e.edges,(function(e){null!==e&&(n[e._id]={id:e._id,source:e._from,color:"#cccccc",target:e._to})})),_.each(e.vertices,(function(e){null!==e&&(i[e._id]={id:e._id,label:e._key,size:.3,color:r,x:Math.random(),y:Math.random()})})))}));var o=[];_.each(i,(function(e){a.nodes.push(e),o.push(e.id)})),_.each(n,(function(e){o.includes(e.source)&&o.includes(e.target)&&a.edges.push(e)}))}else if("array"===t){var s={};_.each(e,(function(e){e&&(i[e._from]=null,i[e._to]=null,e._id&&(s[e._id]={id:e._id,source:e._from,color:"#cccccc",target:e._to}))})),_.each(i,(function(e,t){a.nodes.push({id:t,label:t,size:.3,color:r,x:Math.random(),y:Math.random()})})),_.each(s,(function(e){a.edges.push(e)}))}return a},rerender:function(){this.fetchGraph()},fetchGraph:function(e){var t=this;$(this.el).append('<div id="calculatingGraph" style="position: absolute; left: 25px; top: 130px;"><i class="fa fa-circle-o-notch fa-spin" style="margin-right: 10px;"></i><span id="calcText">Fetching graph data. Please wait ... </span></br></br></br><span style="font-weight: 100; opacity: 0.6; font-size: 9pt;">If it`s taking too much time to draw the graph, please navigate to: <a style="font-weight: 500" href="'+window.location.href+'/graphs">Graphs View</a></br>Click the settings icon and reset the display settings.It is possible that the graph is too big to be handled by the browser.</span></div>');var i=function(){var i={};t.graphConfig&&(delete(i=_.clone(t.graphConfig)).layout,delete i.edgeType,delete i.renderer),t.tmpStartNode&&(t.graphConfig?0===t.graphConfig.nodeStart.length&&(i.nodeStart=t.tmpStartNode):i.nodeStart=t.tmpStartNode),t.setupSigma(),t.fetchStarted=new Date,$.ajax({type:"GET",url:arangoHelper.databaseUrl("/_admin/aardvark/graph/"+encodeURIComponent(t.name)),contentType:"application/json",data:i,success:function(i){!0===i.empty?t.renderGraph(i,e):(i.settings&&i.settings.startVertex&&void 0===t.graphConfig.startNode&&void 0===t.tmpStartNode&&(t.tmpStartNode=i.settings.startVertex._id),t.fetchFinished=new Date,t.calcStart=t.fetchFinished,$("#calcText").html("Server response took "+Math.abs(t.fetchFinished.getTime()-t.fetchStarted.getTime())+" ms. Initializing graph engine. Please wait ... "),window.setTimeout((function(){t.renderGraph(i,e)}),50))},error:function(e){try{var i;if(e.responseJSON.exception)if(i=e.responseJSON.exception,-1!==e.responseJSON.exception.search("1205")){var n='Starting point: <span style="font-weight: 400">'+t.graphConfig.nodeStart+"</span> is invalid";$("#calculatingGraph").html('<div style="font-weight: 300; font-size: 10.5pt"><span style="font-weight: 400">Stopped. </span></br></br>'+n+'. Please <a style="color: #3498db" href="'+window.location.href+'/settings">choose a different start node.</a></div>')}else $("#calculatingGraph").html("Failed to fetch graph information.");else i=e.responseJSON.errorMessage,$("#calculatingGraph").html("Failed to fetch graph information: "+e.responseJSON.errorMessage);arangoHelper.arangoError("Graph",i)}catch(r){}}})};void 0===t.graphConfig||null===t.graphConfig?t.userConfig.fetch({success:function(e){var n=frontendConfig.db+"_"+t.name;try{t.graphConfig=e.toJSON().graphs[n],t.getGraphSettings(i),void 0===t.graphConfig||null===t.graphConfig?(t.graphSettingsView=new window.GraphSettingsView({name:t.name,userConfig:t.userConfig,saveCallback:t.render}),t.graphSettingsView.setDefaults(!0,!0)):(t.graphSettingsView&&t.graphSettingsView.remove(),t.graphSettingsView=new window.GraphSettingsView({name:t.name,userConfig:t.userConfig,saveCallback:t.render}),t.graphSettingsView.render())}catch(r){t.getGraphSettings(i)}}}):this.getGraphSettings(i)},setupSigma:function(){if(this.graphConfig&&this.graphConfig.edgeLabel){sigma.utils.pkg("sigma.settings");sigma.settings=sigma.utils.extend(sigma.settings||{},{defaultEdgeLabelColor:"#000",defaultEdgeLabelActiveColor:"#000",defaultEdgeLabelSize:12,edgeLabelSize:"fixed",edgeLabelThreshold:1,edgeLabelSizePowRatio:1}),sigma.settings.drawEdgeLabels=!0,sigma.settings.clone=!0}},contextState:{createEdge:!1,_from:!1,_to:!1,fromX:!1,fromY:!1},removeOldContextMenu:function(){$("#nodeContextMenu").remove()},clearOldContextMenu:function(e){var t=this;$("#nodeContextMenu").remove();$("#graph-container").append('<div id="nodeContextMenu" class="nodeContextMenu animated zoomIn"></div>'),e&&_.each(this.contextState,(function(e,i){t.contextState[i]=!1})),document.getElementsByClassName("sigma-mouse")[0].removeEventListener("mousemove",t.drawLine.bind(this),!1)},trackCursorPosition:function(e){this.cursorX=e.x,this.cursorY=e.y},deleteNode:function(e,t){var i,n,r,a=this;n=(i=t||$("#delete-node-attr-id").text()).split("/")[0],r=i.split("/")[1];var o=arangoHelper.databaseUrl("/_api/gharial/"+encodeURIComponent(a.name)+"/vertex/"+encodeURIComponent(i.split("/")[0])+"/"+encodeURIComponent(i.split("/")[1]));if("yes"===$("#delete-node-edges-attr").val())$.ajax({cache:!1,type:"DELETE",contentType:"application/json",url:o,success:function(e){a.currentGraph.graph.dropNode(i),a.currentGraph.refresh()},error:function(){arangoHelper.arangoError("Graph","Could not delete node.")}});else{this.documentStore.deleteDocument(n,r,(function(e){e?arangoHelper.arangoError("Graph","Could not delete node."):(a.currentGraph.graph.dropNode(i),a.currentGraph.refresh())}))}window.modalView.hide()},deleteNodes:function(){var e=this;try{var t=JSON.parse($("#delete-nodes-arr-id").text());_.each(t,(function(t){e.deleteNode(null,t)}))}catch(i){}},deleteNodesModal:function(){var e=[];if(_.each(this.selectedNodes,(function(t){e.push(t)})),0!==e.length){var t=[],i=[];i.push(window.modalView.createReadOnlyEntry("delete-nodes-arr-id","Really delete nodes",JSON.stringify(e))),t.push(window.modalView.createDeleteButton("Delete",this.deleteNodes.bind(this))),window.modalView.show("modalTable.ejs","Delete nodes",t,i)}else arangoHelper.arangoNotification("Graph","No nodes selected.")},deleteNodeModal:function(e){var t=[],i=[];i.push(window.modalView.createReadOnlyEntry("delete-node-attr-id","Really delete node",e)),this.noDefinedGraph||i.push(window.modalView.createSelectEntry("delete-node-edges-attr","Also delete edges?",void 0,void 0,[{value:"yes",label:"Yes"},{value:"no",label:"No"}])),t.push(window.modalView.createDeleteButton("Delete",this.deleteNode.bind(this))),window.modalView.show("modalTable.ejs","Delete node",t,i)},addNode:function(){var e=this,t=$(".modal-body #new-node-collection-attr").val(),i=$(".modal-body #new-node-key-attr").last().val(),n={};try{n=this.editor.get()}catch(x){return void arangoHelper.arangoError("failed to parse JSON document",x.message)}if(""!==i&&void 0!==i&&(n._key=i),this.graphSettings.isSmart){var r=$("#new-smart-key-attr").val();n[this.graphSettings.smartGraphAttribute]=""!==r&&void 0!==r?r:null}this.collection.createNode(e.name,t,n,(function(t,i,n){t?arangoHelper.arangoError("Could not create node",n):($("#emptyGraph").remove(),e.currentGraph.graph.addNode({id:i,label:i.split("/")[1]||"",size:e.graphConfig.nodeSize||15,color:e.graphConfig.nodeColor||e.ncolor||"#2ecc71",originalColor:e.graphConfig.nodeColor||e.ncolor||"#2ecc71",x:e.addNodeX+e.currentGraph.camera.x,y:e.addNodeY+e.currentGraph.camera.y}),window.modalView.hide(),e.currentGraph.refresh(),e.cameraToNode(e.currentGraph.graph.nodes(i)))}))},deleteEdgeModal:function(e){var t=[],i=[];i.push(window.modalView.createReadOnlyEntry("delete-edge-attr-id","Really delete edge",e)),t.push(window.modalView.createDeleteButton("Delete",this.deleteEdge.bind(this))),window.modalView.show("modalTable.ejs","Delete edge",t,i)},deleteEdge:function(){var e=this,t=$("#delete-edge-attr-id").text(),i=t.split("/")[0],n=t.split("/")[1];this.documentStore.deleteDocument(i,n,(function(i){i?arangoHelper.arangoError("Graph","Could not delete edge."):(e.currentGraph.graph.dropEdge(t),e.currentGraph.refresh())})),window.modalView.hide()},addNodeModal:function(){if(0!==this.graphSettings.vertexCollections){var e=[],t=[],i=[];_.each(this.graphSettings.vertexCollections,(function(e){i.push({label:e.name,value:e.name})})),t.push(window.modalView.createTextEntry("new-node-key-attr","_key",void 0,"The node's unique key (optional attribute, leave empty for autogenerated key)","is optional: leave empty for autogenerated key",!1,[{rule:Joi.string().allow("").optional(),msg:""}])),this.graphSettings.isSmart&&t.push(window.modalView.createTextEntry("new-smart-key-attr",this.graphSettings.smartGraphAttribute+"*",void 0,"The attribute value that is used to shard the vertices of a SmartGraph. \nEvery vertex in this SmartGraph has to have this attribute. \nCannot be modified later.","Cannot be modified later.",!1,[{rule:Joi.string().allow("").optional(),msg:""}])),t.push(window.modalView.createSelectEntry("new-node-collection-attr","Collection",void 0,"Please select the target collection for the new node.",i)),t.push(window.modalView.createJsonEditor()),e.push(window.modalView.createSuccessButton("Create",this.addNode.bind(this))),window.modalView.show("modalTable.ejs","Create node",e,t);var n=document.getElementById("jsoneditor");this.resize();var r={onChange:function(){},onModeChange:function(e){},search:!0,mode:"code",modes:["tree","code"],ace:window.ace};this.editor=new JSONEditor(n,r)}else arangoHelper.arangoError("Graph","No valid vertex collections found.")},addEdge:function(){var e,t=this,i=t.contextState._from,n=t.contextState._to;e=""===$(".modal-body #new-edge-collection-attr").val()?$(".modal-body #new-edge-collection-attr").text():$(".modal-body #new-edge-collection-attr").val();var r,a=$(".modal-body #new-edge-key-attr").last().val(),o=function(e,r,a){if(e)arangoHelper.arangoError("Could not create edge",a);else{var o;try{o=this.editor.get()}catch(x){return void arangoHelper.arangoError("failed to parse JSON document",x.message)}try{o.source=i}catch(x){(o={}).source=i}o.target=n,o.id=r,o.color=t.graphConfig.edgeColor||t.ecolor,"true"===t.graphConfig.edgeEditable&&(o.size=1),t.currentGraph.graph.addEdge(o),t.graphConfig&&"curve"===t.graphConfig.edgeType&&sigma.canvas.edges.autoCurve(t.currentGraph),t.currentGraph.refresh()}t.clearOldContextMenu(!0),window.modalView.hide()}.bind(this);try{r=this.editor.get()}catch(x){return void arangoHelper.arangoError("failed to parse JSON document",x.message)}try{r._from=i}catch(x){(r={})._from=i}r._to=n,""!==a&&void 0!==a&&(r._key=a),this.collection.createEdge(t.name,e,r,o)},addEdgeModal:function(e){if(0!==e){var t=[],i=[];if(i.push(window.modalView.createTextEntry("new-edge-key-attr","_key",void 0,"The edge's unique key (optional attribute, leave empty for autogenerated key)","is optional: leave empty for autogenerated key",!1,[{rule:Joi.string().allow("").optional(),msg:""}])),e.length>1){var n=[];_.each(e,(function(e){n.push({label:e,value:e})})),i.push(window.modalView.createSelectEntry("new-edge-collection-attr","Edge collection",void 0,"Please select the target collection for the new edge.",n))}else i.push(window.modalView.createReadOnlyEntry("new-edge-collection-attr","Edge collection",e[0],"The edge collection to be used."));i.push(window.modalView.createJsonEditor()),t.push(window.modalView.createSuccessButton("Create",this.addEdge.bind(this))),window.modalView.show("modalTable.ejs","Create edge",t,i);var r=document.getElementById("jsoneditor");this.resize();var a={onChange:function(){},onModeChange:function(e){},search:!0,mode:"code",modes:["tree","code"],ace:window.ace};this.editor=new JSONEditor(r,a)}else arangoHelper.arangoError("Graph","No valid edge definitions found.")},updateColors:function(e,t,i,n,r){var a=frontendConfig.db+"_"+this.name,o=this;i&&(o.ncolor=i),n&&(o.ecolor=n),this.userConfig.fetch({success:function(s){if(!0===e){o.graphConfig=s.toJSON().graphs[a];try{o.currentGraph.graph.nodes().forEach((function(e){e.color=r?e.sortColor:i}))}catch(l){o.graphNotInitialized=!0,o.tmpGraphArray=[e,t,i,n]}}if(!0===t)try{o.currentGraph.graph.edges().forEach((function(e){e.color=r?e.sortColor:n}))}catch(c){o.graphNotInitialized=!0,o.tmpGraphArray=[e,t,i,n]}o.currentGraph&&o.currentGraph.refresh()}})},nodesContextMenuCheck:function(e){this.nodesContextEventState=e,this.openNodesDate=new Date},createContextMenu:function(e){var t=this,i=t.cursorX-50,n=t.cursorY-50;this.clearOldContextMenu();$("#nodeContextMenu").css("position","fixed"),$("#nodeContextMenu").css("left",i),$("#nodeContextMenu").css("top",n),$("#nodeContextMenu").width(100),$("#nodeContextMenu").height(100),function(e){var i=new wheelnav("nodeContextMenu");i.maxPercent=1,i.wheelRadius=50,i.clockwise=!1,i.colors=t.colors.hotaru,i.multiSelect=!0,i.clickModeRotate=!1,i.slicePathFunction=slicePath().DonutSlice,i.createWheel([icon.plus,icon.arrowleft2]),i.navItems[0].selected=!1,i.navItems[0].hovered=!1,i.navItems[0].navigateFunction=function(e){t.clearOldContextMenu(),t.addNodeModal(),t.removeOldContextMenu(),t.removeHelp()},i.navItems[1].navigateFunction=function(e){t.clearOldContextMenu(),t.removeOldContextMenu()};_.each(["Add new node.","Close menu."],(function(e,n){i.navItems[n].navTitle.mouseover((function(){t.drawHelp(e)})),i.navItems[n].navTitle.mouseout((function(){t.removeHelp()}))})),i.navItems[0].selected=!1,i.navItems[0].hovered=!1}()},createEdgeContextMenu:function(e,t){var i=this,n=this.cursorX-165,r=this.cursorY-120;this.clearOldContextMenu();$("#nodeContextMenu").css("left",n+115),$("#nodeContextMenu").css("top",r+72),$("#nodeContextMenu").width(100),$("#nodeContextMenu").height(100),function(e,t){var n=new wheelnav("nodeContextMenu");n.maxPercent=1,n.wheelRadius=50,n.clockwise=!1,n.colors=["#364C4A","#497C7F","#92C5C0","#858168","#CCBCA5"],n.multiSelect=!0,n.clickModeRotate=!1,n.slicePathFunction=slicePath().DonutSlice,n.createWheel(["imgsrc:img/gv_edit.png","imgsrc:img/gv_trash.png"]),n.navItems[0].selected=!1,n.navItems[0].hovered=!1,n.navItems[0].navigateFunction=function(e){i.clearOldContextMenu(),i.editEdge(t),i.removeHelp()},n.navItems[1].navigateFunction=function(e){i.clearOldContextMenu(),i.deleteEdgeModal(t),i.removeHelp()};_.each(["Edit the edge.","Delete the edge."],(function(e,t){n.navItems[t].navTitle.mouseover((function(){i.drawHelp(e)})),n.navItems[t].navTitle.mouseout((function(){i.removeHelp()}))})),n.navItems[0].selected=!1,n.navItems[0].hovered=!1}(0,e)},createNodeContextMenu:function(e,t){var i,n,r,a=this;_.each(t.data.node,(function(e,t){"renderer"===t.substr(0,8)&&"x"===t.charAt(t.length-1)&&(i=e),"renderer"===t.substr(0,8)&&"y"===t.charAt(t.length-1)&&(n=e),"renderer"===t.substr(0,8)&&"e"===t.charAt(t.length-1)&&(r=e)})),void 0===i&&void 0===n&&_.each(t.data.node,(function(e,t){"read_cam"===t.substr(0,8)&&"x"===t.charAt(t.length-1)&&(i=e+$("#graph-container").width()/2),"read_cam"===t.substr(0,8)&&"y"===t.charAt(t.length-1)&&(n=e+$("#graph-container").height()/2)}));var o=2.5*r;o<75&&(o=75),this.clearOldContextMenu();var s=$("#graph-container").offset();$("#nodeContextMenu").width(2*o),$("#nodeContextMenu").height(2*o),$("#nodeContextMenu").css("left",i+s.left-o),$("#nodeContextMenu").css("top",n+s.top-o),function(e,t){var r=new wheelnav("nodeContextMenu");r.maxPercent=1,r.wheelRadius=o,r.clockwise=!1,r.colors=["#364C4A","#497C7F","#92C5C0","#858168","#CCBCA5"],r.multiSelect=!1,r.clickModeRotate=!1,r.sliceHoverAttr={stroke:"#fff","stroke-width":2},r.slicePathFunction=slicePath().DonutSlice,a.noDefinedGraph?r.createWheel(["imgsrc:img/gv_edit.png","imgsrc:img/gv_trash.png"]):r.createWheel(["imgsrc:img/gv_edit.png","imgsrc:img/gv_trash.png","imgsrc:img/gv_flag.png","imgsrc:img/gv_link.png","imgsrc:img/gv_expand.png"]),$("#nodeContextMenu").addClass("animated bounceIn"),window.setTimeout((function(){r.navItems[0].navigateFunction=function(e){a.clearOldContextMenu(),a.editNode(t),a.removeHelp()},r.navItems[1].navigateFunction=function(e){a.clearOldContextMenu(),a.deleteNodeModal(t),a.removeHelp()},a.noDefinedGraph||(r.navItems[2].navigateFunction=function(e){a.clearOldContextMenu(),a.setStartNode(t),a.removeHelp()},r.navItems[3].navigateFunction=function(e){a.contextState.createEdge=!0,a.contextState._from=t,a.contextState.fromX=i,a.contextState.fromY=n;var r=document.getElementsByClassName("sigma-mouse")[0];a.drawHelp("Now click destination node, or click background to cancel."),r.addEventListener("mousemove",a.drawLine.bind(this),!1),a.clearOldContextMenu(),a.removeHelp()},r.navItems[4].navigateFunction=function(e){a.clearOldContextMenu(),a.expandNode(t),a.removeHelp()});var e=["Edit the node.","Delete the node."];a.noDefinedGraph||(e.push("Set as startnode."),e.push("Draw edge."),e.push("Expand the node.")),_.each(e,(function(e,t){r.navItems[t].navTitle.mouseover((function(){a.drawHelp(e)})),r.navItems[t].navTitle.mouseout((function(){a.removeHelp()}))})),r.navItems[0].selected=!1,r.navItems[0].hovered=!1}),300)}(0,e)},drawHelp:function(e){null===document.getElementById("helpTooltip")?$(this.el).append('<div id="helpTooltip" class="helpTooltip"><span>'+e+"</span></div>"):$("#helpTooltip span").text(e),$("#helpTooltip").show()},removeHelp:function(){$("#helpTooltip").remove()},clearMouseCanvas:function(){var e=document.getElementsByClassName("sigma-mouse")[0];e.getContext("2d").clearRect(0,0,$(e).width(),$(e).height())},expandNode:function(e){var t=this,i={};this.graphConfig&&(delete(i=_.clone(this.graphConfig)).layout,delete i.edgeType,delete i.renderer),i.query="FOR v, e, p IN 1..1 ANY "+JSON.stringify(e)+" GRAPH "+JSON.stringify(t.name)+" RETURN p",$.ajax({type:"GET",url:arangoHelper.databaseUrl("/_admin/aardvark/graph/"+encodeURIComponent(this.name)),contentType:"application/json",data:i,success:function(i){t.checkExpand(i,e)},error:function(t){arangoHelper.arangoError("Graph","Could not expand node: "+e+".")}}),t.removeHelp()},checkExpand:function(e,t){var i,n=this,r=e.nodes,a=e.edges,o=this.currentGraph.graph.nodes(),s=0,l=0;_.each(r,(function(e){i=!1,_.each(o,(function(n){!1===i&&(e.id===n.id?(n.id===t&&-1===n.label.indexOf(" (expanded)")&&(n.label=n.label+" (expanded)"),i=!0):i=!1)})),!1===i&&(e.originalColor=e.color,n.currentGraph.graph.addNode(e),s++)})),_.each(a,(function(e){void 0===n.currentGraph.graph.edges(e.id)&&(e.originalColor=e.color,n.currentGraph.graph.addEdge(e),l++)})),$("#nodesCount").text(parseInt($("#nodesCount").text(),10)+s),$("#edgesCount").text(parseInt($("#edgesCount").text(),10)+l),(s>0||l>0)&&("force"===n.algorithm?n.startLayout(!0,t):"fruchtermann"===n.algorithm?(sigma.layouts.fruchtermanReingold.start(n.currentGraph),n.currentGraph.refresh(),n.cameraToNode(t,1e3)):"noverlap"===n.algorithm&&n.startLayout(!0,t))},cameraToNode:function(e,t){var i=this;"string"===typeof e&&(e=i.currentGraph.graph.nodes(e));var n=function(e){sigma.misc.animation.camera(i.currentGraph.camera,{x:e.x,y:e.y},{duration:1e3})};t?window.setTimeout((function(){n(e)}),t):n(e)},drawLine:function(e){var t=window.App.graphViewer.contextState;if(t.createEdge){var i=t.fromX,n=t.fromY,r=e.offsetX,a=e.offsetY,o=document.getElementsByClassName("sigma-mouse")[0],s=o.getContext("2d");s.clearRect(0,0,$(o).width(),$(o).height()),s.beginPath(),s.moveTo(i,n),s.lineTo(r,a),s.strokeStyle=this.newEdgeColor,s.stroke()}},getGraphSettings:function(e){var t=this;this.userConfig.fetch({success:function(i){var n=frontendConfig.db+"_"+t.name;t.graphConfig=i.toJSON().graphs[n],t.graphSettingsView&&t.graphSettingsView.remove(),t.graphSettingsView=new window.GraphSettingsView({name:t.name,userConfig:t.userConfig,saveCallback:t.render});var r=function(){t.graphSettingsView.render(),e&&e(t.graphConfig)};void 0===t.graphConfig?(t.graphSettingsView.setDefaults(!0,!0),t.userConfig.fetch({success:function(e){t.graphConfig=e.toJSON().graphs[n],r()}})):r()}})},setStartNode:function(e){this.graphConfig.nodeStart=e,this.graphSettingsView.saveGraphSettings(void 0,void 0,e)},editNode:function(e){var t=function(e){this.updateNodeLabel(e)}.bind(this);arangoHelper.openDocEditor(e,"doc",t)},updateNodeLabel:function(e){var t=e[0]._id;if(this.graphConfig.nodeLabel&&this.currentGraph.graph.nodes(t).label!==e[0][this.graphConfig.nodeLabel]){var i=e[0].new[this.graphConfig.nodeLabel];this.currentGraph.graph.nodes(t).label="string"===typeof i?i:JSON.stringify(i),this.currentGraph.refresh({skipIndexation:!0})}},editEdge:function(e){var t=function(e){this.updateEdgeLabel(e)}.bind(this);arangoHelper.openDocEditor(e,"edge",t)},updateEdgeLabel:function(e){var t=e[0]._id;if(this.graphConfig.edgeLabel&&this.currentGraph.graph.edges(t).label!==e[0][this.graphConfig.edgeLabel]){var i=e[0].new[this.graphConfig.edgeLabel];this.currentGraph.graph.edges(t).label="string"===typeof i?i:JSON.stringify(i),this.currentGraph.refresh({skipIndexation:!0})}},reloadGraph:function(){Backbone.history.loadUrl(Backbone.history.fragment)},getEdgeDefinitionCollections:function(e,t){var i=[];return _.each(this.model.edgeDefinitions,(function(n){_.each(n.from,(function(r){r===e&&_.each(n.to,(function(e){e===t&&i.push(n.collection)}))}))})),i},initializeGraph:function(e,t){e.refresh()},renderGraph:function(e,t,i,n,r,a){var o=this;this.graphSettings=e.settings;var s="#2ecc71";if(o.ncolor&&(s=o.ncolor),e.edges&&e.nodes){0===e.nodes.length&&0===e.edges.length&&e.nodes.push({id:e.settings.startVertex._id,label:e.settings.startVertex._key,size:10,color:s,x:Math.random(),y:Math.random()});this.aqlMode||$("#graph-container").append('<div id="objectCount" style="position: absolute; left: 25px; bottom: 50px; animated fadeIn"><span style="margin-right: 10px" class="arangoState"><span id="nodesCount">'+e.nodes.length+'</span> nodes</span><span class="arangoState"><span id="edgesCount">'+e.edges.length+"</span> edges</span></div>")}this.Sigma=sigma,o.algorithm=n||"force",o.renderer=r||"canvas",this.graphConfig&&(this.graphConfig.layout&&(n||(o.algorithm=this.graphConfig.layout)),this.graphConfig.renderer&&(r||(o.renderer=this.graphConfig.renderer))),"canvas"===o.renderer&&(o.isEditable=!0);var l={scalingMode:"inside",borderSize:3,defaultNodeBorderColor:"#8c8c8c",doubleClickEnabled:!1,minNodeSize:5,labelThreshold:9,maxNodeSize:15,batchEdgesDrawing:!0,minEdgeSize:1,maxEdgeSize:1,enableEdgeHovering:!0,edgeHoverColor:"#8c8c8c",defaultEdgeHoverColor:"#8c8c8c",defaultEdgeType:"arrow",edgeHoverSizeRatio:2.5,edgeHoverExtremities:!0,nodesPowRatio:.5,autoRescale:!0,mouseEnabled:!0,touchEnabled:!0,approximateLabelWidth:!0,font:"Roboto",nodeHaloColor:"rgba(146,197,192, 0.8)",nodeHaloStroke:!1,nodeHaloStrokeColor:"#000",nodeHaloStrokeWidth:0,nodeHaloSize:25,nodeHaloClustering:!1,nodeHaloClusteringMaxRadius:1e3,edgeHaloColor:"#fff",edgeHaloSize:10,drawHalo:!0};"canvas"===o.renderer&&(l.autoCurveSortByDirection=!0),e.nodes&&e.nodes.length>250&&(l.hideEdgesOnMove=!0),this.graphConfig&&this.graphConfig.edgeType&&(l.defaultEdgeType=this.graphConfig.edgeType),a&&(l.defaultEdgeType=a),"arrow"===l.defaultEdgeType&&(l.minArrowSize=7),i&&(o.renderer="canvas",e.nodes.length<500?o.algorithm="fruchtermann":l.scalingMode="outside",l.drawEdgeLabels=!1,l.minNodeSize=2,l.maxNodeSize=8),"webgl"===o.renderer&&(l.enableEdgeHovering=!1);var c=new this.Sigma({graph:e,container:"graph-container",renderer:{container:document.getElementById("graph-container"),type:o.renderer},settings:l});if(this.currentGraph=c,this.aqlMode||sigma.plugins.fullScreen({container:"graph-container",btnId:"graph-fullscreen-btn"}),c.graph.nodes().forEach((function(e){e.originalColor=e.color})),c.graph.edges().forEach((function(e){e.originalColor=e.color})),"noverlap"===o.algorithm)c.configNoverlap({nodeMargin:.1,scaleNodes:1.05,gridSize:75,easing:"quadraticInOut",duration:1500}).bind("start stop interpolate",(function(e){e.type,e.type}));else if("fruchtermann"===o.algorithm){sigma.layouts.fruchtermanReingold.configure(c,{iterations:100,easing:"quadraticInOut",duration:1500}).bind("start stop interpolate",(function(e){}))}if(!o.aqlMode){var d=function(e,t){if($(".nodeInfoDiv").remove(),!1===o.contextState.createEdge&&window.location.hash.indexOf("graph")>-1){var i=function(e,t,i){if(e)o.currentGraph.graph.dropNode(i),o.currentGraph.refresh();else{var n="";n+='<span class="title">ID </span> <span class="nodeId">'+t.documents[0]._id+"</span>",Object.keys(t.documents[0]).length>3&&(n+='<span class="title">ATTRIBUTES </span>'),_.each(t.documents[0],(function(e,t){"_key"!==t&&"_id"!==t&&"_rev"!==t&&"_from"!==t&&"_to"!==t&&(n+='<span class="nodeAttribute">'+t+"</span>")}));var r='<div id="nodeInfoDiv" class="nodeInfoDiv" style="display: none;">'+n+"</div>";$("#graph-container").append(r),o.isFullscreen&&($(".nodeInfoDiv").css("top","10px"),$(".nodeInfoDiv").css("left","10px")),$("#nodeInfoDiv").fadeIn("slow")}};t?o.documentStore.getDocument(e.data.node.id.split("/")[0],e.data.node.id.split("/")[1],i):o.documentStore.getDocument(e.data.edge.id.split("/")[0],e.data.edge.id.split("/")[1],i)}};c.bind("clickNode",(function(e){if(!0===o.contextState.createEdge){o.clearMouseCanvas(),o.removeHelp(),o.contextState._to=e.data.node.id;var t=o.contextState._from.split("/")[0],i=o.contextState._to.split("/")[0],n=o.getEdgeDefinitionCollections(t,i);0===n.length?arangoHelper.arangoNotification("Graph","No valid edge definition found."):(o.addEdgeModal(n,o.contextState._from,o.contextState._to),o.clearOldContextMenu(!1))}else o.dragging||(!0===o.contextState.createEdge?o.newEdgeColor="#ff0000":o.newEdgeColor="#000000","canvas"===o.renderer&&o.currentGraph.renderers[0].halo({nodes:o.currentGraph.graph.nodes(),nodeHaloColor:"#DF0101",nodeHaloSize:100}),d(e,!0),o.activeNodes=[e.data.node],"canvas"===o.renderer&&c.renderers[0].halo({nodes:[e.data.node]}),o.createNodeContextMenu(e.data.node.id,e))})),o.noDefinedGraph?c.bind("clickStage",(function(e){o.clearOldContextMenu(!0),o.clearMouseCanvas(),o.removeHelp()})):c.bind("clickStage",(function(e){e.data.captor.isDragging?(o.clearOldContextMenu(!0),o.clearMouseCanvas()):!0===o.contextState.createEdge?(o.clearOldContextMenu(!0),o.clearMouseCanvas(),o.removeHelp()):($("#nodeContextMenu").is(":visible")?(o.clearOldContextMenu(!0),o.clearMouseCanvas(),o.removeOldContextMenu()):(o.addNodeX=e.data.captor.x,o.addNodeY=e.data.captor.y,o.createContextMenu(e),o.clearMouseCanvas()),c.renderers[0].halo({nodes:o.activeNodes}))}))}if("canvas"===o.renderer){this.graphConfig&&"curve"===this.graphConfig.edgeType&&sigma.canvas.edges.autoCurve(c),c.bind("clickEdge",(function(e){d(e,!1)})),c.renderers[0].bind("render",(function(e){c.renderers[0].halo({nodes:o.activeNodes})}));var h=function(){o.nodeHighlighted=!1,o.activeNodes=[],c.graph.nodes().forEach((function(e){e.color=e.originalColor})),c.graph.edges().forEach((function(e){e.color=e.originalColor})),$(".nodeInfoDiv").remove(),c.refresh({skipIndexation:!0})};c.bind("rightClickStage",(function(e){o.nodeHighlighted="undefinedid",h()})),c.bind("rightClickNode",(function(e){if(o.nodeHighlighted!==e.data.node.id){var t=e.data.node.id,i=c.graph.neighbors(t);i[t]=e.data.node,c.graph.nodes().forEach((function(e){i[e.id]?e.color=e.originalColor:e.color="#eee"})),c.graph.edges().forEach((function(e){i[e.source]&&i[e.target]?e.color="rgb(64, 74, 83)":e.color="#eee"})),o.nodeHighlighted=!0,c.refresh({skipIndexation:!0})}else h()})),this.graphConfig&&this.graphConfig.edgeEditable&&c.bind("clickEdge",(function(e){var t=e.data.edge.id;o.createEdgeContextMenu(t,e)}))}if("noverlap"===o.algorithm)c.startNoverlap();else if("force"===o.algorithm){var u="color: rgb(64, 74, 83); cursor: pointer; position: absolute; right: 30px; bottom: 40px; z-index: 9999;";o.aqlMode&&(u="color: rgb(64, 74, 83); cursor: pointer; position: absolute; right: 30px; margin-top: 10px; margin-right: -15px"),$("#graph-container").after('<div id="toggleForce" style="'+u+'"><i style="margin-right: 5px;" class="fa fa-pause"></i><span> Stop layout</span></div>'),o.startLayout();var p=250;e.nodes&&(p=e.nodes.length,i?p<250?p=250:p+=500:(p<=250&&(p=500),p+=500)),e.empty&&arangoHelper.arangoNotification("Graph","Your graph is empty. Click inside the white window to create your first node."),window.setTimeout((function(){o.stopLayout()}),p)}else"fruchtermann"===o.algorithm&&sigma.layouts.fruchtermanReingold.start(c);"force"!==o.algorithm&&o.reInitDragListener(),document.getElementsByClassName("sigma-mouse")[0].addEventListener("mousemove",o.trackCursorPosition.bind(this),!1),t&&($("#"+t).focus(),$("#graphSettingsContent").animate({scrollTop:$("#"+t).offset().top},2e3)),$("#calculatingGraph").fadeOut("slow"),o.calcFinished=new Date,!0===e.empty&&$(".sigma-background").before('<span id="emptyGraph" style="position: absolute; margin-left: 10px; margin-top: 10px;">The graph is empty. Please right-click to add a node.<span>'),!0===o.graphNotInitialized&&(o.updateColors(o.tmpGraphArray),o.graphNotInitialized=!1,o.tmpGraphArray=[]),"force"===o.algorithm?$("#toggleForce").fadeIn("fast"):$("#toggleForce").fadeOut("fast")},reInitDragListener:function(){var e=this;void 0!==this.dragListener&&(sigma.plugins.killDragNodes(this.currentGraph),this.dragListener={}),this.dragListener=sigma.plugins.dragNodes(this.currentGraph,this.currentGraph.renderers[0]),this.dragListener.bind("drag",(function(t){e.dragging=!0})),this.dragListener.bind("drop",(function(t){window.setTimeout((function(){e.dragging=!1}),400)}))},keyUpFunction:function(e){switch(e.keyCode){case 76:e.altKey&&this.toggleLasso()}},toggleLayout:function(){this.layouting?this.stopLayout():this.startLayout()},startLayout:function(e,t){var i=this;this.currentGraph.settings("drawLabels",!1),this.currentGraph.settings("drawEdgeLabels",!1),sigma.plugins.killDragNodes(this.currentGraph),!0===e&&(this.currentGraph.killForceAtlas2(),window.setTimeout((function(){i.stopLayout(),t&&i.currentGraph.refresh({skipIndexation:!0})}),500)),$("#toggleForce .fa").removeClass("fa-play").addClass("fa-pause"),$("#toggleForce span").html("Stop layout"),this.layouting=!0,this.aqlMode,this.currentGraph.startForceAtlas2({worker:!0})},stopLayout:function(){$("#toggleForce .fa").removeClass("fa-pause").addClass("fa-play"),$("#toggleForce span").html("Resume layout"),this.layouting=!1,this.currentGraph.stopForceAtlas2(),this.currentGraph.settings("drawLabels",!0),this.currentGraph.settings("drawEdgeLabels",!0),this.currentGraph.refresh({skipIndexation:!0}),this.reInitDragListener()}})}()},function(e,t){!function(){"use strict";window.HelpUsView=Backbone.View.extend({el:"#content",template:templateEngine.createTemplate("helpUsView.ejs"),render:function(){this.$el.html(this.template.render({}))}})}()},function(e,t){!function(){"use strict";window.IndicesView=Backbone.View.extend({el:"#content",initialize:function(e){var t=this;this.collectionName=e.collectionName,this.model=this.collection,t.interval=window.setInterval((function(){-1!==window.location.hash.indexOf("cIndices/"+t.collectionName)&&window.VISIBLE&&$("#collectionEditIndexTable").is(":visible")&&!$("#indexDeleteModal").is(":visible")&&t.rerender()}),t.refreshRate)},interval:null,refreshRate:1e4,template:templateEngine.createTemplate("indicesView.ejs"),events:{},remove:function(){return this.interval&&window.clearInterval(this.interval),this.$el.empty().off(),this.stopListening(),this.unbind(),delete this.el,this},render:function(){var e=this,t=function(t){var i=t.supports.aliases;i=i?i.indexes:{},$(e.el).html(e.template.render({model:e.model,supported:t.supports.indexes.filter((function(e){return!i.hasOwnProperty(e)}))})),e.breadcrumb(),window.arangoHelper.buildCollectionSubNav(e.collectionName,"Indexes"),e.getIndex(),arangoHelper.checkCollectionPermissions(e.collectionName,e.changeViewToReadOnly)};this.engineData?t(this.engineData):$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_api/engine"),contentType:"application/json",processData:!1,success:function(i){e.engineData=i,t(i)},error:function(){arangoHelper.arangoNotification("Index","Could not fetch index information.")}})},rerender:function(){this.getIndex(!0)},changeViewToReadOnly:function(){$(".breadcrumb").html($(".breadcrumb").html()+" (read-only)"),$("#addIndex").addClass("disabled"),$("#addIndex").css("color","rgba(0,0,0,.5)"),$("#addIndex").css("cursor","not-allowed")},breadcrumb:function(){$("#subNavigationBar .breadcrumb").html("Collection: "+(this.collectionName.length>64?this.collectionName.substr(0,64)+"...":this.collectionName))},getIndex:function(e){var t=function(t,i,n){t?window.arangoHelper.arangoError("Index",i.errorMessage):this.renderIndex(i,n,e)}.bind(this);this.model.getIndex(t)},createIndex:function(){var e,t,i,n,r,a,o=this,s={};switch($("#newIndexType").val()){case"Ttl":e=$("#newTtlFields").val();var l=parseInt($("#newTtlExpireAfter").val(),10)||0;r=o.checkboxToValue("#newTtlBackground"),a=$("#newTtlName").val(),s={type:"ttl",fields:o.stringToArray(e),expireAfter:l,inBackground:r,name:a};break;case"Geo":e=$("#newGeoFields").val(),r=o.checkboxToValue("#newGeoBackground");var c=o.checkboxToValue("#newGeoJson");a=$("#newGeoName").val(),s={type:"geo",fields:o.stringToArray(e),geoJson:c,inBackground:r,name:a};break;case"Persistent":e=$("#newPersistentFields").val(),t=o.checkboxToValue("#newPersistentUnique"),i=o.checkboxToValue("#newPersistentSparse"),n=o.checkboxToValue("#newPersistentDeduplicate"),r=o.checkboxToValue("#newPersistentBackground"),a=$("#newPersistentName").val(),s={type:"persistent",fields:o.stringToArray(e),unique:t,sparse:i,deduplicate:n,inBackground:r,name:a};break;case"Hash":e=$("#newHashFields").val(),t=o.checkboxToValue("#newHashUnique"),i=o.checkboxToValue("#newHashSparse"),n=o.checkboxToValue("#newHashDeduplicate"),r=o.checkboxToValue("#newHashBackground"),a=$("#newHashName").val(),s={type:"hash",fields:o.stringToArray(e),unique:t,sparse:i,deduplicate:n,inBackground:r,name:a};break;case"Fulltext":e=$("#newFulltextFields").val();var d=parseInt($("#newFulltextMinLength").val(),10)||0;r=o.checkboxToValue("#newFulltextBackground"),a=$("#newFulltextName").val(),s={type:"fulltext",fields:o.stringToArray(e),minLength:d,inBackground:r,name:a};break;case"Skiplist":e=$("#newSkiplistFields").val(),t=o.checkboxToValue("#newSkiplistUnique"),i=o.checkboxToValue("#newSkiplistSparse"),n=o.checkboxToValue("#newSkiplistDeduplicate"),r=o.checkboxToValue("#newSkiplistBackground"),a=$("#newSkiplistName").val(),s={type:"skiplist",fields:o.stringToArray(e),unique:t,sparse:i,deduplicate:n,inBackground:r,name:a}}this.model.createIndex(s,(function(e,t){if(e)if(t){var i=JSON.parse(t.responseText);arangoHelper.arangoError("Index error",i.errorMessage)}else arangoHelper.arangoError("Index error","Could not create index.");else arangoHelper.arangoNotification("Index","Creation in progress. This may take a while.");o.toggleNewIndexView(),o.render()}))},bindIndexEvents:function(){this.unbindIndexEvents();var e=this;$("#indexEditView #addIndex").bind("click",(function(){e.toggleNewIndexView(),$("#cancelIndex").unbind("click"),$("#cancelIndex").bind("click",(function(){e.toggleNewIndexView(),e.render()})),$("#createIndex").unbind("click"),$("#createIndex").bind("click",(function(){e.createIndex()}))})),$("#newIndexType").bind("change",(function(){e.selectIndexType()})),$(".deleteIndex").bind("click",(function(t){e.prepDeleteIndex(t)})),$("#infoTab a").bind("click",(function(e){if($("#indexDeleteModal").remove(),"Indexes"!==$(e.currentTarget).html()||$(e.currentTarget).parent().hasClass("active")||($("#newIndexView").hide(),$("#indexEditView").show(),$("#indexHeaderContent #modal-dialog .modal-footer .button-danger").hide(),$("#indexHeaderContent #modal-dialog .modal-footer .button-success").hide(),$("#indexHeaderContent #modal-dialog .modal-footer .button-notification").hide()),"General"===$(e.currentTarget).html()&&!$(e.currentTarget).parent().hasClass("active")){$("#indexHeaderContent #modal-dialog .modal-footer .button-danger").show(),$("#indexHeaderContent #modal-dialog .modal-footer .button-success").show(),$("#indexHeaderContent #modal-dialog .modal-footer .button-notification").show();var t=$(".index-button-bar2")[0];$("#cancelIndex").is(":visible")&&($("#cancelIndex").detach().appendTo(t),$("#createIndex").detach().appendTo(t))}}))},prepDeleteIndex:function(e){var t=this;this.lastTarget=e,this.lastId=$(this.lastTarget.currentTarget).parent().parent().first().children().first().text(),$("#indexDeleteModal").length||($("#content #modal-dialog .modal-footer").after('<div id="indexDeleteModal" style="display:block;" class="alert alert-error modal-delete-confirmation"><strong>Really delete?</strong><button id="indexConfirmDelete" class="button-danger pull-right modal-confirm-delete">Yes</button><button id="indexAbortDelete" class="button-neutral pull-right">No</button></div>'),$("#indexHeaderContent #indexConfirmDelete").unbind("click"),$("#indexHeaderContent #indexConfirmDelete").bind("click",(function(){$("#indexHeaderContent #indexDeleteModal").remove(),t.deleteIndex()})),$("#indexHeaderContent #indexAbortDelete").unbind("click"),$("#indexHeaderContent #indexAbortDelete").bind("click",(function(){$("#indexHeaderContent #indexDeleteModal").remove()})))},unbindIndexEvents:function(){$("#indexHeaderContent #indexEditView #addIndex").unbind("click"),$("#indexHeaderContent #newIndexType").unbind("change"),$("#indexHeaderContent #infoTab a").unbind("click"),$("#indexHeaderContent .deleteIndex").unbind("click")},deleteIndex:function(){var e=function(e){e?(arangoHelper.arangoError("Could not delete index"),$("tr th:contains('"+this.lastId+"')").parent().children().last().html('<span class="deleteIndex icon_arangodb_roundminus" data-original-title="Delete index" title="Delete index"></span>'),this.model.set("locked",!1)):e||void 0===e||($("tr th:contains('"+this.lastId+"')").parent().remove(),this.model.set("locked",!1))}.bind(this);this.model.set("locked",!0),this.model.deleteIndex(this.lastId,e),$("tr th:contains('"+this.lastId+"')").parent().children().last().html('<i class="fa fa-circle-o-notch fa-spin"></i>')},renderIndex:function(e,t,i){this.index=e;arangoHelper.getAardvarkJobs((function(e,i){if(e)arangoHelper.arangoError("Jobs","Could not read pending jobs.");else{var n=function(e,t,i){e?404===t.responseJSON.code?arangoHelper.deleteAardvarkJob(i):400===t.responseJSON.code?(arangoHelper.arangoError("Index creation failed",t.responseJSON.errorMessage),arangoHelper.deleteAardvarkJob(i)):204===t.responseJSON.code&&arangoHelper.arangoMessage("Index","There is at least one new index in the queue or in the process of being created."):arangoHelper.deleteAardvarkJob(i)};_.each(i,(function(e){e.collection===t&&$.ajax({type:"PUT",cache:!1,url:arangoHelper.databaseUrl("/_api/job/"+e.id),contentType:"application/json",success:function(t,i,r){n(!1,t,e.id)},error:function(t){n(!0,t,e.id)}})}))}}));var n="collectionInfoTh modal-text";if(this.index){var r="",a="";i&&$("#collectionEditIndexTable tbody").empty(),_.each(this.index.indexes,(function(e){a="primary"===e.type||"edge"===e.type?'<span class="icon_arangodb_locked" data-original-title="No action"></span>':'<span class="deleteIndex icon_arangodb_roundminus" data-original-title="Delete index" title="Delete index"></span>',void 0!==e.fields&&(r=e.fields.join(", "));var t=e.id.indexOf("/"),i=e.id.substr(t+1,e.id.length),o=e.hasOwnProperty("selectivityEstimate")?(100*e.selectivityEstimate).toFixed(2)+"%":"n/a",s=e.hasOwnProperty("sparse")?e.sparse:"n/a",l=[];["deduplicate","expireAfter","minLength","geoJson"].forEach((function(t){e.hasOwnProperty(t)&&l.push(t+": "+e[t])})),$("#collectionEditIndexTable").append("<tr><th class="+JSON.stringify(n)+">"+arangoHelper.escapeHtml(i)+"</th><th class="+JSON.stringify(n)+">"+arangoHelper.escapeHtml(e.type)+"</th><th class="+JSON.stringify(n)+">"+arangoHelper.escapeHtml(e.unique)+"</th><th class="+JSON.stringify(n)+">"+arangoHelper.escapeHtml(s)+"</th><th class="+JSON.stringify(n)+">"+arangoHelper.escapeHtml(l.join(", "))+"</th><th class="+JSON.stringify(n)+">"+arangoHelper.escapeHtml(o)+"</th><th class="+JSON.stringify(n)+">"+arangoHelper.escapeHtml(r)+"</th><th class="+JSON.stringify(n)+">"+arangoHelper.escapeHtml(e.name)+"</th><th class="+JSON.stringify(n)+">"+a+"</th></tr>")}))}this.bindIndexEvents()},selectIndexType:function(){$(".newIndexClass").hide();var e=$("#newIndexType").val();null===e&&(e=$("#newIndexType").children().first().attr("value"),$("#newIndexType").val(arangoHelper.escapeHtml(e))),$("#newIndexType"+e).show()},resetIndexForms:function(){$("#indexHeader input").val("").prop("checked",!1),$("#newIndexType").val("unknown").prop("selected",!0),this.selectIndexType()},toggleNewIndexView:function(){if(!$("#addIndex").hasClass("disabled")){var e=$(".index-button-bar2")[0];$("#indexEditView").is(":visible")?($("#indexEditView").hide(),$("#newIndexView").show(),$("#cancelIndex").detach().appendTo("#indexHeaderContent #modal-dialog .modal-footer"),$("#createIndex").detach().appendTo("#indexHeaderContent #modal-dialog .modal-footer")):($("#indexEditView").show(),$("#newIndexView").hide(),$("#cancelIndex").detach().appendTo(e),$("#createIndex").detach().appendTo(e)),this.resetIndexForms()}arangoHelper.createTooltips(".index-tooltip")},stringToArray:function(e){var t=[];return e.split(",").forEach((function(e){""!==(e=e.replace(/(^\s+|\s+$)/g,""))&&t.push(e)})),t},checkboxToValue:function(e){return $(e).prop("checked")}})}()},function(e,t){!function(){"use strict";window.InfoView=Backbone.View.extend({el:"#content",initialize:function(e){this.collectionName=e.collectionName,this.model=this.collection},events:{},render:function(){this.breadcrumb(),window.arangoHelper.buildCollectionSubNav(this.collectionName,"Info"),this.renderInfoView(),arangoHelper.checkCollectionPermissions(this.collectionName,this.changeViewToReadOnly)},changeViewToReadOnly:function(){$(".breadcrumb").html($(".breadcrumb").html()+" (read-only)")},breadcrumb:function(){$("#subNavigationBar .breadcrumb").html("Collection: "+(this.collectionName.length>64?this.collectionName.substr(0,64)+"...":this.collectionName))},renderInfoView:function(){if(this.model.get("locked"))return 0;var e=function(e,t,i){if(e)arangoHelper.arangoError("Figures","Could not get revision.");else{frontendConfig.isCluster&&i&&i.figures&&i.figures.alive&&0===i.figures.alive.size&&0===i.figures.alive.count&&0===i.figures.datafiles.count&&0===i.figures.datafiles.fileSize&&0===i.figures.journals.count&&0===i.figures.journals.fileSize&&0===i.figures.compactors.count&&0===i.figures.compactors.fileSize&&0===i.figures.dead.size&&0===i.figures.dead.count&&(i.walMessage=" - not ready yet - ");var n={figures:i,revision:t,model:this.model};window.modalView.show("modalCollectionInfo.ejs","Collection: "+(this.model.get("name").length>64?this.model.get("name").substr(0,64)+"...":this.model.get("name")),[],n,null,null,null,null,null,"content")}}.bind(this),t=function(t,i){if(t)arangoHelper.arangoError("Figures","Could not get figures.");else{var n=i;this.model.getRevision(e,n)}}.bind(this);this.model.getFiguresCombined(t,frontendConfig.isCluster)}})}()},function(e,t){!function(){"use strict";window.ServiceInstallGitHubView=Backbone.View.extend({el:"#content",readOnly:!1,template:templateEngine.createTemplate("serviceInstallGitHubView.ejs"),remove:function(){return this.$el.empty().off(),this.stopListening(),this.unbind(),delete this.el,this},initialize:function(){window.App.replaceApp&&(this._upgrade=!0)},events:{"click #installGitHubService":"installGitHubService","keydown input":"checkValidators"},checkValidators:function(){1!==window.modalView._validators.length&&(window.modalView.clearValidators(),this.setGithubValidators())},render:function(){return $(this.el).html(this.template.render({services:this.collection,upgrade:this._upgrade})),this.breadcrumb(),this.setGithubValidators(),arangoHelper.createTooltips(".modalTooltips"),this},breadcrumb:function(){var e=this;if(window.App.naviView){var t="New";this._upgrade&&(t="Replace ("+window.App.replaceAppData.mount+")"),$("#subNavigationBar .breadcrumb").html('<a href="#services">Services:</a> '+t),arangoHelper.buildServicesSubNav("GitHub")}else window.setTimeout((function(){e.breadcrumb()}),100)},installGitHubService:function(){arangoHelper.createMountPointModal(this.installFoxxFromGithub.bind(this))},installFoxxFromGithub:function(){if(window.modalView.modalTestAll()){var e,t,i,n,r;this._upgrade?e=window.App.replaceAppData.mount:"/"!==(e=window.arangoHelper.escapeHtml($("#new-app-mount").val())).charAt(0)&&(e="/"+e),n=window.arangoHelper.escapeHtml($("#repository").val()),""===(r=window.arangoHelper.escapeHtml($("#tag").val()))&&(r="master");try{Joi.assert(n,Joi.string().regex(/^[a-zA-Z0-9_-]+\/[a-zA-Z0-9_-]+$/))}catch(a){return}t={url:n,version:r},(i=arangoHelper.getFoxxFlags()).legacy=Boolean($("#github-app-islegacy")[0].checked),this.collection.install("git",t,e,i,this.installCallback.bind(this))}},installCallback:function(e){window.App.navigate("#services",{trigger:!0}),window.App.applicationsView.installCallback(e)},setGithubValidators:function(){window.modalView.modalBindValidation({id:"repository",validateInput:function(){return[{rule:Joi.string().required().regex(/^[a-zA-Z0-9_-]+\/[a-zA-Z0-9_-]+$/),msg:"No valid Github account and repository."}]}}),window.modalView.modalTestAll()}})}()},function(e,t){!function(){"use strict";window.ServiceInstallNewView=Backbone.View.extend({el:"#content",readOnly:!1,template:templateEngine.createTemplate("serviceInstallNewView.ejs"),remove:function(){return this.$el.empty().off(),this.stopListening(),this.unbind(),delete this.el,this},events:{"click #installNewService":"installNewService","keydown input":"checkValidators"},checkValidators:function(){4!==window.modalView._validators.length&&(window.modalView.clearValidators(),this.setNewAppValidators())},initialize:function(){window.App.replaceApp&&(this._upgrade=!0)},render:function(){return $(this.el).html(this.template.render({services:this.collection,upgrade:this._upgrade})),this.renderSelects(),this.breadcrumb(),this.setNewAppValidators(),arangoHelper.createTooltips(".modalTooltips"),this},installNewService:function(){arangoHelper.createMountPointModal(this.generateNewFoxxApp.bind(this))},generateNewFoxxApp:function(){var e,t,i;window.modalView.modalTestAll()&&(this._upgrade?e=window.App.replaceAppData.mount:"/"!==(e=window.arangoHelper.escapeHtml($("#new-app-mount").val())).charAt(0)&&(e="/"+e),t={name:window.arangoHelper.escapeHtml($("#new-app-name").val()),documentCollections:_.map($("#new-app-document-collections").select2("data"),(function(e){return window.arangoHelper.escapeHtml(e.text)})),edgeCollections:_.map($("#new-app-edge-collections").select2("data"),(function(e){return window.arangoHelper.escapeHtml(e.text)})),author:window.arangoHelper.escapeHtml($("#new-app-author").val()),license:window.arangoHelper.escapeHtml($("#new-app-license").val()),description:window.arangoHelper.escapeHtml($("#new-app-description").val())},i=arangoHelper.getFoxxFlags(),this.collection.install("generate",t,e,i,this.installCallback.bind(this)));window.modalView.hide()},checkValidation:function(){window.modalView.modalTestAll()},installCallback:function(e){window.App.navigate("#services",{trigger:!0}),window.App.applicationsView.installCallback(e)},renderSelects:function(){$("#new-app-document-collections").select2({tags:[],showSearchBox:!1,minimumResultsForSearch:-1,width:"336px"}),$("#new-app-edge-collections").select2({tags:[],showSearchBox:!1,minimumResultsForSearch:-1,width:"336px"})},setNewAppValidators:function(){window.modalView.modalBindValidation({id:"new-app-author",validateInput:function(){return[{rule:Joi.string().required().min(1),msg:"Has to be non empty."}]}}),window.modalView.modalBindValidation({id:"new-app-name",validateInput:function(){return[{rule:Joi.string().required().regex(/^[a-zA-Z\-_][a-zA-Z0-9\-_]*$/),msg:"Can only contain a to z, A to Z, 0-9, '-' and '_'. Cannot start with a number."}]}}),window.modalView.modalBindValidation({id:"new-app-description",validateInput:function(){return[{rule:Joi.string().required().min(1),msg:"Has to be non empty."}]}}),window.modalView.modalBindValidation({id:"new-app-license",validateInput:function(){return[{rule:Joi.string().required().regex(/^[a-zA-Z0-9 .,;-]+$/),msg:"Can only contain a to z, A to Z, 0-9, '-', '.', ',' and ';'."}]}}),window.modalView.modalTestAll()},breadcrumb:function(){var e=this;if(window.App.naviView){var t="New";this._upgrade&&(t="Replace ("+window.App.replaceAppData.mount+")"),$("#subNavigationBar .breadcrumb").html('<a href="#services">Services:</a> '+t),arangoHelper.buildServicesSubNav("New")}else window.setTimeout((function(){e.breadcrumb()}),100)}})}()},function(e,t){!function(){"use strict";window.ServiceInstallView=Backbone.View.extend({el:"#content",readOnly:!1,foxxStoreRetry:0,template:templateEngine.createTemplate("serviceInstallView.ejs"),remove:function(){return this.$el.empty().off(),this.stopListening(),this.unbind(),delete this.el,this},events:{"click #categorySelection":"renderCategories","click #foxxFilters":"resetFilters","keyup #foxxSearch":"search"},initialize:function(e){this.functionsCollection=e.functionsCollection,window.App.replaceApp&&(this._upgrade=!0)},fetchStore:function(){var e=this;this.foxxStoreRetry=1,this.collection.fetch({cache:!1,success:function(){"#services/install"===window.location.hash&&e.render()}})},search:function(){this._installedSubViews[Object.keys(this._installedSubViews)[0]].applyFilter();var e=$("#foxxSearch").val();e?_.each(this._installedSubViews,(function(t){t.model.get("name").includes(e)?"true"===$(t.el).attr("shown")&&$(t.el).show():$(t.el).hide()})):this._installedSubViews[Object.keys(this._installedSubViews)[0]].applyFilter()},createSubViews:function(){var e=this;this._installedSubViews={},e.collection.each((function(t){var i=new window.FoxxRepoView({collection:e.functionsCollection,model:t,appsView:e,upgrade:e._upgrade});e._installedSubViews[t.get("name")]=i}))},renderCategories:function(e){this._installedSubViews[Object.keys(this._installedSubViews)[0]].renderCategories(e)},resetFilters:function(){$("#foxxSearch").val(""),this._installedSubViews[Object.keys(this._installedSubViews)[0]].resetFilters()},render:function(){if($(this.el).html(this.template.render({services:this.collection})),arangoHelper.buildServicesSubNav("Store"),this.breadcrumb(),0!==this.collection.length||0!==this.foxxStoreRetry)return this.collection.sort(),this.createSubViews(),_.each(this._installedSubViews,(function(e){$("#availableFoxxes").append(e.render())})),this;this.fetchStore()},breadcrumb:function(){var e="New";this._upgrade&&(e="Replace ("+window.App.replaceAppData.mount+")"),$("#subNavigationBar .breadcrumb").html('<a href="#services">Services:</a> '+e)}})}()},function(e,t){!function(){"use strict";window.ServiceInstallUploadView=Backbone.View.extend({el:"#content",readOnly:!1,template:templateEngine.createTemplate("serviceInstallUploadView.ejs"),remove:function(){return this.$el.empty().off(),this.stopListening(),this.unbind(),delete this.el,this},initialize:function(){window.App.replaceApp&&(this._upgrade=!0)},events:{"click #installUploadService":"installFromUpload"},render:function(){return $(this.el).html(this.template.render({services:this.collection,upgrade:this._upgrade})),this.prepareUpload(),this.breadcrumb(),arangoHelper.createTooltips(".modalTooltips"),this},installFromUpload:function(){arangoHelper.createMountPointModal(this.installFoxxFromZip.bind(this))},testFunction:function(e,t){window.foxxData||(window.foxxData={}),window.foxxData.files=e,window.foxxData.data=t,$("#installUploadService").attr("disabled",!1)},prepareUpload:function(){$("#upload-foxx-zip").uploadFile({url:arangoHelper.databaseUrl("/_api/upload?multipart=true"),allowedTypes:"zip,js",multiple:!1,onSuccess:this.testFunction})},installFoxxFromZip:function(){var e,t,i;(void 0===window.foxxData.data?window.foxxData.data=this._uploadData:this._uploadData=window.foxxData.data,window.foxxData.data&&window.modalView.modalTestAll())&&(this._upgrade?e=window.App.replaceAppData.mount:"/"!==(e=window.arangoHelper.escapeHtml($("#new-app-mount").val())).charAt(0)&&(e="/"+e),t={zipFile:window.foxxData.data.filename},(i=arangoHelper.getFoxxFlags()).legacy=Boolean($("#zip-app-islegacy")[0].checked),this.collection.install("zip",t,e,i,this.installCallback.bind(this)));window.modalView.hide()},installCallback:function(e){window.App.navigate("#services",{trigger:!0}),window.App.applicationsView.installCallback(e)},breadcrumb:function(){var e=this;if(window.App.naviView){var t="New";this._upgrade&&(t="Replace ("+window.App.replaceAppData.mount+")"),$("#subNavigationBar .breadcrumb").html('<a href="#services">Services:</a> '+t),arangoHelper.buildServicesSubNav("Upload")}else window.setTimeout((function(){e.breadcrumb()}),100)}})}()},function(e,t){!function(){"use strict";window.ServiceInstallUrlView=Backbone.View.extend({el:"#content",readOnly:!1,template:templateEngine.createTemplate("serviceInstallUrlView.ejs"),remove:function(){return this.$el.empty().off(),this.stopListening(),this.unbind(),delete this.el,this},initialize:function(){window.App.replaceApp&&(this._upgrade=!0)},events:{"click #installUrlService":"installUrlService"},render:function(){return $(this.el).html(this.template.render({services:this.collection,upgrade:this._upgrade})),this.breadcrumb(),this.setUrlValidators(),arangoHelper.createTooltips(".modalTooltips"),this},breadcrumb:function(){var e=this;if(window.App.naviView){var t="New";this._upgrade&&(t="Replace ("+window.App.replaceAppData.mount+")"),$("#subNavigationBar .breadcrumb").html('<a href="#services">Services:</a> '+t),arangoHelper.buildServicesSubNav("Remote")}else window.setTimeout((function(){e.breadcrumb()}),100)},installUrlService:function(){arangoHelper.createMountPointModal(this.installFoxxFromUrl.bind(this))},installFoxxFromUrl:function(){var e,t,i;window.modalView.modalTestAll()&&(this._upgrade?e=window.App.replaceAppData.mount:"/"!==(e=window.arangoHelper.escapeHtml($("#new-app-mount").val())).charAt(0)&&(e="/"+e),t={url:window.arangoHelper.escapeHtml($("#repository").val())},i=arangoHelper.getFoxxFlags(),this.collection.install("url",t,e,i,this.installCallback.bind(this)))},setUrlValidators:function(){window.modalView.modalBindValidation({id:"repository",validateInput:function(){return[{rule:Joi.string().required().regex(/^(http)|^(https)/),msg:"No valid http or https url."}]}}),window.modalView.modalTestAll()},installCallback:function(e){window.App.navigate("#services",{trigger:!0}),window.App.applicationsView.installCallback(e)}})}()},function(e,t){!function(){"use strict";window.LoggerView=Backbone.View.extend({el:"#content",logsel:"#logEntries",id:"#logContent",initDone:!1,pageSize:20,currentPage:0,logTopics:{},logLevels:[],remove:function(){return this.$el.empty().off(),this.stopListening(),this.unbind(),delete this.el,this},initialize:function(e){var t=this;e&&(this.options=e),this.collection.setPageSize(this.pageSize),this.initDone||$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_admin/log/level"),contentType:"application/json",processData:!1,success:function(e){t.logTopics=e,_.each(["fatal","error","warning","info","debug"],(function(e){t.logLevels.push(e)})),t.initDone=!0}})},currentLoglevel:void 0,defaultLoglevel:"info",events:{"click #logLevelSelection":"renderLogLevel","click #logTopicSelection":"renderLogTopic","click #logFilters":"resetFilters","click #loadMoreEntries":"loadMoreEntries"},template:templateEngine.createTemplate("loggerView.ejs"),templateEntries:templateEngine.createTemplate("loggerViewEntries.ejs"),renderLogTopic:function(e){var t,i=this;this.logTopicOptions||(this.logTopicOptions={}),_.each(this.logTopics,(function(e,n){i.logTopicOptions[n]&&(t=i.logTopicOptions[n].active),i.logTopicOptions[n]={name:n,active:t||!1}}));var n=$(e.currentTarget).position();n.right="30",this.logTopicView=new window.FilterSelectView({name:"Topic",options:i.logTopicOptions,position:n,callback:i.logTopicCallbackFunction.bind(this),multiple:!0}),this.logTopicView.render()},loadMoreEntries:function(){this.convertModelToJSON()},logTopicCallbackFunction:function(e){this.logTopicOptions=e,this.applyFilter()},logLevelCallbackFunction:function(e){this.logLevelOptions=e,this.applyFilter()},resetFilters:function(){_.each(this.logTopicOptions,(function(e){e.active=!1})),_.each(this.logLevelOptions,(function(e){e.active=!1})),this.applyFilter()},isFilterActive:function(e){var t=!1;return _.each(e,(function(e){e.active&&(t=!0)})),t},changeButton:function(e){e?("level"===e?($("#logLevelSelection").addClass("button-success").removeClass("button-default"),$("#logTopicSelection").addClass("button-default").removeClass("button-success"),$("#filterDesc").html(e)):"topic"===e?($("#logTopicSelection").addClass("button-success").removeClass("button-default"),$("#logLevelSelection").addClass("button-default").removeClass("button-success"),$("#filterDesc").html(e)):"both"===e&&($("#logTopicSelection").addClass("button-success").removeClass("button-default"),$("#logLevelSelection").addClass("button-success").removeClass("button-default"),$("#filterDesc").html("level, topic")),$("#logFilters").show()):($("#logTopicSelection").addClass("button-default").removeClass("button-success"),$("#logLevelSelection").addClass("button-default").removeClass("button-success"),$("#logFilters").hide(),$("#filterDesc").html(""))},applyFilter:function(){var e=this,t=this.isFilterActive(this.logLevelOptions),i=this.isFilterActive(this.logTopicOptions);t&&i?(_.each($("#logEntries").children(),(function(t){!1===e.logLevelOptions[$(t).attr("level")].active||!1===e.logTopicOptions[$(t).attr("topic")].active?$(t).hide():e.logLevelOptions[$(t).attr("level")].active&&e.logTopicOptions[$(t).attr("topic")].active&&$(t).show()})),this.changeButton("both")):t&&!i?(_.each($("#logEntries").children(),(function(t){!1===e.logLevelOptions[$(t).attr("level")].active?$(t).hide():$(t).show()})),this.changeButton("level")):!t&&i?(_.each($("#logEntries").children(),(function(t){!1===e.logTopicOptions[$(t).attr("topic")].active?$(t).hide():$(t).show()})),this.changeButton("topic")):t||i||(_.each($("#logEntries").children(),(function(e){$(e).show()})),this.changeButton());var n=0;_.each($("#logEntries").children(),(function(e){"flex"===$(e).css("display")&&$(e).css("display","block"),"block"===$(e).css("display")&&n++})),1===n?($(".logBorder").css("visibility","hidden"),$("#noLogEntries").hide()):0===n?$("#noLogEntries").show():($(".logBorder").css("visibility","visible"),$("#noLogEntries").hide())},renderLogLevel:function(e){var t,i=this;this.logLevelOptions||(this.logLevelOptions={}),_.each(this.logLevels,(function(e){i.logLevelOptions[e]&&(t=i.logLevelOptions[e].active),i.logLevelOptions[e]={name:e,active:t||!1};var n=arangoHelper.statusColors[e];n&&(i.logLevelOptions[e].color=n)}));var n=$(e.currentTarget).position();n.right="115",this.logLevelView=new window.FilterSelectView({name:"Level",options:i.logLevelOptions,position:n,callback:i.logLevelCallbackFunction.bind(this),multiple:!1}),this.logLevelView.render()},setActiveLoglevel:function(e){},initTotalAmount:function(){var e=this;this.collection.fetch({data:$.param({test:!0}),success:function(){e.convertModelToJSON()}}),this.fetchedAmount=!0},invertArray:function(e){var t,i=[],n=0;for(t=e.length-1;t>=0;t--)i[n]=e[t],n++;return i},convertModelToJSON:function(){if(this.fetchedAmount){this.collection.page=this.currentPage,this.currentPage++;var e,t=this,i=[];this.collection.fetch({success:function(n){t.collection.each((function(t){e=new Date(1e3*t.get("timestamp")),i.push({status:t.getLogStatus(),date:arangoHelper.formatDT(e),timestamp:t.get("timestamp"),msg:t.get("text"),topic:t.get("topic")})})),t.renderLogs(t.invertArray(i),n.lastInverseOffset)}})}else this.initTotalAmount()},render:function(){var e=this;return this.currentPage=0,this.initDone?($(this.el).html(this.template.render({})),this.convertModelToJSON()):window.setTimeout((function(){e.render()}),100),this},renderLogs:function(e,t){_.each(e,(function(e){e.msg.indexOf("{"+e.topic+"}")>-1&&(e.msg=e.msg.replace("{"+e.topic+"}",""))})),0===this.currentPage?$(this.logsel).html(this.templateEntries.render({entries:e})):$(this.logsel).append(this.templateEntries.render({entries:e})),t<=0?$("#loadMoreEntries").attr("disabled",!0):$("#loadMoreEntries").attr("disabled",!1),arangoHelper.createTooltips(),this.applyFilter()}})}()},function(e,t){!function(){"use strict";window.LoginView=Backbone.View.extend({el:"#content",el2:".header",el3:".footer",loggedIn:!1,loginCounter:0,events:{"keyPress #loginForm input":"keyPress","click #submitLogin":"validate","submit #dbForm":"goTo","click #logout":"logout","change #loginDatabase":"renderDBS","keyup #databaseInputName":"renderDBS"},template:templateEngine.createTemplate("loginView.ejs"),render:function(e){var t=this;$(this.el).html(this.template.render({})),$(this.el2).hide(),$(this.el3).hide();var i=function(e,i,n){var r;r=e?arangoHelper.databaseUrl("/_api/user/"+encodeURIComponent(e)+"/database","_system"):arangoHelper.databaseUrl("/_api/database/user"),!1===frontendConfig.authenticationEnabled&&($("#logout").hide(),$(".login-window #databases").css("height","90px")),$("#loginForm").hide(),$(".login-window #databases").show(),$.ajax({type:"GET",url:r,success:function(e){if($("#loginDatabase").html(""),Object.keys(e.result).length>0){$("#loginDatabase").show(),$(".fa-database").show(),$("#databaseInputName").remove();var i=t.sortDatabases(e.result);_.each(i,(function(e,t){frontendConfig.authenticationEnabled?$("#loginDatabase").append("<option>"+t+"</option>"):$("#loginDatabase").append("<option>"+e+"</option>")}))}else $("#loginDatabase").hide(),$(".fa-database").hide(),$("#loginDatabase").after('<input id="databaseInputName" class="databaseInput login-input" placeholder="_system" value="_system"></input>');t.renderDBS()},error:function(e){i?i():(arangoHelper.setCurrentJwt(null,null),location.reload(!0))}})};if(frontendConfig.authenticationEnabled&&!0!==e){var n=arangoHelper.getCurrentJwtUsername();if(null!==n&&"undefined"!==n&&void 0!==n){i(arangoHelper.getCurrentJwtUsername(),(function(){t.collection.logout(),window.setTimeout((function(){$("#loginUsername").focus()}),300)}))}else window.setTimeout((function(){$("#loginUsername").focus()}),300)}else frontendConfig.authenticationEnabled&&e?i(arangoHelper.getCurrentJwtUsername(),null):i(null,null);return $(".bodyWrapper").show(),this.setVersion(),this},setVersion:function(){window.frontendConfig&&window.frontendConfig.isEnterprise?$("#ArangoDBLogoVersion").attr("src","img/ArangoDB-enterprise-edition-Web-UI.png"):$("#ArangoDBLogoVersion").attr("src","img/ArangoDB-community-edition-Web-UI.png")},sortDatabases:function(e){var t;return frontendConfig.authenticationEnabled?(t=_.pairs(e),t=_.sortBy(t,(function(e){return e[0].toLowerCase()})),t=_.object(t)):t=_.sortBy(e,(function(e){return e.toLowerCase()})),t},clear:function(){$("#loginForm input").removeClass("form-error"),$(".wrong-credentials").hide()},keyPress:function(e){(e.ctrlKey&&13===e.keyCode||e.metaKey&&13===e.keyCode)&&(e.preventDefault(),this.validate())},validate:function(e){e.preventDefault(),this.clear();var t=$("#loginUsername").val(),i=$("#loginPassword").val();t&&this.collection.login(t,i,this.loginCallback.bind(this,t,i))},loginCallback:function(e,t,i){if(i){if(0===this.loginCounter)return this.loginCounter++,void this.collection.login(e,t,this.loginCallback.bind(this,e));this.loginCounter=0,$(".wrong-credentials").show(),$("#loginDatabase").html(""),$("#loginDatabase").append("<option>_system</option>")}else this.renderDBSelection(e)},renderDBSelection:function(e){var t=this,i=arangoHelper.databaseUrl("/_api/user/"+encodeURIComponent(e)+"/database","_system");!1===frontendConfig.authenticationEnabled&&(i=arangoHelper.databaseUrl("/_api/database/user")),$(".wrong-credentials").hide(),t.loggedIn=!0,$.ajax({type:"GET",url:i,success:function(e){if($("#loginForm").hide(),$(".login-window #databases").show(),$("#loginDatabase").html(""),Object.keys(e.result).length>0){$("#loginDatabase").show(),$(".fa-database").show(),$("#databaseInputName").remove();var i=t.sortDatabases(e.result);_.each(i,(function(e,t){frontendConfig.authenticationEnabled?$("#loginDatabase").append("<option>"+t+"</option>"):$("#loginDatabase").append("<option>"+e+"</option>")}))}else $("#loginDatabase").hide(),$(".fa-database").hide(),$("#loginDatabase").after('<input id="databaseInputName" class="databaseInput login-input" placeholder="_system" value="_system"></input>');t.renderDBS()},error:function(){$(".wrong-credentials").show()}})},renderDBS:function(){var e="Select DB: ";$("#noAccess").hide(),0===$("#loginDatabase").children().length?$("#loginDatabase").is(":visible")?($("#dbForm").remove(),$(".login-window #databases").prepend('<div class="no-database">You do not have permission to a database.</div>'),e+=$("#loginDatabase").val(),window.setTimeout((function(){$("#goToDatabase").focus()}),150)):e+=$("#databaseInputName").val():(e+=$("#loginDatabase").val(),window.setTimeout((function(){$("#goToDatabase").focus()}),150)),$("#goToDatabase").html(e)},logout:function(){this.collection.logout()},goTo:function(e){e.preventDefault();var t,i=$("#loginUsername").val();t=$("#databaseInputName").is(":visible")?$("#databaseInputName").val():$("#loginDatabase").val(),window.App.dbSet=t;var n=function(e){e&&arangoHelper.arangoError("User","Could not fetch user settings")},r=window.location.protocol+"//"+window.location.host+frontendConfig.basePath+"/_db/"+t+"/_admin/aardvark/index.html";frontendConfig.react&&(r=window.location.protocol+"//"+window.location.host+"/_db/"+t+"/_admin/aardvark/index.html");var a=function(){window.location.href=r,$(this.el2).show(),$(this.el3).show(),$(".bodyWrapper").show(),$(".navbar").show(),$("#currentUser").text(i),this.collection.loadUserSettings(n)}.bind(this);$.ajax({url:r,success:function(e){a()},error:function(e){e.responseJSON&&e.responseJSON.errorMessage?$("#noAccess").html("Error (DB: "+t+"): "+e.responseJSON.errorMessage):$("#noAccess").html("Error (DB: "+t+"): "+e.statusText),$("#noAccess").show()}})}})}()},function(e,t){!function(){"use strict";var e=function(e,t,i,n){return{type:e,title:t,callback:i,confirm:n}},t=function(e,t,i,n,r,a,o,s,l,c,d){var h={type:e,label:t};return void 0!==i&&(h.value=i),void 0!==n&&(h.info=n),void 0!==r&&(h.placeholder=r),void 0!==a&&(h.mandatory=a),void 0!==s&&(h.addDelete=s),void 0!==l&&(h.addAdd=l),void 0!==c&&(h.maxEntrySize=c),void 0!==d&&(h.tags=d),o&&(h.validateInput=function(){return o}),h};window.ModalView=Backbone.View.extend({_validators:[],_validateWatchers:[],baseTemplate:templateEngine.createTemplate("modalBase.ejs"),tableTemplate:templateEngine.createTemplate("modalTable.ejs"),el:"#modalPlaceholder",contentEl:"#modalContent",hideFooter:!1,confirm:{list:"#modal-delete-confirmation",yes:"#modal-confirm-delete",no:"#modal-abort-delete"},enabledHotkey:!1,enableHotKeys:!0,buttons:{SUCCESS:"success",NOTIFICATION:"notification",DELETE:"danger",NEUTRAL:"neutral",DISABLED:"disabled",CLOSE:"close"},tables:{READONLY:"readonly",TEXT:"text",BLOB:"blob",PASSWORD:"password",SELECT:"select",SELECT2:"select2",JSONEDITOR:"jsoneditor",CHECKBOX:"checkbox"},initialize:function(){Object.freeze(this.buttons),Object.freeze(this.tables)},createModalHotkeys:function(){$(this.el).unbind("keydown"),$(this.el).unbind("return"),$("#modal-dialog .modal-body .collectionTh > input").unbind("keydown"),$("#modal-dialog .modal-body .collectionTh > input").unbind("return"),$("#modal-dialog .modal-body .collectionTh > input",$(this.el)).bind("keydown","return",(function(e){$("#modal-dialog .modal-footer .button-success").is(":disabled")||13!==e.keyCode||$("#modal-dialog .modal-footer .button-success").click()})),$("#modal-dialog .modal-body .collectionTh > select").unbind("keydown"),$("#modal-dialog .modal-body .collectionTh > select").unbind("return"),$("#modal-dialog .modal-body .collectionTh > select",$(this.el)).bind("keydown","return",(function(e){$("#modal-dialog .modal-footer .button-success").is(":disabled")||13!==e.keyCode||$("#modal-dialog .modal-footer .button-success").click()}))},createInitModalHotkeys:function(){var e=this;$(this.el).bind("keydown","left",(function(){e.navigateThroughButtons("left")})),$(this.el).bind("keydown","right",(function(){e.navigateThroughButtons("right")}))},navigateThroughButtons:function(e){var t=$(".createModalDialog .modal-footer button").is(":focus");!1===t?"left"===e?$(".createModalDialog .modal-footer button").first().focus():"right"===e&&$(".createModalDialog .modal-footer button").last().focus():!0===t&&("left"===e?$(":focus").prev().focus():"right"===e&&$(":focus").next().focus())},createCloseButton:function(t,i){var n=this;return e(this.buttons.CLOSE,t,(function(){n.hide(),i&&i()}))},createSuccessButton:function(t,i){return e(this.buttons.SUCCESS,t,i)},createNotificationButton:function(t,i){return e(this.buttons.NOTIFICATION,t,i)},createDeleteButton:function(t,i,n){return e(this.buttons.DELETE,t,i,n)},createNeutralButton:function(t,i){return e(this.buttons.NEUTRAL,t,i)},createDisabledButton:function(t){var i=e(this.buttons.DISABLED,t);return i.disabled=!0,i},createReadOnlyEntry:function(e,i,n,r,a,o){var s=t(this.tables.READONLY,i,n,r,void 0,void 0,void 0,a,o);return s.id=e,s},createTextEntry:function(e,i,n,r,a,o,s){var l=t(this.tables.TEXT,i,n,r,a,o,s);return l.id=e,l},createBlobEntry:function(e,i,n,r,a,o,s){var l=t(this.tables.BLOB,i,n,r,a,o,s);return l.id=e,l},createSelect2Entry:function(e,i,n,r,a,o,s,l,c,d){var h=t(this.tables.SELECT2,i,n,r,a,o,void 0,s,l,c,d);return h.id=e,h},createJsonEditor:function(e,i,n,r,a,o,s,l,c,d){var h=t(this.tables.JSONEDITOR,"Document body",n,"",a,o,void 0,s,l,c,d);return h.id=e,h},createPasswordEntry:function(e,i,n,r,a,o,s){var l=t(this.tables.PASSWORD,i,n,r,a,o,s);return l.id=e,l},createCheckboxEntry:function(e,i,n,r,a){var o=t(this.tables.CHECKBOX,i,n,r);return o.id=e,a&&(o.checked=a),n&&(o.checked=n),o},createSelectEntry:function(e,i,n,r,a){var o=t(this.tables.SELECT,i,null,r);return o.id=e,n&&(o.selected=n),o.options=a,o},createOptionEntry:function(e,t){return{label:e,value:t||e}},renameDangerButton:function(e){var t=$(e).text();$("#modal-delete-confirmation strong").html("Really "+t.toLowerCase()+"?")},show:function(e,t,i,n,r,a,o,s,l,c){var d,h,u,p=this,f=!1;if(i=i||[],s=Boolean(s),this.clearValidators(),i.length>0?(i.forEach((function(e){e.type===p.buttons.CLOSE&&(f=!0),e.type===p.buttons.DELETE&&(h=h||e.confirm)})),f||(d=i.pop(),i.push(p.createCloseButton("Cancel")),i.push(d))):i.push(p.createCloseButton("Close")),c?($("#"+c).html(this.baseTemplate.render({title:t,buttons:i,hideFooter:this.hideFooter,confirm:h,tabBar:l})),$("#"+c+" #modal-dialog").removeClass("fade hide modal"),$("#"+c+" .modal-header").remove(),$("#"+c+" .modal-tabbar").remove(),$("#"+c+" .modal-tabbar").remove(),$("#"+c+" .button-close").remove(),0===$("#"+c+" .modal-footer").children().length&&$("#"+c+" .modal-footer").remove()):$(this.el).html(this.baseTemplate.render({title:t,buttons:i,hideFooter:this.hideFooter,confirm:h,tabBar:l})),_.each(i,(function(e,t){if(!e.disabled&&"disabled"!==e.type&&e.callback){if(e.type===p.buttons.DELETE&&!s){var i="#modalButton"+t;return c&&(i="#"+c+" #modalButton"+t),void $(i).bind("click",(function(){c?($("#"+c+" "+p.confirm.yes).unbind("click"),$("#"+c+" "+p.confirm.yes).bind("click",e.callback),$("#"+c+" "+p.confirm.list).css("display","block"),p.renameDangerButton(i)):($(p.confirm.yes).unbind("click"),$(p.confirm.yes).bind("click",e.callback),$(p.confirm.list).css("display","block"),p.renameDangerButton(i))}))}c?$("#"+c+" #modalButton"+t).bind("click",e.callback):$("#modalButton"+t).bind("click",e.callback)}else c?$("#"+c+" #modalButton"+t).attr("disabled",!0):$("#modalButton"+t).attr("disabled",!0)})),c?$("#"+c+" "+this.confirm.no).bind("click",(function(){$("#"+c+" "+p.confirm.list).css("display","none")})):$(this.confirm.no).bind("click",(function(){$(p.confirm.list).css("display","none")})),"string"===typeof e)u=templateEngine.createTemplate(e),c?$("#"+c+" .createModalDialog .modal-body").html(u.render({content:n,advancedContent:r,info:a})):$("#modalPlaceholder .createModalDialog .modal-body").html(u.render({content:n,advancedContent:r,info:a}));else{var g=0;_.each(e,(function(e){u=templateEngine.createTemplate(e),$(".createModalDialog .modal-body .tab-content #"+l[g]).html(u.render({content:n,advancedContent:r,info:a})),g++}))}arangoHelper.createTooltips(".createModalDialog .modalTooltips","left");var m,v=n||[];r&&r.content&&(v=v.concat(r.content)),_.each(v,(function(e){if(p.modalBindValidation(e),e.type===p.tables.SELECT2){var t={tags:e.tags||[],showSearchBox:!1,minimumResultsForSearch:-1,width:"336px"};e.maxEntrySize&&(t.maximumSelectionSize=e.maxEntrySize),$("#"+e.id).select2(t)}})),o&&(this.events=o,this.delegateEvents()),$("#accordion2")&&($("#accordion2 .accordion-toggle").bind("click",(function(){$("#collapseOne").is(":visible")?($("#collapseOne").hide(),setTimeout((function(){$(".accordion-toggle").addClass("collapsed")}),100)):($("#collapseOne").show(),setTimeout((function(){$(".accordion-toggle").removeClass("collapsed")}),100))})),$("#collapseOne").hide(),setTimeout((function(){$(".accordion-toggle").addClass("collapsed")}),100)),c||$("#modal-dialog").modal("show"),!1===this.enabledHotkey&&(this.createInitModalHotkeys(),this.enabledHotkey=!0),this.enableHotKeys&&this.createModalHotkeys(),(m=c?$("#"+c+" #modal-dialog").find("input"):$("#modal-dialog").find("input"))&&setTimeout((function(){(m=c?$("#"+c+" #modal-dialog"):$("#modal-dialog")).length>0&&(m=m.find("input")).length>0&&$(m[0]).focus()}),400)},modalBindValidation:function(e){var t=this;if(e.hasOwnProperty("id")&&e.hasOwnProperty("validateInput")){var i=function(){var t=$("#"+e.id),i=e.validateInput(t),n=!1;if(_.each(i,(function(e){var i=t.val();if(e.rule||(e={rule:e}),"function"===typeof e.rule)try{e.rule(i)}catch(a){n=e.msg||a.message}else{var r=Joi.validate(i,e.rule);r.error&&(n=e.msg||r.error.message)}if(n)return!1})),n)return n},n=$("#"+e.id);n.on("keyup focusout",(function(){var e=i(),r=n.next()[0];e?(n.addClass("invalid-input"),r?$(r).text(e):n.after('<p class="errorMessage">'+e+"</p>"),$("#modal-dialog").is(":visible")?$("#modal-dialog .modal-footer .button-success").prop("disabled",!0).addClass("disabled"):$(".createModalDialog .modal-footer .button-success").prop("disabled",!0).addClass("disabled")):(n.removeClass("invalid-input"),r&&$(r).remove(),t.modalTestAll())})),this._validators.push(i),this._validateWatchers.push(n)}},modalTestAll:function(){var e=_.map(this._validators,(function(e){return e()})),t=_.any(e);return t?$("#modal-dialog").is(":visible")?$("#modal-dialog .modal-footer .button-success").prop("disabled",!0).addClass("disabled"):$(".createModalDialog .modal-footer .button-success").prop("disabled",!0).addClass("disabled"):$("#modal-dialog").is(":visible")?$("#modal-dialog .modal-footer .button-success").prop("disabled",!1).removeClass("disabled"):$(".createModalDialog .modal-footer .button-success").prop("disabled",!1).removeClass("disabled"),!t},clearValidators:function(){this._validators=[],_.each(this._validateWatchers,(function(e){e.unbind("keyup focusout")})),this._validateWatchers=[]},hide:function(){this.clearValidators(),$("#modal-dialog").modal("hide")}})}()},function(e,t){!function(){"use strict";window.NavigationView=Backbone.View.extend({el:"#navigationBar",subEl:"#subNavigationBar",events:{"change #arangoCollectionSelect":"navigateBySelect","click .tab":"navigateByTab","click li":"switchTab","click .arangodbLogo":"selectMenuItem","mouseenter .dropdown > *":"showDropdown","click .shortcut-icons p":"showShortcutModal","mouseleave .dropdown":"hideDropdown"},renderFirst:!0,activeSubMenu:void 0,changeDB:function(){window.location.hash="#login"},initialize:function(e){var t=this;this.userCollection=e.userCollection,this.currentDB=e.currentDB,this.dbSelectionView=new window.DBSelectionView({collection:e.database,current:this.currentDB}),this.userBarView=new window.UserBarView({userCollection:this.userCollection}),this.notificationView=new window.NotificationView({collection:e.notificationCollection}),this.statisticBarView=new window.StatisticBarView({currentDB:this.currentDB}),this.isCluster=e.isCluster,this.foxxApiEnabled=e.foxxApiEnabled,this.handleKeyboardHotkeys(),Backbone.history.on("all",(function(){t.selectMenuItem()}))},showShortcutModal:function(){arangoHelper.hotkeysFunctions.showHotkeysModal()},handleSelectDatabase:function(){this.dbSelectionView.render($("#dbSelect"))},template:templateEngine.createTemplate("navigationView.ejs"),templateSub:templateEngine.createTemplate("subNavigationView.ejs"),render:function(){$(this.subEl).html(this.templateSub.render({currentDB:this.currentDB.toJSON()})),arangoHelper.checkDatabasePermissions(this.continueRender.bind(this),this.continueRender.bind(this))},continueRender:function(e){var t=this;$(this.el).html(this.template.render({currentDB:this.currentDB,isCluster:this.isCluster,foxxApiEnabled:this.foxxApiEnabled,readOnly:e})),"_system"!==this.currentDB.get("name")&&$("#dashboard").parent().remove(),this.dbSelectionView.render($("#dbSelect"));var i=function(e){e||this.userBarView.render()}.bind(this);return this.userCollection.whoAmI(i),this.renderFirst&&(this.renderFirst=!1,this.selectMenuItem(),$(".arangodbLogo").on("click",(function(){t.selectMenuItem()})),$("#dbStatus").on("click",(function(){t.changeDB()}))),t.resize(),!0===window.frontendConfig.isEnterprise?($("#ArangoDBLogo").after('<span id="enterpriseLabel" style="display: none">Enterprise Edition</span>'),$("#enterpriseLabel").fadeIn("slow")):($("#ArangoDBLogo").after('<span id="communityLabel" style="display: none">Community Edition</span>'),$("#communityLabel").fadeIn("slow"),$(".enterprise-menu").show()),this},resize:function(){var e=$(window).height()-$(".subMenuEntries").first().height();$("#navigationBar").css("min-height",e),$("#navigationBar").css("height",e)},navigateBySelect:function(){var e=$("#arangoCollectionSelect").find("option:selected").val();window.App.navigate(e,{trigger:!0})},handleKeyboardHotkeys:function(){arangoHelper.enableKeyboardHotkeys(!0)},navigateByTab:function(e){var t=e.target||e.srcElement,i=t.id,n=!1;"enterprise"!==i&&($(t).hasClass("fa")||(""===i&&(i=$(t).attr("class")),"links"===i?(n=!0,$("#link_dropdown").slideToggle(1),e.preventDefault()):"tools"===i?(n=!0,$("#tools_dropdown").slideToggle(1),e.preventDefault()):"dbselection"===i&&(n=!0,$("#dbs_dropdown").slideToggle(1),e.preventDefault()),n||(window.App.navigate(i,{trigger:!0}),e.preventDefault())))},handleSelectNavigation:function(){var e=this;$("#arangoCollectionSelect").change((function(){e.navigateBySelect()}))},subViewConfig:{documents:"collections",collection:"collections"},subMenuConfig:{cluster:[{name:"Dashboard",view:void 0,active:!0}],collections:[{name:"",view:void 0,active:!1}],queries:[{name:"Editor",route:"query",active:!0},{name:"Running Queries",route:"queryManagement",params:{active:!0},active:void 0},{name:"Slow Query History",route:"queryManagement",params:{active:!1},active:void 0}]},renderSubMenu:function(e){var t=this;if(void 0===e&&(e=window.isCluster?"cluster":"dashboard"),this.subMenuConfig[e]){$(this.subEl+" .bottom").html("");var i="";_.each(this.subMenuConfig[e],(function(e){i=e.active?"active":"",e.disabled&&(i="disabled"),$(t.subEl+" .bottom").append('<li class="subMenuEntry '+i+'"><a>'+e.name+"</a></li>"),e.disabled||$(t.subEl+" .bottom").children().last().bind("click",(function(i){$("#subNavigationBar .breadcrumb").html(""),t.activeSubMenu=e,t.renderSubView(e,i)}))}))}else $(t.subEl+" .bottom").append('<li class="subMenuEntry</li>')},renderSubView:function(e,t){window.App[e.route]&&(window.App[e.route].resetState&&window.App[e.route].resetState(),window.App[e.route]()),$(this.subEl+" .bottom").children().removeClass("active"),$(t.currentTarget).addClass("active")},switchTab:function(e){var t=$(e.currentTarget).children().first().attr("id");"enterprise"!==t?t&&this.selectMenuItem(t+"-menu"):window.open("https://www.arangodb.com/download-arangodb-enterprise/","_blank")},selectMenuItem:function(e,t){void 0===e&&(e=(e=window.location.hash.split("/")[0]).substr(1,e.length-1)),""===e?e=window.App.isCluster?"cluster":"dashboard":"cNodes"!==e&&"dNodes"!==e||(e="nodes");try{this.renderSubMenu(e.split("-")[0])}catch(i){this.renderSubMenu(e)}$(".navlist li").removeClass("active"),"string"===typeof e&&(t?$("."+this.subViewConfig[e]+"-menu").addClass("active"):e&&($("."+e).addClass("active"),$("."+e+"-menu").addClass("active"))),arangoHelper.hideArangoNotifications()},showSubDropdown:function(e){$(e.currentTarget).find(".subBarDropdown").toggle()},showDropdown:function(e){var t=(e.target||e.srcElement).id;"links"===t||"link_dropdown"===t||"links"===e.currentTarget.id?$("#link_dropdown").fadeIn(1):"tools"===t||"tools_dropdown"===t||"tools"===e.currentTarget.id?$("#tools_dropdown").fadeIn(1):"dbselection"!==t&&"dbs_dropdown"!==t&&"dbselection"!==e.currentTarget.id||$("#dbs_dropdown").fadeIn(1)},hideDropdown:function(e){$("#link_dropdown").fadeOut(1),$("#tools_dropdown").fadeOut(1),$("#dbs_dropdown").fadeOut(1)}})}()},function(e,t){!function(){"use strict";window.NodeView=Backbone.View.extend({el:"#content",template:templateEngine.createTemplate("nodeView.ejs"),interval:5e3,dashboards:[],events:{},initialize:function(e){window.App.isCluster&&(this.coordinators=e.coordinators,this.dbServers=e.dbServers,this.coordid=e.coordid,this.updateServerTime())},remove:function(){return this.$el.empty().off(),this.stopListening(),this.unbind(),delete this.el,this},breadcrumb:function(e){$("#subNavigationBar .breadcrumb").html("Node: "+e)},render:function(){this.$el.html(this.template.render({coords:[]}));var e=function(){this.continueRender(),this.breadcrumb(arangoHelper.getCoordinatorShortName(this.coordid)),$(window).trigger("resize")}.bind(this);this.initCoordDone||this.waitForCoordinators(),this.initDBDone?(this.coordid=window.location.hash.split("/")[1],this.coordinator=this.coordinators.findWhere({id:this.coordid}),e()):this.waitForDBServers(e)},continueRender:function(){var e,t=this;if(this.coordinator)e=this.coordinator.get("name"),this.dashboards[e]&&this.dashboards[e].clearInterval(),this.dashboards[e]=new window.DashboardView({dygraphConfig:window.dygraphConfig,database:window.App.arangoDatabase,serverToShow:{raw:this.coordinator.get("address"),isDBServer:!1,endpoint:this.coordinator.get("protocol")+"://"+this.coordinator.get("address"),target:this.coordinator.get("id")}});else{var i=this.dbServer.toJSON();e=i.name,this.dashboards[e]&&this.dashboards[e].clearInterval(),this.dashboards[e]=new window.DashboardView({dygraphConfig:null,database:window.App.arangoDatabase,serverToShow:{raw:i.address,isDBServer:!0,endpoint:i.endpoint,id:i.id,name:i.name,status:i.status,target:i.id}})}this.dashboards[e].render(),window.setTimeout((function(){t.dashboards[e].resize()}),500)},waitForCoordinators:function(e){var t=this;window.setTimeout((function(){0===t.coordinators.length?t.waitForCoordinators(e):(t.coordinator=t.coordinators.findWhere({id:t.coordid}),t.initCoordDone=!0,e&&e())}),200)},waitForDBServers:function(e){var t=this;window.setTimeout((function(){0===t.dbServers[0].length?t.waitForDBServers(e):(t.initDBDone=!0,t.dbServer=t.dbServers[0],t.dbServer.each((function(e){var i=e.get("id");i===window.location.hash.split("/")[1]&&(t.dbServer=t.dbServer.findWhere({id:i}))})),e())}),200)},updateServerTime:function(){this.serverTime=(new Date).getTime()}})}()},function(e,t){!function(){"use strict";window.NodesView=Backbone.View.extend({el:"#content",template:templateEngine.createTemplate("nodesView.ejs"),interval:1e4,knownServers:[],events:{"click #nodesContent .coords-nodes .pure-table-row":"navigateToNode","click #nodesContent .dbs-nodes .pure-table-row":"navigateToNode","click #nodesContent .coords-nodes .pure-table-row .fa-trash-o":"deleteNode","click #nodesContent .dbs-nodes .pure-table-row .fa-trash-o":"deleteNode","click #addCoord":"addCoord","click #removeCoord":"removeCoord","click #addDBs":"addDBs","click #removeDBs":"removeDBs","click .abortClusterPlan":"abortClusterPlanModal","keyup #plannedCoords":"checkKey","keyup #plannedDBs":"checkKey"},remove:function(){return clearInterval(this.intervalFunction),this.$el.empty().off(),this.stopListening(),this.unbind(),delete this.el,this},checkKey:function(e){if(13===e.keyCode){var t=this;this.changePlanModal(function(e){var i;if("plannedCoords"===e.target.id)try{"number"===typeof(i=JSON.parse($("#plannedCoords").val()))?(window.modalView.hide(),t.setCoordSize(i)):arangoHelper.arangoError("Error","Invalid value. Must be a number.")}catch(e){arangoHelper.arangoError("Error","Invalid value. Must be a number.")}else if("plannedDBs"===e.target.id)try{"number"===typeof(i=JSON.parse($("#plannedCoords").val()))?(window.modalView.hide(),t.setDBsSize(i)):arangoHelper.arangoError("Error","Invalid value. Must be a number.")}catch(e){arangoHelper.arangoError("Error","Invalid value. Must be a number.")}}.bind(null,e))}},changePlanModal:function(e,t){var i=[],n=[];n.push(window.modalView.createReadOnlyEntry("plan-confirm-button","Caution","You are changing the cluster plan. Continue?",void 0,void 0,!1,/[<>&'"]/)),i.push(window.modalView.createSuccessButton("Yes",e.bind(this,t))),window.modalView.show("modalTable.ejs","Modify Cluster Size",i,n)},initialize:function(){var e=this;clearInterval(this.intervalFunction),window.App.isCluster&&(this.updateServerTime(),this.intervalFunction=window.setInterval((function(){"#nodes"===window.location.hash&&e.render(!1)}),this.interval))},deleteNode:function(e){if(!$(e.currentTarget).hasClass("noHover")){var t=this,i=$(e.currentTarget.parentNode.parentNode).attr("node").slice(0,-5);return window.confirm("Do you want to delete this node?")&&$.ajax({type:"POST",url:arangoHelper.databaseUrl("/_admin/cluster/removeServer"),contentType:"application/json",async:!0,data:JSON.stringify(i),success:function(e){t.render(!1)},error:function(){"#nodes"===window.location.hash&&arangoHelper.arangoError("Cluster","Could not fetch cluster information")}}),!1}},navigateToNode:function(e){var t=$(e.currentTarget).attr("node").slice(0,-5);$(e.currentTarget).hasClass("noHover")||window.App.navigate("#node/"+encodeURIComponent(t),{trigger:!0})},render:function(e){if("#nodes"===window.location.hash){var t=this;$("#content").is(":empty")&&arangoHelper.renderEmpty("Please wait. Requesting cluster information...","fa fa-spin fa-circle-o-notch");$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_admin/cluster/health"),contentType:"application/json",processData:!1,async:!0,success:function(i){var n;"#nodes"===window.location.hash&&(n=i.Health,$.ajax({type:"GET",url:arangoHelper.databaseUrl("/_admin/cluster/numberOfServers"),contentType:"application/json",success:function(i){"#nodes"===window.location.hash&&(!1!==e&&arangoHelper.buildNodesSubNav("Overview",!1),t.continueRender(n,i))},error:function(i){!1!==e&&arangoHelper.buildNodesSubNav("Overview",!0),t.renderFailure(i)}}))},error:function(){"#nodes"===window.location.hash&&arangoHelper.arangoError("Cluster","Could not fetch cluster information")}})}},renderFailure:function(e){var t="Unexpected Failure",i="See the browser developer console for more details.";$(this.el).html(""),e.responseJSON&&403===e.responseJSON.code?(t="Forbidden",i="No access to read nodes data."):e.responseJSON&&e.responseJSON.code&&e.responseJSON.errorMessage?(t="Error code: "+e.responseJSON.code,i=e.responseJSON.errorMessage):console.log(e),$(this.el).append('<div class="infoBox errorBox" style="background: white;"><h4>'+t+"</h4><p>"+i+"</p></div>")},continueRender:function(e,t){var i=[],n=[],r=!1;_.each(e,(function(e,t){e.id=t,"Coordinator"===e.Role?i.push(e):"DBServer"===e.Role&&n.push(e)})),i=_.sortBy(i,(function(e){return e.ShortName})),n=_.sortBy(n,(function(e){return e.ShortName})),null!==t.numberOfDBServers&&null!==t.numberOfCoordinators&&(r=!0);var a=function(e){this.$el.html(this.template.render({coords:i,dbs:n,scaling:r,scaleProperties:e,plannedDBs:t.numberOfDBServers,plannedCoords:t.numberOfCoordinators})),r||($(".title").css("position","relative"),$(".title").css("top","-4px"),$(".sectionHeader .information").css("margin-top","-3px"))}.bind(this);this.renderCounts(r,a)},updatePlanned:function(e){e.numberOfCoordinators&&($("#plannedCoords").val(e.numberOfCoordinators),this.renderCounts(!0)),e.numberOfDBServers&&($("#plannedDBs").val(e.numberOfDBServers),this.renderCounts(!0))},setCoordSize:function(e){var t=this,i={numberOfCoordinators:e};$.ajax({type:"PUT",url:arangoHelper.databaseUrl("/_admin/cluster/numberOfServers"),contentType:"application/json",data:JSON.stringify(i),success:function(){t.updatePlanned(i)},error:function(){arangoHelper.arangoError("Scale","Could not set coordinator size.")}})},setDBsSize:function(e){var t=this,i={numberOfDBServers:e};$.ajax({type:"PUT",url:arangoHelper.databaseUrl("/_admin/cluster/numberOfServers"),contentType:"application/json",data:JSON.stringify(i),success:function(){t.updatePlanned(i)},error:function(){arangoHelper.arangoError("Scale","Could not set coordinator size.")}})},abortClusterPlanModal:function(){var e=[],t=[];t.push(window.modalView.createReadOnlyEntry("plan-abort-button","Caution","You are aborting the planned cluster plan. All pending servers are going to be removed. Continue?",void 0,void 0,!1,/[<>&'"]/)),e.push(window.modalView.createSuccessButton("Yes",this.abortClusterPlan.bind(this))),window.modalView.show("modalTable.ejs","Modify Cluster Size",e,t)},abortClusterPlan:function(){window.modalView.hide();try{var e=JSON.parse($("#infoCoords > .positive > span").text()),t=JSON.parse($("#infoDBs > .positive > span").text());this.setCoordSize(e),this.setDBsSize(t)}catch(i){arangoHelper.arangoError("Plan","Could not abort Cluster Plan")}},renderCounts:function(e,t){var i=this,n=function(t,i,n,r){var a='<span class="positive"><span>'+i+'</span><i class="fa fa-check-circle"></i></span>';n&&!0===e&&(a=a+'<span class="warning"><span>'+n+'</span><i class="fa fa-circle-o-notch fa-spin"></i></span><button class="abortClusterPlan button-navbar button-default">Abort</button>'),r&&(a=a+'<span class="negative"><span>'+r+'</span><i class="fa fa-exclamation-circle"></i></span>'),$(t).html(a),e||($(".title").css("position","relative"),$(".title").css("top","-4px"))};$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_admin/cluster/health"),contentType:"application/json",processData:!1,success:function(e){!function(e){var r=0,a=0,o=0,s=0,l=0,c=0;_.each(e,(function(e){"Coordinator"===e.Role?"GOOD"===e.Status?a++:r++:"DBServer"===e.Role&&("GOOD"===e.Status?s++:l++)})),$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_admin/cluster/numberOfServers"),contentType:"application/json",processData:!1,success:function(e){o=Math.abs(a+r-e.numberOfCoordinators),c=Math.abs(s+l-e.numberOfDBServers),t?t({coordsPending:o,coordsOk:a,coordsErrors:r,dbsPending:c,dbsOk:s,dbsErrors:l}):(n("#infoDBs",s,c,l),n("#infoCoords",a,o,r)),i.isPlanFinished()||($(".scaleGroup").addClass("no-hover"),$("#plannedCoords").attr("disabled","disabled"),$("#plannedDBs").attr("disabled","disabled"))}})}(e.Health)}})},isPlanFinished:function(){return!($("#infoDBs").find(".warning").length>0)&&!($("#infoCoords").find(".warning").length>0)},addCoord:function(){this.isPlanFinished()?this.changePlanModal(function(){window.modalView.hide(),this.setCoordSize(this.readNumberFromID("#plannedCoords",!0))}.bind(this)):(arangoHelper.arangoNotification("Cluster Plan","Planned state not yet finished."),$(".noty_buttons .button-danger").remove())},removeCoord:function(){this.isPlanFinished()?this.changePlanModal(function(){window.modalView.hide(),this.setCoordSize(this.readNumberFromID("#plannedCoords",!1,!0))}.bind(this)):(arangoHelper.arangoNotification("Cluster Plan","Planned state not yet finished."),$(".noty_buttons .button-danger").remove())},addDBs:function(){this.isPlanFinished()?this.changePlanModal(function(){window.modalView.hide(),this.setDBsSize(this.readNumberFromID("#plannedDBs",!0))}.bind(this)):(arangoHelper.arangoNotification("Cluster Plan","Planned state not yet finished."),$(".noty_buttons .button-danger").remove())},removeDBs:function(){this.isPlanFinished()?this.changePlanModal(function(){window.modalView.hide(),this.setDBsSize(this.readNumberFromID("#plannedDBs",!1,!0))}.bind(this)):(arangoHelper.arangoNotification("Cluster Plan","Planned state not yet finished."),$(".noty_buttons .button-danger").remove())},readNumberFromID:function(e,t,i){var n=$(e).val(),r=!1;try{r=JSON.parse(n)}catch(a){}return t&&r++,i&&1!==r&&r--,r},updateServerTime:function(){this.serverTime=(new Date).getTime()}})}()},function(e,t){!function(){"use strict";window.NotificationView=Backbone.View.extend({events:{"click .navlogo #stat_hd":"toggleNotification","click .notificationItem .fa":"removeNotification","click #removeAllNotifications":"removeAllNotifications"},initialize:function(){this.collection.bind("add",this.renderNotifications.bind(this)),this.collection.bind("remove",this.renderNotifications.bind(this)),this.collection.bind("reset",this.renderNotifications.bind(this)),window.setTimeout((function(){!1===frontendConfig.authenticationEnabled&&!1===frontendConfig.isCluster&&!0===arangoHelper.showAuthDialog()&&window.arangoHelper.arangoWarning("Warning","Authentication is disabled. Do not use this setup in production mode.")}),2e3)},notificationItem:templateEngine.createTemplate("notificationItem.ejs"),el:"#notificationBar",template:templateEngine.createTemplate("notificationView.ejs"),toggleNotification:function(){0!==this.collection.length&&$("#notification_menu").toggle()},removeAllNotifications:function(){Noty.clearQueue(),Noty.closeAll(),this.collection.reset(),$("#notification_menu").hide()},removeNotification:function(e){var t=e.target.id;this.collection.get(t).destroy()},renderNotifications:function(e,t,i){if(i&&i.add){var n,r=this.collection.at(this.collection.length-1),a=r.get("title"),o=5e3,s=["click"];if(r.get("content")&&(a=a+": "+r.get("content")),"error"===r.get("type")?(o=!1,s=["button"],n=[Noty.button("Close","btn btn-error",(function(e){console.log("button 1 clicked"),e.close()}),{id:"button1","data-status":"ok"})]):"warning"===r.get("type")?(o=15e3,n=[Noty.button("Close","btn btn-warning",(function(e){e.close()}),{id:"button2","data-status":"true"}),Noty.button("Do not show again.","btn btn-error",(function(e){window.arangoHelper.doNotShowAgain(),e.close()}),{id:"button3","data-status":"false"})]):"info"===r.get("type")&&(o=1e4),arangoHelper.hideArangoNotifications(),new Noty({type:r.get("type"),layout:"bottom",theme:"sunset",text:a,buttons:n,timeout:o,closeWidth:s}).show(),"success"===r.get("type"))return void r.destroy()}},render:function(){return $(this.el).html(this.template.render({notifications:this.collection})),this.renderNotifications(),this.delegateEvents(),this.el}})}()},function(e,t){!function(){"use strict";window.ProgressView=Backbone.View.extend({template:templateEngine.createTemplate("progressBase.ejs"),el:"#progressPlaceholder",el2:"#progressPlaceholderIcon",toShow:!1,lastDelay:0,action:function(){},events:{"click .progress-action button":"performAction"},performAction:function(){"function"===typeof this.action&&this.action(),window.progressView.hide()},initialize:function(){},showWithDelay:function(e,t,i,n){var r=this;r.toShow=!0,r.lastDelay=e,setTimeout((function(){!0===r.toShow&&r.show(t,i,n)}),r.lastDelay)},show:function(e,t,i){$(this.el).html(this.template.render({})),$(".progress-text").text(e),i?$(".progress-action").html('<button class="button-danger">'+i+"</button>"):$(".progress-action").html('<button class="button-danger">Cancel</button>'),this.action=t||this.hide(),$(this.el).show()},hide:function(){this.toShow=!1,$(this.el).hide(),this.action=function(){}}})}()},function(e,t){!function(){"use strict";window.QueryManagementView=Backbone.View.extend({el:"#content",id:"#queryManagementContent",templateActive:templateEngine.createTemplate("queryManagementViewActive.ejs"),templateSlow:templateEngine.createTemplate("queryManagementViewSlow.ejs"),table:templateEngine.createTemplate("arangoTable.ejs"),active:!0,shouldRender:!0,timer:0,refreshRate:2e3,initialize:function(){var e=this;this.activeCollection=new window.QueryManagementActive,this.slowCollection=new window.QueryManagementSlow,this.convertModelToJSON(!0),e.interval=window.setInterval((function(){"#queries"===window.location.hash&&window.VISIBLE&&e.shouldRender&&"queryManagement"===arangoHelper.getCurrentSub().route&&(e.active?$("#arangoQueryManagementTable").is(":visible")&&e.convertModelToJSON(!0):$("#arangoQueryManagementTable").is(":visible")&&e.convertModelToJSON(!1))}),e.refreshRate)},remove:function(){return this.interval&&window.clearInterval(this.interval),this.$el.empty().off(),this.stopListening(),this.unbind(),delete this.el,this},events:{"click #deleteSlowQueryHistory":"deleteSlowQueryHistoryModal","click #arangoQueryManagementTable .fa-minus-circle":"deleteRunningQueryModal"},tableDescription:{id:"arangoQueryManagementTable",titles:["ID","Query String","Bind parameters","User","Runtime","Started",""],rows:[],unescaped:[!1,!1,!1,!1,!1,!1,!0]},deleteRunningQueryModal:function(e){this.killQueryId=$(e.currentTarget).attr("data-id");var t=[],i=[];i.push(window.modalView.createReadOnlyEntry(void 0,"Running Query","Do you want to kill the running query?",void 0,void 0,!1,void 0)),t.push(window.modalView.createDeleteButton("Kill",this.killRunningQuery.bind(this))),window.modalView.show("modalTable.ejs","Kill Running Query",t,i),$(".modal-delete-confirmation strong").html("Really kill?")},killRunningQuery:function(){this.collection.killRunningQuery(this.killQueryId,this.killRunningQueryCallback.bind(this)),window.modalView.hide()},killRunningQueryCallback:function(){this.convertModelToJSON(!0),this.renderActive()},deleteSlowQueryHistoryModal:function(){var e=[],t=[];t.push(window.modalView.createReadOnlyEntry(void 0,"Slow Query Log","Do you want to delete the slow query log entries?",void 0,void 0,!1,void 0)),e.push(window.modalView.createDeleteButton("Delete",this.deleteSlowQueryHistory.bind(this))),window.modalView.show("modalTable.ejs","Delete Slow Query Log",e,t)},deleteSlowQueryHistory:function(){this.collection.deleteSlowQueryHistory(this.slowQueryCallback.bind(this)),window.modalView.hide()},slowQueryCallback:function(){this.convertModelToJSON(!1),this.renderSlow()},render:function(){arangoHelper.getCurrentSub().params.active?(this.active=!0,this.convertModelToJSON(!0)):(this.active=!1,this.convertModelToJSON(!1))},addEvents:function(){var e=this;$("#queryManagementContent tbody").on("mousedown",(function(){clearTimeout(e.timer),e.shouldRender=!1})),$("#queryManagementContent tbody").on("mouseup",(function(){e.timer=window.setTimeout((function(){e.shouldRender=!0}),3e3)}))},renderActive:function(){this.$el.html(this.templateActive.render({})),$(this.id).append(this.table.render({content:this.tableDescription,type:{1:"pre",2:"pre"}})),$("#activequeries").addClass("arango-active-tab"),this.addEvents()},renderSlow:function(){this.$el.html(this.templateSlow.render({})),$(this.id).append(this.table.render({content:this.tableDescription,type:{1:"pre",2:"pre"}})),$("#slowqueries").addClass("arango-active-tab"),this.addEvents()},convertModelToJSON:function(e){var t=this,i=[];this.collection=!0===e?this.activeCollection:this.slowCollection,this.collection.fetch({success:function(){t.collection.each((function(t){var n="";e&&(n='<i data-id="'+t.get("id")+'" class="fa fa-minus-circle"></i>'),i.push([t.get("id"),t.get("query"),JSON.stringify(t.get("bindVars"),null,2),t.get("user"),t.get("runTime").toFixed(2)+"s",t.get("started"),n])}));var n="No running queries.";e||(n="No slow queries."),0===i.length&&i.push([n,"","","","",""]),t.tableDescription.rows=i,e?t.renderActive():t.renderSlow()}})}})}()},function(e,t){!function(){"use strict";window.QueryView=Backbone.View.extend({el:"#content",bindParamId:"#bindParamEditor",myQueriesId:"#queryTable",template:templateEngine.createTemplate("queryView.ejs"),table:templateEngine.createTemplate("arangoTable.ejs"),outputDiv:"#outputEditors",outputTemplate:templateEngine.createTemplate("queryViewOutput.ejs"),outputCounter:0,maps:{},allowUpload:!1,renderComplete:!1,loadedCachedQuery:!1,customQueries:[],cachedQueries:{},queriesHistory:{},graphViewers:[],queries:[],state:{lastQuery:{query:void 0,bindParam:void 0}},graphs:[],settings:{aqlWidth:void 0},currentQuery:{},initDone:!1,bindParamRegExp:/@(@?\w+\d*)/,bindParamTableObj:{},bindParamMode:"table",bindParamTableDesc:{id:"arangoBindParamTable",titles:["Key","Value"],rows:[]},myQueriesTableDesc:{id:"arangoMyQueriesTable",titles:["Name","Actions"],rows:[]},execPending:!1,aqlEditor:null,queryPreview:null,initialize:function(){this.refreshAQL()},allowParamToggle:!0,events:{"click #executeQuery":"executeQuery","click #explainQuery":"explainQuery","click #profileQuery":"profileQuery","click #debugQuery":"debugDownloadDialog","click #clearQuery":"clearQuery","click .outputEditorWrapper #downloadQueryResult":"downloadQueryResult","click .outputEditorWrapper #downloadCsvResult":"downloadCsvResult","click .outputEditorWrapper .switchAce span":"switchAce","click .outputEditorWrapper .closeResult":"closeResult","click #toggleQueries1":"toggleQueries","click #toggleQueries2":"toggleQueries","click #createNewQuery":"createAQL","click #saveCurrentQuery":"addAQL","click #updateCurrentQuery":"updateAQL","click #exportQuery":"exportCustomQueries","click #importQuery":"openImportDialog","click #removeResults":"removeResults","click #querySpotlight":"showSpotlight","click #deleteQuery":"selectAndDeleteQueryFromTable","click #explQuery":"selectAndExplainQueryFromTable","click .closeProfile":"closeProfile","keydown #arangoBindParamTable input":"updateBindParams","change #arangoBindParamTable input":"updateBindParams","change #querySize":"storeQuerySize","click #arangoMyQueriesTable tbody tr":"showQueryPreview","dblclick #arangoMyQueriesTable tbody tr":"selectQueryFromTable","click #arangoMyQueriesTable #copyQuery":"selectQueryFromTable","click #closeQueryModal":"closeExportDialog","click #confirmQueryImport":"importCustomQueries","click #switchTypes":"toggleBindParams","click #arangoMyQueriesTable #runQuery":"selectAndRunQueryFromTable"},clearQuery:function(){this.aqlEditor.setValue("",1)},closeProfile:function(e){var t=$(e.currentTarget).parent().attr("counter");_.each($(".queryProfile"),(function(e){$(e).attr("counter")===t&&$(e).fadeOut("fast").remove()}))},storeQuerySize:function(e){"undefined"!==typeof Storage&&sessionStorage.setItem("querySize",$(e.currentTarget).val())},restoreQuerySize:function(){"undefined"!==typeof Storage&&sessionStorage.getItem("querySize")&&$("#querySize").val(sessionStorage.getItem("querySize"))},toggleBindParams:function(){this.allowParamToggle?($("#bindParamEditor").toggle(),$("#bindParamAceEditor").toggle(),"JSON"===$("#switchTypes").text()?(this.bindParamMode="json",$("#switchTypes").text("Table"),this.updateQueryTable(),this.bindParamAceEditor.setValue(JSON.stringify(this.bindParamTableObj,null,"\t"),1),this.deselect(this.bindParamAceEditor)):(this.bindParamMode="table",$("#switchTypes").text("JSON"),this.renderBindParamTable()),this.setCachedQuery(this.aqlEditor.getValue(),JSON.stringify(this.bindParamTableObj))):arangoHelper.arangoError("Bind parameters","Could not parse bind parameters"),this.resize()},openExportDialog:function(){$("#queryImportDialog").modal("show")},closeExportDialog:function(){$("#queryImportDialog").modal("hide")},initQueryImport:function(){var e=this;e.allowUpload&&$("#confirmQueryImport").removeClass("disabled"),$("#importQueries").change((function(t){e.files=t.target.files||t.dataTransfer.files,e.file=e.files[0],e.allowUpload=!0,$("#confirmQueryImport").removeClass("disabled")}))},importCustomQueries:function(){var e=this;if(!0===this.allowUpload){var t=function(){this.collection.fetch({success:function(){e.updateLocalQueries(),e.updateQueryTable(),e.resize(),$("#queryImportDialog").modal("hide")},error:function(e){arangoHelper.arangoError("Custom Queries",e.responseText)}})}.bind(this);e.collection.saveImportQueries(e.file,t.bind(this))}},removeResults:function(){var e=this;this.cachedQueries={},this.queriesHistory={},_.each($(".outputEditorWrapper"),(function(t){e.closeAceResults(t.id.replace(/^\D+/g,""))}))},removeInputEditors:function(){this.closeAceResults(null,$("#aqlEditor")),this.closeAceResults(null,$("#bindParamAceEditor"))},getCustomQueryParameterByName:function(e){return this.collection.findWhere({name:e}).get("parameter")},getCustomQueryValueByName:function(e){var t;return e&&(t=this.collection.findWhere({name:e})),t?t=t.get("value"):_.each(this.queries,(function(i){i.name===e&&(t=i.value)})),t},openImportDialog:function(){$("#queryImportDialog").modal("show")},closeImportDialog:function(){$("#queryImportDialog").modal("hide")},exportCustomQueries:function(){var e=this;$.ajax({type:"GET",url:"whoAmI?_="+Date.now(),success:function(t){var i=t.user;if(null!==i&&!1!==i||(i="root"),frontendConfig.ldapEnabled)e.collection.downloadLocalQueries();else{var n="query/download/"+encodeURIComponent(i);arangoHelper.download(n)}}})},toggleQueries:function(e){e?"toggleQueries1"===e.currentTarget.id?(this.updateQueryTable(),$("#bindParamAceEditor").hide(),$("#bindParamEditor").show(),$("#switchTypes").text("JSON"),$(".aqlEditorWrapper").first().width(.33*$(window).width()),this.queryPreview.setValue("No query selected.",1),this.deselect(this.queryPreview)):($("#updateCurrentQuery").hide(),void 0===this.settings.aqlWidth?$(".aqlEditorWrapper").first().width(.33*$(window).width()):$(".aqlEditorWrapper").first().width(this.settings.aqlWidth),"undefined"!==sessionStorage.getItem("lastOpenQuery")&&$("#updateCurrentQuery").show()):void 0===this.settings.aqlWidth?$(".aqlEditorWrapper").first().width(.33*$(window).width()):$(".aqlEditorWrapper").first().width(this.settings.aqlWidth),this.resize();_.each(["aqlEditor","queryTable","previewWrapper","querySpotlight","bindParamEditor","toggleQueries1","toggleQueries2","createNewQuery","saveCurrentQuery","querySize","executeQuery","switchTypes","explainQuery","profileQuery","debugQuery","importQuery","exportQuery"],(function(e){$("#"+e).toggle()})),this.resize()},showQueryPreview:function(e){$("#arangoMyQueriesTable tr").removeClass("selected"),$(e.currentTarget).addClass("selected");var t=this.getQueryNameFromTable(e);try{this.queryPreview.setValue(this.getCustomQueryValueByName(t),1)}catch(e){throw this.queryPreview.setValue("Invalid query name",1),arangoHelper.arangoError("Query","Invalid query name"),e}this.deselect(this.queryPreview)},getQueryNameFromTable:function(e){var t;return $(e.currentTarget).is("tr")?t=arangoHelper.escapeHtml($(e.currentTarget).children().first().text()):$(e.currentTarget).is("span")&&(t=arangoHelper.escapeHtml($(e.currentTarget).parent().parent().prev().text())),t},deleteQueryModal:function(e){var t=[],i=[];i.push(window.modalView.createReadOnlyEntry(void 0,e,"Do you want to delete the query?",void 0,void 0,!1,void 0)),t.push(window.modalView.createDeleteButton("Delete",this.deleteAQL.bind(this,e))),window.modalView.show("modalTable.ejs","Delete Query",t,i)},selectAndDeleteQueryFromTable:function(e){var t=this.getQueryNameFromTable(e);this.deleteQueryModal(t)},selectAndExplainQueryFromTable:function(e){this.selectQueryFromTable(e,!1),this.explainQuery()},selectAndRunQueryFromTable:function(e){this.selectQueryFromTable(e,!1),this.executeQuery()},selectQueryFromTable:function(e,t){var i=this.getQueryNameFromTable(e),n=this;void 0===t&&this.toggleQueries();var r=sessionStorage.getItem("lastOpenQuery");this.state.lastQuery.query=this.aqlEditor.getValue(),this.state.lastQuery.bindParam=this.bindParamTableObj;try{this.aqlEditor.setValue(this.getCustomQueryValueByName(i),1),this.fillBindParamTable(this.getCustomQueryParameterByName(i))}catch(e){throw arangoHelper.arangoError("Query","Invalid query name"),e}this.updateBindParams(),this.currentQuery=this.collection.findWhere({name:i}),this.currentQuery&&sessionStorage.setItem("lastOpenQuery",this.currentQuery.get("name")),$("#updateCurrentQuery").show(),$("#lastQuery").remove(),r!==i&&($("#queryContent .arangoToolbarTop .pull-left").append('<span id="lastQuery" class="clickable">Previous Query</span>'),this.breadcrumb(i)),$("#lastQuery").hide().fadeIn(500).on("click",(function(){$("#updateCurrentQuery").hide(),n.aqlEditor.setValue(n.state.lastQuery.query,1),n.fillBindParamTable(n.state.lastQuery.bindParam),n.updateBindParams(),n.collection.each((function(e){(e=e.toJSON()).value===n.state.lastQuery.query?n.breadcrumb(e.name):n.breadcrumb()})),$("#lastQuery").fadeOut(500,(function(){$(this).remove()}))}))},deleteAQL:function(e){var t=function(e){e?arangoHelper.arangoError("Query","Could not delete query."):(this.updateLocalQueries(),this.updateQueryTable(),this.resize(),window.modalView.hide())}.bind(this),i=this.collection.findWhere({name:e});this.collection.remove(i),this.collection.saveCollectionQueries(t)},switchAce:function(e){var t=$(e.currentTarget).attr("counter"),i=e.currentTarget;if(!$(i).hasClass("disabled")){_.each($(i).parent().children(),(function(e){$(e).removeClass("active")}));var n=$(i).attr("val");$(i).addClass("active"),$(i).text(n.charAt(0).toUpperCase()+n.slice(1)),"JSON"===n?($("#outputEditor"+t).show(),$("#outputGraph"+t).hide(),$("#outputTable"+t).hide(),$("#outputGeo"+t).hide()):"Table"===n?($("#outputTable"+t).show(),$("#outputGraph"+t).hide(),$("#outputEditor"+t).hide(),$("#outputGeo"+t).hide()):"Graph"===n?($("#outputGraph"+t).show(),$("#outputTable"+t).hide(),$("#outputEditor"+t).hide(),$("#outputGeo"+t).hide()):"Geo"===n&&($("#outputGeo"+t).show(),$("#outputGraph"+t).hide(),$("#outputTable"+t).hide(),$("#outputEditor"+t).hide()),this.deselect(ace.edit("outputEditor"+t))}},downloadQueryResult:function(e){var t,i=$(e.currentTarget).attr("counter"),n=this.queriesHistory[i].sentQuery;""!==n&&void 0!==n&&null!==n?(t=0===Object.keys(this.queriesHistory[i].bindParam).length?"query/result/download/"+encodeURIComponent(btoa(JSON.stringify({query:n}))):"query/result/download/"+encodeURIComponent(btoa(JSON.stringify({query:n,bindVars:this.queriesHistory[i].bindParam}))),arangoHelper.download(t)):arangoHelper.arangoError("Query error","Could not download the result.")},profileQuery:function(){this.explainQuery(!0)},explainQuery:function(e){if(e=!0===e,!this.verifyQueryAndParams()){this.lastSentQueryString=this.aqlEditor.getValue();var t="Explain";e&&(t="Profile"),this.$(this.outputDiv).prepend(this.outputTemplate.render({counter:this.outputCounter,type:t}));var i=this.outputCounter,n=ace.edit("outputEditor"+i);n.setReadOnly(!0),n.getSession().setMode("ace/mode/aql"),n.setOption("vScrollBarAlwaysVisible",!0),n.setOption("showPrintMargin",!1),this.setEditorAutoHeight(n),this.queriesHistory[i]={sentQuery:this.aqlEditor.getValue(),bindParam:this.bindParamTableObj},this.fillExplain(n,i,e),this.outputCounter++}},debugDownloadDialog:function(){var e=[],t=[];t.push(window.modalView.createReadOnlyEntry("debug-download-package-disclaimer","Disclaimer","<p>This will generate a package containing a lot of commonly required information about your query and environment that helps the ArangoDB Team to reproduce your issue. This debug package will include:</p><ul><li>collection names</li><li>collection indexes</li><li>attribute names</li><li>bind parameters</li></ul><p>Additionally, samples of your data will be included with all <b>string values obfuscated</b> in a non-reversible way if below checkbox is ticked.</p><p>If disabled, this package will not include any data.</p><p>Please open the package locally and check if it contains anything that you are not allowed/willing to share and obfuscate it before uploading. Including this package in bug reports will lower the amount of questioning back and forth to reproduce the issue on our side and is much appreciated.</p>",void 0,!1,!1)),t.push(window.modalView.createCheckboxEntry("debug-download-package-examples","Include obfuscated examples","includeExamples","Includes an example set of documents, obfuscating all string values inside the data. This helps the ArangoDB Team as many issues are related to the document structure / format and the indexes defined on them.",!0)),e.push(window.modalView.createSuccessButton("Download Package",this.downloadDebugZip.bind(this))),window.modalView.show("modalTable.ejs","Download Query Debug Package",e,t,void 0,void 0)},downloadDebugZip:function(){if(!this.verifyQueryAndParams()){var e=this.aqlEditor.getValue();if(""!==e&&void 0!==e&&null!==e){var t={query:e,bindVars:this.bindParamTableObj||{},examples:$("#debug-download-package-examples").is(":checked")};arangoHelper.downloadPost("query/debugDump",JSON.stringify(t),(function(){window.modalView.hide()}),(function(e,t){window.arangoHelper.arangoError("Debug Dump",e+": "+t),window.modalView.hide()}))}else arangoHelper.arangoError("Query error","Could not create a debug package.")}},fillExplain:function(e,t,i){var n,r=this;if(n=i?this.readQueryData(null,null,!0):this.readQueryData()){$("#outputEditorWrapper"+t+" .queryExecutionTime").text(""),this.execPending=!1;var a,o=function(){$("#outputEditorWrapper"+t+" #spinner").remove(),$("#outputEditor"+t).css("opacity","1"),$("#outputEditorWrapper"+t+" .fa-close").show(),$("#outputEditorWrapper"+t+" .switchAce").show()};a=i?arangoHelper.databaseUrl("/_admin/aardvark/query/profile"):arangoHelper.databaseUrl("/_admin/aardvark/query/explain"),$.ajax({type:"POST",url:a,data:JSON.stringify(n),contentType:"application/json",processData:!1,success:function(n){n.msg&&n.msg.errorMessage?(r.removeOutputEditor(t),i?arangoHelper.arangoError("Profile",n.msg):arangoHelper.arangoError("Explain",n.msg)):(r.cachedQueries[t]=n,e.setValue(n.msg,1),r.deselect(e),Noty.clearQueue(),Noty.closeAll(),r.handleResult(t),$(".centralRow").animate({scrollTop:$("#queryContent").height()},"fast")),o()},error:function(e){try{var n=JSON.parse(e.responseText);i?arangoHelper.arangoError("Profile",n.errorMessage):arangoHelper.arangoError("Explain",n.errorMessage)}catch(a){i?arangoHelper.arangoError("Profile","ERROR"):arangoHelper.arangoError("Explain","ERROR")}r.handleResult(t),r.removeOutputEditor(t),o()}})}},removeOutputEditor:function(e){$("#outputEditorWrapper"+e).hide(),$("#outputEditorWrapper"+e).remove(),0===$(".outputEditorWrapper").length&&$("#removeResults").hide()},getCachedQueryAfterRender:function(){if(!1===this.renderComplete&&this.aqlEditor){var e=this.getCachedQuery();if(null!==e&&void 0!==e&&""!==e&&Object.keys(e).length>0){this.aqlEditor.setValue(e.query,1);var t=sessionStorage.getItem("lastOpenQuery");if(void 0!==t&&"undefined"!==t)try{this.collection.findWhere({name:t}).toJSON().value===e.query&&(this.breadcrumb(t),$("#updateCurrentQuery").show())}catch(i){}if(this.aqlEditor.getSession().setUndoManager(new ace.UndoManager),""!==e.parameter||void 0!==e)try{this.bindParamTableObj=JSON.parse(e.parameter),this.fillBindParamTable(this.bindParamTableObj),this.setCachedQuery(this.aqlEditor.getValue(),JSON.stringify(this.bindParamTableObj))}catch(i){}}this.renderComplete=!0}},getCachedQuery:function(){if("undefined"!==Storage){var e=sessionStorage.getItem("cachedQuery");if(void 0!==e){var t=JSON.parse(e);this.currentQuery=t;try{this.bindParamTableObj=JSON.parse(t.parameter)}catch(i){}return t}}},setCachedQuery:function(e,t){if(""!==e&&"undefined"!==Storage){var i={query:e,parameter:t};this.currentQuery=i,sessionStorage.setItem("cachedQuery",JSON.stringify(i))}},closeAceResults:function(e,t){var i=this;e?ace.edit("outputEditor"+e).destroy():ace.edit($(t).attr("id")).destroy(),$("#outputEditorWrapper"+this.outputCounter).hide();var n=function(e){$(e).hide("fast",(function(){$(e).remove(),0===$(".outputEditorWrapper").length&&(i.cachedQueries={},$("#removeResults").hide())}))};t?n(t):_.each($("#outputEditors").children(),(function(e){n(e)}))},closeResult:function(e){var t=$("#"+$(e.currentTarget).attr("element")).parent(),i=$(t).attr("id").replace(/^\D+/g,"");this.closeAceResults(i,t),delete this.cachedQueries[i],delete this.queriesHistory[i]},fillSelectBoxes:function(){var e=$("#querySize");e.empty(),[100,250,500,1e3,2500,5e3,1e4,"all"].forEach((function(t){e.append('<option value="'+_.escape(t)+'"'+(1e3===t?" selected":"")+">"+_.escape(t)+" results</option>")}))},render:function(){this.refreshAQL(),this.renderComplete=!1,this.$el.html(this.template.render({})),this.afterRender(),this.initDone||(this.settings.aqlWidth=$(".aqlEditorWrapper").width()),"json"===this.bindParamMode&&this.toggleBindParams(),this.initDone=!0,this.renderBindParamTable(!0),this.restoreCachedQueries(),this.delegateEvents(),this.restoreQuerySize(),this.getCachedQueryAfterRender()},cleanupGraphs:function(){void 0===this.graphViewers&&null===this.graphViewers||(_.each(this.graphViewers,(function(e){void 0!==e&&(e.killCurrentGraph(),e.remove())})),$("canvas").remove(),this.graphViewers=null,this.graphViewers=[])},afterRender:function(){var e=this;this.initAce(),this.initTables(),this.fillSelectBoxes(),this.makeResizeable(),this.initQueryImport(),$(".inputEditorWrapper").height($(window).height()/10*5+25),window.setTimeout((function(){e.resize()}),10),e.deselect(e.aqlEditor)},restoreCachedQueries:function(){var e=this;Object.keys(this.cachedQueries).length>0&&(_.each(this.cachedQueries,(function(t,i){e.renderQueryResultBox(i,null,!0),e.renderQueryResult(t,i,!0),t.sentQuery&&e.bindQueryResultButtons(null,i)})),$("#removeResults").show())},showSpotlight:function(e){var t,i;if(void 0!==e&&"click"!==e.type||(e="aql"),"aql"===e)t=function(e){this.aqlEditor.insert(e),$("#aqlEditor .ace_text-input").focus()}.bind(this),i=function(){$("#aqlEditor .ace_text-input").focus()};else{var n=$(":focus");t=function(e){var t=$(n).val();$(n).val(t+e),$(n).focus()},i=function(){$(n).focus()}}window.spotlightView.show(t,i,e)},resize:function(){this.resizeFunction()},resizeFunction:function(){$("#toggleQueries1").is(":visible")?(this.aqlEditor.resize(),$("#arangoBindParamTable thead").css("width",$("#bindParamEditor").width()),$("#arangoBindParamTable thead th").css("width",$("#bindParamEditor").width()/2),$("#arangoBindParamTable tr").css("width",$("#bindParamEditor").width()),$("#arangoBindParamTable tbody").css("height",$("#aqlEditor").height()-35),$("#arangoBindParamTable tbody").css("width",$("#bindParamEditor").width()),$("#arangoBindParamTable tbody tr").css("width",$("#bindParamEditor").width()),$("#arangoBindParamTable tbody td").css("width",$("#bindParamEditor").width()/2)):(this.queryPreview.resize(),$("#arangoMyQueriesTable thead").css("width",$("#queryTable").width()),$("#arangoMyQueriesTable thead th").css("width",$("#queryTable").width()/2),$("#arangoMyQueriesTable tr").css("width",$("#queryTable").width()),$("#arangoMyQueriesTable tbody").css("height",$("#queryTable").height()-35),$("#arangoMyQueriesTable tbody").css("width",$("#queryTable").width()),$("#arangoMyQueriesTable tbody td").css("width",$("#queryTable").width()/2))},makeResizeable:function(){var e=this;$(".aqlEditorWrapper").resizable({resize:function(){e.resizeFunction(),e.settings.aqlWidth=$(".aqlEditorWrapper").width()},handles:"e"}),$(".inputEditorWrapper").resizable({resize:function(){e.resizeFunction()},handles:"s"}),this.resizeFunction()},initTables:function(){this.$(this.bindParamId).html(this.table.render({content:this.bindParamTableDesc})),this.$(this.myQueriesId).html(this.table.render({content:this.myQueriesTableDesc}))},checkType:function(e){var t="stringtype";try{t=(e=JSON.parse(e))instanceof Array?"arraytype":typeof e+"type"}catch(i){}return t},updateBindParams:function(e){var t,i=this;if(e){t=$(e.currentTarget).attr("name"),this.bindParamTableObj[t]=arangoHelper.parseInput(e.currentTarget);_.each(["arraytype","objecttype","booleantype","numbertype","stringtype"],(function(t){$(e.currentTarget).removeClass(t)})),$(e.currentTarget).addClass(i.checkType($(e.currentTarget).val()))}else _.each($("#arangoBindParamTable input"),(function(e){t=$(e).attr("name"),i.bindParamTableObj[t]=arangoHelper.parseInput(e)}));this.setCachedQuery(this.aqlEditor.getValue(),JSON.stringify(this.bindParamTableObj)),e&&((e.ctrlKey||e.metaKey)&&13===e.keyCode&&(e.preventDefault(),this.executeQuery()),(e.ctrlKey||e.metaKey)&&32===e.keyCode&&(e.preventDefault(),this.showSpotlight("bind")))},parseQuery:function(e){var t,i,n,r,a=this,o=0,s=(e+=" ").length,l=[];for(i=0;i<s;++i)switch(n=e.charAt(i),o){case 0:"@"===n?(o=6,t=i):"'"===n?o=1:'"'===n?o=2:"`"===n?o=3:"\xb4"===n?o=7:"/"===n&&i+1<s&&("/"===e.charAt(i+1)?(o=4,++i):"*"===e.charAt(i+1)&&(o=5,++i));break;case 4:"\r"!==n&&"\n"!==n||(o=0);break;case 5:"*"===n&&i+1<=s&&"/"===e.charAt(i+1)&&(o=0,++i);break;case 1:"\\"===n?++i:"'"===n&&(o=0);break;case 2:"\\"===n?++i:'"'===n&&(o=0);break;case 3:"`"===n&&(o=0);break;case 7:"\xb4"===n&&(o=0);break;case 6:/^[@a-zA-Z0-9_]+$/.test(n)||(l.push(e.substring(t,i)),o=0,t=void 0)}return _.each(l,(function(e,t){(r=e.match(a.bindParamRegExp))&&(l[t]=r[1])})),{query:e,bindParams:l}},checkForNewBindParams:function(){var e=this,t=this.parseQuery(this.aqlEditor.getValue()).bindParams,i={};_.each(t,(function(t){e.bindParamTableObj[t]?i[t]=e.bindParamTableObj[t]:null===e.bindParamTableObj[t]?i[t]=null:i[t]=""})),Object.keys(t).forEach((function(t){Object.keys(e.bindParamTableObj).forEach((function(n){t===n&&(i[t]=e.bindParamTableObj[n])}))})),e.bindParamTableObj=i},renderBindParamTable:function(e){$("#arangoBindParamTable tbody").html(""),e&&this.getCachedQuery();var t=0;this.checkForNewBindParams(),_.each(this.bindParamTableObj,(function(e,i){$("#arangoBindParamTable tbody").append("<tr><td>"+i+"</td><td><input name="+i+' type="text"></input></td></tr>'),t++})),0===t?$("#arangoBindParamTable tbody").append('<tr class="noBgColor"><td>No bind parameters defined.</td><td></td></tr>'):this.fillBindParamTable(this.bindParamTableObj);var i=sessionStorage.getItem("lastOpenQuery"),n=this.collection.findWhere({name:i});try{n=n.toJSON()}catch(r){}n&&!1===this.loadedCachedQuery&&(this.loadedCachedQuery=!0,this.fillBindParamTable(n.parameter))},fillBindParamTable:function(e){_.each(e,(function(e,t){_.each($("#arangoBindParamTable input"),(function(i){if($(i).attr("name")===t)if(e instanceof Array)$(i).val(JSON.stringify(e)).addClass("arraytype");else if("object"===typeof e)$(i).val(JSON.stringify(e)).addClass(typeof e+"type");else if("number"===typeof e)$(i).val(e).addClass(typeof e+"type");else{var n=!1;try{"number"===typeof JSON.parse(e)&&(n=!0)}catch(r){}n?$(i).val('"'+e+'"').addClass(typeof e+"type"):$(i).val(e).addClass(typeof e+"type")}}))}))},initAce:function(){var e=this;this.aqlEditor=ace.edit("aqlEditor"),this.aqlEditor.$blockScrolling=1/0,this.aqlEditor.getSession().setMode("ace/mode/aql"),this.aqlEditor.getSession().setUseWrapMode(!0),this.aqlEditor.setFontSize("10pt"),this.aqlEditor.setShowPrintMargin(!1),this.bindParamAceEditor=ace.edit("bindParamAceEditor"),this.bindParamAceEditor.$blockScrolling=1/0,this.bindParamAceEditor.getSession().setMode("ace/mode/json"),this.bindParamAceEditor.setFontSize("10pt"),this.bindParamAceEditor.setShowPrintMargin(!1),this.bindParamAceEditor.getSession().on("change",(function(){try{e.bindParamTableObj=JSON.parse(e.bindParamAceEditor.getValue()),e.allowParamToggle=!0,e.setCachedQuery(e.aqlEditor.getValue(),JSON.stringify(e.bindParamTableObj))}catch(t){""===e.bindParamAceEditor.getValue()?(_.each(e.bindParamTableObj,(function(t,i){e.bindParamTableObj[i]=""})),e.allowParamToggle=!0):e.allowParamToggle=!1}})),this.aqlEditor.getSession().on("change",(function(){if(e.aqlEditor.getValue().length<1&&Object.keys(e.bindParamTableObj).length>0&&(e.lastCachedBindParameter=e.bindParamTableObj),e.checkForNewBindParams(),e.renderBindParamTable(),e.parseQuery(e.aqlEditor.getValue()).bindParams.length>0){var t=[];if(_.each(e.parseQuery(e.aqlEditor.getValue()).bindParams,(function(i){if(void 0!==$("input[name='"+i+"']")&&$("input[name='"+i+"']").length>0&&0===$("input[name='"+i+"']").val().length&&e.lastCachedBindParameter){var n=$("input[name='"+i+"']").val();e.lastCachedBindParameter[i]&&e.lastCachedBindParameter[i]!==n&&t.push(i)}})),t.length>0){var i={};_.each(t,(function(t,n){i[t]=e.lastCachedBindParameter[t]})),e.bindParamTableObj=i,e.renderBindParamTable()}}e.initDone&&e.setCachedQuery(e.aqlEditor.getValue(),JSON.stringify(e.bindParamTableObj)),e.bindParamAceEditor.setValue(JSON.stringify(e.bindParamTableObj,null,"\t"),1),$("#aqlEditor .ace_text-input").focus(),e.resize()}));var t=function(e){_.each($(".outputEditors"),(function(t){var i=$(t).children().first().attr("id");i=i.replace("Wrapper",""),ace.edit(i).setFontSize(e)}))},i=[this.aqlEditor,this.bindParamAceEditor];_.each(i,(function(i){i.commands.addCommand({name:"togglecomment",bindKey:{win:"Ctrl-Shift-C",linux:"Ctrl-Shift-C",mac:"Command-Shift-C"},exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEach"}),i.commands.addCommand({name:"increaseFontSize",bindKey:{win:"Shift-Alt-Up",linux:"Shift-Alt-Up",mac:"Shift-Alt-Up"},exec:function(i){var n=parseInt(e.aqlEditor.getFontSize().match(/\d+/)[0],10)+1;n+="pt",e.aqlEditor.setFontSize(n),t(n)},multiSelectAction:"forEach"}),i.commands.addCommand({name:"decreaseFontSize",bindKey:{win:"Shift-Alt-Down",linux:"Shift-Alt-Down",mac:"Shift-Alt-Down"},exec:function(i){var n=parseInt(e.aqlEditor.getFontSize().match(/\d+/)[0],10)-1;n+="pt",e.aqlEditor.setFontSize(n),t(n)},multiSelectAction:"forEach"}),i.commands.addCommand({name:"executeQuery",bindKey:{win:"Ctrl-Return",mac:"Command-Return",linux:"Ctrl-Return"},exec:function(){e.executeQuery()}}),i.commands.addCommand({name:"executeSelectedQuery",bindKey:{win:"Ctrl-Alt-Return",mac:"Command-Alt-Return",linux:"Ctrl-Alt-Return"},exec:function(){e.executeQuery(void 0,!0)}}),i.commands.addCommand({name:"saveQuery",bindKey:{win:"Ctrl-Shift-S",mac:"Command-Shift-S",linux:"Ctrl-Shift-S"},exec:function(){e.addAQL()}}),i.commands.addCommand({name:"explainQuery",bindKey:{win:"Ctrl-Shift-Return",mac:"Command-Shift-Return",linux:"Ctrl-Shift-Return"},exec:function(){e.explainQuery()}}),i.commands.addCommand({name:"togglecomment",bindKey:{win:"Ctrl-Shift-C",linux:"Ctrl-Shift-C",mac:"Command-Shift-C"},exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEach"}),i.commands.addCommand({name:"showSpotlight",bindKey:{win:"Ctrl-Space",mac:"Ctrl-Space",linux:"Ctrl-Space"},exec:function(){e.showSpotlight()}})})),this.queryPreview=ace.edit("queryPreview"),this.queryPreview.getSession().setMode("ace/mode/aql"),this.queryPreview.setReadOnly(!0),this.queryPreview.setFontSize("13px"),this.queryPreview.setShowPrintMargin(!1),$("#aqlEditor .ace_text-input").focus()},updateQueryTable:function(){var e=this;this.updateLocalQueries(),this.myQueriesTableDesc.rows=this.customQueries,_.each(this.myQueriesTableDesc.rows,(function(e){e.secondRow='<span class="spanWrapper"><span id="copyQuery" title="Copy query"><i class="fa fa-copy"></i></span><span id="explQuery" title="Explain query"><i class="fa fa-comments"></i></i></span><span id="runQuery" title="Run query"><i class="fa fa-play-circle-o"></i></i></span><span id="deleteQuery" title="Delete query"><i class="fa fa-minus-circle"></i></span></span>',e.hasOwnProperty("parameter")&&delete e.parameter,delete e.value})),this.myQueriesTableDesc.rows.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})),_.each(this.queries,(function(t){t.hasOwnProperty("parameter")&&delete t.parameter,e.myQueriesTableDesc.rows.push({name:t.name,thirdRow:'<span class="spanWrapper"><span id="copyQuery" title="Copy query"><i class="fa fa-copy"></i></span></span>'})})),this.myQueriesTableDesc.unescaped=[!1,!0,!0],this.$(this.myQueriesId).html(this.table.render({content:this.myQueriesTableDesc}))},listenKey:function(e){13===e.keyCode&&"Update"===$("#modalButton1").html()&&this.saveAQL(),this.checkSaveName()},addAQL:function(){this.refreshAQL(!0),this.createCustomQueryModal(),setTimeout((function(){$("#new-query-name").focus()}),500)},updateAQL:function(){var e=this.aqlEditor.getValue(),t=$("#lastQueryName").html(),i=this.collection.findWhere({name:t});if(i){i.set("value",e),i.set("parameter",this.bindParamTableObj);var n=function(e){if(e)arangoHelper.arangoError("Query","Could not save query");else{var i=this;arangoHelper.arangoNotification("Saved query",'"'+t+'"'),this.collection.fetch({success:function(){i.updateLocalQueries()}})}}.bind(this);this.collection.saveCollectionQueries(n)}this.refreshAQL(!0)},createAQL:function(){sessionStorage.setItem("lastOpenQuery",void 0),this.aqlEditor.setValue(""),this.refreshAQL(!0),this.breadcrumb(),$("#updateCurrentQuery").hide()},createCustomQueryModal:function(){var e=[],t=[];t.push(window.modalView.createTextEntry("new-query-name","Name","",void 0,void 0,!1,[{rule:Joi.string().regex(/^(\s*[a-zA-Z0-9\-._]+\s*)+$/).required(),msg:'A query name is required. Characters, numbers and ".", "_", "-" symbols are allowed.'}])),e.push(window.modalView.createSuccessButton("Save",this.saveAQL.bind(this))),window.modalView.show("modalTable.ejs","Save Query",e,t,void 0,void 0,{"keyup #new-query-name":this.listenKey.bind(this)})},checkSaveName:function(){var e=arangoHelper.escapeHtml($("#new-query-name").val());"Insert Query"!==e?this.customQueries.some((function(t){return t.name===e}))?($("#modalButton1").removeClass("button-success"),$("#modalButton1").addClass("button-warning"),$("#modalButton1").text("Update")):($("#modalButton1").removeClass("button-warning"),$("#modalButton1").addClass("button-success"),$("#modalButton1").text("Save")):$("#new-query-name").val("")},saveAQL:function(e){e&&e.stopPropagation(),this.refreshAQL();var t=arangoHelper.escapeHtml($("#new-query-name").val()),i=this.bindParamTableObj;if(!$("#new-query-name").hasClass("invalid-input")&&""!==t.trim()){var n=this.aqlEditor.getValue(),r=!1;if(_.each(this.customQueries,(function(e){e.name===t&&(e.value=n,r=!0)})),!0===r)this.collection.findWhere({name:t}).set("value",n);else{if(""!==i&&void 0!==i||(i="{}"),"string"===typeof i)try{i=JSON.parse(i)}catch(o){arangoHelper.arangoError("Query","Could not parse bind parameter")}this.collection.add({name:t,parameter:i,value:n})}var a=function(e){if(e)arangoHelper.arangoError("Query","Could not save query");else{var i=this;this.collection.fetch({success:function(){i.updateLocalQueries(),$("#updateCurrentQuery").show(),i.breadcrumb(t)}})}}.bind(this);this.collection.saveCollectionQueries(a),window.modalView.hide()}},breadcrumb:function(e){window.setTimeout((function(){e?$("#subNavigationBar .breadcrumb").html('Query: <span id="lastQueryName">'+e+"</span>"):$("#subNavigationBar .breadcrumb").html("")}),50)},verifyQueryAndParams:function(){var e=!1;if(0===this.aqlEditor.getValue().length&&(arangoHelper.arangoError("Query","Your query is empty"),e=!0),$("#bindParamAceEditor").is(":visible"))try{JSON.parse(this.bindParamAceEditor.getValue())}catch(t){arangoHelper.arangoError("Bind Parameter","Could not parse bind parameter"),e=!0}return e},executeQuery:function(e,t){this.verifyQueryAndParams()||($("#outputEditorWrapper"+this.outputCounter).hide(),$("#outputEditorWrapper"+this.outputCounter).show("fast"),this.lastSentQueryString=this.aqlEditor.getValue(),this.renderQueryResultBox(this.outputCounter,t))},renderQueryResultBox:function(e,t,i){this.$(this.outputDiv).prepend(this.outputTemplate.render({counter:e,type:"Query"}));var n=ace.edit("outputEditor"+e);n.setFontSize("13px"),n.$blockScrolling=1/0,n.getSession().setMode("ace/mode/json"),n.setReadOnly(!0),n.setOption("vScrollBarAlwaysVisible",!0),n.setShowPrintMargin(!1),this.setEditorAutoHeight(n),i||(this.queriesHistory[e]={sentQuery:this.aqlEditor.getValue(),bindParam:this.bindParamTableObj},this.fillResult(e,t),this.outputCounter++)},readQueryData:function(e,t,i){var n={};if(i||(n.id="currentFrontendQuery"),n.query=e?this.aqlEditor.getSelectedText():this.aqlEditor.getValue(),0===n.query.length)return e?arangoHelper.arangoError("Query","Your query selection is empty!"):arangoHelper.arangoError("Query","Your query is empty!"),!1;var r={};return Object.keys(this.bindParamTableObj).length>0&&(_.each(this.bindParamTableObj,(function(e,t){n.query.indexOf(t)>-1&&(r[t]=e)})),n.bindVars=this.bindParamTableObj),Object.keys(r).length>0&&(n.bindVars=r),t&&(n.options={profile:!0}),n},fillResult:function(e,t){var i=this,n=this.readQueryData(t,!0);n&&$.ajax({type:"POST",url:arangoHelper.databaseUrl("/_api/cursor"),headers:{"x-arango-async":"store"},data:JSON.stringify(n),contentType:"application/json",processData:!1,success:function(t,n,r){r.getResponseHeader("x-arango-async-id")&&i.queryCallbackFunction(r.getResponseHeader("x-arango-async-id"),e),Noty.clearQueue(),Noty.closeAll(),i.handleResult(e)},error:function(t){try{var n=JSON.parse(t.responseText);arangoHelper.arangoError("["+n.errorNum+"]",n.errorMessage)}catch(r){arangoHelper.arangoError("Query error","ERROR")}i.handleResult(e)}})},handleResult:function(){var e=this;window.progressView.hide(),$("#removeResults").show(),window.setTimeout((function(){e.aqlEditor.focus()}),300)},setEditorAutoHeight:function(e){var t=($(".centralRow").height()-250)/17;e.setOptions({maxLines:t,minLines:10})},deselect:function(e){var t=e.getSelection(),i=t.lead.row,n=t.lead.column;t.setSelectionRange({start:{row:i,column:n},end:{row:i,column:n}}),e.focus()},warningsFunc:function(e,t){var i="";e.extra&&e.extra.warnings&&e.extra.warnings.length>0&&(i+="Warnings:\r\n\r\n",e.extra.warnings.forEach((function(e){i+="["+e.code+"], '"+e.message+"'\r\n"}))),""!==i&&(i+="\r\nResult:\r\n\r\n"),t.setValue(i+JSON.stringify(e.result,void 0,2),1),t.getSession().setScrollTop(0)},renderQueryResult:function(e,t,i,n){var r,a=this,o="query";try{o=window.App.naviView.activeSubMenu.route}catch(w){}if("#queries"===window.location.hash&&"query"===o){var s,l,c=ace.edit("outputEditor"+t),d=$(".centralRow").height()-250,h=0;if(!e.msg){if("table"===(r=a.analyseQuery(e.result)).defaultType||"geotable"===r.defaultType?($("#outputEditorWrapper"+t+" .arangoToolbarTop").after('<div id="outputTable'+t+'" class="outputTable"></div>'),$("#outputTable"+t).show(),a.renderOutputTable(r,t),$(".outputEditorWrapper .tableWrapper").css("max-height",d),$("#outputEditor"+t).hide(),s=!0):"graph"===r.defaultType&&($("#outputEditorWrapper"+t+" .arangoToolbarTop").after('<div id="outputGraph'+t+'"></div>'),$("#outputGraph"+t).show(),(s=a.renderOutputGraph(r,t))?($("#outputEditor"+t).hide(),$("#outputEditorWrapper"+t+" #copy2gV").show(),$("#outputEditorWrapper"+t+" #copy2gV").bind("click",(function(){a.showResultInGraphViewer(r,t)}))):$("#outputGraph"+t).remove()),"geo"===r.defaultType||"geotable"===r.defaultType){$("#outputEditor"+t).hide(),$("#outputEditorWrapper"+t+" .arangoToolbarTop").after('<div class="geoContainer" id="outputGeo'+t+'" style="height: 500px; maxheight: '+d+'px;"></div>'),a.maps[t]=L.map("outputGeo"+t).setView([51.505,-.09],13),a.maps[t].addLayer(new L.StamenTileLayer("terrain",{detectRetina:!0}));var u,p=1,f={color:"#3498db",opacity:1,weight:3},g={radius:8,fillColor:"#2ecc71",color:"white",weight:1,opacity:1,fillOpacity:.64},m=[];_.each(e.result,(function(i){var n={};if("Point"===(n=i.hasOwnProperty("geometry")?i.geometry:i).type||"MultiPoint"===n.type)try{u=new L.GeoJSON(n,{onEachFeature:function(e,t,n){t.bindPopup('<pre style="width: 250px; max-height: 250px;">'+JSON.stringify(i,null,2)+"</pre>")},pointToLayer:function(e,t){var i=L.circleMarker(t,g);return m.push(i),i}}).addTo(a.maps[t])}catch(w){h++}else if("Polygon"===n.type||"LineString"===n.type||"MultiLineString"===n.type||"MultiPolygon"===n.type)try{u=new L.GeoJSON(n,{style:f,onEachFeature:function(e,t){t.bindPopup('<pre style="width: 250px;">'+JSON.stringify(e,null,2)+"</pre>")}}).addTo(a.maps[t]),m.push(u)}catch(w){h++}if(p===e.result.length)if(m.length>0)try{var r=new L.FeatureGroup(m);a.maps[t].fitBounds(r.getBounds())}catch(w){}else try{a.maps[t].fitBounds(u.getBounds())}catch(w){}p++}))}!1!==s&&("geotable"===r.defaultType||"geo"===r.defaultType?($("#outputTable"+t).hide(),"geotable"===r.defaultType&&$("#table-switch").css("display","inline"),e.result.length===h?($("#outputGeo"+t).remove(),"geotable"===r.defaultType?($("#outputTable"+t).show(),$("#table-switch").addClass("active").css("display","inline")):($("#outputEditor"+t).show(),$("#json-switch").addClass("active").css("display","inline"))):$("#geo-switch").addClass("active").css("display","inline")):$("#"+r.defaultType+"-switch").addClass("active").css("display","inline"),$("#json-switch").css("display","inline"),!r.fallback||"geo"!==r.fallback&&"geotable"!==r.fallback||($("#geo-switch").addClass("disabled").css("display","inline").css("opacity","0.5"),$("#geo-switch").addClass("tippy").attr("title","No internet connection. Map is not available."),arangoHelper.createTooltips()));var v=function(e,i,n){n||(n=""),$("#outputEditorWrapper"+t+" .arangoToolbarTop .pull-left").append('<span class="'+n+'"><i class="fa '+i+'"></i><i class="iconText">'+e+"</i></span>")},b="-";e&&e.extra&&e.extra.stats&&(e.extra.stats.executionTime>1?(b=numeral(e.extra.stats.executionTime).format("0.000"),b+=" s"):(b=numeral(1e3*e.extra.stats.executionTime).format("0.000"),b+=" ms")),v(e.result.length+" elements","fa-calculator"),v(b,"fa-clock-o"),e.extra&&(e.extra.profile&&(v("","fa-caret-down"),a.appendProfileDetails(t,e.extra.profile)),e.extra.stats&&(e.extra.stats.writesExecuted>0||e.extra.stats.writesIgnored>0)&&(v(e.extra.stats.writesExecuted+" writes","fa-check-circle positive"),0===e.extra.stats.writesIgnored?v(e.extra.stats.writesIgnored+" writes ignored","fa-check-circle positive","additional"):v(e.extra.stats.writesIgnored+" writes ignored","fa-exclamation-circle warning","additional")))}$("#outputEditorWrapper"+t+" .pull-left #spinner").remove(),$("#outputEditorWrapper"+t+" #cancelCurrentQuery").remove(),a.warningsFunc(e,c),window.progressView.hide(),$("#outputEditorWrapper"+t+" .switchAce").show(),$("#outputEditorWrapper"+t+" .fa-close").show(),$("#outputEditor"+t).css("opacity","1"),e.msg||($("#outputEditorWrapper"+t+" #downloadQueryResult").show(),$("#outputEditorWrapper"+t+" #copy2aqlEditor").show()),a.setEditorAutoHeight(c),a.deselect(c),n&&e.hasMore?l=arangoHelper.databaseUrl("/_api/cursor/"+encodeURIComponent(n)):e.id&&e.hasMore&&(l=arangoHelper.databaseUrl("/_api/cursor/"+encodeURIComponent(e.id))),l&&$.ajax({url:l,type:"DELETE"}),i||(a.cachedQueries[t]=e,this.cachedQueries[t].sentQuery=a.aqlEditor.getValue()),e.msg&&(e.extra.profile?$("#outputEditorWrapper"+t+" .toolbarType").html("Profile"):$("#outputEditorWrapper"+t+" .toolbarType").html("Explain"),c.setValue(e.msg,1)),"table"!==r.defaultType&&"geotable"!==r.defaultType||a.checkCSV(t)}else a.cachedQueries[t]=e,a.cachedQueries[t].sentQuery=a.lastSentQueryString,arangoHelper.arangoNotification("Query finished","Return to queries view to see the result.")},bindQueryResultButtons:function(e,t){var i=this;if(e)var n=function(e,t){$.ajax({url:arangoHelper.databaseUrl("/_api/job/"+encodeURIComponent(e)+"/cancel"),type:"PUT",success:function(){window.clearTimeout(i.checkQueryTimer),$("#outputEditorWrapper"+t).remove(),arangoHelper.arangoNotification("Query","Query canceled.")}})};$("#outputEditorWrapper"+t+" #cancelCurrentQuery").bind("click",(function(){n(e,t)})),$("#outputEditorWrapper"+t+" #copy2aqlEditor").bind("click",(function(){$("#toggleQueries1").is(":visible")||i.toggleQueries();var e=i.queriesHistory[t].sentQuery,n=i.queriesHistory[t].bindParam;i.aqlEditor.setValue(e,1),i.deselect(i.aqlEditor),Object.keys(n).length>0&&(i.bindParamTableObj=n,i.setCachedQuery(i.aqlEditor.getValue(),JSON.stringify(i.bindParamTableObj)),$("#bindParamEditor").is(":visible")?i.renderBindParamTable():(i.bindParamAceEditor.setValue(JSON.stringify(n),1),i.deselect(i.bindParamAceEditor))),$(".centralRow").animate({scrollTop:0},"fast"),i.resize()}))},queryCallbackFunction:function(e,t){var i,n=this;n.tmpQueryResult=null,this.bindQueryResultButtons(e,t),this.execPending=!1;try{i=parseInt($("#querySize").val())}catch(a){arangoHelper.arangoError("Parse Error","Could not parse defined user limit.")}isNaN(i)&&(i=!0);var r=function(e){null===n.tmpQueryResult&&(n.tmpQueryResult={result:[],complete:!0}),_.each(e,(function(t,r){"result"!==r?n.tmpQueryResult[r]=t:_.each(e.result,(function(e){n.tmpQueryResult.result.length<=i||!0===i?(n.tmpQueryResult.result.length<i||!0===i)&&n.tmpQueryResult.result.push(e):n.tmpQueryResult.complete=!1}))}))};!function o(s){var l=arangoHelper.databaseUrl("/_api/job/"+encodeURIComponent(e));s&&(l=arangoHelper.databaseUrl("/_api/cursor/"+encodeURIComponent(s))),$.ajax({type:"PUT",url:l,contentType:"application/json",processData:!1,success:function(a,s,l){var c=!0;n.tmpQueryResult&&n.tmpQueryResult.result&&n.tmpQueryResult.result.length&&(c=n.tmpQueryResult.result.length<i||!0===i),201===l.status||200===l.status?a.hasMore&&c?(r(a),o(a.id)):(r(a),n.renderQueryResult(n.tmpQueryResult,t,!1,e),n.tmpQueryResult=null,$(".centralRow").animate({scrollTop:$("#queryContent").height()},"fast")):204===l.status&&(n.checkQueryTimer=window.setTimeout((function(){o()}),500))},error:function(e){var i;try{if("Gone"===e.statusText)return arangoHelper.arangoNotification("Query","Query execution aborted."),void n.removeOutputEditor(t);i=JSON.parse(e.responseText),arangoHelper.arangoError("Query",i.errorMessage),i.errorMessage&&(null!==i.errorMessage.match(/\d+:\d+/g)?n.markPositionError(i.errorMessage.match(/'.*'/g)[0],i.errorMessage.match(/\d+:\d+/g)[0]):n.markPositionError(i.errorMessage.match(/\(\w+\)/g)[0]),n.removeOutputEditor(t))}catch(a){if(n.removeOutputEditor(t),409===i.code)return;400!==i.code&&404!==i.code&&500!==i.code&&403!==i.code&&501!==i.code&&arangoHelper.arangoNotification("Query","Successfully aborted.")}window.progressView.hide()}})}()},appendProfileDetails:function(e,t){var i="#outputEditorWrapper"+e;$(i+" .fa-caret-down").first().on("click",(function(){var n=$(i).find(".queryProfile");if($(n).is(":visible"))$(i).find(".queryProfile").remove();else{$(i).append('<div class="queryProfile" counter="'+e+'"></div>');var r=$(i+" .queryProfile").first();r.hide(),r.css("position","absolute").css("left",215).css("top",55);var a=["A","B","C","D","E","F","G","H"],o=["rgb(48, 125, 153)","rgb(241, 124, 176)","rgb(137, 110, 37)","rgb(93, 165, 218)","rgb(250, 164, 58)","rgb(64, 74, 83)","rgb(96, 189, 104)","rgb(221, 224, 114)"],s=["startup time for query engine","query parsing","abstract syntax tree optimizations","loading collections","instanciation of initial execution plan","execution plan optimization and permutation","query execution","query finalization"];r.append('<i class="fa fa-close closeProfile"></i><span class="profileHeader">Profiling information</span><div class="pure-g pure-table pure-table-body" style="width: auto;"></div><div class="prof-progress"></div><div class="prof-progress-label"></div><div class="clear"></div>');var l=0;_.each(t,(function(e,t){"finished"!==t&&(l+=1e3*e)}));var c,d=0,h=0,u="";_.each(t,(function(e,t){"finished"!==t&&(e>1?(u=numeral(e).format("0.000"),u+=" s"):(u=numeral(1e3*e).format("0.000"),u+=" ms"),r.find(".pure-g").append('<div class="pure-table-row noHover"><div class="pure-u-1-24 left"><p class="bold" style="background:'+o[d]+'">'+a[d]+'</p></div><div class="pure-u-4-24 left">'+u+'</div><div class="pure-u-6-24 left">'+t+'</div><div class="pure-u-13-24 left">'+s[d]+"</div></div>"),0===(c=Math.floor(1e3*e/l*100))&&(c=1,h++),7!==d?(r.find(".prof-progress").append('<div style="width: '+c+"%; background-color: "+o[d]+'"></div>'),c>1?r.find(".prof-progress-label").append('<div style="width: '+c+'%;">'+a[d]+"</div>"):r.find(".prof-progress-label").append('<div style="width: '+c+'%; font-size: 9px">'+a[d]+"</div>")):(h>0&&(c-=h),r.find(".prof-progress").append('<div style="width: '+c+"%; background-color: "+o[d]+'"></div>'),c>1?r.find(".prof-progress-label").append('<div style="width: '+c+'%;">'+a[d]+"</div>"):r.find(".prof-progress-label").append('<div style="width: '+c+'%; font-size: 9px">'+a[d]+"</div>")),d++)})),r.width(590),r.height("auto"),r.fadeIn("fast")}}))},analyseQuery:function(e){var t={defaultType:null,original:e,modified:null},i=!1;if(!Array.isArray(e))return t.defaultType="json",t;for(var n=0,r=0;r<e.length;r++)if(e[r]){n=r;break}if(e[n])if(e[n].vertices&&e[n].edges){var a=0,o=0;_.each(e,(function(e){e.edges&&_.each(e.edges,(function(e){null!==e&&(e._from&&e._to&&a++,o++)}))}));var s=0;o>0&&(s=a/o*100),s>=95&&(i=!0,t.defaultType="graph",t.graphInfo="object")}else{var l=0,c=e.length;_.each(e,(function(e){e&&e._from&&e._to&&e._id&&l++}));var d=0;c>0&&(d=l/c*100),d>=95&&(i=!0,t.defaultType="graph",t.graphInfo="array")}var h=0;if(!i){var u=!0,p={};if(e.length<1&&(u=!1),u){_.each(e,(function(e){if("object"===typeof e&&null!==e&&!Array.isArray(e)){if("object"===typeof e)if(e.hasOwnProperty("coordinates")&&e.hasOwnProperty("type"))"Point"!==e.type&&"MultiPoint"!==e.type&&"Polygon"!==e.type&&"MultiPolygon"!==e.type&&"LineString"!==e.type&&"MultiLineString"!==e.type||h++;else if(e.hasOwnProperty("geometry"))try{e.geometry.hasOwnProperty("coordinates")&&e.geometry.hasOwnProperty("type")&&("Point"!==e.geometry.type&&"MultiPoint"!==e.geometry.type&&"Polygon"!==e.geometry.type&&"MultiPolygon"!==e.geometry.type&&"LineString"!==e.geometry.type&&"MultiLineString"!==e.geometry.type||h++)}catch(t){}_.each(e,(function(e,t){p.hasOwnProperty(t)?++p[t]:p[t]=1}))}}));var f=0;_.each(p,(function(t,i){!1!==u&&(f=t/e.length*100)<=95&&(u=!1)})),f<=95&&(u=!1)}u&&(i=!0,e.length===h?t.defaultType="geotable":t.defaultType="table")}return i||(0!==e.length&&e.length===h?t.defaultType="geo":t.defaultType="json"),"geo"!==t.defaultType&&"geotable"!==t.defaultType||window.activeInternetConnection||(t.fallback=t.defaultType,"geo"===t.defaultType?t.defaultType="json":t.defaultType="table"),t},markPositionError:function(e,t){var i;if(t&&(i=t.split(":")[0],e=e.substr(1,e.length-2)),!this.aqlEditor.find(e)&&t){try{(i=parseInt(i))>0&&(i-=1)}catch(n){}this.aqlEditor.selection.moveCursorToPosition({row:i,column:0}),this.aqlEditor.selection.selectLine()}window.setTimeout((function(){$(".ace_start").first().css("background","rgba(255, 129, 129, 0.7)")}),100)},refreshAQL:function(){var e=this,t=function(t){t?arangoHelper.arangoError("Query","Could not reload queries"):(e.updateLocalQueries(),e.updateQueryTable())};this.getAQL((function(){e.getSystemQueries(t)}))},getSystemQueries:function(e){e&&e(!1),this.queries=window.aqltemplates},updateLocalQueries:function(){var e=this;this.customQueries=[],this.collection.each((function(t){e.customQueries.push({name:t.get("name"),value:t.get("value"),parameter:t.get("parameter")})}))},renderOutputTable:function(e,t){var i={id:"outputTableData"+t,titles:[],rows:[]},n=!0,r={},a=0;_.each(e.original,(function(e){!0===n&&e&&(i.titles=Object.keys(e),i.titles.forEach((function(e){r[String(e)]=a++})),n=!1);var t=Array(a);_.each(e,(function(e,i){r.hasOwnProperty(i)&&("object"===typeof e&&(e=JSON.stringify(e)),t[r[i]]=e)})),i.rows.push(t)})),$("#outputTable"+t).append(this.table.render({content:i}))},renderOutputGraph:function(e,t){return this.graphViewers[t]=new window.GraphViewer({name:void 0,documentStore:window.App.arangoDocumentStore,collection:new window.GraphCollection,userConfig:window.App.userConfig,id:"#outputGraph"+t,data:e}),this.graphViewers[t].renderAQLPreview()},showResultInGraphViewer:function(e,t){window.location.hash="#aql_graph",window.App.graphViewer&&(window.App.graphViewer.graphSettingsView&&window.App.graphViewer.graphSettingsView.remove(),window.App.graphViewer.remove()),window.App.graphViewer=new window.GraphViewer({name:void 0,documentStore:window.App.arangoDocumentStore,collection:new window.GraphCollection,userConfig:window.App.userConfig,noDefinedGraph:!0,data:e}),window.App.graphViewer.renderAQL()},getAQL:function(e){var t=this;this.collection.fetch({success:function(){t.getCachedQueryAfterRender();var i=sessionStorage.getItem("customQueries");if(i){var n=JSON.parse(i);_.each(n,(function(e){t.collection.add({value:e.value,name:e.name})}));t.collection.saveCollectionQueries((function(e){e?arangoHelper.arangoError("Custom Queries","Could not import old local storage queries"):sessionStorage.removeItem("customQueries")}))}t.updateLocalQueries(),e&&e()},error:function(e,t){arangoHelper.arangoError("User Queries",t.responseText)}})},checkCSV:function(e){var t=ace.edit("outputEditor"+e).getValue(),i=!1;try{t=JSON.parse(t),i=!0,_.each(t,(function(e,t){_.each(e,(function(e,t){try{"object"===typeof JSON.parse(e)&&(i=!1)}catch(n){}}))}))}catch(n){}i&&$("#outputEditorWrapper"+e+" #downloadCsvResult").show()},doCSV:function(e){var t=this.arrayFrom(e),i=[];for(var n in t)i[i.length]=this.parse_object(t[n]);return $.csv.fromObjects(i)},downloadCsvResult:function(e){var t,i=$(e.currentTarget).attr("counter"),n=ace.edit("outputEditor"+i).getValue();n=JSON.parse(n),(t=$.csv.fromObjects(n,{justArrays:!0})).length>0?arangoHelper.downloadLocalBlob(t,"csv"):arangoHelper.arangoError("Query error","Could not download the result.")}})}()},function(e,t){!function(){"use strict";window.ReplicationView=Backbone.View.extend({el:"#content",mode:null,interval:5e3,keepEntries:100,charts:{},nvchartsInit:!1,loggerGraphsData:[],info:{state:null,mode:null,level:null,role:null,health:"Good",msg:"No issues detected."},nodes:{leader:null,followers:[]},initialize:function(e){var t=this;window.setInterval((function(){t.getStateData()}),this.interval)},template:templateEngine.createTemplate("replicationView.ejs"),events:{"click #nodes-followers-id span":"goToApplier","click #repl-follower-table tr":"goToApplierFromTable"},remove:function(){return this.$el.empty().off(),this.stopListening(),this.unbind(),delete this.el,this},render:function(){this.undelegateEvents(),this.getMode(this.continueRender.bind(this))},continueRender:function(){this.$el.html(this.template.render({mode:this.mode,info:this.info,nodes:this.nodes})),this.getStateData(),this.delegateEvents()},renderStatisticBox:function(e,t,i,n){if($("#replication-info #nodeattribute-"+e).length)$("#replication-info #nodeattribute-"+e).html(t);else{var r="";r+=6===n?'<div class="pure-u-1-2 pure-u-md-1-3 pure-u-lg-1-6" style="background-color: #fff">':'<div class="pure-u-1-2 pure-u-md-1-4" style="background-color: #fff">',r+='<div class="valueWrapper">',r+=i?'<div id="nodeattribute-'+e+'" class="value tippy" title="'+t+'">'+t+"</div>":'<div id="nodeattribute-'+e+'" class="value">'+t+"</div>",r+='<div class="graphLabel">'+e+"</div>",r+="</div>",r+="</div>",$("#replication-info").append(r)}},goToApplier:function(e){var t=btoa($(e.currentTarget).attr("data"));window.App.navigate("#replication/applier/"+t+"/"+btoa("_system"),{trigger:!0})},goToApplierFromTable:function(e){var t=btoa(window.location.origin),i=btoa($(e.currentTarget).find("#applier-database-id").html()),n=$(e.currentTarget).find("#applier-running-id").html();"true"===n||!0===n?window.App.navigate("#replication/applier/"+t+"/"+i,{trigger:!0}):arangoHelper.arangoMessage("Replication","This applier is not running.")},getActiveFailoverEndpoints:function(){var e=this;$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_api/cluster/endpoints"),contentType:"application/json",success:function(t){t.endpoints?e.renderEndpoints(t.endpoints):e.renderEndpoints()},error:function(){e.renderEndpoints()}})},renderEndpoints:function(e){var t=this;if(e){var i=e[0],n=e.slice(1,e.length);$("#nodes-leader-id").html(i.endpoint),$("#nodes-followers-id").html(""),_.each(n,(function(e){$("#nodes-followers-id").append('<span data="'+t.parseEndpoint(e.endpoint,!0)+'">'+e.endpoint+"</span>")}))}else $("#nodes-leader-id").html("Error"),$("#nodes-followers-id").html("Error")},parseEndpoint:function(e,t){var i;return"[::1]"===e.slice(6,11)?i=window.location.host.split(":")[0]+":"+e.split(":")[4]:"tcp://"===e.slice(0,6)?i="http://"+e.slice(6,e.length):"ssl://"===e.slice(0,6)&&(i="https://"+e.slice(6,e.length)),t&&(i=window.location.protocol+"//"+i),i||e},getLoggerState:function(){var e=this;$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_api/replication/logger-state"),contentType:"application/json",success:function(t){"#replication"===window.location.hash?(e.updateLoggerGraphsData(t),e.nvchartsInit?e.rerenderLoggerGraphs():e.initLoggerGraphs(),e.renderLoggerState(t.server,t.clients,t.state)):e.updateLoggerGraphsData(t)},error:function(){arangoHelper.arangoError("Replication","Could not fetch the leaders logger state.")}})},getApplierStates:function(e){var t,i=this;t=e?arangoHelper.databaseUrl("/_api/replication/applier-state?global=true"):arangoHelper.databaseUrl("/_api/replication/applier-state-all"),$.ajax({type:"GET",cache:!1,url:t,contentType:"application/json",success:function(t){e?i.renderApplierState(t,!0):i.renderApplierState(t)},error:function(){e?arangoHelper.arangoError("Replication","Could not fetch the followers global applier state."):arangoHelper.arangoError("Replication","Could not fetch the followers applier state.")}})},renderApplierState:function(e,t){var i,n=this;t&&(e.database="All databases",e={"All databases":e});var r,a=0,o=[],s=[];_.each(e,(function(t,i){t.state.running?o.push(e[i]):(e[i].database=i,s.push(e[i]))})),o=_.sortBy(o,"database"),s=_.sortBy(s,"database"),e=o.concat(s),$("#repl-follower-table tbody").html(""),_.each(e,(function(e,t){var o;i="undefined"!==e.endpoint&&e.endpoint?n.parseEndpoint(e.endpoint):"not available","inactive"!==e.state.phase&&!0!==e.state.running&&a++;var s="active";"inactive"===e.state.phase&&(s="inactive"),0===e.state.lastError.errorNum?o="inactive"!==e.state.phase||e.state.running?'<i class="fa fa-check-circle positive"></i>':"n/a":(o='<i class="fa fa-times-circle negative"></i>',a++),$("#repl-follower-table tbody").append('<tr class="'+s+'"><td id="applier-database-id">'+e.database+'</td><td id="applier-running-id">'+e.state.running+"</td><td>"+e.state.phase+'</td><td id="applier-endpoint-id">'+i+"</td><td>"+e.state.lastAppliedContinuousTick+"</td><td>"+o+"</td></tr>"),r=e.server.serverId})),$("#logger-lastLogTick-id").html(r),0===a?this.renderHealth(!1):this.renderHealth(!0,"Some appliers are not running or do have errors.")},renderHealth:function(e,t){e?($("#info-msg-id").addClass("negative"),$("#info-msg-id").removeClass("positive"),$("#info-msg-id").html('Bad <i class="fa fa-times-circle"></i>'),t&&($("#info-msg-id").attr("title",t),$("#info-msg-id").addClass("modalTooltips"),arangoHelper.createTooltips(".modalTooltips"))):($("#info-msg-id").addClass("positive"),$("#info-msg-id").removeClass("negative"),$("#info-msg-id").removeClass("modalTooltips"),$("#info-msg-id").html('Good <i class="fa fa-check-circle"></i>'))},getStateData:function(e){3===this.mode?(this.getActiveFailoverEndpoints(),this.getLoggerState()):2===this.mode?"leader"===this.info.role?this.getLoggerState():this.getApplierStates(!0):1===this.mode&&("leader"===this.info.role?this.getLoggerState():this.getApplierStates()),e&&e()},updateLoggerGraphsData:function(e){this.loggerGraphsData.length>this.keepEntries&&this.loggerGraphsData.pop(),this.loggerGraphsData.push(e)},parseLoggerData:function(){var e,t=this,i=this.loggerGraphsData;this.colors||(this.colors=randomColor({hue:"blue",count:this.loggerGraphsData.length}));var n={leader:{key:e=3===t.mode?"Leader":"Master",values:[],strokeWidth:2,color:"#2ecc71"}},r={leader:{key:e,values:[],strokeWidth:2,color:"#2ecc71"}};return _.each(i,(function(e){n.leader.values.push({x:Date.parse(e.state.time),y:0}),r.leader.values.push({x:Date.parse(e.state.time),y:0});var i=0;_.each(e.clients,(function(a){var o;n[a.serverId]||(o=3===t.mode?"Follower ("+a.serverId+")":"Slave ("+a.serverId+")",n[a.serverId]={key:o,color:t.colors[i],strokeWidth:1,values:[]},r[a.serverId]={key:o,color:t.colors[i],strokeWidth:1,values:[]},i++);n[a.serverId].values.push({x:Date.parse(a.time),y:(Date.parse(e.state.time)-Date.parse(a.time))/1e3*-1}),r[a.serverId].values.push({x:Date.parse(a.time),y:-1*(e.state.lastLogTick-a.lastServedTick)})}))})),{graphDataTick:_.toArray(r),graphDataTime:_.toArray(n)}},initLoggerGraphs:function(){var e=this;nv.addGraph((function(){e.charts.replicationTimeChart=nv.models.lineChart().options({duration:300,useInteractiveGuideline:!0,forceY:[2,-10]}),e.charts.replicationTimeChart.xAxis.axisLabel("").tickFormat((function(e){var t=new Date(e);return(t.getHours()<10?"0":"")+t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()+":"+(t.getSeconds()<10?"0":"")+t.getSeconds()})).staggerLabels(!1),e.charts.replicationTimeChart.yAxis.axisLabel("Last call ago (in s)").tickFormat((function(e){return null===e?"N/A":d3.format(",.0f")(e)}));var t=e.parseLoggerData().graphDataTime;return d3.select("#replicationTimeChart svg").datum(t).call(e.charts.replicationTimeChart),nv.utils.windowResize(e.charts.replicationTimeChart.update),e.charts.replicationTimeChart})),nv.addGraph((function(){e.charts.replicationTickChart=nv.models.lineChart().options({duration:300,useInteractiveGuideline:!0,forceY:[2,void 0]}),e.charts.replicationTickChart.xAxis.axisLabel("").tickFormat((function(e){var t=new Date(e);return(t.getHours()<10?"0":"")+t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()+":"+(t.getSeconds()<10?"0":"")+t.getSeconds()})).staggerLabels(!1),e.charts.replicationTickChart.yAxis.axisLabel("Ticks behind").tickFormat((function(e){return null===e?"N/A":d3.format(",.0f")(e)}));var t=e.parseLoggerData().graphDataTick;return d3.select("#replicationTickChart svg").datum(t).call(e.charts.replicationTickChart),nv.utils.windowResize(e.charts.replicationTickChart.update),e.charts.replicationTickChart})),e.nvchartsInit=!0},rerenderLoggerGraphs:function(){d3.select("#replicationTimeChart svg").datum(this.parseLoggerData().graphDataTime).transition().duration(500).call(this.charts.replicationTimeChart),d3.select("#replicationTickChart svg").datum(this.parseLoggerData().graphDataTick).transition().duration(500).call(this.charts.replicationTickChart),_.each(this.charts,(function(e){nv.utils.windowResize(e.update)}))},renderLoggerState:function(e,t,i){e&&t&&i?($("#logger-running-id").html(i.running),$("#logger-version-id").html(e.version),$("#logger-serverid-id").html(e.serverId),$("#logger-time-id").html(i.time),$("#logger-lastLogTick-id").html(i.lastLogTick),$("#logger-totalEvents-id").html(i.totalEvents),$("#repl-logger-clients tbody").html(""),_.each(t,(function(e){$("#repl-logger-clients tbody").append("<tr><td>"+e.syncerId+"</td><td>"+e.serverId+"</td><td>"+e.clientInfo+"</td><td>"+e.time+"</td><td>"+e.lastServedTick+"</td></tr>")})),i.running?this.renderHealth(!1):this.renderHealth(!0,"The logger thread is not running")):($("#logger-running-id").html("Error"),$("#logger-endpoint-id").html("Error"),$("#logger-version-id").html("Error"),$("#logger-serverid-id").html("Error"),$("#logger-time-id").html("Error"),this.renderHealth(!0,"Unexpected data from the logger thread."))},getMode:function(e){var t=this;$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_admin/aardvark/replication/mode"),contentType:"application/json",success:function(i){(i.mode||0===i.mode)&&(Number.isInteger(i.mode)?(t.mode=i.mode,0!==i.mode?t.info.state="enabled":t.info.state="disabled"):t.mode="undefined",i.role&&(t.info.role=i.role),3===t.mode?(t.info.mode="Active Failover",t.info.level="Server"):2===t.mode?(t.info.mode="Master/Slave",t.info.level="Server"):1===t.mode&&(t.info.mode="Master/Slave","follower"===t.info.role?t.info.level="Database":t.info.level="Check slaves for details")),e&&e()},error:function(){arangoHelper.arangoError("Replication","Could not fetch the replication state.")}})}})}()},function(e,t){!function(){"use strict";window.ScaleView=Backbone.View.extend({el:"#content",template:templateEngine.createTemplate("scaleView.ejs"),interval:1e4,knownServers:[],events:{"click #addCoord":"addCoord","click #removeCoord":"removeCoord","click #addDBs":"addDBs","click #removeDBs":"removeDBs"},setCoordSize:function(e){var t=this,i={numberOfCoordinators:e};$.ajax({type:"PUT",url:arangoHelper.databaseUrl("/_admin/cluster/numberOfServers"),contentType:"application/json",data:JSON.stringify(i),success:function(){t.updateTable(i)},error:function(){arangoHelper.arangoError("Scale","Could not set coordinator size.")}})},setDBsSize:function(e){var t=this,i={numberOfDBServers:e};$.ajax({type:"PUT",url:arangoHelper.databaseUrl("/_admin/cluster/numberOfServers"),contentType:"application/json",data:JSON.stringify(i),success:function(){t.updateTable(i)},error:function(){arangoHelper.arangoError("Scale","Could not set coordinator size.")}})},addCoord:function(){this.setCoordSize(this.readNumberFromID("#plannedCoords",!0))},removeCoord:function(){this.setCoordSize(this.readNumberFromID("#plannedCoords",!1,!0))},addDBs:function(){this.setDBsSize(this.readNumberFromID("#plannedDBs",!0))},removeDBs:function(){this.setDBsSize(this.readNumberFromID("#plannedDBs",!1,!0))},readNumberFromID:function(e,t,i){var n=$(e).html(),r=!1;try{r=JSON.parse(n)}catch(a){}return t&&r++,i&&1!==r&&r--,r},initialize:function(e){var t=this;clearInterval(this.intervalFunction),window.App.isCluster&&"_system"===frontendConfig.db&&(this.dbServers=e.dbServers,this.coordinators=e.coordinators,this.updateServerTime(),this.intervalFunction=window.setInterval((function(){"#sNodes"===window.location.hash&&t.coordinators.fetch({success:function(){t.dbServers.fetch({success:function(){t.continueRender(!0)}})}})}),this.interval))},render:function(){var e=this,t=function(){this.waitForDBServers((function(){e.continueRender()}))}.bind(this);this.initDoneCoords?t():this.waitForCoordinators(t),window.arangoHelper.buildNodesSubNav("scale")},continueRender:function(e){var t,i,n=this;t=this.coordinators.toJSON(),i=this.dbServers.toJSON(),this.$el.html(this.template.render({runningCoords:t.length,runningDBs:i.length,plannedCoords:void 0,plannedDBs:void 0,initialized:e})),$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_admin/cluster/numberOfServers"),contentType:"application/json",processData:!1,success:function(e){n.updateTable(e)}})},updateTable:function(e){var t='<span class="warning">scaling in progress <i class="fa fa-circle-o-notch fa-spin"></i></span>',i='<span class="positive">no scaling process active</span>';e.numberOfCoordinators&&($("#plannedCoords").html(e.numberOfCoordinators),this.coordinators.toJSON().length===e.numberOfCoordinators?$("#statusCoords").html(i):$("#statusCoords").html(t)),e.numberOfDBServers&&($("#plannedDBs").html(e.numberOfDBServers),this.dbServers.toJSON().length===e.numberOfDBServers?$("#statusDBs").html(i):$("#statusDBs").html(t))},waitForDBServers:function(e){var t=this;0===this.dbServers.length?window.setInterval((function(){t.waitForDBServers(e)}),300):e()},waitForCoordinators:function(e){var t=this;window.setTimeout((function(){0===t.coordinators.length?t.waitForCoordinators(e):(t.initDoneCoords=!0,e())}),200)},updateServerTime:function(){this.serverTime=(new Date).getTime()}})}()},function(e,t){!function(){"use strict";window.SettingsView=Backbone.View.extend({el:"#content",readOnly:!1,initialize:function(e){this.collectionName=e.collectionName,this.model=this.collection},events:{},render:function(){this.breadcrumb(),arangoHelper.buildCollectionSubNav(this.collectionName,"Settings"),this.renderSettings()},breadcrumb:function(){$("#subNavigationBar .breadcrumb").html("Collection: "+(this.collectionName.length>64?this.collectionName.substr(0,64)+"...":this.collectionName))},unloadCollection:function(){if(!this.readOnly){var e=function(e){e?arangoHelper.arangoError("Collection error",this.model.get("name")+" could not be unloaded."):void 0===e?(this.model.set("status","unloading"),this.render()):"#collections"===window.location.hash?(this.model.set("status","unloaded"),this.render()):arangoHelper.arangoNotification("Collection "+this.model.get("name")+" unloaded.")}.bind(this);this.model.unloadCollection(e),window.modalView.hide()}},loadCollection:function(){if(!this.readOnly){var e=function(e){e?arangoHelper.arangoError("Collection error",this.model.get("name")+" could not be loaded."):void 0===e?(this.model.set("status","loading"),this.render()):"#collections"===window.location.hash?(this.model.set("status","loaded"),this.render()):arangoHelper.arangoNotification("Collection "+this.model.get("name")+" loaded.")}.bind(this);this.model.loadCollection(e),window.modalView.hide()}},truncateCollection:function(){this.readOnly||(this.model.truncateCollection(),$(".modal-delete-confirmation").hide(),window.modalView.hide())},warmupCollection:function(){this.readOnly||(this.model.warmupCollection(),$(".modal-delete-confirmation").hide(),window.modalView.hide())},deleteCollection:function(){this.readOnly||this.model.destroy({error:function(e,t){arangoHelper.arangoError("Could not drop collection: "+t.responseJSON.errorMessage)},success:function(){window.App.navigate("#collections",{trigger:!0})}})},saveModifiedCollection:function(){if(!this.readOnly){var e=function(e,t){if(e)arangoHelper.arangoError("Error","Could not get coordinator info");else{var i;i=t?this.model.get("name"):$("#change-collection-name").val();var n=this.model.get("status");if("loaded"===n){var r=this,a=function(e,t){e?(r.render(),arangoHelper.arangoError("Collection error: "+t.responseJSON.errorMessage)):(arangoHelper.arangoNotification("Collection: Successfully changed."),window.App.navigate("#cSettings/"+i,{trigger:!0}))},o=function(e){var t=!1;if(e)arangoHelper.arangoError("Collection error: "+e.responseText);else{var i,n,r=$("#change-collection-sync").val();if(frontendConfig.isCluster){i=$("#change-replication-factor").val(),n=$("#change-write-concern").val();try{Number.parseInt(n)>Number.parseInt(i)&&(arangoHelper.arangoError("Change Collection","Write concern is not allowed to be greater than replication factor"),t=!0)}catch(o){}}t||this.model.changeCollection(r,i,n,a)}}.bind(this);!1===frontendConfig.isCluster?this.model.renameCollection(i,o):o()}else if("unloaded"===n)if(this.model.get("name")!==i){var s=function(e,t){e?arangoHelper.arangoError("Collection"+t.responseText):(arangoHelper.arangoNotification("CollectionSuccessfully changed."),window.App.navigate("#cSettings/"+i,{trigger:!0}))};!1===frontendConfig.isCluster?this.model.renameCollection(i,s):s()}else window.modalView.hide()}}.bind(this);window.isCoordinator(e)}},changeViewToReadOnly:function(){window.App.settingsView.readOnly=!0,$(".breadcrumb").html($(".breadcrumb").html()+" (read-only)"),$(".modal-body input").prop("disabled","true"),$(".modal-body select").prop("disabled","true"),$(".modal-footer button").addClass("disabled"),$(".modal-footer button").unbind("click")},renderSettings:function(){var e=this,t=function(t,i){if(t)arangoHelper.arangoError("Error","Could not get coordinator info");else{var n=!1;"loaded"===this.model.get("status")&&(n=!0);var r=[],a=[];i||("_"===this.model.get("name").substr(0,1)?a.push(window.modalView.createReadOnlyEntry("change-collection-name","Name",this.model.get("name"),!1,"",!0,[{rule:Joi.string().regex(/^[a-zA-Z]/),msg:"Collection name must always start with a letter."},{rule:Joi.string().regex(/^[a-zA-Z0-9\-_]*$/),msg:'Only Symbols "_" and "-" are allowed.'},{rule:Joi.string().required(),msg:"No collection name given."}])):a.push(window.modalView.createTextEntry("change-collection-name","Name",this.model.get("name"),!1,"",!0,[{rule:Joi.string().regex(/^[a-zA-Z]/),msg:"Collection name must always start with a letter."},{rule:Joi.string().regex(/^[a-zA-Z0-9\-_]*$/),msg:'Only Symbols "_" and "-" are allowed.'},{rule:Joi.string().required(),msg:"No collection name given."}])));var o=function(){a.push(window.modalView.createReadOnlyEntry("change-collection-id","ID",this.model.get("id"),"")),a.push(window.modalView.createReadOnlyEntry("change-collection-type","Type",this.model.get("type"),"")),a.push(window.modalView.createReadOnlyEntry("change-collection-status","Status",this.model.get("status"),"")),r.push(window.modalView.createDeleteButton("Delete",this.deleteCollection.bind(this))),r.push(window.modalView.createDeleteButton("Truncate",this.truncateCollection.bind(this))),"rocksdb"===frontendConfig.engine&&r.push(window.modalView.createNotificationButton("Load Indexes into Memory",this.warmupCollection.bind(this))),n?r.push(window.modalView.createNotificationButton("Unload",this.unloadCollection.bind(this))):r.push(window.modalView.createNotificationButton("Load",this.loadCollection.bind(this))),r.push(window.modalView.createSuccessButton("Save",this.saveModifiedCollection.bind(this)));window.modalView.show(["modalTable.ejs","indicesView.ejs"],"Modify Collection",r,a,null,null,this.events,null,["General","Indexes"],"content"),$($("#infoTab").children()[1]).remove()}.bind(this);if(n){this.model.getProperties((function(t,i){if(t)arangoHelper.arangoError("Collection","Could not fetch properties");else{var n=i.waitForSync;i.replicationFactor&&frontendConfig.isCluster&&("satellite"===i.replicationFactor?(a.push(window.modalView.createReadOnlyEntry("change-replication-factor","Replication factor",i.replicationFactor,"This collection is a SatelliteCollection. The replicationFactor is not changeable.","",!0)),a.push(window.modalView.createReadOnlyEntry("change-write-concern","Write concern",JSON.stringify(i.writeConcern),"This collection is a SatelliteCollection. The write concern is not changeable.","",!0))):(a.push(window.modalView.createTextEntry("change-replication-factor","Replication factor",i.replicationFactor,"The replicationFactor parameter is the total number of copies being kept, that is, it is one plus the number of followers. Must be a number.","",!0,[{rule:Joi.string().allow("").optional().regex(/^[0-9]*$/),msg:"Must be a number."}])),a.push(window.modalView.createTextEntry("change-write-concern","Write concern",i.writeConcern,"Numeric value. Must be at least 1. Must be smaller or equal compared to the replication factor. Total number of copies of the data in the cluster that are required for each write operation. If we get below this value the collection will be read-only until enough copies are created.","",!0,[{rule:Joi.string().allow("").optional().regex(/^[1-9]*$/),msg:"Must be a number. Must be at least 1 and has to be smaller or equal compared to the replicationFactor."}])))),a.push(window.modalView.createSelectEntry("change-collection-sync","Wait for sync",n,"Synchronize to disk before returning from a create or update of a document.",[{value:!1,label:"No"},{value:!0,label:"Yes"}]))}o(),arangoHelper.checkCollectionPermissions(e.collectionName,e.changeViewToReadOnly.bind(this))}))}else o(),arangoHelper.checkCollectionPermissions(e.collectionName,e.changeViewToReadOnly.bind(this))}}.bind(this);window.isCoordinator(t)}})}()},function(e,t){!function(){"use strict";window.ShardsView=Backbone.View.extend({el:"#content",template:templateEngine.createTemplate("shardsView.ejs"),interval:1e4,knownServers:[],pending:!1,visibleCollection:null,events:{"click #shardsContent .shardLeader span":"moveShard","click #shardsContent .shardFollowers span":"moveShardFollowers","click #rebalanceShards":"rebalanceShards","click .sectionHeader":"toggleSections"},initialize:function(e){var t=this;t.dbServers=e.dbServers,clearInterval(this.intervalFunction),window.App.isCluster&&(this.updateServerTime(),this.intervalFunction=window.setInterval((function(){"#shards"===window.location.hash&&t.render(!1)}),this.interval))},remove:function(){return clearInterval(this.intervalFunction),this.$el.empty().off(),this.stopListening(),this.unbind(),delete this.el,this},renderArrows:function(e){$("#shardsContent .fa-arrow-down").removeClass("fa-arrow-down").addClass("fa-arrow-right"),$(e.currentTarget).find(".fa-arrow-right").removeClass("fa-arrow-right").addClass("fa-arrow-down")},toggleSections:function(e){var t=$(e.currentTarget).parent().attr("id");this.visibleCollection=t,$(".sectionShardContent").hide(),$(e.currentTarget).next().show(),this.renderArrows(e),this.getShardDetails(t)},renderShardDetail:function(e,t){var i=0,n=0,r=0;_.each(t.results[e].Plan,(function(t,a){if(t.progress)if(0===t.progress.current){$("#"+e+"-"+a+" .shardProgress").html("<span>n/A</span>")}else i=(t.progress.current/t.progress.total*100).toString().match(/^-?\d+(?:\.\d{0,2})?/)[0]+"%",$("#"+e+"-"+a+" .shardProgress").html(i);else $("#"+e+"-"+a+" .shardProgress").html('<i class="fa fa-check-circle">'),n++;r++})),r===n?($("#"+e+" .shardSyncIcons i").addClass("fa-check-circle").removeClass(".fa-times-circle"),$("#"+e+" .notInSync").addClass("inSync").removeClass("notInSync")):$("#"+e+" .shardSyncIcons i").addClass("fa-times-circle").removeClass("fa-check-circle")},checkActiveShardDisplay:function(){var e=this;_.each($(".sectionShard"),(function(t){$(t).find(".sectionShardContent").is(":visible")&&e.getShardDetails($(t).attr("id"))}))},getShardDetails:function(e){var t=this,i={collection:e};$("#"+e+" .shardProgress").html('<i class="fa fa-circle-o-notch fa-spin fa-fw"></i>'),$.ajax({type:"PUT",cache:!1,data:JSON.stringify(i),url:arangoHelper.databaseUrl("/_admin/cluster/collectionShardDistribution"),contentType:"application/json",processData:!1,async:!0,success:function(i){t.renderShardDetail(e,i)},error:function(e){}})},render:function(e){if("#shards"===window.location.hash&&!1===this.pending){var t=this;t.pending=!0,$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_admin/cluster/shardDistribution"),contentType:"application/json",processData:!1,async:!0,success:function(e){t.pending=!1;var i=!1;t.shardDistribution=e.results,_.each(e.results,(function(e,t){"error"!==t&&"code"!==t&&(i=!0)})),i?t.continueRender(e.results):arangoHelper.renderEmpty("No collections and no shards available"),t.checkActiveShardDisplay()},error:function(e){0!==e.readyState&&arangoHelper.arangoError("Cluster","Could not fetch sharding information.")}}),!1!==e&&arangoHelper.buildNodesSubNav("Shards")}},moveShardFollowers:function(e){var t=$(e.currentTarget).html();this.moveShard(e,t)},moveShard:function(e,t){var i,n,r,a,o=this,s=window.App.currentDB.get("name");n=$(e.currentTarget).parent().parent().attr("collection"),r=$(e.currentTarget).parent().parent().attr("shard"),t?(a=$(e.currentTarget).parent().parent().attr("leader"),a=arangoHelper.getDatabaseServerId(a),i=arangoHelper.getDatabaseServerId(t)):(i=$(e.currentTarget).parent().parent().attr("leader"),i=arangoHelper.getDatabaseServerId(i));var l=[],c=[],d={},h=[];o.dbServers[0].fetch({success:function(){o.dbServers[0].each((function(e){e.get("id")!==i&&(d[e.get("name")]={value:e.get("id"),label:e.get("name")})})),_.each(o.shardDistribution[n].Plan[r].followers,(function(e){delete d[e]})),t&&delete d[arangoHelper.getDatabaseShortName(a)],_.each(d,(function(e){h.push(e)})),0!==(h=h.reverse()).length?(c.push(window.modalView.createSelectEntry("toDBServer","Destination",void 0,"Please select the target database server. The selected database server will be the new leader of the shard.",h)),l.push(window.modalView.createSuccessButton("Move",o.confirmMoveShards.bind(this,s,n,r,i))),window.modalView.show("modalTable.ejs","Move shard: "+r,l,c)):arangoHelper.arangoMessage("Shards","No database server for moving the shard is available.")}})},confirmMoveShards:function(e,t,i,n){var r=$("#toDBServer").val(),a={database:e,collection:t,shard:i,fromServer:n,toServer:r};$.ajax({type:"POST",cache:!1,url:arangoHelper.databaseUrl("/_admin/cluster/moveShard"),contentType:"application/json",processData:!1,data:JSON.stringify(a),async:!0,success:function(e){e.id&&(arangoHelper.arangoNotification("Shard "+i+" will be moved to "+arangoHelper.getDatabaseShortName(r)+"."),window.setTimeout((function(){window.App.shardsView.render()}),3e3))},error:function(){arangoHelper.arangoError("Shard "+i+" could not be moved to "+arangoHelper.getDatabaseShortName(r)+".")}}),window.modalView.hide()},rebalanceShards:function(){var e=this;$.ajax({type:"POST",cache:!1,url:arangoHelper.databaseUrl("/_admin/cluster/rebalanceShards"),contentType:"application/json",processData:!1,data:JSON.stringify({}),async:!0,success:function(t){!0===t&&(window.setTimeout((function(){e.render(!1)}),3e3),arangoHelper.arangoNotification("Started rebalance process."))},error:function(){arangoHelper.arangoError("Could not start rebalance process.")}}),window.modalView.hide()},continueRender:function(e){delete e.code,delete e.error,_.each(e,(function(t,i){var n={Plan:{},Current:{}};if(i.startsWith("_local_")){var r=i.substr(7,i.length-1),a=["_local_"+r,"_from_"+r,"_to_"+r,r],o=0;_.each(a,(function(t,i){e[a[o]]&&(_.each(e[a[o]].Current,(function(e,t){n.Current[t]=e})),_.each(e[a[o]].Plan,(function(e,t){n.Plan[t]=e}))),delete e[a[o]],e[r]=n,o++}))}}));var t={};Object.keys(e).sort((function(e,t){return"_"===e[0]&&"_"!==t[0]?1:"_"!==e[0]&&"_"===t[0]?-1:e===t?0:e<t?-1:1})).forEach((function(i){t[i]=e[i]})),this.$el.html(this.template.render({collections:t,visible:this.visibleCollection})),1===$(".sectionShard").length&&$(".sectionHeader").first().click(),$(".innerContent").css("min-height","0px")},updateServerTime:function(){this.serverTime=(new Date).getTime()}})}()},function(e,t){!function(){"use strict";window.ShowClusterView=Backbone.View.extend({detailEl:"#modalPlaceholder",el:"#content",defaultFrame:12e5,template:templateEngine.createTemplate("showCluster.ejs"),modal:templateEngine.createTemplate("waitModal.ejs"),detailTemplate:templateEngine.createTemplate("detailView.ejs"),events:{"change #selectDB":"updateCollections","change #selectCol":"updateShards","click .dbserver.success":"dashboard","click .coordinator.success":"dashboard"},replaceSVGs:function(){$(".svgToReplace").each((function(){var e=$(this),t=e.attr("id"),i=e.attr("src");$.get(i,(function(i){var n=$(i).find("svg");n.attr("id",t).attr("class","icon").removeAttr("xmlns:a"),e.replaceWith(n)}),"xml")}))},updateServerTime:function(){this.serverTime=(new Date).getTime()},setShowAll:function(){this.graphShowAll=!0},resetShowAll:function(){this.graphShowAll=!1,this.renderLineChart()},initialize:function(e){this.options=e,this.interval=1e4,this.isUpdating=!1,this.timer=null,this.knownServers=[],this.graph=void 0,this.graphShowAll=!1,this.updateServerTime(),this.dygraphConfig=this.options.dygraphConfig,this.dbservers=new window.ClusterServers([],{interval:this.interval}),this.coordinators=new window.ClusterCoordinators([],{interval:this.interval}),this.documentStore=new window.ArangoDocuments,this.statisticsDescription=new window.StatisticsDescription,this.statisticsDescription.fetch({async:!1}),this.dbs=new window.ClusterDatabases([],{interval:this.interval}),this.cols=new window.ClusterCollections,this.shards=new window.ClusterShards,this.startUpdating()},listByAddress:function(e){var t=this;this.dbservers.byAddress({},(function(i){t.coordinators.byAddress(i,e)}))},updateCollections:function(){var e=this,t=$("#selectCol"),i=$("#selectDB").find(":selected").attr("id");if(i){var n=t.find(":selected").attr("id");t.html(""),this.cols.getList(i,(function(i){_.each(_.pluck(i,"name"),(function(e){t.append('<option id="'+e+'">'+e+"</option>")}));var r=$("#"+n,t);1===r.length&&r.prop("selected",!0),e.updateShards()}))}},updateShards:function(){var e=$("#selectDB").find(":selected").attr("id"),t=$("#selectCol").find(":selected").attr("id");this.shards.getList(e,t,(function(e){$(".shardCounter").html("0"),_.each(e,(function(e){$("#"+e.server+"Shards").html(e.shards.length)}))}))},updateServerStatus:function(e){var t=this,i=function(e,t,i){var n,r,a=i;a=(a=a.replace(/\./g,"-")).replace(/:/g,"_"),(r=$("#id"+a)).length<1||(n=r.attr("class").split(/\s+/)[1],r.attr("class",e+" "+n+" "+t),"coordinator"===e&&("success"===t?$(".button-gui",r.closest(".tile")).toggleClass("button-gui-disabled",!1):$(".button-gui",r.closest(".tile")).toggleClass("button-gui-disabled",!0)))};this.coordinators.getStatuses(i.bind(this,"coordinator"),(function(){t.dbservers.getStatuses(i.bind(t,"dbserver")),e()}))},updateDBDetailList:function(){var e=this,t=$("#selectDB"),i=t.find(":selected").attr("id");t.html(""),this.dbs.getList((function(n){_.each(_.pluck(n,"name"),(function(e){t.append('<option id="'+e+'">'+e+"</option>")}));var r=$("#"+i,t);1===r.length&&r.prop("selected",!0),e.updateCollections()}))},rerender:function(){var e=this;this.updateServerStatus((function(){e.getServerStatistics((function(){e.updateServerTime(),e.data=e.generatePieData(),e.renderPieChart(e.data),e.renderLineChart(),e.updateDBDetailList()}))}))},render:function(){this.knownServers=[],delete this.hist;var e=this;this.listByAddress((function(t){1===Object.keys(t).length?e.type="testPlan":e.type="other",e.updateDBDetailList(),e.dbs.getList((function(i){$(e.el).html(e.template.render({dbs:_.pluck(i,"name"),byAddress:t,type:e.type})),$(e.el).append(e.modal.render({})),e.replaceSVGs(),e.getServerStatistics((function(){e.data=e.generatePieData(),e.renderPieChart(e.data),e.renderLineChart(),e.updateDBDetailList(),e.startUpdating()}))}))}))},generatePieData:function(){var e=[],t=this;return this.data.forEach((function(i){e.push({key:i.get("name"),value:i.get("system").virtualSize,time:t.serverTime})})),e},addStatisticsItem:function(e,t,i,n){this.hasOwnProperty("hist")||(this.hist={}),this.hist.hasOwnProperty(e)||(this.hist[e]=[]);var r=this.hist[e],a=r.length;if(0===a)r.push({time:t,snap:n,requests:i,requestsPerSecond:0});else{var o=r[a-1].time,s=r[a-1].requests;if(s<i){var l=t-o,c=0;l>0&&(c=(i-s)/l),r.push({time:t,snap:n,requests:i,requestsPerSecond:c})}}},getServerStatistics:function(e){var t=this,i=Math.round(t.serverTime/1e3);this.data=void 0;var n=new window.ClusterStatisticsCollection,r=this.coordinators.first();this.dbservers.forEach((function(e){if("ok"===e.get("status")){-1===t.knownServers.indexOf(e.id)&&t.knownServers.push(e.id);var i=new window.Statistics({name:e.id});i.url=r.get("protocol")+"://"+r.get("address")+"/_admin/clusterStatistics?DBserver="+e.get("name"),n.add(i)}})),this.coordinators.forEach((function(e){if("ok"===e.get("status")){-1===t.knownServers.indexOf(e.id)&&t.knownServers.push(e.id);var i=new window.Statistics({name:e.id});i.url=e.get("protocol")+"://"+e.get("address")+"/_admin/statistics",n.add(i)}}));var a=n.size();this.data=[];n.fetch((function(n){a--;var r=n.get("time"),o=n.get("name"),s=n.get("http").requestsTotal;t.addStatisticsItem(o,r,s,i),t.data.push(n),0===a&&e()}),(function(){0===--a&&e()}))},renderPieChart:function(e){var t=$("#clusterGraphs svg").width(),i=$("#clusterGraphs svg").height(),n=Math.min(t,i)/2,r=this.dygraphConfig.colors,a=d3.svg.arc().outerRadius(n-20).innerRadius(0),o=d3.layout.pie().sort((function(e){return e.value})).value((function(e){return e.value}));d3.select("#clusterGraphs").select("svg").remove();var s=d3.select("#clusterGraphs").append("svg").attr("class","clusterChart").append("g").attr("transform","translate("+t/2+","+(i/2-10)+")"),l=d3.svg.arc().outerRadius(n-2).innerRadius(n-2),c=s.selectAll(".arc").data(o(e)).enter().append("g").attr("class","slice");c.append("path").attr("d",a).style("fill",(function(e,t){return r[t%r.length]})).style("stroke",(function(e,t){return r[t%r.length]})),c.append("text").attr("transform",(function(e){return"translate("+a.centroid(e)+")"})).style("text-anchor","middle").text((function(e){return(e.data.value/1024/1024/1024).toFixed(2)})),c.append("text").attr("transform",(function(e){return"translate("+l.centroid(e)+")"})).style("text-anchor","middle").text((function(e){return e.data.key}))},renderLineChart:function(){var e,t,i,n,r,a,o=[],s=[],l=Math.round((new Date).getTime()/1e3)-1200,c=this.knownServers,d=function(){return null};for(i=0;i<c.length;++i)if(t=this.hist[c[i]])for(n=0;n<t.length;++n)(a=t[n].snap)<l||(s.hasOwnProperty(a)?e=s[a]:(r=new Date(1e3*a),e=s[a]=[r].concat(c.map(d))),e[i+1]=t[n].requestsPerSecond);o=[],Object.keys(s).sort().forEach((function(e){o.push(s[e])}));var h=this.dygraphConfig.getDefaultConfig("clusterRequestsPerSecond");h.labelsDiv=$("#lineGraphLegend")[0],h.labels=["datetime"].concat(c),this.graph=new Dygraph(document.getElementById("lineGraph"),o,h)},stopUpdating:function(){window.clearTimeout(this.timer),delete this.graph,this.isUpdating=!1},startUpdating:function(){if(!this.isUpdating){this.isUpdating=!0;var e=this;this.timer=window.setInterval((function(){e.rerender()}),this.interval)}},dashboard:function(e){this.stopUpdating();var t,i,n=$(e.currentTarget),r={},a=n.attr("id");a=(a=(a=a.replace(/-/g,".")).replace(/_/g,":")).substr(2),r.raw=a,r.isDBServer=n.hasClass("dbserver"),r.isDBServer?(t=this.dbservers.findWhere({address:r.raw}),i=this.coordinators.findWhere({status:"ok"}),r.endpoint=i.get("protocol")+"://"+i.get("address")):(t=this.coordinators.findWhere({address:r.raw}),r.endpoint=t.get("protocol")+"://"+t.get("address")),r.target=encodeURIComponent(t.get("name")),window.App.serverToShow=r,window.App.dashboard()},getCurrentSize:function(e){return"#"!==e.substr(0,1)&&(e="#"+e),$(e).attr("style",""),{height:$(e).height(),width:$(e).width()}},resize:function(){var e;this.graph&&(e=this.getCurrentSize(this.graph.maindiv_.id),this.graph.resize(e.width,e.height))}})}()},function(e,t){!function(){"use strict";window.SpotlightView=Backbone.View.extend({template:templateEngine.createTemplate("spotlightView.ejs"),el:"#spotlightPlaceholder",displayLimit:8,typeahead:null,callbackSuccess:null,callbackCancel:null,collections:{system:[],doc:[],edge:[]},events:{"focusout #spotlight .tt-input":"hide","keyup #spotlight .typeahead":"listenKey"},aqlKeywordsArray:[],aqlBuiltinFunctionsArray:[],aqlKeywords:"for|return|filter|search|sort|limit|let|collect|asc|desc|in|into|insert|update|remove|replace|upsert|options|with|and|or|not|distinct|graph|shortest_path|outbound|inbound|any|all|none|aggregate|like|count",hide:function(){this.typeahead=$("#spotlight .typeahead").typeahead("destroy"),$(this.el).hide()},listenKey:function(e){if(27===e.keyCode)this.callbackSuccess&&this.callbackCancel(),this.hide();else if(13===e.keyCode&&this.callbackSuccess){var t=$(this.typeahead).val();this.callbackSuccess(t),this.hide()}},substringMatcher:function(e){return function(t,i){var n,r;n=[],r=new RegExp(t,"i"),_.each(e,(function(e){r.test(e)&&n.push(e)})),i(n)}},updateDatasets:function(){var e=this;this.collections={system:[],doc:[],edge:[]},window.App.arangoCollectionsStore.each((function(t){t.get("isSystem")?e.collections.system.push(t.get("name")):"document"===t.get("type")?e.collections.doc.push(t.get("name")):e.collections.edge.push(t.get("name"))}))},stringToArray:function(){var e=this;_.each(this.aqlKeywords.split("|"),(function(t){e.aqlKeywordsArray.push(t.toUpperCase())})),e.aqlKeywordsArray.push(!0),e.aqlKeywordsArray.push(!1),e.aqlKeywordsArray.push(null)},fetchKeywords:function(e){var t=this;$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_api/aql-builtin"),contentType:"application/json",success:function(i){t.stringToArray(),t.updateDatasets(),_.each(i.functions,(function(e){t.aqlBuiltinFunctionsArray.push(e.name)})),e&&e()},error:function(){e&&e(),arangoHelper.arangoError("AQL","Could not fetch AQL function definition.")}})},show:function(e,t,i){var n=this;this.callbackSuccess=e,this.callbackCancel=t;var r=function(){var e=function(e,t,i){var n='<div class="header-type"><h4>'+e+"</h4>";return t&&(n+='<span><i class="fa '+t+'"></i></span>'),i&&(n+='<span class="type">'+i.toUpperCase()+"</span>"),n+="</div>"};$(this.el).html(this.template.render({})),$(this.el).show(),this.typeahead="aql"===i?$("#spotlight .typeahead").typeahead({hint:!0,highlight:!0,minLength:1},{name:"Functions",source:n.substringMatcher(n.aqlBuiltinFunctionsArray),limit:n.displayLimit,templates:{header:e("Functions","fa-code","aql")}},{name:"Keywords",source:n.substringMatcher(n.aqlKeywordsArray),limit:n.displayLimit,templates:{header:e("Keywords","fa-code","aql")}},{name:"Documents",source:n.substringMatcher(n.collections.doc),limit:n.displayLimit,templates:{header:e("Documents","fa-file-text-o","Collection")}},{name:"Edges",source:n.substringMatcher(n.collections.edge),limit:n.displayLimit,templates:{header:e("Edges","fa-share-alt","Collection")}},{name:"System",limit:n.displayLimit,source:n.substringMatcher(n.collections.system),templates:{header:e("System","fa-cogs","Collection")}}):$("#spotlight .typeahead").typeahead({hint:!0,highlight:!0,minLength:1},{name:"Documents",source:n.substringMatcher(n.collections.doc),limit:n.displayLimit,templates:{header:e("Documents","fa-file-text-o","Collection")}},{name:"Edges",source:n.substringMatcher(n.collections.edge),limit:n.displayLimit,templates:{header:e("Edges","fa-share-alt","Collection")}},{name:"System",limit:n.displayLimit,source:n.substringMatcher(n.collections.system),templates:{header:e("System","fa-cogs","Collection")}}),$("#spotlight .typeahead").focus()}.bind(this);0===n.aqlBuiltinFunctionsArray.length?this.fetchKeywords(r):r()}})}()},function(e,t){!function(){"use strict";window.StatisticBarView=Backbone.View.extend({el:"#statisticBar",events:{"change #arangoCollectionSelect":"navigateBySelect","click .tab":"navigateByTab"},template:templateEngine.createTemplate("statisticBarView.ejs"),initialize:function(e){this.currentDB=e.currentDB},replaceSVG:function(e){var t=e.attr("id"),i=e.attr("class"),n=e.attr("src");$.get(n,(function(n){var r=$(n).find("svg");void 0===t&&(r=r.attr("id",t)),void 0===i&&(r=r.attr("class",i+" replaced-svg")),r=r.removeAttr("xmlns:a"),e.replaceWith(r)}),"xml")},render:function(){var e=this;return $(this.el).html(this.template.render({isSystem:this.currentDB.get("isSystem")})),$("img.svg").each((function(){e.replaceSVG($(this))})),this},navigateBySelect:function(){var e=$("#arangoCollectionSelect").find("option:selected").val();window.App.navigate(e,{trigger:!0})},navigateByTab:function(e){var t=(e.target||e.srcElement).id;return"links"===t?($("#link_dropdown").slideToggle(200),void e.preventDefault()):"tools"===t?($("#tools_dropdown").slideToggle(200),void e.preventDefault()):(window.App.navigate(t,{trigger:!0}),void e.preventDefault())},handleSelectNavigation:function(){$("#arangoCollectionSelect").change((function(){var e=$(this).find("option:selected").val();window.App.navigate(e,{trigger:!0})}))},selectMenuItem:function(e){$(".navlist li").removeClass("active"),e&&$("."+e).addClass("active")}})}()},function(e,t){!function(){"use strict";window.StoreDetailView=Backbone.View.extend({el:"#content",divs:["#readme","#swagger","#app-info","#sideinformation","#information","#settings"],navs:["#service-info","#service-api","#service-readme","#service-settings"],template:templateEngine.createTemplate("storeDetailView.ejs"),remove:function(){return this.$el.empty().off(),this.stopListening(),this.unbind(),delete this.el,this},events:{"click #installService":"installService"},installService:function(){arangoHelper.createMountPointModal(this.installFoxxFromStore.bind(this))},installCallback:function(e){window.App.navigate("#services",{trigger:!0}),window.App.applicationsView.installCallback(e)},installFoxxFromStore:function(e){var t,i,n;window.modalView.modalTestAll()&&(this._upgrade?t=this.mount:"/"!==(t=window.arangoHelper.escapeHtml($("#new-app-mount").val())).charAt(0)&&(t="/"+t),i={name:this.model.get("name"),version:this.model.get("latestVersion")},n=arangoHelper.getFoxxFlags(),this.collection.install("store",i,t,n,this.installCallback.bind(this)),window.modalView.hide(),arangoHelper.arangoNotification("Services","Installing "+this.model.get("name")+"."))},resize:function(e){e?$(".innerContent").css("height","auto"):$(".innerContent").height($(".centralRow").height()-150)},render:function(){var e=this;return this.model.fetchThumbnail(function(t){var i=function(t,i){if(t)arangoHelper.arangoError("DB","Could not get current database");else{var n=this.model.get("defaultThumbnailUrl");if(this.model.get("manifest"))try{this.model.get("manifest").thumbnail&&(n=this.model.getThumbnailUrl())}catch(r){}$(this.el).html(this.template.render({app:this.model,baseUrl:arangoHelper.databaseUrl("",i),installed:!0,image:n})),this.model.fetchReadme(e.renderReadme)}this.breadcrumb()}.bind(this);arangoHelper.currentDatabase(i),_.isEmpty(this.model.get("config"))&&$("#service-settings").attr("disabled",!0)}.bind(this)),this.resize(!1),$(this.el)},renderReadme:function(e){var t=marked(e);$("#readme").html(t)},breadcrumb:function(){var e="Service: "+this.model.get("name")+'<i class="fa fa-ellipsis-v" aria-hidden="true"></i>',t='<p class="mount"><span>Contributors:</span>';this.model.get("contributors")&&this.model.get("contributors").length>0?_.each(this.model.get("contributors"),(function(e){e.email?t+='<a href="mailto:'+e.email+'">'+(e.name||e.email)+"</a>":e.name&&(t+="<a>contributor.name</a>")})):t+="No contributors",t+="</p>",$(".information").append(t),this.model.get("author")&&$(".information").append('<p class="mount"><span>Author:</span>'+this.model.get("author")+"</p>"),this.model.get("mount")&&$(".information").append('<p class="mount"><span>Mount:</span>'+this.model.get("mount")+"</p>"),this.model.get("development")&&this.model.get("path")&&$(".information").append('<p class="path"><span>Path:</span>'+this.model.get("path")+"</p>"),$("#subNavigationBar .breadcrumb").html(e)},storeUrl:function(e){return arangoHelper.databaseUrl(this.model.get("mount"),e)}})}()},function(e,t){!function(){"use strict";window.SupportView=Backbone.View.extend({el:"#content",template:templateEngine.createTemplate("supportView.ejs"),events:{"click .subViewNavbar .subMenuEntry":"toggleViews"},render:function(){this.$el.html(this.template.render({parsedVersion:window.versionHelper.toDocuVersion(window.frontendConfig.version.version)}))},resize:function(e){e?$(".innerContent").css("height","auto"):$(".innerContent").height($(".centralRow").height()-170)},renderSwagger:function(){var e=window.location.pathname.split("/"),t=window.location.protocol+"//"+window.location.hostname+":"+window.location.port+"/"+e[1]+"/"+e[2]+"/_admin/aardvark/api/index.html?collapsed";$("#swagger").html(""),$("#swagger").append('<iframe src="'+t+'" style="border:none"></iframe>')},toggleViews:function(e){var t=this,i=e.currentTarget.id.split("-")[0];_.each(["community","documentation","swagger"],(function(e){i!==e?$("#"+e).hide():("swagger"===i?(t.renderSwagger(),$("#swagger iframe").css("height","100%"),$("#swagger iframe").css("width","100%"),$("#swagger iframe").css("margin-top","-13px"),t.resize()):t.resize(!0),$("#"+e).show())})),$(".subMenuEntries").children().removeClass("active"),$("#"+i+"-support").addClass("active")}})}()},function(e,t){!function(){"use strict";window.TableView=Backbone.View.extend({template:templateEngine.createTemplate("tableView.ejs"),loading:templateEngine.createTemplate("loadingTableView.ejs"),initialize:function(e){this.rowClickCallback=e.rowClick},events:{"click .pure-table-body .pure-table-row":"rowClick","click .deleteButton":"removeClick"},rowClick:function(e){this.hasOwnProperty("rowClickCallback")&&this.rowClickCallback(e)},removeClick:function(e){this.hasOwnProperty("removeClickCallback")&&(this.removeClickCallback(e),e.stopPropagation())},setRowClick:function(e){this.rowClickCallback=e},setRemoveClick:function(e){this.removeClickCallback=e},render:function(){$(this.el).html(this.template.render({docs:this.collection}))},drawLoading:function(){$(this.el).html(this.loading.render({}))}})}()},function(e,t){!function(){"use strict";window.UserBarView=Backbone.View.extend({events:{"change #userBarSelect":"navigateBySelect","click .tab":"navigateByTab","mouseenter .dropdown":"showDropdown","mouseleave .dropdown":"hideDropdown","click #userLogoutIcon":"userLogout","click #userLogout":"userLogout"},initialize:function(e){arangoHelper.checkDatabasePermissions(this.setUserCollectionMode.bind(this)),this.userCollection=e.userCollection,this.userCollection.fetch({cache:!1,async:!0}),this.userCollection.bind("change:extra",this.render.bind(this))},setUserCollectionMode:function(e){e&&(this.userCollection.authOptions.ro=!0)},template:templateEngine.createTemplate("userBarView.ejs"),navigateBySelect:function(){var e=$("#arangoCollectionSelect").find("option:selected").val();window.App.navigate(e,{trigger:!0})},navigateByTab:function(e){var t=e.target||e.srcElement,i=(t=$(t).closest("a")).attr("id");if("user"===i)return $("#user_dropdown").slideToggle(200),void e.preventDefault();window.App.navigate(i,{trigger:!0}),e.preventDefault()},toggleUserMenu:function(){$("#userBar .subBarDropdown").toggle()},showDropdown:function(){$("#user_dropdown").fadeIn(1)},hideDropdown:function(){$("#user_dropdown").fadeOut(1)},render:function(){if(!1!==frontendConfig.authenticationEnabled){var e=this;$("#userBar").on("click",(function(){e.toggleUserMenu()})),this.userCollection.whoAmI((function(t,i){if(t)arangoHelper.arangoErro("User","Could not fetch user.");else{var n=null,r=null,a=!1,o=null;if(!1!==i){var s=function(){return frontendConfig.ldapEnabled&&e.userCollection.add({name:window.App.currentUser,user:window.App.currentUser,username:window.App.currentUser,active:!0,img:void 0}),(o=e.userCollection.findWhere({user:i})).set({loggedIn:!0}),r=o.get("extra").name,n=o.get("extra").img,a=o.get("active"),n=n?"https://s.gravatar.com/avatar/"+n+"?s=80":"img/default_user.png",r||(r=""),e.$el=$("#userBar"),e.$el.html(e.template.render({img:n,name:r,username:i,active:a})),e.delegateEvents(),e.$el};0===e.userCollection.models.length?e.userCollection.fetch({success:function(){s()}}):s()}}}))}},userLogout:function(){var e=function(e){e?arangoHelper.arangoError("User","Logout error"):this.userCollection.logout()}.bind(this);this.userCollection.whoAmI(e)}})}()},function(e,t){!function(){"use strict";window.UserManagementView=Backbone.View.extend({el:"#content",el2:"#userManagementThumbnailsIn",template:templateEngine.createTemplate("userManagementView.ejs"),remove:function(){return this.$el.empty().off(),this.stopListening(),this.unbind(),delete this.el,this},events:{"click #createUser":"createUser","click #submitCreateUser":"submitCreateUser","click #userManagementThumbnailsIn .tile":"editUser","click #submitEditUser":"submitEditUser","click #userManagementToggle":"toggleView","keyup #userManagementSearchInput":"search","click #userManagementSearchSubmit":"search","click #callEditUserPassword":"editUserPassword","click #submitEditUserPassword":"submitEditUserPassword","click #submitEditCurrentUserProfile":"submitEditCurrentUserProfile","click .css-label":"checkBoxes","change #userSortDesc":"sorting"},dropdownVisible:!1,initialize:function(){var e=this,t=function(e,t){!0===frontendConfig.authenticationEnabled&&(e||null===t?arangoHelper.arangoError("User","Could not fetch user data"):this.currentUser=this.collection.findWhere({user:t}))}.bind(this);this.collection.fetch({fetchAllUsers:!0,cache:!1,success:function(){e.collection.whoAmI(t)}})},checkBoxes:function(e){var t=e.currentTarget.id;$("#"+t).click()},sorting:function(){$("#userSortDesc").is(":checked")?this.collection.setSortingDesc(!0):this.collection.setSortingDesc(!1),$("#userManagementDropdown").is(":visible")?this.dropdownVisible=!0:this.dropdownVisible=!1,this.render()},render:function(e){var t=!1;$("#userManagementDropdown").is(":visible")&&(t=!0);var i=function(){this.collection.sort(),$(this.el).html(this.template.render({collection:this.collection,searchString:""})),!0===t&&($("#userManagementDropdown2").show(),$("#userSortDesc").attr("checked",this.collection.sortOptions.desc),$("#userManagementToggle").toggleClass("activated"),$("#userManagementDropdown").show()),e&&this.editCurrentUser(),arangoHelper.setCheckboxStatus("#userManagementDropdown")}.bind(this);return this.collection.fetch({fetchAllUsers:!0,cache:!1,success:function(){i()}}),this},search:function(){var e,t,i,n;e=$("#userManagementSearchInput"),t=arangoHelper.escapeHtml($("#userManagementSearchInput").val()),n=this.collection.filter((function(e){return-1!==e.get("user").indexOf(t)})),$(this.el).html(this.template.render({collection:n,searchString:t})),i=(e=$("#userManagementSearchInput")).val().length,e.focus(),e[0].setSelectionRange(i,i)},createUser:function(e){e.preventDefault(),this.createCreateUserModal()},submitCreateUser:function(){var e=this,t=$("#newUsername").val(),i=$("#newName").val(),n=$("#newPassword").val(),r=$("#newStatus").is(":checked");if(this.validateUserInfo(i,t,n,r)){var a={user:t,passwd:n,active:r,extra:{name:i}};frontendConfig.isEnterprise&&$("#newRole").is(":checked")&&(a.user=":role:"+t,delete a.passwd),this.collection.create(a,{wait:!0,error:function(e,t){arangoHelper.parseError("User",t,e)},success:function(){e.updateUserManagement(),window.modalView.hide()}})}},validateUserInfo:function(e,t,i,n){return""!==t||(arangoHelper.arangoError("You have to define an username"),$("#newUsername").closest("th").css("backgroundColor","red"),!1)},updateUserManagement:function(){var e=this;this.collection.fetch({fetchAllUsers:!0,cache:!1,success:function(){e.render()}})},editUser:function(e){if("createUser"!==$(e.currentTarget).find("a").attr("id")){$(e.currentTarget).hasClass("tile")&&($(e.currentTarget).find(".fa").attr("id")?e.currentTarget=$(e.currentTarget).find(".fa"):e.currentTarget=$(e.currentTarget).find(".icon")),this.collection.fetch({fetchAllUsers:!0,cache:!1});var t=this.evaluateUserName($(e.currentTarget).attr("id"),"_edit-user");""===t&&(t=$(e.currentTarget).attr("id")),window.App.navigate("user/"+encodeURIComponent(t),{trigger:!0})}},toggleView:function(){$("#userSortDesc").attr("checked",this.collection.sortOptions.desc),$("#userManagementToggle").toggleClass("activated"),$("#userManagementDropdown2").slideToggle(200)},createCreateUserModal:function(){var e=[],t=[];t.push(window.modalView.createTextEntry("newUsername","Username","",!1,"Username",!0,[{rule:Joi.string().regex(/^[a-zA-Z0-9\-_]*$/),msg:'Only symbols, "_" and "-" are allowed.'},{rule:Joi.string().required(),msg:"No username given."}])),t.push(window.modalView.createTextEntry("newName","Name","",!1,"Name",!1)),t.push(window.modalView.createPasswordEntry("newPassword","Password","",!1,"",!1)),frontendConfig.isEnterprise&&t.push(window.modalView.createCheckboxEntry("newRole","Role",!1,!1,!1)),t.push(window.modalView.createCheckboxEntry("newStatus","Active","active",!1,!0)),e.push(window.modalView.createSuccessButton("Create",this.submitCreateUser.bind(this))),window.modalView.show("modalTable.ejs","Create New User",e,t),frontendConfig.isEnterprise&&$("#newRole").on("change",(function(){$("#newRole").is(":checked")?$("#newPassword").attr("disabled",!0):$("#newPassword").attr("disabled",!1)}))},evaluateUserName:function(e,t){if(e){var i=e.lastIndexOf(t);return e.substring(0,i)}},updateUserProfile:function(){var e=this;this.collection.fetch({fetchAllUsers:!0,cache:!1,success:function(){e.render()}})}})}()},function(e,t){!function(){"use strict";window.UserPermissionView=Backbone.View.extend({el:"#content",template:templateEngine.createTemplate("userPermissionView.ejs"),initialize:function(e){this.username=e.username},remove:function(){return this.$el.empty().off(),this.stopListening(),this.unbind(),delete this.el,this},events:{"click #userPermissionView .dbCheckbox":"setDBPermission","click #userPermissionView .collCheckbox":"setCollPermission","click .db-row":"toggleAccordion"},render:function(e,t){var i=this;this.collection.fetch({fetchAllUsers:!0,success:function(){i.continueRender(e,t)}})},toggleAccordion:function(e){if(!$(e.target).attr("type")&&!$(e.target).parent().hasClass("noAction")&&!($(e.target).hasClass("inner")||$(e.target).is("span")||$(e.target).hasClass("fa-info-circle"))){var t=$(e.currentTarget).find(".collection-row").is(":visible"),i=$(e.currentTarget).attr("id").split("-")[0];$(".collection-row").hide(),$(".db-label").css("font-weight",200),$(".db-label").css("color","#8a969f"),$(e.currentTarget).find(".collection-row").children().length>4?($(".db-row .fa-caret-down").hide(),$(".db-row .fa-caret-right").show(),t?$(e.currentTarget).find(".collection-row").hide():($(e.currentTarget).find(".collection-row").fadeIn("fast"),$(e.currentTarget).find(".db-label").css("font-weight",600),$(e.currentTarget).find(".db-label").css("color","rgba(64, 74, 83, 1)"),$(e.currentTarget).find(".fa-caret-down").show(),$(e.currentTarget).find(".fa-caret-right").hide())):($(".db-row .fa-caret-down").hide(),$(".db-row .fa-caret-right").show(),arangoHelper.arangoNotification("Permissions",'No collections in "'+i+'" available.'))}},setCollPermission:function(e){var t,i=$(e.currentTarget).attr("db"),n=$(e.currentTarget).attr("collection");t=$(e.currentTarget).hasClass("readOnly")?"ro":$(e.currentTarget).hasClass("readWrite")?"rw":$(e.currentTarget).hasClass("noAccess")?"none":"undefined",this.sendCollPermission(this.currentUser.get("user"),i,n,t)},setDBPermission:function(e){var t,i=$(e.currentTarget).attr("name");if(t=$(e.currentTarget).hasClass("readOnly")?"ro":$(e.currentTarget).hasClass("readWrite")?"rw":$(e.currentTarget).hasClass("noAccess")?"none":"undefined","_system"===i){var n=[],r=[];r.push(window.modalView.createReadOnlyEntry("db-system-revoke-button","Caution","You are changing the _system database permission. Really continue?",void 0,void 0,!1)),n.push(window.modalView.createSuccessButton("Ok",this.sendDBPermission.bind(this,this.currentUser.get("user"),i,t))),n.push(window.modalView.createCloseButton("Cancel",this.rollbackInputButton.bind(this,i))),window.modalView.show("modalTable.ejs","Change _system Database Permission",n,r)}else this.sendDBPermission(this.currentUser.get("user"),i,t)},rollbackInputButton:function(e,t){var i;_.each($(".collection-row"),(function(e,t){$(e).is(":visible")&&(i=$(e).parent().attr("id"))})),i?this.render(i,t):this.render(),window.modalView.hide()},sendCollPermission:function(e,t,i,n){var r=this;"undefined"===n?this.revokeCollPermission(e,t,i):$.ajax({type:"PUT",url:arangoHelper.databaseUrl("/_api/user/"+encodeURIComponent(e)+"/database/"+encodeURIComponent(t)+"/"+encodeURIComponent(i)),contentType:"application/json",data:JSON.stringify({grant:n}),success:function(){r.styleDefaultRadios(null,!0)},error:function(e){r.rollbackInputButton(null,e)}})},revokeCollPermission:function(e,t,i){var n=this;$.ajax({type:"DELETE",url:arangoHelper.databaseUrl("/_api/user/"+encodeURIComponent(e)+"/database/"+encodeURIComponent(t)+"/"+encodeURIComponent(i)),contentType:"application/json",success:function(e){n.styleDefaultRadios(null,!0)},error:function(e){n.rollbackInputButton(null,e)}})},sendDBPermission:function(e,t,i){var n=this;"undefined"===i?this.revokeDBPermission(e,t):$.ajax({type:"PUT",url:arangoHelper.databaseUrl("/_api/user/"+encodeURIComponent(e)+"/database/"+encodeURIComponent(t)),contentType:"application/json",data:JSON.stringify({grant:i}),success:function(){n.styleDefaultRadios(null,!0)},error:function(e){n.rollbackInputButton(null,e)}})},revokeDBPermission:function(e,t){var i=this;$.ajax({type:"DELETE",url:arangoHelper.databaseUrl("/_api/user/"+encodeURIComponent(e)+"/database/"+encodeURIComponent(t)),contentType:"application/json",success:function(e){i.styleDefaultRadios(null,!0)},error:function(e){i.rollbackInputButton(null,e)}})},continueRender:function(e,t){var i=this;this.currentUser=this.collection.findWhere({user:this.username});var n=arangoHelper.databaseUrl("/_api/user/"+encodeURIComponent(i.currentUser.get("user"))+"/database?full=true");$.ajax({type:"GET",url:n,contentType:"application/json",success:function(n){i.finishRender(n.result,e,t)},error:function(e){arangoHelper.arangoError("User","Could not fetch user permissions")}})},finishRender:function(e,t,i){var n=_.pairs(e);n.sort(),n=_.object(n),$(this.el).html(this.template.render({permissions:n})),$(".noAction").first().appendTo(".pure-table-body"),$(".pure-table-body").height(window.innerHeight-200),t&&$("#"+t).click(),i&&i.responseJSON&&i.responseJSON.errorMessage&&arangoHelper.arangoError("User",i.responseJSON.errorMessage),this.styleDefaultRadios(e),arangoHelper.createTooltips(),this.checkRoot(),this.breadcrumb()},checkRoot:function(){"root"===this.currentUser.get("user")&&$("#_system-db #___-collection input").attr("disabled","true")},styleDefaultRadios:function(e,t){var i;try{i=e["*"].permission}catch(a){}var n=function(e){$(".db-row input").css("box-shadow","none");var t="rgba(0, 0, 0, 0.3) 0px 1px 4px 4px";_.each(e,(function(e,n){if(e.collections){var r=e.permission,a=e.collections["*"];"undefined"===r&&i&&("rw"===i?$("#"+n+"-db .mid > .readWrite").first().css("box-shadow",t):"ro"===i?$("#"+n+"-db .mid > .readOnly").first().css("box-shadow",t):"none"===i&&$("#"+n+"-db .mid > .noAccess").first().css("box-shadow",t)),_.each(e.collections,(function(e,o){if("_"!==o.charAt(0)&&"*"!==o.charAt(0)&&"undefined"===e){var s=(c=a,d=i,"undefined"===(l=r)&&"undefined"===c&&"undefined"!==d?d:"undefined"===c||"none"===c?"rw"===d||"rw"===l?"rw":"ro"===d||"ro"===l?"ro":"none"===d||"none"===l?"none":"undefined":"rw"===d||"rw"===l||"rw"===c?"rw":"ro"===d||"ro"===l||"ro"===c?"ro":"none"===l||"none"===c?"undefined"!==d?d:"none":"undefined");"rw"===s?$("#"+n+"-db #"+o+"-collection .readWrite").css("box-shadow",t):"ro"===s?$("#"+n+"-db #"+o+"-collection .readOnly").css("box-shadow",t):"none"===s&&$("#"+n+"-db #"+o+"-collection .noAccess").css("box-shadow",t)}var l,c,d}))}}))};if(t){var r=arangoHelper.databaseUrl("/_api/user/"+encodeURIComponent(this.currentUser.get("user"))+"/database?full=true");$.ajax({type:"GET",url:r,contentType:"application/json",success:function(e){n(e.result)},error:function(e){arangoHelper.arangoError("User","Could not fetch user permissions")}})}else n(e);window.modalView.hide()},breadcrumb:function(){var e=this;window.App.naviView?($("#subNavigationBar .breadcrumb").html("User: "+arangoHelper.escapeHtml(this.currentUser.get("user"))),arangoHelper.buildUserSubNav(e.currentUser.get("user"),"Permissions")):window.setTimeout((function(){e.breadcrumb()}),100)}})}()},function(e,t){!function(){"use strict";window.UserView=Backbone.View.extend({el:"#content",initialize:function(e){this.username=e.username},render:function(){var e=this;this.collection.fetch({fetchAllUsers:!0,success:function(){e.continueRender()}})},editCurrentUser:function(){this.createEditCurrentUserModal(this.currentUser.get("user"),this.currentUser.get("extra").name,this.currentUser.get("extra").img)},continueRender:function(){this.currentUser=this.collection.findWhere({user:this.username}),this.breadcrumb(),this.currentUser.get("loggedIn")?this.editCurrentUser():this.createEditUserModal(this.currentUser.get("user"),this.currentUser.get("extra").name,this.currentUser.get("active"))},createEditUserPasswordModal:function(){var e=[],t=[];t.push(window.modalView.createPasswordEntry("newCurrentPassword","New Password","",!1,"new password",!1)),t.push(window.modalView.createPasswordEntry("confirmCurrentPassword","Confirm New Password","",!1,"confirm new password",!1)),e.push(window.modalView.createSuccessButton("Save",this.submitEditUserPassword.bind(this))),window.modalView.show("modalTable.ejs","Edit User Password",e,t)},createEditCurrentUserModal:function(e,t,i){var n=[],r=[];r.push(window.modalView.createReadOnlyEntry("id_username","Username",e)),r.push(window.modalView.createTextEntry("editCurrentName","Name",t,!1,"Name",!1)),r.push(window.modalView.createTextEntry("editCurrentUserProfileImg","Gravatar account (Mail)",i,"Mailaddress or its md5 representation of your gravatar account.The address will be converted into a md5 string. Only the md5 string will be stored, not the mailaddress.","myAccount(at)gravatar.com")),":role:"===this.username.substring(0,6)?n.push(window.modalView.createDisabledButton("Change Password")):n.push(window.modalView.createNotificationButton("Change Password",this.editUserPassword.bind(this))),n.push(window.modalView.createSuccessButton("Save",this.submitEditCurrentUserProfile.bind(this))),window.modalView.show("modalTable.ejs","Edit User Profile",n,r,null,null,this.events,null,null,"content")},parseImgString:function(e){return-1===e.indexOf("@")?e:CryptoJS.MD5(e).toString()},createEditUserModal:function(e,t,i){var n,r;r=[{type:window.modalView.tables.READONLY,label:"Username",value:_.escape(e)},{type:window.modalView.tables.TEXT,label:"Name",value:_.escape(t),id:"editName",placeholder:"Name"},{type:window.modalView.tables.CHECKBOX,label:"Active",value:"active",checked:i,id:"editStatus"}],(n=[]).push({title:"Delete",type:window.modalView.buttons.DELETE,callback:this.submitDeleteUser.bind(this,e)}),":role:"===this.username.substring(0,6)?n.push({title:"Change Password",type:window.modalView.buttons.DISABLED,callback:this.createEditUserPasswordModal.bind(this,e)}):n.push({title:"Change Password",type:window.modalView.buttons.NOTIFICATION,callback:this.createEditUserPasswordModal.bind(this,e)}),n.push({title:"Save",type:window.modalView.buttons.SUCCESS,callback:this.submitEditUser.bind(this,e)}),window.modalView.show("modalTable.ejs","Edit User",n,r,null,null,this.events,null,null,"content")},validateStatus:function(e){return""!==e},submitDeleteUser:function(e){this.collection.findWhere({user:e}).destroy({wait:!0}),window.App.navigate("#users",{trigger:!0})},submitEditCurrentUserProfile:function(){var e=this,t=$("#editCurrentName").val(),i=$("#editCurrentUserProfileImg").val();i=this.parseImgString(i);this.currentUser.setExtras(t,i,(function(t,i){if(t)arangoHelper.arangoError("User","Could not edit user settings");else{if(i){var n=e.currentUser.get("extra");i.extra&&i.extra.name?n.name=i.extra.name:n.name=null,i.extra&&i.extra.img?n.img=i.extra.img:n.img=null,e.currentUser.set("extra",n),window.App.naviView.render()}arangoHelper.arangoNotification("User","Changes confirmed.")}})),window.modalView.hide()},submitEditUserPassword:function(){var e=$("#newCurrentPassword").val(),t=$("#confirmCurrentPassword").val();$("#newCurrentPassword").val(""),$("#confirmCurrentPassword").val(""),$("#newCurrentPassword").closest("th").css("backgroundColor","white"),$("#confirmCurrentPassword").closest("th").css("backgroundColor","white");var i=!1;e!==t&&(arangoHelper.arangoError("User","New passwords do not match."),i=!0),i||(this.currentUser.setPassword(e),arangoHelper.arangoNotification("User","Password changed."),window.modalView.hide())},editUserPassword:function(){window.modalView.hide(),this.createEditUserPasswordModal()},submitEditUser:function(e){var t=$("#editName").val(),i=$("#editStatus").is(":checked");if(this.validateStatus(i)){var n=this.collection.findWhere({user:e});n.save({extra:{name:t},active:i},{type:"PATCH",success:function(){arangoHelper.arangoNotification("User",n.get("user")+" updated.")},error:function(){arangoHelper.arangoError("User","Could not update "+n.get("user")+".")}})}else $("#editStatus").closest("th").css("backgroundColor","red")},breadcrumb:function(){var e=this;window.App.naviView?($("#subNavigationBar .breadcrumb").html("User: "+_.escape(this.username)),arangoHelper.buildUserSubNav(e.currentUser.get("user"),"General")):window.setTimeout((function(){e.breadcrumb()}),100)}})}()},function(e,t){!function(){"use strict";window.ValidationView=Backbone.View.extend({el:"#content",readOnly:!1,template:templateEngine.createTemplate("validationView.ejs"),initialize:function(e){this.collectionName=e.collectionName,this.model=this.collection},events:{"click #saveValidationButton":"saveValidation"},render:function(){this.breadcrumb(),arangoHelper.buildCollectionSubNav(this.collectionName,"Schema"),$(this.el).html(this.template.render({})),this.renderValidationEditor(),this.getValidationProperties(),this.editor.focus()},resize:function(){$("#validationEditor").height($(".centralRow").height()-300)},renderValidationEditor:function(){var e=document.getElementById("validationEditor");this.resize();var t={onChange:function(){},onModeChange:function(e){},search:!0,mode:"code",modes:["tree","code"],ace:window.ace};this.editor=new JSONEditor(e,t)},getValidationProperties:function(){var e=this;this.model.getProperties((function(t,i){t?window.arangoHelper.arangoError("Error","Could not get collection properties"):e.editor.set(i.schema)}))},breadcrumb:function(){$("#subNavigationBar .breadcrumb").html("Collection: "+(this.collectionName.length>64?this.collectionName.substr(0,64)+"...":this.collectionName))},saveValidation:function(){var e=function(e,t){var i=this;if(e)arangoHelper.arangoError("Error","Could not save schema.");else{var n=null;try{n=this.editor.get()}catch(r){throw arangoHelper.arangoError("Error","Could not save schema: "+r),r}this.model.changeValidation(n,(function(e,t){e?arangoHelper.arangoError("Error","Could not save schema for collection "+i.model.get("name")+": "+t.responseJSON.errorMessage):arangoHelper.arangoNotification("Saved schema for collection "+i.model.get("name")+"."),i.editor.focus()}))}}.bind(this);window.isCoordinator(e)},changeViewToReadOnly:function(){window.App.validationView.readOnly=!0,$(".breadcrumb").html($(".breadcrumb").html()+" (read-only)"),$(".modal-body input").prop("disabled","true"),$(".modal-body select").prop("disabled","true"),$(".modal-footer button").addClass("disabled"),$(".modal-footer button").unbind("click")}})}()},function(e,t){!function(){"use strict";window.ViewView=Backbone.View.extend({el:"#content",readOnly:!1,refreshRate:5e3,template:templateEngine.createTemplate("viewView.ejs"),initialize:function(e){var t=localStorage.getItem("JSONViewEditorMode");t&&(this.defaultMode=t),this.name=e.name},defaultMode:"tree",storeMode:function(e){"view"!==e&&(localStorage.setItem("JSONViewEditorMode",e),this.defaultMode=e,this.editor.setMode(this.defaultMode))},remove:function(){return this.$el.empty().off(),this.stopListening(),this.unbind(),delete this.el,this},events:{"click #savePropertiesButton":"patchView","click #renameViewButton":"renameView","click #deleteViewButton":"deleteView"},checkIfInProgress:function(){if(window.location.hash.search("view/")>-1&&$(".breadcrumb").text().search(this.model.get("name"))>-1){var e=this;frontendConfig.ldapEnabled||window.arangoHelper.syncAndReturnUnfinishedAardvarkJobs("view",(function(t,i){if(t)arangoHelper.arangoError("Views","Could not check locked views.");else{var n=!1;_.each(i,(function(t){e.model.get("name")===t.collection&&(n=!0)})),n?(e.getViewProperties(!0),e.setInProgress(!0),window.setTimeout((function(){e.checkIfInProgress()}),e.refreshRate)):(e.getViewProperties(!0),e.setInProgress(!1))}}))}},setReadOnlyPermissions:function(){this.readOnly=!0,$(".bottomButtonBar button").attr("disabled",!0),this.editor.setMode("view"),$(".jsoneditor-modes").hide(),this.breadcrumb(!0)},render:function(){this.breadcrumb(),this.$el.html(this.template.render({})),$("#propertiesEditor").height($(".centralRow").height()-300+70-$(".infoBox").innerHeight()-10),this.initAce(),this.getViewProperties(),this.checkIfInProgress()},jsonContentChanged:function(){this.enableSaveButton()},buttons:["#renameViewButton","#deleteViewButton"],disableAllButtons:function(){var e=this;_.each(this.buttons,(function(t){e.disableButton(t)})),this.disableSaveButton()},enableAllButtons:function(){var e=this;_.each(this.buttons,(function(t){e.enableButton(t)})),this.enableSaveButton()},enableButton:function(e){$(e).prop("disabled",!1)},disableButton:function(e){$(e).prop("disabled",!0)},enableSaveButton:function(){this.readOnly||($("#savePropertiesButton").prop("disabled",!1),$("#savePropertiesButton").addClass("button-success"),$("#savePropertiesButton").removeClass("button-close"))},disableSaveButton:function(){$("#savePropertiesButton").prop("disabled",!0),$("#savePropertiesButton").addClass("button-close"),$("#savePropertiesButton").removeClass("button-success")},initAce:function(e){var t=this,i=document.getElementById("propertiesEditor"),n={onChange:function(){t.jsonContentChanged()},onModeChange:function(e){t.storeMode(e)},search:!0,mode:"code",modes:["tree","code"],ace:window.ace};this.editor=new JSONEditor(i,n),this.defaultMode&&this.editor.setMode(this.defaultMode)},getViewProperties:function(e){var t=this;this.model.getProperties((function(i,n){i?arangoHelper.arangoError("View","Could not fetch properties for view:"+t.model.get("name")):(delete n.name,delete n.code,delete n.error,t.editor.set(n),e&&t.editor.expandAll&&t.editor.expandAll())}))},patchView:function(){var e,t=this;try{e=t.editor.get()}catch(i){arangoHelper.arangoError("View",i)}if(e){this.model.patchProperties(t.editor.get(),(function(e,i,n){e?arangoHelper.arangoError("View","Could not update view properties."):(i&&t.editor.set(i),n?t.setInProgress(!1):(arangoHelper.arangoNotification("View","Saving properties of view: "+t.model.get("name")+" in progress."),window.setTimeout((function(){t.checkIfInProgress()}),t.refreshRate),t.setInProgress(!0)))}))}},setInProgress:function(e){e?(this.disableAllButtons(),this.editor.setMode("view"),$("#viewProcessing").show(),$("#viewDocumentation").hide(),$(".jsoneditor").attr("style","background-color: rgba(0, 0, 0, 0.05) !important"),$(".jsoneditor-menu button").css("visibility","hidden"),$(".jsoneditor-modes").css("visibility","hidden")):(this.enableAllButtons(),this.editor.setMode(this.defaultMode),$(".buttonBarInfo").html(""),$("#viewProcessing").hide(),$("#viewDocumentation").show(),$(".jsoneditor").attr("style","background-color: rgba(255,255, 255, 1) !important"),$(".jsoneditor-menu button").css("visibility","inline"),$(".jsoneditor-modes").css("visibility","inline")),arangoHelper.checkDatabasePermissions(this.setReadOnlyPermissions.bind(this))},deleteView:function(){var e=[],t=[];t.push(window.modalView.createReadOnlyEntry("view-delete-button","Delete","Really delete View?",void 0,void 0,!1,/[<>&'"]/)),e.push(window.modalView.createDeleteButton("Delete",this.deleteViewTrue.bind(this))),window.modalView.show("modalTable.ejs","Delete View",e,t)},deleteViewTrue:function(){this.model.deleteView((function(e,t){e?arangoHelper.arangoError("View","Could not delete the view."):(window.modalView.hide(),window.App.navigate("#views",{trigger:!0}))}))},renameView:function(){var e=[],t=[];t.push(window.modalView.createTextEntry("editCurrentName","Name",this.name,!1,"Name",!1)),e.push(window.modalView.createSuccessButton("Rename",this.renameViewTrue.bind(this))),window.modalView.show("modalTable.ejs","Rename View",e,t)},renameViewTrue:function(){var e=this;$("#editCurrentName").val()?$.ajax({type:"PUT",cache:!1,url:arangoHelper.databaseUrl("/_api/view/"+encodeURIComponent(e.name)+"/rename"),contentType:"application/json",processData:!1,data:JSON.stringify({name:$("#editCurrentName").val()}),success:function(t){e.name=t.name,e.model.set("name",t.name),e.breadcrumb(),window.modalView.hide()},error:function(e){window.modalView.hide(),arangoHelper.arangoError("View",e.responseJSON.errorMessage)}}):arangoHelper.arangoError("View","Please fill in a view name.")},breadcrumb:function(e){var t=this,i=t.name;e&&(i+=" (read-only)"),window.App.naviView?$("#subNavigationBar .breadcrumb").html("View: "+arangoHelper.escapeHtml(i)):window.setTimeout((function(){t.breadcrumb()}),100)}})}()},function(e,t){!function(){"use strict";window.ViewsView=Backbone.View.extend({el:"#content",readOnly:!1,template:templateEngine.createTemplate("viewsView.ejs"),initialize:function(){},refreshRate:1e4,sortOptions:{desc:!1},searchString:"",remove:function(){return this.$el.empty().off(),this.stopListening(),this.unbind(),delete this.el,this},events:{"click #createView":"createView","click #viewsToggle":"toggleSettingsDropdown","click .tile-view":"gotoView","keyup #viewsSearchInput":"search","click #viewsSearchSubmit":"search","click #viewsSortDesc":"sorting"},checkVisibility:function(){$("#viewsDropdown").is(":visible")?this.dropdownVisible=!0:this.dropdownVisible=!1,arangoHelper.setCheckboxStatus("#viewsDropdown")},checkIfInProgress:function(){if(window.location.hash.search("views")>-1){var e=this;frontendConfig.ldapEnabled||window.arangoHelper.syncAndReturnUnfinishedAardvarkJobs("view",(function(t,i){t?console.log("Could not check locked views"):(i.length>0?_.each(i,(function(e){$("#"+e.collection)?($("#"+e.collection+" .collection-type-icon").removeClass("fa-clone"),$("#"+e.collection+" .collection-type-icon").addClass("fa-spinner").addClass("fa-spin")):($("#"+e.collection+" .collection-type-icon").addClass("fa-clone"),$("#"+e.collection+" .collection-type-icon").removeClass("fa-spinner").removeClass("fa-spin"))})):$(".tile .collection-type-icon").addClass("fa-clone").removeClass("fa-spinner").removeClass("fa-spin"),window.setTimeout((function(){e.checkIfInProgress()}),e.refreshRate))}))}},sorting:function(){$("#viewsSortDesc").is(":checked")?this.setSortingDesc(!0):this.setSortingDesc(!1),this.checkVisibility(),this.render()},setSortingDesc:function(e){this.sortOptions.desc=e},search:function(){this.setSearchString(arangoHelper.escapeHtml($("#viewsSearchInput").val())),this.render()},toggleSettingsDropdown:function(){var e=this;$("#viewsSortDesc").attr("checked",this.sortOptions.desc),$("#viewsToggle").toggleClass("activated"),$("#viewsDropdown2").slideToggle(200,(function(){e.checkVisibility()}))},render:function(e){e?this.$el.html(this.template.render({views:this.applySorting(e.result),searchString:this.getSearchString()})):(this.getViews(),this.$el.html(this.template.render({views:[],searchString:this.getSearchString()}))),!0===this.dropdownVisible&&($("#viewsSortDesc").attr("checked",this.sortOptions.desc),$("#viewsToggle").addClass("activated"),$("#viewsDropdown2").show()),$("#viewsSortDesc").attr("checked",this.sortOptions.desc),arangoHelper.setCheckboxStatus("#viewsDropdown");var t=$("#viewsSearchInput"),i=t.val().length;t.focus(),t[0].setSelectionRange(i,i),arangoHelper.checkDatabasePermissions(this.setReadOnly.bind(this))},setReadOnly:function(){this.readOnly=!0,$("#createView").parent().parent().addClass("disabled")},setSearchString:function(e){this.searchString=e},getSearchString:function(){return this.searchString.toLowerCase()},applySorting:function(e){var t=this;e=_.sortBy(e,"name"),this.sortOptions.desc&&(e=e.reverse());var i=[];return""===this.getSearchString()?e:(_.each(e,(function(e,n){e&&e.name&&-1!==e.name.toLowerCase().indexOf(t.getSearchString())&&i.push(e)})),i)},gotoView:function(e){var t=$(e.currentTarget).attr("id");if(t){var i="view/"+encodeURIComponent(t);window.App.navigate(i,{trigger:!0})}},getViews:function(){var e=this;this.collection.fetch({success:function(t){var i={result:[]};e.collection.each((function(e){i.result.push(e.toJSON())})),e.render(i),e.checkIfInProgress()},error:function(e){console.log(e)}})},createView:function(e){this.readOnly||(e.preventDefault(),this.createViewModal())},createViewModal:function(){var e=[],t=[];t.push(window.modalView.createTextEntry("newName","Name","",!1,"Name",!0,[{rule:Joi.string().regex(/^[a-zA-Z0-9\-_]*$/),msg:'Only symbols, "_" and "-" are allowed.'},{rule:Joi.string().required(),msg:"No view name given."}])),t.push(window.modalView.createReadOnlyEntry(void 0,"Type","arangosearch",void 0,void 0,!1,void 0)),e.push(window.modalView.createSuccessButton("Create",this.submitCreateView.bind(this))),window.modalView.show("modalTable.ejs","Create New View",e,t)},submitCreateView:function(){var e=this,t=$("#newName").val(),i=JSON.stringify({name:t,type:"arangosearch",properties:{}});$.ajax({type:"POST",cache:!1,url:arangoHelper.databaseUrl("/_api/view"),contentType:"application/json",processData:!1,data:i,success:function(t){window.modalView.hide(),arangoHelper.arangoNotification("View","Creation in progress. This may take a while."),e.getViews()},error:function(e){e.responseJSON&&e.responseJSON.errorMessage&&arangoHelper.arangoError("Views",e.responseJSON.errorMessage)}})}})}()},function(e,t){!function(){"use strict";window.arangoCollectionModel=Backbone.Model.extend({idAttribute:"name",urlRoot:arangoHelper.databaseUrl("/_api/collection"),defaults:{id:"",name:"",status:"",type:"",isSystem:!1,picture:"",locked:!1,desc:void 0},getProperties:function(e){$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_api/collection/"+encodeURIComponent(this.get("id"))+"/properties"),contentType:"application/json",processData:!1,success:function(t){e(!1,t)},error:function(t){e(!0,t)}})},getShards:function(e){$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_api/collection/"+this.get("id")+"/shards?details=true"),contentType:"application/json",processData:!1,success:function(t){e(!1,t)},error:function(){e(!0)}})},getFigures:function(e){$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_api/collection/"+this.get("id")+"/figures"),contentType:"application/json",processData:!1,success:function(t){e(!1,t)},error:function(){e(!0)}})},getFiguresCombined:function(e,t){var i=this;this.getFigures((function(n,r){if(n)e(!0);else{var a=r;t?i.getShards((function(t,i){t?e(!0):e(!1,Object.assign(a,{shards:i.shards}))})):e(!1,a)}}))},getRevision:function(e,t){$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_api/collection/"+this.get("id")+"/revision"),contentType:"application/json",processData:!1,success:function(i){e(!1,i,t)},error:function(){e(!0)}})},getIndex:function(e){var t=this;$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_api/index/?collection="+this.get("id")),contentType:"application/json",processData:!1,success:function(i){e(!1,i,t.get("id"))},error:function(i){e(!0,i,t.get("id"))}})},createIndex:function(e,t){var i=this;$.ajax({cache:!1,type:"POST",url:arangoHelper.databaseUrl("/_api/index?collection="+i.get("id")),headers:{"x-arango-async":"store"},data:JSON.stringify(e),contentType:"application/json",processData:!1,success:function(e,n,r){r.getResponseHeader("x-arango-async-id")?(window.arangoHelper.addAardvarkJob({id:r.getResponseHeader("x-arango-async-id"),type:"index",desc:"Creating Index",collection:i.get("id")}),t(!1,e)):t(!0,e)},error:function(e){t(!0,e)}})},deleteIndex:function(e,t){var i=this;$.ajax({cache:!1,type:"DELETE",url:arangoHelper.databaseUrl("/_api/index/"+this.get("name")+"/"+encodeURIComponent(e)),headers:{"x-arango-async":"store"},success:function(e,n,r){r.getResponseHeader("x-arango-async-id")?(window.arangoHelper.addAardvarkJob({id:r.getResponseHeader("x-arango-async-id"),type:"index",desc:"Removing Index",collection:i.get("id")}),t(!1,e)):t(!0,e)},error:function(e){t(!0,e)}}),t()},truncateCollection:function(){$.ajax({cache:!1,type:"PUT",url:arangoHelper.databaseUrl("/_api/collection/"+this.get("id")+"/truncate"),success:function(){arangoHelper.arangoNotification("Collection truncated.")},error:function(e){arangoHelper.arangoError("Collection error: "+e.responseJSON.errorMessage)}})},warmupCollection:function(){$.ajax({cache:!1,type:"PUT",url:arangoHelper.databaseUrl("/_api/collection/"+this.get("id")+"/loadIndexesIntoMemory"),success:function(){arangoHelper.arangoNotification("Loading indexes into memory.")},error:function(e){arangoHelper.arangoError("Collection error: "+e.responseJSON.errorMessage)}})},loadCollection:function(e){$.ajax({cache:!1,type:"PUT",url:arangoHelper.databaseUrl("/_api/collection/"+this.get("id")+"/load"),success:function(){e(!1)},error:function(){e(!0)}}),e()},unloadCollection:function(e){$.ajax({cache:!1,type:"PUT",url:arangoHelper.databaseUrl("/_api/collection/"+this.get("id")+"/unload?flush=true"),success:function(){e(!1)},error:function(){e(!0)}}),e()},renameCollection:function(e,t){var i=this;$.ajax({cache:!1,type:"PUT",url:arangoHelper.databaseUrl("/_api/collection/"+this.get("id")+"/rename"),data:JSON.stringify({name:e}),contentType:"application/json",processData:!1,success:function(){i.set("name",e),t(!1)},error:function(e){t(!0,e)}})},changeCollection:function(e,t,i,n){"true"===e?e=!0:"false"===e&&(e=!1);var r={waitForSync:e};return t&&(r.replicationFactor=parseInt(t,10)),i&&(r.minReplicationFactor=parseInt(i,10)),$.ajax({cache:!1,type:"PUT",url:arangoHelper.databaseUrl("/_api/collection/"+this.get("id")+"/properties"),data:JSON.stringify(r),contentType:"application/json",processData:!1,success:function(){n(!1)},error:function(e){n(!0,e)}}),!1},changeValidation:function(e,t){e||(e=null);var i={schema:e};return $.ajax({cache:!1,type:"PUT",url:arangoHelper.databaseUrl("/_api/collection/"+this.get("id")+"/properties"),data:JSON.stringify(i),contentType:"application/json",processData:!1,success:function(){t(!1)},error:function(e){t(!0,e)}}),!1}})}()},function(e,t){window.DatabaseModel=Backbone.Model.extend({idAttribute:"name",initialize:function(){},isNew:function(){"use strict";return!1},sync:function(e,t,i){"use strict";return"update"===e&&(e="create"),Backbone.sync(e,t,i)},url:arangoHelper.databaseUrl("/_api/database"),defaults:{}})},function(e,t){window.arangoDocumentModel=Backbone.Model.extend({initialize:function(){},urlRoot:arangoHelper.databaseUrl("/_api/document"),defaults:{_id:"",_rev:"",_key:""},getSorted:function(){"use strict";var e=this,t=Object.keys(e.attributes).sort((function(e,t){var i=arangoHelper.isSystemAttribute(e);return i!==arangoHelper.isSystemAttribute(t)?i?-1:1:e<t?-1:1})),i={};return _.each(t,(function(t){i[t]=e.attributes[t]})),i}})},function(e,t){!function(){"use strict";window.ArangoQuery=Backbone.Model.extend({urlRoot:arangoHelper.databaseUrl("/_api/user"),defaults:{name:"",type:"custom",value:""}})}()},function(e,t){window.Replication=Backbone.Model.extend({defaults:{state:{},server:{}},initialize:function(){}})},function(e,t){},function(e,t){window.Statistics=Backbone.Model.extend({defaults:{},url:function(){"use strict";return"/_admin/statistics"}})},function(e,t){window.StatisticsDescription=Backbone.Model.extend({defaults:{figures:"",groups:""},url:function(){"use strict";return"/_admin/statistics-description"}})},function(e,t){window.Users=Backbone.Model.extend({defaults:{user:"",active:!1,extra:{}},idAttribute:"user",parse:function(e){return this.isNotNew=!0,e},isNew:function(){return!this.isNotNew},url:function(){return this.isNew()?arangoHelper.databaseUrl("/_api/user"):""!==this.get("user")?arangoHelper.databaseUrl("/_api/user/"+this.get("user")):arangoHelper.databaseUrl("/_api/user")},checkPassword:function(e,t){$.ajax({cache:!1,type:"POST",url:arangoHelper.databaseUrl("/_api/user/"+this.get("user")),data:JSON.stringify({passwd:e}),contentType:"application/json",processData:!1,success:function(e){t(!1,e)},error:function(e){t(!0,e)}})},setPassword:function(e){$.ajax({cache:!1,type:"PATCH",url:arangoHelper.databaseUrl("/_api/user/"+this.get("user")),data:JSON.stringify({passwd:e}),contentType:"application/json",processData:!1})},setExtras:function(e,t,i){$.ajax({cache:!1,type:"PATCH",url:arangoHelper.databaseUrl("/_api/user/"+this.get("user")),data:JSON.stringify({extra:{name:e,img:t}}),contentType:"application/json",processData:!1,success:function(e){i(!1,e)},error:function(){i(!0)}})}})},function(e,t){!function(){"use strict";window.arangoViewModel=Backbone.Model.extend({idAttribute:"name",urlRoot:arangoHelper.databaseUrl("/_api/view"),defaults:{id:"",name:"",type:"",globallyUniqueId:""},getProperties:function(e){$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_api/view/"+encodeURIComponent(this.get("name"))+"/properties"),contentType:"application/json",processData:!1,success:function(t){e(!1,t)},error:function(t){e(!0,t)}})},patchProperties:function(e,t){var i=this;$.ajax({type:"PUT",cache:!1,data:JSON.stringify(e),url:arangoHelper.databaseUrl("/_api/view/"+encodeURIComponent(this.get("name"))+"/properties"),headers:{"x-arango-async":"store"},contentType:"application/json",processData:!1,success:function(e,n,r){r.getResponseHeader("x-arango-async-id")?(window.arangoHelper.addAardvarkJob({id:r.getResponseHeader("x-arango-async-id"),type:"view",desc:"Patching View",collection:i.get("name")}),t(!1,e,!0)):t(!0,e),t(!1,e,!1)}})},deleteView:function(e){var t=this;$.ajax({cache:!1,type:"DELETE",url:arangoHelper.databaseUrl("/_api/view/"+t.get("name")),headers:{"x-arango-async":"store"},success:function(i,n,r){r.getResponseHeader("x-arango-async-id")?(window.arangoHelper.addAardvarkJob({id:r.getResponseHeader("x-arango-async-id"),type:"view",desc:"Removing View",collection:t.get("name")}),e(!1,i)):e(!0,i)},error:function(t){e(!0,t)}})},renameView:function(e,t){var i=this;$.ajax({cache:!1,type:"PUT",url:arangoHelper.databaseUrl("/_api/view/"+i.get("name")+"/rename"),data:JSON.stringify({name:e}),contentType:"application/json",processData:!1,success:function(){i.set("name",e),t(!1)},error:function(e){t(!0,e)}})}})}()},function(e,t){!function(){"use strict";window.ClusterCoordinator=Backbone.Model.extend({defaults:{name:"",id:"",status:"ok",address:"",protocol:""},idAttribute:"name",forList:function(){return{name:this.get("name"),status:this.get("status"),url:this.get("url")}}})}()},function(e,t){!function(){"use strict";window.ClusterServer=Backbone.Model.extend({defaults:{name:"",address:"",role:"",status:"ok"},idAttribute:"name",forList:function(){return{name:this.get("name"),address:this.get("address"),status:this.get("status")}}})}()},function(e,t){!function(){"use strict";window.Coordinator=Backbone.Model.extend({defaults:{address:"",protocol:"",name:"",status:""}})}()},function(e,t){!function(){"use strict";window.CurrentDatabase=Backbone.Model.extend({url:arangoHelper.databaseUrl("/_api/database/current",frontendConfig.db),parse:function(e){return e.result}})}()},function(e,t){!function(){"use strict";var e=function(e,t,i,n,r,a){var o={contentType:"application/json",processData:!1,type:i};t=t||function(){},a=_.extend({mount:e.encodedMount()},a);var s=_.reduce(a,(function(e,t,i){return e+encodeURIComponent(i)+"="+encodeURIComponent(t)+"&"}),"?");o.url=arangoHelper.databaseUrl("/_admin/aardvark/foxxes"+(n?"/"+n:"")+s.slice(0,s.length-1)),void 0!==r&&(o.data=JSON.stringify(r)),$.ajax(o).then((function(e){t(null,e)}),(function(e){window.xhr=e,t(_.extend(e.status?new Error(e.responseJSON?e.responseJSON.errorMessage:e.responseText):new Error("Network Error"),{statusCode:e.status}))}))};window.Foxx=Backbone.Model.extend({idAttribute:"mount",defaults:{author:"Unknown Author",name:"",version:"Unknown Version",description:"No description",license:"Unknown License",contributors:[],scripts:{},config:{},deps:{},git:"",system:!1,development:!1},isNew:function(){return!1},encodedMount:function(){return encodeURIComponent(this.get("mount"))},destroy:function(t,i){e(this,i,"DELETE",void 0,void 0,t)},isBroken:function(){return!1},needsAttention:function(){return this.isBroken()||this.needsConfiguration()||this.hasUnconfiguredDependencies()},needsConfiguration:function(){return _.any(this.get("config"),(function(e){return void 0===e.current&&!1!==e.required}))},hasUnconfiguredDependencies:function(){return _.any(this.get("deps"),(function(e){return void 0===e.current&&!1!==e.definition.required}))},getConfiguration:function(t){e(this,function(e,i){e||this.set("config",i),"function"===typeof t&&t(e,i)}.bind(this),"GET","config")},setConfiguration:function(t,i){e(this,i,"PATCH","config",t)},getDependencies:function(t){e(this,function(e,i){e||this.set("deps",i),"function"===typeof t&&t(e,i)}.bind(this),"GET","deps")},setDependencies:function(t,i){e(this,i,"PATCH","deps",t)},toggleDevelopment:function(t,i){e(this,function(e,n){e||this.set("development",t),"function"===typeof i&&i(e,n)}.bind(this),"PATCH","devel",t)},runScript:function(t,i,n){e(this,n,"POST","scripts/"+t,i)},runTests:function(t,i){e(this,(function(e,t){"function"===typeof i&&i(e?e.responseJSON:e,t)}),"POST","tests",t)},isSystem:function(){return this.get("system")},isDevelopment:function(){return this.get("development")},download:function(){e(this,function(e,t){e?console.error(e.responseJSON):window.location.href=arangoHelper.databaseUrl("/_admin/aardvark/foxxes/download/zip?mount="+this.encodedMount()+"&nonce="+t.nonce)}.bind(this),"POST","download/nonce")},fetchThumbnail:function(e){var t=new XMLHttpRequest;t.responseType="blob",t.onload=function(){this.thumbnailUrl=URL.createObjectURL(t.response),e()}.bind(this),t.onerror=e,t.open("GET","foxxes/thumbnail?mount="+this.encodedMount()),window.arangoHelper.getCurrentJwt()&&t.setRequestHeader("Authorization","bearer "+window.arangoHelper.getCurrentJwt()),t.send()}})}()},function(e,t){!function(){"use strict";window.FoxxRepoModel=Backbone.Model.extend({idAttribute:"name",defaults:{name:"",description:"No description",author:"Unknown Author",latestVersion:"Unknown Version",legacy:!1,categories:"No category",defaultThumbnailUrl:"img/ArangoDB-Foxx-logo-bg.png"},httpGetAsync:function(e,t,i){var n=new XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&200===n.status?i?t(n.responseText,i):t(n.responseText):4===n.readyState&&404===n.status&&t()},n.open("GET",e,!0),n.send(null)},manifest:null,fetchManifest:function(e,t){var i=this;if(this.manifest)e&&e();else{var n="https://raw.githubusercontent.com/"+i.get("location")+"/v"+i.get("latestVersion")+"/manifest.json";this.httpGetAsync(n,(function(e,n){try{var r=JSON.parse(e);"object"===typeof r&&i.set("manifest",r),n(),t()}catch(a){n&&n(!0),t&&t(!0)}}),e)}},fetchReadme:function(e){this.httpGetAsync(this.getReadmeUrl(),e)},getReadmeUrl:function(){return"https://raw.githubusercontent.com/"+this.get("location")+"/v"+this.get("latestVersion")+"/README.md"},getThumbnailUrl:function(){return"https://raw.githubusercontent.com/"+this.get("location")+"/v"+this.get("latestVersion")+"/"+this.get("manifest").thumbnail},fetchThumbnail:function(e){var t=this,i=function(e){e&&e(t.manifest.thumbnail)};this.manifest?i(e):this.fetchManifest(i,e)}})}()},function(e,t){!function(){"use strict";window.Graph=Backbone.Model.extend({idAttribute:"_key",urlRoot:arangoHelper.databaseUrl("/_api/gharial"),isNew:function(){return!this.get("_id")},parse:function(e){return e.graph||e},addEdgeDefinition:function(e){$.ajax({async:!1,type:"POST",url:this.urlRoot+"/"+this.get("_key")+"/edge",data:JSON.stringify(e),error:function(e){arangoHelper.arangoError(e.responseJSON.errorMessage)}})},deleteEdgeDefinition:function(e){$.ajax({async:!1,type:"DELETE",url:this.urlRoot+"/"+this.get("_key")+"/edge/"+e,error:function(e){arangoHelper.arangoError(e.responseJSON.errorMessage)}})},modifyEdgeDefinition:function(e){$.ajax({async:!1,type:"PUT",url:this.urlRoot+"/"+this.get("_key")+"/edge/"+e.collection,data:JSON.stringify(e),error:function(e){arangoHelper.arangoError(e.responseJSON.errorMessage)}})},addVertexCollection:function(e){$.ajax({async:!1,type:"POST",url:this.urlRoot+"/"+this.get("_key")+"/vertex",data:JSON.stringify({collection:e}),error:function(e){arangoHelper.arangoError(e.responseJSON.errorMessage)}})},deleteVertexCollection:function(e){$.ajax({async:!1,type:"DELETE",url:this.urlRoot+"/"+this.get("_key")+"/vertex/"+e,error:function(e){arangoHelper.arangoError(e.responseJSON.errorMessage)}})},defaults:{name:"",edgeDefinitions:[],orphanCollections:[]}})}()},function(e,t){!function(){"use strict";window.newArangoLog=Backbone.Model.extend({defaults:{lid:"",level:"",timestamp:"",text:"",totalAmount:""},getLogStatus:function(){switch(this.get("level")){case 1:return"Error";case 2:return"Warning";case 3:return"Info";case 4:return"Debug";default:return"Unknown"}}})}()},function(e,t){!function(){"use strict";window.Notification=Backbone.Model.extend({defaults:{title:"",date:0,content:"",priority:"",tags:"",seen:!1}})}()},function(e,t){!function(){"use strict";window.queryManagementModel=Backbone.Model.extend({defaults:{id:"",query:"",bindVars:"",started:"",runTime:""}})}()},function(e,t){window.UserConfig=Backbone.Model.extend({defaults:{graphs:"",queries:[]},ldapEnabled:!1,initialize:function(e){this.ldapEnabled=e.ldapEnabled,this.getUser()},model:window.UserConfigModel,fetch:function(e){e=_.extend({parse:!0},e);var t=this,i=e.success;if(!this.ldapEnabled)return Backbone.Collection.prototype.fetch.call(this,e);this.getLocalConfig(),e.success=void(i&&i.call(e.context,t,void 0,e))},getConfigPath:function(){return frontendConfig.db+"-"+this.username+"-config"},getLocalConfig:function(){var e=sessionStorage.getItem(this.getConfigPath());try{e=JSON.parse(e)}catch(t){}return e?this.set(e):this.set({}),this.toJSON()},saveLocalConfig:function(){sessionStorage.setItem(this.getConfigPath(),JSON.stringify(this.toJSON()))},getLocalItem:function(e,t){return t&&t(this.get(e)),this.get(e)},setLocalItem:function(e,t,i){try{this.set(e,t),this.saveLocalConfig(),i&&i()}catch(n){}},getUser:function(){window.App.currentUser?this.username=window.App.currentUser:this.username="root"},parse:function(e){return e.result},url:function(){return arangoHelper.databaseUrl("/_api/user/"+encodeURIComponent(this.username)+"/config")},setItem:function(e,t,i){if(this.ldapEnabled)this.setLocalItem(e,t,i);else{var n=this;$.ajax({type:"PUT",cache:!1,url:arangoHelper.databaseUrl("/_api/user/"+encodeURIComponent(this.username)+"/config/"+encodeURIComponent(e)),contentType:"application/json",processData:!1,data:JSON.stringify({value:t}),async:!0,success:function(){n.set(e,t),i&&i()},error:function(){arangoHelper.arangoError("User configuration","Could not update user configuration for key: "+e)}})}},getItem:function(e,t){this.ldapEnabled?this.getLocalItem(e,t):$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_api/user/"+encodeURIComponent(this.username)+"/config/"+encodeURIComponent(e)),contentType:"application/json",processData:!1,async:!0,success:function(e){t(e)},error:function(){arangoHelper.arangoError("User configuration","Could not fetch user configuration for key: "+e)}})}})},function(e,t){!function(){"use strict";window.AutomaticRetryCollection=Backbone.Collection.extend({_retryCount:0,checkRetries:function(){var e=this;return this.updateUrl(),!(this._retryCount>10)||(window.setTimeout((function(){e._retryCount=0}),1e4),window.App.clusterUnreachable(),!1)},successFullTry:function(){this._retryCount=0},failureTry:function(e,t,i){401===i.status?window.App.requestAuth():(window.App.clusterPlan.rotateCoordinator(),this._retryCount++,e())}})}()},function(e,t){!function(){"use strict";window.PaginatedCollection=Backbone.Collection.extend({page:0,pagesize:10,totalAmount:null,getPage:function(){return this.page+1},setPage:function(e){e>=this.getLastPageNumber()&&null!==this.totalAmount?this.page=this.getLastPageNumber()-1:this.page=e<1?0:e-1},getLastPageNumber:function(){return Math.max(Math.ceil(this.totalAmount/this.pagesize),1)},getOffset:function(){return this.page*this.pagesize},getPageSize:function(){return this.pagesize},setPageSize:function(e){if("all"===e)this.pagesize="all";else try{e=parseInt(e,10),this.pagesize=e}catch(t){}},setToFirst:function(){this.page=0},setToLast:function(){this.setPage(this.getLastPageNumber())},setToPrev:function(){this.setPage(this.getPage()-1)},setToNext:function(){this.setPage(this.getPage()+1)},setTotal:function(e){this.totalAmount=e},getTotal:function(){return this.totalAmount},setTotalMinusOne:function(){this.totalAmount--}})}()},function(e,t){window.ClusterStatisticsCollection=Backbone.Collection.extend({model:window.Statistics,url:"/_admin/statistics",updateUrl:function(){this.url=window.App.getNewRoute(this.host)+this.url},initialize:function(e,t){this.host=t.host,window.App.registerForUpdate(this)}})},function(e,t){!function(){"use strict";window.ArangoCollections=Backbone.Collection.extend({url:arangoHelper.databaseUrl("/_api/collection"),model:arangoCollectionModel,searchOptions:{searchPhrase:null,includeSystem:!1,includeDocument:!0,includeEdge:!0,includeLoaded:!0,includeUnloaded:!0,sortBy:"name",sortOrder:1},translateStatus:function(e){switch(e){case 0:return"corrupted";case 1:return"new born collection";case 2:return"unloaded";case 3:return"loaded";case 4:return"unloading";case 5:return"deleted";case 6:return"loading";default:return"unknown"}},translateTypePicture:function(e){var t="";switch(e){case"document":t+="fa-file-text-o";break;case"edge":t+="fa-share-alt";break;case"unknown":t+="fa-question";break;default:t+="fa-cogs"}return t},parse:function(e){var t=this;return _.each(e.result,(function(e){e.isSystem=arangoHelper.isSystemCollection(e),e.type=arangoHelper.collectionType(e),e.status=t.translateStatus(e.status),e.picture=t.translateTypePicture(e.type)})),e.result},getPosition:function(e){var t,i=this.getFiltered(this.searchOptions),n=null,r=null;for(t=0;t<i.length;++t)i[t].get("name")===e&&(t>0&&(n=i[t-1]),t<i.length-1&&(r=i[t+1]));return{prev:n,next:r}},getFiltered:function(e){var t=[],i=[];if(null!==e.searchPhrase){var n=e.searchPhrase.toLowerCase();n=n.replace(/\s+/g," ").replace(/(^\s+|\s+$)/g,""),i=n.split(" ")}return this.models.forEach((function(n){if(i.length>0){var r,a=n.get("name").toLowerCase();for(r=0;r<i.length;++r)if(-1===a.indexOf(i[r]))return}!1===e.includeSystem&&n.get("isSystem")||!1===e.includeEdge&&"edge"===n.get("type")||!1===e.includeDocument&&"document"===n.get("type")||!1===e.includeLoaded&&"loaded"===n.get("status")||!1===e.includeUnloaded&&"unloaded"===n.get("status")||t.push(n)})),t.sort((function(t,i){var n,r;return"type"===e.sortBy?(n=t.get("type")+" "+t.get("name").toLowerCase(),r=i.get("type")+" "+i.get("name").toLowerCase()):(n=t.get("name").toLowerCase(),r=i.get("name").toLowerCase()),n!==r?e.sortOrder*(n<r?-1:1):0})),t},newCollection:function(e,t){var i={};i.name=e.collName,i.waitForSync=e.wfs,i.isSystem=e.isSystem,i.type=parseInt(e.collType,10),e.shards&&(i.numberOfShards=e.shards),i.shardKeys=e.shardKeys,e.smartJoinAttribute&&""!==e.smartJoinAttribute&&(i.smartJoinAttribute=e.smartJoinAttribute),i.distributeShardsLike=e.distributeShardsLike;var n=new RegExp(/^[0-9]+$/);e.replicationFactor&&(i.replicationFactor=e.replicationFactor,n.test(e.replicationFactor)&&(i.replicationFactor=JSON.parse(e.replicationFactor))),e.writeConcern&&(i.writeConcern=e.writeConcern,n.test(e.writeConcern)&&(i.writeConcern=JSON.parse(e.writeConcern))),$.ajax({cache:!1,type:"POST",url:arangoHelper.databaseUrl("/_api/collection"),data:JSON.stringify(i),contentType:"application/json",processData:!1,success:function(e){t(!1,e)},error:function(e){t(!0,e)}})}})}()},function(e,t){!function(){"use strict";window.ArangoDatabase=Backbone.Collection.extend({model:window.DatabaseModel,sortOptions:{desc:!1},url:arangoHelper.databaseUrl("/_api/database/user"),comparator:function(e,t){var i=e.get("name").toLowerCase(),n=t.get("name").toLowerCase();return!0===this.sortOptions.desc?i<n?1:i>n?-1:0:i>n?1:i<n?-1:0},parse:function(e){if(e)return _.map(e.result,(function(e){return{name:e}}))},initialize:function(){var e=this;this.fetch({cache:!1}).done((function(){e.sort()}))},setSortingDesc:function(e){this.sortOptions.desc=e},getDatabases:function(){var e=this;return this.fetch({cache:!1}).done((function(){e.sort()})),this.models},getDatabasesForUser:function(e){$.ajax({type:"GET",cache:!1,url:this.url,contentType:"application/json",processData:!1,success:function(t){e(!1,t.result.sort())},error:function(){e(!0,[])}})},createDatabaseURL:function(e,t,i){var n=window.location,r=window.location.hash;t=t?"SSL"===t||"https:"===t?"https:":"http:":n.protocol,i=i||n.port;var a=t+"//"+window.location.hostname+":"+i+"/_db/"+encodeURIComponent(e)+"/_admin/aardvark/standalone.html";if(r){var o=r.split("/")[0];0===o.indexOf("#collection")&&(o="#collections"),0===o.indexOf("#service")&&(o="#services"),a+=o}return a},getCurrentDatabase:function(e){$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_api/database/current"),contentType:"application/json",processData:!1,success:function(t){200===t.code?e(!1,t.result.name):e(!1,t)},error:function(t){e(!0,t)}})},hasSystemAccess:function(e){this.getDatabasesForUser((function(t,i){t?arangoHelper.arangoError("DB","Could not fetch databases"):e(!1,_.includes(i,"_system"))}))}})}()},function(e,t){window.ArangoDocument=Backbone.Collection.extend({url:"/_api/document/",model:arangoDocumentModel,collectionInfo:{},deleteEdge:function(e,t,i){this.deleteDocument(e,t,i)},deleteDocument:function(e,t,i){var n={keys:[t],collection:e};$.ajax({cache:!1,type:"PUT",contentType:"application/json",data:JSON.stringify(n),url:arangoHelper.databaseUrl("/_api/simple/remove-by-keys"),success:function(){i(!1)},error:function(){i(!0)}})},addDocument:function(e,t,i){this.createTypeDocument(e,t,i)},createTypeEdge:function(e,t,i,n,r,a){var o;try{n&&(r._key=n),r._from=t,r._to=i,o=JSON.stringify(r)}catch(x){return r={},this.createTypeEdge(e,t,i,n,r,a)}$.ajax({cache:!1,type:"POST",url:arangoHelper.databaseUrl("/_api/document?collection="+encodeURIComponent(e)),data:o,contentType:"application/json",processData:!1,success:function(e){a(!1,e._id)},error:function(e){a(!0,e._id,e.responseJSON)}})},createTypeDocument:function(e,t,i,n,r,a,o,s,l){var c=i;try{a&&o&&t?(c._key=o+":"+t,c[a]=o):s&&l?(t&&(c._key=l+":"+t),c[s]=l):t&&(c._key=t)}catch(x){return i={},this.createTypeDocument(e,t,i,n,r,a,o,s,l)}c=JSON.stringify(c);var d=arangoHelper.databaseUrl("/_api/document?collection="+encodeURIComponent(e));r&&(d+="?returnNew=true"),$.ajax({cache:!1,type:"POST",url:d,data:c,contentType:"application/json",processData:!1,success:function(e){n(!1,r?e:e._id)},error:function(e){n(!0,e._id,e.responseJSON)}})},getCollectionInfo:function(e,t,i){var n=this;$.ajax({cache:!1,type:"GET",url:arangoHelper.databaseUrl("/_api/collection/"+encodeURIComponent(e)+"?"+arangoHelper.getRandomToken()),contentType:"application/json",processData:!1,success:function(e){n.collectionInfo=e,t(!1,e,i)},error:function(e){t(!0,e,i)}})},getEdge:function(e,t,i){this.getDocument(e,t,i)},getDocument:function(e,t,i){var n=this;this.clearDocument();var r={keys:[t],collection:e};$.ajax({cache:!1,type:"PUT",url:arangoHelper.databaseUrl("/_api/simple/lookup-by-keys"),contentType:"application/json",data:JSON.stringify(r),processData:!1,success:function(r){r.documents[0]?(n.add(r.documents[0]),r.documents[0]._from&&r.documents[0]._to?i(!1,r,"edge"):i(!1,r,"document")):(n.add(!0,r),i(!0,r,e+"/"+t))},error:function(r){n.add(!0,r),arangoHelper.arangoError("Error",r.responseJSON.errorMessage+" - error number: "+r.responseJSON.errorNum),i(!0,r,e+"/"+t)}})},saveEdge:function(e,t,i,n,r,a){this.saveDocument(e,t,r,a,i,n)},saveDocument:function(e,t,i,n,r,a){if("string"===typeof i)try{i=JSON.parse(i)}catch(o){arangoHelper.arangoError("Could not parse document: "+i)}i._key=t,i._id=e+"/"+t,r&&a&&(i._from=r,i._to=a),$.ajax({cache:!1,type:"PUT",url:arangoHelper.databaseUrl("/_api/document/"+encodeURIComponent(e)+"?returnNew=true"),data:JSON.stringify([i]),contentType:"application/json",processData:!1,success:function(e){n(!1,e)},error:function(e){n(!0,e)}})},updateLocalDocument:function(e){this.clearDocument(),this.add(e)},clearDocument:function(){this.reset()}})},function(e,t){!function(){"use strict";window.ArangoDocuments=window.PaginatedCollection.extend({collectionID:1,filters:[],checkCursorTimer:void 0,MAX_SORT:12e3,lastQuery:{},type:"document",sortAttribute:"",smartJoinAttribute:null,smartGraphAttribute:null,url:arangoHelper.databaseUrl("/_api/documents"),model:window.arangoDocumentModel,setSmartJoinAttribute:function(e){this.smartJoinAttribute=e},getSmartJoinAttribute:function(){return this.smartJoinAttribute},setSmartGraphAttribute:function(e){this.smartGraphAttribute=e},getSmartGraphAttribute:function(){return this.smartGraphAttribute},loadCollectionConfig:function(e){var t=this;$.ajax({cache:!1,type:"GET",url:arangoHelper.databaseUrl("/_api/collection/"+this.collectionID+"/count"),contentType:"application/json",processData:!1,success:function(i){(i.count||0===i.count)&&t.setTotal(i.count),i.smartJoinAttribute?t.setSmartJoinAttribute(i.smartJoinAttribute):t.setSmartJoinAttribute(null),i.smartGraphAttribute?t.setSmartGraphAttribute(i.smartGraphAttribute):t.setSmartGraphAttribute(null),e(!1)},error:function(){e(!0)}})},setCollection:function(e,t){this.resetFilter(),this.collectionID=e,t?this.setPage(t):this.setPage(1),this.loadCollectionConfig((function(e){e&&arangoHelper.arangoError("Documents","Could not fetch documents count")}))},setSort:function(e){this.sortAttribute=e},getSort:function(){return this.sortAttribute},addFilter:function(e,t,i){this.filters.push({attr:e,op:t,val:i})},setFiltersForQuery:function(e){return 0===this.filters.length?"":" FILTER "+_.map(this.filters,(function(t,i){var n="x.@attr"+i+" "+t.op+" @param"+i;return"LIKE"===t.op?e["param"+i]="%"+t.val+"%":"IN"===t.op||"NOT IN "===t.op?-1!==t.val.indexOf(",")?e["param"+i]=t.val.split(",").map((function(e){return e.replace(/(^ +| +$)/g,"")})):e["param"+i]=[t.val]:e["param"+i]=t.val,-1!==t.attr.indexOf(".")?e["attr"+i]=t.attr.split("."):e["attr"+i]=t.attr,n})).join(" && ")},setPagesize:function(e){this.setPageSize(e)},resetFilter:function(){this.filters=[]},moveDocument:function(e,t,i,n){var r,a,o,s={"@collection":t,filterid:e};r="FOR x IN @@collection",r+=" FILTER x._key == @filterid",r+=" INSERT x IN ",a={query:r+=i,bindVars:s},o={query:"FOR x in @@collection FILTER x._key == @filterid REMOVE x IN @@collection",bindVars:s},window.progressView.show(),$.ajax({cache:!1,type:"POST",url:arangoHelper.databaseUrl("/_api/cursor"),data:JSON.stringify(a),contentType:"application/json",success:function(){$.ajax({cache:!1,type:"POST",url:arangoHelper.databaseUrl("/_api/cursor"),data:JSON.stringify(o),contentType:"application/json",success:function(){n&&n(!1),window.progressView.hide()},error:function(){n&&n(!0),window.progressView.hide(),arangoHelper.arangoError("Document error","Documents inserted, but could not be removed.")}})},error:function(){window.progressView.hide(),arangoHelper.arangoError("Document error","Could not move selected documents.")}})},getDocuments:function(e){var t,i,n,r=this,a=this.getPageSize();"all"===a&&(a=this.MAX_SORT+38e3),i={"@collection":this.collectionID},t='FOR x IN @@collection LET att = APPEND(SLICE(ATTRIBUTES(x), 0, 25), "_key", true)',t+=this.setFiltersForQuery(i),this.getTotal()<this.MAX_SORT&&""!==this.getSort()&&(t+=" SORT x."+this.getSort()),"all"!==i.count&&(t+=" LIMIT @offset, @count",i.offset=this.getOffset(),i.count=a),n={query:t+=" RETURN KEEP(x, att)",bindVars:i,batchSize:a},this.filters.length>0&&(n.options={fullCount:!0});$.ajax({cache:!1,type:"POST",url:arangoHelper.databaseUrl("/_api/cursor"),data:JSON.stringify(n),headers:{"x-arango-async":"store"},contentType:"application/json",success:function(t,i,a){if(a.getResponseHeader("x-arango-async-id")){var o=a.getResponseHeader("x-arango-async-id");window.progressView.showWithDelay(1e3,"Fetching documents...",(function(){$.ajax({url:arangoHelper.databaseUrl("/_api/job/"+encodeURIComponent(o)+"/cancel"),type:"PUT",success:function(){window.clearTimeout(r.checkCursorTimer),arangoHelper.arangoNotification("Documents","Canceled operation."),$(".dataTables_empty").text("Canceled."),window.progressView.hide()}})})),function t(i){$.ajax({cache:!1,type:"PUT",url:arangoHelper.databaseUrl("/_api/job/"+encodeURIComponent(i)),contentType:"application/json",success:function(a,o,s){201===s.status?(window.progressView.toShow=!1,r.clearDocuments(),a.extra&&a.extra.stats&&void 0!==a.extra.stats.fullCount&&r.setTotal(a.extra.stats.fullCount),_.each(a.result,(function(e){r.add({id:e._id,rev:e._rev,key:e._key,content:e})})),r.lastQuery=n,e(!1,a)):204===s.status&&(r.checkCursorTimer=window.setTimeout((function(){t(i)}),500))},error:function(t){e(!1,t)}})}(o)}else e(!0,t)},error:function(t){e(!1,t)}})},clearDocuments:function(){this.reset()},buildDownloadDocumentQuery:function(){var e,t;return t={"@collection":this.collectionID},e="FOR x in @@collection",e+=this.setFiltersForQuery(t),this.getTotal()<this.MAX_SORT&&this.getSort().length>0&&(e+=" SORT x."+this.getSort()),{query:e+=" RETURN x",bindVars:t}},uploadDocuments:function(e,t){$.ajax({type:"POST",url:arangoHelper.databaseUrl("/_api/import?type=auto&details=true&collection="+encodeURIComponent(this.collectionID)+"&createCollection=false"),data:e,processData:!1,contentType:"json",dataType:"json",complete:function(e){e.responseJSON&&function(e){e.hasOwnProperty("error")&&delete e.error,e.errors>0?t(!0,"Info: "+JSON.stringify(e)):t(!1,"Info: "+JSON.stringify(e))}(e.responseJSON)},error:function(e){t(!0,e.responseJSON.errorMessage)}})}})}()},function(e,t){!function(){"use strict";window.ArangoLogs=window.PaginatedCollection.extend({upto:!1,loglevel:0,totalPages:0,parse:function(e){var t=[];return _.each(e.lid,(function(i,n){t.push({level:e.level[n],lid:i,topic:e.topic[n],text:e.text[n],timestamp:e.timestamp[n],totalAmount:e.totalAmount})})),this.totalAmount=e.totalAmount,this.totalPages=Math.ceil(this.totalAmount/this.pagesize),t},initialize:function(e){!0===e.upto&&(this.upto=!0),this.loglevel=e.loglevel},model:window.newArangoLog,url:function(){var e,t,i=this.totalAmount-(this.page+1)*this.pagesize;return i<0&&this.page===this.totalPages-1?(i=0,t=this.totalAmount%this.pagesize):t=this.pagesize,0===this.totalAmount&&(t=1),e="/_admin/log?"+(this.upto?"upto":"level")+"="+this.loglevel+"&size="+t+"&offset="+i,this.lastInverseOffset=i,arangoHelper.databaseUrl(e)}})}()},function(e,t){!function(){"use strict";window.ArangoQueries=Backbone.Collection.extend({getQueryPath:function(){return frontendConfig.db+"-"+this.username+"-queries"},initialize:function(e,t){var i=this;$.ajax("whoAmI?_="+Date.now(),{async:!0}).done((function(e){!1===this.activeUser||null===this.activeUser?i.activeUser="root":i.activeUser=e.user}))},fetch:function(e){e=_.extend({parse:!0},e);var t=this,i=e.success;if(!frontendConfig.ldapEnabled)return frontendConfig.authenticationEnabled&&window.App.currentUser?this.url=arangoHelper.databaseUrl("/_api/user/"+encodeURIComponent(window.App.currentUser)):this.url=arangoHelper.databaseUrl("/_api/user/"),Backbone.Collection.prototype.fetch.call(this,e);this.fetchLocalQueries(),e.success=void(i&&i.call(e.context,t,void 0,e))},fetchLocalQueries:function(){this.reset();var e=this,t=sessionStorage.getItem(this.getQueryPath());try{t=JSON.parse(t),_.each(t,(function(t,i){e.add(t)}))}catch(i){}},url:arangoHelper.databaseUrl("/_api/user/"),model:ArangoQuery,activeUser:null,parse:function(e){var t,i=this;if(!1!==this.activeUser&&null!==this.activeUser||(this.activeUser="root"),e.user===i.activeUser)try{e.extra.queries&&(t=e.extra.queries)}catch(n){}else e.result&&e.result instanceof Array&&_.each(e.result,(function(e){e.user===i.activeUser&&(t=e.extra.queries)}));return t},saveLocalCollectionQueries:function(e,t){sessionStorage.setItem(this.getQueryPath(),JSON.stringify(e)),t&&t(!1,e)},saveCollectionQueries:function(e){var t=[];this.each((function(e){t.push({value:e.attributes.value,parameter:e.attributes.parameter,name:e.attributes.name})})),frontendConfig.ldapEnabled?this.saveLocalCollectionQueries(t,e):(!1!==this.activeUser&&null!==this.activeUser||(this.activeUser="root"),$.ajax({cache:!1,type:"PATCH",url:arangoHelper.databaseUrl("/_api/user/"+encodeURIComponent(this.activeUser)),data:JSON.stringify({extra:{queries:t}}),contentType:"application/json",processData:!1,success:function(t){e(!1,t)},error:function(){e(!0)}}))},downloadLocalQueries:function(){arangoHelper.downloadLocalBlob(JSON.stringify(this.toJSON()),"json")},saveImportQueries:function(e,t){var i=this;if(0===this.activeUser)return!1;if(frontendConfig.ldapEnabled){if(e){var n=new FileReader;n.readAsText(e,"UTF-8"),n.onload=function(e){try{var n=JSON.parse(e.target.result);_.each(n,(function(e,t){e.name&&e.value&&e.parameter&&i.add(e)})),i.saveCollectionQueries(),t&&t()}catch(r){arangoHelper.arangoError("Query error","Queries could not be imported."),window.modalView.hide()}},n.onerror=function(e){window.modalView.hide(),arangoHelper.arangoError("Query error","Queries could not be imported.")}}}else window.progressView.show("Fetching documents..."),$.ajax({cache:!1,type:"POST",url:"query/upload/"+encodeURIComponent(this.activeUser),data:e,contentType:"application/json",processData:!1,success:function(){window.progressView.hide(),arangoHelper.arangoNotification("Queries successfully imported."),t()},error:function(){window.progressView.hide(),arangoHelper.arangoError("Query error","queries could not be imported")}})}})}()},function(e,t){window.ArangoReplication=Backbone.Collection.extend({model:window.Replication,url:"../api/user",getLogState:function(e){$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_api/replication/logger-state"),contentType:"application/json",processData:!1,success:function(t){e(!1,t)},error:function(t){e(!0,t)}})},getApplyState:function(e){$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_api/replication/applier-state"),contentType:"application/json",processData:!1,success:function(t){e(!1,t)},error:function(t){e(!0,t)}})}})},function(e,t){window.StatisticsCollection=Backbone.Collection.extend({model:window.Statistics,url:"/_admin/statistics"})},function(e,t){window.StatisticsDescriptionCollection=Backbone.Collection.extend({model:window.StatisticsDescription,url:"/_admin/statistics-description",parse:function(e){return e}})},function(e,t){window.ArangoUsers=Backbone.Collection.extend({model:window.Users,activeUser:null,activeUserSettings:{query:{},shell:{},testing:!0},sortOptions:{desc:!1},authOptions:{ro:!1},fetch:function(e){return e.fetchAllUsers?this.url=arangoHelper.databaseUrl("/_api/user/"):frontendConfig.authenticationEnabled&&window.App.currentUser?this.url=arangoHelper.databaseUrl("/_api/user/"+encodeURIComponent(window.App.currentUser)):this.url=arangoHelper.databaseUrl("/_api/user/"),Backbone.Collection.prototype.fetch.call(this,e)},url:frontendConfig.basePath+"/_api/user",comparator:function(e,t){var i=e.get("user").toLowerCase(),n=t.get("user").toLowerCase();return!0===this.sortOptions.desc?i<n?1:i>n?-1:0:i>n?1:i<n?-1:0},login:function(e,t,i){var n=this;$.ajax({url:arangoHelper.databaseUrl("/_open/auth"),method:"POST",data:JSON.stringify({username:e,password:t}),dataType:"json",success:function(e){var t=e.jwt.split(".");if(!t[1])throw new Error("Invalid JWT");if(!window.atob)throw new Error("base64 support missing in browser");var r=JSON.parse(atob(t[1]));n.activeUser=r.preferred_username,void 0===n.activeUser?arangoHelper.setCurrentJwt(e.jwt,null):arangoHelper.setCurrentJwt(e.jwt,n.activeUser),i(!1,n.activeUser)},error:function(){arangoHelper.setCurrentJwt(null,null),n.activeUser=null,i(!0,null)}})},setSortingDesc:function(e){this.sortOptions.desc=e},logout:function(){arangoHelper.setCurrentJwt(null),this.activeUser=null,this.reset(),window.App.navigate(""),window.location.reload()},setUserSettings:function(e,t){this.activeUserSettings.identifier=t},loadUserSettings:function(e){var t,i=this;t=frontendConfig.authenticationEnabled?arangoHelper.databaseUrl("/_api/user/"+encodeURIComponent(i.activeUser)):arangoHelper.databaseUrl("/_api/user/root"),$.ajax({type:"GET",cache:!1,url:t,contentType:"application/json",processData:!1,success:function(t){i.activeUserSettings=t.extra,e(!1,t)},error:function(t){e(!0,t)}})},saveUserSettings:function(e){$.ajax({cache:!1,type:"PUT",url:frontendConfig.basePath+"/_api/user/"+encodeURIComponent(this.activeUser),data:JSON.stringify({extra:this.activeUserSettings}),contentType:"application/json",processData:!1,success:function(t){e(!1,t)},error:function(t){e(!0,t)}})},parse:function(e){var t=[];return e.result?_.each(e.result,(function(e){t.push(e)})):t.push({user:e.user,active:e.active,extra:e.extra,changePassword:e.changePassword}),t},whoAmI:function(e){var t=this;if(this.activeUser)e(!1,this.activeUser);else{var i="whoAmI?_="+Date.now();frontendConfig.react&&(i=arangoHelper.databaseUrl("/_admin/aardvark/"+i)),$.ajax({type:"GET",url:i,success:function(i){t.activeUser=i.user,e(!1,i.user)},error:function(){e(!0,null)}})}}})},function(e,t){!function(){"use strict";window.ArangoViews=Backbone.Collection.extend({url:arangoHelper.databaseUrl("/_api/view"),model:arangoViewModel,parse:function(e){return e.result}})}()},function(e,t){!function(){"use strict";window.ClusterCoordinators=window.AutomaticRetryCollection.extend({model:window.ClusterCoordinator,url:arangoHelper.databaseUrl("/_admin/aardvark/cluster/Coordinators"),updateUrl:function(){this.url=window.App.getNewRoute("Coordinators")},initialize:function(){},statusClass:function(e){switch(e){case"ok":return"success";case"warning":return"warning";case"critical":return"danger";case"missing":return"inactive";default:return"danger"}},getStatuses:function(e,t){if(this.checkRetries()){var i=this;this.fetch({beforeSend:window.App.addAuth.bind(window.App),error:i.failureTry.bind(i,i.getStatuses.bind(i,e,t))}).done((function(){i.successFullTry(),i.forEach((function(t){e(i.statusClass(t.get("status")),t.get("address"))})),t()}))}},byAddress:function(e,t){if(this.checkRetries()){var i=this;this.fetch({beforeSend:window.App.addAuth.bind(window.App),error:i.failureTry.bind(i,i.byAddress.bind(i,e,t))}).done((function(){i.successFullTry(),e=e||{},i.forEach((function(t){var i=t.get("address");i=i.split(":")[0],e[i]=e[i]||{},e[i].coords=e[i].coords||[],e[i].coords.push(t)})),t(e)}))}},checkConnection:function(e){var t=this;this.checkRetries()&&this.fetch({beforeSend:window.App.addAuth.bind(window.App),error:t.failureTry.bind(t,t.checkConnection.bind(t,e))}).done((function(){t.successFullTry(),e()}))}})}()},function(e,t){!function(){"use strict";window.ClusterServers=window.AutomaticRetryCollection.extend({model:window.ClusterServer,host:"",url:arangoHelper.databaseUrl("/_admin/aardvark/cluster/DBServers"),updateUrl:function(){this.url=window.App.getNewRoute(this.host)+this.url},initialize:function(e,t){this.host=t.host},statusClass:function(e){switch(e){case"ok":return"success";case"warning":return"warning";case"critical":return"danger";case"missing":return"inactive";default:return"danger"}},getStatuses:function(e){if(this.checkRetries()){var t=this;this.fetch({beforeSend:window.App.addAuth.bind(window.App),error:t.failureTry.bind(t,t.getStatuses.bind(t,e))}).done((function(){t.successFullTry(),t._retryCount=0,t.forEach((function(i){e(t.statusClass(i.get("status")),i.get("address"))}))}))}},byAddress:function(e,t){if(this.checkRetries()){var i=this;this.fetch({beforeSend:window.App.addAuth.bind(window.App),error:i.failureTry.bind(i,i.byAddress.bind(i,e,t))}).done((function(){i.successFullTry(),e=e||{},i.forEach((function(t){var i=t.get("address");i=i.split(":")[0],e[i]=e[i]||{},e[i].dbs=e[i].dbs||[],e[i].dbs.push(t)})),t(e)})).error((function(e){console.log("error"),console.log(e)}))}},getList:function(){throw new Error("Do not use")},getOverview:function(){throw new Error("Do not use DbServer.getOverview")}})}()},function(e,t){!function(){"use strict";window.CoordinatorCollection=Backbone.Collection.extend({model:window.Coordinator,url:arangoHelper.databaseUrl("/_admin/aardvark/cluster/Coordinators")})}()},function(e,t){!function(){"use strict";window.FoxxCollection=Backbone.Collection.extend({model:window.Foxx,sortOptions:{desc:!1},url:arangoHelper.databaseUrl("/_admin/aardvark/foxxes"),comparator:function(e,t){var i,n;return!0===this.sortOptions.desc?(i=e.get("mount"))<(n=t.get("mount"))?1:i>n?-1:0:(i=e.get("mount"))>(n=t.get("mount"))?1:i<n?-1:0},setSortingDesc:function(e){this.sortOptions.desc=e},install:function(e,t,i,n,r){var a=arangoHelper.databaseUrl("/_admin/aardvark/foxxes/"+e+"?mount="+encodeURIComponent(i));n.legacy&&(a+="&legacy=true"),!0===n.setup?a+="&setup=true":!1===n.setup&&(a+="&setup=false"),!0===n.teardown?a+="&teardown=true":!1===n.teardown&&(a+="&teardown=false"),!0===n.replace?a+="&replace=true":!1===n.replace&&(a+="&upgrade=true"),$.ajax({cache:!1,type:"PUT",url:a,data:JSON.stringify(t),contentType:"application/json",processData:!1,success:function(e){r(e)},error:function(e){r(e)}})}})}()},function(e,t){!function(){"use strict";window.FoxxRepository=Backbone.Collection.extend({model:window.FoxxRepoModel,sortOptions:{desc:!1},url:arangoHelper.databaseUrl("/_admin/aardvark/foxxes/fishbowl"),parse:function(e){var t=[];return _.each(e,(function(e){e.legacy||t.push(e)})),t},comparator:function(e,t){var i,n;return!0===this.sortOptions.desc?(i=e.get("mount"))<(n=t.get("mount"))?1:i>n?-1:0:(i=e.get("mount"))>(n=t.get("mount"))?1:i<n?-1:0},setSortingDesc:function(e){this.sortOptions.desc=e}})}()},function(e,t){!function(){"use strict";window.GraphCollection=Backbone.Collection.extend({model:window.Graph,sortOptions:{desc:!1},url:arangoHelper.databaseUrl("/_api/gharial"),dropAndDeleteGraph:function(e,t){$.ajax({type:"DELETE",url:arangoHelper.databaseUrl("/_api/gharial/")+encodeURIComponent(e)+"?dropCollections=true",contentType:"application/json",processData:!0,success:function(){t(!0)},error:function(e){e.responseJSON?t(!1,e.responseJSON):t(!1)}})},createNode:function(e,t,i,n){$.ajax({type:"POST",url:arangoHelper.databaseUrl("/_api/gharial/")+encodeURIComponent(e)+"/vertex/"+encodeURIComponent(t),contentType:"application/json",data:JSON.stringify(i),processData:!0,success:function(e){n(!1,e.vertex._id)},error:function(e){n(!0,null,e.responseJSON.errorMessage)}})},createEdge:function(e,t,i,n){$.ajax({cache:!1,type:"POST",url:arangoHelper.databaseUrl("/_api/gharial/")+encodeURIComponent(e)+"/edge/"+encodeURIComponent(t),data:JSON.stringify(i),contentType:"application/json",processData:!1,success:function(e){n(!1,e.edge._id)},error:function(e){n(!0,null,e.responseJSON.errorMessage)}})},comparator:function(e,t){var i=e.get("_key")||"",n=t.get("_key")||"";return i=i.toLowerCase(),n=n.toLowerCase(),!0===this.sortOptions.desc?i<n?1:i>n?-1:0:i>n?1:i<n?-1:0},setSortingDesc:function(e){this.sortOptions.desc=e},parse:function(e){if(!e.error)return e.graphs}})}()},function(e,t){!function(){"use strict";window.NotificationCollection=Backbone.Collection.extend({model:window.Notification,url:""})}()},function(e,t){!function(){"use strict";window.QueryManagementActive=Backbone.Collection.extend({model:window.queryManagementModel,url:function(){var e=frontendConfig.basePath+"/_api/query/current";return"_system"!==window.frontendConfig.db&&(e=arangoHelper.databaseUrl("/_api/query/current")),e},killRunningQuery:function(e,t){var i=frontendConfig.basePath+"/_api/query/"+encodeURIComponent(e);"_system"!==window.frontendConfig.db&&(i=arangoHelper.databaseUrl("/_api/query/"+encodeURIComponent(e))),$.ajax({url:i,type:"DELETE",success:function(e){t()}})}})}()},function(e,t){!function(){"use strict";window.QueryManagementSlow=Backbone.Collection.extend({model:window.queryManagementModel,url:function(){var e=frontendConfig.basePath+"/_api/query/slow";return"_system"!==window.frontendConfig.db&&(e=arangoHelper.databaseUrl("/_api/query/slow")),e},deleteSlowQueryHistory:function(e){var t=frontendConfig.basePath+"/_api/query/slow";"_system"!==window.frontendConfig.db&&(t=arangoHelper.databaseUrl("/_api/query/slow")),$.ajax({url:t,type:"DELETE",success:function(t){e()}})}})}()},,,,,,,,,,function(e,t,i){e.exports=i(499)},function(e,t,i){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){},,function(e,t,i){},,function(e,t,i){},,function(e,t,i){},,function(e,t,i){},,function(e,t,i){},,function(e,t,i){},,function(e,t,i){},,function(e,t,i){},,function(e,t,i){},,function(e,t,i){},,function(e,t,i){},,function(e,t,i){},,,,,,,,function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='  <tr class="foxx-store-row">\n    <td class="foxx-store-main">\n      <div class="foxx-name">'+(null==(__t=name)?"":__t)+(null==(__t=legacy?" (legacy)":"")?"":__t)+'</div>\n      <div class="foxx-author">'+(null==(__t=author)?"":__t)+'</div>\n      <div class="foxx-description">'+(null==(__t=description)?"":__t)+'</div>\n    </td>\n    <td class="foxx-store-version">\n      <div class="foxx-version">'+(null==(__t=latestVersion)?"":__t)+'</div>\n    </td>\n    <td class="foxx-store-install">\n      <button class="button-success install-app" appId="'+(null==(__t=name)?"":__t)+'" appVersion="'+(null==(__t=latestVersion)?"":__t)+'">Install</button>\n    </td>\n  </tr>\n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="headerBar">\n  <div class="headerButtonBar">\n    <ul class="headerButtonList">\n      <li>\n        <a id="foxxToggle" class="headerButton">\n          <span class="icon_arangodb_settings2" title="Settings"></span>\n        </a>\n      </li>\n    </ul>\n  </div>\n</div>\n\n<div id="foxxDropdownOut" class="headerDropdown">\n  <div id="foxxDropdown" class="dropdownInner">\n    <ul>\n      <li class="nav-header">Type</li>\n      <li><a href="#services">\n        <label class="checkbox checkboxLabel">\n          <input class="css-checkbox" type="checkbox" id="checkProduction"/>\n          <i class="fa"></i>\n          Production\n        </label>\n      </a></li>\n\n      <li><a href="#services">\n        <label class="checkbox checkboxLabel">\n          <input class="css-checkbox" type="checkbox" id="checkDevel"/>\n          <i class="fa"></i>\n          Development\n        </label>\n      </a></li>\n\n      <li><a href="#services">\n        <label class="checkbox checkboxLabel">\n          <input class="css-checkbox" id="checkSystem" type="checkbox"/>\n          <i class="fa"></i>\n          System Services\n        </label>\n      </a></li>\n    </ul>\n  </div>\n</div>\n\n<div class="contentDiv">\n  <div id="installed">\n    <div id="installedList" class="tileList pure-u">\n      <div class="tile pure-u-1-1 pure-u-sm-1-2 pure-u-md-1-3 pure-u-lg-1-4 pure-u-xl-1-5">\n        <div class="fullBorderBox">\n          <a id="addApp" class="add"><span class="pull-left add-Icon"><i class="fa fa-plus-circle"></i>\n</span> Add Service</a>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='  <div id="applierContent" class="innerContent applierContent replicationContent">\n    <div class="repl-applier">\n\n      ',_.each(data,(function(e,t){__p+='\n\n        <div class="categoryBar">\n          <h4 style="text-transform: capitalize;">'+(null==(__t=t)?"":__t)+'</h4>\n        </div>\n\n          <table id="applier-'+(null==(__t=t)?"":__t)+'" class="pure-table">\n            <tbody>\n              ',"string"===typeof e?__p+="\n                <tr>\n                  <td>"+(null==(__t=t)?"":__t)+"</td>\n                  <td>"+(null==(__t=e)?"":__t)+"</td>\n                </tr>\n              ":(__p+="\n                ",_.each(e,(function(e,t){__p+="\n                  <tr>\n                    <td>"+(null==(__t=t)?"":__t)+"</td>\n\n                    <td>\n                      ","string"!==typeof e&&"number"!==typeof e&&"boolean"!==typeof e?(__p+="\n                        <table>\n                          <tbody>\n                            ",_.each(e,(function(e,t){__p+="\n                              <tr>\n                                <td>"+(null==(__t=t)?"":__t)+"</td>\n                                <td>"+(null==(__t=e)?"":__t)+"</td>\n                              </tr>\n                            "})),__p+="\n                          <tbody>\n                        </table>\n                      "):__p+="\n                        "+(null==(__t=e)?"":__t)+"\n                      ",__p+="\n                    </td>\n\n                  </tr>\n                "})),__p+="\n              "),__p+="\n            </tbody>\n          </table>\n\n      "})),__p+="\n\n    </div>\n  </div>\n";return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="arango-tabbar" id="'+(null==(__t=content.id)?"":__t)+'">\n  ',_.each(content.titles,(function(e,t){__p+="\n  ";var i=content.titles[t][0];__p+="\n  ";var n=content.titles[t][1];__p+='\n  <button class="arangodb-tabbar" id="'+(null==(__t=n)?"":__t)+'">'+(null==(__t=i)?"":__t)+"</button>\n  "})),__p+="\n</div>\n";return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+='  <div class="tableWrapper">\n    ';var type=type;__p+='\n    <table class="arango-table" id="'+(null==(__t=content.id)?"":__t)+'">\n      <thead>\n        <tr>\n          ';var hcounter=0;if(__p+="\n          ",_.each(content.titles,(function(e){__p+='\n            <th class="arango-table-th table-cell'+(null==(__t=hcounter)?"":__t)+'">'+(null==(__t=e)?"":__t)+"</th>\n          ",hcounter++})),__p+="\n        </tr>\n      </thead>\n      <tbody>\n        ",_.each(content.rows,(function(e){var t=0;__p+="\n          <tr>\n            ",_.each(e,(function(e){__p+="\n              ",type&&"pre"===type[t]?__p+='\n                <td class="arango-table-td table-cell'+(null==(__t=t)?"":__t)+'">\n                  <pre class="tablePre">'+(null==(__t=content.unescaped&&content.unescaped[t]?e:_.escape(e))?"":__t)+"</pre>\n                </td>\n              ":__p+='\n                <td class="arango-table-td table-cell'+(null==(__t=t)?"":__t)+'">'+(null==(__t=content.unescaped&&content.unescaped[t]?e:_.escape(e))?"":__t)+"</td>\n              ",__p+="\n            ",t++})),__p+="\n          </tr>\n        "})),__p+="\n\n        ",0===content.rows.length){__p+="\n          <tr>\n            ";var xcounter=0;__p+="\n            ",_.each(content.titles,(function(e){__p+="\n              ",__p+=0===xcounter?"\n                <td>No content.</td>\n              ":"\n                <td></td>\n              ",__p+="\n            ",xcounter++})),__p+="\n          </tr>\n        "}__p+="\n      </tbody>\n    </table>\n  </div>\n"}return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='\n  <div class="headerBar" style="margin-top: -60px">\n    <div class="headerButtonBar">\n      <ul class="headerButtonList">\n      </ul>\n    </div>\n  </div>\n\n  <div id="clusterContent" class="innerContent">\n\n    <div class="pure-g cluster-values">\n\n      <div class="pure-u-1-2 pure-u-md-1-4">\n        <div class="valueWrapper">\n          <div id="clusterCoordinators" class="value"><i class="fa fa-spin fa-circle-o-notch" style="color: rgba(0, 0, 0, 0.64);"></i></div>\n          <div class="graphLabel">coordinators</div>\n        </div>\n      </div>\n\n      <div class="pure-u-1-2 pure-u-md-1-4">\n        <div class="valueWrapper">\n          <div id="clusterDBServers" class="value"><i class="fa fa-spin fa-circle-o-notch" style="color: rgba(0, 0, 0, 0.64);"></i></div>\n          <div class="graphLabel">DB Servers</div>\n        </div>\n      </div>\n\n      <div class="pure-u-1-2 pure-u-md-1-4">\n        <div class="valueWrapper">\n          <div id="clusterRam" class="value"><i class="fa fa-spin fa-circle-o-notch" style="color: rgba(0, 0, 0, 0.64);"></i></div>\n          <div class="graphLabel">RAM</div>\n        </div>\n      </div>\n\n      <div class="pure-u-1-2 pure-u-md-1-4">\n        <div class="valueWrapper">\n          <div id="clusterConnections" class="value"><i class="fa fa-spin fa-circle-o-notch" style="color: rgba(0, 0, 0, 0.64);"></i></div>\n          <div class="graphLabel">Connections</div>\n        </div>\n      </div>\n\n    </div>\n\n\n    <div class="pure-g cluster-graphs">\n\n      <div class="pure-u-1-1 pure-u-md-24-24 pure-u-lg-12-24">\n        <div class="graphWrapper">\n          <div id=\'clusterData\'></div>\n          <div class="graphLabel">DATA</div>\n        </div>\n      </div>\n\n      <div class="pure-u-1-1 pure-u-md-12-24 pure-u-lg-6-24">\n        <div class="graphWrapper">\n          <div id=\'clusterHttp\'></div>\n          <div class="graphLabel">HTTP</div>\n        </div>\n      </div>\n\n      <div class="pure-u-1-1 pure-u-md-12-24 pure-u-lg-6-24">\n        <div class="graphWrapper">\n          <div id=\'clusterAverage\'></div>\n          <div class="graphLabel">AVG Request Time</div>\n        </div>\n      </div>\n\n    </div>\n\n  </div>\n\n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="paddingBox">\n  <div class="borderBox"></div>\n  <i class="collection-type-icon fa '+(null==(__t=model.get("picture"))?"":__t)+'"></i>\n  <div class="tileBadge">\n    <span>\n    ',model.get("desc")?__p+='\n      <div class="corneredBadge inProgress">\n        '+(null==(__t=model.get("desc"))?"":__t)+"\n      </div>\n    ":"corrupted"===model.get("status")?__p+='\n      <div class="corneredBadge '+(null==(__t=model.get("status"))?"":__t)+'">\n        '+(null==(__t=model.get("status"))?"":__t)+"\n      </div>\n    ":"loaded"!==model.get("status")&&"unloaded"!==model.get("status")&&"loading"!==model.get("status")&&"unloading"!==model.get("status")||(__p+="\n      ",model.get("locked")||"loading"===model.get("status")||"unloading"===model.get("status")?("loading"===model.get("status")||model.get("status"),__p+='\n        <div class="corneredBadge inProgress">\n          '+(null==(__t=model.get("status"))?"":__t)+"\n        </div>\n      "):__p+='\n        <div class="corneredBadge '+(null==(__t=model.get("status"))?"":__t)+'">\n          '+(null==(__t=model.get("status"))?"":__t)+"\n        </div>\n      ",__p+="\n    "),__p+="\n    </span>\n  </div>\n\n  ","index"===model.get("lockType")?__p+='\n    \x3c!-- <progress max="100" value="80"></progress>--\x3e\n    <h5 class="collectionName">'+(null==(__t=model.get("name"))?"":__t)+"</h5>\n  ":__p+='\n    <h5 class="collectionName">'+(null==(__t=model.get("name"))?"":__t)+"</h5>\n  ",__p+="\n</div>\n";return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='  <div class="headerBar">\n    <div class="search-field">\n      <input type="text" id="searchInput" class="search-input" placeholder="Search..."/>\n      \x3c!-- <img id="searchSubmit" class="search-submit-icon"/> --\x3e\n      <i id="searchSubmit" class="fa fa-search"></i>\n    </div>\n    <div class="headerButtonBar">\n      <ul class="headerButtonList">\n        <li class="enabled">\n          <a id="collectionsToggle" class="headerButton">\n            <span class="icon_arangodb_settings2" title="Settings"></span>\n          </a>\n        </li>\n      </ul>\n    </div>\n\n  </div>\n\n\n  <div id="collectionsDropdown2" class="headerDropdown">\n\n    <div id="collectionsDropdown" class="dropdownInner">\n\n      <ul>\n        <li class="nav-header">Type</li>\n        <li><a>\n          <label class="checkbox checkboxLabel">\n            <input class="css-checkbox checkSystemCollections" type="checkbox">\n            <i class="fa"></i>\n            System\n          </label>\n        </a></li>\n\n        <li><a>\n          <label class="checkbox checkboxLabel">\n            <input class="css-checkbox" type="checkbox" id="checkDocument">\n            <i class="fa"></i>\n            Document\n          </label>\n        </a></li>\n\n        <li><a>\n          <label class="checkbox checkboxLabel">\n            <input class="css-checkbox" type="checkbox" id="checkEdge">\n            <i class="fa"></i>\n            Edge\n          </label>\n        </a></li>\n\n        </li>\n      </ul>\n\n      <ul>\n        <li class="nav-header">Status</li>\n\n        <li><a href="#">\n          <label class="checkbox checkboxLabel">\n            <input class="css-checkbox" type="checkbox" id="checkLoaded">\n            <i class="fa"></i>\n            Loaded\n          </label>\n        </a></li>\n\n        <li><a href="#">\n          <label class="checkbox checkboxLabel">\n            <input class="css-checkbox" type="checkbox" id="checkUnloaded">\n            <i class="fa"></i>\n            Unloaded\n          </label>\n        </a></li>\n\n      </ul>\n      <ul>\n        <li class="nav-header">Sorting</li>\n\n        <li><a href="#">\n          <label class="checkbox checkboxLabel">\n            <input class="css-checkbox" type="checkbox" id="sortName">\n            <i class="fa css-round-label"></i>\n            Sort by name\n          </label>\n        </a></li>\n\n        <li><a href="#">\n          <label class="checkbox checkboxLabel">\n            <input class="css-checkbox" type="checkbox" id="sortType">\n            <i class="fa css-round-label"></i>\n            Sort by type\n          </label>\n        </a></li>\n\n        <li><a href="#">\n          <label class="checkbox checkboxLabel">\n            <input class="css-checkbox" type="checkbox" id="sortOrder">\n            <i class="fa"></i>\n            Sort descending\n          </label>\n        </a></li>\n      </ul>\n    </div>\n\n  </div>\n\n  <div class="contentDiv" id="arangoCollectionsContainer">\n      <div id="collectionsThumbnailsIn" class="tileList pure-g">\n        <div class="tile pure-u-1-1 pure-u-sm-1-2 pure-u-md-1-3 pure-u-lg-1-4 pure-u-xl-1-6">\n          <div class="fullBorderBox">\n            <a id="createCollection" class="add"><span id="newCollection" class="pull-left add-Icon"><i class="fa fa-plus-circle"></i>\n</span> Add Collection</a>\n          </div>\n        </div>\n      </div>\n  </div>\n\n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="  ";var subBar=function(e){__p+='\n    <div class="dashboard-sub-bar">\n      <div  class="dashboard-sub-bar-title">'+(null==(__t=e)?"":__t)+"</div>\n    </div>\n  "},enlargeButton=function(e,t){t&&(__p+='\n      <div class="dashboard-sub-bar-menu">\n        <i class="fa fa-arrows-alt dashboard-sub-bar-menu-sign" id="'+(null==(__t=e)?"":__t)+'Button"></i>\n      </div>\n    ')};__p+="\n\n  ";var largeChart=function(e,t,i){__p+='\n    <div class="dashboard-large-chart pure-u-1-1 pure-u-sm-1-1 pure-u-md-2-3">\n      ',enlargeButton(e,!0),__p+='\n      <div class="dashboard-large-chart-inner dashboard-chart" id="'+(null==(__t=e)?"":__t)+'Container">\n        <div class="dashboard-legend">\n          <div class="dashboard-legend-inner" id="'+(null==(__t=e)?"":__t)+'Legend"></div>\n        </div>\n        <div id="'+(null==(__t=e)?"":__t)+'" class="dashboard-interior-chart"></div>\n      </div>\n      ',subBar(t),__p+="\n    </div>\n  "};__p+="\n\n  ";var mediumChart=function(e,t,i){__p+='\n    <div class="dashboard-medium-chart-outer pure-u-1-1 pure-u-sm-1-1 pure-u-md-1-2">\n      <div class="dashboard-medium-chart">\n        ',enlargeButton(e,!0),__p+='\n          <div class="dashboard-legend">\n            <div class="dashboard-legend-inner" id="'+(null==(__t=e)?"":__t)+'Legend"></div>\n          </div>\n        <div class="dashboard-medium-chart-inner dashboard-chart" id="'+(null==(__t=e)?"":__t)+'Container">\n          <div id="'+(null==(__t=e)?"":__t)+'" class="dashboard-interior-chart"></div>\n        </div>\n        ',subBar(t),__p+="\n      </div>\n    </div>\n  "};__p+="\n\n  ";var smallChart=function(e,t,i){__p+='\n    <div class="dashboard-small-chart pure-u-1-1 pure-u-sm-1-1 pure-u-md-1-3">\n      ',enlargeButton(e,i),__p+='\n      <div class="dashboard-small-chart-inner dashboard-chart" id="'+(null==(__t=e)?"":__t)+'Container">\n        <div id="'+(null==(__t=e)?"":__t)+'" class="dashboard-interior-chart">\n          <svg></svg>\n        </div>\n      </div>\n      ',subBar(t),__p+="\n    </div>\n  "};__p+="\n\n  ";var tendency=function(e,t,i){__p+='\n    <div class="dashboard-tendency-container pure-u-1-1 pure-u-sm-1-1 pure-u-md-1-3">\n      <div class="dashboard-tendency-chart">\n        ',enlargeButton(t,i),__p+='\n        <div class="dashboard-tendency">\n          ',__p+="asyncRequests"===t?'\n            <div class="dashboard-subtitle-bar">sync</div>\n            <div class="dashboard-figure">\n              <span id="syncPerSecondCurrent"></span>\n          ':'\n            <div class="dashboard-subtitle-bar">current</div>\n            <div class="dashboard-figure">\n              <span id="'+(null==(__t=t)?"":__t)+'Current"></span>\n          ',__p+='\n          </div>\n        </div>\n        <div class="dashboard-tendency">\n          ',__p+="asyncRequests"===t?'\n            <div class="dashboard-subtitle-bar">async</div>\n            <div class="dashboard-figure">\n              <span id="asyncPerSecondCurrent"></span>\n          ':'\n            <div class="dashboard-subtitle-bar">15-min-avg</div>\n            <div class="dashboard-figure">\n              <span id="'+(null==(__t=t)?"":__t)+'Average"></span>\n          ',__p+='\n          </div>\n        </div>\n      </div>\n      <div class="dashboard-sub-bar">'+(null==(__t=e)?"":__t)+"</div>\n    </div>\n  "};__p+='\n\n  <ul class="subMenuEntries subViewNavbar">\n    <li id="requests-statistics" class="subMenuEntry active"><a>Request Statistics</a></li>\n    <li id="system-statistics" class="subMenuEntry "><a>System Resources</a></li>\n  </ul>\n\n  <div id="requests">\n    <div class="contentDiv">\n      <div class="dashboard-row pure-u cluster-values" id="node-info" style="width: 100%; margin-top: 0; padding-right: 2px; box-sizing: border-box;">\n      </div>\n\n      ',!0!==hideStatistics&&(__p+='\n        <div class="dashboard-row pure-u">\n          ',largeChart("requestsChart","Requests per Second"),__p+="\n\n          ",tendency("Request Types","asyncRequests",!1),__p+="\n          ",tendency("Number of Client Connections","clientConnections",!1),__p+='\n        </div>\n        \n        <div class="dashboard-row pure-u small-label-padding">\n          ',largeChart("dataTransferChart","Transfer Size per Second"),__p+="\n          ",smallChart("dataTransferDistribution","Transfer Size per Second (distribution)",!1),__p+='\n        </div>\n        \n        <div class="dashboard-row pure-u small-label-padding">\n          ',largeChart("totalTimeChart","Average Request Time (seconds)"),__p+="\n          ",smallChart("totalTimeDistribution","Average Request Time (distribution)",!1),__p+="\n        </div>\n      </div>\n    "),__p+='\n  </div>\n\n  <div id="system" class="tendency-box-sizing" style="display: none";>\n\n    <div class="dashboard-row pure-u" style="width: 100%;">\n      ',tendency("Number of threads","numberOfThreads",!1),__p+='\n\n      <div class="dashboard-bar-chart-container pure-u-1-1 pure-u-sm-1-1 pure-u-md-1-3">\n        <div class="dashboard-bar-chart">\n          <div class="dashboard-bar-chart-title">\n            <div class="percentage"></div>\n            <div class="absolut"></div>\n          </div>\n          <div class="dashboard-bar-chart-chart" id="residentSizeChartContainer">\n            <div id="residentSizeChart">\n              <svg></svg>\n            </div>\n          </div>\n        </div>\n        <div class="dashboard-sub-bar"">Memory</div>\n      </div>\n\n      ',tendency("Virtual Size in GB","virtualSize",!1),__p+='\n    </div>\n    <div class="dashboard-row pure-u" style="width: 100%">\n      ',mediumChart("pageFaultsChart","Major Page Faults"),__p+="\n      ",mediumChart("systemUserTimeChart","Used CPU Time per Second"),__p+="\n    </div>\n\n  </div>\n\n"}return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='  <div class="headerBar">\n    <div class="search-field">\n      <input type="text" value="'+(null==(__t=searchString)?"":__t)+'" id="databaseSearchInput" class="search-input" placeholder="Search..."/>\n      \x3c!-- <img id="databaseSearchSubmit" class="search-submit-icon">--\x3e\n      <i id="databaseSearchSubmit" class="fa fa-search"></i>\n    </div>\n    <div class="headerButtonBar">\n        <ul class="headerButtonList">\n          <li class="enabled">\n            <a id="databaseToggle" class="headerButton">\n              <span class="icon_arangodb_settings2" title="Settings"></span>\n            </a>\n          </li>\n        </ul>\n      </div>\n\n  </div>\n\n\n  <div id="databaseDropdown2" class="headerDropdown">\n\n    <div id="databaseDropdown" class="dropdownInner">\n      <ul>\n        <li class="nav-header">Sorting</li>\n        <li><a>\n          <label class="checkbox checkboxLabel">\n            <input class="css-checkbox" type="checkbox" id="dbSortDesc">\n            <i class="fa"></i>\n            Sort descending\n          </label>\n        </a></li>\n      </ul>\n    </div>\n\n  </div>\n\n\n  <div class="contentDiv" id="userManagementView">\n    <div class="tileList pure-u">\n      <div class="tile pure-u-1-1 pure-u-sm-1-2 pure-u-md-1-3 pure-u-lg-1-4 pure-u-xl-1-6">\n        <div class="fullBorderBox">\n          <a href="#" id="createDatabase" class="add">\n            <span id="newDatabase" class="pull-left add-Icon"><i class="fa fa-plus-circle"></i></span>\n            Add Database\n          </a>\n        </div>\n      </div>\n      ',collection.forEach((function(e){var t=e.get("name");__p+="\n\n      ","_system"!==t&&(__p+='\n        <div class="tile pure-u-1-1 pure-u-sm-1-2 pure-u-md-1-3 pure-u-lg-1-4 pure-u-xl-1-6 defaultCursor">\n          <div class="fullBorderBox" style="border: 0;">\n            <div class="borderBox"></div>\n            <div class="iconSet">\n              ',readOnly||(__p+='\n                <span class="icon_arangodb_settings2 editDatabase" id="'+(null==(__t=t)?"":__t)+'_edit-database" alt="Edit database" title="Edit database"></span>\n              '),__p+='\n            </div>\n            <i class="collection-type-icon fa fa-database defaultCursor"></i>\n            <div class="tileBadge">\n            </div>\n            <h5 class="collectionName" style="margin-left: 0; margin-right: 0;">'+(null==(__t=t)?"":__t)+"</h5>\n          </div>\n        </div>\n      "),__p+="\n\n      "})),__p+="\n     </div>\n  </div>\n\n";return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<a href="#" class="tab disabled" id="dbselection"><div class="dbselection"><i class="fa fa-database"></i><span class="db-name">DB: </span> '+(null==(__t=current)?"":__t)+'\n\x3c!-- <i class="fa fa-caret-square-o-down"></i> --\x3e\n</div>\n\x3c!-- <b class="caret"></b> --\x3e\n</a>\n\n\x3c!--\n<ul class="link-dropdown-menu" id="dbs_dropdown">\n',list.length>0&&(__p+='\n    <li class="dropdown-header">Databases</li>\n  ',_.each(list,(function(e){__p+='\n    <li class="dropdown-item">\n        <a id='+(null==(__t=e)?"":__t)+' class="dbSelectionLink tab" href="#">'+(null==(__t=e)?"":__t)+"</a>\n    </li>\n  "})),__p+="\n"),__p+="\n    ","_system"===current&&(__p+="\n    ",list.length>=2&&(__p+='\n      <li class="divider"></li>\n    '),__p+='\n    <li class="dropdown-header">Manager</li>\n    <li id="databaseNavi" class="dropdown-item">\n      <a id="databases" class="tab" href="#databases">Manage Databases</a>\n    </li>\n    '),__p+="\n</ul>\n--\x3e\n";return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='\n  <div class="headerBar">\n    <div class="headerButtonBar">\n      <ul class="headerButtonList">\n        <li class="enabled">\n          <a id="addDocument" class="headerButton">\n            <span title="Add new document">\n              <i class="fa fa-file fa-stack-1x"></i>\n              <i class="fa fa-plus fa-stack-1x fa-top"></i>\n            </span>\n          </a>\n        </li>\n      </ul>\n    </div>\n\n  </div>\n\n  <div class="innerContent document-info-div">\n\n    <div class="document-info">\n\n      <div class="document-type-container">\n        <div id="document-type" class="document-bold-font"></div>\n        <div id="document-id" class="document-thin-font"></div>\n      </div>\n\n      <div class="document-info-container">\n\n        <div class="document-inner-info-container">\n          <div class="document-attribute">\n            <div class="document-bold-font">_rev:</div>\n            <div id="document-rev" class="document-thin-font"></div>\n          </div>\n          <div class="document-attribute">\n            <div class="document-bold-font">_key:</div>\n            <div id="document-key" class="document-thin-font"></div>\n          </div>\n        </div>\n\n        <div class="document-inner-info-container edge-info-container">\n          <div class="document-attribute">\n            <div class="document-bold-font">_from:</div>\n            <div id="document-from" class="document-thin-font document-link"></div>\n          </div>\n          <div class="document-attribute">\n            <div class="document-bold-font">_to:</div>\n            <div id="document-to" class="document-thin-font document-link"></div>\n          </div>\n        </div>\n\n        <div class="document-inner-info-container edge-edit-container">\n          <div id="edit-from" class="document-attribute">\n            <i class="fa fa-edit"></i>\n            <i class="fa fa-check" style="display: none"></i>\n            <i class="fa fa-times" style="display: none"></i>\n          </div>\n          <div id="edit-to" class="document-attribute">\n            <i class="fa fa-edit"></i>\n            <i class="fa fa-check" style="display: none"></i>\n            <i class="fa fa-times" style="display: none"></i>\n          </div>\n        </div>\n\n      </div>\n\n    </div>\n\n  </div>\n\n  <div id="tableDiv" class="innerContent document-content-div">\n\n    <div id="documentEditor" class="document-editor"></div>\n    <div class="bottomButtonBar">\n      <button id="saveDocumentButton" class="button-success pull-right">Save</button>\n      <button id="deleteDocumentButton" class="button-danger pull-right">Delete</button>\n    </div>\n    <div class="pull-left shortcuts showHotkeyHelp"></div>\n\t</div>\n\n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div id="transparentHeader" class="headerBar marginTop5">\n\n  <div id="documentsToolbar" class="headerButtonBar">\n\n  \x3c!-- remove marker for docupdiv--\x3e\n  <ul class="headerButtonList">\n    \x3c!-- Mark: removed prev/next collection button\n    <li class="enabled">\n      <a id="collectionNext" class="headerButton">\n        <span class="icon_arangodb_arrowright" title="Next collection"></span>\n      </a>\n    </li>\n    <li class="enabled">\n      <a id="collectionPrev" class="headerButton collection-pagination">\n        <span class="icon_arangodb_arrowleft" title="Previous collection"></span>\n      </a>\n    </li>\n    --\x3e\n    <li class="enabled">\n        <select id="documentSize" class="documents-size">\n          <option value="10" selected="">10 results</option>\n          <option value="20">20 results</option>\n          <option value="50">50 results</option>\n          <option value="100">100 results</option>\n          <option value="500">500 results</option>\n          <option value="1000">1000 results</option>\n          <option value="2500">2500 results</option>\n          <option value="5000">5000 results</option>\n          <option value="all">All results</option>\n        </select>\n      </a>\n    <li class="enabled">\n      <a id="markDocuments" class="headerButton">\n        <span title="Edit documents"><i class="fa fa-hand-pointer-o"></i></span>\n      </a>\n    </li>\n    <li class="enabled">\n      <a id="importCollection" class="headerButton">\n        <span title="Upload documents from JSON file"><i class="fa fa-upload"></i></span>\n      </a>\n    </li>\n    <li class="enabled">\n      <a id="exportCollection" class="headerButton">\n        <span title="Download documents as JSON file"><i class="fa fa-download" style="margin-top: 1px;"></i></span>\n      </a>\n    </li>\n    <li class="enabled" style="margin-right: 15px">\n      <a id="filterCollection" class="headerButton">\n        <span title="Filter collection"><i class="fa fa-filter"></i></span>\n      </a>\n    </li>\n  </ul>\n\n  </div>\n</div>\n\n<div class="arangoDropdown documentsDropdown">\n  <div id="filterHeader" class="headerDropdown">\n     <div style="float: right;">\n       <button id="resetView" class="button-warning btn-old-padding">Reset</button>\n       <button id="filterSend" class="button-success btn-old-padding">Filter</button>\n       <input type="text" id="docsSort" style="float: right" placeholder="Sort by attribute"></input>\n    </div>\n    <div class="queryline querylineAdd">\n       <input id="attribute_name0" type="text" placeholder="Attribute name"><select name="operator" id="operator0" class="filterSelect">\n           <option value="==">==</option>\n           <option value="!=">!=</option>\n           <option value="&lt;">&lt;</option>\n           <option value="&lt;=">&lt;=</option>\n           <option value="&gt;">&gt;</option>\n           <option value="&gt;=">&gt;=</option>\n           <option value="LIKE">LIKE</option>\n           <option value="IN">IN</option>\n           <option value="NOT IN">NOT IN</option>\n           <option value="=~">REGEX</option>\n       </select><input id="attribute_value0" type="text" placeholder="Attribute value" class="filterValue">\n       <a id="addFilterItem" class="add-filter-item"><i class="fa fa-plus-circle"></i></a>\n     </div>\n  </div>\n\n  <div id="importHeader" class="dropdownImport">\n    <div class="queryline">\n      <input id="importDocuments" name="importDocuments" type="file" accept="application/json" />\n      <button id="confirmDocImport" class="button-success btn-old-padding" style="float:right" disabled>\n        <span class="upload-indicator"><i id="uploadIndicator" class="fa fa-circle-o-notch fa-spin fa-fw"></i></span>Import JSON\n      </button>\n      <div title=\'Example input data:<br /><br /> I. Line-wise: <br /> { "_key": "key1", ... } <br /> { "_key": "key2", ... } <br /><br /> or <br /><br /> II. JSON documents embedded into a list: <br /> [ <br /> &nbsp; { "_key": "key1", ... }, <br /> &nbsp; { "_key": "key2", ... }, <br /> &nbsp; ... <br /> ]\' class="upload-info" style="float:left; margin-top:7px; margin-right: 10px;"><i style="font-size: 13pt;" class="fa fa-info-circle"></i></div>\n    </div>\n  </div>\n\n  <div id="exportHeader" class="headerDropdown">\n    <div class="queryline">\n      <div style="float:left; margin-top:7px"><i class="fa fa-exclamation-circle"></i>Please be careful. If no filter is set, the whole collection will be downloaded.</div>\n      <button id="exportDocuments" class="button-success btn-old-padding" style="float:right">Download JSON</button>\n    </div>\n  </div>\n\n  <div id="editHeader" class="dropdownImport">\n    <div class="queryline">\n      <div style="float:left; margin-top:5px"><div style="float:left" class="selectedCount">0</div> &nbsp; document(s) selected</div>\n      <button id="deleteSelected" class="button-neutral btn-old-padding" style="float:right">Delete</button>\n      <button id="moveSelected" class="button-neutral btn-old-padding" style="float:right">Move</button>\n    </div>\n  </div>\n\n</div>\n\n<div id="documentsDiv" class="innerContent">\n\n<div id="uploadMessages"></div>\n\n<div id="docPureTable">\n\n</div>\n\n\x3c!--\n<div id="documentsTableID_wrapper" class="dataTables_wrapper" role="grid">\n  <table class="display arangoDataTable dataTable" id="documentsTableID">\n  </table>\n</div>\n--\x3e\n\n    <div id="documentsToolbarFL">\n      <div id="documentsToolbarF" class="pagination-line">\n      </div>\n    </div>\n\n\x3c!-- Delete Modal --\x3e\n<div id="docDeleteModal" style="display:none" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n  <div class="modal-header">\n    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">\xd7</button>\n    <a class="arangoHeader">Delete Document?</a>\n  </div>\n  <div class="modal-body" id="deleteDoc">\n    <p style="padding: 20px;">There is no way back\u2026</p>\n  </div>\n  <div class="modal-footer">\n    <button class="button-close" data-dismiss="modal" aria-hidden="true">Close</button>\n    <button id="confirmDeleteBtn" class="button-danger" style="float:right" disabled="true">Delete</button>\n  </div>\n</div>\n\n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='  <tr class="tableRow" id="row_newEdgeDefinitions'+(null==(__t=number)?"":__t)+'">\n    <th class="collectionTh">Edge definitions*:</th>\n    <th class="collectionTh">\n      <input type="hidden" id="newEdgeDefinitions'+(null==(__t=number)?"":__t)+'" value="" placeholder="Edge definitions" tabindex="-1" class="select2-offscreen">\n      <button id="remove_newEdgeDefinitions'+(null==(__t=number)?"":__t)+'" class="graphViewer-icon-button gv_internal_remove_line gv-icon-small delete"></button>\n    </th><th>\n    <span class="modalTooltips arangoicon icon_arangodb_info" title="An edge definition defines a relation of the graph">\n    </span>\n    </th>\n  </tr>\n  <tr class="tableRow" id="row_fromCollections'+(null==(__t=number)?"":__t)+'">\n    <th class="collectionTh">fromCollections*:</th>\n    <th class="collectionTh">\n      <input type="hidden" id="fromCollections'+(null==(__t=number)?"":__t)+'" value="" placeholder="fromCollections" tabindex="-1" class="select2-offscreen">\n    </th><th>\n    <span class="modalTooltips arangoicon icon_arangodb_info" title="The collection that contain the start vertices of the relation.">\n    </span>\n  </th>\n  </tr>\n  <tr class="tableRow" id="row_toCollections'+(null==(__t=number)?"":__t)+'">\n    <th class="collectionTh">toCollections*:</th>\n    <th class="collectionTh">\n      <input type="hidden" id="toCollections'+(null==(__t=number)?"":__t)+'" value="" placeholder="toCollections" tabindex="-1" class="select2-offscreen">\n    </th><th>\n    <span class="modalTooltips arangoicon icon_arangodb_info" title="The collection that contain the end vertices of the relation.">\n    </span>\n  </th>\n  </tr>\n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<td class="writable sorting_1">\n  ',isReadOnly?__p+='\n    <span class="key">'+(null==(__t=key)?"":__t)+"</span>\n  ":__p+='\n    <input type="text" class="key" placeholder="attribute" '+(null==(__t=key?"value="+key:"")?"":__t)+"></input>\n  ",__p+='\n</td>\n<td class="writeable rightCell">\n  ',isReadOnly?__p+='\n    <span class="val">'+(null==(__t=value)?"":__t)+"</span>\n  ":__p+='\n    <textarea class="val" placeholder="value">'+(null==(__t=value||"")?"":__t)+"</textarea>\n  ",__p+='\n</td>\n</td>\n<td class="leftCell">\n  <a class="deleteAttribute">\n    <span class="icon_arangodb_roundminus" data-original-title="Delete attribute"></span>\n  </a>\n</td>\n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){var cssClass;__p+='\n<div class="filterSelectBox">\n  <div class="filterLabel">'+(null==(__t=name)?"":__t)+'<span><i class="fa fa-close" id="closeFilter"></i></span></div>\n\n  <div class="filterInput">\n    <input type="text" id="'+(null==(__t=name)?"":__t)+'-filter" placeholder="Filter '+(null==(__t=name)?"":__t)+'" aria-label="Filter labels" autocomplete="off">\n  </div>\n\n  <div class="filterOptions">\n    <div id="showAll"><strong>Show all</strong></div>\n    ',__p+="\n    ",_.each(options,(function(e){__p+="\n      ",e.active?(__p+="\n      ",cssClass="active",__p+="\n      "):(__p+=" \n      ",cssClass="inactive",__p+="\n      "),__p+='\n      <div class="'+(null==(__t=cssClass)?"":__t)+'" name="'+(null==(__t=e.name)?"":__t)+'" id="'+(null==(__t=e.name)?"":__t)+'-option">\n        ';var t=e.color||"#f6f8fa";__p+="\n     \n        ",__p+="active"===cssClass?'\n          <span class="marked"><i class="fa fa-check"></i></span>\n        ':'\n          <span style="visibility: hidden;" class="marked"><i class="fa fa-check"></i></span>\n        ',__p+='\n\n        <span class="color" style="background-color: '+(null==(__t=t)?"":__t)+'">&nbsp;</span>\n        <span class="name">'+(null==(__t=e.name)?"":__t)+"</span>\n      </div>\n    "})),__p+="\n  </div>\n\n</div>\n\n"}return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){var n,v,db;__p+="",name&&(n=name||"",v=version||""),__p+='\n<div class="footer-left">\n\x3c!--\n  <div class="social-icons">\n    <p><a href="https://twitter.com/arangodb" target="_blank"><i class="fa fa-twitter"></i></a></p>\n    <p><a href="https://www.arangodb.com/community" target="_blank"></a><i class="fa fa-envelope"></i></a></p>\n    <p><a href="https://stackoverflow.com/questions/tagged/arangodb" target="_blank"></a><i class="fa fa-stack-overflow"></i></a></p>\n    <p><a href="https://groups.google.com/group/arangodb" target="_blank"></a><i class="fa fa-google"></i></a></p>\n  </div>\n--\x3e\n</div>\n\n<div class="footer-center">\n  <p>Help <i class="fa fa-keyboard-o"></i></p>\n</div>\n\n<div class="footer-right">\n  <p>',n&&(__p+="<a>"+(null==(__t=n)?"":__t)+" "+(null==(__t=v)?"":__t)+" "),__p+="</a></p>\n</div>\n"}return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='  <div class="paddingBox">\n    <div class="foxxDesc">\n      <p><span class="foxxMount">'+(null==(__t=model.get("mount"))?"":__t)+'</span></p>\n      <p><span class="foxxName">'+(null==(__t=model.get("name"))?"":__t)+'</span></p>\n      <p><span class="foxxName">'+(null==(__t=model.get("version"))?"":__t)+'</span></p>\n      \x3c!--<p><span class="foxxCategory">'+(null==(__t=model.get("category"))?"":__t)+'</span></p>--\x3e\n    </div>\n    \x3c!-- <div class="foxxActions"><button class="installFoxx button-success" appId="'+(null==(__t=model.name)?"":__t)+'" appVersion="'+(null==(__t=model.latestVersion)?"":__t)+'" >Interface</button></div>--\x3e\n    <div class="borderBox"></div>\n    <img src="'+(null==(__t=model.thumbnailUrl)?"":__t)+'" height="50" width="50" alt="Icon for Service" class="icon">\n    ',model.isDevelopment()?__p+='\n      <div class="tileBadge">\n        <span>\n          <div class="corneredBadge development">\n            Development\n          </div>\n        </span>\n      </div>\n    ':__p+='\n      <div class="tileBadge">\n        <span>\n          <div class="corneredBadge production">\n            Production\n          </div>\n        </span>\n      </div>\n    ',__p+="\n  </div>\n";return __p}},function(module,exports,__webpack_require__){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var appInfos=attributes.app.split(":");__p+='\n<div id="change-foxx" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display:none">\n  <div class="modal-header">\n    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">\xd7</button>\n    <a class="arangoHeader">Modify Service</a>\n  </div>\n  <div class="modal-body">\n    <table>\n      <tr>\n        <th class="collectionTh">Name:</th>\n        <th class="collectionTh"><strong>'+(null==(__t=appInfos[1])?"":__t)+'</strong></th>\n      </tr>\n      <tr>\n        <th class="collectionTh">Documentation:</th>\n        <th class="collectionTh">'+(null==(__t=documentationJsonUrl)?"":__t)+'</th>\n      </tr>\n      <tr>\n        <th class="collectionTh">Mount:</th>\n        <th class="collectionTh"><input type="text" id="change-mount-point" name="mountpoint" value="'+(null==(__t=attributes.mount)?"":__t)+'"/></th>\n        <th><span class="modalTooltips arangoicon icon_arangodb_info" title="The path where the app can be reached."></span></th>\n      </tr>\n      <tr>\n        <th class="collectionTh">Version:</th>\n        <th class="collectionTh">\n          <select>\n            <option selected>'+(null==(__t=appInfos[2])?"":__t)+'</option>\n          </select>\n        <th>\n      </tr>\n      <tr>\n        <th class="collectionTh">System:</th>\n        <th class="collectionTh">\n          '+(null==(__t=attributes.isSystem?"Yes":"No")?"":__t)+'\n        <th>\n      </tr>\n      <tr>\n        <th class="collectionTh">Status:</th>\n        <th class="collectionTh">\n          ',attributes.active?__p+='\n            <div class="modal-text active">\n              Active\n            </div>\n          ':__p+='\n            <div class="modal-text inactive">\n              Inactive\n            </div>\n          ',__p+='\n        </th>\n      </tr>\n    </table>\n  </div>\n  <div id="colFooter" class="modal-footer">\n    <button id="uninstall" class="button-danger"'+(null==(__t=attributes.isSystem||attributes.development?" disabled":"")?"":__t)+'>Uninstall</button>\n    <button id="change" class="button-success pull-right">Save</button>\n    ',__p+="\n    \n  </div>\n</div>\n"}return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div id="install-foxx" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display:none">\n  <div class="modal-header">\n    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">\xd7</button>\n    <a class="arangoHeader">Install Service</a>\n  </div>\n  <div class="modal-body">\n    <table>\n      <tr>\n        <th class="collectionTh">Name:</th>\n        <th class="collectionTh"><strong>'+(null==(__t=attributes.name)?"":__t)+'</strong></th>\n      </tr>\n      <tr>\n        <th class="collectionTh">&nbsp;</th>\n        <th class="collectionTh">&nbsp;</th>\n      </tr>\n      <tr>\n        <th class="collectionTh">Mount:</th>\n        <th class="collectionTh">\n          <input type="text" id="mount-point" name="mountpoint" value="/'+(null==(__t=attributes.name)?"":__t)+'" placeholder="mount-path" />\n        </th>\n        <th><a class="modalTooltips" title="The path where the app can be reached."><i class="arangoicon icon_arangodb_info"></i></a></th>\n      </tr>\n      <tr>\n        <th class="collectionTh">Version:</th>\n        <th class="collectionTh">\n          '+(null==(__t=attributes.version)?"":__t)+'\n        <th>\n      </tr>\n      <tr>\n        <th class="collectionTh">System:</th>\n        <th class="collectionTh">\n          '+(null==(__t=attributes.isSystem?"Yes":"No")?"":__t)+'\n        <th>\n      </tr>\n    </table>\n  </div>\n  <div id="colFooter" class="modal-footer">\n    <button class="button-success pull-right installFoxx">Install</button>    \n    <button id="cancel" class="button-danger pull-right">Cancel</button>\n  </div>\n</div>\n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='  <div class="paddingBox">\n    <div class="foxxDesc">\n      <p><span class="foxxName">'+(null==(__t=model.name)?"":__t)+'</span></p>\n      <p><span class="foxxCategory">'+(null==(__t=model.categories)?"":__t)+'</span></p>\n      \x3c!--<p><i class="fa fa-star"></i><span class="foxxStars">23</span></p>--\x3e\n    </div>\n    <div class="foxxActions">\n      ',upgrade?__p+='\n        <button class="installFoxx button-success" appId="'+(null==(__t=model.name)?"":__t)+'" appVersion="'+(null==(__t=model.latestVersion)?"":__t)+'" >Replace</button>\n      ':__p+='\n        <button class="installFoxx button-success" appId="'+(null==(__t=model.name)?"":__t)+'" appVersion="'+(null==(__t=model.latestVersion)?"":__t)+'" >Install</button>\n      ',__p+='\n    </div>\n    <div class="borderBox"></div>\n    <img src="'+(null==(__t=thumbnail)?"":__t)+'" height="50" width="50" alt="Icon for Service" class="icon">\n  </div>\n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='  <div class="headerBar">\n    <div class="search-field">\n      <input type="text" value="'+(null==(__t=searchString)?"":__t)+'" id="graphManagementSearchInput" class="search-input" placeholder="Search..."/>\n      <i id="graphManagementSearchSubmit" class="fa fa-search"></i>\n      \x3c!-- <img id="graphManagementSearchSubmit" class="search-submit-icon"> --\x3e\n    </div>\n     <div class="headerButtonBar">\n        <ul class="headerButtonList">\n          <li class="enabled">\n            <a id="graphManagementToggle" class="headerButton">\n              <span class="icon_arangodb_settings2" title="Settings"></span>\n            </a>\n          </li>\n        </ul>\n      </div>\n  </div>\n\n\n  <div id="graphManagementDropdown2" class="headerDropdown">\n\n    <div id="graphManagementDropdown" class="dropdownInner">\n      <ul>\n        <li class="nav-header">Sorting</li>\n        <li><a>\n          <label class="checkbox checkboxLabel">\n            <input class="css-checkbox" type="checkbox" id="graphSortDesc">\n            <i class="fa"></i>\n            Sort descending\n          </label>\n        </a></li>\n      </ul>\n    </div>\n\n  </div>\n\n\n  <div class="contentDiv" id="arangoCollectionsContainer">\n    <div id="graphManagementThumbnailsIn" class="tileList pure-u">\n      <div class="tile pure-u-1-1 pure-u-sm-1-2 pure-u-md-1-3 pure-u-lg-1-4 pure-u-xl-1-6">\n        <div class="fullBorderBox">\n          <a href="#" id="createGraph" class="add">\n            <span id="newGraph" class="pull-left add-Icon"><i class="fa fa-plus-circle"></i></span>\n            Add Graph\n          </a>\n        </div>\n      </div>\n\n\n      ',graphs.forEach((function(e){var t=e.get("_key"),i=e.get("isSmart"),n=e.get("isDisjoint"),r=e.get("isSatellite")||"satellite"==e.get("replicationFactor");__p+='\n\n      <div class="tile tile-graph pure-u-1-1 pure-u-sm-1-2 pure-u-md-1-3 pure-u-lg-1-4 pure-u-xl-1-6" id="'+(null==(__t=t)?"":__t)+'_tile">\n        <div class="paddingBox">\n          <div class="borderBox"></div>\n          <div class="iconSet">\n            <span class="icon_arangodb_settings2 editGraph" id="'+(null==(__t=t)?"":__t)+'_settings" alt="Edit graph" title="Edit graph"></span>\n          </div>\n          <span class="icon_arangodb_edge5 tile-icon"></span>\n          <span class="icon_arangodb_edge5 icon_arangodb_edge5-2 tile-icon"></span>\n          <div class="tileBadge">\n            ',!0===i?(__p+="\n              ",__p+=!0===n?'\n                <span><div class="corneredBadge inProgress">Disjoint Smart</div></span>\n              ':'\n                <span><div class="corneredBadge inProgress">Smart</div></span>\n              ',__p+="\n            "):!0===r&&(__p+='\n              <span><div class="corneredBadge inProgress">Satellite</div></span>\n            '),__p+='\n          </div>\n          <h5 class="collectionName">'+(null==(__t=t)?"":__t)+"</h5>\n        </div>\n      </div>\n\n      "})),__p+="\n     </div>\n  </div>\n\n";return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="\n  ";var genClass="pure-u-1-3";__p+="\n  ";var genClass2="pure-u-2-3";__p+="\n\n  ";var formatName=function(e){return __p+="\n    ",e.charAt(0).toUpperCase()+string.slice(1)};__p+='\n\n  <div id="graphSettingsView" class="innerContent">\n    \n    <div class="pure-g" style="margin-top: -13px">\n      <div class="pure-u-1-1 pure-u-md-1-1 pure-u-lg-1-1 pure-u-xl-1-1">\n    \n        <div class="pure-g pure-table pure-table-body">\n\n          ',_.each(general,(function(e,t){__p+="\n            ","divider"===e.type?__p+='\n              <div class="pure-u-1-1 left heading">'+(null==(__t=e.name)?"":__t)+"</div>\n            ":(__p+='\n            <div class="'+(null==(__t=genClass)?"":__t)+' left">\n              '+(null==(__t=e.name)?"":__t)+'\n            </div>\n            <div class="'+(null==(__t=genClass2)?"":__t)+' left">\n\n              ',"select"===e.type&&(__p+='\n                  <select id="g_'+(null==(__t=t)?"":__t)+'">\n                    ',_.each(e,(function(e,t){__p+="\n                      ",e.name&&(__p+='\n                        <option value="'+(null==(__t=e.val)?"":__t)+'"> '+(null==(__t=e.name)?"":__t)+" </option>\n                      "),__p+="\n                    "})),__p+="\n                  </select>\n              "),__p+="\n\n              ","string"===e.type&&(__p+='\n                <input id="g_'+(null==(__t=t)?"":__t)+'" type="text" placeholder="attribute"></input>\n              '),__p+="\n\n              ","number"===e.type&&(__p+='\n                <input id="g_'+(null==(__t=t)?"":__t)+'" type="text" id="'+(null==(__t=e)?"":__t)+'" value="'+(null==(__t=e.value)?"":__t)+'" placeholder=""></input>\n              '),__p+="\n\n              ","range"===e.type&&(__p+='\n                <label id="g_'+(null==(__t=t)?"":__t)+'_label" class="rangeLabel">1</label>\n                <input id="g_'+(null==(__t=t)?"":__t)+'" type=\'range\' min="0" max="9" val="1"/>\n              '),__p+="\n\n              ","color"===e.type&&(__p+='\n                <input id="g_'+(null==(__t=t)?"":__t)+"\" type='color' name='color' value=\""+(null==(__t=VALUE)?"":__t)+'"/>\n              '),__p+='\n\n              <i title="'+(null==(__t=e.desc)?"":__t)+'" class="fa fa-info-circle gv-tooltips" aria-hidden="true"></i>\n              </div>\n            '),__p+="\n\n          "})),__p+='\n        </div>\n\n      </div>\n\n      <div class="pure-u-1-1 pure-u-md-1-1 pure-u-lg-1-1 pure-u-xl-1-1">\n    \n        <div class="pure-g pure-table pure-table-body">\n          ',_.each(specific,(function(e,t){if(__p+="\n\n            ","true"!==e.hide){var i;if(__p+="\n              ","divider"===e.type)__p+='\n                <div class="pure-u-1-1 left heading">'+(null==(__t=e.name)?"":__t)+"</div>\n              ";else __p+='\n                <div class="'+(null==(__t=genClass)?"":__t)+' left">\n                  '+(null==(__t=e.name)?"":__t)+'\n                </div>\n\n                <div class="'+(null==(__t=genClass2)?"":__t)+' left">\n\n                  ',__p+="\n                  ",e.value?(__p+="\n                    ",i=e.value,__p+="\n                  "):(__p+="\n                    ",i=e.default,__p+="\n                  "),__p+="\n\n                  ","string"===e.type&&(__p+='\n                    <input id="g_'+(null==(__t=t)?"":__t)+'" type="text" placeholder="attribute"></input>\n                  '),__p+="\n\n                  ","number"===e.type&&(__p+='\n                    <input id="g_'+(null==(__t=t)?"":__t)+'" type="text" placeholder="number"></input>\n                  '),__p+="\n\n                  ","color"===e.type&&(__p+='\n                    <input id="g_'+(null==(__t=t)?"":__t)+"\" type='color' name='color' value=\""+(null==(__t=i)?"":__t)+'"/>\n                  '),__p+="\n\n                  ","range"===e.type&&(__p+='\n                    <label id="g_'+(null==(__t=t)?"":__t)+'_label" class="rangeLabel">1</label>\n                    <input id="g_'+(null==(__t=t)?"":__t)+'" type=\'range\' min="0" max="9" val="1"/>\n                  '),__p+="\n\n                  ","select"===e.type&&(__p+='\n                    <select id="g_'+(null==(__t=t)?"":__t)+'">\n                      ',_.each(e,(function(e,t){__p+="\n                        ",e.name&&(__p+='\n                          <option value="'+(null==(__t=e.val)?"":__t)+'"> '+(null==(__t=e.name)?"":__t)+" </option>\n                        "),__p+="\n                      "})),__p+="\n                    </select>\n                  "),__p+='\n                  <i title="'+(null==(__t=e.desc)?"":__t)+'" class="fa fa-info-circle gv-tooltips" aria-hidden="true"></i>\n                </div>\n              ';__p+="\n            "}__p+="\n          "})),__p+='\n        </div>\n\n        <div class="pure-u-1-1">\n          <button id="saveGraphSettings" style="margin-top: 20px; margin-right: 10px;" class="button-success pull-right">Save</button>\n          <button id="restoreGraphSettings" style="margin-top: 20px;" class="button-success pull-right">Restore defaults</button>\n        </div>\n      </div>\n  </div>\n\n'}return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="control-group">\n  <label for="'+(null==(__t=type)?"":__t)+"_"+(null==(__t=id)?"":__t)+'" class="control-label">Attribute '+(null==(__t=id)?"":__t)+'</label>\n  <div class="controls">\n    <input id="'+(null==(__t=type)?"":__t)+"_"+(null==(__t=id)?"":__t)+'" type="text" name="'+(null==(__t=type)?"":__t)+"_"+(null==(__t=id)?"":__t)+'" placeholder="Attribute" maxlength="75" class="input-xlarge">\n    <button id="remove_'+(null==(__t=type)?"":__t)+"_"+(null==(__t=id)?"":__t)+'" class="graphViewer-icon-button gv_internal_remove_line gv-icon-small delete" />\n  </div>\n</div>\n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='  <div class="graphContent" id="graphContainer">\n\n    <div class="headerBar">\n      <div class="headerButtonBar" style="margin: 0;">\n        <ul class="headerButtonList">\n          <li class="enabled">\n            <a id="settingsMenu" class="headerButton">\n              <span title="Configure graph settings">\n                <i class="fa fa-bars fa-stack-1x"></i>\n              </span>\n            </a>\n          </li>\n          <li class="enabled">\n            <a id="graph-fullscreen-btn" class="headerButton">\n              <span title="Switch to fullscreen mode">\n                <i class="fa fa-television"></i>\n              </span>\n            </a>\n          </li>\n          <li class="enabled">\n            <a id="downloadPNG" class="headerButton">\n              <span title="Download visible graph as png image">\n                <i class="fa fa-camera fa-stack-1x"></i>\n              </span>\n            </a>\n          </li>\n          <li class="enabled">\n            <a id="loadFullGraph" class="headerButton">\n              <span title="Fetch full graph - use with caution">\n                <i class="fa fa-share-alt"></i>\n              </span>\n            </a>\n          </li>\n          \x3c!--\n          <li class="enabled">\n            <a id="selectNodes" class="headerButton">\n              <span title="Lasso tool - Select and delete multiple nodes">\n                <i class="fa fa-paint-brush fa-stack-1x"></i>\n              </span>\n            </a>\n          </li>\n          --\x3e\n        </ul>\n      </div>\n    </div>\n\n    \x3c!--<div id="graph-fullscreen-btn"><i class="fa fa-desktop"></i></div>--\x3e\n    <div id="graph-container" oncontextmenu="return false;"></div>\n  </div>\n\n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='\n<div class="helpUs">\n  <iframe src="https://docs.google.com/forms/d/1vsIwy0mJSeToEnfo_jnBaQebewbcURL730IkZIrkyEE/viewform?embedded=true" scrolling="no" width="100%" height="1300px" frameborder="0" marginheight="0" marginwidth="0">Loading...</iframe>\n</div>\n\n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="  ","undefined"!==typeof supported&&(__p+='\n    <div class="contentIn" id="indexHeaderContent">\n        <div id="indexEditView">\n          <table id="collectionEditIndexTable" class="edit-index-table arango-table">\n            <thead>\n              <tr class="figuresHeader">\n                <th class="collectionInfoTh">ID</th>\n                <th class="collectionInfoTh">Type</th>\n                <th class="collectionInfoTh">Unique</th>\n                <th class="collectionInfoTh">Sparse</th>\n                <th class="collectionInfoTh">Extras</th>\n                <th class="collectionInfoTh">Selectivity Est.</th>\n                <th class="collectionInfoTh">Fields</th>\n                <th class="collectionInfoTh">Name</th>\n                <th class="collectionInfoTh">Action</th>\n              </tr>\n            </thead>\n            <tbody>\n            </tbody>\n            <tfoot>\n              <tr>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td><i class="fa fa-plus-circle" id="addIndex"></i></td>\n              </tr>\n            </tfoot>\n          </table>\n      </div>\n\n          <div id="newIndexView" class="new-index-view" style="display:none">\n            <table>\n              <tr>\n                <th class="collectionTh">Type:</th>\n                <th class="">\n                  <select id="newIndexType">\n                    <option style="display: none" disabled selected value="unknown"> -- select an index -- </option>\n                    ',supported.indexOf("geo")>-1&&(__p+=' \n                      <option value="Geo">Geo Index</option>\n                    '),__p+=" \n                    ",supported.indexOf("hash")>-1&&(__p+=' \n                      <option value="Hash">Hash Index</option>\n                    '),__p+=" \n                    ",supported.indexOf("persistent")>-1&&(__p+=' \n                      <option value="Persistent">Persistent Index</option>\n                    '),__p+=" \n                    ",supported.indexOf("fulltext")>-1&&(__p+=' \n                      <option value="Fulltext">Fulltext Index</option>\n                    '),__p+=" \n                    ",supported.indexOf("skiplist")>-1&&(__p+=' \n                      <option value="Skiplist">Skiplist Index</option>\n                    '),__p+=" \n                    ",supported.indexOf("ttl")>-1&&(__p+=' \n                      <option value="Ttl">TTL Index</option>\n                    '),__p+=' \n                  </select>\n                </th>\n                <th class="tooltipInfoTh">\n                  <div class="tooltipDiv">\n                    <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="Type of index to create. ',supported.indexOf("hash")<=-1&&(__p+="Please note that for the RocksDB engine the index types hash, skiplist and persistent are identical, so that they are not offered seperately here."),__p+='">\n                      <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                    </a>\n                  </div>\n                </th>\n              </tr>\n            </table>\n            <div id="newIndexTypeGeo" class="newIndexClass" style="display: none">\n              <table>\n                <tr>\n                  <th class="collectionTh">Fields:</th>\n                  <th><input type="text" id="newGeoFields" value=""/></th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="A comma-separated list with one or two attribute paths. Example: latitude,longitude">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n                <tr>\n                  <th class="collectionTh">Name:</th>\n                  <th><input type="text" id="newGeoName" value=""/></th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="Index name. If left blank, a name will be auto-generated. Example: byValue">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n                <tr>\n                  <th class="collectionTh">Geo JSON:</th>\n                  <th>\n                    <input id="newGeoJson" type="checkbox" name="newGeoJson" value="true">\n                  </th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="Set geoJson to true if the coordinates stored in the specified attribute are arrays in the form [longitude,latitude].">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n                <tr>\n                  <th class="collectionTh">Create in background:</th>\n                  <th>\n                    <input id="newGeoBackground" type="checkbox" name="newGeoBackground" value="true">\n                  </th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="Create the index in background.">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n              </table>\n            </div>\n            <div id="newIndexTypePersistent" class="newIndexClass" style="display:none">\n              <table>\n                <tr>\n                  <th class="collectionTh">Fields:</th>\n                  <th><input type="text" id="newPersistentFields" value=""/></th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="A comma-separated list of attribute paths.">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n                <tr>\n                  <th class="collectionTh">Name:</th>\n                  <th><input type="text" id="newPersistentName" value=""/></th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="Index name. If left blank, a name will be auto-generated. Example: byValue">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n                <tr>\n                  <th class="collectionTh">Unique:</th>\n                  <th>\n                    <input id="newPersistentUnique" type="checkbox" name="newPersistentUnique" value="true">\n                  </th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="If true, then create a unique index.">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n                <tr>\n                  <th class="collectionTh">Sparse:</th>\n                  <th>\n                    <input id="newPersistentSparse" type="checkbox" name="newPersistentSparse" value="true">\n                  </th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="If true, then create a sparse index.">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n                <tr>\n                  <th class="collectionTh">Deduplicate array values:</th>\n                  <th>\n                    <input id="newPersistentDeduplicate" type="checkbox" name="newPersistentDeduplicate" value="true">\n                  </th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="Duplicate index values from the same document into a unique array index will lead to an error or not.">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n                <tr>\n                  <th class="collectionTh">Create in background:</th>\n                  <th>\n                    <input id="newPersistentBackground" type="checkbox" name="newPersistentBackground" value="true">\n                  </th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="Create the index in background.">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n              </table>\n            </div>\n            <div id="newIndexTypeHash" class="newIndexClass" style="display:none">\n              <table>\n                <tr>\n                  <th class="collectionTh">Fields:</th>\n                  <th><input type="text" id="newHashFields" value=""/></th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="A comma-separated list of attribute paths.">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n                <tr>\n                  <th class="collectionTh">Name:</th>\n                  <th><input type="text" id="newHashName" value=""/></th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="Index name. If left blank, a name will be auto-generated. Example: byValue">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n                <tr>\n                  <th class="collectionTh">Unique:</th>\n                  <th>\n                    <input id="newHashUnique" type="checkbox" name="newHashUnique" value="true">\n                  </th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="If true, then create a unique index.">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n                <tr>\n                  <th class="collectionTh">Sparse:</th>\n                  <th>\n                    <input id="newHashSparse" type="checkbox" name="newHashSparse" value="true">\n                  </th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="If true, then create a sparse index.">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n                <tr>\n                  <th class="collectionTh">Deduplicate array values:</th>\n                  <th>\n                    <input id="newHashDeduplicate" type="checkbox" name="newHashDeduplicate" value="true">\n                  </th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="Duplicate index values from the same document into a unique array index will lead to an error or not.">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n                <tr>\n                  <th class="collectionTh">Create in background:</th>\n                  <th>\n                    <input id="newHashBackground" type="checkbox" name="newHashBackground" value="true">\n                  </th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="Create the index in background.">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n              </table>\n            </div>\n            <div id="newIndexTypeFulltext" class="newIndexClass" style="display:none">\n              <table>\n                <tr>\n                  <th class="collectionTh">Fields:</th>\n                  <th><input type="text" id="newFulltextFields" value=""/></th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="A single attribute path. Example: message.text">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n                <tr>\n                  <th class="collectionTh">Name:</th>\n                  <th><input type="text" id="newFulltextName" value=""/></th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="Index name. If left blank, a name will be auto-generated. Example: byValue">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n                <tr>\n                  <th class="collectionTh">Min. length:</th>\n                  <th><input type="text" id="newFulltextMinLength" value=""/></th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="Minimum character length of words to index. Will default to a server-defined value if unspecified. It is thus recommended to set this value explicitly when creating the index.">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n                <tr>\n                  <th class="collectionTh">Create in background:</th>\n                  <th>\n                    <input id="newFulltextBackground" type="checkbox" name="newFulltextBackground" value="true">\n                  </th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="Create the index in background.">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n              </table>\n\n            </div>\n            <div id="newIndexTypeSkiplist" class="newIndexClass" style="display:none">\n              <table>\n                <tr>\n                  <th class="collectionTh">Fields:</th>\n                  <th><input type="text" id="newSkiplistFields" value=""/></th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="A comma-separated list of attribute paths.">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n                <tr>\n                  <th class="collectionTh">Name:</th>\n                  <th><input type="text" id="newSkiplistName" value=""/></th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="Index name. If left blank, a name will be auto-generated. Example: byValue">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n                <tr>\n                  <th class="collectionTh">Unique:</th>\n                  <th>\n                    <input id="newSkiplistUnique" type="checkbox" name="newSkiplistUnique" value="true">\n                  </th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="If true, then create a unique index.">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n                <tr>\n                  <th class="collectionTh">Sparse:</th>\n                  <th>\n                    <input id="newSkiplistSparse" type="checkbox" name="newSkiplistSparse" value="true">\n                  </th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="If true, then create a sparse index.">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n                <tr>\n                  <th class="collectionTh">Deduplicate array values:</th>\n                  <th>\n                    <input id="newSkiplistDeduplicate" type="checkbox" name="newSkiplistDeduplicate" value="true">\n                  </th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="Duplicate index values from the same document into a unique array index will lead to an error or not.">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n                <tr>\n                  <th class="collectionTh">Create in background:</th>\n                  <th>\n                    <input id="newSkiplistBackground" type="checkbox" name="newSkiplistBackground" value="true">\n                  </th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="Create the index in background.">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n              </table>\n            </div>\n            <div id="newIndexTypeTtl" class="newIndexClass" style="display:none">\n              <table>\n                <tr>\n                  <th class="collectionTh">Fields:</th>\n                  <th><input type="text" id="newTtlFields" value=""/></th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="A single attribute path containing a numeric datetime value. Example: createdAt">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n                <tr>\n                  <th class="collectionTh">Name:</th>\n                  <th><input type="text" id="newTtlName" value=""/></th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="Index name. If left blank, a name will be auto-generated. Example: byValue">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n                <tr>\n                  <th class="collectionTh">Documents expire after (s):</th>\n                  <th><input type="text" id="newTtlExpireAfter" value=""/></th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="Number of seconds to be added to the timestamp attribute value of each document. If documents have reached their expiration timepoint, they will eventually get deleted by a background process.">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n                <tr>\n                  <th class="collectionTh">Create in background:</th>\n                  <th>\n                    <input id="newTtlBackground" type="checkbox" name="newTtlBackground" value="true">\n                  </th>\n                  <th class="tooltipInfoTh">\n                    <div class="tooltipDiv">\n                      <a class="index-tooltip" data-toggle="tooltip" data-placement="left" title="Create the index in background.">\n                        <span rel="tooltip" class="arangoicon icon_arangodb_info"></span>\n                      </a>\n                    </div>\n                  </th>\n                </tr>\n              </table>\n            </div>\n            <div class="index-button-bar index-button-bar2">\n              <button id="createIndex" class="button-success" style="margin-left: 15px;">Create</button>\n              <button id="cancelIndex" class="button-close" style="margin-left: 0;"><i class="fa fa-arrow-left"></i>\n                <span style="margin-left: 5px;">Back</span>\n              </button>\n            </div>\n        </div>\n        <div id="modal-dialog">\n          <div class="modal-footer" style="border: none"></div>\n        </div>\n      </div>\n    '),__p+="\n";return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='\t<div id="lineChartDetail" class="modal hide fade modal-chart-detail" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display:none">\n\t\t<div class="modal-header">\n\t\t\t<button type="button" class="close" data-dismiss="modal" aria-hidden="true">\xd7</button>\n\t\t\t<a class="arangoHeader">'+(null==(__t=figure)?"":__t)+'</a>\n\t\t</div>\n\t\t<div id="dashboardDetailedLineChart" class="dashboardDetailChart" style="position: absolute"></div>\n\t</div>\n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<thead>\n  <tr role="row">\n    <th class="sorting_disabled docsFirstCol">Content</th>\n    <th class="sorting_disabled docsSecCol">_key</th>\n    <th class="sorting_disabled docsThirdCol">\n      <a id="addDocumentButton" class="pull-right addButton"><span class="arangoicon icon_arangodb_roundplus" title="Add a document"></span></a>\n    </th>\n  </tr>\n</thead>\n<tbody>\n  <tr class="odd">\n    <td valign="top" class="dataTables_empty">Loading...</td>\n  </tr>\n</tbody>\n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div id="loggerContent" class="logger-content-id innerContent">\n\n  <div class="arangoToolbar arangoToolbarTop">\n\n    <div class="pull-left">\n    </div>\n\n    <div class="pull-right">\n      <button id="logTopicSelection" class="button-default filterSelect">Topic <i class="fa fa-caret-down"></i></button>\n      <button id="logLevelSelection" class="button-default filterSelect">Level <i class="fa fa-caret-down"></i></button>\n      <button style="display: none" class="button-default filterSelect" id="logFilters">\n        <i class="fa fa-close"></i>Clear current <a id="filterDesc"></a> filter\n      </button>\n    </div>\n\n  </div>\n\n  <div id="noLogEntries" style="display: none">\n    <span>No suitable log entries found </span>\n  </div>\n\n  <div id="logEntries">\n  </div>\n\n  <div class="actions">\n    <button id="loadMoreEntries" class="button-success">Load older entries</button>\n  </div>\n\n</div>\n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",_.each(entries,(function(e){__p+='\n  <div class="pure-g" level="'+(null==(__t=e.status.toLowerCase())?"":__t)+'" topic="'+(null==(__t=e.topic.toLowerCase())?"":__t)+'">\n    <div class="pure-u-1-24">\n      <p class="labels">\n        ';var t=arangoHelper.statusColors[e.status.toLowerCase()];__p+="\n        ";var i=arangoHelper.alphabetColors[e.topic.charAt(0).toLowerCase()];__p+='\n        <span class="tippy level" title="Level: '+(null==(__t=e.status)?"":__t)+'" style="background: '+(null==(__t=t)?"":__t)+'"></span>\n        <span class="tippy topic" title="Topic: '+(null==(__t=e.topic)?"":__t)+'" style="background: '+(null==(__t=i)?"":__t)+'"></span>\n      </p>\n    </div>\n    <div class="pure-u-19-24 desc">\n      <p class="msg">'+(null==(__t=e.msg)?"":__t)+'</p>\n    </div>\n    <div class="pure-u-4-24 date">\n      <p>\n        ';var n=moment(e.timestamp,"X").fromNow();__p+='\n        <i class="fa fa-clock-o" aria-hidden="true"></i>\n        <span class="tippy" title="'+(null==(__t=e.date)?"":__t)+'">'+(null==(__t=n)?"":__t)+'</span>\n      </p>\n    </div>\n    <div class="logBorder"></div>\n  </div>\n'})),__p+="\n";return __p}},function(module,exports,__webpack_require__){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="loginFixedWindow">\n\n  <div id="loginWindow" class="login-window">\n    <div class="login-logo-round">\n      <img id="ArangoDBLogoVersion"src="'+__webpack_require__(396)+'" />\n    </div>\n    <p class="wrong-credentials" style="display:none">Login failed!</p>\n    <p id="noAccess" class="no-access" style="display:none">Database not found!</p>\n    <p class="checking-password" style="display:none">\n      <i class="fa fa-circle-o-notch fa-spin fa-fw"></i>\n      <span class="sr-only">Loading...</span>\n    </p>\n    <form id="loginForm">\n      <input class="login-input" placeholder="username" id="loginUsername" type="text" name="username"><i class="fa fa-user"></i>\n      <input class="login-input" placeholder="password" id="loginPassword" type="password" name="password" autocomplete="off"><i class="fa fa-lock"></i>\n\n\n      <button id="submitLogin" class="button-success pull-right">Login</button>\n    </form>\n\n    <div id="databases" style="display: none">\n      <form id="dbForm">\n          <i class="fa fa-database"></i>\n          <select id="loginDatabase">\n            <option>database</option>\n          </select>\n          <button id="goToDatabase" class="button-success pull-right">Select</button>\n      </form>\n      <button id="logout" class="button-danger pull-right">Logout</button>\n    </div>\n  </div>\n</div>\n';return __p}},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAClCAYAAAC+7wThAAAABmJLR0QA/wD/AP+gvaeTAAAlbUlEQVR42u1dB1hUV/Y3+9+eTbLZbEvZzZaUzWZ3s4nRmQFUsCNMQQUBxd4bMwOCPViw99iw0xRRERjAGikWLNhFVFBTNtHE1U1iiSV6/+e8mQdv7ntTmRlm4J7vO5+F4c179/7euaefZs0YMWLkXZSU1OwHPfQt34jUy1UROllchE4+K1InX9FDL8+I0Mrzeujke3iO1Ms29tApFsFnE3voFb0j9Yp24WNa/J6tIqNm4Ulv/zhcp2gToVdMBbDsBf4amNSTb0Zq5fsBdCk9tPKB4fEt/8xWuglQ9NiA53voZP0idIoCAMEdFwDJNmvlNRzQ9IrwsBEtX2C70EgoMCnwh5FaWXcTmB44CZC7cCz+F46+T6PjFVW94hXnkSN1ik/g/27Bzx/beZ2HwPkIsr5JgT9lu+ODpNEG/hIAFQ8b+bED0uV2zBjF6eFTWpdOXtJu/8K04LNrcpQ30g1qYovX5ihvLs7oUjV9RcfyhDmBJQMnBhyMjpNfsQK6r0CPS+45SvYK2y0fINioZ0G6TIONu20PkPqO8zsybkHbkmWbQqrTDarH9oDIEV6/XfXt7LWdT4yc1rokMk5xVeI+HsH9bogeLXud7Z4X0uDBzX8EusxIlATWwASbeH3oB61LZ63uVJGap77vaiDZ4kVpXSpRIoKu9z/q3r6He0sPjw34I9tNb7HwwLqDjam2ptv0m+BfPnNVp6Np+erv7QZCgYZs3dWdFJZGk32H+5KyY/3JgeMDyKETAznGv5ce7Qc/60N2H4whhpIosm1PONlYGGbz2hvyVHfGL2pbKiHF7sIRPonpYA1IuPiwEfMs6zGKr+LmBBXbqydl7+xGdu7vyYHm7IWRpOaqjlz+WO8UX7qiJacqh5P9Ff1JUWlPi2ADqflwPBzF6KqgrUl8Ydgue1pKaf3+DYt/VvK40yuuj53frhSkwj1rQMosCANpFEXKTw4i56tHOw0ie7gG+GTlMLLzQC/4Xo2E8q/6etDEgP3UszwBB+0S5eDmP2c77gGK0Cr6w6LfF4NKdiduTmAxHjOWwISSY0dZT3Lk9GBOqrgTTJb4Qk0sKT7SF+5FDLBpKzuUgwvjJvVcJ8Hx+ie2824iLuwCoRQpKdU70e9YSnbofywBKmdvBDkIR1xDgUmKq0BK7oCjl77XVVtCvoiOU9A64w0AVyBDgVusPvkmKSmFPicpMGUUqEkRSKczVSO8BkxSfPzsUJK9q5vZvYNeeKvXGD/6qL8PTtkwhgYXUfCo4J/AohpoUPWMV1xYlhV6RQpQO/ZHcwq4NwPKXNnXkY/K+4gsx5gEv+O0WwLDUgwVrvFP5dKgQs92ar76OxpU6B44dX6EzwCK5mNnhpJNRV3rwJWruttrjP9p6vkfY1YFQ4fz9BRYflk0qHQz2hwDf5S5lAJGP1ONjwKK1r1yP+oh9N7fg2PxgsihCjFQBhFnrD+9YhwNqjFzgkpoKYVvOOoplxsBqHiuhqMRHbO1Ote20JtRcYoaaj0eMF+Xo6DSydsb9Ym6hQRXwiHR0Qee7sqLIxsVqGoZHLS7wO9Vay1mh34JrohrVIjqvz3G+P2VIcYe5+eoVr+BRbsuXMChSa1KaVDhceFN7gO3OFav6rloAP/MSzKDL0bo5d9Skus8ZnMw5NjSq3SKXcKF6zvW/yidedAUQCWUXBgW4p993rrOp8QOYkUZZsUy+FggtHao8MwXqF/Qzs4mAype57qqJXn76hR69N1xIR/BWkXoZUsZgiQIxTl1BD6es67TSSGoNkOguKpmdJMClTCwnQM6Jb8WsTMDi0VxUq1sBEOSWGFfLFykUZAcRzs+j58b1iRBxXPlpVG1fi5wuTzpP97/EJ0iFKlr2YqhiT8CtfK3hFZglF5xmU7EK4Hcp4ZUok+eH0aKj/YlBcVR3HGMjDlYmIt15JTngtroWsGXjANXnuph7wS/k7SlyILWPLB08mxhusi89Z1OCUG1HTbxcj3yo5x2VsKxi5kIm3d0tZnPhekwmDlxxgOhJHQGC/Ptwcf1MQWuIxgKa+IKe8t3hMl6Ayb6H6YzOU+7IUxzvjoWcqRGgrQZRsqODua4/PhQUnF6ODl3cTQpAUBlFmmcSkEuKImGa4x0qwQtgFwy/vs+zAy5EinO8/+wqUsrQ51lI/92zZbQ68JN2nuot8MLf/GylpSfGEYKi/uR9O2RZFFqGJm+PIQkzu1IhiUFEgiR2KzaGTy5NRm/oCOZv15J1uc4Di4MM30Eacs1bpK0F2u0nDHDf98MSL2ms2nBUuzVJEEVGSuXCRdCPzuwjE7MuwiJcdJvrQ6CtsPJztL+JA3AM2+dhoyb15EMmtwG3BTmIOmVoCCxyUHkg6WdyPx1SrJyswZicF1JRn43srGgO8kqDOcY/54BvHZbGFm4QUkmLOwA1zKCcPiUQDJvbShJzXVMiuXu7cHF/9wBrtPnh8P91t2PbmabMjqHHk+Epqi0Z9XpBYqvIFXELGMBixUuwJt54NgQsn13b5KS1Z0krwgh2uR2kDZjLnX6jfMnExd15ACxdltXDiSbd3Qnm+zQj6wxWmEZhm5k2opgEhUn50CLkmztNvsBlgX3cNpNeWGYV1/3XaonfcaZK/OYP49V4E1HWulb/AHr6vgFGL+wbSlYghC26IIpumTM3CAyOrktbKbCDEAjpweR5JXBZOUm2Nh8I3iydnSzurEo+bbt7l5rzdGMP8NjxVaFzWb4njVbwkhfADECDIG8frt94MJrV5wb6hZ9y1AcZabMw719TnnmczGq0USUdvlssxyrCf5PIgUggiQ38sGSTiQFjq1Nhd1JNgDI2sbjz9B6xMDtfrCajsMmot8HMwUc089iOcsOiyxQv8McLykptixTTaLjjfe5dKO94NKAwTDc9Xn0l831LbSqaX0LwDa6UQIJq01AmQyCt2eyqSXQfUE26J2EeW0fzF0HQMoGPSZPZeN4CiP58JZiTR/6kM4BgPDNdZcVhunN6K/KoCpsNu/sTvSz2nLPgPqXvUerOzIyTlQOr/VvIWP1NZ3aHB4na+7zQFIl+D8D53swAGkmPNRBU1MMo3SaHHB50pL2ZR9uDCkDveoSLARXSLouuwtZuiKQLFroT+bNlNfy8sWtyab0LmTvvp5gxo9qMEcplokVlUWLJOXU5Z2551pmp+TCdB93OFSF/i3IsH0QFe9H53Bdion/19M+BSS84UhtyxCuiFQvP8rrTyCCvx82pdWFaSs6lK7cHFoOCuYNY0hCRZYsbU2S9G8TXfeXSX/FL0jvd39qkwfIf0ESu71CFo15l2xZ3ZmcOj7E4wArPznQ7FjOhCNuMhzbeCym5oXZBS5n3Cj26Ft5+yJrvwMblQhfaM4FAaEzrwYSlmNBXOp9U6ZnMd8mKCpe/t2o6W1OQ3+E4tVblZhG/C3/oJhSjGAa2/+vZIDfM3YByRb3ff/nZG7sP0l5aR+Pggv1sGyBXoNH3FBwdSSvDLHbWnRH5ivWLWYJLGHtzEDaBfE4ItavtXcl4YWH/x+nJ2llK+sacCgeD00KqJoJQFqzVYXZCKJmG6m5SjJ76vtkWIcXXAImKe7T/Gdk9sh/kMMH+nn0aBSCayMYGaAvYuk8sbes/9IVnVviiYIy/vsSdYrVXtEfoodeJscQAfA1XtmGngMHl2eFHOSPNosdVhb4kWHt3QcokQQDgC2bLCNVVSM9JrmEZfPaGW3JknT7/WQYi3THfe06EFO3B+nBl+hUbzxpGgRMXD0fl3inOMaBaYzi3viF7Y6t2ao8zSvblngLmOh5O8LJ1MFvegxQNI/s8GtSuDnMI+Aqhm40dVU1XaHoo73dwEJdzR2eeUwO3CbI3xo5tRVtJX4TFSv7neeOO8g5x+ZloOR9yVtwH2YEl6bnq29bWxxssIFl7Og7Kt3TkwwPer7BQCXk5SC9qi9r3Z4FkW6SWuhPwlhkqsF+z/zO/b3ccl9YY8m7ILCMrEeceTEGqjTuB5RO8TLXiBWU8Ci9/NHERe0PrMtVnrcmlfZC9S4m3+HbwT9MUXYYZ7l5A6h4Tur7Gjl31r2FrPmm1GH0daGe5UjIBzffXZXbaH3y3zNzVccDdEfB6Di/V90moUxe8DuoiKPutCFPeVlqATDv+kDFAHL+krTo3rauC6dEexOoeI7XvEwqK90Hrr2CEnndzLZkaabKoZjk7oPukVoYSRBaieKyfdkcl3vCwceUZOzXaRlQGIbAMMmpKuuhiLwMFac4eyOoeJ7S/w23HYsYMOfXbOyC9pBtoXQIWOgLQxC4496OnBpS+z0L04MvUIUYX2PvVhcFgOU9QIf6DP58MnZBu0Pg/a6RCpugJ9ceD/He/AjSr8XTXg0qnhcnNncPsI7UAStudjsyI6WLw5kUh04McptEFVb5QBD9KBWkHlkvQKEVAIDK4XKfZgVVAqCuSKXYYgzO3rendFdPr9OpbHFeutLlGyfsFoMpPNOXBzsMLCyrdxewUJEXFr4Kg9SYyuw8qLQt26JTEyyWb6D9NCbUPaEfLL84krPq7HYQgq9odKff+BSokIe0fo6cOuHaUBCfKpwFHnjcrGnLuziR++Ve9wjm5PPf1Wec/zGh1AqP9X/TmRQVPVoAo6cHnoLg5OdSehR2AXY0Q2Ce/h2fA5VQ33LlpvHN0zYVdec2ataqUKcSC6vc2A8VhQbvzIX+88epAoxpDuaUc2kqEIHvgHV6j6R6IFiy8qzxnrwInwUVz+gacZkfy7SemD+G673AQeWd5xPn3Ns5Z8/BmNq6RCizE7YDv2S/kq6T67iHTO1cIvUQqEs501OqBuJbCV1f9nlg6UNf5J7FlVYXn5+1NEPlFLCOnXFvtkYlpB3xTtPEeW1LqTTmt+wAVctWGB+avz64RKoV9VHoHOy0hQHKr6+DimdXhH34JrWYusxv0qotGq8EFjLfe2vtNuXXwvRw8GmNtacPwifjwJUgVZZU35tPgHyoxgKsqf3eqGcOlI5TunFtV8PRym/Shu3OAcsTbQQqztRlP0DH6RN1epbskK1avXn9xgd8Bsl039Chg/qC6sBHMY0GVHw+V9WFUfU4BgfXhnIwH8tYMRTgdFVQVbUHmp7Ay8B74yGxQDi44LHFabG9tM1fxHqyldmYren6FI2l41s0KmAh48vi7Hpg/wahNYicCPWNzoAKg/meyiXj02pW54TeEPq0cECDdNcWvWLu8KmtL4l8VOB5rW/BAYZDhrb5ZaMDVvGOKOecjhDm4k+CMXPb1QJrzuoQp4CFfibPdWiuMzhwTqPA7ZAuAhVOFMUeU8s3dTlI3/SZC/UPwOIGNDZQIR8q7e2kEmxyikIVtdC6WpHl3DGIx6on+23xVUe6GYElgpz4z8SZCnGyAPBNPKJ1K6wsccXNrJ/TutGBql/Lp8mlGseDv1gfyEurxPntzYDljOKeBQZAtYc76mAdJn43NrgzczvQDXNBjI2PndHmJH3TWOPvihuZNuhvjQ5Yk2L+6pTym7MnQlJaYY8HZ6RVQ/T/2mPK1Vqfp7wjdDtAckJfOnSTMZfyW2FGo6tuxBfjgrZ4+/oQp/sloLKNJf9CYM1IcVy/2gLhoOornu//xVu0yD3j5ZUCR+l82s1wOGWL0qy/1J5DMS65CVT8fSU1xl6OU73k8IYKiyeWZqhF7Y9WZ2u80ikqxWfBC8/fw5APWtV54fWynXQfzy9NlcW1v3D4lGtyfFAP6fNe4wEVPsvOrV0ddobmmPSS7J3hooYlmOue5iCoMHbXcC0wdbW5+mPnBwnDO5/QEutumkF1yx36FfLggGcbDbBWTpU7/Py7TQFcPAIxmY+WVtjeyBFQGSBNqboBWmAKeevu7iYFPrhC2K7TrNUk/Md3tEXoTOaCJZ7S7/VGAaoZQ99y+AgsPcZniGpIckqwZBfAlM32gwpL4asvNyyouDyyEmPcENoffCp8lujRstfNJZagpN3VIYLD+/v6vIM0echb5IKDLxsG7PmMgJTNYZKg6j+hFUnPU9lVkYN1iJevNjyohFIYOvw8FHrgMTFUCKyPof7vS+GDuLo7y8HiPmQUFIP6IqiWTmzpsKTiLCeTHoJdAi31LJ1tw9ueYTBOfD3nZUOlhMW2OCJYkOnQT+DHkh2iawHdkTh2AboKpy0M4lJ8fQFQqBvmpjme535A0IZxU1E412hNClTYQnJXWR+u+ARz3HjGzsv4f0dPD/HaMS3CZxSOrovQyj8QSqzMlGxzdwOmHLttIjsAbOOH7bym6lmqUcjSSS3JuXMj6gcqaPZhCVSctFql9ErQ2MOHoHpdUHN4SvBc6+okllY2ac66zsWeqvzgGauM1yT7k0F+z3pVduju3HCnWnkXCIZQYtYCVjZbAlWfxACwvEf5LLCwJSb/rAPG+5cLnm2fEFjd9TODKuhUDE+NtK2qGmWSYL9qMN/UdAg7OZutgIH6LbvqGmmsz+nKHXPW+sFjH3lfns9zWAAsaEcl6KWluCyc8vAGBKGxpbVZA4+TlZ4dboSl7GkLgkic8kXPlHO1eo4sSniP7N/jfJn6EbD8+C59+CcODrA1ZADbgjdEKMbV3Qml+pbiTB6hj/Qp9L6nbDXXszxxHFrsiwmbvXKqgmi7/M6lYEK3BzZaw0qbS9XOl6ajO6ZQMD4E89axzbYtUOHxeLDC92dRC/uWxk5vIxxV9y0d1slJnNeunJ5H45GUV1ud5o4MJLmpoWTphBZk6oA3SZz6Jc6yRIljifFYRcmHmRXYkgitu4rDrjFIUEoJG2agkt5/fIBNUHGpMdsifR5UyGi91gJrhhmw7otKvqBf+kNwlF4TggtTUZvyrD8zYwMKN/M+ijQr2F0G3WHsARTyWEg9rrmqaxRrIRxorpsZKGzOdpOepvUG/mDm6g7FtMfXFVmkPj282+RGMOt4XND1CZ36Yo37jW8FPT5HNpo1Eb5gWvOprRelqnTOY5/Q9HyV2SStXBfkvfsqY2qKcMoEBOu/mrio7QF7AVXnCO3fqNZFONEC2qYLJdYBqbJ6bNpPJn/YvowOLWAwtSkBCvOn8gWzZoAfL87sUtprjOJrR0CFvHZLRKNamypIhRJiA0oGyyUdpFSXY0wxfbJ2u+oErci7o7+4Ny6acUxJ3bND5e/p4VNan3cUUMhJH3ZpdNIejRchNoQhHYgVxkpVgT2Fx6FRJ8DCVfOMB5wc6okRsw0ylgQyF3aCQpoh7DOfp/o0cX5QuTOAMuaxB0GnltGNbq12ChR3SBC9I2zZDXOlAy1UQ8ti+Q/pZgceozvN4Nl6thGBCwdm4kRToWIO2Zw3k1d0KIE38b6zoIpJ8G8U/iqp8i/hWiWv7HhY8Ny3LQ4YMPVvuFsnyjl96zEd7vG0V94dIz7QFyOc3wyK+Z056zsXQ2/6b50FlCmsQZZkKN0yZ9CbHKPIAycGCA2ZbbZ6OKwx878Ym4Tcp1tDujMDwp1NxLBQBDvnCAGFLZtAytyoH6CMDIOlaq+NNXgYsBW2Hvdl6c43MjHqnirs6f9dXTGForeNJraKd6kOuWTolNZnoKvfVanZxee8/GjETcU0D76goW74k+p6ckqHIhjne9MVgOI9z1rwROPEUrqdI/Ybbcjxdq5quyTlv8IYIXbUttknCxK28uhF653gd3NldsghqZaRuGjeEP6hG7NiI3yhz8U0k+9TAFRJ/Y88q3wbXsai1duUV6Ty1jFt2Ze88MI0GS7VOjvkE2OPf15pl82ws/W2WGrxHD836PCGfNVlcV62sbf7yfPDGsTEvggDxjHrEo+67J2iec+PcVxd3JzAo9if3o2Aovm7oUmtSmEC7H+kusSga8PbIxvoZhJOicV2kTCc/IjgGe9FJvi/5EjLyA1WFNTHqHutz1VVSg7Yho1FaYGe64s1rm9wj2knOOEdjzisscuBwUJC35PAHK6BHgPFAyb6f+JG8CzDSQ04wMjKZx4Onhywf0VWyFWpQokCcMZyBaheJsVwjemZ2gnz21KDm2RTHO7vjhMIbC0s5OOcgRFkpWl56i8sjp2FsAim4eCRiUo/AgJ7cOJiYje6Oh7KOeCQ8TPI+2FcCoIUiwqwoT3O45ECkTmYOhcPmtyq2u0SSStbyE96D09s/hy2TeTH6Fng79GSWpYVesVSa22UYt7g0sGCEKGRw7kXVnU8Qk1f/cQu3UrCrzXc3kVGj/2IqW3OzdsQXLxuu+oM3Mh3znaoc4CfpOaqqnHSGI5f6Ts+4AuPHXMCUNGj9SL08kHYUdjK7z/uPyHg4JLMkEuWyr0w36vi7BCPqxVo7KArhn55YfrtUTMrEJ4Bxy47O0PgKazJd2bhISv1AUizszjXeXF6cMnqLaFHQKpVgwPyf86ACCXimm3KEwgibBOumxVYEZPod8uD+hINKtuTZbWKKPj8GSvXetJvvP/hudASyNpEVZy5U1UT63ZQoVGxRRB053ni4nZl9JxonKlUvxk6oJiZ1465ghWP0cocMKnVVQSfdlab41KMEnDAJP+rmHXRIACSYEiKXODoywkA0/DDQS0xjMq9MG5B0A6YESj94oECXVTak1MZXCnFcEwNzuMRDsDkGV7kazBDp0y0BuA1wPne9R/QBDEgGrFNkZ0AlbkbJ1bRCQBWZkOluKmdFYjqxP+sSbHio32dboWASYuovxrAaMiw8B2oT4F34LqEUChzSq+yMgJlWJMGllY+3VVriRPhbaoYWvltLFRYtVX5pTUVAS1iVPgRKOaGkJHxeMNQzN7y3lxTXaH3XIoXpAWfARXjlOSLBZIqfHjgL9wwQFw+oQmC6jFs8ih3DBSFgQ3vmyarWfOtPUBXxdKMkGp3GUE4tX7ayg7l0L/d0nH9HYAqwSXHn8W3DSaZNyFQPQDLONLdI5CxSwsaBDbcO096jfE/HT8nqMQVINuQq7o7A467IUmty+D4tWYEHYRMj795ZLg49vU2LnrjBRXGvyzmF7lrxjYcMyDBhtpS9E262DW0KHUz2xSjPgS+xPNgeV9Lgw4w5ta06mHKZuXnEGg/PXFx+/0YCYBM2LOU60CKL8K99HGrlJJcBOi2zE+tb4RcBYPUX2vWgATf/080FuBernpYlzwL3BPdJQ338DDqIkKnKGhcoFLswry0Zl5EUEX1jkm/3WeHpHGGP8WwFMaIvem5nwKED4Sbu+XjoHoIx0uix0W/g4RZmnhEm4a+73Xy1EBdzhChk8XBydPcq5+Ziy1Ca28bFo638kW00Jr5KMXE+/0WpE077LUOQJsYoZctBcmbgn/Cv2dh3ypMxEM3R3hswB8b9Jirh+71d5ytYj7TznulFB4BMfH/eroZI98glGD4tggTwrzLiw66IT2mg5FviWkQw1qQDCe9AlR6GfQml6nZzjQi4qwboyPwmocBdZdLXNTK32O70LjpqShdi7dN8cdNcCy5Oo/qEQCpAq6/BKRlONOhmrI0A30HE8fw2DRZMzsAINUmN8Y9qRAHts0BKVRj8lRvwngW9hp3S6CUUeMlVYL/M9FjA573NgcmI0aMGDFixIgRI0aMGDFixIgRI0aMGDFixIgRI0aMGDFixIgRo0ZH6fnq5AyDJptnGOKUnp3tg1UejYRw1DLknmXbZK0sFfLUFgGP6THa7x/Wrmn8rK3rybOw8gdbY3JjCHUtWzWTaDxnF6UaQl+mBwhwZdsF6k5sixuGYHMnO9kyoAISKLtIX1PubAfpK1hy5jDA0g2qWOmmEpoNbIt9C1h1xSTyJYFJgT90EbBqp1LQ17QBLPVhC91KvoHj8Gdsmz1PmL8PKdj+cCROkthg7Gu1x8hcuvYtC+BaLbxmdJzfq3DUdY3UyQ7RRSj89aAu4SP4s1I4EofqnZVg1wNkGkJft9oTtEDVlW1zw1G0rsVfxJur0Ag/g6XzUDvQ3lQ7QHcn7CPWteTLqc9doj+DzXsjdYoBEvWiH9t1JMKMmXFmQDKoq6h/Z9V3cZKSkn6QVhD2Foxwezd7Z/ivpD5TXBz4Q/jMP2B+T3PkDUUalxSZZhZ2fZW7ZqHm30uKgn/iyO9m7wl/LqNQ/U+473+t366pzb/flKv+A7xw4TRn5GuCLV0royj4WVwDvJf0PNWb9p4E9gCLp6i45r9GfYgC1mfQ0eZnjgKLJ/j9ZJEeZ88gAQDPGUqvCoQ/Hwj+7y4sgsVqmI0G5d+sSLx+CBD4s65bcIE60RxwsCkGlQF+dkfi92/A/SxaVxT+G4n7Lpf8znx1KffzAnUr+HcF9fO7oE9ORRBbf9mUf+QsY/N1uA+WcgquBUxw0Fp43hrhdQhp9lR6vqab6V6/pz57H/qC7knLD2vjKmBxQOAa7Fr/vCPAwqJfiRZIb1mXViAhqIe9wr1dBvVOs37kBnW0c8DSJOFim2+8Jor7jjyVP/z8uH2d6VRfZRo0Le0ClkF93rSZjyxer0C10fKLFvYOfOaWlfs5jEaNLWChqwb+nWrf82mSXAUsbATClctRUzWcBpaxw5BZOZ7Nsjv0XZkvuHqB6f+HmB+HKoOla+CxAMA7J/FGIos6AiOgjBJFM8nBtodfZhaEPF977wWqNfB/30p87q4F6Wd+HwZNO/pZ1hcH/hRfLnsGGlD//gzWIA3+HFj70uarFjrU396gHuEKYJmsv33U7xQ6AyxuCgc2aKMa31oFFSem6UWE44Nb4MIuv6f8Wg8s6UY8pRiUPxcfq7X8yCQFbmUUdX2FPwYBXLtNP/86I189Af1p3Pdv1/zJBBx6QFQcrbvh70kdoWkGTUKqIUyBeg9IvCIJqbVGpAcVaEZJSJOjqflKNV4Lr4n3akviGKWxCHwnMvLDQjkdK18TAf/+mPr5PTyCXQSsbMo6PGoNWNh7CyzFwTxjk190V2AbTeq7r9vsgIgLRT3YdaGnHUB2wPwNVw2yw3t/jJ7GBW/iaEuKalpO2G/hTV+cmhP2gkhxNh4ltPTYLuGDGykCYK7672agrxj8I9GRDMewhN52gpIin67NUz1j/hnle2LpbA4s+L98WtrSLyYo8K9ROlztiVFfYEXqZRup3zlhQ2LZwwboyfGGbWswX72EevhC3iLj3iqDajm1yPucAFZevcJM4g06aA+wAJQ/lrjWOvr4MrMe4ZilpQwclzMs3NddS8AyHaf3qZdytqSlaDQQLCr/3gQstC6xjeXgwc1/ZNmMNkqD6w7qOI835alecgRYAMZMR4CUtqvj07jBafnKP2cWdPsLXG8HrTg7Cyy4l5nU526ZuyVUrSWOuEBHgYVGhqi/eoG6vYXrDBRPozCXbB4C1m06Zgi61G7adWHifIstJ+FN6ehMz3A0s10NLPTp4BEAXCmhlxBXAQuljzVgoSNY9H1wb44CC3S3EFGv9Xzl25L7wOl/tEM67K36Agu851uo3znsrFUInv8YsUdfES4NrAL1eqcmcxnUR1wFLJSaps1+5MA9uA9Y+ZoY+jpS/jNbwJICKBojktcx+tqo6RGqd+uvvIvm+BicBZbJGNhDN7VrZsGkpiwbVU88gmiWePAn1jzijgBL5OpAK7RAtZk7HvJUHfD4gL+XeQpYJt8XLbFecxRY6Magr0P74AQgDLcFQkeBhaEY09EmdGjOrx+wZFOoz9+Q2FDRAt5FV4EVBdrMmkLzvr7AQktLYnPmS3z3Vk8BS0rHAl2vreM6ljj2CpZvD+mjUOQquY8vfj097/3FepGsY32ABeNvplKfv9PM1mbBOb/N2kXRoqEW6Vx9gQXjOd4XH7NhAQ0JLIwFinU8zSILwLpnw93whT3WscmxLDw59tfHKuRm9YhnTl4Upc84ACxU1FFHo4B6QRQIpUftWgvXGN8qZQvRGwiB2foAy+jOoA0DlVkUPq1QLZMIrbgNWKZr7acjB7TiDes11paDFBIkp1Of+R6VekpaDRdLSE1fZ4AVNqLlC0bnpsihSSDpr5sz2Q2c5x2cofCzdRKuh8W0N3iORNB2CGYAWIgD/tp0dN6jAYPBU15so1luFOuqr6gFh1nIKj0CiXYriJyDkPuFEgLCRxPTCjS5FkJEH6P+hUc36iLotIX/K5bIfJ2ODmDu3nZ2fZH7nNjHdh8+NwWepQvvGJbSeYAfoufemLJNSxhpYHHrZlBfk4g+FJsiCgclrnNa+EL0HCV7BS0yAMsqCZP/tikHC/kbK/Ny5ptbeDDpQiuLB+X+nGikXt31eLY0cuUe5nUJxbMVa081z8IxOMja72EA2nTt/9qw5solLKKVdliBkoPMEah4zzZ+97TJfzXa1vfwKTFcmKsuzORArFAcRDYp8ffsDbLT0YJ6ZpA+wrGAdN6UCzJIH4iOYW8DljG2qPnIyu8UWpAgbgNWrWEhdszWAsqUv3bXnuwEU9jsvK21QYVfwmXgDLCecBNdoR26BbeBs8C6zzldpUI6mAdliS1bP5BCYuX3+Bgft3lWr6+JseTLAvBEwuJuMeVOlWNKCwZ9TT//MRf4pa6HQXK8Z2vfCTpb/1p9zsrnkOkEQJRcnD8K7gWOv0PIGBJCA8PkrqEKT1RjLOmomPtlVCe4VJsy43OqSlBiY7EKfpe0dQdpyTBMyk4ebWxH7vdbqx55rLqx/5qJONwJ51uzJsMeIHRgShxlPdnKMLIds4SsC4suFZBiNLAwJ42tGiN7siowO7UafXh4pKYXqjqbQj45EjpSPlsxRjYJCygciF/ewCwMtmqMbB+D4NeyE1TVmPTHVoyRXcRVDhnBhYUQn4s86AbVKXBHxFuLrzJiZJMwdQaPO8zVZ1XhjBgxYsSIESNGjBgxYsSIESNGjBgxYsSIESNGjBgxYsSIESNGjBgxYsSIESOfof8HTVJLdhQ2ZBkAAAAASUVORK5CYII="},function(module,exports,__webpack_require__){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='  <table>\n    <tr class="tableRow">\n      ',!0===content?__p+='\n        <th class="collectionInfoTh">\n          Run teardown:\n        </th>\n        <th class="collectionInfoTh">\n          <input type="checkbox" id="new-app-teardown"></input>\n        </th>\n      ':__p+='\n        <th class="collectionInfoTh">\n          Mount*:\n        </th>\n        <th class="collectionInfoTh">\n          <input type="text" id="new-app-mount" value="" placeholder="/my/foxx"></input>\n        </th>\n        <th>\n          <span class="modalTooltips arangoicon icon_arangodb_info" title="The path the app will be mounted. Has to start with /. Is not allowed to start with /_">\n          </span>\n        </th>\n      ',__p+='\n    </tr>\n  </table>\n\n  <ul id="infoTab" class="nav nav-tabs">\n    <li><a href="#newApp" data-toggle="tab" id="tab-new">New Service</a></li>\n    <li class="active"><a href="#appstore" data-toggle="tab" id="tab-store"><img src="'+__webpack_require__(398)+'" alt="ArangoDB" class="tab-icon" />Store</a></li>\n    <li><a href="#github" data-toggle="tab" id="tab-git">Github</a></li>\n    <li><a href="#zip" data-toggle="tab" id="tab-zip">Upload</a></li>\n  </ul>\n\n  <div class="tab-content" id="tab-content-application-info">\n\n    <div class="tab-pane" id="newApp">\n      <table id="new-app-information">\n        <tr class="tableRow">\n          <th class="collectionInfoTh">\n            Author*:\n          </th>\n          <th class="collectionInfoTh">\n            <input type="text" id="new-app-author" value="" placeholder="Your Name">\n          </th>\n        </tr>\n        <tr class="tableRow">\n          <th class="collectionInfoTh">\n            Name*:\n          </th>\n          <th class="collectionInfoTh">\n            <input type="text" id="new-app-name" value="" placeholder="Name of the Service">\n          </th>\n        </tr>\n        <tr class="tableRow">\n          <th class="collectionInfoTh">\n            Description*:\n          </th>\n          <th class="collectionInfoTh">\n            <input type="text" id="new-app-description" value="" placeholder="Please describe your Service here">\n          </th>\n        </tr>\n        <tr class="tableRow">\n          <th class="collectionInfoTh">\n            License*:\n          </th>\n          <th class="collectionInfoTh">\n            <input type="text" id="new-app-license" value="" placeholder="Apache 2"></input>\n          </th>\n        </tr>\n        \x3c!--\n        <tr class="tableRow">\n          <th class="collectionInfoTh">\n            Authentication*:\n          </th>\n          <th class="collectionInfoTh">\n            <input type="checkbox" id="new-app-authenticate" checked></input>\n          </th>\n        </tr>\n        --\x3e\n        <tr class="tableRow">\n          <th class="collectionInfoTh">\n            Document Collections:\n          </th>\n          <th class="collectionInfoTh">\n            <input type="hidden" id="new-app-document-collections" value="" placeholder="Document Collections"></input>\n          </th>\n          <th>\n            <span class="modalTooltips arangoicon icon_arangodb_info" title="A list of document collections that will be created specifically for this Service. A CRUD API for these will be generated.">\n            </span>\n          </th>\n        </tr>\n        <tr class="tableRow">\n          <th class="collectionInfoTh">\n            Edge Collections:\n          </th>\n          <th class="collectionInfoTh">\n            <input type="hidden" id="new-app-edge-collections" value="" placeholder="Edge Collections"></input>\n          </th>\n          <th>\n            <span class="modalTooltips arangoicon icon_arangodb_info" title="A list of edge collections that will be created specifically for this Service. A CRUD API for these will be generated.">\n            </span>\n          </th>\n        </tr>\n      </table>\n    </div>\n\n    <div class="tab-pane active" id="appstore">\n      <table id="appstore-content">\n        <tr>\n          <td>Fetching data...</td>\n        </tr>\n      </table>\n    </div>\n\n    <div class="tab-pane" id="github">\n      <div>\n        <p>\n          Download a Foxx service from a public <a href="https://www.github.com">github.com</a> repository. In order to define a version please add a <a href="https://git-scm.com/book/en/v2/Git-Basics-Tagging">git tag</a> to your repository using the following format: "v1.2.3". To connect to github your username and the name of the repository are sufficient.\n        </p>\n        <table>\n          <tr class="tableRow">\n            <th class="collectionInfoTh">\n              Repository*:\n            </th>\n            <th class="collectionInfoTh">\n              <input type="text" id="repository" value="" placeholder="username/repository">\n            </th>\n          </tr>\n          <tr class="tableRow">\n            <th class="collectionInfoTh">\n              Version*:\n            </th>\n            <th class="collectionInfoTh">\n              <input type="text" id="tag" value="" placeholder="master">\n            </th>\n          </tr>\n          <tr class="tableRow">\n            <th class="collectionInfoTh">\n              Enable Legacy Mode:\n            </th>\n            <th class="collectionInfoTh">\n              <input type="checkbox" id="github-app-islegacy" value="true">\n            </th>\n          <th>\n            <span class="modalTooltips arangoicon icon_arangodb_info" title="Legacy Compatibility Mode allows mounting some Foxx services written for ArangoDB 2.8 or older. This overrides the ArangoDB version specified in the service manifest. See the Foxx documentation for more information on running legacy services in ArangoDB 3.">\n            </span>\n          </th>\n          </tr>\n        </table>\n      </div>\n    </div>\n\n    <div class="tab-pane" id="zip">\n      <div>\n        <p>\nUpload a Foxx service bundle. The Foxx service bundle should be a zip archive containing all service files as a directory structure, including the manifest and any required <code style="padding: 0px 2px; font-weight: 10pt;">node_modules</code> dependencies. If your service doesn\'t have any dependencies, configuration or scripts you can also upload a single JavaScript file that will act as the service\'s entry point or "main" file.\n        </p>\n        <table>\n          <tr class="tableRow">\n            <th class="collectionInfoTh">\n              Enable Legacy Mode:\n            </th>\n            <th class="collectionInfoTh">\n              <input type="checkbox" id="zip-app-islegacy" value="true">\n            </th>\n          <th>\n            <span class="modalTooltips arangoicon icon_arangodb_info" title="Legacy Compatibility Mode allows mounting some Foxx services written for ArangoDB 2.8 or older. This overrides the ArangoDB version specified in the service manifest. See the Foxx documentation for more information on running legacy services in ArangoDB 3.">\n            </span>\n          </th>\n          </tr>\n        </table>\n      </div>\n      <div id="upload-foxx-zip">Upload File</div>\n    </div>\n  </div>\n';return __p}},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASIAAADICAMAAAB7yBzUAAABJlBMVEUAAABXcThXcThXcThXcThXcThXcThXcThXcThXcThXcThXcThXcThXcThXcThXcThXcThbdTlfNBRfeDtgeTpjOxdlfTxmPhpnQxtnfz9qgT1rSx9uSSBuhT9wUyJwhkNyiEFziUB0WyZ2VCZ4Yyp4jUJ4jUd8ay19kkN+XyyAlEuBczGBlkSEdjOFezWGajKGmkaJgziJm06LnkeOdDiQokmRolKSk0CUpkqWfz6Wm0OZqkyao0eaqVaeikSeq0uerk2js0+kslillUqlq06mtVGqt16quFOtoFCtu1axvlizvmG1qla1wVq4xF27xWW8x1+9tVzAymLBvWDDzGTDzGnFwGLHz2bK0mnM023Ny2jO1WvS2G3U2nHV1m7V23DZ3nLd4XVDf9nYAAAAEHRSTlMADx8vP09fb3+Pn6+/z9/v+t8hjgAAEl5JREFUeNrtnfl/4sYVwDnELc6lOFFNU+qQ4JR26WI2bMi6pq6CUQzGKjHEsAb9//9EAV0zoxlJoxPsvF82m8+u0X558y69eS8SOXaJMgyTSquy+w0T+UM0Nqk0my/hpMDm0kkm+qbxMKlcoWQpRTadiL1FPPE0W6KQYi4Vf1OHK5EtluilmEu+DW2KJnMl55JPvXpKjCP9eTuUoilL61zjdlJvtfa/cGXSn2KTrxNQLGuChmu0ur3B0CC9XrtV5zB2KfP6VIkhOjCu1cWwgWXQa9WryN/LMW8CUL3dG9qWQacBY2KZVw6o1qTAo0q/XXuFkLA2qN4eDB3KoFV9XZCiaaOXr3duhq6k1wBt0okbbsbg5mttEz6CIIrz1V4W4k5mgiDwBFUCIoL0Cae6UTSQLjf6BDjj6Xy1lbCy2fGajNG/cANAKiROlVACOWNVvAKNJvOVZC2r+YQnQsqdpCJFETNd62Dw8NPFRrIv6xmkTYO6HkueoCLFYSvEYTy8MF9L1LKejUDDrXu37KkpUgo+Yl2M+mwlh7IQgNPW1C1S/HQPWblj4LOUXMkKgNTTLdIJZbdRqBjdRIz0xCUfGZJulG70gDt7MmYI9GQ12M2P5lvJG5nr/k2PJNnTMEigry+3YQO9kryTzUT7uS294HYKsXYSVCEoE5tuJG9lqSlSR/f+8ZMi1PIV0E620xNkBBAqg6GQ4AOgg9nmT40RQIgDHNloJfkl28lpMQIINYEwSJT8lAV/QowAQh3/z5iek4xPhlEca4bmku+yFU6EUUyLh8p6uDhaS0HIFI0hC8cYQ+pZB0BospWCkTnKKH+EjLIYQqIUmCzkT9RfS+aPuPqhE1pIUtCMjjinjRt9Gb+SpFAZpY/UEGl5K7+WpDAY9Y+0fpRRn6oRHiEjo2Ny/YyW2odJSJJENDw6GrcWVUv5ZS0vW0mhyBRhdDSuXztmvVB8GSgTJDzKHpk3a4UQD6G5yBhhlDoKRCxqiCZSeLLlEdd/DK0jan5fVquw422IiKQ1wqgYfjU7WkQionCcGdn1h2+y02qV0avqx3ouCgeZzZ35xRnCKGyTHUOPmeDKkiyQ9o+Jk/faAuL6QzbZWcSb8S4M0WbK45pHNs5MNvB2LX4MSlRzHxGtJ6TmNWpIa6R6FGqUnUWCRsG5Bpl1N9JCmiNZPxt+cqZlrzb/KQ8PD5938sN3B/n4+fN/ehYtoiLdAZY18kYz2ZnQEOUQWy1akdlj+Rrfp16tt/smjOjexW3lRq2+9tMTIVsiK1v95eGXHZp31teEqk0TSjMH5qgTdmFEsUTVG6Ktfvh1xwZz8YPjWjvp9g6y+y/9LkyV3LU+3lCbI91khxNBxpBa7Ah4wt8fPn806E2Na+JvDMF3POpdAiOqWq/iIGuhRpCqEsEO/zeM4nD1Vqdno2e/35QpVVuEP7ygNkeDcogRpJqdqQ5/9OXh84fvnLHRpSt3CpcJkERqc9QNMYJMA8nZoNuCbyFWuWa75+wujHJ7odzBh0jU5qgZXgSplGM7CJ0qt1Mc0g2PxWqlX2Q43PZYzcWZMMbeXuAGLhmh5ijoCDJp8FNlromFMxJE4g0P7VQsoc58GVIZa7fnzs1RsK/W4ix8rvD3N4WpJRwozweOG2foBaS32Wh0FFwNkknlioDutLAGWZgt6Itr27l+f6FdBlMbUNa05qgeqDliwFEWXBOrO+PpwnnpcaFB6lcJesRvaJM17a5IzmcvnwDwVOG7vz/9qMh/Rbfv0LYi1JiPs0djWnPUC6C+Fk1k8sDV346qPP/+8e/f/+WrCiQXl59uH188aM07MCoPXOVrK9TzxwLA01Utz8//+haBA8r51b1jTFof7J4RhzNH9lVVRI4a66vt2bktzTD/9P2fK5by/tHd63m5So8NJOzXjwQ/j1oM8Fw7v6U/4M///KpiT87vXN5e6BLUyP5RU0rZPhw1JlPA4hkOf/y2QiFOIa15zWEP3B21pS9HTZ/CBNgeBdBfKpRy8eiG0YAQHNn3asqbtZ6HvVkan3K9g36B9ID2cvnsiJFaFSvfuExExp7mszH1fFUxQz1+/lvFoVw78W5zVY2wST/FK7u1h9X+JKsOZcCc//E//lRxLOf3DhgJijWqu62LiEjpyKnFjikDPqqtAe5G/f8uKq7kPb0irZQstIyvLK3pYbvKQ5QRMbihFePZzn3cnVVcyvmjMzW6AZu5oUyZ4lUmD5dFHKT8TE6ZyYBaRn4iD2S4qngg1846YWqlNl6NVrR2re3Y8StTmBo9nPrs5eWy4onQHrat4tPqQ7dqpBy1mjM1kgGVG4gFmsy1msPLRcUjuaBkNJZ7PKpD12q0hoMjlh4Q8sYBauzxjhA1o6niiYbu1UiE3z0yrgAhjU9eEqJlJCpfPelFNoVTk0tHmsW2+eoxhgFkGMjgLaEdIyeISLPpptQhRIsmNpKnn8CApobT7TWhSuXKAaI26R32ljqEKNsPsQ+BIgSIFzFFYc8JVSq39IhapBeTNG1xG0iNipZGqICOheGxbU5XFR/k0TtEVH3wcspftZXwRw/3Nuqgm59hVdYXQpWzFypEbRNEQ/pG0Y4dv39QoRo0sQLvGm4r/sglldNvmSFaUVv/YdnaYKcPRgg0eoTay33FL7mlsbB1M0R0d3JGoDUiVrGjLNpSQLor/nLmG6Izm0U2XskayIjomnQXoFMrkF7GF0qwD+WJk7veV/wTe0dtq2T6Joh4iV6NmqYdR/sxXtW+DRXy85jt5d52tNczRTSkazdeKoVMcqdIsgjPzSGrkPRy7iui8xe75rVVIkfX9JdMBaC2lif0kjdsNqFeV/wVO8WjiVrA8A7RCizRxrCnrGHzfd3zmc+I7ARHvGKKSn3PEMn1lSrBp8VgQrxp8H5VqYSuRist0jO7++CkktkinLQ8TMi0kPDsOyEbajRT7UbZBBH1HUEeMNhRw2VxoMBpMVrok/+IKnd2PPQAujPpwUGTwddwedrOVNd0X2ZxyfflLABEVpWjtVaRr3uJaAMU+nNoE3DfdvPJbSUIebbxdVdL5mGRg8kSY9UJIBWRNPhBltegzwNBdGt9zuR6fNcEkcMX4TXDLaxoUb+daV3yfQqEkEX9camX4018/ogeEXjSMpAS9eyX6q6CQXRpGTcq58FEiZzMlhjrPq0AKhFH8VPPjgDRRo9fOC99PnLS4sB1hJ79kvh9MIQqZ5bVtDI6a9TNayLYVTaRADsPfBPWY8sDOmemWrQBaqgdT02REj324PJsDPgYGzWo8yNANAVSqYFHN2bhH64E2AqiFNWEqueACJl5NFCJzNIPZxNsF8AQSEadMdSgUKK7oBDd2lMik9ja4ewEwBWoxgg4ZzaC0aBMUeXJPMdvo5MQvQitDcYop6ZnNxTm7SJ8hzYGXy33vVYipVYHRkYpPbK2E0YEpUSfzAMXtQhf9l6J5IovBxREslRTPZ6CQvRs2pk4MMzT9E6J5IPcBOw1qx1nO+fsMXSXL0BThzseuzPt7VMHsNcFLbS2048TVGz9aHrMtM7N0o1XJVnUXveBTFYPvuz0mlyHHBQdLn/o/b814gwRF4RkRQXiaz1VXh0NImLlWr6xoQ/3JnZfudp7AFRnC/L8Tpr6UzCR471p0KgfM2L24e4O7hz4Hg5hUZUG0WOoDn8Bz2YinjOXc2xXQHwd3yPiaI7vS5jebAVfryOeM7eTfteArjIgInuBxKXvhIidxfI9vXrJ6py5n4UMNKon6RE9hkZoO4YnMhIKjl7M9Qe8fjoSiVIi8tunWRDqgNNIcHGjJzt8AK+/76HR0hy7Ebuv72LfmxPqg6N+MPkZ783AcSQw0py+7TLm3VnwvgxDyFi1HokezYqe6oERe0hAqN/LvVz7A+nszpwQ6MwMxno0W0peiQgHRqxWcqH4Cl78sEgXzxaEahChD5vDpKyluNz/InkpSDkko6WxVB/z7Hn5kdxStB5hCJV+l3wTEfCdzP5VbMtZcuwtJJPr+iseR+iDFAyiVCSS0MpS1K93nzyLI80mY8h3YAcIIT+VCEKU3uexnLMu5UMg6QmkM7NhBtOh0Zft5LPkN6KuXuHXU30n73fdQzIFtBnjCX39xXdEwBvZvGavnVXq3EE6vzXralR2v3YMQxB/lYJElNVisJHDn/jk2HBf3lk/KpyXyfKDFBii0uEtUdXNSZO927WDV/3nn8yb9ZRDdlM3EHr3JQBEwHt9Ro9Tpy5+7P3VGR2fJ6van3zI+rVSwMfMiCiiZzu8uxzn/sqmLl3eWvHRpsp1yqWgjxkGEaufNNd7p57vrsxfaZ+/v7Zz+1UZl3bTwIyY9/uYqUMxAURAqyPvSar8dH99fWmQ99fXd0/2foCqQv0qbgr/g9+ElBkiACIGeO8b3voyoxXCeLK9fPT/AUYooghQWOC3oQNaK2uncXZ6J98E8AhDAFFRXdnRdNf85p1oU2TxKlR691sAzwAiYpX+GaCXL9wVZuosYoIKlUq/BPAQKyOiGHiTYnwEZ+ymSVqY8iGQ7wkcZ5TVLqPpZc7QLPZWXc/UrZIIffMliAcRQURp7TYa0My0DskI8eDY+NAMkYTsmUsCu0t7Nq+j+aTcvLp8wGQv0S/BPAvkLxhgKYW2PshVqubOSg87VRNCHwOyiPKjcFB3urzapOnqeokLWaqA+pzZbqvvAnocJeyowpeIY/AS5UC3KK8EdQx6w3T717svAT3QeAhMfcjCa4L1UfbBLXjVAbXK5oR+C+iJNkOMtdb2v+hXiANipAEyN0IBmmp1HJY6wTCGrqKqe9qDYh9Qr2a1ZO9jUISUWfPKbbe8caFZYxiYPQIAcZZrCP+6koI11h3jaL6YsR3e14x2qQEaNKwXNe4swGi2CVKJOMwUI3VfRUPv9hZ8iyH1zTl2AKlJtrAITIkGuFlYDPCN2Zhg5MZliDwVICAa8ayDyMKdqcYamT6jrT0p9+3MwXJsgvRdwn17gPbz7/ReoqmvvlaAlAidYZTENuvyc28VSF/gZcNIAwKMkxaWfh8ztS03S9geiO75G3llAbYLQf+pnVqJUgBII5+M0kr99khDnRlItcEeuYX747aB1uS1qiUHUtczJH7mw3nbqNWGKnFEKLw/EBxX4vKJ1iK4bLHXKDkVDpibNl54bCe36kM2yZPBGfLz7J5o7ozSej7hwbWmbRoFKppCGk6XfhDqms2ZzaHPAzd/j6ZLqi9uvRQFeKNpp06lNMW4sl6DCGkkbrwmpPUyYYdfxgzfmmE1ymgirizVab1aiBNk4Ss1H2VFubqkhaje3gSUW3B7n9lY8DTOSHZw614noiiuIJnv/o8oCOguXKd89CXu0XShZKrevPtYaT1CCRH3N+WxkVu9Q7VrGpVeq+bANINr7pMGSFX4i3Npu9XKOdCXmyBOuyYmkq2eQzz1siPnVYRNQYK1gORClbT1jwAhkyUOGbN8G79kmbjevdPkHLv3Ypyw1gYK3mDldmiV5ryRUN5sTVre4tmrXKvd65uyuel1W/VayY0U4+TtUYSQW47fqB3cSk+J9L7couny+HjR3j+ixnGN1k66PU06u9/WOXdszB8RFwMgE/kmVLHSAnAuwLXkBO0a88DF5EuMZYyBSRs+b4aFLnaSauglsOXCxuwREzrEAAZI5SYSvdkIuzdzKDppA07Fxr6d/DETwkNCjdJwZJZVbpczOHqDCjN2NhJFC0dNSNsHZA5pny9tcEnRZIT8Qbj2aW8tql2THRYhvOE2Qtq5OGEqqjIRBB7jf2FARbuLY8NjlLe9cDOGO27U8W0XDt3ycbsfHxqjPM1mW5xNqtHkSobSXobm48NhxNLu/k0WcHm3LUqDNhrBFRJ0Hx4Go2yEXpgcrjrZ7lucr6Yxws1Q72YOnpHD3cixNNYDc60ullOv08QlAKyTrcOxgOMjF0vIEzliRlnfZUVtPT0ilIVZxtkHR3NBOnsm4kaiSRdfaNbFZ6eO0NmTtT7liFIx4+6j4wEF2rloxAuJJnOUFjSXdP+hmSAIpSLeCZNm7fPx5pthCkduhvCYrLQpn0l4+IHpkzhkBtOUSLP4b7fAphmvPzPG+qhCqYiPEmVSaZaVVaq4+49MOsH49FGMXzESRd549JIsnJwKvQZIbCzy2iTpqU0qJCKvURjPav/FdOS1CiGvpgYUjbxmYbIu6ySFVw5Irj64oMQmI29EEhknJy6fikXeksSSWRpM+WzybfEBUiEbh47NJKKRtyy7VCjDEnKUPJtOMpE/RPV1zC5t1GX329P/N/0fvVS+gk+WV1QAAAAASUVORK5CYII="},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){if(__p+='  <div id="modal-dialog" class="modal hide fade createModalDialog" tabindex="-1" role="dialog"\n       aria-labelledby="myModalLabel" aria-hidden="true">\n   ',null!==title&&(__p+='\n   <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">\xd7</button>\n      <a class="arangoHeader">'+(null==(__t=title)?"":__t)+"</a>\n   </div>\n   "),__p+="\n\n    ",tabBar){__p+='\n      <div class="modal-tabbar">\n        <ul id="infoTab" class="nav nav-tabs">\n          ';var counter=0;__p+="\n          ",_.each(tabBar,(function(e){__p+="\n            ",__p+=0===counter?'\n              <li class="active"><a href="#'+(null==(__t=e)?"":__t)+'" data-toggle="tab">'+(null==(__t=e)?"":__t)+"</a></li>\n            ":'\n              <li><a href="#'+(null==(__t=e)?"":__t)+'" data-toggle="tab">'+(null==(__t=e)?"":__t)+"</a></li>\n            ",__p+="\n            ",counter++,__p+="\n          "})),__p+="\n        </ul>\n      </div>\n    "}if(__p+='\n\n    <div class="modal-body">\n\n      ',tabBar){__p+='\n        <div class="tab-content">\n          ';var counter=0;__p+="\n          ",_.each(tabBar,(function(e){__p+="\n            ",__p+=0===counter?'\n              <div class="tab-pane tab-pane-modal active" id="'+(null==(__t=e)?"":__t)+'">\n              </div>\n            ':'\n              <div class="tab-pane tab-pane-modal" id="'+(null==(__t=e)?"":__t)+'">\n              </div>\n            ',__p+="\n            ",counter++,__p+="\n          "})),__p+="\n        </div>\n      "}__p+="\n\n    </div>\n\n    ",hideFooter||(__p+='\n    <div class="modal-footer">\n      ',_.each(buttons,(function(e,t){var i=e.type,n=e.title,r="";e.disabled&&(r="disabled"),__p+='\n      <button id="modalButton'+(null==(__t=t)?"":__t)+'" class="button-'+(null==(__t=i)?"":__t)+'" '+(null==(__t=r)?"":__t)+">"+(null==(__t=n)?"":__t)+"</button>\n      "})),__p+="\n    </div>\n    "),__p+='\n    <div class="alert alert-error modal-delete-confirmation" id="modal-delete-confirmation">\n      <strong>'+(null==(__t=confirm||"Really delete?")?"":__t)+'</strong>\n      <button id="modal-confirm-delete" class="button-danger pull-right modal-confirm-delete">Yes</button>\n      <button id="modal-abort-delete" class="button-neutral pull-right">No</button>\n    </div>\n  </div>\n'}return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var figuresData=content.figures||{},revision=content.revision;if(figuresData.figures||(figuresData.figures={}),__p+='\n\n        <table id="collectionInfoTable" class="arango-table">\n          <tr id="collectionSyncBox">\n            <th class="collectionInfoTh2">Wait for sync:</th>\n            <th class="collectionInfoTh">\n                <div id="show-collection-sync" class="modal-text">\n                  '+(null==(__t=figuresData.waitForSync)?"":__t)+'\n                </div>\n            </th>\n            <th class="tooltipInfoTh">\n              <div>\n                <span class="modalTooltips arangoicon icon_arangodb_info" title="Synchronize to disk before returning from a create or update of a document.">\n                </span>\n              </div>\n            </th>\n          </tr>\n\n          <tr>\n            <th class="collectionInfoTh2">ID:</th>\n            <th class="collectionInfoTh">\n              <div id="show-collection-id" class="modal-text">\n                '+(null==(__t=content.model.get("id"))?"":__t)+'\n              </div>\n            <th>\n          </tr>\n\n          <tr id="collectionRevBox">\n            <th class="collectionInfoTh2">Revision:</th>\n            <th class="collectionInfoTh">\n              <div id="show-collection-rev" class="modal-text">\n                '+(null==(__t=revision.revision)?"":__t)+'\n              </div>\n            </th>\n            <th class="collectionInfoTh">\n            </th>\n          </tr>\n\n          <tr>\n            <th class="collectionInfoTh2">Type:</th>\n            <th class="collectionInfoTh">\n              <div class="modal-text">'+(null==(__t=content.model.get("type"))?"":__t)+'</div>\n            </th>\n            <th class="collectionInfoTh">\n            </th>\n          </tr>\n\n          <tr>\n            <th class="collectionInfoTh2">Status:</th>\n            <th class="collectionInfoTh">\n              <div class="modal-text">'+(null==(__t=content.model.get("status"))?"":__t)+'</div>\n            </th>\n            <th class="collectionInfoTh">\n            </th>\n          </tr>\n\n          ',figuresData.numberOfShards&&(__p+='\n            <tr>\n              <th class="collectionInfoTh2">Number of shards:</th>\n              <th class="collectionInfoTh">\n                <div class="modal-text">'+(null==(__t=figuresData.numberOfShards)?"":__t)+'</div>\n              </th>\n              <th class="collectionInfoTh">\n              </th>\n            </tr>\n          '),__p+="\n          \n          ",figuresData.shards){__p+='\n            <tr>\n              <th class="collectionInfoTh2">Shards:</th>\n              <th class="collectionInfoTh">\n                <div class="modal-text">\n                ';var allShards=Object.keys(figuresData.shards);allShards.forEach((function(e,t){__p+="\n                "+(null==(__t=t>0?"<br />":"")?"":__t)+"\n                "+(null==(__t=e)?"":__t)+": [ "+(null==(__t=figuresData.shards[e].join("  -  "))?"":__t)+" ] \n                \n                "})),__p+='\n                </div>\n              </th>\n              <th class="collectionInfoTh">\n              </th>\n            </tr>\n          '}__p+="\n          \n          ",figuresData.replicationFactor&&(__p+='\n            <tr>\n              <th class="collectionInfoTh2">Replication factor:</th>\n              <th class="collectionInfoTh">\n                <div class="modal-text">'+(null==(__t=figuresData.replicationFactor)?"":__t)+'</div>\n              </th>\n              <th class="collectionInfoTh">\n              </th>\n            </tr>\n          '),__p+="\n          ",figuresData.writeConcern&&(__p+='\n            <tr>\n              <th class="collectionInfoTh2">Write concern:</th>\n              <th class="collectionInfoTh">\n                <div class="modal-text">'+(null==(__t=figuresData.writeConcern)?"":__t)+'</div>\n              </th>\n              <th class="collectionInfoTh">\n              </th>\n            </tr>\n          '),__p+="\n          \n          ",figuresData.shardKeys&&(__p+='\n            <tr>\n              <th class="collectionInfoTh2">Shard keys:</th>\n              <th class="collectionInfoTh">\n                <div class="modal-text">'+(null==(__t=JSON.stringify(figuresData.shardKeys))?"":__t)+'</div>\n              </th>\n              <th class="collectionInfoTh">\n              </th>\n            </tr>\n          '),__p+="\n\n          ",figuresData.distributeShardsLike&&(__p+='\n            <tr>\n              <th class="collectionInfoTh2">Distribute shards like:</th>\n              <th class="collectionInfoTh">\n                <div class="modal-text">'+(null==(__t=figuresData.distributeShardsLike)?"":__t)+'</div>\n              </th>\n              <th class="collectionInfoTh">\n              </th>\n            </tr>\n          '),__p+="\n\n          ",figuresData.smartJoinAttribute&&(__p+='\n            <tr>\n              <th class="collectionInfoTh2">SmartJoin attribute:</th>\n              <th class="collectionInfoTh">\n                <div class="modal-text">'+(null==(__t=figuresData.smartJoinAttribute)?"":__t)+'</div>\n              </th>\n              <th class="collectionInfoTh">\n              </th>\n            </tr>\n          '),__p+="\n          \n          ",frontendConfig.isCluster||(__p+="\n            ",figuresData.figures.compactionStatus&&(__p+='\n              <tr>\n                <th class="collectionInfoTh2">Compaction status:</th>\n                <th class="collectionInfoTh">\n                  <div class="modal-text">'+(null==(__t=figuresData.figures.compactionStatus.message+" ("+figuresData.figures.compactionStatus.time+")")?"":__t)+'</div>\n                </th>\n                <th class="collectionInfoTh">\n                </th>\n              </tr>\n            '),__p+=" \n          "),__p+="\n          \n          ",figuresData.figures.waitingFor&&(__p+='\n            <tr>\n              <th class="collectionInfoTh2">Waiting for:</th>\n              <th class="collectionInfoTh">\n                <div class="modal-text">'+(null==(__t=figuresData.figures.waitingFor)?"":__t)+'</div>\n              </th>\n              <th class="collectionInfoTh">\n              </th>\n            </tr>\n          '),__p+="\n        </table>\n\n      </div>\n\n        ",figuresData.figures.alive&&figuresData.figures.dead&&!frontendConfig.isCluster&&"mmfiles"===frontendConfig.engine&&(__p+='\n            <div class="infoBox">\n              <h4>Figures</h4>\n              <p>The following information does not contain data stored in the write-ahead log. It can be inaccurate, until the write-ahead log has been completely flushed.</p>\n            </div>\n          <table class="figures1 arango-table">\n            <tr class="figuresHeader">\n              <th>Type</th>\n              <th>Count</th>\n              <th>Size</th>\n              <th>Deletion</th>\n              <th>Info</th>\n            </tr>\n            <tr>\n              <th class="modal-text">Alive</th>\n              ',figuresData.walMessage?__p+=' \n                <th class="modal-text">'+(null==(__t=figuresData.walMessage)?"":__t)+"</th>\n              ":__p+='\n                <th class="modal-text">'+(null==(__t=numeral(figuresData.figures.alive.count).format("0,0"))?"":__t)+"</th>\n              ",__p+='\n              <th class="modal-text">\n                ',figuresData.walMessage?__p+="\n                  "+(null==(__t=figuresData.walMessage)?"":__t)+"\n                ":__p+="\n                  "+(null==(__t=prettyBytes(figuresData.figures.alive.size))?"":__t)+"\n                ",__p+='\n              </th>\n              <th class="modal-text"> -</th>\n              <th class="tooltipInfoTh">\n                <span class="modalTooltips arangoicon icon_arangodb_info" title="Total number and size of all living documents.">\n                </span>\n              </th>\n            </tr>\n            <tr>\n              <th class="modal-text">Dead</th>\n              <th class="modal-text">\n                ',figuresData.walMessage?__p+="\n                  "+(null==(__t=figuresData.walMessage)?"":__t)+"\n                ":__p+="\n                  "+(null==(__t=numeral(figuresData.figures.dead.count).format("0,0"))?"":__t)+"\n                ",__p+='\n              </th>\n              <th class="modal-text">\n                ',figuresData.walMessage?__p+="\n                  "+(null==(__t=figuresData.walMessage)?"":__t)+"\n                ":__p+="\n                  "+(null==(__t=prettyBytes(figuresData.figures.dead.size))?"":__t)+"\n                ",__p+='\n              </th>\n              <th class="modal-text">\n                ',figuresData.walMessage?__p+="\n                  "+(null==(__t=figuresData.walMessage)?"":__t)+"\n                ":__p+="\n                  "+(null==(__t=figuresData.figures.dead.deletion)?"":__t)+"\n                ",__p+='\n              </th>\n\n              <th class="tooltipInfoTh">\n                <div>\n                  <span class="modalTooltips arangoicon icon_arangodb_info" title="Total number and size of all dead documents.">\n                  </span>\n              </div>\n              </th>\n\n            </tr>\n            <tr><th><div> </div></th></tr>\n          </table>\n        '),__p+="\n\n        ",figuresData.figures.datafiles&&figuresData.figures.journals&&figuresData.figures.compactors&&!frontendConfig.isCluster&&"mmfiles"===frontendConfig.engine&&(__p+='\n          <table class="figures2 arango-table">\n            <tr class="figuresHeader">\n              <th>Type</th>\n              <th>Count</th>\n              <th>Size</th>\n              <th></th>\n              <th>Info</th>\n            </tr>\n            <tr>\n              <th class="modal-text">Datafiles</th>\n              <th class="modal-text">\n                ',figuresData.walMessage?__p+="\n                  "+(null==(__t=figuresData.walMessage)?"":__t)+"\n                ":__p+="\n                  "+(null==(__t=numeral(figuresData.figures.datafiles.count).format("0,0"))?"":__t)+"\n                ",__p+='\n              </th>\n              <th class="modal-text">\n                ',figuresData.walMessage?__p+="\n                  "+(null==(__t=figuresData.walMessage)?"":__t)+"\n                ":__p+="\n                  "+(null==(__t=prettyBytes(figuresData.figures.datafiles.fileSize))?"":__t)+"\n                ",__p+='\n              </th>\n              <th class="modal-text">&nbsp;</th>\n              <th class="tooltipInfoTh">\n                <div>\n                  <span class="modalTooltips arangoicon icon_arangodb_info" data-toggle="tooltip" data-placement="left" title="Number and total size of active datafiles.">\n                  </span>\n                </div>\n              </th>\n            </tr>\n            <tr>\n              <th class="modal-text">Journals</th>\n              <th class="modal-text">\n                ',figuresData.walMessage?__p+="\n                  "+(null==(__t=figuresData.walMessage)?"":__t)+"\n                ":__p+="\n                  "+(null==(__t=numeral(figuresData.figures.journals.count).format("0,0"))?"":__t)+"\n                ",__p+='\n              </th>\n              <th class="modal-text">\n                ',figuresData.walMessage?__p+="\n                  "+(null==(__t=figuresData.walMessage)?"":__t)+"\n                ":__p+="\n                  "+(null==(__t=prettyBytes(figuresData.figures.journals.fileSize))?"":__t)+"\n                ",__p+='\n              </th>\n              <th class="modal-text">&nbsp;</th>\n              <th class="tooltipInfoTh">\n                <span class="modalTooltips arangoicon icon_arangodb_info" title="Number and total size of journal files.">\n                </span>\n              </th>\n            </tr>\n            <tr>\n              <th class="modal-text">Compactors</th>\n              <th class="modal-text">\n                ',figuresData.walMessage?__p+="\n                  "+(null==(__t=figuresData.walMessage)?"":__t)+"\n                ":__p+="\n                  "+(null==(__t=numeral(figuresData.figures.compactors.count).format("0,0"))?"":__t)+"\n                ",__p+='\n              </th>\n              <th class="modal-text">\n                ',figuresData.walMessage?__p+="\n                  "+(null==(__t=figuresData.walMessage)?"":__t)+"\n                ":__p+="\n                  "+(null==(__t=prettyBytes(figuresData.figures.compactors.fileSize))?"":__t)+"\n                ",__p+='\n              </th>\n              <th class="modal-text">&nbsp;</th>\n              <th class="tooltipInfoTh">\n                <span class="modalTooltips arangoicon icon_arangodb_info" title="Number and total size of compactor files."></span>\n              </th>\n            </tr>\n            <tr>\n              <th class="modal-text">Indexes</th>\n              <th class="modal-text">\n                '+(null==(__t=numeral(figuresData.figures.indexes.count).format("0,0"))?"":__t)+'\n              </th>\n              <th class="modal-text">\n                '+(null==(__t=prettyBytes(figuresData.figures.indexes.size))?"":__t)+'\n              </th>\n              <th class="modal-text">&nbsp;</th>\n              <th class="tooltipInfoTh">\n                <span class="modalTooltips arangoicon icon_arangodb_info" title="Number and total memory usage of indexes."></span>\n              </th>\n            </tr>\n          </table>\n        '),__p+="\n\n        ",figuresData.figures.documentReferences&&figuresData.figures.uncollectedLogfileEntries&&!frontendConfig.isCluster&&"mmfiles"===frontendConfig.engine&&(__p+='\n          <table class="figures3 arango-table">\n            <tr class="figuresHeader">\n              <th>Type</th>\n              <th>Count</th>\n              <th></th>\n              <th></th>\n              <th>Info</th>\n            </tr>\n            <tr>\n              <th class="modal-text">Uncollected</th>\n              <th class="modal-text">'+(null==(__t=figuresData.figures.uncollectedLogfileEntries)?"":__t)+'</th>\n              <th class="modal-text">&nbsp;</th>\n              <th class="modal-text">&nbsp;</th>\n              <th class="tooltipInfoTh">\n                <span class="modalTooltips arangoicon icon_arangodb_info" title="Total number of uncollected WAL entries">\n                </span>\n              </th>\n            </tr>\n            <tr>\n              <th class="modal-text">References</th>\n              <th class="modal-text">'+(null==(__t=figuresData.figures.documentReferences)?"":__t)+'</th>\n              <th class="modal-text">&nbsp;</th>\n              <th class="modal-text">&nbsp;</th>\n              <th class="tooltipInfoTh">\n                <span class="modalTooltips arangoicon icon_arangodb_info" title="Total number of objects pointing to documents in collection datafiles">\n                </span>\n              </th>\n            </tr>\n          </table>\n        '),__p+="\n\n"}return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="  <div>\n    Your new Foxx Service is ready for download.\n    You can edit it on your local system and repack it in a zip file to publish it on ArangoDB.\n  </div>\n";return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='\t<div class="detail-chart">\n\t\t<div id="lineChartDetail" class="modal-inner-detail"></div>\n\t\t<div class="modal-dashboard-legend">\n\t\t\t<div class="dashboard-legend-inner" id="detailLegend"></div>\n\t\t</div>\n\t</div>\n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+='\n  <ul id="graphTab" class="nav nav-tabs">\n    <li class="active"><a href="#createGraph" data-toggle="tab" id="tab-createGraph">Graph</a></li>\n    <li><a href="#smartGraph" data-toggle="tab" id="tab-smartGraph">SmartGraph</a></li>\n    <li><a href="#satelliteGraph" data-toggle="tab" id="tab-satelliteGraph">SatelliteGraph</a></li>\n    <li><a href="#exampleGraphs" data-toggle="tab" id="tab-exampleGraphs">Examples</a></li>\n  </ul>\n\n  <div class="tab-content" id="tab-content-create-graph">\n\n    <div class="tab-pane" id="exampleGraphs">\n      <table style="margin-bottom: 10px">\n        <tbody>\n          <tr>\n            <td>Knows Graph</td>\n            <td>\n              <button style="float: right; margin-bottom: 10px;" graph-id="knows_graph" class="button-success createExampleGraphs">Create</button>\n            </td>\n          </tr>\n          <tr>\n            <td>Traversal Graph</td>\n            <td>\n              <button style="float: right; margin-bottom: 10px;" graph-id="traversalGraph" class="button-success createExampleGraphs">Create</button>\n            </td>\n          </tr>\n          <tr>\n            <td>k Shortest Paths Graph</td>\n            <td>\n              <button style="float: right; margin-bottom: 10px;" graph-id="kShortestPathsGraph" class="button-success createExampleGraphs">Create</button>\n            </td>\n          </tr>\n          <tr>\n            <td>Mps Graph</td>\n            <td>\n              <button style="float: right; margin-bottom: 10px;" graph-id="mps_graph" class="button-success createExampleGraphs">Create</button>\n            </td>\n          </tr>\n          <tr>\n            <td>World Graph</td>\n            <td>\n              <button style="float: right; margin-bottom: 10px;" graph-id="worldCountry" class="button-success createExampleGraphs">Create</button>\n            </td>\n          </tr>\n          <tr>\n            <td>Social Graph</td>\n            <td>\n              <button style="float: right; margin-bottom: 10px;" graph-id="social" class="button-success createExampleGraphs">Create</button>\n            </td>\n          </tr>\n          <tr>\n            <td>City Graph</td>\n            <td>\n              <button style="float: right; margin-bottom: 10px;" graph-id="routeplanner" class="button-success createExampleGraphs">Create</button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n     <p style="width: 100%; text-align: center;">Need help? Visit our <a style="font-weight: bold" href="https://www.arangodb.com/docs/stable/graphs.html#example-graphs" target="_blank">Graph Documentation</a></p>\n\n    </div>\n\n    <div class="active tab-pane" id="createGraph">\n\n    <div id="smartGraphInfo" class="infoMessage" style="display: none;">\n      <span>SmartGraph Info: Only use non-existent collection names (vertices/edges).</span>\n    </div>\n\n    ';var createTR=function(e,t){var i="";switch(e.mandatory&&(i="*"),__p+='\n        <tr class="tableRow" id="'+(null==(__t="row_"+e.id)?"":__t)+'">\n          <th class="collectionTh">'+(null==(__t=e.label)?"":__t)+(null==(__t=i)?"":__t)+':</th>\n          <th class="collectionTh">\n            ',e.type){case"text":__p+='\n            <input type="text" id="'+(null==(__t=e.id)?"":__t)+'" value="'+(null==(__t=e.value||"")?"":__t)+'" placeholder="'+(null==(__t=e.placeholder||"")?"":__t)+'"></input>\n            ';break;case"password":__p+='\n            <input type="password" id="'+(null==(__t=e.id)?"":__t)+'" value="'+(null==(__t=e.value||"")?"":__t)+'" placeholder="'+(null==(__t=e.placeholder||"")?"":__t)+'"></input>\n            ';break;case"readonly":__p+='\n            <input type="text" id="'+(null==(__t=e.id)?"":__t)+'" value="'+(null==(__t=e.value||"")?"":__t)+'" placeholder="'+(null==(__t=e.placeholder||"")?"":__t)+'" disabled></input>\n            ';break;case"checkbox":var n="",r="";e.checked&&(n="checked"),e.disabled&&(r="disabled"),__p+='\n            <input type="checkbox" id="'+(null==(__t=e.id)?"":__t)+'" value="'+(null==(__t=e.value)?"":__t)+'" '+(null==(__t=n)?"":__t)+" "+(null==(__t=r)?"":__t)+"></input>\n            ";break;case"select":__p+='\n            <select id="'+(null==(__t=e.id)?"":__t)+'" class="modalSelect">\n            ',_.each(e.options,(function(t){__p+='\n              <option value="'+(null==(__t=t.value)?"":__t)+'" '+(null==(__t=e.selected===t.value?"selected":"")?"":__t)+">"+(null==(__t=t.label)?"":__t)+"</option>\n            "})),__p+="\n            </select>\n            ";break;case"select2":__p+='\n            <input type="hidden" id="'+(null==(__t=e.id)?"":__t)+'" value="'+(null==(__t=e.value||"")?"":__t)+'" placeholder="'+(null==(__t=e.placeholder||"")?"":__t)+'"></input>\n            ',e.addAdd&&(__p+='\n              <button id="'+(null==(__t="addAfter_"+e.id)?"":__t)+'" class="graphViewer-icon-button gv-icon-small add addAfter"></button>\n            '),__p+="\n            ",e.addDelete&&(__p+='\n              <button id="'+(null==(__t="remove_"+e.id)?"":__t)+'" class="graphViewer-icon-button gv_internal_remove_line gv-icon-small delete addDelete"></button>\n            '),__p+="\n            "}e.info&&(__p+='\n          <th>\n            <span class="modalTooltips arangoicon icon_arangodb_info" title="'+(null==(__t=e.info)?"":__t)+'">\n            </span>\n          </th>\n        '),__p+="\n        </tr>\n      "};__p+="\n\n    <table>\n      <tbody>\n        ",_.each(content,(function(e){createTR(e)})),__p+="\n\n      </tbody>\n    </table>\n      ",advancedContent&&(__p+='\n      <div class="accordion" id="accordion2">\n        <div class="accordion-group">\n          <div class="accordion-heading">\n            <a class="accordion-toggle collapsed" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">\n              <span>'+(null==(__t=advancedContent.header)?"":__t)+'</span><span><b class="caret"></b></span>\n            </a>\n          </div>\n          <div id="collapseOne" class="accordion-body collapse out">\n            <div class="accordion-inner">\n              <table>\n                <tbody>\n                  ',_.each(advancedContent.content,(function(e){createTR(e)})),__p+="\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </div>\n      "),__p+="\n    </div>\n\n  </div>\n"}return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='\n  <ul class="hotkeysList">\n  ',_.each(content,(function(e){__p+='\n\n    <li class="hotkeysLabel">'+(null==(__t=e.name)?"":__t)+"</li>\n\n    ",_.each(e.content,(function(e){__p+='\n      <li class="hotkeysContent"><div class="hotkeysContentLabel">'+(null==(__t=e.label)?"":__t)+'</div><div class="hotkeysicons">&nbsp;&nbsp;'+(null==(__t=e.letter)?"":__t)+"&nbsp;&nbsp;</div></li>\n    "})),__p+="\n\n\n  "})),__p+="\n  <ul>\n\n";return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="  ";var createTR=function(e){var t="";switch(e.mandatory&&(t="*"),__p+='\n    <tr class="tableRow" id="'+(null==(__t="row_"+e.id)?"":__t)+'">\n      <th class="collectionTh">'+(null==(__t=e.label)?"":__t)+(null==(__t=t)?"":__t)+':</th>\n      <th class="collectionTh"'+(null==(__t=e.info?"":' colspan="2"')?"":__t)+">\n        ",e.type){case"text":__p+='\n          <input type="text" id="'+(null==(__t=e.id)?"":__t)+'" value="'+(null==(__t=_.escape(e.value||""))?"":__t)+'" placeholder="'+(null==(__t=e.placeholder||"")?"":__t)+'"></input>\n          ';break;case"blob":__p+='\n          <textarea id="'+(null==(__t=e.id)?"":__t)+'" placeholder="'+(null==(__t=e.placeholder||"")?"":__t)+'">'+(null==(__t=e.value||"")?"":__t)+"</textarea>\n          ";break;case"password":__p+='\n          <input type="password" id="'+(null==(__t=e.id)?"":__t)+'" value="'+(null==(__t=e.value||"")?"":__t)+'" placeholder="'+(null==(__t=e.placeholder||"")?"":__t)+'"></input>\n          ';break;case"readonly":__p+='\n          <div class="modal-text" id="'+(null==(__t=e.id)?"":__t)+'">'+(null==(__t=e.value||"")?"":__t)+"</div>\n          ";break;case"checkbox":var i="",n="";e.checked&&(i="checked"),e.disabled&&(n="disabled"),__p+='\n          <input type="checkbox" id="'+(null==(__t=e.id)?"":__t)+'" value="'+(null==(__t=e.value)?"":__t)+'" '+(null==(__t=i)?"":__t)+" "+(null==(__t=n)?"":__t)+"></input>\n          ";break;case"select":__p+='\n          <select id="'+(null==(__t=e.id)?"":__t)+'" class="modalSelect">\n          ',_.each(e.options,(function(t){__p+='\n            <option value="'+(null==(__t=t.value)?"":__t)+'" '+(null==(__t=e.selected===t.value?"selected":"")?"":__t)+">"+(null==(__t=t.label)?"":__t)+"</option>\n          "})),__p+="\n          </select>\n          ";break;case"select2":__p+='\n          <input type="hidden" id="'+(null==(__t=e.id)?"":__t)+'" value="'+(null==(__t=e.value||"")?"":__t)+'" placeholder="'+(null==(__t=e.placeholder||"")?"":__t)+'"></input>\n          ',e.addDelete&&(__p+='\n            <button class="graphViewer-icon-button gv-icon-small add"></button>\n          '),__p+="\n          ",e.addDelete&&(__p+='\n            <button class="graphViewer-icon-button gv_internal_remove_line gv-icon-small delete"></button>\n          '),__p+="\n          ";break;case"jsoneditor":__p+='\n          <div id="jsoneditor"/>\n          '}__p+="\n        ",e.info&&(__p+='\n        </th>\n        <th>\n          <span class="modalTooltips arangoicon icon_arangodb_info" title="'+(null==(__t=e.info)?"":__t)+'">\n          </span>\n        '),__p+="\n      </th>\n    </tr>\n    "};__p+="\n  ",content&&(__p+="\n    <table>\n      <tbody>\n        ",_.each(content,(function(e){createTR(e)})),__p+="\n      </tbody>\n    </table>\n  "),__p+="\n  ",info&&(__p+="\n    "+(null==(__t=info)?"":__t)+"\n  "),__p+="\n  ",advancedContent&&(__p+='\n    <div class="accordion" id="accordion2">\n      <div class="accordion-group">\n        <div class="accordion-heading">\n          <a class="accordion-toggle collapsed" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">\n            <span>'+(null==(__t=advancedContent.header)?"":__t)+'</span><span><b class="caret"></b></span>\n          </a>\n        </div>\n        <div id="collapseOne" class="accordion-body collapse out">\n          <div class="accordion-inner">\n            <table>\n              <tbody>\n                ',_.each(advancedContent.content,(function(e){createTR(e)})),__p+="\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n  "),__p+="\n"}return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){function createSuite(e){__p+='\n    <dt class="tests-result-spec-suite-title">\n      '+(null==(__t=e.title)?"":__t)+"\n    </dt>\n    <dd>\n      ",e.tests.length&&(__p+='\n        <ul class="tests-result-spec-tests">\n          ',_.each(e.tests,createTest),__p+="\n        </ul>\n      "),__p+="\n      ",e.suites.length&&(__p+='\n        <dl class="tests-result-spec-suites">\n          ',_.each(e.suites,createSuite),__p+="\n        </dl>\n      "),__p+="\n    </dd>\n    "}function createTest(e){var t=e.duration>75;switch(__p+='\n    <li class="tests-result-spec-test '+(null==(__t=e.result)?"":__t)+(null==(__t=t?" slow":"")?"":__t)+'">\n      <span class="tests-result-spec-test-title">\n        ',e.result){case"pass":__p+='\n          <span class="fa fa-check"></span>\n          ';break;case"fail":__p+='\n          <span class="fa fa-times"></span>\n          ';break;case"pending":__p+='\n          <span class="fa fa-circle"></span>\n        '}__p+="\n        "+(null==(__t=e.title)?"":__t)+"\n        "+(null==(__t=t?"("+e.duration+"ms)":"")?"":__t)+"\n      </span>\n      ",_.isEmpty(e.err)||(__p+='\n        <pre class="stack">'+(null==(__t=e.err.stack)?"":__t)+"</pre>\n      "),__p+="\n    </li>\n  "}__p+="",__p+='\n  <div class="tests-result">\n    ',info.stack?__p+='\n      <div class="tests-result-stats fail">\n        Test runner failed with an error.\n      </div>\n      <pre class="stack">'+(null==(__t=info.stack)?"":__t)+"</pre>\n    ":(__p+='\n      <div class="tests-result-stats">\n        Completed <b>'+(null==(__t=info.stats.tests)?"":__t)+"</b> tests in <b>"+(null==(__t=info.stats.duration)?"":__t)+'ms</b>\n        (<span class="pass" title="passes">'+(null==(__t=info.stats.passes)?"":__t)+'</span>/<span class="fail" title="failures">'+(null==(__t=info.stats.failures)?"":__t)+'</span>/<span class="pending" title="pending">'+(null==(__t=info.stats.pending)?"":__t)+'</span>)\n      </div>\n      <div class="tests-result-spec">\n        ',info.tests.length&&(__p+='\n          <ul class="tests-result-spec-tests">\n            ',_.each(info.tests,createTest),__p+="\n          </ul>\n        "),__p+="\n        ",info.suites.length&&(__p+='\n          <dl class="tests-result-spec-suites">\n            ',_.each(info.suites,createSuite),__p+="\n          </dl>\n        "),__p+="\n        ",info.tests.length||info.suites.length||(__p+='\n          <div class="tests-result-spec-empty">No tests found.</div>\n        '),__p+="\n      </div>\n    "),__p+="\n  </div>\n"}return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='  <ul class="navlist arango-collection-ul" id="arangoCollectionUl">\n    ',isCluster?__p+='\n      <li class="cluster-menu"><a id="cluster" class="tab" href="#cluster"><i class="fa fa-circle-o"></i>Cluster</a></li>\n      <li class="nodes-menu"><a id="nodes" class="tab" href="#nodes"><i class="fa fa-server"></i>Nodes</a></li>\n    ':__p+='\n      <li class="dashboard-menu"><a id="dashboard" class="tab" href="#dashboard"><i class="fa fa-dashboard"></i>Dashboard</a></li>\n    ',__p+='\n    <li class="navbar-spacer big"></li>\n    \x3c!-- <li id="dbSelect" class="dropdown databases-menu disabled"></li> --\x3e\n    <li class="collections-menu"><a id="collections" class="tab" href="#collections"><i class="fa fa-folder"></i>Collections</a></li>\n    <li class="views-menu"><a id="views" class="tab" href="#views"><i class="fa fa-eye"></i>Views</a></li>\n    <li class="queries-menu"><a id="queries" class="tab" href="#queries"><i class="fa fa-bolt"></i>Queries</a></li>\n    <li class="graphs-menu"><a id="graphs" class="tab" href="#graphs"><i class="fa fa-sitemap"></i>Graphs</a></li>\n    ',foxxApiEnabled&&(__p+='\n    <li class="services-menu">\n      <a id="services" class="tab" href="#services"><i class="fa fa-cogs"></i>Services</a>\n    </li>\n    '),__p+="\n    ",currentDB.get("isSystem")&&(__p+="\n      ",readOnly||(__p+='\n        <li class="users-menu"><a id="users" class="tab" href="#manage"><i class="fa fa-users"></i>Users</a></li>\n      '),__p+="\n    "),__p+="\n    \x3c!--\n    ",currentDB.get("isSystem")&&(__p+='\n      <li class="navbar-spacer big"></li>\n      <li class="settings-menu"><a id="settings" class="tab" href="#settings"><i class="fa fa-cog"></i>Settings</a></li>\n    '),__p+="\n    --\x3e\n    ",(currentDB.get("isSystem")||currentDB.get(!isCluster))&&(__p+='\n      <li class="navbar-spacer big"></li>\n    '),__p+="\n    ",currentDB.get("isSystem")&&(__p+='\n      <li class="databases-menu"><a id="databases" class="tab" href="#databases"><i class="fa fa-database"></i>Databases</a></li>\n    '),__p+="\n    ",currentDB.get("isSystem")&&!isCluster&&(__p+='\n      <li class="replication-menu"><a id="replication" class="tab" href="#replication"><i class="fa fa-server"></i>Replication</a></li>\n    '),__p+="\n    ",isCluster||(__p+='\n      <li class="logs-menu"><a id="logs" class="tab" href="#logs"><i class="fa fa-file-text"></i>Logs</a></li>\n    '),__p+='\n    <li class="navbar-spacer big"></li>\n    <li class="support-menu"><a id="support" class="tab" href="#support"><i class="fa fa-support"></i>Support</a></li>\n    <li class="helpus-menu"><a id="helpus" class="tab" href="#helpus"><i class="fa fa-heart"></i>Help Us</a></li>\n    <li class="enterprise-menu" style="display: none; cursor: pointer"><a id="enterprise" class="tab" target="_blank"><i class="fa fa-external-link-square"></i>Get enterprise</a></li>\n    \x3c!--\n    <li class="navbar-spacer big"></li>\n    <li class="dropdown tools-menu" id="toolsDropdown">\n      <a href="#" class="tab" id="tools">Tools <b class="caret"></b></a>\n      <ul class="link-dropdown-menu" id="tools_dropdown">\n        <li class="dropdown-header">Tools</li>\n        <li class="dropdown-item">\n          <a id="shell" class="tab" href="#shell">JS Shell</a>\n        </li>\n\n        ',isCluster||(__p+='\n          <li class="dropdown-item">\n            <a id="logs" class="tab" href="#logs">Logs</a>\n          </li>\n        '),__p+='\n\n        <li class="dropdown-item">\n          <a id="userManagement" class="tab" href="#userManagement">User Management</a>\n        </li>\n        <li class="dropdown-item">\n          <a id="queryManagement" class="tab" href="#queryManagement">Query Management</a>\n        </li>\n        <li class="dropdown-item">\n          <a id="workMonitor" class="tab" href="#workMonitor">Work Monitor</a>\n        </li>\n      </ul>\n    </li>\n    <li class="dropdown" id="linkDropdown">\n      <a href="#" class="tab" id="links">Links <b class="caret"></b></a>\n      <ul class="link-dropdown-menu" id="link_dropdown">\n        <li class="dropdown-header">Documentation</li>\n        <li class="dropdown-item"><a href="/_db/'+(null==(__t=currentDB.get("name"))?"":__t)+'/_admin/aardvark/api/index.html?collapsed" target="_blank">API Documentation</a></li>\n        <li class="dropdown-item"><a href="https://www.arangodb.com/docs/stable/programs-arangosh.html"\n                                     target="_blank">JS Shell Documentation</a></li>\n        <li class="dropdown-item"><a href="https://www.arangodb.com/docs/stable/aql/" target="_blank">AQL\n          Documentation</a></li>\n        <li class="dropdown-item"><a href="https://www.arangodb.com/docs/stable/" target="_blank">General\n          Documentation</a></li>\n        <li class="divider"></li>\n        <li class="dropdown-header">ArangoDB</li>\n        <li class="dropdown-item"><a href="https://github.com/arangodb/arangodb" target="_blank">GitHub\n          Repository</a></li>\n        <li class="dropdown-item"><a href="https://www.arangodb.com" target="_blank">ArangoDB.com</a></li>\n      </ul>\n    </li>\n  --\x3e\n  </ul>\n\n\n  <div class="shortcut-icons">\n    <p class="shortcut"><i class="fa fa-keyboard-o"></i></p>\n  </div>\n\n  <div class="social-icons">\n    <p><a href="https://twitter.com/arangodb" target="_blank"><i class="fa fa-twitter"></i></a></p>\n    <p><a href="https://slack.arangodb.com" target="_blank"><i class="fa fa-slack"></i></a></p>\n    <p><a href="https://stackoverflow.com/questions/tagged/arangodb" target="_blank"><i class="fa fa-stack-overflow"></i></a></p>\n    <p><a href="https://groups.google.com/group/arangodb" target="_blank"><i class="fa fa-google"></i></a></p>\n  </div>\n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='\n  <div id="nodeContent" class="innerContent">\n\n\n  </div>\n\n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){if(__p+='\n  <div id="nodesContent" class="innerContent">\n\n  ',Object.keys(coords).length>0){__p+="\n\n    ";var disabled="";__p+='\n\n    <div class="pure-g">\n\n    <div class="pure-u-1-1 pure-u-md-1-1 pure-u-lg-1-1 pure-u-xl-1-2">\n\n    <div class="sectionHeader pure-g">\n      <div class="pure-u-1-5">\n        <div class="title">\n          Coordinators\n        </div>\n      </div>\n\n\n      <div class="pure-u-4-5">\n\n        ',!0===scaling&&"_system"===frontendConfig.db&&(__p+='\n          <div class="scaleGroup" id="scaleCoords">\n            <div style="text-align: -webkit-right;">\n            <span class="left" id="removeCoord"><i class="fa fa-minus"></i></span>\n            <input id="plannedCoords" type="text" value="'+(null==(__t=plannedCoords)?"":__t)+'"/>\n            <span class="right" id="addCoord"><i class="fa fa-plus"></i></span>\n            </div>\n          </div>\n        '),__p+='\n\n        <div class="information" id="infoCoords">\n          <span class="positive"><span> '+(null==(__t=scaleProperties.coordsOk)?"":__t)+' </span><i class="fa fa-check-circle"></i></span>\n          ',scaleProperties.coordsError&&(__p+='\n            <span class="negative"><span> '+(null==(__t=scaleProperties.coordsError)?"":__t)+' </span><i class="fa fa-exclamation-circle"></i></span>\n          '),__p+="\n          ",scaleProperties.coordsPending&&!0===scaling&&"_system"===frontendConfig.db&&(__p+='\n            <span class="warning"><span> '+(null==(__t=scaleProperties.coordsPending)?"":__t)+' </span><i class="fa fa-circle-o-notch fa-spin"></i></span>\n            <button class="abortClusterPlan button-navbar button-default">Abort</button>\n          '),__p+='\n        </div>\n      </div>\n\n    </div>\n\n    <div class="pure-g cluster-nodes-title pure-table pure-table-header pure-title" style="clear: both">\n      <div class="pure-table-row">\n        <div class="pure-u-9-24 left">Name</div>\n        <div class="pure-u-9-24 left">Endpoint</div>\n        <div class="pure-u-3-24">Version</div>\n        <div class="pure-u-2-24 mid hide-small">Since</div>\n        <div class="pure-u-1-24 mid"></div>\n      </div>\n    </div>\n\n    <div class="pure-g cluster-nodes coords-nodes pure-table pure-table-body">\n      ',_.each(coords,(function(e,t){__p+="\n        ";var i=e.id+"-node";__p+='\n\n        <div class="pure-table-row '+(null==(__t=disabled)?"":__t)+'" node="'+(null==(__t=i)?"":__t)+'">\n\n          <div class="pure-u-9-24 left" title="'+(null==(__t=e.id)?"":__t)+'">\n            '+(null==(__t=e.ShortName)?"":__t)+'\n            <i class="fa fa-bar-chart"></i>\n            ',e.CanBeDeleted&&"_system"===frontendConfig.db&&(__p+='\n              <i class="fa fa-trash-o"></i>\n            '),__p+='\n          </div>\n          <div class="pure-u-9-24 left">'+(null==(__t=e.Endpoint)?"":__t)+'</div>\n\n          <div class="pure-u-3-24">'+(null==(__t=e.Version)?"":__t)+"</div>\n\n          ";var n=e.LastAckedTime.substr(11,18);__p+="\n          ";var r=e.LastAckedTime;__p+='\n          <div class="pure-u-2-24 hide-small mid" title="'+(null==(__t=r)?"":__t)+'">'+(null==(__t=n)?"":__t)+"</div>\n\n          ","GOOD"===e.Status?__p+='\n            <div class="pure-u-1-24 mid state"><i class="fa fa-check-circle tippy" title="'+(null==(__t=e.SyncStatus)?"":__t)+'"></i></div>\n          ':__p+='\n            <div class="pure-u-1-24 mid state"><i class="fa fa-exclamation-circle"></i></div>\n          ',__p+="\n\n        </div>\n\n      "})),__p+="\n    </div>\n  </div>\n\n  "}if(__p+="\n\n  ",Object.keys(dbs).length>0){__p+="\n    ";var disabled="";__p+="\n    ",disabled=" dbserver",__p+='\n    <div class="pure-u-1-1 pure-u-md-1-1 pure-u-lg-1-1 pure-u-xl-1-2">\n      <div class="sectionHeader pure-g">\n        <div class="pure-u-1-5">\n          <div class="title">\n            DB Servers\n          </div>\n        </div>\n\n        <div class="pure-u-4-5">\n\n          ',!0===scaling&&"_system"===frontendConfig.db&&(__p+='\n            <div class="scaleGroup" id="scaleCoords">\n              <div style="text-align: -webkit-right;">\n              <span class="left" id="removeDBs"><i class="fa fa-minus"></i></span>\n              <input id="plannedDBs" value="'+(null==(__t=plannedDBs)?"":__t)+'" type="text"/>\n              <span class="right" id="addDBs"><i class="fa fa-plus"></i></span>\n              </div>\n            </div>\n          '),__p+='\n\n          <div class="information" id="infoDBs">\n            <span class="positive"><span> '+(null==(__t=scaleProperties.dbsOk)?"":__t)+' </span><i class="fa fa-check-circle"></i></span>\n            ',scaleProperties.dbsError&&(__p+='\n              <span class="negative"><span> '+(null==(__t=scaleProperties.dbsError)?"":__t)+' </span><i class="fa fa-exclamation-circle"></i></span>\n            '),__p+="\n            ",scaleProperties.dbsPending&&!0===scaling&&"_system"===frontendConfig.db&&(__p+='\n              <span class="warning"><span> '+(null==(__t=scaleProperties.dbsPending)?"":__t)+' </span><i class="fa fa-circle-o-notch fa-spin"></i></span>\n              <button class="abortClusterPlan button-navbar button-default">Abort</button>\n            '),__p+='\n          </div>\n\n        </div>\n\n      </div>\n\n    <div class="pure-g cluster-nodes-title pure-table pure-table-header pure-title" style="clear: both">\n      <div class="pure-table-row">\n        <div class="pure-u-9-24 left">Name</div>\n        <div class="pure-u-9-24 left">Endpoint</div>\n        <div class="pure-u-3-24">Version</div>\n        <div class="pure-u-2-24 mid hide-small">Since</div>\n        <div class="pure-u-1-24 mid"></div>\n      </div>\n    </div>\n\n  '}__p+='\n\n    <div class="pure-g cluster-nodes dbs-nodes pure-table pure-table-body">\n      ',_.each(dbs,(function(e,t){__p+="\n        ";var i=e.id+"-node";__p+='\n\n        <div class="pure-table-row '+(null==(__t=disabled)?"":__t)+'" node="'+(null==(__t=i)?"":__t)+'">\n\n          <div class="pure-u-9-24 left" title="'+(null==(__t=e.id)?"":__t)+'">\n            '+(null==(__t=e.ShortName)?"":__t)+'\n            <i class="fa fa-bar-chart"></i>\n            ',e.CanBeDeleted&&"_system"===frontendConfig.db&&(__p+='\n              <i class="fa fa-trash-o"></i>\n            '),__p+='\n          </div>\n          <div class="pure-u-9-24 left">'+(null==(__t=e.Endpoint)?"":__t)+'</div>\n\n          <div class="pure-u-3-24">'+(null==(__t=e.Version)?"":__t)+"</div>\n\n          ";var n=e.LastAckedTime.substr(11,18);__p+="\n          ";var r=e.LastAckedTime;__p+='\n          <div class="pure-u-2-24 hide-small mid" title="'+(null==(__t=r)?"":__t)+'">'+(null==(__t=n)?"":__t)+"</div>\n          \n          ","GOOD"===e.Status?__p+='\n            <div class="pure-u-1-24 mid state"><i class="fa fa-check-circle tippy" title="'+(null==(__t=e.SyncStatus)?"":__t)+'"></i></div>\n          ':__p+='\n            <div class="pure-u-1-24 mid state"><i class="fa fa-exclamation-circle"></i></div>\n          ',__p+="\n\n        </div>\n      "})),__p+="\n    </div>\n  </div>\n\n  </div>\n  </div>\n\n"}return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="",notifications.forEach((function(e){__p+='\n  <li class="dropdown-item">\n    <div class="notificationItem">\n      ',e.get("info")&&(__p+='\n      <i title="'+(null==(__t=e.get("info"))?"":__t)+'" class="notificationInfoIcon fa fa-info-circle"></i>\n      '),__p+='\n\n      <i id="'+(null==(__t=e.cid)?"":__t)+'" class="fa fa-times-circle-o"></i>\n      <a class="notificationItemTitle">'+(null==(__t=e.get("title"))?"":__t)+'</a>\n      <div class="notificationItemContent">'+(null==(__t=e.get("content"))?"":__t)+"</div>\n\n    </div>\n  </li>\n"})),__p+="\n";return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<ul class="navlist" id="notificationViewUl">\n\n  <div class="navlogo">\n    <div id="stat_hd" class="notificationButton"><p id="stat_hd_counter">0</p></div>\n  </div>\n\n  <li class="dropdown no-left-margin" style="border: 0">\n    <ul class="user-dropdown-menu fixedDropdown" id="notification_menu">\n      <li class="dropdown-header"><a>Notifications</a></li>\n      <ul class="innerDropdownInnerUL"></ul>\n      <button id="removeAllNotifications" class="button-close">Clear</button>\n    </ul>\n  </li>\n\n</ul>\n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='  <div class="progress-view">\n    <div class="progress-content">\n      <div class="progress-text"></div>\n      <div class="pong-spinner"><i /></div>\n    </div>\n    <div class="progress-message">\n      <div class="progress-action"></div>\n    </div>\n  </div>\n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='  <div id="queryManagementContent" class="innerContent">\n  </div>\n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='  <div id="queryManagementContent" class="innerContent">\n  </div>\n\n  <div class="queryManagementBottomActions">\n    <button id="deleteSlowQueryHistory" class="button-danger query-button">Delete History</button>\n  </div>\n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='\n    <div class="arangoToolbar arangoToolbarTop">\n      <div class="pull-left">\n        <button id="toggleQueries1" class="button-primary"><i class="fa fa-star-o"></i>Queries</button>\n        <button id="toggleQueries2" class="button-primary" style="display: none"><i class="fa fa-star"></i>Queries</button>\n        <button id="createNewQuery" class="button-warning">New</button>\n        <button id="updateCurrentQuery" class="button-success" style="display: none"><i class="fa fa-save"></i>Save</button>\n        <button id="saveCurrentQuery" class="button-success"><i class="fa fa-save"></i>Save as</button>\n      </div>\n\n      <div class="pull-right">\n        <span id="querySpotlight" class="action"><i class="fa fa-magic"></i></span>\n        <div class="styled-select">\n          <select id="querySize" class="query-size"></select>\n        </div>\n      </div>\n    </div>\n\n    <div class="inputEditorWrapper">\n      <div class="aqlEditorWrapper" class="arangoEditor">\n        <span id="clearQuery" class="aceAction"><i class="fa fa-times-circle"></i></span>\n        <div id="aqlEditor"></div>\n        <div id="queryTable" style="display: none"></div>\n      </div>\n\n      <div class="bindParamEditorWrapper" class="arangoEditor">\n        <span id="switchTypes" class="aceAction type">JSON</span>\n        <div id="bindParamEditor"></div>\n        <div id="bindParamAceEditor" style="display: none"></div>\n\n        <div id="previewWrapper" class="previewWrapper" style="display: none">\n          <div id="previewBar" class="previewBar">\n            <span>Preview</span>\n          </div>\n          <div id="queryPreview"></div>\n        </div>\n\n      </div>\n    </div>\n\n    <div class="arangoToolbar arangoToolbarBottom">\n      <div class="pull-right">\n        <button id="exportQuery" class="button-success query-button" style="display:none">Export Queries</button>\n        <button id="importQuery" class="button-success query-button" style="display:none">Import Queries</button>\n        <button id="executeQuery" class="button-success query-button">Execute</button>\n        <button id="explainQuery" class="button-info query-button">Explain</button>\n        <button id="profileQuery" class="button-info query-button">Profile</button>\n        <button id="debugQuery" class="button-warning query-button">Create Debug Package</button>\n        <button id="removeResults" class="button-close query-button" style="display: none">Remove all results</button>\n      </div>\n    </div>\n\n  </div>\n\n  <div id="outputEditors" class="outputEditors">\n  </div>\n\n  <div id="queryImportDialog" class="modal hide fade in" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" style="display: none;">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">\xd7</button>\n      <a class="arangoHeader">Import custom queries</a>\n    </div>\n\n    <div class="modal-body">\n      <table>\n        <tbody>\n          <tr class="tableRow">\n            <th class="collectionTh">Format:</th>\n            <th class="collectionTh" colspan="2">\n<pre><code>JSON documents embedded into a list:\n\n[{\n  "name": "Query Name",\n  "value": "Query Definition",\n  "parameter": "Query Bind Parameter as Object"\n}]</code></code>\n            </th>\n          </tr>\n          <tr class="tableRow">\n            <th class="collectionTh">File:</th>\n            <th class="collectionTh" colspan="2">\n              <input id="importQueries" name="importQueries" type="file" style="border: 0" />\n            </th>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n\n    <div class="modal-footer">\n      <button id="confirmQueryImport" class="button-success disabled" style="float:right">Import</button>\n      <button id="closeQueryModal" class="button-close">Cancel</button>\n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div id="outputEditorWrapper'+(null==(__t=counter)?"":__t)+'" class="outputEditorWrapper">\n    <div class="arangoToolbar arangoToolbarTop">\n      <div class="pull-left">\n        <span class="toolbarType">'+(null==(__t=type)?"":__t)+'</span>\n          <span id="spinner"><i class="fa fa-spinner fa-spin"></i><i>Query is operating ...</i></span>\n      </div>\n      <div class="pull-right">\n        <span class="action closeResult" element="outputEditor'+(null==(__t=counter)?"":__t)+'"><i class="fa fa-close" style="display: none"></i></span>\n      </div>\n      <div class="pull-right">\n        <div class="switchAce" counter="'+(null==(__t=counter)?"":__t)+'">\n          <span id="json-switch" val="JSON" counter="'+(null==(__t=counter)?"":__t)+'">JSON</span>\n          <span id="table-switch" val="Table" counter="'+(null==(__t=counter)?"":__t)+'" style="display: none">Table</span>\n          <span id="graph-switch" val="Graph" counter="'+(null==(__t=counter)?"":__t)+'" style="display: none">Graph</span>\n          <span id="geo-switch" val="Geo" counter="'+(null==(__t=counter)?"":__t)+'" style="display: none">Geo</span>\n        </div>\n      </div>\n    </div>\n    <div id="outputEditor'+(null==(__t=counter)?"":__t)+'" style="opacity: 0.5"></div>\n    <div id="sentWrapper'+(null==(__t=counter)?"":__t)+'" class="sentWrapper" style="display: none">\n      <div class="pull-left">\n        <div id="sentQueryEditor'+(null==(__t=counter)?"":__t)+'"></div>\n      </div>\n      <div class="pull-right">\n        <div id="sentBindParamEditor'+(null==(__t=counter)?"":__t)+'"></div>\n      </div>\n    </div>\n    <div class="arangoToolbar arangoToolbarBottom">\n      <div class="pull-right">\n        ',"Query"===type&&(__p+='\n          <button id="copy2gV" counter="'+(null==(__t=counter)?"":__t)+'" style="display: none; margin-right: 0;" class="button-success">Graph Viewer</button>\n          <button id="downloadQueryResult" counter="'+(null==(__t=counter)?"":__t)+'" style="display: none; margin-right: 0;" class="button-success">Download</button>\n          <button id="downloadCsvResult" counter="'+(null==(__t=counter)?"":__t)+'" style="display: none; margin-right: 0;" class="button-success">CSV</button>\n          <button id="copy2aqlEditor" counter="'+(null==(__t=counter)?"":__t)+'" style="display: none; margin-right: 8px;" class="button-success">Copy To Editor</button>\n          <button id="cancelCurrentQuery" class="button-danger" style="margin-right: 5px">Cancel</button>\n        '),__p+="\n      </div>\n    </div>\n  </div>\n\n  </div>\n";return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='  <div id="replicationContent" class="innerContent replicationContent">\n\n    ',0!==mode&&(__p+='\n      <div class="pure-g cluster-values" style="margin-top: 0;">\n\n        <div class="pure-u-1-2 pure-u-md-1-3">\n          <div class="valueWrapper">\n            <div id="info-mode-id" class="value">'+(null==(__t=info.state)?"":__t)+'</div>\n            <div class="graphLabel">State</div>\n          </div>\n        </div>\n\n        <div class="pure-u-1-2 pure-u-md-1-3">\n          <div class="valueWrapper">\n            <div id="info-mode-id" class="value">'+(null==(__t=info.mode)?"":__t)+'</div>\n            <div class="graphLabel">Mode</div>\n          </div>\n        </div>\n\n        <div class="pure-u-1-2 pure-u-md-1-3">\n          <div class="valueWrapper">\n            ',"follower"===info.role&&3!==mode?__p+='\n              <div id="info-role-id" class="value">Slave</div>\n            ':"leader"===info.role&&3!==mode?__p+='\n              <div id="info-role-id" class="value">Master</div>\n            ':__p+='\n              <div id="info-role-id" class="value">'+(null==(__t=info.role)?"":__t)+"</div>\n            ",__p+='\n            <div class="graphLabel">Role</div>\n          </div>\n        </div>\n\n        <div class="pure-u-1-2 pure-u-md-1-3">\n          <div class="valueWrapper">\n            <div id="info-level-id" class="value">'+(null==(__t=info.level)?"":__t)+'</div>\n            <div class="graphLabel">Level</div>\n          </div>\n        </div>\n\n        <div class="pure-u-1-2 pure-u-md-1-3">\n          <div class="valueWrapper">\n            <div id="info-msg-id" class="value">'+(null==(__t=info.health)?"":__t)+'</div>\n            <div class="graphLabel">Health</div>\n          </div>\n        </div>\n\n        ',"follower"===info.role?__p+='\n          <div class="pure-u-1-2 pure-u-md-1-3">\n            <div class="valueWrapper">\n              <div id="logger-lastLogTick-id" class="value"><i class="fa fa-circle-o-notch fa-spin"></i></div>\n              <div class="graphLabel">Server ID</div>\n            </div>\n          </div>\n        ':__p+='\n          <div class="pure-u-1-2 pure-u-md-1-3">\n            <div class="valueWrapper">\n              <div id="logger-lastLogTick-id" class="value"><i class="fa fa-circle-o-notch fa-spin"></i></div>\n              <div class="graphLabel">Last tick</div>\n            </div>\n          </div>\n        ',__p+="\n\n      </div>\n    "),__p+="\n\n    ",0===mode&&(__p+='\n      <div class="repl-state">\n        <table class="pure-table half-split">\n            <tbody>\n              <tr>\n                <td>\n                  <div><i class="fa fa-server"></i></div>\n                  <div id="info-state-id">'+(null==(__t=info.state)?"":__t)+'</div>\n                </td>\n              </tr>\n                <tr>\n                  <td><div>This node is not replicating from any other node. Also there are no active slaves or followers found. </br>Please visit our <a href="https://www.arangodb.com/docs/stable/architecture-replication.html">Documentation</a> to find out how to setup replication.</div></td>\n                </tr>\n            </tbody>\n        </table>\n      </div>\n    '),__p+="\n\n    \n    ",5===mode&&(__p+='\n      <div class="repl-info">\n        <div class="categoryBar">\n          <h4>Info</h4>\n        </div>\n        <table class="pure-table">\n            <tbody>\n              <tr>\n                <td>Mode:</td>\n                <td id="info-mode-id">'+(null==(__t=info.mode)?"":__t)+'</td>\n              </tr>\n              <tr>\n                <td>Level:</td>\n                <td id="info-level-id">'+(null==(__t=info.level)?"":__t)+"</td>\n              </tr>\n              <tr>\n                <td>Role:</td>\n                ",3===mode?__p+='\n                  <td id="info-role-id">'+(null==(__t=info.role)?"":__t)+"</td>\n                ":(__p+="\n                  ","follower"===info.role?__p+='\n                    <td id="info-role-id">Slave</td>\n                  ':__p+='\n                    <td id="info-role-id">Master</td>\n                  ',__p+="\n                "),__p+="\n              </tr>\n            </tbody>\n        </table>\n      </div>\n    "),__p+="\n\n    ","leader"===info.role&&(__p+='\n      <div class="repl-comparison">\n        <div class="categoryBar">\n          <h4>Comparison</h4>\n        </div>\n        \n        <div class="pure-g cluster-graphs">\n\n          <div class="pure-u-1-1 pure-u-md-1-2">\n            <div class="graphWrapper">\n              <div id="replicationTimeChart">\n                <svg></svg>\n              </div>\n              <div class="graphLabel">COMMUNICATION</div>\n            </div>\n          </div>\n\n          <div class="pure-u-1-1 pure-u-md-1-2">\n            <div class="graphWrapper">\n              <div id="replicationTickChart">\n                <svg></svg>\n              </div>\n              <div class="graphLabel">LAST TICKS</div>\n            </div>\n          </div>\n\n        </div>\n\n      </div>\n\n      ',3===mode&&(__p+='\n        <div class="repl-nodes">\n          <div class="categoryBar">\n            <h4>Nodes</h4>\n          </div>\n        </div>\n        <table class="pure-table">\n            <tbody>\n              <tr>\n                <td>Leader:</td>\n                <td id="nodes-leader-id"><i class="fa fa-circle-o-notch fa-spin"></i></td>\n              </tr>\n              <tr>\n                <td>Followers:</td>\n                <td id="nodes-followers-id"><i class="fa fa-circle-o-notch fa-spin"></i></td>\n              </tr>\n            </tbody>\n        </table>\n      '),__p+="\n    "),__p+="\n\n    ","leader"===info.role&&(__p+='\n      <div class="repl-logger">\n        <div class="categoryBar">\n          ',3===mode?__p+="\n            <h4>Leader State</h4>\n          ":__p+="\n            <h4>Master State</h4>\n          ",__p+='\n        </div>\n        <table class="pure-table">\n            <tbody>\n              <tr>\n                <td>Server ID:</td>\n                <td id="logger-serverid-id"><i class="fa fa-circle-o-notch fa-spin"></i></td>\n              </tr>\n              <tr>\n                <td>Time:</td>\n                <td id="logger-time-id"><i class="fa fa-circle-o-notch fa-spin"></i></td>\n              </tr>\n              <tr>\n                <td>Operations:</td>\n                <td id="logger-totalEvents-id"><i class="fa fa-circle-o-notch fa-spin"></i></td>\n              </tr>\n            </tbody>\n        </table>\n      </div>\n\n      <div class="repl-logger-clients">\n        <div class="categoryBar">\n          ',3===mode?__p+="\n            <h4>Follower States</h4>\n          ":__p+="\n            <h4>Slave States</h4>\n          ",__p+='\n        </div>\n        <table class="pure-table" id="repl-logger-clients">\n            <thead>\n              <tr>\n                <th>Syncer ID</th>\n                <th>Server ID</th>\n                <th>Client info</th>\n                <th>Time</th>\n                <th>Last served tick</th>\n              </tr>\n            </thead>\n            <tbody>\n            </tbody>\n        </table>\n      </div>\n    '),__p+="\n\n    ","follower"===info.role&&(__p+='\n      <div class="repl-applier">\n        <div class="categoryBar">\n          ',3===mode?__p+="\n            <h4>Follower States</h4>\n          ":__p+="\n            <h4>Slave States</h4>\n          ",__p+='\n        </div>\n\n        <table id="repl-follower-table" class="pure-table" style="width: 100%">\n          <thead>\n            <tr>\n              <th>Database</th>\n              <th>Enabled</th>\n              <th>Phase</th>\n              <th>Replicating from</th>\n              <th>Last tick</th>\n              <th>State</th>\n            </tr>\n          </thead>\n\n          <tbody>\n          </tbody>\n\n        </table>\n      </div>\n    '),__p+="\n\n  </div>\n";return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+='\n  <div id="scaleContent" class="innerContent">\n\n  ';var genClass="pure-u-1-5";__p+='\n\n    <div class="pure-g cluster-nodes-title pure-table pure-table-header pure-title">\n      <div class="pure-table-row">\n        <div class="'+(null==(__t=genClass)?"":__t)+' left">Type</div>\n        <div class="'+(null==(__t=genClass)?"":__t)+' mid">Running</div>\n        <div class="'+(null==(__t=genClass)?"":__t)+' mid">Planned</div>\n        <div class="'+(null==(__t=genClass)?"":__t)+' mid">Status</div>\n        <div class="'+(null==(__t=genClass)?"":__t)+' right"></div>\n      </div>\n    </div>\n\n    <div class="pure-g cluster-nodes pure-table pure-table-body">\n\n        <div class="pure-table-row noHover">\n          <div class="'+(null==(__t=genClass)?"":__t)+' left">Coordinators</div>\n          <div class="'+(null==(__t=genClass)?"":__t)+' mid" id="runningCoords">'+(null==(__t=runningCoords)?"":__t)+"</div>\n          ",!0===initialized?__p+='\n            <div class="'+(null==(__t=genClass)?"":__t)+' mid" id="plannedCoords"></div>\n            <div class="'+(null==(__t=genClass)?"":__t)+' mid" id="statusCoords"></div>\n          ':__p+='\n            <div class="'+(null==(__t=genClass)?"":__t)+' mid" id="plannedCoords"><i class="fa fa-circle-o-notch fa-spin"></i></div>\n            <div class="'+(null==(__t=genClass)?"":__t)+' mid" id="statusCoords"><i class="fa fa-circle-o-notch fa-spin"></i></div>\n          ',__p+='\n          <div class="'+(null==(__t=genClass)?"":__t)+' actions right">\n            <i class="fa fa-minus-circle" aria-hidden="true" id="removeCoord"></i>\n            <i class="fa fa-plus-circle" aria-hidden="true" id="addCoord"></i>\n          </div>\n        </div>\n\n        <div class="pure-table-row noHover">\n          <div class="'+(null==(__t=genClass)?"":__t)+' left">DBServers</div>\n          <div class="'+(null==(__t=genClass)?"":__t)+' mid" id="runningDBs">'+(null==(__t=runningDBs)?"":__t)+"</div>\n          ",!0===initialized?__p+='\n            <div class="'+(null==(__t=genClass)?"":__t)+' mid" id="plannedDBs"></div>\n            <div class="'+(null==(__t=genClass)?"":__t)+' mid" id="statusDBs"></div>\n          ':__p+='\n            <div class="'+(null==(__t=genClass)?"":__t)+' mid" id="plannedDBs"><i class="fa fa-circle-o-notch fa-spin"></i></div>\n            <div class="'+(null==(__t=genClass)?"":__t)+' mid" id="statusDBs"><i class="fa fa-circle-o-notch fa-spin"></i></div>\n          ',__p+='\n          <div class="'+(null==(__t=genClass)?"":__t)+' actions right">\n            <i class="fa fa-minus-circle" aria-hidden="true" id="removeDBs"></i>\n            <i class="fa fa-plus-circle" aria-hidden="true" id="addDBs"></i>\n          </div>\n        </div>\n\n    </div>\n\n  </div>\n\n'}return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+='  <div class="application-detail-view">\n    ';var visible=" visibility: hidden; ";__p+="\n    ",installed&&(__p+="\n    ",visible=" visibility: visible; ",__p+="\n    "),__p+='\n\n    <div class="headerBar" style="width: 100%">\n      <ul class="subMenuEntries subViewNavbar pull-left" style="'+(null==(__t=visible)?"":__t)+'">\n        <li id="service-info" class="subMenuEntry active"><a>Info</a></li>\n        <li id="service-api" class="subMenuEntry "><a>API</a></li>\n        \x3c!--<li id="service-readme" class="subMenuEntry "><a>Readme</a></li>--\x3e\n        <li id="service-settings" class="subMenuEntry "><a>Settings</a></li>\n      </ul>\n\n      <div class="headerButtonBar" style="display: none">\n        <ul class="headerButtonList">\n          <li>\n            <a id="app-deps" class="headerButton '+(null==(__t=_.isEmpty(app.get("deps"))?"disabled":"")?"":__t)+" "+(null==(__t=app.hasUnconfiguredDependencies()?"error":"")?"":__t)+'">\n              <span class="fa fa-cubes" title="Dependencies"></span>\n            </a>\n          </li>\n          <li id="app-scripts" class="dropdown">\n            <a class="headerButton '+(null==(__t=_.isEmpty(app.get("scripts"))?"disabled":"")?"":__t)+'" title="Scripts">\n              <i class="fa fa-code"></i>\n            </a>\n            <ul class="script-dropdown-menu dropdown-toolbar dropdown-menu" id="scripts_dropdown">\n            ',_.each(app.get("scripts"),(function(e,t){__p+='\n              <li class="dropdown-item">\n                <a class="tab" data-script="'+(null==(__t=t)?"":__t)+'">'+(null==(__t=e)?"":__t)+"</a>\n              </li>\n            "})),__p+='\n            </ul>\n          </li>\n          <li>\n            <a id="app-tests" class="headerButton">\n              <span class="fa fa-flask" title="Tests"></span>\n            </a>\n          </li>\n          <li>\n            <a id="download-app" class="headerButton '+(null==(__t=app.isSystem()?"disabled":"")?"":__t)+'">\n              <span class="fa fa-download" title="Download"></span>\n            </a>\n          </li>\n        </ul>\n      </div>\n    </div>\n\n    <section class="info" id="informationfunctions" style="display: none">\n      <div class="header">\n        <div id="hidden_buttons" style="display: none">\n          <button class="delete button-danger" '+(null==(__t=app.isSystem()?"disabled":"")?"":__t)+' >Delete</button>\n          <button id="app-replace" class="app-replace upgrade button-warning" '+(null==(__t=app.isSystem()?"disabled":"")?"":__t)+'>Replace</button>\n          <button id="app-switch-mode" class="app-switch-mode switch-mode button-warning">'+(null==(__t=app.get("development")?"Set Production":"Set Development")?"":__t)+'</button>\n        </div>\n      </div>\n    </section>\n\n    <section class="info" id="information" style="width: 100%;">\n      <div class="pure-g">\n\n        <div class="pure-u-1 pure-u-sm-4-4 pure-u-md-3-4 foxx-left">\n          <div class="foxx-icon-container pull-left">\n            <img src="'+(null==(__t=app.thumbnailUrl)?"":__t)+'" alt="Icon for Service" class="icon" />\n          </div>\n          <div class="pull-left" style="margin-left: 15px">\n            <h3>\n              '+(null==(__t=app.attributes.name)?"":__t)+'\n            </h3>\n            <p class="description">'+(null==(__t=app.attributes.description)?"":__t)+'</p>\n          </div>\n          <div id="app-warning" class="app-warning" style="clear: both; display:'+(null==(__t=app.needsAttention()?"block":"none")?"":__t)+';">\n            <h4>Out of order</h4>\n            <p id="app-warning-broken" style="display:'+(null==(__t=app.isBroken()?"block":"none")?"":__t)+';">This service has failed to mount due to an error.</p>\n            <p id="app-warning-config" style="display:'+(null==(__t=app.needsConfiguration()?"block":"none")?"":__t)+';">This service has not yet been configured properly.</p>\n            <p id="app-warning-deps" style="display:'+(null==(app.hasUnconfiguredDependencies(),__t="block")?"":__t)+';">Some dependencies have not yet been set up.</p>\n          </div>\n           <div class="categoryBar">\n             <h4>Readme</h4>\n           </div>\n          <div id="readme" class="readme">\n            ',app.get("readme")?__p+="\n              "+(null==(__t=marked(app.get("readme")))?"":__t)+"\n            ":__p+="\n              <p>No README data found.</p>\n            ",__p+='\n          </div>\n        </div>\n\n        <div class="pure-u-1 pure-u-sm-4-4 pure-u-md-1-4 foxx-right">\n          <div class="foxx-label-container">\n            <p>\n              <span>Author: </span><span>'+(null==(__t=app.attributes.author)?"":__t)+"</span>\n            </p>\n            <p>\n              <span>Mount: </span><span>"+(null==(__t=app.attributes.mount)?"":__t)+'</span>\n            </p>\n            <p>\n              <span>Mode: </span><span class="mode '+(null==(__t=app.get("development")?"development":"production")?"":__t)+'">'+(null==(__t=app.get("development")?"Development":"Production")?"":__t)+'</span>\n            </p>\n            <p>\n              <span>Version: </span><span class="version">'+(null==(__t=app.attributes.version)?"":__t)+"</span>\n            </p>\n            <p>\n              ",app.attributes.license&&(__p+="\n                <span>License: </span><span>"+(null==(__t=app.attributes.license)?"":__t)+"</span>\n              "),__p+="\n            </p>\n            <p>\n              ",!0===app.get("development")?__p+='\n                <span>Path: </span><span class="developmentSpan">'+(null==(__t=app.attributes.path)?"":__t)+"</span>\n              ":__p+="\n                <span></span>\n              ",__p+='\n            </p>\n          </div>\n          <div class="header_right">\n            <input type="button" class="open button-success" disabled="true" value="Show Interface" />\n          </div>\n        </div>\n\n      </div>\n    </section>\n\n    <main>\n      <div id="app-info" class="app-info" style="display: none;">\n        <h4>Info</h4>\n        <p id="app-info-swagger">Documentation for this service is not yet configured.</p>\n      </div>\n      <div id="swagger" class="swagger" style="display: none;">\n        <a id="jsonLink">Swagger</a>\n        <div id="swaggerJsonContent" style="display: none">\n          <div id="swaggerJsonEditor" style="height: 100%;"></div>\n        </div>\n      </div>\n      <div id="settings" class="readme" style="display: none; padding: 15px;">\n        ',_.isEmpty(app.get("config"))&&(__p+="\n          <p>No configurable settings available.</p>\n        "),__p+='\n        <div class="buttons" style="margin-left: -10px; margin-top: 20px;"></div>\n      </div>\n    </main>\n    \x3c!--<aside class="meta" id="sideinformation">\n      <dl>\n        <dt>Author</dt>\n        <dd>'+(null==(__t=app.attributes.author)?"":__t)+"</dd>\n        <dt>Contributors</dt>\n        <dd>\n          ",app.attributes.contributors&&app.attributes.contributors.length>0?(__p+="\n          <ul>\n          ",_.each(app.attributes.contributors,(function(e){__p+='\n            <li><a href="mailto:'+(null==(__t=e.email)?"":__t)+'">'+(null==(__t=e.name)?"":__t)+"</a></li>\n          "})),__p+="\n          </ul>\n          "):__p+="\n          No contributors\n          ",__p+='\n        </dd>\n        <dt>Links</dt>\n        <dd>\n          <ul>\n            <li>\n              <a href="'+(null==(__t=baseUrl)?"":__t)+"/_admin/aardvark/foxxes/docs/standalone/index.html?mount="+(null==(__t=encodeURIComponent(app.get("mount")))?"":__t)+'" target="_blank">\n                API Documentation\n              </a>\n            </li>\n            <li>\n              <a href="'+(null==(__t=baseUrl)?"":__t)+"/_admin/aardvark/foxxes/docs/swagger.json?mount="+(null==(__t=encodeURIComponent(app.get("mount")))?"":__t)+'" target="_blank">\n                API as JSON\n              </a>\n            </li>\n            ',app.attributes.repository&&"git"==app.attributes.repository.type&&(__p+='\n              <li><a href="'+(null==(__t=app.attributes.repository.url)?"":__t)+'" target="_blank">Git Repository</a></li>\n            '),__p+="\n          </ul>\n        </dd>\n      </dl>\n    </aside>--\x3e\n  </div>\n"}return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='\n  <div class="arangoToolbar arangoToolbarTop arangoFoxxToolbarTop">\n    <div class="pull-left">\n    </div>\n\n    <div class="pull-right">\n    </div>\n  </div>\n\n  <div class="contentDiv createModalDialog">\n    <div id="gitHubFoxx" class="foxxesInner modal-body">\n        <div>\n          <p>\n            Download a Foxx service from a public <a href="https://www.github.com">github.com</a> repository. In order to define a version please add a <a href="https://git-scm.com/book/en/v2/Git-Basics-Tagging">git tag</a> to your repository using the following format: "v1.2.3". To connect to github your username and the name of the repository are sufficient.\n          </p>\n          <table>\n            <tr class="tableRow">\n              <th class="collectionInfoTh">\n                Repository*:\n              </th>\n              <th class="collectionInfoTh">\n                <input type="text" id="repository" value="" placeholder="username/repository">\n              </th>\n            </tr>\n            <tr class="tableRow">\n              <th class="collectionInfoTh">\n                Version*:\n              </th>\n              <th class="collectionInfoTh">\n                <input type="text" id="tag" value="" placeholder="master">\n              </th>\n            </tr>\n            <tr class="tableRow" style="display: none">\n              <th class="collectionInfoTh">\n                Enable Legacy Mode:\n              </th>\n              <th class="collectionInfoTh">\n                <input type="checkbox" id="github-app-islegacy" value="true">\n              </th>\n            <th>\n              <span class="modalTooltips arangoicon icon_arangodb_info" title="Legacy Compatibility Mode allows mounting some Foxx services written for ArangoDB 2.8 or older. This overrides the ArangoDB version specified in the service manifest. See the Foxx documentation for more information on running legacy services in ArangoDB 3.">\n              </span>\n            </th>\n            </tr>\n          </table>\n        </div>\n    </div>\n    <div class="modal-footer">\n      <button id="installGitHubService" class="button-success" style="float:right" disabled>Install</button>\n    </div>\n  </div>\n\n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='\n\n  <div class="arangoToolbar arangoToolbarTop arangoFoxxToolbarTop">\n    <div class="pull-left">\n    </div>\n\n    <div class="pull-right">\n    </div>\n  </div>\n\n  <div class="contentDiv createModalDialog">\n    <div id="newFoxxes" class="foxxesInner modal-body">\n        <table id="new-app-information">\n          <tr class="tableRow">\n            <th class="collectionInfoTh">\n              Author*:\n            </th>\n            <th class="collectionInfoTh">\n              <input type="text" id="new-app-author" value="" placeholder="Your Name">\n            </th>\n          </tr>\n          <tr class="tableRow">\n            <th class="collectionInfoTh">\n              Name*:\n            </th>\n            <th class="collectionInfoTh">\n              <input type="text" id="new-app-name" value="" placeholder="Name of the Service">\n            </th>\n          </tr>\n          <tr class="tableRow">\n            <th class="collectionInfoTh">\n              Description*:\n            </th>\n            <th class="collectionInfoTh">\n              <input type="text" id="new-app-description" value="" placeholder="Please describe your Service here">\n            </th>\n          </tr>\n          <tr class="tableRow">\n            <th class="collectionInfoTh">\n              License*:\n            </th>\n            <th class="collectionInfoTh">\n              <input type="text" id="new-app-license" value="" placeholder="Apache 2"></input>\n            </th>\n          </tr>\n          \x3c!--\n          <tr class="tableRow">\n            <th class="collectionInfoTh">\n              Authentication*:\n            </th>\n            <th class="collectionInfoTh">\n              <input type="checkbox" id="new-app-authenticate" checked></input>\n            </th>\n          </tr>\n          --\x3e\n          <tr class="tableRow">\n            <th class="collectionInfoTh">\n              Document Collections:\n            </th>\n            <th class="collectionInfoTh">\n              <input type="hidden" id="new-app-document-collections" value="" placeholder="Document Collections"></input>\n            </th>\n            <th>\n              <span class="modalTooltips arangoicon icon_arangodb_info" title="A list of document collections that will be created specifically for this Service. A CRUD API for these will be generated.">\n              </span>\n            </th>\n          </tr>\n          <tr class="tableRow">\n            <th class="collectionInfoTh">\n              Edge Collections:\n            </th>\n            <th class="collectionInfoTh">\n              <input type="hidden" id="new-app-edge-collections" value="" placeholder="Edge Collections"></input>\n            </th>\n            <th>\n              <span class="modalTooltips arangoicon icon_arangodb_info" title="A list of edge collections that will be created specifically for this Service. A CRUD API for these will be generated.">\n              </span>\n            </th>\n          </tr>\n        </table>\n    </div>\n    <div class="modal-footer">\n      ',upgrade?__p+='\n        <button id="installNewService" class="button-success" style="float:right">Replace</button>\n      ':__p+='\n        <button id="installNewService" class="button-success" style="float:right">Install</button>\n      ',__p+="\n    </div>\n  </div>\n";return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='\n  <div class="arangoToolbar arangoToolbarTop arangoFoxxToolbarTop">\n    <div class="pull-left">\n    </div>\n\n    <div class="pull-right">\n    </div>\n  </div>\n\n  <div class="contentDiv createModalDialog">\n    <div id="uploadFoxxes" class="foxxesInner modal-body">\n        <div>\n          <p>\n  Upload a Foxx service bundle. The Foxx service bundle should be a zip archive containing all service files as a directory structure, including the manifest and any required <code style="padding: 0px 2px; font-weight: 10pt;">node_modules</code> dependencies. If your service doesn\'t have any dependencies, configuration or scripts you can also upload a single JavaScript file that will act as the service\'s entry point or "main" file.\n          </p>\n          <table>\n            <tr class="tableRow" style="display: none">\n              <th class="collectionInfoTh">\n                Enable Legacy Mode:\n              </th>\n              <th class="collectionInfoTh">\n                <input type="checkbox" id="zip-app-islegacy" value="true">\n              </th>\n            <th>\n              <span class="modalTooltips arangoicon icon_arangodb_info" title="Legacy Compatibility Mode allows mounting some Foxx services written for ArangoDB 2.8 or older. This overrides the ArangoDB version specified in the service manifest. See the Foxx documentation for more information on running legacy services in ArangoDB 3.">\n              </span>\n            </th>\n            </tr>\n          </table>\n        </div>\n        <div id="upload-foxx-zip">Upload File</div>\n      </div>\n      <div class="modal-footer">\n        ',upgrade?__p+='\n          <button id="installUploadService" class="button-success" style="float:right" disabled>Replace</button>\n        ':__p+='\n          <button id="installUploadService" class="button-success" style="float:right" disabled>Install</button>\n        ',__p+="\n      </div>\n    </div>\n  </div>\n";return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='\n  <div class="arangoToolbar arangoToolbarTop arangoFoxxToolbarTop">\n    <div class="pull-left">\n    </div>\n\n    <div class="pull-right">\n    </div>\n  </div>\n\n  <div class="contentDiv createModalDialog">\n    <div id="urlFoxx" class="foxxesInner modal-body" style="min-height: 150px;">\n        <div>\n          <p>\n            Download a Foxx service from a public available url. Access using credentials in the URL is allowed (https://username:password@www.example.com/). \n          </p>\n          <table>\n            <tr class="tableRow">\n              <th class="collectionInfoTh">\n                URL*:\n              </th>\n              <th class="collectionInfoTh">\n                <input type="text" id="repository" value="" placeholder="https://www.example.com/foxx.zip">\n              </th>\n            </tr>\n          </table>\n        </div>\n    </div>\n    <div class="modal-footer">\n      ',upgrade?__p+='\n        <button id="installUrlService" class="button-success" style="float:right" disabled>Replace</button>\n      ':__p+='\n        <button id="installUrlService" class="button-success" style="float:right" disabled>Install</button>\n      ',__p+="\n    </div>\n  </div>\n\n";return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='\n\n<div class="arangoToolbar arangoToolbarTop arangoFoxxToolbarTop">\n\n  <div class="pull-left">\n  </div>\n\n  <div class="pull-right">\n    <div class="search-field">\n      <input type="text" id="foxxSearch" class="search-input" placeholder="Search..."/>\n      <i id="searchSubmit" class="fa fa-search"></i>\n    </div>\n\n    <button id="categorySelection" class="button-default filterSelect">Category <i class="fa fa-caret-down"></i></button>\n    <button style="display: none" class="button-default filterSelect" id="foxxFilters">\n      <i class="fa fa-close"></i>Clear current <a id="filterDesc"></a> filter\n    </button>\n  </div>\n\n</div>\n\n<div class="contentDiv">\n  <div id="repositories">\n    <div id="availableFoxxes" class="tileList pure-u">\n    </div>\n  </div>\n</div>\n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+='\n  <div id="shardsContent" class="innerContent">\n      ';var genClass1="pure-u-6-24";__p+="\n      ";var genClass2="pure-u-6-24";__p+="\n      ";var disabled=" ",collectionName;__p+="\n      ",__p+="\n      ";var first=0;__p+="\n\n      ";var collectionInSync=function(e){return!!_.isEqual(collections[e].Current,collections[e].Plan)};__p+="\n\n      ",_.each(collections,(function(e,t){__p+='\n        <div class="sectionShard" id="'+(null==(__t=t)?"":__t)+'">\n        ',collectionName=t,__p+="\n\n          ",0===first?(__p+='\n            <div class="sectionHeader pure-g" style="margin-top: -20px;">\n            ',first++,__p+="\n          "):__p+='\n            <div class="sectionHeader pure-g">\n          ',__p+='\n\n          <div class="pure-u-22-24">\n            <div class="title" style="position: relative; top: -4px;">\n              '+(null==(__t=t)?"":__t)+'\n            </div>\n          </div>\n          <div class="pure-u-2-24 shardSyncIcons">\n              ',visible===t?__p+='\n                <i style="margin-left: 10px; color: #fff;" class="fa fa-arrow-down"></i>\n              ':__p+='\n                <i style="margin-left: 10px; color: #fff;" class="fa fa-arrow-right"></i>\n              ',__p+="\n            ",collectionInSync(t)?__p+='\n              <i style="margin-left: 10px;" class="fa fa-check-circle"></i>\n            ':__p+='\n              <i style="margin-left: 10px;" class="fa fa-times-circle"></i>\n            ',__p+="\n          </div>\n        </div>\n\n        ",visible===t?__p+='\n          <div class="sectionShardContent">\n        ':__p+='\n          <div class="sectionShardContent" style="display: none">\n        ',__p+='\n        <div class="pure-g pure-table pure-table-header pure-title" style="clear: both">\n          <div class="pure-table-row">\n            <div class="'+(null==(__t=genClass1)?"":__t)+' left">Shard</div>\n            <div class="'+(null==(__t=genClass1)?"":__t)+' left">Leader</div>\n            <div class="'+(null==(__t=genClass2)?"":__t)+' left">Followers</div>\n            <div class="'+(null==(__t=genClass1)?"":__t)+' right">Sync</div>\n          </div>\n        </div>\n\n        ';var i;__p+="\n        ",_.each(e.Plan,(function(e,t){__p+='\n          <div class="pure-g pure-table pure-table-body">\n\n            ',e.progress&&(__p+="\n            ",i="disabled",__p+="\n            "),__p+='\n\n            <div id="'+(null==(__t=collectionName)?"":__t)+"-"+(null==(__t=t)?"":__t)+'" class="pure-table-row noHover '+(null==(__t=i)?"":__t)+'" collection="'+(null==(__t=collectionName)?"":__t)+'" shard="'+(null==(__t=t)?"":__t)+'" leader="'+(null==(__t=e.leader)?"":__t)+'">\n\n              ',"_"===e.leader.substring(0,1)&&(__p+="\n              ",e.leader=e.leader.slice(1),__p+="\n              "),__p+='\n\n              <div class="'+(null==(__t=genClass1)?"":__t)+' left">'+(null==(__t=t)?"":__t)+'</div>\n              <div class="shardLeader '+(null==(__t=genClass1)?"":__t)+' positive left"><span>'+(null==(__t=e.leader)?"":__t)+"</span></div>\n\n              ";var n=null;if(__p+="\n              ",_.each(e.followers,(function(t){__p+="\n                ",t===e.leader&&(__p+="\n                  ",n=!0,__p+="\n                "),__p+="\n              "})),__p+="\n\n              ",n)__p+='\n                <div class="'+(null==(__t=genClass2)?"":__t)+' mid"><i class="fa fa-circle-o-notch fa-spin"></i></div>\n              ';else{if(__p+="\n                ",0===e.followers.length)__p+='\n                  <div class="'+(null==(__t=genClass2)?"":__t)+' left"> no followers </div>\n                ';else{__p+="\n                  ";var r="";__p+="\n                  ";var a=0;__p+="\n                  ";var o="inSync";__p+="\n\n                  ";var s=0;__p+="\n                  ",_.each(e.followers,(function(i){__p+="\n\n                    ",collections[collectionName].Current[t].followers.indexOf(i)>-1?(__p+="\n                      ",o="inSync",__p+="\n                    "):(__p+="\n                      ",o="notInSync",__p+="\n                      ",s++,__p+="\n                    "),__p+="\n\n                    ",1===e.followers.length?(__p+="\n                      ",r+='<span class="'+o+'">'+i+"</span> ",__p+="\n                    "):(__p+="\n                      ",0===a?(__p+="\n                        ",r+='<span class="'+o+'">'+i+"</span>",a++,__p+="\n                      "):(__p+="\n                        ",r+=", "+'<span class="'+o+'">'+i+"</span>",__p+="\n                      "),__p+="\n                    "),__p+="\n                  "})),__p+='\n                  \n                  <div class="shardFollowers '+(null==(__t=genClass2)?"":__t)+' left">'+(null==(__t=r)?"":__t)+"</div>\n                "}__p+="\n\n                ",collectionInSync(collectionName)?__p+='\n                  <div class="'+(null==(__t=genClass1)?"":__t)+' left progressWrapper"><i class="fa fa-check-circle"></i></div>\n                ':(__p+="\n                  ",__p+=s>0?'\n                    <div class="'+(null==(__t=genClass1)?"":__t)+' left progressWrapper"><span class="shardProgress"><i class="fa fa-circle-o-notch fa-spin fa-fw"></i></span></div>\n                  ':'\n                    <div class="'+(null==(__t=genClass1)?"":__t)+' left progressWrapper"><i class="fa fa-check-circle"></i></div>\n                  ',__p+="\n                "),__p+="\n\n              "}__p+="\n\n            </div>\n          </div>\n\n          ",__p+="\n        "})),__p+="\n        </div>\n\n      </div>\n      "})),__p+='\n    <div style="width: 100%; height: 70px;">\n      ',"_system"===frontendConfig.db&&(__p+='\n        <button id="rebalanceShards" style="margin-top: 20px; margin-bottom: 20px;  margin-right: 10px;" class="button-success pull-right">Rebalance Shards</button>\n      '),__p+="\n    </div>\n  </div>\n\n"}return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='  <div class="spotlightWrapper">\n    <div id="spotlight">\n      <input class="typeahead" type="text" placeholder="Search... ">\n    </div>\n  </div>\n';return __p}},function(module,exports,__webpack_require__){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='  <div class="navlogo display-none">\n    <a href="#dashboard" style="padding-left: 15px;">\n      <img class="svg stat_cpu"\n        src="'+__webpack_require__(428)+'"\n      />\n      <img class="svg stat_ram"\n        src="'+__webpack_require__(429)+'"\n        style="background-color: #FAFF92; margin-top: 9px; margin-left: 4px; margin-right: 2px;"\n      />\n      <img class="svg stat_req"\n        src="'+__webpack_require__(430)+'"\n        style="background-color: #8aa051; margin-top: 9px;"\n      />\n    </a>\n  </div>\n';return __p}},function(e,t,i){e.exports=i.p+"static/media/cpu.be6a1f63.svg"},function(e,t,i){e.exports=i.p+"static/media/ram.75050f7e.svg"},function(e,t,i){e.exports=i.p+"static/media/requests.fd159a14.svg"},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='  <div class="application-detail-view">\n\n    <div class="headerBar" style="width: 100%">\n      <ul class="subMenuEntries subViewNavbar pull-left">\n      </ul>\n    </div>\n\n    <section class="info" id="information" style="width: 100%;">\n      <div class="pure-g">\n\n        <div class="pure-u-1 pure-u-sm-4-4 pure-u-md-3-4 foxx-left">\n          <div class="foxx-icon-container pull-left">\n            <img src="'+(null==(__t=image)?"":__t)+'" alt="Icon for Service" class="icon" />\n          </div>\n          <div class="pull-left" style="margin-left: 15px">\n            <h3>\n              '+(null==(__t=app.attributes.name)?"":__t)+'\n            </h3>\n            <p class="description">'+(null==(__t=app.attributes.description)?"":__t)+'</p>\n          </div>\n           <div class="categoryBar">\n             <h4>Readme</h4>\n           </div>\n          <div id="readme" class="readme">\n          </div>\n        </div>\n\n        <div class="pure-u-1 pure-u-sm-4-4 pure-u-md-1-4 foxx-right">\n          <div class="foxx-label-container">\n            <p>\n              <span>Author: </span><span>'+(null==(__t=app.attributes.author)?"":__t)+'</span>\n            </p>\n            <p>\n              <span>Version: </span><span class="version">'+(null==(__t=app.attributes.latestVersion)?"":__t)+'</span>\n            </p>\n            <p>\n              <span>GitHub: </span><span><a href="https://www.github.com/'+(null==(__t=app.attributes.location)?"":__t)+'">'+(null==(__t=app.attributes.location)?"":__t)+"</a></span>\n            </p>\n            <p>\n              ",app.attributes.license&&(__p+="\n                <span>License: </span><span>"+(null==(__t=app.attributes.license)?"":__t)+"</span>\n              "),__p+="\n            </p>\n            <p>\n              <span>Categories: </span><span>"+(null==(__t=app.attributes.categories)?"":__t)+'</span>\n            </p>\n            <p>\n              <span></span>\n            </p>\n          </div>\n          <div class="header_right">\n            <input id="installService" type="button" class="button-success" value="Install Service" />\n          </div>\n        </div>\n\n      </div>\n    </section>\n\n  </div>\n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='\n  <ul class="subMenuEntries top">\n    <li class="subMenuEntry pull-left">\n      <div class="breadcrumb"></div>\n    </li>\n    <li id="healthStatus" class="infoEntry subMenuEntry pull-right positive">\n      <a class="info health-info">HEALTH: </a>\n      <a class="state health-state">GOOD</a>\n      <a class="icon health-icon">\n        <i class="fa fa-check-circle"></i>\n      </a>\n    </li>\n    <li id="dbStatus" class="infoEntry subMenuEntry pull-right positive">\n      <a class="info">DB:</a>\n      <a class="state"><span>'+(null==(__t=currentDB.name)?"":__t)+'</span></a>\n      <a class="icon db-icon default-icon">\n        <i class="fa fa-refresh"></i>      \n      </a>\n    </li>\n    <li id="userBar" class="infoEntry subMenuEntry pull-right" style="margin-right: 10px;">\n    </li>\n  </ul>\n\n  <ul class="subMenuEntries bottom">\n  </ul>\n\n';return __p}},function(module,exports,__webpack_require__){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='\n  <div class="supportView">\n    <ul class="subMenuEntries subViewNavbar">\n      <li id="documentation-support" class="subMenuEntry active"><a>Documentation</a></li>\n      <li id="community-support" class="subMenuEntry"><a>Support</a></li>\n      <li id="swagger-support" class="subMenuEntry "><a>Rest API</a></li>\n    </ul>\n \n    <div class="innerContent" id="supportContent">\n\n      <div id="community" style="display: none">\n        <div class="pure-g" style="width: 100%;">\n\n          <div class="pure-u-1-1">\n            <h3 style="font-weight: 100;">Feeling stuck? Not for long\u2026</h3>\n          </div>\n\n          <div class="pure-u-1-1" style="margin-bottom: 20px;">\n            <h4>Paying Customers</h4>\n            If you are a Customer, please <a href="https://www.arangodb.com/supportlogin" target="_blank">log-in</a> to our Support Portal to request help.\n          </div>\n\n          <div class="pure-u-1-1" style="margin-bottom: 20px;">\n            <h4>Community Support</h4>\n            Join our experienced and growing community to get help, challenge ideas or discuss new features!<br/><br/>\n            <br/>\n          </div>\n\n          <div class="pure-u-1-1 pure-u-sm-1-1 pure-u-md-1-3 center">\n            Place for stars and reporting issues<br/><br/>\n            <a href="https://github.com/arangodb/arangodb" target="_blank"><img style="width: 60%;" src="'+__webpack_require__(434)+'"/></a>\n          </div>\n\n          <div class="pure-u-1-1 pure-u-sm-1-1 pure-u-md-1-3 center">\n            Ask questions and get answers<br/><br/>\n            <a href="https://stackoverflow.com/questions/tagged/arangodb" target="_blank"><img style="width: 70%;" src="'+__webpack_require__(435)+'"/></a>\n          </div>\n\n          <div class="pure-u-1-1 pure-u-sm-1-1 pure-u-md-1-3 center">\n            Join a lively conversation about ArangoDB<br/><br/>\n            <a href="https://slack.arangodb.com/" target="_blank"><img style="width: 50%; margin-top: 5px;" src="'+__webpack_require__(436)+'"/></a>\n          </div>\n\n          <div class="pure-u-1-1 pure-u-sm-1-1 pure-u-md-1-1 center" style="margin-top: 30px">\n            Challenge ideas and discuss upgrades<br/><br/>\n            <a href="https://groups.google.com/forum/#!forum/arangodb" target="_blank"><img src="'+__webpack_require__(437)+'"/></a><br/><br/>\n          </div>\n\n          <div class="pure-u-1-1" style="margin-top: 0px">\n            <h4>Want to shorten your development cycle or securing your production system?</h4>\n            Benefit from the deep understanding and decades of experience our core team has build up. Discuss architectures, data modeling, query optimization or anything you like. Get in contact for our individual development support, trainings or subscriptions.<br/><br/>\n            <a href="https://www.arangodb.com/contact/" target="_blank">Contact us</a> to get detailed infos for enterprises and special offers for startups.\n          </div>\n\n        </div>\n\n      </div>\n\n      <div id="swagger" style="display: none; height: 100%;">\n      </div>\n\n      <div id="documentation">\n\n        <div class="pure-g" style="width: 100%;">\n\n          <div class="pure-u-1-1" style="margin-bottom: 30px">\n            <h4>Find manuals for ArangoDB, AQL, Foxx and many other useful resources</h4>\n          </div>\n\n          <div class="pure-u-1-1 pure-u-sm-1-2 pure-u-md-1-4">\n            <div class="title">\n              Manual\n            </div>\n            <ul class="menu">\n              <li><a target="_blank" href="https://www.arangodb.com/docs/'+(null==(__t=parsedVersion)?"":__t)+'/getting-started.html">Getting started</a></li>\n              <li><a target="_blank" href="https://www.arangodb.com/docs/'+(null==(__t=parsedVersion)?"":__t)+'/data-modeling.html">Data models &amp; modeling</a></li>\n              <li><a target="_blank" href="https://www.arangodb.com/docs/'+(null==(__t=parsedVersion)?"":__t)+'/administration.html">Administration</a></li>\n              <li><a target="_blank" href="https://www.arangodb.com/docs/'+(null==(__t=parsedVersion)?"":__t)+'/scaling.html">Scaling</a></li>\n              <li><a target="_blank" href="https://www.arangodb.com/docs/'+(null==(__t=parsedVersion)?"":__t)+'/graphs.html">Graphs</a></li>\n              <li><a target="_blank" href="https://www.arangodb.com/docs/'+(null==(__t=parsedVersion)?"":__t)+'/">Go to Manual start page</a></li>\n            </ul>\n          </div>\n\n          <div class="pure-u-1-1 pure-u-sm-1-2 pure-u-md-1-4">\n            <div class="title">\n              AQL Query Language\n            </div>\n            <ul class="menu">\n              <li><a target="_blank" href="https://www.arangodb.com/docs/'+(null==(__t=parsedVersion)?"":__t)+'/aql/fundamentals.html">Fundamentals</a></li>\n              <li><a target="_blank" href="https://www.arangodb.com/docs/'+(null==(__t=parsedVersion)?"":__t)+'/aql/data-queries.html">Data Queries</a></li>\n              <li><a target="_blank" href="https://www.arangodb.com/docs/'+(null==(__t=parsedVersion)?"":__t)+'/aql/functions.html">Functions</a></li>\n              <li><a target="_blank" href="https://www.arangodb.com/docs/'+(null==(__t=parsedVersion)?"":__t)+'/aql/examples.html">Usual Query Patterns</a></li>\n              <li><a target="_blank" href="https://www.arangodb.com/docs/'+(null==(__t=parsedVersion)?"":__t)+'/aql/">Go to AQL start page</a></li>\n            </ul>\n          </div>\n\n          <div class="pure-u-1-1 pure-u-sm-1-2 pure-u-md-1-4">\n            <div class="title">\n              Foxx Framework\n            </div>\n            <ul class="menu">\n              <li><a target="_blank" href="https://www.arangodb.com/docs/'+(null==(__t=parsedVersion)?"":__t)+'/foxx-getting-started.html">Writing Your First Microservice</a></li>\n              <li><a target="_blank" href="https://www.arangodb.com/docs/'+(null==(__t=parsedVersion)?"":__t)+'/foxx-guides.html">Guides</a></li>\n              <li><a target="_blank" href="https://www.arangodb.com/docs/'+(null==(__t=parsedVersion)?"":__t)+'/foxx-reference.html">Reference</a></li>\n              <li><a target="_blank" href="https://www.arangodb.com/docs/'+(null==(__t=parsedVersion)?"":__t)+'/foxx-deployment.html">Deployment</a></li>\n              <li><a target="_blank" href="https://www.arangodb.com/docs/'+(null==(__t=parsedVersion)?"":__t)+'/foxx.html">Go to Foxx start page</a></li>\n            </ul>\n          </div>\n\n          <div class="pure-u-1-1 pure-u-sm-1-2 pure-u-md-1-4">\n            <div class="title">\n              Official Drivers &amp; Integrations\n            </div>\n            <ul class="menu">\n              <li><a target="_blank" href="https://www.arangodb.com/docs/'+(null==(__t=parsedVersion)?"":__t)+'/drivers/java.html">ArangoDB Java Driver</a></li>\n              <li><a target="_blank" href="https://www.arangodb.com/docs/'+(null==(__t=parsedVersion)?"":__t)+'/drivers/js.html">ArangoJS - Javascript Driver</a></li>\n              <li><a target="_blank" href="https://www.arangodb.com/docs/'+(null==(__t=parsedVersion)?"":__t)+'/drivers/php.html">ArangoDB-PHP</a></li>\n              <li><a target="_blank" href="https://www.arangodb.com/docs/'+(null==(__t=parsedVersion)?"":__t)+'/drivers/go.html">ArangoDB Go Driver</a></li>\n              <li><a target="_blank" href="https://www.arangodb.com/docs/'+(null==(__t=parsedVersion)?"":__t)+'/drivers/spring-data.html">ArangoDB Spring Data</a></li>\n              <li><a target="_blank" href="https://www.arangodb.com/docs/'+(null==(__t=parsedVersion)?"":__t)+'/drivers/spark-connector.html">ArangoDB Spark Connector</a></li>\n              <li><a target="_blank" href="https://www.arangodb.com/docs/'+(null==(__t=parsedVersion)?"":__t)+'/drivers/">Go to Drivers &amp; Integrations start page</a></li>\n            </ul>\n          </div>\n\n        </div>\n      </div>\n     </div>\n\n   </div>\n\n';return __p}},function(e,t,i){e.exports=i.p+"static/media/comm_github.cda411c2.png"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAAB2CAMAAAAJB5HfAAADAFBMVEXVt4j8/Pz19fXR0dH67NzYljvVyLrKuai8vb73mkHq4tqqq6vk5eX1iTqKi47ryJn09PSsknhLTU3l1LljZGTp6uru7u/gyaf83ML3lTTanEijpKUYGhrUjCnJomb++fX6yaX59vL39/c6PDzJysqho6O7ppDFxsasra0iJCSxsrIqLS3U1NT5t3j5toNCRET70rSlpqb98eWPkJLCllPx5tb18e7BwcL0eiAxNDTl3dX4pVTGnF26u7vz6dz2l1H9+/jx8fHf39+am5vW1tf+/PqQkZESFRW0nYX2jCOJiorktnjq28T////g4eHcwpzZ2dnf1cqen5/b29v99u5ydHTdpVhsbm7s7e395dL6w4zw6+bu063d3d2Oj4/94s6njHBVV1fmvIOUlZYNEBAJDAz+7uBmaGjOzs71gy/MzMz48uj5rmM+QED82bt4enrhrWXfx6T7zJ759e794MZGSEj3omPizKu5pI52eHj15c76wplvcXGpj3T2kSuAgoJucHBSVFQmKSlYWlqEhYV8fn50dnYWGBj+8ujOq3ROUFAGCQny7uk1ODgtMDD96dVWWFjowo56fHxdX19pa2toamr+/v2HiIheYGDu6OO0tba7vLzNzc/+/f3ZzcH4q3L+9/HEmVdQUlLg1szu4s+goaF+gIDHnmDEsp/59/VaXFyys7O/rJfv1rMdHx/WkDC/wMDr3sr0fSb82LSRkpIEBwf5smzRsH738OXs5t/x2LbV1dWio6awl36trq/81rv806zGx8f4pWj2jyeCg4b2ih/6+vr7+/v+/v7z8/Py8vK1tranqKibnJz5+fnh4uLi4+OWlpmztLTHyMjr7Oy0tbXm5+eDhITj5OSvsLDDxMT///63uLirrKyLjIyXmJi2t7eTlJTfqV/0fCP//v37+PO1trjOv7DCw8P48+vi2c/7x5X36tj6wJX7+ff7+vnjz7CHiIvT09Pz3sD2jkL+9Oz79Orism/0gCrWiyXq6+vv7+/4qG3avpLiql74oEjUnIhsAAAXMElEQVR42u2dC1xUZdrABdRIaNUJrGSUYiA8DjXhJUWllYtOUYcImoUuUqwzQhpRJu1SmMJIk3OCVDApnLaLZME20cakrSsttcBggK4XvIyJla5Wu33G1n59+LX7ncv7nvOeM2cuMPYFw/v8+v12PPfz/N/neZ/neZ/DjiGxjDoZg1WAoWPB0LFg6FgwdCwYOhYMHQuGjgVDxzLyoFvWPGLB2htd0F+59ocrHsDaG1XQ7/lo/vz5H72C1Td6oEdee8V8Rp7C6hs10Ff873xOHsIOftRAH/sHAH3+E9jBjxr3fi2Ejh386IG+5HcQ+kNrsAZHS/Q+9jtI/ZfYwY+alO0mCP2LG7EKRwn0M5E3QOgPXY11OEosnVzx3RfQwX+PlThKoNs//AF6+BtxDd5foS+JlPz7Rj6C/xBr0T+hn1n9/iyxqc/6JR/BP4vV6JfQ33u6beFYh2jThw/xDn4x1qP/QXc8cE1b223/EVdiLLyD/+EmrEf/g/78f9oYufwRka1/zzv472bZsSb9DPqKhW2cXLNatP1qwcFHYk36F/TvH26D8vG9S9Do7ka43vaHmxxYlf4F/f3beOq33XA3sieSd/BXjMWq9C/3Hnnjxzz1tofR1G0NX6L53RKsSz9L2b5+WqC+EDXqp/iVl2uxLv0tT//zNQJ1NHWLfAI7eL+FTl59uUD9mveEDP4ePoJ/Ajt4f4NO3rNQoP70alkHfwar08+gO1YImVvbbULqFvkR7+Dvwer0M+ik49kb2uRStwf43qkncInG36CTjlfubUNSN7i2ZuGbY7/AzbF+B50kl6xGEvaFzzucHDxujh3x0P/5pDQgt7yHpG6XrwHU7xEc/N1YoyMb+u6p0zaPlWJfI0rdwN5r+W9e/oHztpENffO0adPGbf67GKPjeSR1+3g1t1P4+uGHR7BKRzL0sVOnTeOwi7c/i6RubfdGsi6e//rhCtxPMaKhb54GZKoE+91I6tZ2AxvEn7mJc/BP4O9YRzR0YOgc9omi/rjF996GpG4rmF0OxsFf8RT+yGlEQ4/cPA2VqZuR9RTHktXoqhtbiJv1HTbzEQ/9X59PmybBvgrZLUrdrmZs/aZ/4E9dRjp0y9iJU6XYJ97tInX7MzOt4w9d/CCQs6ySYn9n6kRh0halbl/jznc/ydPJM7snjnPCfjcM6WY9LIRz7+MIzl+g0yHb2F+Pkzr5+x+Hsd4NsBK/cAVuhvUf6Ezq9mvp3P6r+/8F9t3LBfGXP4/16F/QSfLvTtg/vx9E8quZIP6aNdjO/Q46ST55uzN2bhZ/7/K2p9/DWvRH6DR2p7n90bfPsqnbwq9/9new1NVHZMaHYpiXGDrpcML+zqP3LyYdjlk/f49UVDFloJRHhqeCk+Z1ZcbExGTOCyA7olNiGKk/3TH8oC+e+6XM1iVP3v6OBPvnbw+L/DxKY7PZTAeHI/LkChWh1evp/4yBZOB6PftTqwocftDnTt845qod1zltP/vk7RIf/87tw6EXMqqYhq78ZBgyj1FTNiBlNPSt3E+qsnP4Qb8wZ86cVxdNH/Obd1dJfHyk1NpvJzF017LcZOOFsfRs8LtwGEIfMwfIq9N3PbZj9zcWkZP/bwT7uKF/y7SuUqXSBPs19NNW24iBfnbjHFR27nrsjlVnkaapfz7KY9889AzdSL+8Pt6foUeV2UYMdMfcnXOksogGf8vjMGqz/PHf43w1dLKWgR7iz9AblSh08/C29AuvzpGTnbvuvGPulwHcwPgja+0Tz2DoLsX+BuStryw2F6dFDWfoZ8bMcSmLdt155Y7dLzCHvf3v/xm3isTQXUqgESDWpoG60XC29Ks2Tp/jRhZt/PHCjt128sz9b1swdDdVmTyYrPHDYBhDX7x77pV37lrkDvzOjWMuvPuNTzf2e+j7AHSqZCRAZ2O1L2+5485dbi1+5wUHhu4FdNuIgc5a/OO33HHVrp0uqV+JoXsFXTeSoLMWf3bVu1eNkQU/fa6Xt5iyrDU2uVe6NYyB3iJzeOf+PU3RyTmur5eTcWJl+iSvoNvFUUdS0PkT5/dECbs9BeDCz97o8+eje90enUMfUrDPOZDzxtLtxw6dOB992Osn8xF66/K/MvLZPJcrP5bFj+94bMz0VyWZ3C52Vaa9aTZ7/l/3yJ4afry0krBqtVZCrTiaeJhL+AIz83U6Nf3yBnOJTqcrzQ6Crxo+s1RVblXqTVYiwZhS0OOkm5wj7PWUVkKTG9TuGro9RmE2mzXbBMDtcac05SatVqssf607mXuQniKrmpHy4gLk3GNGgt1K5KUDm63TJViZU4lKXeIU5MgKcOBR0r4/RkHQh5iIshaGaJCmTAHrceVl9KO4Sdnsh2fmJ9A6ok+ufKYpiVNRBfdk6krktfo1zP2qGoUt4Ypy7rDXBge97i+cHHS/3Of4cseFXdMXIeDvZIt0PQfB+SvlAtjmKrQ+YVBvyWLukiMqVdECvHxgTAKFbtY2xLaLPWamCt2dneUS+ky2MKI+z4++oDAtcqp1yzF2cy64H5UmV1QJ456qpRB5KkrVEijyVoyURqUQwiGKoA4y0SaVMlfFmaTMBOQwqvAge/0++O8twpEp3KZ8YUsTPC1/cNCDAbSXvFjjPbvjN2M2Tgfgr+QM6CVw/nbnw/eYpW9OKdMO2J2hf8p50DAnTenTUPUESc9TH7fIQz/EMiD40n5Ut1JyatVMxtjj4KBUCC6BfAZsM7GTz+Fs6UOFHYBH5oMtDc+IDlA2yUB3VYbNMEqPrAmnN0fDUWQO4Id8LbeFGOCH8lKo14O+Qbd3/JfbCeXxuRd+ZMC/usMT9AwwgmnfTii10FoqOsgco0GvZ/9N/y8tBla7GcXgBbRKpdJkAIcXCXYVXA6HAn0K+NV3UQ56FntnJR8xdFTYnMdTCmqr1hPC1Ayew6ZilNtb5nyqIlkMnaLE+62JZJ230IMqZa6/n7b/TXBgZ/HeXcndx8C/VwB8OOKAb9CfO3fZ+PHj73r9qwULPnjxxeduvvmbb16QuvqzE6788cdVHqAnKdjnqdTFfHKotTH+aJ6a1WQ0DSmxububcdSG/MyUlJS+5YwSAzn9W80b4ltajofMDuOMUB8Bb7pdzdlfsa6vu/tULbDRbhno4QqBKivNNhlhU4cQ4PSpXP7gOhOSX0/ZJHMmVRwutnSxEImk15aeXil3hdfowCENjCRtF5z66+Hta/nxCcOG6h7foC9Y+yAna9fuvfXW317/+zffvIwZBy/fddeCCRNefPG+m29+6wWHAwaYrqGnMNaoL1rGD8uCDWqbKkMUvZ9EqpbdzBuYg/nHjyvRs6MEhMzhGs4KZiYBE9Exu6uCnaEncW5wA3/pE3pKFk4qrTYYJORBDvYN0Em30v9aJ4vVVuoGupJxtQedNhfLQQ9okL/+M7RfgxNSEcxqqvlZDYw58gh8r3i7j9D3Pigva9dO3ssOA24cLCDdQ59ULAlDmImqokCcp3+K7m2x2sIG0A3sYDdwy6/taVzOGy7sjjHZNKnOc3pPCXtkNh8DRqnkNWsLo195PdCb9RDMzRRgr4aeTKOFFfEERbEQlRqaXEJXss+bVbGuRA2niQ0VtMS3y0BvoeSfzNRK5migswejPAuOAkoPjR/OWqZU0jfod01+0Cu5zIOlb2dm4KqcwRRnZpTsF48bVv861vbTWfVni5rL4vMyZKL3payDaBBSK0GzprDm5blGAz/30lNNE1RlHwyItTCGpAMlPrTUzMwIDU0NKbSJwisEOpH92fIiOpQwwemI7DFKTNUZeoCGfzTVuuXNJfyooujEQQczvmjOA0UI0wvw7+1wfJZd9A26w1vo5zxYOpv4hA2uIiedmbrYCZTx7x3stKySxCs5MilbFwvNjDRE8+Fx5TymdJLTBQNjqoJ+fsixgVOcfRukmAGTAGbOBHNMFsxHtCvF0M1B9HDsycpX1tsHUZyJ5dupig7Q6o9K5i+YkAyyTlpJMdxLIhGlmnu7dDhgZ9t9tPSX13oHfbwH6DOYF1rvWxk2iAFYxZhzDmsT9Z7LsJzlqrKQAoYaMWzOQ5iExgbylB5A3s5WlXth7L7JLgRTlfxg6wcXo4pE0AvB/XLiAgZThj0FnU42KDBOgWRNIWRopej8DCTp1HLjYAbMYVpJ36Dbxz94aaAfZzRr9A16OqPi8jgmdGfwq5Z5hN7PpnVV6MPw5vQGrMlaYEiesIckU8G0TXVzYYdWiO2hrRqQ0k0arNHYEej6+qHV3mFoRvDP2wIfdgtph1dXsIFOpigaYQ/OBmNSE+ojdPLcWq9Mfe3LHqCfZ1wjsewSQN8DHL1tfZQn6OlszEbUoXsjQOyuP81vmg1MRMlkD9C4qpPQcoea1nQGsDUCKdLGgmS5PAOBnpAxJOj2SkDNyM/Jx2DQWWsnM8H4I1rRlBx6f3oTnJmOWnyF/sHL586de/PN31//21tvvXXv3r2TJ0+WGwaTX/cAvZd5fKo61BfooRB6exHzcimeVtmSzMA1ogL9t1oIcYOtSKoeD0dAHONfYWyUTQpBXgI6DoGmTacR6ObAIUE/DCceIbvkjV8xidwPi1GMM+/lXABlYMeJlkkRCsBbGAa9vuiqDPvC4sVvXXfzix9M+Oqrl8ePP3fZZcw4uB6Og7WeoZNH2cdTZa5M750S2OE99A5eAvZD6FGMo6Ua3UI/Qk7iPiawzhTtLQHmVJjOb0pVIy49B0ZrmXYQRTCKnMfMmdD7ZnanAMlMA6dqIxDoRvuQoGdBqsjsAGP2QtpaysCTr6ezzxjud6WCG8L5tHHXg9GsSr9U0MUlODbG6Xjruueeu2/ChAWvv06Pg/s8Qd8PPJVVpTDmF83OPBibbvcEvSfoSG4RLxU1JgA9UMOVtN1BryMrgJJUIveiA1vNQg0gHBSIKdZ3QBTGfaRlNsyg2qXTqLSe14xAzwsYEvQgONyQTvANMHakQ8Plen642kEYMnsGZ/EJ9O58cGhN1E8C3cUo8FB7j1VLyhaa7BmBbqG3hKmd1ctAn8Sa/HaHG+jWQ116PgFCF+eegdDDnaGzwdt5cIAyg0yCFZFcJGiTh77Nd+hNVmfoS8FkwwStcWC/MpY8xo0PfVNnOaxOR4GIwxBB+gw9oKfdK7F4hO7YvskgUZU275Br6KHZJjn1spZOsNDdWTqxnqvtsxNusHvovSLogTA3qrf3A++u7WcnKHfQ03yHHiwDPRdCp0O1djgEu8kIA/TktRSIOWC1sKrfd+it9REe5U+07PEInZ4uZ2YnSBE2uYKeXgzLU0ooJgpaOjO+1QXuoBtYO8/uZ2+oCR8EdPspWNiKgg7d3PmzQ1+G+Pp80sj90gWQIZw/q5zSDRxbbY/v0Fv+4p2c9wI6/Z7ph2YsX5ddXaxSAyNS75eHnsSVPKu2NEbH9XOSmkhAS2eMkYh2B53DlkOGsD/SApyhD7hw72S/Cfr3MtECxnI30G0VvkNvlYF+ihKgO7brQVGgoIorun9KD1huBjQcKQXevZn0HXqjl9BjvYLOWlJ74L6cgQMr+zhVH5WH3sgO8ZJj6LgN56N3JpPSnvQEXUMPqE52jU3b6hTIFQvhXbIaDeTIfZB1EaBAcAvm8TB6j493cnbx/b5DX1buDL3IJrh3MhDGwmEmIU4H/j0PDFzixLCEzvd5hDYwz1vVKQedWzjUdcoXZ9rDkK4ql9CrmEybLGBjHgXfobjO4FRBgW0phhhQv4E+G4yPUi7enMmdSSXYXbRM+gidT8QRY62BS/bs2lqJDc3ObevtQvEVPquic1hDp3kwEPV75KBzKXmQi4ocVyjb5h46MY/jwXnIz+BeOPdZhS6+EODPtSCjTy8XN0nMRJuu6AvHubixj9B7YMCTzbu3TlgcymMD5ZOiSBj0bxGiZz1KDnPoLGlDsBz0aAaNcYqrMmwiJapWykHnC3GhCr7Axr4Q7IhMcaqAQNcYWCqCrgJhR7IKycl/Augk35jFl1cKypGKIAhghediuzntW0WtWXWXAvrxSxrISaRE6IqQNFGcYKhulZQZUmFxhkwm0GUy2ehd8AMntVwsDi4CwyXY5ERmwHVr2JUDAgqbpJbdEyY9jq2jdU3xGXqUOMYUUu11lCg8C6hBnysbdPqinReqi5cC+kvf/sIL+fYXQ7L0GsHSq8UfO8Qyb5IvqWE3wTwddNDp7G6KM0Ju3lGKRGlkFN/5UMTN870N4sUqWg6IWqv5yl8fHAu1AvW4YltJ1BCh830R4KsGvpykngcWfeEAJYB6G9HnAtoaQPw7lU1eCui9/aleyJ7UHE/QO4KdliEGGN3qs4QeuT5humess3hAfLyOh875d1OiaHf4EZkmCtYvs6YMl/g28CqqPZ0RGhei4HNtPmoOOCppSwQugS8Qmo9wTUsZfcyli3qGBN2SxqPqD92fHG4J5723Ojf2QHLwOn7NvBj0SKUjgBOAUQcg/l0bckmgD1JcQnfMtm4Nl2xjF7wSJvH9XZSw3h7KKFMrnqCilQL0fSyqKvSTigGjabk8dBC8VXOOIVloPzBVahL0gmsUPiOah7QoLHVe/qDPVOjS0ooaKkUdUIOETh4XAGoKVaUDJBJLEIUqoSHPAMPQSUJXPFUDL/MJ0kOTM6ygf0abrkbU+NjRzGo2zS60NZmO8y6aVWAhujAdm2AToIOJukoY2dvpYaA9GigLfZLZhsSJG1wU1ZDFrSRhuRpdPc9Qy59K1RwbCvQstSQuSybkr6+CzsYSIxj1DH4yEi7TQA4n6NwKkal4aTQ3FgNT683spiowPeawSK0V8zIOpDPk6tjwRL20n3OdnbE6woZCb+fQmYxdWT0B9ouxJaxrpJploZMr2fFVyY2hixpZzdaiYWMuv7kaXa2J0bsoyCUOBXqHqKOaqRZ1GWSbYc8Lw47/GquKrzwE8uEd6J8bLtCDwWjUWxMUZWVlr6kI7um1/LScy+rToCSq2E6XSVyorCcKX6OPN1daKZsIOjzApi0v1Gjg7oSV8tDJCkabFOhPz1DJtBrnieLeaP7zmUzR66XJUtH3dQ4FOplVKYHeIVffR//o1kXY2kVtFTbyXfVExrCCbkmullMXMYMPwNvDKNEHjOnF0oMNKgKBTu7TSc2O4j4wkoOexKoXTh8ZGil1quGw+Hlr5VufOnK1zs5dfcQypDmd9meEGDoZ1ez0UtYQpP0J9m9R6IchsIxsU1h8g/63oZ0f8DdX0bslQiX9skSbh37QHFgD93NT/36j+P21FXuY6I7gz7GHJIiOMBVxxir7t2EPsocWggg+p0SJPouByJV2HkBH7pQDNWnE2ClTPmyOhXl8mSz0MvHnMMCjaPhX0HBfziaqRC+lN4vLkrHg7ugnBFE6dNnfB+gtAxenDF6Swltc5+lJLdXlSj33eR+lV6rDgsXexD5DQSi1tIAEtKdLY+UPt5pPkr0J9M4q5PON3qWVVnakUAY9UQ2XGqIUzLfjpyV3z2aurF8HeRRsVZvYEjb9JFUVWU4Pm6xhjtcSzt9/doSUEdyp9LkmdY1QIqrRcmKUg57UAPaWiDd3a7iX1sLe/J4Y8NoUpSXKWiS1iFAFdxWdqNvExG6z9vsI/dvZQ5Nv3RZnBur6KnRhm6rXVywNlssukk/Gx8dHCN8wrEx5QxdWVl26pY8Z75OOxHTFwI/XgP9obd5Ss6m29I3MZMHbNEV0RYRI/0xEeHx8V1dmo7AekXN8my4sL79odp3sH2FujaGPj2iU3Rfasq2kxmgsLcr9ZB9qtswpXfExsXJFo46mzC5mb0SQzEvTOzKDBWcTlFJRaqzWrat37h4OWMlcJj5etCfpeAyzsTHAR+i+iruK3CA/wPgp/x/eftq/6zFC5P8FOhYMHQuGjgVDx4KhY/kJoM/zav3cswRhXY4c6FgFGDoWDB0Lho4FQ8eCoWPB0LEMV/k/qI/ycUl6dzIAAAAASUVORK5CYII="},function(e,t,i){e.exports=i.p+"static/media/comm_slack.39440503.png"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAL8AAAAoCAMAAACYV9vPAAAC/VBMVEX///9AIAAAAAAAK6oAHmkALbQAAAAAJrKAcwCiFwAAJ7EAO7EAOdAJAAAAI7AAIXMAJbQAHW0AAADBbgAAKK4ARuwAKrgAAAAAInEALLzenQAAhRUAKbMAAAAAJrITJgCzEwAARuMAFlgAI7QAAAAACRoAAAAAHmIxGgAAKbEAS/SuCwDSWwAAAAAOAAoAJbIAbwcAF1EAJ7JWEAAADCzjqAAAAAAAKLIAQuEJEgBeNQDcFQAAJrQACysAAAAABRMAJrMAQOEACiQAEksAJrXtHAAAHn4eAgBDKAAAJ7gALqgARuwKAAKobQAAJ7PmpQAAqBeGBwCGPQDWCQAAEkYCAA0AJrQAR+1IDQAAJLMAPtmrAgAAIYgAJbQAJrQAKKQARekArhqoAAjgDAAAHXOrbQAAOdUAE0NWAgAAJbMASO5uQgDtqAAAH32CAAThBACyAAAAJrQAJqIAG3EAJbQAQukAMMcAJ7QAJ6YAKLfOAA4AqhCFAAYAJbEALL/xCwCTUwAAJq4AON4ApRQAGmvxBgAAIZPvpQAAJbMAJ6nmAAAAUfuKAAfDfwDOAAflnQAAoB1kAAd9QAAALscAOuAAJbTMABEAJrMAnxz5tAC8bQAARfHxAAAAII8AOuEAJ7QALMb0BQAAJrQAuxQAIqQASggAJ7cATAUATPkAOuQAgBaJAA/nAA3+tgAAUA3sogAAQ+m6ZQDCABPvAAQAJrTlAAkARvMAJrQALs6mUQAAJbQAL9HQABD/tgAAJrIAMtwAR/kAKcMAN+TlABLDABPliwC6WwAAJbOMABT9sQAAQPMAJ7QAO+sAQfkAJrTfABkALtcAPvUANecAOeoAO/LYABv9sAAAILPUABjeABkAaw0AJrMAOvAAJcEAVgoAtBXJAB4AJbMAMuMANumiABjHABsALtgAMOD8qAAAJbQALtoAKtMAUQcAJrPEACAArhrqkADtlAC0AB0AJbMAqhz7pwAAigzZbADqigAAI7MAhAvzmADiegAAcgwAegy47KjqAAAA/XRSTlMACAsMERETFBQWGhobGx0fIiMkJSYoKywtLi8wMjM1NjY3Ojo7PENEREVHSElLS0xOT09QUlJTU1VXV1dYWVpeXl9iY2RkZWdnaGlpaWxubm9wcHBxcnNzdXh4eXp9gYGBgYGEhYWHiIiKiouMjZGRkpOUlZaWmpydn6Gio6SkpKWnqKipqaqqq6usrq6vsLGysrKzs7S0tbW3uLm5ur2+wMDCwsTFxsbGx8fHx8fIyMnJycrLy8zP0dHT1NTU1dXV2NjY2dna29vb3OHh4+Tk5eXm5ubm5ufn5+jp6erq6uvs7Ozs7e7u7vDw8fHy8vPz8/T29/f4+vr8/Pz9+YhhEwAACeVJREFUWMPtWA1YU9cZzrlpksK8WXahRCxhKOHWFIlDFKwic5WqDIoCKlAl2zpFglhMBWesSKXDRaVVq5IqFFzaWai6qiB1URCJayorwWBg2MRpEqEoQlUai9Xt6bl/SURRp5XNPfueB869J+fn/b7zfj/nslg/tDw7e/Zv3pgNWEMtnJGxmbm5mckTfdmPsAr42RsffHDu+gvoECswMrO+sWyNck2lqbGmJD3woXcHXPS9c9c/CsGGFP+wzPrKBeNxXCzGxy89Zqlv3CZ52P0Bsvncdx+FoENq/I1Nr4dLRRjK5XJRYajabuvMe3gDvnXuuz/h3CGE//xG49IoMYYAmgHCtd3vRwmRJwU/tP76ODHXZW+wYn0Ujj4p9mfn1h+bi7vzFfiIRI8QP4YY/8QK07qo29kOuMi94AOvESNGeIH/DvzsjfUtiwffDoxJyi7MTgp284anZ+3Yd7J2xyw3DYY9H5scm5z868zciXx3/B4vZRfmZ0/2eIzBdGRF06k44WAbjCnMTwhLWLW3dINTgwm1myaNnrSo7eTJLNpn2MklBWVNNRX1lcfko7jgra9p/GByaXZY4rLS0g0BtwUDdmC8LD4QsMdOhfN5ntQfFJ/otNQI6pHFoVvqAXiygX98WjyTl9j+MczQ2ArjkShsEPgvlc7HxSKhKEG3V5dAmTSrNlEqFmLCSW1tbZtIL3mmpCxULJ7eYDKtC8eFXBaDHyT9MREXw8l7dUdFbgoI8qxWs9mgVBrUMNPnqPlpWg0PAk0zwG5rdQQ5SK6hqwD5bg6copUpDPBHs5xH9HkqzFB6qsfB59wa0+7wQbLN5MJl4WIUQRB0mU7XGkYoMGvf20QXANyXu9oci+BE3kbjFBxD0ekWk2WhEB7J5q//ReInZovgbPSd1t7VLgfjqKwyf4F/mtUaSRhQpVdqc+axWWx53/axAp8YrZlUQKnnUMMVegjZ29qjnecnkOT1yeE6QH5RHijwjTcYAlmsknrT4UGyZUB2VQodR9GDutaDkGUjdrQtkVKjkU+6HFdGI6zkil1RBP+QAqPlMGHnzd+Q+L3y4WxCZaT42oUtYucBRPTMI9sYazTR5N1Q+RCtxJpH2ta/rpoPm98x+HMo/NpAUvc8M2w99XkkqMg+JSDwH7m7/UFS4VHGM8D85jO9KSjI2nc1heHCLIejfwnGq6jfRc2XGC22KfDpPQr/5PxDM+BsjyTdwYy4cFc6zNELyJZXrSLWXmslkbGUBj/q95i+yDvxX0yj3gKtMhaLb5BTK2jKeaySRlPLi3fF75FfemIG4xkBEP9qodeO2iszGGf36nL0HxD51zQdDiFd46lGS+cczIn/t4WHZmAB2YdWJeK4CHOlR3U12/1BpSVfPSltCPfQK+H/lQPwz6PJp4E+w9Fo/SmH94b8bzTZF97VfwM2VJ2YwWiG7D3Tu0c8ofbklRSGyuATR/9nuKS+qWUKOQrsh/ihcjT+/NKjGctWzQ8TBwlR93SSp+VRMURdTvSqPiXx+5hTmeikJlx3gP1pzsFjqoOvkVa9LJBahZVsNFrUIrf1OT6+vj4+voH84NKq8077s4pbr+3BJ9S2XVniDLZ/gPhDhjc1mZZSKpXY6qJc9t+wV5chwkRCN9OTkmqVkK0/xQIav19ftEvBO/Ez9mcp/vYjaKmIcqv1U4WEmOlnMlpaxjvzF/sX+0837N9faVMMD66qas9wxo1Vrde2SMe0tV1906lsluPWX0LQAqOxIYhgN8fYuVjKdeLPr9IVidE7M7mfodwX9glUZpL4KopO/gPwK2/D73M7friXJFVt7lHCAAbKYNxb64TJl4wLHa9qsJ19URgAY2aRM3Cvar+wBfc62eY44AwlWY5v38W5wxsspq1wPsi0LSQDEcP/Kt0J6d3yetoNvVKu1JvjyTea/77mtHvwR+DEr6TZB8f5KshoGmmxWFqmOzdCUAxb0XLpbBzm8Y6u2YWguPfCXNHTWQ7HlZmMT+y4+W2cCAGjdtnsNa/Ebjw9LZzUlsYfrNM1r77LLcJbrVHpzXV5FIsY/vCq1Wyn/4I74j/Df3Y5HMaXMB6khQeAbLVbLMeeY4wKoKRD/D9HWcHtre2v0Qg8IH1gled11eHYycTUrlvvEoUfgk1b+vq2CtNSOkjS+JHiZl1zwp0HoNALAM+TxyhG84eVQ9GJxYom42eOniogOGqK/wrqR38zjJ8xVIqDudlApIrhR2x2NwWg0PiRZR3tJ8Ko/qTez+EdgQVe7r95M5E6gKz+z4guqAgqFFU2WtbRRdvmb777M/EYfL69uXk+Xch5uPBbFZF+Ak8OrQDNHxjZVSRiXyp/pV4cS5pYdoPKX9ap5KuC0NLfsJ0cyivXEIcEnjvylf10wy+5bvi7zRA/Cy3q7aAUmNyxJ05KpGLuolv9NxcR1U3WzQPOWw5AChpNpxdQK3x8/Z9fvoAhLCSht6P9THFSQEBwdpIrCHlrbpgNBr1mTQyfxF9H4QeyPnWEwCearh/8Ddqp3oKxqro6kv9Wg0ERKAjM6SHrB1nf9nECgWQtlcFZyCjNpa/sX2yL8KQ24RR0n/07gR+gGRd6zxfPf/Xg+dfCcYpJ3EkHbt3s2rSp66+JIW6XNInJYjKtIFA+++Xly5f/8fFPYYk08/Nr13o7OjrOvyp0jmTLqmXjIuNlK3dbqwnGKBjes1P1ZP0WSdNI3wNrtHIJWb9598hS9a76jS719PPoqQg2R9sNVWjYlp6enltmO/7h7xeTVQ5AR6cUFRWtTgnDnTcyrnDmmzt3vp0YJmZAPRObW1J56pTd0rIG9gAUj4oKEWPwMLiilC1QMsiylJYYwzgab4RBBZy1M0kdon7mO88Jvo3lUfWzAPqvT4yrfiaGpk31dpU6qGja8vc/1B4/vlu9csE0aYgUXufpcCQUi4NE7ikUcDGhCOYllBoxMtdY+avpodI5x212uwIqgKCEkIRBUJEYhxU45nIuOt6QBYTmQb+UueL/YAJxBuEh4SFSot7H3NMOQLgDkxAAsKamuyZWnJ4TgsM5WJDaZu8MHRBwiNm3TZf3xJCxB/CiiVjyYCK4L35yJ8pw9778Dry+lViWRwURFwKAYGrbpYXY/Uyp6aleI0+T51Vb1/IfdBdX/fMDCye3xjZXTNscjLJ1LhfeT3l+vEprMBuq8yI5D7yNoC7m8eAfVtNoi3Mm2acauueK7n94bJ4n35XAHkTg/fcx4SerbwbKMJs2Sjj0X84fQdgr7PZjoUx0eeXSnKH9cPvo8hNYfDTE/5gw+rB0CP/hP5v+ZwSMUnd32r8oKyiobNka6pannhRBsCkw8+0uX79wPC7GnjDrkyfAxYJwKZH3Bt4UnxgNYI79N9Pe/+V/RL4HuQCuSIcLm0AAAAAASUVORK5CYII="},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="";var escaped=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},cutByResolution=function(e){return e.length>256?escaped(e.substr(0,256))+"...":escaped(e)};__p+='\n\n<div class="pure-g pure-table pure-table-header pure-title no-padding">\n  <div class="pure-table-row">\n    <div class="pure-u-19-24">\n      <div class="title">Content</div>\n    </div>\n    <div class="pure-u-3-24">\n      <div class="">_key</div>\n    </div>\n    <div class="pure-u-2-24">\n      <div class="actions">\n        <a id="addDocumentButton" class="pull-right addButton"><span title="Add a document"><i class="fa fa-plus-circle"></i></span></a>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="pure-g pure-table pure-table-body no-padding">\n  ',0===docs.length&&(__p+='\n    <div class="pure-table-row pure-u-1-1">\n      <span class="dataTables_empty">No documents</span>\n    </div>\n  ');var odd=!0;_.each(docs.models,(function(e){var t={},i=e.toJSON();Object.keys(i.content).forEach((function(e){"_id"===e&&"_rev"===e&&"_key"===e||(t[e]=i.content[e])})),tmpObj=JSON.stringify(t),__p+='\n\n  <div class="pure-table-row '+(null==(__t=odd?"odd":"even")?"":__t)+'" id="row_'+(null==(__t=e.get("key"))?"":__t)+'">\n\n    <div class="pure-u-19-24">\n      <div class="padding-right">\n        <pre class="hljs-pre" title="'+(null==(__t=escaped(tmpObj))?"":__t)+'"><code class="json">'+(null==(__t=cutByResolution(tmpObj))?"":__t)+'</code></pre>\n      </div>\n    </div>\n    <div class="pure-u-3-24">\n      <div class="key">'+(null==(__t=e.get("key"))?"":__t)+'</div>\n    </div>\n    <div class="pure-u-2-24">\n      <div class="actions">\n        <a class="deleteButton">\n        <span data-original-title="Delete document" title="Delete document"><i class="fa fa-minus-circle"></i></i></span></a>\n      </div>\n    </div>\n\n  </div>\n\n  ',odd=!odd})),__p+="\n\n</div>\n"}return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='\n  <a class="info default-icon">User: \n    <span class="toggle"> \n      '+(null==(__t=_.escape(username))?"":__t)+'\n    </span>\n    <i id="userLogoutIcon" class="fa fa-power-off" aria-hidden="true"></i>\n  </a>\n\n  <ul id="userInfo" class="subBarDropdown">\n    <li class="dropdown-header">\n      <div style="height: 1px; background: rgb(119, 203, 153)"></div>\n      <img class="user-img" src="'+(null==(__t=img)?"":__t)+'"/>\n        <p>',name?__p+=(null==(__t=_.escape(username))?"":__t)+"<small> "+(null==(__t=_.escape(name))?"":__t)+" </small>\n        ":__p+="\n          "+(null==(__t=_.escape(username))?"":__t)+"\n        ",__p+='\n        </p>\n    </li>\n    <li class="dropdown-footer">\n      <button id="userLogout" class="button-primary btn-small pull-right">Logout</button>\n    </li>\n  </ul>\n\n\x3c!--\n<ul class="navlist" id="userBarUl">\n\n  <li class="dropdown user-menu userImg">\n    <a href="#" class="tab userImg" id="user" >\n      <img class="user-menu-img" src="'+(null==(__t=img)?"":__t)+'" id="userimage" /> <b class="caret"></b>\n    </a>\n    <ul class="user-dropdown-menu" id="user_dropdown">\n      <li class="dropdown-header" style="text-transform: none">\n        ',name?__p+="\n        "+(null==(__t=_.escape(name))?"":__t)+" ("+(null==(__t=_.escape(username))?"":__t)+")\n        ":__p+="\n        "+(null==(__t=_.escape(username))?"":__t)+"\n        ",__p+='\n      <li class="dropdown-item">\n        <a id="userProfile" class="tab" href="#user">User Profile</a>\n      </li>\n      <li class="dropdown-item">\n        <a id="userLogout" class="tab">Logout</a>\n      </li>\n    </ul>\n  </li>\n\n</ul>\n\n--\x3e \n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='  <div class="headerBar">\n    <div class="search-field">\n      <input type="text" value="'+(null==(__t=searchString)?"":__t)+'" id="userManagementSearchInput" class="search-input" placeholder="Search..."/>\n      \x3c!-- <img id="userManagementSearchSubmit" class="search-submit-icon"> --\x3e\n      <i id="userManagementSearchSubmit" class="fa fa-search"></i>\n    </div>\n    <div class="headerButtonBar">\n      <ul class="headerButtonList">\n        <li class="enabled">\n        <a id="userManagementToggle" class="headerButton">\n          <span class="icon_arangodb_settings2" title="Settings"></span>\n        </a>\n        </li>\n      </ul>\n    </div>\n  </div>\n\n\n<div id="userManagementDropdown2" class="headerDropdown">\n\n  <div id="userManagementDropdown" class="dropdownInner">\n    <ul>\n      <li class="nav-header">Sorting</li>\n\n      \x3c!--<li><a href="#">\n        <label class="checkbox checkboxLabel">\n          <input class="css-checkbox" type="checkbox" id="sortName">\n          <label class="css-label css-label-round"></label>Sort by username\n        </label>\n      </a></li>\n\n      <li><a href="#">\n        <label class="checkbox checkboxLabel">\n          <input class="css-checkbox" type="checkbox" id="sortType">\n          <label class="css-label css-label-round"></label>Sort by status\n        </label>\n      </a></li>--\x3e\n\n      <li><a href="#">\n        <label class="checkbox checkboxLabel">\n          <input class="css-checkbox" type="checkbox" id="userSortDesc">\n          <i class="fa"></i>\n          Sort descending\n        </label>\n      </a></li>\n    </ul>\n  </div>\n\n</div>\n\n\n  <div class="contentDiv" id="arangoCollectionsContainer">\n    <div id="userManagementThumbnailsIn" class="tileList pure-u">\n      <div class="tile pure-u-1-1 pure-u-sm-1-2 pure-u-md-1-3 pure-u-lg-1-4 pure-u-xl-1-6">\n        <div class="fullBorderBox">\n          <a id="createUser" class="add">\n            <span id="newUser" class="pull-left add-Icon"><i class="fa fa-plus-circle"></i></span>\n            Add User\n          </a>\n        </div>\n      </div>\n\n\n            ',collection.forEach((function(e){var t=e.get("user"),i=e.get("extra"),n=i.name,r=i.img,a=e.get("active"),o='<img src="';r?(o+="https://s.gravatar.com/avatar/",o+=r,o+="?s=50",o+='" height="50" width="50" alt="" class="icon" id="',o+=_.escape(t),o+='" />'):o='<i id="'+_.escape(t)+'" class="collection-type-icon fa fa-user"></i>',n||(n=" "),":role:"===t.substring(0,6)&&(o='<i id="'+_.escape(t)+'" class="collection-type-icon fa fa-group"></i>'),__p+='\n\n      <div class="tile pure-u-1-1 pure-u-sm-1-2 pure-u-md-1-3 pure-u-lg-1-4 pure-u-xl-1-6">\n        <div class="paddingBox">\n          <div class="borderBox"></div>\n          <div class="iconSet">\n            \x3c!-- <span class="icon_arangodb_settings2 editUser" id="'+(null==(__t=_.escape(t))?"":__t)+'_edit-user" alt="Edit user" title="Edit user"></span> --\x3e\n          </div>\n          '+(null==(__t=o)?"":__t)+'\n          <div class="tileBadge">\n            <span>\n              ',__p+=a?'\n              <div class="corneredBadge loaded">\n                active\n              </div>\n              ':'\n              <div class="corneredBadge unloaded">\n                inactive\n              </div>\n              ',__p+='\n            </span>\n          </div>\n\n          <h5 class="collectionName">'+(null==(__t=_.escape(t))?"":__t)+" "," "!==n&&(__p+="("+(null==(__t=_.escape(n))?"":__t)+")"),__p+="</h5>\n        </div>\n      </div>\n      "})),__p+="\n     </div>\n  </div>\n";return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){__p+="    \n  ";var genClass="pure-u-1-5";__p+="\n  ";var genClass2="pure-u-1-5";__p+='\n\n  <div id="userPermissionView" class="innerContent">\n    <div class="pure-g pure-table pure-table-header pure-title" style="clear: both; width: auto;">\n      <div class="pure-table-row">\n        <div class="'+(null==(__t=genClass)?"":__t)+' left">Database</div>\n        <div class="'+(null==(__t=genClass)?"":__t)+' mid">Administrate <i class="fa fa-info-circle tippy" title="Allows creating/dropping of collections and setting user permissions in the database."></i></div>\n        <div class="'+(null==(__t=genClass)?"":__t)+' mid">Access <i class="fa fa-info-circle tippy" title="Allows access to the database. User cannot create or drop collections."></i></div>\n        <div class="'+(null==(__t=genClass)?"":__t)+' mid">No access <i class="fa fa-info-circle tippy" title="User has no access to the database."></i></div>\n        <div class="'+(null==(__t=genClass)?"":__t)+' mid">Use default <i class="fa fa-info-circle tippy" title="Access level is unspecified. Database default (*) will be used."></i></div>\n      </div>\n    </div>\n\n    <div class="pure-g pure-table pure-table-body" style="width: auto;">\n      ',_.each(permissions,(function(e,t){__p+="\n        ";var i="";__p+="\n        ","*"===t.charAt(0)&&(__p+="\n          ",i="noAction",__p+="\n        "),__p+='\n\n        <div class="pure-table-row db-row noHover '+(null==(__t=i)?"":__t)+'" id="'+(null==(__t=t)?"":__t)+'-db">\n          <div class="'+(null==(__t=genClass2)?"":__t)+' left db-label">\n\n            ',"*"!==t.charAt(0)&&(__p+='\n              <i class="fa fa-caret-right" style="width: 10px;"></i>\n              <i class="fa fa-caret-down" style="display: none; width: 10px;"></i>\n            '),__p+="\n            ","*"===t.charAt(0)?__p+='\n              <b style="margin-right: 5px;">*</b> <i class="fa fa-info-circle tippy" title="Default access level for databases, if authorization level is not specified."></i>\n            ':__p+="\n              "+(null==(__t=t)?"":__t)+"\n            ",__p+="\n          </div>\n\n          ";var n=e.permission;__p+="\n\n          ","rw"===n?(__p+='\n            <div class="'+(null==(__t=genClass2)?"":__t)+' mid">\n              <input class="dbCheckbox readWrite" type="radio" name="'+(null==(__t=t)?"":__t)+'" permission="rw" checked>\n            </div>\n            <div class="'+(null==(__t=genClass2)?"":__t)+' mid">\n              <input class="dbCheckbox readOnly" type="radio" name="'+(null==(__t=t)?"":__t)+'" permission="ro">\n            </div>\n            <div class="'+(null==(__t=genClass2)?"":__t)+' mid">\n              <input class="dbCheckbox noAccess" type="radio" name="'+(null==(__t=t)?"":__t)+'" permission="none">\n            </div>\n            ',"*"!==t.charAt(0)?__p+='\n              <div class="'+(null==(__t=genClass2)?"":__t)+' mid">\n                <input class="dbCheckbox useDefault" type="radio" name="'+(null==(__t=t)?"":__t)+'" permission="undefined">\n              </div>\n            ':__p+='\n              <div class="'+(null==(__t=genClass2)?"":__t)+' mid"></div>\n            ',__p+="\n          "):"ro"===n?(__p+='\n            <div class="'+(null==(__t=genClass2)?"":__t)+' mid">\n              <input class="dbCheckbox readWrite" type="radio" name="'+(null==(__t=t)?"":__t)+'" permission="'+(null==(__t=t)?"":__t)+'">\n            </div>\n            <div class="'+(null==(__t=genClass2)?"":__t)+' mid">\n              <input class="dbCheckbox readOnly" type="radio" name="'+(null==(__t=t)?"":__t)+'" permission="'+(null==(__t=t)?"":__t)+'" checked>\n            </div>\n            <div class="'+(null==(__t=genClass2)?"":__t)+' mid">\n              <input class="dbCheckbox noAccess" type="radio" name="'+(null==(__t=t)?"":__t)+'" permission="none">\n            </div>\n            ',"*"!==t.charAt(0)?__p+='\n              <div class="'+(null==(__t=genClass2)?"":__t)+' mid">\n                <input class="dbCheckbox useDefault" type="radio" name="'+(null==(__t=t)?"":__t)+'" permission="undefined">\n              </div>\n            ':__p+='\n              <div class="'+(null==(__t=genClass2)?"":__t)+' mid"></div>\n            ',__p+="\n          "):"none"===n?(__p+='\n            <div class="'+(null==(__t=genClass2)?"":__t)+' mid">\n              <input class="dbCheckbox readWrite" type="radio" name="'+(null==(__t=t)?"":__t)+'" permission="'+(null==(__t=t)?"":__t)+'">\n            </div>\n            <div class="'+(null==(__t=genClass2)?"":__t)+' mid">\n              <input class="dbCheckbox readOnly" type="radio" name="'+(null==(__t=t)?"":__t)+'" permission="'+(null==(__t=t)?"":__t)+'">\n            </div>\n            <div class="'+(null==(__t=genClass2)?"":__t)+' mid">\n              <input class="dbCheckbox noAccess" type="radio" name="'+(null==(__t=t)?"":__t)+'" permission="none" checked>\n            </div>\n            ',"*"!==t.charAt(0)?__p+='\n              <div class="'+(null==(__t=genClass2)?"":__t)+' mid">\n                <input class="dbCheckbox useDefault" type="radio" name="'+(null==(__t=t)?"":__t)+'" permission="undefined">\n              </div>\n            ':__p+='\n              <div class="'+(null==(__t=genClass2)?"":__t)+' mid"></div>\n            ',__p+="\n          "):(__p+='\n            <div class="'+(null==(__t=genClass2)?"":__t)+' mid">\n              <input class="dbCheckbox readWrite" type="radio" name="'+(null==(__t=t)?"":__t)+'" permission="'+(null==(__t=t)?"":__t)+'">\n            </div>\n            <div class="'+(null==(__t=genClass2)?"":__t)+' mid">\n              <input class="dbCheckbox readOnly" type="radio" name="'+(null==(__t=t)?"":__t)+'" permission="'+(null==(__t=t)?"":__t)+'">\n            </div>\n            <div class="'+(null==(__t=genClass2)?"":__t)+' mid">\n              <input class="dbCheckbox noAccess" type="radio" name="'+(null==(__t=t)?"":__t)+'" permission="none">\n            </div>\n            ',"*"!==t.charAt(0)?__p+='\n              <div class="'+(null==(__t=genClass2)?"":__t)+' mid">\n                <input class="dbCheckbox useDefault" type="radio" name="'+(null==(__t=t)?"":__t)+'" permission="undefined" checked>\n              </div>\n            ':__p+='\n              <div class="'+(null==(__t=genClass2)?"":__t)+' mid"></div>\n            ',__p+="\n          "),__p+='\n\n          <div class="collection-row pure-table-row noHover inner '+(null==(__t=i)?"":__t)+'" style="display: none">\n            <div class="'+(null==(__t=genClass)?"":__t)+' left inner collection-label collection-label-first"><span class="collLabel">Collections<span></div>\n            <div class="'+(null==(__t=genClass)?"":__t)+' mid inner collection-label">Read/Write</div>\n            <div class="'+(null==(__t=genClass)?"":__t)+' mid inner collection-label">Read only</div>\n            <div class="'+(null==(__t=genClass)?"":__t)+' mid inner collection-label collection-label-last">No access</div>\n            <div class="'+(null==(__t=genClass)?"":__t)+' mid inner collection-label collection-label-last">Use default</div>\n            ',_.each(e.collections,(function(e,i){__p+="\n              ","*"!==t.charAt(0)&&(__p+="\n                ","_"!==i.charAt(0)&&(__p+="\n\n                  ",__p+="*"!==i?'\n                    <div class="pure-table-row noHover" id="'+(null==(__t=i)?"":__t)+'-collection">\n                  ':'\n                    <div class="pure-table-row noHover" id="___-collection" style="margin-bottom: 0px;">\n                  ',__p+="\n\n                    ",__p+="*"===i?'\n                      <div class="'+(null==(__t=genClass)?"":__t)+' left inner"><span class="collName"><b style="margin-right: 7px"> '+(null==(__t=i)?"":__t)+'</b></span><i class="fa fa-info-circle tippy" title="Default access level for collections in '+(null==(__t=t)?"":__t)+', if authentication level is not specified."></i></div>\n                    ':'\n                      <div class="'+(null==(__t=genClass)?"":__t)+' left inner"><span class="collName">'+(null==(__t=i)?"":__t)+"</span></div>\n                    ",__p+="\n\n                    ","rw"===e?(__p+='\n                      <div class="'+(null==(__t=genClass)?"":__t)+' mid inner">\n                        <input class="collCheckbox readWrite" type="radio" db="'+(null==(__t=t)?"":__t)+'" name="'+(null==(__t=t)?"":__t)+"-"+(null==(__t=i)?"":__t)+'" collection="'+(null==(__t=i)?"":__t)+'" permission="'+(null==(__t=i)?"":__t)+'" checked>\n                      </div>\n                      <div class="'+(null==(__t=genClass)?"":__t)+' mid inner">\n                        <input class="collCheckbox readOnly" type="radio" db="'+(null==(__t=t)?"":__t)+'" name="'+(null==(__t=t)?"":__t)+"-"+(null==(__t=i)?"":__t)+'" collection="'+(null==(__t=i)?"":__t)+'" permission="'+(null==(__t=i)?"":__t)+'">\n                      </div>\n                      <div class="'+(null==(__t=genClass)?"":__t)+' mid inner">\n                        <input class="collCheckbox noAccess" type="radio" db="'+(null==(__t=t)?"":__t)+'" name="'+(null==(__t=t)?"":__t)+"-"+(null==(__t=i)?"":__t)+'" collection="'+(null==(__t=i)?"":__t)+'" permission="'+(null==(__t=i)?"":__t)+'">\n                      </div>\n                      ',"*"!==i.charAt(0)?__p+='\n                        <div class="'+(null==(__t=genClass)?"":__t)+' mid inner">\n                          <input class="collCheckbox useDefault" type="radio" db="'+(null==(__t=t)?"":__t)+'" name="'+(null==(__t=t)?"":__t)+"-"+(null==(__t=i)?"":__t)+'" collection="'+(null==(__t=i)?"":__t)+'" permission="'+(null==(__t=i)?"":__t)+'">\n                        </div>\n                      ':__p+='\n                        <div class="'+(null==(__t=genClass)?"":__t)+' mid inner"></div>\n                      ',__p+="\n                    "):"ro"===e?(__p+='\n                      <div class="'+(null==(__t=genClass)?"":__t)+' mid inner">\n                        <input class="collCheckbox readWrite" type="radio" db="'+(null==(__t=t)?"":__t)+'" name="'+(null==(__t=t)?"":__t)+"-"+(null==(__t=i)?"":__t)+'" collection="'+(null==(__t=i)?"":__t)+'" permission="'+(null==(__t=i)?"":__t)+'">\n                      </div>\n                      <div class="'+(null==(__t=genClass)?"":__t)+' mid inner">\n                        <input class="collCheckbox readOnly" type="radio" db="'+(null==(__t=t)?"":__t)+'" name="'+(null==(__t=t)?"":__t)+"-"+(null==(__t=i)?"":__t)+'" collection="'+(null==(__t=i)?"":__t)+'" permission="'+(null==(__t=i)?"":__t)+'" checked>\n                      </div>\n                      <div class="'+(null==(__t=genClass)?"":__t)+' mid inner">\n                        <input class="collCheckbox noAccess" type="radio" db="'+(null==(__t=t)?"":__t)+'" name="'+(null==(__t=t)?"":__t)+"-"+(null==(__t=i)?"":__t)+'" collection="'+(null==(__t=i)?"":__t)+'" permission="'+(null==(__t=i)?"":__t)+'">\n                      </div>\n                      ',"*"!==i.charAt(0)?__p+='\n                        <div class="'+(null==(__t=genClass)?"":__t)+' mid inner">\n                          <input class="collCheckbox useDefault" type="radio" db="'+(null==(__t=t)?"":__t)+'" name="'+(null==(__t=t)?"":__t)+"-"+(null==(__t=i)?"":__t)+'" collection="'+(null==(__t=i)?"":__t)+'" permission="'+(null==(__t=i)?"":__t)+'">\n                        </div>\n                      ':__p+='\n                        <div class="'+(null==(__t=genClass)?"":__t)+' mid inner"></div>\n                      ',__p+="\n                    "):"none"===e?(__p+='\n                      <div class="'+(null==(__t=genClass)?"":__t)+' mid inner">\n                        <input class="collCheckbox readWrite" type="radio" db="'+(null==(__t=t)?"":__t)+'" name="'+(null==(__t=t)?"":__t)+"-"+(null==(__t=i)?"":__t)+'" collection="'+(null==(__t=i)?"":__t)+'" permission="'+(null==(__t=i)?"":__t)+'">\n                      </div>\n                      <div class="'+(null==(__t=genClass)?"":__t)+' mid inner">\n                        <input class="collCheckbox readOnly" type="radio" db="'+(null==(__t=t)?"":__t)+'" name="'+(null==(__t=t)?"":__t)+"-"+(null==(__t=i)?"":__t)+'" collection="'+(null==(__t=i)?"":__t)+'" permission="'+(null==(__t=i)?"":__t)+'">\n                      </div>\n                      <div class="'+(null==(__t=genClass)?"":__t)+' mid inner">\n                        <input class="collCheckbox noAccess" type="radio" db="'+(null==(__t=t)?"":__t)+'" name="'+(null==(__t=t)?"":__t)+"-"+(null==(__t=i)?"":__t)+'" collection="'+(null==(__t=i)?"":__t)+'" permission="'+(null==(__t=i)?"":__t)+'" checked>\n                      </div>\n                      ',"*"!==i.charAt(0)?__p+='\n                        <div class="'+(null==(__t=genClass)?"":__t)+' mid inner">\n                          <input class="collCheckbox useDefault" type="radio" db="'+(null==(__t=t)?"":__t)+'" name="'+(null==(__t=t)?"":__t)+"-"+(null==(__t=i)?"":__t)+'" collection="'+(null==(__t=i)?"":__t)+'" permission="'+(null==(__t=i)?"":__t)+'">\n                        </div>\n                      ':__p+='\n                        <div class="'+(null==(__t=genClass)?"":__t)+' mid inner"></div>\n                      ',__p+="\n                    "):(__p+='\n                      <div class="'+(null==(__t=genClass)?"":__t)+' mid inner">\n                        <input class="collCheckbox readWrite" type="radio" db="'+(null==(__t=t)?"":__t)+'" name="'+(null==(__t=t)?"":__t)+"-"+(null==(__t=i)?"":__t)+'" collection="'+(null==(__t=i)?"":__t)+'" permission="'+(null==(__t=i)?"":__t)+'">\n                      </div>\n                      <div class="'+(null==(__t=genClass)?"":__t)+' mid inner">\n                        <input class="collCheckbox readOnly" type="radio" db="'+(null==(__t=t)?"":__t)+'" name="'+(null==(__t=t)?"":__t)+"-"+(null==(__t=i)?"":__t)+'" collection="'+(null==(__t=i)?"":__t)+'" permission="'+(null==(__t=i)?"":__t)+'">\n                      </div>\n                      <div class="'+(null==(__t=genClass)?"":__t)+' mid inner">\n                        <input class="collCheckbox noAccess" type="radio" db="'+(null==(__t=t)?"":__t)+'" name="'+(null==(__t=t)?"":__t)+"-"+(null==(__t=i)?"":__t)+'" collection="'+(null==(__t=i)?"":__t)+'" permission="'+(null==(__t=i)?"":__t)+'">\n                      </div>\n                      ',"*"!==i.charAt(0)?__p+='\n                        <div class="'+(null==(__t=genClass)?"":__t)+' mid inner">\n                          <input class="collCheckbox useDefault" type="radio" db="'+(null==(__t=t)?"":__t)+'" name="'+(null==(__t=t)?"":__t)+"-"+(null==(__t=i)?"":__t)+'" collection="'+(null==(__t=i)?"":__t)+'" permission="'+(null==(__t=i)?"":__t)+'" checked>\n                        </div>\n                      ':__p+='\n                        <div class="'+(null==(__t=genClass)?"":__t)+' mid inner"></div>\n                      ',__p+="\n                    "),__p+="\n\n                  </div>\n                "),__p+="\n              "),__p+="\n            "})),__p+="\n          </div>\n\n        </div>\n\n      "})),__p+="\n\n    </div>\n\n  </div>\n"}return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='  <div class="headerBar">\n    <div class="headerButtonBar">\n    </div>\n  </div>\n\n  <div class="innerContent validation-info-div">\n      <div id="validationEditor"> </div>\n      <div class="bottomButtonBar">\n        <button id="saveValidationButton" class="pull-right button-success">Save</button>\n      </div>\n  </div>\n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='\n  <div class="innerContent">\n    <div id="viewDocumentation" class="infoBox" style="margin-top: 10px; margin-bottom: 30px;">\n      <h4>Info</h4>\n      <p>See the <a style="color: #5bc0de" href="https://www.arangodb.com/docs/stable/arangosearch-views.html" target="_blank"><b>ArangoSearch Views documentation</b></a> to learn how to configure Views.</p>\n    </div>\n    <div id="viewProcessing"class="infoBox" style="margin-top: 10px; margin-bottom: 30px; display: none">\n      <h4>Processing <i class="fa fa-spinner fa-spin"></i></h4>\n      <p>The view is currently in processing. No editing possible right now.</p>\n    </div>\n    <div id="propertiesEditor" class="document-editor" style="border-top: 1px solid rgba(140,138,137,.25)"></div>\n    <div class="bottomButtonBar">\n      <button id="savePropertiesButton" class="button-close pull-right" disabled>Save</button>\n      ',window.frontendConfig.isCluster||(__p+='\n        <button id="renameViewButton" class="button-warning pull-right">Rename</button>\n      '),__p+='\n      <button id="deleteViewButton" class="button-danger pull-right">Delete</button>\n      <span class="buttonBarInfo pull-right"></span>\n    </div>\n  </div>\n  \n';return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='  <div class="headerBar">\n    <div class="search-field">\n      <input type="text" value="'+(null==(__t=searchString)?"":__t)+'" id="viewsSearchInput" class="search-input" placeholder="Search..."/>\n      <i id="viewsSearchSubmit" class="fa fa-search"></i>\n    </div>\n    <div class="headerButtonBar">\n      <ul class="headerButtonList">\n        <li class="enabled">\n          <a id="viewsToggle" class="headerButton">\n            <span class="icon_arangodb_settings2" title="Settings"></span>\n          </a>\n        </li>\n      </ul>\n    </div>\n  </div>\n\n  <div id="viewsDropdown2" class="headerDropdown">\n    <div id="viewsDropdown" class="dropdownInner">\n      <ul>\n        <li class="nav-header">Sorting</li>\n        <li><a>\n          <label class="checkbox checkboxLabel">\n            <input class="css-checkbox" type="checkbox" id="viewsSortDesc">\n            <i class="fa"></i>\n            Sort descending\n          </label>\n        </a></li>\n      </ul>\n    </div>\n  </div>\n\n  <div class="contentDiv" id="">\n    <div id="viewsThumbnailsIn" class="tileList pure-u">\n      <div class="tile pure-u-1-1 pure-u-sm-1-2 pure-u-md-1-3 pure-u-lg-1-4 pure-u-xl-1-6">\n        <div class="fullBorderBox">\n          <a id="createView" class="add">\n            <span id="newView" class="pull-left add-Icon"><i class="fa fa-plus-circle"></i></span>\n            Add View\n          </a>\n        </div>\n      </div>\n\n\n      ',views.forEach((function(e){var t=e.name;__p+='\n\n        <div class="tile tile-view pure-u-1-1 pure-u-sm-1-2 pure-u-md-1-3 pure-u-lg-1-4 pure-u-xl-1-6" id="'+(null==(__t=t)?"":__t)+'">\n          <div class="paddingBox">\n            <div class="borderBox"></div>\n            <i class="collection-type-icon fa fa-clone"></i>\n            <div class="tileBadge">\n            ',e.type&&(__p+='\n              <span><div class="corneredBadge inProgress">'+(null==(__t=e.type)?"":__t)+"</div></span>\n            "),__p+='\n            </div>\n            <h5 class="collectionName">'+(null==(__t=t)?"":__t)+"</h5>\n          </div>\n        </div>\n\n      "})),__p+="\n     </div>\n  </div>\n\n";return __p}},function(module,exports){module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+="  ",warnings.length>0&&(__p+="\n    <div>\n      <ul>\n        ",console.log(warnings),_.each(warnings,(function(e){console.log(e),__p+="\n          <li><b>"+(null==(__t=e.code)?"":__t)+"</b>: "+(null==(__t=e.message)?"":__t)+"</li>\n        "})),__p+="\n      </ul>\n    </div>\n  "),__p+="\n";return __p}},function(e,t,i){e.exports=function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=32)}([function(e,t,i){"use strict";(function(e,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(17),o=i(15),s=i(37),l=i(16),c=i(18),d={};t.clone=function(i,n){if("object"!==(void 0===i?"undefined":r(i))||null===i)return i;var a=(n=n||new Map).get(i);if(a)return a;var o=void 0,s=!1;if(Array.isArray(i))o=[],s=!0;else if(e.isBuffer(i))o=e.from(i);else if(i instanceof Date)o=new Date(i.getTime());else if(i instanceof RegExp)o=new RegExp(i);else{var l=Object.getPrototypeOf(i);l&&l.isImmutable?o=i:(o=Object.create(l),s=!0)}if(n.set(i,o),s)for(var c=Object.getOwnPropertyNames(i),d=0;d<c.length;++d){var h=c[d],u=Object.getOwnPropertyDescriptor(i,h);u&&(u.get||u.set)?Object.defineProperty(o,h,u):o[h]=t.clone(i[h],n)}return o},t.merge=function(i,n,a,o){if(t.assert(i&&"object"===(void 0===i?"undefined":r(i)),"Invalid target value: must be an object"),t.assert(null===n||void 0===n||"object"===(void 0===n?"undefined":r(n)),"Invalid source value: must be null, undefined, or an object"),!n)return i;if(Array.isArray(n)){t.assert(Array.isArray(i),"Cannot merge array onto an object"),!1===o&&(i.length=0);for(var s=0;s<n.length;++s)i.push(t.clone(n[s]));return i}for(var l=Object.keys(n),c=0;c<l.length;++c){var d=l[c];if("__proto__"!==d){var h=n[d];h&&"object"===(void 0===h?"undefined":r(h))?!i[d]||"object"!==r(i[d])||Array.isArray(i[d])!==Array.isArray(h)||h instanceof Date||e.isBuffer(h)||h instanceof RegExp?i[d]=t.clone(h):t.merge(i[d],h,a,o):(null!==h&&void 0!==h||!1!==a)&&(i[d]=h)}}return i},t.applyToDefaults=function(e,i,n){if(t.assert(e&&"object"===(void 0===e?"undefined":r(e)),"Invalid defaults value: must be an object"),t.assert(!i||!0===i||"object"===(void 0===i?"undefined":r(i)),"Invalid options value: must be true, falsy or an object"),!i)return null;var a=t.clone(e);return!0===i?a:t.merge(a,i,!0===n,!1)},t.cloneWithShallow=function(e,i){if(!e||"object"!==(void 0===e?"undefined":r(e)))return e;var n=d.store(e,i),a=t.clone(e);return d.restore(a,e,n),a},d.store=function(e,i){for(var n={},r=0;r<i.length;++r){var a=i[r],o=t.reach(e,a);void 0!==o&&(n[a]=o,d.reachSet(e,a,void 0))}return n},d.restore=function(e,t,i){for(var n=Object.keys(i),r=0;r<n.length;++r){var a=n[r];d.reachSet(e,a,i[a]),d.reachSet(t,a,i[a])}},d.reachSet=function(e,t,i){for(var n=t.split("."),r=e,a=0;a<n.length;++a){var o=n[a];a+1===n.length&&(r[o]=i),r=r[o]}},t.applyToDefaultsWithShallow=function(e,i,n){if(t.assert(e&&"object"===(void 0===e?"undefined":r(e)),"Invalid defaults value: must be an object"),t.assert(!i||!0===i||"object"===(void 0===i?"undefined":r(i)),"Invalid options value: must be true, falsy or an object"),t.assert(n&&Array.isArray(n),"Invalid keys"),!i)return null;var a=t.cloneWithShallow(e,n);if(!0===i)return a;var o=d.store(i,n);return t.merge(a,i,!1,!1),d.restore(a,i,o),a},t.deepEqual=function(i,n,a,o){a=a||{prototype:!0};var s=void 0===i?"undefined":r(i);if(s!==(void 0===n?"undefined":r(n)))return!1;if("object"!==s||null===i||null===n)return i===n?0!==i||1/i==1/n:i!==i&&n!==n;if(-1!==(o=o||[]).indexOf(i))return!0;if(o.push(i),Array.isArray(i)){if(!Array.isArray(n))return!1;if(!a.part&&i.length!==n.length)return!1;for(var l=0;l<i.length;++l){if(a.part){for(var c=!1,d=0;d<n.length;++d)if(t.deepEqual(i[l],n[d],a)){c=!0;break}return c}if(!t.deepEqual(i[l],n[l],a))return!1}return!0}if(e.isBuffer(i)){if(!e.isBuffer(n))return!1;if(i.length!==n.length)return!1;for(var h=0;h<i.length;++h)if(i[h]!==n[h])return!1;return!0}if(i instanceof Date)return n instanceof Date&&i.getTime()===n.getTime();if(i instanceof RegExp)return n instanceof RegExp&&i.toString()===n.toString();if(a.prototype&&Object.getPrototypeOf(i)!==Object.getPrototypeOf(n))return!1;var u=Object.getOwnPropertyNames(i);if(!a.part&&u.length!==Object.getOwnPropertyNames(n).length)return!1;for(var p=0;p<u.length;++p){var f=u[p],g=Object.getOwnPropertyDescriptor(i,f);if(g.get){if(!t.deepEqual(g,Object.getOwnPropertyDescriptor(n,f),a,o))return!1}else if(!t.deepEqual(i[f],n[f],a,o))return!1}return!0},t.unique=function(e,t){var i=void 0;if(t){i=[];var n=new Set;e.forEach((function(e){var r=e[t];n.has(r)||(n.add(r),i.push(e))}))}else i=Array.from(new Set(e));return i},t.mapToObject=function(e,t){if(!e)return null;for(var i={},n=0;n<e.length;++n)t?e[n][t]&&(i[e[n][t]]=!0):i[e[n]]=!0;return i},t.intersect=function(e,i,n){if(!e||!i)return[];for(var r=[],a=Array.isArray(e)?t.mapToObject(e):e,o={},s=0;s<i.length;++s)if(a[i[s]]&&!o[i[s]]){if(n)return i[s];r.push(i[s]),o[i[s]]=!0}return n?null:r},t.contain=function(e,i,n){var a=null;"object"!==(void 0===e?"undefined":r(e))||"object"!==(void 0===i?"undefined":r(i))||Array.isArray(e)||Array.isArray(i)?i=[].concat(i):(a=i,i=Object.keys(i)),n=n||{},t.assert("string"==typeof e||"object"===(void 0===e?"undefined":r(e)),"Reference must be string or an object"),t.assert(i.length,"Values array cannot be empty");var o=void 0,s=void 0;if(n.deep){o=t.deepEqual;var l=n.hasOwnProperty("only"),c=n.hasOwnProperty("part");s={prototype:l?n.only:!!c&&!n.part,part:l?!n.only:!c||n.part}}else o=function(e,t){return e===t};for(var d=!1,h=new Array(i.length),u=0;u<h.length;++u)h[u]=0;if("string"==typeof e){for(var p="(",f=0;f<i.length;++f){var g=i[f];t.assert("string"==typeof g,"Cannot compare string reference to non-string value"),p+=(f?"|":"")+t.escapeRegex(g)}var m=new RegExp(p+")","g");d=!!e.replace(m,(function(e,t){var n=i.indexOf(t);return++h[n],""}))}else if(Array.isArray(e))for(var v=0;v<e.length;++v){for(var _=!1,b=0;b<i.length&&!1===_;++b)_=o(i[b],e[v],s)&&b;!1!==_?++h[_]:d=!0}else for(var w=Object.getOwnPropertyNames(e),y=0;y<w.length;++y){var x=w[y],C=i.indexOf(x);if(-1!==C){if(a&&!o(a[x],e[x],s))return!1;++h[C]}else d=!0}for(var S=!1,T=0;T<h.length;++T)if(S=S||!!h[T],n.once&&h[T]>1||!n.part&&!h[T])return!1;return(!n.only||!d)&&S},t.flatten=function(e,i){for(var n=i||[],r=0;r<e.length;++r)Array.isArray(e[r])?t.flatten(e[r],n):n.push(e[r]);return n},t.reach=function(e,i,n){if(!1===i||null===i||void 0===i)return e;"string"==typeof(n=n||{})&&(n={separator:n});for(var a=i.split(n.separator||"."),o=e,s=0;s<a.length;++s){var l=a[s];if("-"===l[0]&&Array.isArray(o)&&(l=l.slice(1,l.length),l=o.length-l),!o||"object"!==(void 0===o?"undefined":r(o))&&"function"!=typeof o||!(l in o)||"object"!==(void 0===o?"undefined":r(o))&&!1===n.functions){t.assert(!n.strict||s+1===a.length,"Missing segment",l,"in reach path ",i),t.assert("object"===(void 0===o?"undefined":r(o))||!0===n.functions||"function"!=typeof o,"Invalid segment",l,"in reach path ",i),o=n.default;break}o=o[l]}return o},t.reachTemplate=function(e,i,n){return i.replace(/{([^}]+)}/g,(function(i,r){var a=t.reach(e,r,n);return void 0===a||null===a?"":a}))},t.formatStack=function(e){for(var t=[],i=0;i<e.length;++i){var n=e[i];t.push([n.getFileName(),n.getLineNumber(),n.getColumnNumber(),n.getFunctionName(),n.isConstructor()])}return t},t.formatTrace=function(e){for(var t=[],i=0;i<e.length;++i){var n=e[i];t.push((n[4]?"new ":"")+n[3]+" ("+n[0]+":"+n[1]+":"+n[2]+")")}return t},t.callStack=function(e){var i=Error.prepareStackTrace;Error.prepareStackTrace=function(e,t){return t};var n={};Error.captureStackTrace(n,this);var r=n.stack;return Error.prepareStackTrace=i,t.formatStack(r).slice(1+e)},t.displayStack=function(e){var i=t.callStack(void 0===e?1:e+1);return t.formatTrace(i)},t.abortThrow=!1,t.abort=function(e,i){if("test"===n.env.NODE_ENV||!0===t.abortThrow)throw new Error(e||"Unknown error");var r="";i||(r=t.displayStack(1).join("\n\t")),console.log("ABORT: "+e+"\n\t"+r),n.exit(1)},t.assert=function(e){if(!e){for(var i=arguments.length,n=Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];if(1===n.length&&n[0]instanceof Error)throw n[0];var o=n.filter((function(e){return""!==e})).map((function(e){return"string"==typeof e?e:e instanceof Error?e.message:t.stringify(e)}));throw new a.AssertionError({message:o.join(" ")||"Unknown error",actual:!1,expected:!0,operator:"==",stackStartFunction:t.assert})}},t.Bench=function(){this.ts=0,this.reset()},t.Bench.prototype.reset=function(){this.ts=t.Bench.now()},t.Bench.prototype.elapsed=function(){return t.Bench.now()-this.ts},t.Bench.now=function(){var e=n.hrtime();return 1e3*e[0]+e[1]/1e6},t.escapeRegex=function(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")},t.base64urlEncode=function(i,n){return t.assert("string"==typeof i||e.isBuffer(i),"value must be string or buffer"),(e.isBuffer(i)?i:e.from(i,n||"binary")).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")},t.base64urlDecode=function(t,i){if("string"!=typeof t)throw new Error("Value not a string");if(!/^[\w\-]*$/.test(t))throw new Error("Invalid character");var n=e.from(t,"base64");return"buffer"===i?n:n.toString(i||"binary")},t.escapeHeaderAttribute=function(e){return t.assert(/^[ \w\!#\$%&'\(\)\*\+,\-\.\/\:;<\=>\?@\[\]\^`\{\|\}~\"\\]*$/.test(e),"Bad attribute value ("+e+")"),e.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')},t.escapeHtml=function(e){return c.escapeHtml(e)},t.escapeJavaScript=function(e){return c.escapeJavaScript(e)},t.escapeJson=function(e){return c.escapeJson(e)},t.once=function(e){if(e._hoekOnce)return e;var t=!1,i=function(){if(!t){t=!0;for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];e.apply(null,n)}};return i._hoekOnce=!0,i},t.isInteger=Number.isSafeInteger,t.ignore=function(){},t.inherits=l.inherits,t.format=l.format,t.transform=function(e,i,n){t.assert(null===e||void 0===e||"object"===(void 0===e?"undefined":r(e))||Array.isArray(e),"Invalid source object: must be null, undefined, an object, or an array");var a="object"===(void 0===n?"undefined":r(n))&&null!==n&&n.separator||".";if(Array.isArray(e)){for(var o=[],s=0;s<e.length;++s)o.push(t.transform(e[s],i,n));return o}for(var l={},c=Object.keys(i),d=0;d<c.length;++d){var h=c[d],u=h.split(a),p=i[h];t.assert("string"==typeof p,'All mappings must be "." delineated strings');for(var f=void 0,g=l;u.length>1;)g[f=u.shift()]||(g[f]={}),g=g[f];g[f=u.shift()]=t.reach(e,p,n)}return l},t.uniqueFilename=function(e,t){t=t?"."!==t[0]?"."+t:t:"",e=s.resolve(e);var i=[Date.now(),n.pid,o.randomBytes(8).toString("hex")].join("-")+t;return s.join(e,i)},t.stringify=function(){try{for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return JSON.stringify.apply(null,t)}catch(e){return"[Cannot display object: "+e.message+"]"}},t.shallow=function(e){for(var t={},i=Object.keys(e),n=0;n<i.length;++n){var r=i[n];t[r]=e[r]}return t},t.wait=function(e){return new Promise((function(t){return setTimeout(t,e)}))},t.block=function(){return new Promise(t.ignore)}}).call(t,i(3).Buffer,i(7))},function(e,t,i){"use strict";var n=i(0);t.create=function(e,t){n.assert("string"==typeof e,"Invalid reference key:",e);var i=n.clone(t),r=function e(t,r){return n.reach(e.isContext?r.context:t,e.key,i)};return r.isContext=e[0]===(i&&i.contextPrefix||"$"),r.key=r.isContext?e.slice(1):e,r.path=r.key.split(i&&i.separator||"."),r.depth=r.path.length,r.root=r.path[0],r.isJoi=!0,r.toString=function(){return(r.isContext?"context:":"ref:")+r.key},r},t.isRef=function(e){return"function"==typeof e&&e.isJoi},t.push=function(e,i){t.isRef(i)&&!i.isContext&&e.push(i.root)}},function(e,t,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(0),o=i(11),s=i(1),l=i(6),c=null,d=null,h={Set:i(9),defaults:{abortEarly:!0,convert:!0,allowUnknown:!1,skipFunctions:!1,stripUnknown:!1,language:{},presence:"optional",strip:!1,noDefaults:!1,escapeHtml:!1}};e.exports=h.Any=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),d=d||i(4),this.isJoi=!0,this._type="any",this._settings=null,this._valids=new h.Set,this._invalids=new h.Set,this._tests=[],this._refs=[],this._flags={},this._description=null,this._unit=null,this._notes=[],this._tags=[],this._examples=[],this._meta=[],this._inner={}}return e.prototype._init=function(){return this},e.prototype.createError=function(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this._flags;return l.create(e,t,i,n,r)},e.prototype.createOverrideError=function(e,t,i,n,r,a){return l.create(e,t,i,n,this._flags,r,a)},e.prototype.checkOptions=function(e){var t=i(21).options.validate(e);if(t.error)throw new Error(t.error.details[0].message)},e.prototype.clone=function(){var e=Object.create(Object.getPrototypeOf(this));e.isJoi=!0,e._currentJoi=this._currentJoi,e._type=this._type,e._settings=this._settings,e._baseType=this._baseType,e._valids=this._valids.slice(),e._invalids=this._invalids.slice(),e._tests=this._tests.slice(),e._refs=this._refs.slice(),e._flags=a.clone(this._flags),e._description=this._description,e._unit=this._unit,e._notes=this._notes.slice(),e._tags=this._tags.slice(),e._examples=this._examples.slice(),e._meta=this._meta.slice(),e._inner={};for(var t=Object.keys(this._inner),i=0;i<t.length;++i){var n=t[i];e._inner[n]=this._inner[n]?this._inner[n].slice():null}return e},e.prototype.concat=function(e){a.assert(e instanceof h.Any,"Invalid schema object"),a.assert("any"===this._type||"any"===e._type||e._type===this._type,"Cannot merge type",this._type,"with another type:",e._type);var t=this.clone();if("any"===this._type&&"any"!==e._type){for(var i=e.clone(),n=["_settings","_valids","_invalids","_tests","_refs","_flags","_description","_unit","_notes","_tags","_examples","_meta","_inner"],r=0;r<n.length;++r)i[n[r]]=t[n[r]];t=i}t._settings=t._settings?o.concat(t._settings,e._settings):e._settings,t._valids.merge(e._valids,e._invalids),t._invalids.merge(e._invalids,e._valids),t._tests=t._tests.concat(e._tests),t._refs=t._refs.concat(e._refs),a.merge(t._flags,e._flags),t._description=e._description||t._description,t._unit=e._unit||t._unit,t._notes=t._notes.concat(e._notes),t._tags=t._tags.concat(e._tags),t._examples=t._examples.concat(e._examples),t._meta=t._meta.concat(e._meta);for(var s=Object.keys(e._inner),l="object"===t._type,c=0;c<s.length;++c){var d=s[c],u=e._inner[d];if(u){var p=t._inner[d];if(p)if(l&&"children"===d){for(var f={},g=0;g<p.length;++g)f[p[g].key]=g;for(var m=0;m<u.length;++m){var v=u[m].key;f[v]>=0?p[f[v]]={key:v,schema:p[f[v]].schema.concat(u[m].schema)}:p.push(u[m])}}else t._inner[d]=t._inner[d].concat(u);else t._inner[d]=u.slice()}}return t},e.prototype._test=function(e,t,i,n){var r=this.clone();return r._tests.push({func:i,name:e,arg:t,options:n}),r},e.prototype.options=function(e){a.assert(!e.context,"Cannot override context"),this.checkOptions(e);var t=this.clone();return t._settings=o.concat(t._settings,e),t},e.prototype.strict=function(e){var t=this.clone(),i=void 0!==e&&!e;return t._settings=o.concat(t._settings,{convert:i}),t},e.prototype.raw=function(e){var t=void 0===e||e;if(this._flags.raw===t)return this;var i=this.clone();return i._flags.raw=t,i},e.prototype.error=function(e){a.assert(e&&(e instanceof Error||"function"==typeof e),"Must provide a valid Error object or a function");var t=this.clone();return t._flags.error=e,t},e.prototype.allow=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=this.clone();t=a.flatten(t);for(var r=0;r<t.length;++r){var o=t[r];a.assert(void 0!==o,"Cannot call allow/valid/invalid with undefined"),n._invalids.remove(o),n._valids.add(o,n._refs)}return n},e.prototype.valid=function(){var e=this.allow.apply(this,arguments);return e._flags.allowOnly=!0,e},e.prototype.invalid=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=this.clone();t=a.flatten(t);for(var r=0;r<t.length;++r){var o=t[r];a.assert(void 0!==o,"Cannot call allow/valid/invalid with undefined"),n._valids.remove(o),n._invalids.add(o,n._refs)}return n},e.prototype.required=function(){if("required"===this._flags.presence)return this;var e=this.clone();return e._flags.presence="required",e},e.prototype.optional=function(){if("optional"===this._flags.presence)return this;var e=this.clone();return e._flags.presence="optional",e},e.prototype.forbidden=function(){if("forbidden"===this._flags.presence)return this;var e=this.clone();return e._flags.presence="forbidden",e},e.prototype.strip=function(){if(this._flags.strip)return this;var e=this.clone();return e._flags.strip=!0,e},e.prototype.applyFunctionToChildren=function(e,t,i,n){if(1!==(e=[].concat(e)).length||""!==e[0]){n=n?n+".":"";var r=(""===e[0]?e.slice(1):e).map((function(e){return n+e}));throw new Error("unknown key(s) "+r.join(", "))}return this[t].apply(this,i)},e.prototype.default=function(e,t){"function"!=typeof e||s.isRef(e)||(!e.description&&t&&(e.description=t),this._flags.func||a.assert("string"==typeof e.description&&e.description.length>0,"description must be provided when default value is a function"));var i=this.clone();return i._flags.default=e,s.push(i._refs,e),i},e.prototype.empty=function(e){var t=this.clone();return void 0===e?delete t._flags.empty:t._flags.empty=d.schema(this._currentJoi,e),t},e.prototype.when=function(e,t){a.assert(t&&"object"===(void 0===t?"undefined":n(t)),"Invalid options"),a.assert(void 0!==t.then||void 0!==t.otherwise,'options must have at least one of "then" or "otherwise"');var r=t.hasOwnProperty("then")?this.concat(d.schema(this._currentJoi,t.then)):void 0,o=t.hasOwnProperty("otherwise")?this.concat(d.schema(this._currentJoi,t.otherwise)):void 0;c=c||i(10);var s={then:r,otherwise:o};Object.prototype.hasOwnProperty.call(t,"is")&&(s.is=t.is);var l=c.when(e,s);return l._flags.presence="ignore",l._baseType=this,l},e.prototype.description=function(e){a.assert(e&&"string"==typeof e,"Description must be a non-empty string");var t=this.clone();return t._description=e,t},e.prototype.notes=function(e){a.assert(e&&("string"==typeof e||Array.isArray(e)),"Notes must be a non-empty string or array");var t=this.clone();return t._notes=t._notes.concat(e),t},e.prototype.tags=function(e){a.assert(e&&("string"==typeof e||Array.isArray(e)),"Tags must be a non-empty string or array");var t=this.clone();return t._tags=t._tags.concat(e),t},e.prototype.meta=function(e){a.assert(void 0!==e,"Meta cannot be undefined");var t=this.clone();return t._meta=t._meta.concat(e),t},e.prototype.example=function(){a.assert(1===arguments.length,"Missing example");var e=arguments.length<=0?void 0:arguments[0],t=this.clone();return t._examples.push(e),t},e.prototype.unit=function(e){a.assert(e&&"string"==typeof e,"Unit name must be a non-empty string");var t=this.clone();return t._unit=e,t},e.prototype._prepareEmptyValue=function(e){return"string"==typeof e&&this._flags.trim?e.trim():e},e.prototype._validate=function(e,t,i,n){var r=this,c=e;t=t||{key:"",path:[],parent:null,reference:n},this._settings&&(i=o.concat(i,this._settings));var d=[],u=function(){var n=void 0;if(void 0!==e)n=r._flags.raw?c:e;else if(i.noDefaults)n=e;else if(s.isRef(r._flags.default))n=r._flags.default(t.parent,i);else if("function"!=typeof r._flags.default||r._flags.func&&!r._flags.default.description)n=a.clone(r._flags.default);else{var o=void 0;null!==t.parent&&r._flags.default.length>0&&(o=[a.clone(t.parent),i]);var l=h._try(r._flags.default,o);n=l.value,l.error&&d.push(r.createError("any.default",{error:l.error},t,i))}if(d.length&&"function"==typeof r._flags.error){var u=r._flags.error.call(r,d);d="string"==typeof u?[r.createOverrideError("override",{reason:d},t,i,u)]:[].concat(u).map((function(e){return e instanceof Error?e:r.createOverrideError(e.type||"override",e.context,t,i,e.message,e.template)}))}return{value:r._flags.strip?void 0:n,finalValue:n,errors:d.length?d:null}};if(this._coerce){var p=this._coerce.call(this,e,t,i);if(p.errors)return e=p.value,d=d.concat(p.errors),u();e=p.value}this._flags.empty&&!this._flags.empty._validate(this._prepareEmptyValue(e),null,h.defaults).errors&&(e=void 0);var f=this._flags.presence||i.presence;if("optional"===f){if(void 0===e){if(!this._flags.hasOwnProperty("default")||void 0!==this._flags.default||"object"!==this._type)return u();e={}}}else{if("required"===f&&void 0===e)return d.push(this.createError("any.required",null,t,i)),u();if("forbidden"===f)return void 0===e||d.push(this.createError("any.unknown",null,t,i)),u()}if(this._valids.has(e,t,i,this._flags.insensitive))return u();if(this._invalids.has(e,t,i,this._flags.insensitive)&&(d.push(this.createError(""===e?"any.empty":"any.invalid",{value:e,invalids:this._invalids.values({stripUndefined:!0})},t,i)),i.abortEarly||void 0===e))return u();if(this._base){var g=this._base.call(this,e,t,i);if(g.errors)return e=g.value,d=d.concat(g.errors),u();if(g.value!==e){if(e=g.value,this._valids.has(e,t,i,this._flags.insensitive))return u();if(this._invalids.has(e,t,i,this._flags.insensitive)&&(d.push(this.createError(""===e?"any.empty":"any.invalid",{value:e,invalids:this._invalids.values({stripUndefined:!0})},t,i)),i.abortEarly))return u()}}if(this._flags.allowOnly&&(d.push(this.createError("any.allowOnly",{value:e,valids:this._valids.values({stripUndefined:!0})},t,i)),i.abortEarly))return u();for(var m=0;m<this._tests.length;++m){var v=this._tests[m].func.call(this,e,t,i);if(v instanceof l.Err){if(d.push(v),i.abortEarly)return u()}else e=v}return u()},e.prototype._validateWithOptions=function(e,t,i){t&&this.checkOptions(t);var n=o.concat(h.defaults,t),r=this._validate(e,null,n),a=l.process(r.errors,e);return i?i(a,r.value):{error:a,value:r.value,then:function(e,t){return a?Promise.reject(a).catch(t):Promise.resolve(r.value).then(e)},catch:function(e){return a?Promise.reject(a).catch(e):Promise.resolve(r.value)}}},e.prototype.validate=function(e,t,i){return"function"==typeof t?this._validateWithOptions(e,null,t):this._validateWithOptions(e,t,i)},e.prototype.describe=function(){var e=this,t={type:this._type},i=Object.keys(this._flags);if(i.length)if(["empty","default","lazy","label"].some((function(t){return e._flags.hasOwnProperty(t)}))){t.flags={};for(var n=0;n<i.length;++n){var r=i[n];"empty"===r?t.flags[r]=this._flags[r].describe():"default"===r?s.isRef(this._flags[r])?t.flags[r]=this._flags[r].toString():"function"==typeof this._flags[r]?t.flags[r]={description:this._flags[r].description,function:this._flags[r]}:t.flags[r]=this._flags[r]:"lazy"===r||"label"===r||(t.flags[r]=this._flags[r])}}else t.flags=this._flags;this._settings&&(t.options=a.clone(this._settings)),this._baseType&&(t.base=this._baseType.describe()),this._description&&(t.description=this._description),this._notes.length&&(t.notes=this._notes),this._tags.length&&(t.tags=this._tags),this._meta.length&&(t.meta=this._meta),this._examples.length&&(t.examples=this._examples),this._unit&&(t.unit=this._unit);var o=this._valids.values();o.length&&(t.valids=o.map((function(e){return s.isRef(e)?e.toString():e})));var l=this._invalids.values();l.length&&(t.invalids=l.map((function(e){return s.isRef(e)?e.toString():e}))),t.rules=[];for(var c=0;c<this._tests.length;++c){var d=this._tests[c],h={name:d.name};void 0!==d.arg&&(h.arg=s.isRef(d.arg)?d.arg.toString():d.arg);var u=d.options;if(u){if(u.hasRef){h.arg={};for(var p=Object.keys(d.arg),f=0;f<p.length;++f){var g=p[f],m=d.arg[g];h.arg[g]=s.isRef(m)?m.toString():m}}"string"==typeof u.description?h.description=u.description:"function"==typeof u.description&&(h.description=u.description(h.arg))}t.rules.push(h)}t.rules.length||delete t.rules;var v=this._getLabel();return v&&(t.label=v),t},e.prototype.label=function(e){a.assert(e&&"string"==typeof e,"Label name must be a non-empty string");var t=this.clone();return t._flags.label=e,t},e.prototype._getLabel=function(e){return this._flags.label||e},r(e,[{key:"schemaType",get:function(){return this._type}}]),e}(),h.Any.prototype.isImmutable=!0,h.Any.prototype.only=h.Any.prototype.equal=h.Any.prototype.valid,h.Any.prototype.disallow=h.Any.prototype.not=h.Any.prototype.invalid,h.Any.prototype.exist=h.Any.prototype.required,h._try=function(e,t){var i=void 0,n=void 0;try{n=e.apply(null,t)}catch(e){i=e}return{value:n,error:i}}},function(e,t,i){"use strict";(function(e){function n(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function r(e,t){if(n()<t)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=a.prototype:(null===e&&(e=new a(t)),e.length=t),e}function a(e,t,i){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(e,t,i);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return o(this,e,t,i)}function o(e,t,i,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,i,n){if(t.byteLength,i<0||t.byteLength<i)throw new RangeError("'offset' is out of bounds");if(t.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===i&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,i):new Uint8Array(t,i,n),a.TYPED_ARRAY_SUPPORT?(e=t).__proto__=a.prototype:e=c(e,t),e}(e,t,i,n):"string"==typeof t?function(e,t,i){if("string"==typeof i&&""!==i||(i="utf8"),!a.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|h(t,i),o=(e=r(e,n)).write(t,i);return o!==n&&(e=e.slice(0,o)),e}(e,t,i):function(e,t){if(a.isBuffer(t)){var i=0|d(t.length);return 0===(e=r(e,i)).length||t.copy(e,0,0,i),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!==e}(t.length)?r(e,0):c(e,t);if("Buffer"===t.type&&H(t.data))return c(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t){if(s(t),e=r(e,t<0?0:0|d(t)),!a.TYPED_ARRAY_SUPPORT)for(var i=0;i<t;++i)e[i]=0;return e}function c(e,t){var i=t.length<0?0:0|d(t.length);e=r(e,i);for(var n=0;n<i;n+=1)e[n]=255&t[n];return e}function d(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function h(e,t){if(a.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var i=e.length;if(0===i)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return R(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return j(e).length;default:if(n)return R(e).length;t=(""+t).toLowerCase(),n=!0}}function u(e,t,i){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return k(this,t,i);case"utf8":case"utf-8":return C(this,t,i);case"ascii":return S(this,t,i);case"latin1":case"binary":return T(this,t,i);case"base64":return x(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,i);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function p(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function f(e,t,i,n,r){if(0===e.length)return-1;if("string"==typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=r?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(r)return-1;i=e.length-1}else if(i<0){if(!r)return-1;i=0}if("string"==typeof t&&(t=a.from(t,n)),a.isBuffer(t))return 0===t.length?-1:g(e,t,i,n,r);if("number"==typeof t)return t&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):g(e,[t],i,n,r);throw new TypeError("val must be string, number or Buffer")}function g(e,t,i,n,r){function a(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var o,s=1,l=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,l/=2,c/=2,i/=2}if(r){var d=-1;for(o=i;o<l;o++)if(a(e,o)===a(t,-1===d?0:o-d)){if(-1===d&&(d=o),o-d+1===c)return d*s}else-1!==d&&(o-=o-d),d=-1}else for(i+c>l&&(i=l-c),o=i;o>=0;o--){for(var h=!0,u=0;u<c;u++)if(a(e,o+u)!==a(t,u)){h=!1;break}if(h)return o}return-1}function m(e,t,i,n){i=Number(i)||0;var r=e.length-i;n?(n=Number(n))>r&&(n=r):n=r;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var o=0;o<n;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[i+o]=s}return o}function v(e,t,i,n){return $(R(t,e.length-i),e,i,n)}function _(e,t,i,n){return $(function(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}(t),e,i,n)}function b(e,t,i,n){return _(e,t,i,n)}function w(e,t,i,n){return $(j(t),e,i,n)}function y(e,t,i,n){return $(function(e,t){for(var i,n,r,a=[],o=0;o<e.length&&!((t-=2)<0);++o)i=e.charCodeAt(o),n=i>>8,r=i%256,a.push(r),a.push(n);return a}(t,e.length-i),e,i,n)}function x(e,t,i){return 0===t&&i===e.length?B.fromByteArray(e):B.fromByteArray(e.slice(t,i))}function C(e,t,i){i=Math.min(e.length,i);for(var n=[],r=t;r<i;){var a,o,s,l,c=e[r],d=null,h=c>239?4:c>223?3:c>191?2:1;if(r+h<=i)switch(h){case 1:c<128&&(d=c);break;case 2:128==(192&(a=e[r+1]))&&(l=(31&c)<<6|63&a)>127&&(d=l);break;case 3:a=e[r+1],o=e[r+2],128==(192&a)&&128==(192&o)&&(l=(15&c)<<12|(63&a)<<6|63&o)>2047&&(l<55296||l>57343)&&(d=l);break;case 4:a=e[r+1],o=e[r+2],s=e[r+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(l=(15&c)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&l<1114112&&(d=l)}null===d?(d=65533,h=1):d>65535&&(d-=65536,n.push(d>>>10&1023|55296),d=56320|1023&d),n.push(d),r+=h}return function(e){var t=e.length;if(t<=F)return String.fromCharCode.apply(String,e);for(var i="",n=0;n<t;)i+=String.fromCharCode.apply(String,e.slice(n,n+=F));return i}(n)}function S(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(127&e[r]);return n}function T(e,t,i){var n="";i=Math.min(e.length,i);for(var r=t;r<i;++r)n+=String.fromCharCode(e[r]);return n}function k(e,t,i){var n=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>n)&&(i=n);for(var r="",a=t;a<i;++a)r+=L(e[a]);return r}function A(e,t,i){for(var n=e.slice(t,i),r="",a=0;a<n.length;a+=2)r+=String.fromCharCode(n[a]+256*n[a+1]);return r}function P(e,t,i){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,i,n,r,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<o)throw new RangeError('"value" argument is out of bounds');if(i+n>e.length)throw new RangeError("Index out of range")}function E(e,t,i,n){t<0&&(t=65535+t+1);for(var r=0,a=Math.min(e.length-i,2);r<a;++r)e[i+r]=(t&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function M(e,t,i,n){t<0&&(t=4294967295+t+1);for(var r=0,a=Math.min(e.length-i,4);r<a;++r)e[i+r]=t>>>8*(n?r:3-r)&255}function O(e,t,i,n,r,a){if(i+n>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function I(e,t,i,n,r){return r||O(e,0,i,4),V.write(e,t,i,n,23,4),i+4}function N(e,t,i,n,r){return r||O(e,0,i,8),V.write(e,t,i,n,52,8),i+8}function L(e){return e<16?"0"+e.toString(16):e.toString(16)}function R(e,t){t=t||1/0;for(var i,n=e.length,r=null,a=[],o=0;o<n;++o){if((i=e.charCodeAt(o))>55295&&i<57344){if(!r){if(i>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&a.push(239,191,189);continue}r=i;continue}if(i<56320){(t-=3)>-1&&a.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&(t-=3)>-1&&a.push(239,191,189);if(r=null,i<128){if((t-=1)<0)break;a.push(i)}else if(i<2048){if((t-=2)<0)break;a.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;a.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return a}function j(e){return B.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(z,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function $(e,t,i,n){for(var r=0;r<n&&!(r+i>=t.length||r>=e.length);++r)t[r+i]=e[r];return r}var B=i(33),V=i(34),H=i(35);t.Buffer=a,t.SlowBuffer=function(e){return+e!=e&&(e=0),a.alloc(+e)},t.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=n(),a.poolSize=8192,a._augment=function(e){return e.__proto__=a.prototype,e},a.from=function(e,t,i){return o(null,e,t,i)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(e,t,i){return function(e,t,i,n){return s(t),t<=0?r(e,t):void 0!==i?"string"==typeof n?r(e,t).fill(i,n):r(e,t).fill(i):r(e,t)}(null,e,t,i)},a.allocUnsafe=function(e){return l(null,e)},a.allocUnsafeSlow=function(e){return l(null,e)},a.isBuffer=function(e){return!(null==e||!e._isBuffer)},a.compare=function(e,t){if(!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var i=e.length,n=t.length,r=0,o=Math.min(i,n);r<o;++r)if(e[r]!==t[r]){i=e[r],n=t[r];break}return i<n?-1:n<i?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!H(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var i;if(void 0===t)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var n=a.allocUnsafe(t),r=0;for(i=0;i<e.length;++i){var o=e[i];if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,r),r+=o.length}return n},a.byteLength=h,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},a.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):u.apply(this,arguments)},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",i=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(e+=" ... ")),"<Buffer "+e+">"},a.prototype.compare=function(e,t,i,n,r){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),t<0||i>e.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&t>=i)return 0;if(n>=r)return-1;if(t>=i)return 1;if(this===e)return 0;for(var o=(r>>>=0)-(n>>>=0),s=(i>>>=0)-(t>>>=0),l=Math.min(o,s),c=this.slice(n,r),d=e.slice(t,i),h=0;h<l;++h)if(c[h]!==d[h]){o=c[h],s=d[h];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(e,t,i){return-1!==this.indexOf(e,t,i)},a.prototype.indexOf=function(e,t,i){return f(this,e,t,i,!0)},a.prototype.lastIndexOf=function(e,t,i){return f(this,e,t,i,!1)},a.prototype.write=function(e,t,i,n){if(void 0===t)n="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)n=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-t;if((void 0===i||i>r)&&(i=r),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return m(this,e,t,i);case"utf8":case"utf-8":return v(this,e,t,i);case"ascii":return _(this,e,t,i);case"latin1":case"binary":return b(this,e,t,i);case"base64":return w(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,e,t,i);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var F=4096;a.prototype.slice=function(e,t){var i,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),a.TYPED_ARRAY_SUPPORT)(i=this.subarray(e,t)).__proto__=a.prototype;else{var r=t-e;i=new a(r,void 0);for(var o=0;o<r;++o)i[o]=this[o+e]}return i},a.prototype.readUIntLE=function(e,t,i){e|=0,t|=0,i||P(e,t,this.length);for(var n=this[e],r=1,a=0;++a<t&&(r*=256);)n+=this[e+a]*r;return n},a.prototype.readUIntBE=function(e,t,i){e|=0,t|=0,i||P(e,t,this.length);for(var n=this[e+--t],r=1;t>0&&(r*=256);)n+=this[e+--t]*r;return n},a.prototype.readUInt8=function(e,t){return t||P(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return t||P(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return t||P(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,i){e|=0,t|=0,i||P(e,t,this.length);for(var n=this[e],r=1,a=0;++a<t&&(r*=256);)n+=this[e+a]*r;return n>=(r*=128)&&(n-=Math.pow(2,8*t)),n},a.prototype.readIntBE=function(e,t,i){e|=0,t|=0,i||P(e,t,this.length);for(var n=t,r=1,a=this[e+--n];n>0&&(r*=256);)a+=this[e+--n]*r;return a>=(r*=128)&&(a-=Math.pow(2,8*t)),a},a.prototype.readInt8=function(e,t){return t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){t||P(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},a.prototype.readInt16BE=function(e,t){t||P(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},a.prototype.readInt32LE=function(e,t){return t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return t||P(e,4,this.length),V.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return t||P(e,4,this.length),V.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return t||P(e,8,this.length),V.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return t||P(e,8,this.length),V.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,i,n){e=+e,t|=0,i|=0,n||D(this,e,t,i,Math.pow(2,8*i)-1,0);var r=1,a=0;for(this[t]=255&e;++a<i&&(r*=256);)this[t+a]=e/r&255;return t+i},a.prototype.writeUIntBE=function(e,t,i,n){e=+e,t|=0,i|=0,n||D(this,e,t,i,Math.pow(2,8*i)-1,0);var r=i-1,a=1;for(this[t+r]=255&e;--r>=0&&(a*=256);)this[t+r]=e/a&255;return t+i},a.prototype.writeUInt8=function(e,t,i){return e=+e,t|=0,i||D(this,e,t,1,255,0),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,i){return e=+e,t|=0,i||D(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):E(this,e,t,!0),t+2},a.prototype.writeUInt16BE=function(e,t,i){return e=+e,t|=0,i||D(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):E(this,e,t,!1),t+2},a.prototype.writeUInt32LE=function(e,t,i){return e=+e,t|=0,i||D(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):M(this,e,t,!0),t+4},a.prototype.writeUInt32BE=function(e,t,i){return e=+e,t|=0,i||D(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},a.prototype.writeIntLE=function(e,t,i,n){if(e=+e,t|=0,!n){var r=Math.pow(2,8*i-1);D(this,e,t,i,r-1,-r)}var a=0,o=1,s=0;for(this[t]=255&e;++a<i&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+i},a.prototype.writeIntBE=function(e,t,i,n){if(e=+e,t|=0,!n){var r=Math.pow(2,8*i-1);D(this,e,t,i,r-1,-r)}var a=i-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+i},a.prototype.writeInt8=function(e,t,i){return e=+e,t|=0,i||D(this,e,t,1,127,-128),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,i){return e=+e,t|=0,i||D(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):E(this,e,t,!0),t+2},a.prototype.writeInt16BE=function(e,t,i){return e=+e,t|=0,i||D(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):E(this,e,t,!1),t+2},a.prototype.writeInt32LE=function(e,t,i){return e=+e,t|=0,i||D(this,e,t,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):M(this,e,t,!0),t+4},a.prototype.writeInt32BE=function(e,t,i){return e=+e,t|=0,i||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},a.prototype.writeFloatLE=function(e,t,i){return I(this,e,t,!0,i)},a.prototype.writeFloatBE=function(e,t,i){return I(this,e,t,!1,i)},a.prototype.writeDoubleLE=function(e,t,i){return N(this,e,t,!0,i)},a.prototype.writeDoubleBE=function(e,t,i){return N(this,e,t,!1,i)},a.prototype.copy=function(e,t,i,n){if(i||(i=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-i&&(n=e.length-t+i);var r,o=n-i;if(this===e&&i<t&&t<n)for(r=o-1;r>=0;--r)e[r+t]=this[r+i];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)e[r+t]=this[r+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+o),t);return o},a.prototype.fill=function(e,t,i,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;var o;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(o=t;o<i;++o)this[o]=e;else{var s=a.isBuffer(e)?e:R(new a(e,n).toString()),l=s.length;for(o=0;o<i-t;++o)this[o+t]=s[o%l]}return this};var z=/[^+\/0-9A-Za-z-_]/g}).call(t,i(5))},function(e,t,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=i(0),a=i(1);t.schema=function(e,t){return void 0!==t&&null!==t&&"object"===(void 0===t?"undefined":n(t))?t.isJoi?t:Array.isArray(t)?e.alternatives().try(t):t instanceof RegExp?e.string().regex(t):t instanceof Date?e.date().valid(t):e.object().keys(t):"string"==typeof t?e.string().valid(t):"number"==typeof t?e.number().valid(t):"boolean"==typeof t?e.boolean().valid(t):a.isRef(t)?e.valid(t):(r.assert(null===t,"Invalid schema content:",t),e.valid(null))},t.ref=function(e){return a.isRef(e)?e:a.create(e)}},function(e,t){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=i(0),a=i(20),o={annotations:Symbol("joi-annotations"),stringify:function(e,i){var r=void 0===e?"undefined":n(e);if(null===e)return"null";if("string"===r)return e;if(e instanceof t.Err||"function"===r||"symbol"===r)return e.toString();if("object"===r){if(Array.isArray(e)){for(var a="",s=0;s<e.length;++s)a=a+(a.length?", ":"")+o.stringify(e[s],i);return i?"["+a+"]":a}return e.toString()}return JSON.stringify(e)}};t.Err=function(){function e(t,i,n,r,o,s,l){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.isJoi=!0,this.type=t,this.context=i||{},this.context.key=n.path[n.path.length-1],this.context.label=n.key,this.path=n.path,this.options=r,this.flags=o,this.message=s,this.template=l;var c=this.options.language;this.flags.label?this.context.label=this.flags.label:!c||""!==this.context.label&&null!==this.context.label||(this.context.label=c.root||a.errors.root)}return e.prototype.toString=function(){var e=this;if(this.message)return this.message;var t=void 0;this.template&&(t=this.template);var i=this.options.language;if(void 0===(t=t||r.reach(i,this.type)||r.reach(a.errors,this.type)))return'Error code "'+this.type+'" is not defined, your custom type is missing the correct language definition';var n=r.reach(i,"messages.wrapArrays");if("boolean"!=typeof n&&(n=a.errors.messages.wrapArrays),null===t){var s=o.stringify(this.context.reason,n);return n?s.slice(1,-1):s}var l=/\{\{\!?label\}\}/.test(t),c=t.length>2&&"!"===t[0]&&"!"===t[1];if(c&&(t=t.slice(2)),!l&&!c){var d=r.reach(i,"key");t="string"==typeof d?d+t:r.reach(a.errors,"key")+t}return t.replace(/\{\{(\!?)([^}]+)\}\}/g,(function(t,i,a){var s=r.reach(e.context,a),l=o.stringify(s,n);return i&&e.options.escapeHtml?r.escapeHtml(l):l}))},e}(),t.create=function(e,i,n,r,a,o,s){return new t.Err(e,i,n,r,a,o,s)},t.process=function(e,t){if(!e||!e.length)return null;var i="",n=[],r=function e(t,r){for(var a=0;a<t.length;++a){var o=t[a];if(o instanceof Error)return o;if(o.flags.error&&"function"!=typeof o.flags.error)return o.flags.error;var s=void 0;if(void 0===r&&(s=o.toString(),i=i+(i?". ":"")+s),o.context.reason&&o.context.reason.length){var l=e(o.context.reason,o.path);if(l)return l}else n.push({message:s||o.toString(),path:o.path,type:o.type,context:o.context})}}(e);if(r)return r;var a=new Error(i);return a.isJoi=!0,a.name="ValidationError",a.details=n,a._object=t,a.annotate=o.annotate,a},o.safeStringify=function(e,t){return JSON.stringify(e,o.serializer(),t)},o.serializer=function(){var e=[],t=[],i=function(i,n){return t[0]===n?"[Circular ~]":"[Circular ~."+e.slice(0,t.indexOf(n)).join(".")+"]"};return function(r,a){if(t.length>0){var s=t.indexOf(this);~s?(t.length=s+1,e.length=s+1,e[s]=r):(t.push(this),e.push(r)),~t.indexOf(a)&&(a=i.call(this,r,a))}else t.push(a);if(a){var l=a[o.annotations];if(l){if(Array.isArray(a)){for(var c=[],d=0;d<a.length;++d)l.errors[d]&&c.push("_$idx$_"+l.errors[d].sort().join(", ")+"_$end$_"),c.push(a[d]);a=c}else{for(var h=Object.keys(l.errors),u=0;u<h.length;++u){var p=h[u];a[p+"_$key$_"+l.errors[p].sort().join(", ")+"_$end$_"]=a[p],a[p]=void 0}for(var f=Object.keys(l.missing),g=0;g<f.length;++g){var m=f[g];a["_$miss$_"+m+"|"+l.missing[m]+"_$end$_"]="__missing__"}}return a}}return a===1/0||a===-1/0||Number.isNaN(a)||"function"==typeof a||"symbol"===(void 0===a?"undefined":n(a))?"["+a.toString()+"]":a}},o.annotate=function(e){var t=e?"":"\x1b[31m",i=e?"":"\x1b[41m",a=e?"":"\x1b[0m";if("object"!==n(this._object))return this.details[0].message;for(var s=r.clone(this._object||{}),l=this.details.length-1;l>=0;--l)for(var c=l+1,d=this.details[l],h=d.path,u=s,p=0;;++p){var f=h[p];if(u.isImmutable&&(u=u.clone()),!(p+1<h.length&&u[f]&&"string"!=typeof u[f])){var g=u[o.annotations]=u[o.annotations]||{errors:{},missing:{}},m=u[f],v=f||d.context.label;void 0!==m?(g.errors[v]=g.errors[v]||[],g.errors[v].push(c)):g.missing[v]=c;break}u=u[f]}var _=/_\$key\$_([, \d]+)_\$end\$_\"/g,b=/\"_\$miss\$_([^\|]+)\|(\d+)_\$end\$_\"\: \"__missing__\"/g,w=/\s*\"_\$idx\$_([, \d]+)_\$end\$_\",?\n(.*)/g,y=/"\[(NaN|Symbol.*|-?Infinity|function.*|\(.*)\]"/g,x=o.safeStringify(s,2).replace(_,(function(e,i){return'" '+t+"["+i+"]"+a})).replace(b,(function(e,n,r){return i+'"'+n+'"'+a+t+" ["+r+"]: -- missing --"+a})).replace(w,(function(e,i,n){return"\n"+n+" "+t+"["+i+"]"+a})).replace(y,(function(e,t){return t}));x=x+"\n"+t;for(var C=0;C<this.details.length;++C)x=x+"\n["+(C+1)+"] "+this.details[C].message;return x+a}},function(e,t){function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function r(e){if(c===setTimeout)return setTimeout(e,0);if((c===i||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function a(){f&&u&&(f=!1,u.length?p=u.concat(p):g=-1,p.length&&o())}function o(){if(!f){var e=r(a);f=!0;for(var t=p.length;t;){for(u=p,p=[];++g<t;)u&&u[g].run();g=-1,t=p.length}u=null,f=!1,function(e){if(d===clearTimeout)return clearTimeout(e);if((d===n||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}(e)}}function s(e,t){this.fun=e,this.array=t}function l(){}var c,d,h=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:i}catch(e){c=i}try{d="function"==typeof clearTimeout?clearTimeout:n}catch(e){d=n}}();var u,p=[],f=!1,g=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];p.push(new s(e,t)),1!==p.length||f||r(o)},s.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.prependListener=l,h.prependOnceListener=l,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,i){"use strict";function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var i=Object.getOwnPropertyNames(t),n=0;n<i.length;n++){var r=i[n],a=Object.getOwnPropertyDescriptor(t,r);a&&a.configurable&&void 0===e[r]&&Object.defineProperty(e,r,a)}}(e,t))}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},l=i(0),c=i(2),d=i(4),h=i(6),u=i(26),p=i(1),f=i(11),g={alternatives:i(10),array:i(22),boolean:i(24),binary:i(23),date:i(12),func:i(25),number:i(27),object:i(13),string:i(28),callWithDefaults:function(e,t){var i;return l.assert(this,"Must be invoked on a Joi instance."),this._defaults&&(e=this._defaults(e)),e._currentJoi=this,(i=e)._init.apply(i,function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(t))},root:function(){var e=new c,t=e.clone();return c.prototype._currentJoi=t,t._currentJoi=t,t.any=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return l.assert(0===i.length,"Joi.any() does not allow arguments."),g.callWithDefaults.call(this,e,i)},t.alternatives=t.alt=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return g.callWithDefaults.call(this,g.alternatives,t)},t.array=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return l.assert(0===t.length,"Joi.array() does not allow arguments."),g.callWithDefaults.call(this,g.array,t)},t.boolean=t.bool=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return l.assert(0===t.length,"Joi.boolean() does not allow arguments."),g.callWithDefaults.call(this,g.boolean,t)},t.binary=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return l.assert(0===t.length,"Joi.binary() does not allow arguments."),g.callWithDefaults.call(this,g.binary,t)},t.date=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return l.assert(0===t.length,"Joi.date() does not allow arguments."),g.callWithDefaults.call(this,g.date,t)},t.func=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return l.assert(0===t.length,"Joi.func() does not allow arguments."),g.callWithDefaults.call(this,g.func,t)},t.number=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return l.assert(0===t.length,"Joi.number() does not allow arguments."),g.callWithDefaults.call(this,g.number,t)},t.object=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return g.callWithDefaults.call(this,g.object,t)},t.string=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return l.assert(0===t.length,"Joi.string() does not allow arguments."),g.callWithDefaults.call(this,g.string,t)},t.ref=function(){return p.create.apply(p,arguments)},t.isRef=function(e){return p.isRef(e)},t.validate=function(i){var n,r=arguments.length<=(n=(arguments.length<=1?0:arguments.length-1)-1+1)?void 0:arguments[n],a="function"==typeof r?r:null,o=(arguments.length<=1?0:arguments.length-1)-(a?1:0);if(0===o)return e.validate(i,a);var s=2===o?arguments.length<=2?void 0:arguments[2]:{};return t.compile(arguments.length<=1?void 0:arguments[1])._validateWithOptions(i,s,a)},t.describe=function(){return(arguments.length?t.compile(arguments.length<=0?void 0:arguments[0]):e).describe()},t.compile=function(e){try{return d.schema(this,e)}catch(e){throw e.hasOwnProperty("path")&&(e.message=e.message+"("+e.path+")"),e}},t.assert=function(e,i,n){t.attempt(e,i,n)},t.attempt=function(e,i,n){var r=t.validate(e,i),a=r.error;if(a){if(!n)throw"function"==typeof a.annotate&&(a.message=a.annotate()),a;if(!(n instanceof Error))throw"function"==typeof a.annotate&&(a.message=n+" "+a.annotate()),a;throw n}return r.value},t.reach=function(e,t){return l.assert(e&&e instanceof c,"you must provide a joi schema"),l.assert(Array.isArray(t)||"string"==typeof t,"path must be a string or an array of strings"),function e(t,i){if(!i.length)return t;var n=t._inner.children;if(n)for(var r=i.shift(),a=0;a<n.length;++a){var o=n[a];if(o.key===r)return e(o.schema,i)}}(e,"string"==typeof t?t?t.split("."):[]:t.slice())},t.lazy=function(e){return u.set(e)},t.defaults=function(e){var t=this;l.assert("function"==typeof e,"Defaults must be a function");var i=Object.create(this.any());return i=e(i),l.assert(i&&i instanceof this.constructor,"defaults() must return a schema"),s(i,this,i.clone()),i._defaults=function(i){return t._defaults&&(i=t._defaults(i),l.assert(i instanceof t.constructor,"defaults() must return a schema")),i=e(i),l.assert(i instanceof t.constructor,"defaults() must return a schema"),i},i},t.extend=function(){for(var e=this,i=arguments.length,u=Array(i),m=0;m<i;m++)u[m]=arguments[m];var v=l.flatten(u);l.assert(v.length>0,"You need to provide at least one extension"),this.assert(v,t.extensionsSchema);var _=Object.create(this.any());s(_,this);for(var b=0;b<v.length;++b)!function(i){var u=v[i];"function"==typeof u&&(u=u(_)),e.assert(u,t.extensionSchema);var m=(u.base||e.any()).clone(),b=m.constructor,w=function(e){function t(){r(this,t);var i=a(this,e.call(this));return u.base&&s(i,m),i._type=u.name,u.language&&(i._settings=f.concat(i._settings,{language:n({},u.name,u.language)})),i}return o(t,e),t}(b);if(u.coerce&&(w.prototype._coerce=function(e,t,i){if(b.prototype._coerce){var n=b.prototype._coerce.call(this,e,t,i);if(n.errors)return n;e=n.value}var r=u.coerce.call(this,e,t,i);return r instanceof h.Err?{value:e,errors:r}:{value:r}}),u.pre&&(w.prototype._base=function(e,t,i){if(b.prototype._base){var n=b.prototype._base.call(this,e,t,i);if(n.errors)return n;e=n.value}var r=u.pre.call(this,e,t,i);return r instanceof h.Err?{value:e,errors:r}:{value:r}}),u.rules)for(var y=0;y<u.rules.length;++y)!function(t){var i=u.rules[t],n=i.params?i.params instanceof c?i.params._inner.children.map((function(e){return e.key})):Object.keys(i.params):[],r=i.params?d.schema(e,i.params):null;w.prototype[i.name]=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];if(t.length>n.length)throw new Error("Unexpected number of arguments");for(var o=!1,s={},d=0;d<n.length;++d)s[n[d]]=t[d],!o&&p.isRef(t[d])&&(o=!0);r&&(s=_.attempt(s,r));var h=void 0;if(i.validate){var u=function(e,t,n){return i.validate.call(this,s,e,t,n)};h=this._test(i.name,s,u,{description:i.description,hasRef:o})}else h=this.clone();if(i.setup){var f=i.setup.call(h,s);void 0!==f&&(l.assert(f instanceof c,"Setup of extension Joi."+this._type+"()."+i.name+"() must return undefined or a Joi object"),h=f)}return h}}(y);u.describe&&(w.prototype.describe=function(){var e=b.prototype.describe.call(this);return u.describe.call(this,e)});var x=new w;_[u.name]=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return g.callWithDefaults.call(this,x,t)}}(b);return _},t.extensionSchema=g.object.keys({base:g.object.type(c,"Joi object"),name:g.string.required(),coerce:g.func.arity(3),pre:g.func.arity(3),language:g.object,describe:g.func.arity(1),rules:g.array.items(g.object.keys({name:g.string.required(),setup:g.func.arity(1),validate:g.func.arity(4),params:[g.object.pattern(/.*/,g.object.type(c,"Joi object")),g.object.type(g.object.constructor,"Joi object")],description:[g.string,g.func.arity(1)]}).or("setup","validate"))}).strict(),t.extensionsSchema=g.array.items([g.object,g.func.arity(1)]).strict(),t.version=i(36).version,t}};e.exports=g.root()},function(e,t,i){"use strict";(function(t){function n(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(1),o={extendedCheckForValue:function(e,i){var n=void 0===e?"undefined":r(e);if("object"===n){if(e instanceof Date)return function(t){return t instanceof Date&&e.getTime()===t.getTime()};if(t.isBuffer(e))return function(i){return t.isBuffer(i)&&e.length===i.length&&e.toString("binary")===i.toString("binary")}}else if(i&&"string"===n){var a=e.toLowerCase();return function(e){return"string"==typeof e&&a===e.toLowerCase()}}return null}};e.exports=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._set=new Set(t),this._hasRef=!1}return e.prototype.add=function(e,t){var i=a.isRef(e);return!i&&this.has(e,null,null,!1)||(void 0!==t&&a.push(t,e),this._set.add(e),this._hasRef|=i),this},e.prototype.merge=function(e,t){var i=!0,n=!1,r=void 0;try{for(var a,o=e._set[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var s=a.value;this.add(s)}}catch(e){n=!0,r=e}finally{try{!i&&o.return&&o.return()}finally{if(n)throw r}}var l=!0,c=!1,d=void 0;try{for(var h,u=t._set[Symbol.iterator]();!(l=(h=u.next()).done);l=!0){var p=h.value;this.remove(p)}}catch(e){c=!0,d=e}finally{try{!l&&u.return&&u.return()}finally{if(c)throw d}}return this},e.prototype.remove=function(e){return this._set.delete(e),this},e.prototype.has=function(e,t,i,n){if(!this._set.size)return!1;var r=this._set.has(e);if(r)return r;var s=o.extendedCheckForValue(e,n);if(!s){if(t&&this._hasRef){var l=!0,c=!1,d=void 0;try{for(var h,u=this._set[Symbol.iterator]();!(l=(h=u.next()).done);l=!0){var p=h.value;if(a.isRef(p)&&(e===(p=p(t.reference||t.parent,i))||Array.isArray(p)&&p.includes(e)))return!0}}catch(e){c=!0,d=e}finally{try{!l&&u.return&&u.return()}finally{if(c)throw d}}}return!1}return this._has(e,t,i,s)},e.prototype._has=function(e,t,i,n){var r=!(!t||!this._hasRef),o=function(t){return e===t||n(t)},s=!0,l=!1,c=void 0;try{for(var d,h=this._set[Symbol.iterator]();!(s=(d=h.next()).done);s=!0){var u=d.value;if(r&&a.isRef(u)&&(u=u(t.reference||t.parent,i),Array.isArray(u))){if(u.find(o))return!0}else if(o(u))return!0}}catch(e){l=!0,c=e}finally{try{!s&&h.return&&h.return()}finally{if(l)throw c}}return!1},e.prototype.values=function(e){if(e&&e.stripUndefined){var t=[],i=!0,n=!1,r=void 0;try{for(var a,o=this._set[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var s=a.value;void 0!==s&&t.push(s)}}catch(e){n=!0,r=e}finally{try{!i&&o.return&&o.return()}finally{if(n)throw r}}return t}return Array.from(this._set)},e.prototype.slice=function(){var t=new e(this._set);return t._hasRef=this._hasRef,t},e.prototype.concat=function(t){var i=new e([].concat(n(this._set),n(t._set)));return i._hasRef=!!(this._hasRef|t._hasRef),i},e}()}).call(t,i(3).Buffer)},function(e,t,i){"use strict";function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var i=Object.getOwnPropertyNames(t),n=0;n<i.length;n++){var r=i[n],a=Object.getOwnPropertyDescriptor(t,r);a&&a.configurable&&void 0===e[r]&&Object.defineProperty(e,r,a)}}(e,t))}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(0),o=i(2),s=i(4),l=i(1),c={};c.Alternatives=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return i._type="alternatives",i._invalids.remove(null),i._inner.matches=[],i}return n(t,e),t.prototype._init=function(){return arguments.length?this.try.apply(this,arguments):this},t.prototype._base=function(e,t,i){for(var n=[],r=this._inner.matches.length,a=this._baseType,o=0;o<r;++o){var s=this._inner.matches[o];if(s.schema){var l=s.schema._validate(e,t,i);if(!l.errors)return l;n=n.concat(l.errors)}else{var c=s.peek||s.is,d=s.is?s.ref(t.reference||t.parent,i):e;if(c._validate(d,null,i,t.parent).errors){if(s.otherwise)return s.otherwise._validate(e,t,i)}else if(s.then)return s.then._validate(e,t,i);if(o===r-1&&a)return a._validate(e,t,i)}}return n.length?{errors:this.createError("alternatives.child",{reason:n},t,i)}:{errors:this.createError("alternatives.base",null,t,i)}},t.prototype.try=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];t=a.flatten(t),a.assert(t.length,"Cannot add other alternatives without at least one schema");for(var n=this.clone(),r=0;r<t.length;++r){var o=s.schema(this._currentJoi,t[r]);o._refs.length&&(n._refs=n._refs.concat(o._refs)),n._inner.matches.push({schema:o})}return n},t.prototype.when=function(e,t){var i=!1;a.assert(l.isRef(e)||"string"==typeof e||(i=e instanceof o),"Invalid condition:",e),a.assert(t,"Missing options"),a.assert("object"===(void 0===t?"undefined":r(t)),"Invalid options"),i?a.assert(!t.hasOwnProperty("is"),'"is" can not be used with a schema condition'):a.assert(t.hasOwnProperty("is"),'Missing "is" directive'),a.assert(void 0!==t.then||void 0!==t.otherwise,'options must have at least one of "then" or "otherwise"');var n=this.clone(),c=void 0;i||(c=s.schema(this._currentJoi,t.is),null!==t.is&&(l.isRef(t.is)||t.is instanceof o)||(c=c.required()));var d={ref:i?null:s.ref(e),peek:i?e:null,is:c,then:void 0!==t.then?s.schema(this._currentJoi,t.then):void 0,otherwise:void 0!==t.otherwise?s.schema(this._currentJoi,t.otherwise):void 0};return n._baseType&&(d.then=d.then&&n._baseType.concat(d.then),d.otherwise=d.otherwise&&n._baseType.concat(d.otherwise)),i||(l.push(n._refs,d.ref),n._refs=n._refs.concat(d.is._refs)),d.then&&d.then._refs&&(n._refs=n._refs.concat(d.then._refs)),d.otherwise&&d.otherwise._refs&&(n._refs=n._refs.concat(d.otherwise._refs)),n._inner.matches.push(d),n},t.prototype.describe=function(){for(var e=o.prototype.describe.call(this),t=[],i=0;i<this._inner.matches.length;++i){var n=this._inner.matches[i];if(n.schema)t.push(n.schema.describe());else{var r=n.is?{ref:n.ref.toString(),is:n.is.describe()}:{peek:n.peek.describe()};n.then&&(r.then=n.then.describe()),n.otherwise&&(r.otherwise=n.otherwise.describe()),t.push(r)}}return e.alternatives=t,e},t}(o),e.exports=new c.Alternatives},function(e,t,i){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},r=i(0);t.concat=function(e,t){if(!t)return e;for(var i=n({},e),a=Object.keys(t),o=0;o<a.length;++o){var s=a[o];"language"===s&&i.hasOwnProperty(s)?i[s]=r.applyToDefaults(i[s],t[s]):i[s]=t[s]}return i}},function(e,t,i){"use strict";function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var i=Object.getOwnPropertyNames(t),n=0;n<i.length;n++){var r=i[n],a=Object.getOwnPropertyDescriptor(t,r);a&&a.configurable&&void 0===e[r]&&Object.defineProperty(e,r,a)}}(e,t))}var r=i(2),a=i(1),o=i(0),s={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};s.invalidDate=new Date(""),s.isIsoDate=function(){var e=s.isoDate.toString();return function(t){return t&&t.toString()===e}}(),s.Date=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return i._type="date",i}return n(t,e),t.prototype._base=function(e,t,i){var n={value:i.convert&&s.Date.toDate(e,this._flags.format,this._flags.timestamp,this._flags.multiplier)||e};if(n.value instanceof Date&&!isNaN(n.value.getTime()))n.errors=null;else if(i.convert){var r;r=s.isIsoDate(this._flags.format)?"isoDate":this._flags.timestamp?"timestamp."+this._flags.timestamp:"base",n.errors=this.createError("date."+r,null,t,i)}else n.errors=this.createError("date.strict",null,t,i);return n},t.toDate=function(e,t,i,n){if(e instanceof Date)return e;if("string"==typeof e||"number"==typeof e&&!isNaN(e)&&isFinite(e)){"string"==typeof e&&/^[+-]?\d+(\.\d+)?$/.test(e)&&(e=parseFloat(e));var r=void 0;if(r=t&&s.isIsoDate(t)?t.test(e)?new Date(e):s.invalidDate:i&&n?/^\s*$/.test(e)?s.invalidDate:new Date(e*n):new Date(e),!isNaN(r.getTime()))return r}return null},t.prototype.iso=function(){if(this._flags.format===s.isoDate)return this;var e=this.clone();return e._flags.format=s.isoDate,e},t.prototype.timestamp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"javascript",t=["javascript","unix"];if(o.assert(t.includes(e),'"type" must be one of "'+t.join('", "')+'"'),this._flags.timestamp===e)return this;var i=this.clone();return i._flags.timestamp=e,i._flags.multiplier="unix"===e?1e3:1,i},t.prototype._isIsoDate=function(e){return s.isoDate.test(e)},t}(r),s.compare=function(e,t){return function(i){var n="now"===i,r=a.isRef(i);return n||r||(i=s.Date.toDate(i)),o.assert(i,"Invalid date format"),this._test(e,i,(function(a,o,l){var c=void 0;if(n)c=Date.now();else if(r){if(!(c=s.Date.toDate(i(o.reference||o.parent,l))))return this.createError("date.ref",{ref:i.key},o,l);c=c.getTime()}else c=i.getTime();return t(a.getTime(),c)?a:this.createError("date."+e,{limit:new Date(c)},o,l)}))}},s.Date.prototype.min=s.compare("min",(function(e,t){return e>=t})),s.Date.prototype.max=s.compare("max",(function(e,t){return e<=t})),s.Date.prototype.greater=s.compare("greater",(function(e,t){return e>t})),s.Date.prototype.less=s.compare("less",(function(e,t){return e<t})),e.exports=new s.Date},function(e,t,i){"use strict";function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var i=Object.getOwnPropertyNames(t),n=0;n<i.length;n++){var r=i[n],a=Object.getOwnPropertyDescriptor(t,r);a&&a.configurable&&void 0===e[r]&&Object.defineProperty(e,r,a)}}(e,t))}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(0),o=i(31),s=i(2),l=i(6),c=i(4),d={};d.Object=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return i._type="object",i._inner.children=null,i._inner.renames=[],i._inner.dependencies=[],i._inner.patterns=[],i}return n(t,e),t.prototype._init=function(){return arguments.length?this.keys.apply(this,arguments):this},t.prototype._base=function(e,t,i){var n=e,o=[],s=function(){return{value:n,errors:o.length?o:null}};"string"==typeof e&&i.convert&&(e=d.safeParse(e));var c=this._flags.func?"function":"object";if(!e||(void 0===e?"undefined":r(e))!==c||Array.isArray(e))return o.push(this.createError(c+".base",null,t,i)),s();if(!(this._inner.renames.length||this._inner.dependencies.length||this._inner.children||this._inner.patterns.length))return n=e,s();if(n===e){"object"===c?n=Object.create(Object.getPrototypeOf(e)):(n=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return e.apply(this,i)}).prototype=a.clone(e.prototype);for(var h=Object.keys(e),u=0;u<h.length;++u)n[h[u]]=e[h[u]]}else n=e;for(var p={},f=0;f<this._inner.renames.length;++f){var g=this._inner.renames[f];if(g.isRegExp){for(var m=Object.keys(n),v=[],_=0;_<m.length;++_)g.from.test(m[_])&&v.push(m[_]);var b=v.every((function(e){return void 0===n[e]}));if(g.options.ignoreUndefined&&b)continue;if(!g.options.multiple&&p[g.to]&&(o.push(this.createError("object.rename.regex.multiple",{from:v,to:g.to},t,i)),i.abortEarly))return s();if(Object.prototype.hasOwnProperty.call(n,g.to)&&!g.options.override&&!p[g.to]&&(o.push(this.createError("object.rename.regex.override",{from:v,to:g.to},t,i)),i.abortEarly))return s();if(b?delete n[g.to]:n[g.to]=n[v[v.length-1]],p[g.to]=!0,!g.options.alias)for(var w=0;w<v.length;++w)delete n[v[w]]}else{if(g.options.ignoreUndefined&&void 0===n[g.from])continue;if(!g.options.multiple&&p[g.to]&&(o.push(this.createError("object.rename.multiple",{from:g.from,to:g.to},t,i)),i.abortEarly))return s();if(Object.prototype.hasOwnProperty.call(n,g.to)&&!g.options.override&&!p[g.to]&&(o.push(this.createError("object.rename.override",{from:g.from,to:g.to},t,i)),i.abortEarly))return s();void 0===n[g.from]?delete n[g.to]:n[g.to]=n[g.from],p[g.to]=!0,g.options.alias||delete n[g.from]}}if(!this._inner.children&&!this._inner.patterns.length&&!this._inner.dependencies.length)return s();var y=new Set(Object.keys(n));if(this._inner.children){for(var x=[],C=0;C<this._inner.children.length;++C){var S=this._inner.children[C],T=S.key,k=n[T];y.delete(T);var A={key:T,path:t.path.concat(T),parent:n,reference:t.reference},P=S.schema._validate(k,A,i);if(P.errors){if(o.push(this.createError("object.child",{key:T,child:S.schema._getLabel(T),reason:P.errors},A,i)),i.abortEarly)return s()}else S.schema._flags.strip||void 0===P.value&&P.value!==k?(x.push(T),n[T]=P.finalValue):void 0!==P.value&&(n[T]=P.value)}for(var D=0;D<x.length;++D)delete n[x[D]]}if(y.size&&this._inner.patterns.length){var E=!0,M=!1,O=void 0;try{for(var I,N=y[Symbol.iterator]();!(E=(I=N.next()).done);E=!0)for(var L=I.value,R={key:L,path:t.path.concat(L),parent:n,reference:t.reference},j=n[L],$=0;$<this._inner.patterns.length;++$){var B=this._inner.patterns[$];if(B.regex?B.regex.test(L):!B.schema.validate(L).error){y.delete(L);var V=B.rule._validate(j,R,i);if(V.errors&&(o.push(this.createError("object.child",{key:L,child:B.rule._getLabel(L),reason:V.errors},R,i)),i.abortEarly))return s();n[L]=V.value}}}catch(ie){M=!0,O=ie}finally{try{!E&&N.return&&N.return()}finally{if(M)throw O}}}if(y.size&&(this._inner.children||this._inner.patterns.length)){if(i.stripUnknown&&!0!==this._flags.allowUnknown||i.skipFunctions){var H=!!i.stripUnknown&&(!0===i.stripUnknown||!!i.stripUnknown.objects),F=!0,z=!1,U=void 0;try{for(var W,G=y[Symbol.iterator]();!(F=(W=G.next()).done);F=!0){var q=W.value;H?(delete n[q],y.delete(q)):"function"==typeof n[q]&&y.delete(q)}}catch(ie){z=!0,U=ie}finally{try{!F&&G.return&&G.return()}finally{if(z)throw U}}}if(void 0!==this._flags.allowUnknown?!this._flags.allowUnknown:!i.allowUnknown){var Y=!0,Q=!1,J=void 0;try{for(var Z,X=y[Symbol.iterator]();!(Y=(Z=X.next()).done);Y=!0){var K=Z.value;o.push(this.createError("object.allowUnknown",{child:K},{key:K,path:t.path.concat(K)},i,{}))}}catch(ie){Q=!0,J=ie}finally{try{!Y&&X.return&&X.return()}finally{if(Q)throw J}}}}for(var ee=0;ee<this._inner.dependencies.length;++ee){var te=this._inner.dependencies[ee],ie=d[te.type].call(this,null!==te.key&&n[te.key],te.peers,n,{key:te.key,path:null===te.key?t.path:t.path.concat(te.key)},i);if(ie instanceof l.Err&&(o.push(ie),i.abortEarly))return s()}return s()},t.prototype.keys=function(e){a.assert(null===e||void 0===e||"object"===(void 0===e?"undefined":r(e)),"Object schema must be a valid object"),a.assert(!(e&&e instanceof s),"Object schema cannot be a joi schema");var t=this.clone();if(!e)return t._inner.children=null,t;var i=Object.keys(e);if(!i.length)return t._inner.children=[],t;var n=new o;if(t._inner.children)for(var l=0;l<t._inner.children.length;++l){var d=t._inner.children[l];i.includes(d.key)||n.add(d,{after:d._refs,group:d.key})}for(var h=0;h<i.length;++h){var u=i[h],p=e[u];try{var f=c.schema(this._currentJoi,p);n.add({key:u,schema:f},{after:f._refs,group:u})}catch(e){throw e.hasOwnProperty("path")?e.path=u+"."+e.path:e.path=u,e}}return t._inner.children=n.nodes,t},t.prototype.append=function(e){return null===e||void 0===e||0===Object.keys(e).length?this:this.keys(e)},t.prototype.unknown=function(e){var t=!1!==e;if(this._flags.allowUnknown===t)return this;var i=this.clone();return i._flags.allowUnknown=t,i},t.prototype.length=function(e){return a.assert(Number.isSafeInteger(e)&&e>=0,"limit must be a positive integer"),this._test("length",e,(function(t,i,n){return Object.keys(t).length===e?t:this.createError("object.length",{limit:e},i,n)}))},t.prototype.min=function(e){return a.assert(Number.isSafeInteger(e)&&e>=0,"limit must be a positive integer"),this._test("min",e,(function(t,i,n){return Object.keys(t).length>=e?t:this.createError("object.min",{limit:e},i,n)}))},t.prototype.max=function(e){return a.assert(Number.isSafeInteger(e)&&e>=0,"limit must be a positive integer"),this._test("max",e,(function(t,i,n){return Object.keys(t).length<=e?t:this.createError("object.max",{limit:e},i,n)}))},t.prototype.pattern=function(e,t){var i=e instanceof RegExp;a.assert(i||e instanceof s,"pattern must be a regex or schema"),a.assert(void 0!==t,"Invalid rule"),i&&(e=new RegExp(e.source,e.ignoreCase?"i":void 0));try{t=c.schema(this._currentJoi,t)}catch(e){throw e.hasOwnProperty("path")&&(e.message=e.message+"("+e.path+")"),e}var n=this.clone();return i?n._inner.patterns.push({regex:e,rule:t}):n._inner.patterns.push({schema:e,rule:t}),n},t.prototype.schema=function(){return this._test("schema",null,(function(e,t,i){return e instanceof s?e:this.createError("object.schema",null,t,i)}))},t.prototype.with=function(e,t){return a.assert(2===arguments.length,"Invalid number of arguments, expected 2."),this._dependency("with",e,t)},t.prototype.without=function(e,t){return a.assert(2===arguments.length,"Invalid number of arguments, expected 2."),this._dependency("without",e,t)},t.prototype.xor=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t=a.flatten(t),this._dependency("xor",null,t)},t.prototype.or=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t=a.flatten(t),this._dependency("or",null,t)},t.prototype.and=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t=a.flatten(t),this._dependency("and",null,t)},t.prototype.nand=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t=a.flatten(t),this._dependency("nand",null,t)},t.prototype.requiredKeys=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t=a.flatten(t),this.applyFunctionToChildren(t,"required")},t.prototype.optionalKeys=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t=a.flatten(t),this.applyFunctionToChildren(t,"optional")},t.prototype.forbiddenKeys=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t=a.flatten(t),this.applyFunctionToChildren(t,"forbidden")},t.prototype.rename=function(e,t,i){a.assert("string"==typeof e||e instanceof RegExp,"Rename missing the from argument"),a.assert("string"==typeof t,"Rename missing the to argument"),a.assert(t!==e,"Cannot rename key to same name:",e);for(var n=0;n<this._inner.renames.length;++n)a.assert(this._inner.renames[n].from!==e,"Cannot rename the same key multiple times");var r=this.clone();return r._inner.renames.push({from:e,to:t,options:a.applyToDefaults(d.renameDefaults,i||{}),isRegExp:e instanceof RegExp}),r},t.prototype.applyFunctionToChildren=function(e,t,i,n){e=[].concat(e),a.assert(e.length>0,"expected at least one children");var r=d.groupChildren(e),o=void 0;if(""in r?(o=this[t].apply(this,i),delete r[""]):o=this.clone(),o._inner.children){n=n?n+".":"";for(var s=0;s<o._inner.children.length;++s){var l=o._inner.children[s],c=r[l.key];c&&(o._inner.children[s]={key:l.key,_refs:l._refs,schema:l.schema.applyFunctionToChildren(c,t,i,n+l.key)},delete r[l.key])}}var h=Object.keys(r);return a.assert(0===h.length,"unknown key(s)",h.join(", ")),o},t.prototype._dependency=function(e,t,i){i=[].concat(i);for(var n=0;n<i.length;++n)a.assert("string"==typeof i[n],e,"peers must be a string or array of strings");var r=this.clone();return r._inner.dependencies.push({type:e,key:t,peers:i}),r},t.prototype.describe=function(e){var t=s.prototype.describe.call(this);if(t.rules)for(var i=0;i<t.rules.length;++i){var n=t.rules[i];n.arg&&"object"===r(n.arg)&&n.arg.schema&&n.arg.ref&&(n.arg={schema:n.arg.schema.describe(),ref:n.arg.ref.toString()})}if(this._inner.children&&!e){t.children={};for(var o=0;o<this._inner.children.length;++o){var l=this._inner.children[o];t.children[l.key]=l.schema.describe()}}if(this._inner.dependencies.length&&(t.dependencies=a.clone(this._inner.dependencies)),this._inner.patterns.length){t.patterns=[];for(var c=0;c<this._inner.patterns.length;++c){var d=this._inner.patterns[c];d.regex?t.patterns.push({regex:d.regex.toString(),rule:d.rule.describe()}):t.patterns.push({schema:d.schema.describe(),rule:d.rule.describe()})}}return this._inner.renames.length>0&&(t.renames=a.clone(this._inner.renames)),t},t.prototype.assert=function(e,t,i){e=c.ref(e),a.assert(e.isContext||e.depth>1,"Cannot use assertions for root level references - use direct key rules instead"),i=i||"pass the assertion test";try{t=c.schema(this._currentJoi,t)}catch(e){throw e.hasOwnProperty("path")&&(e.message=e.message+"("+e.path+")"),e}var n=e.path[e.path.length-1],r=e.path.join(".");return this._test("assert",{schema:t,ref:e},(function(o,s,l){if(!t._validate(e(o),null,l,o).errors)return o;var c=a.merge({},s);return c.key=n,c.path=e.path,this.createError("object.assert",{ref:r,message:i},c,l)}))},t.prototype.type=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.name;a.assert("function"==typeof e,"type must be a constructor function");var i={name:t,ctor:e};return this._test("type",i,(function(t,n,r){return t instanceof e?t:this.createError("object.type",{type:i.name},n,r)}))},t}(s),d.safeParse=function(e){try{return JSON.parse(e)}catch(e){}return e},d.renameDefaults={alias:!1,multiple:!1,override:!1},d.groupChildren=function(e){e.sort();for(var t={},i=0;i<e.length;++i){var n=e[i];a.assert("string"==typeof n,"children must be strings");var r=n.split(".")[0];(t[r]=t[r]||[]).push(n.substring(r.length+1))}return t},d.keysToLabels=function(e,t){var i=e._inner.children;if(!i)return t;var n=function(e){var t=i.find((function(t){return t.key===e}));return t?t.schema._getLabel(e):e};return Array.isArray(t)?t.map(n):n(t)},d.with=function(e,t,i,n,r){if(void 0===e)return e;for(var a=0;a<t.length;++a){var o=t[a];if(!Object.prototype.hasOwnProperty.call(i,o)||void 0===i[o])return this.createError("object.with",{main:n.key,mainWithLabel:d.keysToLabels(this,n.key),peer:o,peerWithLabel:d.keysToLabels(this,o)},n,r)}return e},d.without=function(e,t,i,n,r){if(void 0===e)return e;for(var a=0;a<t.length;++a){var o=t[a];if(Object.prototype.hasOwnProperty.call(i,o)&&void 0!==i[o])return this.createError("object.without",{main:n.key,mainWithLabel:d.keysToLabels(this,n.key),peer:o,peerWithLabel:d.keysToLabels(this,o)},n,r)}return e},d.xor=function(e,t,i,n,r){for(var a=[],o=0;o<t.length;++o){var s=t[o];Object.prototype.hasOwnProperty.call(i,s)&&void 0!==i[s]&&a.push(s)}if(1===a.length)return e;var l={peers:t,peersWithLabels:d.keysToLabels(this,t)};return 0===a.length?this.createError("object.missing",l,n,r):this.createError("object.xor",l,n,r)},d.or=function(e,t,i,n,r){for(var a=0;a<t.length;++a){var o=t[a];if(Object.prototype.hasOwnProperty.call(i,o)&&void 0!==i[o])return e}return this.createError("object.missing",{peers:t,peersWithLabels:d.keysToLabels(this,t)},n,r)},d.and=function(e,t,i,n,r){for(var a=[],o=[],s=t.length,l=0;l<s;++l){var c=t[l];Object.prototype.hasOwnProperty.call(i,c)&&void 0!==i[c]?o.push(c):a.push(c)}if(a.length!==s&&o.length!==s)return this.createError("object.and",{present:o,presentWithLabels:d.keysToLabels(this,o),missing:a,missingWithLabels:d.keysToLabels(this,a)},n,r)},d.nand=function(e,t,i,n,r){for(var o=[],s=0;s<t.length;++s){var l=t[s];Object.prototype.hasOwnProperty.call(i,l)&&void 0!==i[l]&&o.push(l)}var c=a.clone(t),h=c.splice(0,1)[0];return o.length===t.length?this.createError("object.nand",{main:h,mainWithLabel:d.keysToLabels(this,h),peers:c,peersWithLabels:d.keysToLabels(this,c)},n,r):null},e.exports=new d.Object},function(e,t,i){"use strict";var n={rfc3986:{},generate:function(){var e="|";n.rfc3986.ipv4Cidr="[0-9]|[1-2][0-9]|3[0-2]",n.rfc3986.ipv6Cidr="(?:0?0?[0-9]|0?[1-9][0-9]|1[01][0-9]|12[0-8])";var t="a-zA-Z0-9-\\._~",i="!\\$&'\\(\\)\\*\\+,;=",r=t+"%0-9A-Fa-f"+i+":@",a="(?:0?0?[0-9]|0?[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])";n.rfc3986.IPv4address="(?:"+a+"\\.){3}"+a;var o="[0-9A-Fa-f]{1,4}",s="(?:"+o+":"+o+"|"+n.rfc3986.IPv4address+")",l="(?:"+o+":){6}"+s,c="::(?:"+o+":){5}"+s,d="(?:"+o+")?::(?:"+o+":){4}"+s,h="(?:(?:"+o+":){0,1}"+o+")?::(?:"+o+":){3}"+s,u="(?:(?:"+o+":){0,2}"+o+")?::(?:"+o+":){2}"+s,p="(?:(?:"+o+":){0,3}"+o+")?::"+o+":"+s,f="(?:(?:"+o+":){0,4}"+o+")?::"+s;n.rfc3986.IPv6address="(?:"+l+e+c+e+d+e+h+e+u+e+p+e+f+"|(?:(?:[0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})?::)",n.rfc3986.IPvFuture="v[0-9A-Fa-f]+\\.["+t+i+":]+",n.rfc3986.scheme="[a-zA-Z][a-zA-Z0-9+-\\.]*";var g="(?:[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:]*@)?(?:\\[(?:"+n.rfc3986.IPv6address+e+n.rfc3986.IPvFuture+")\\]"+e+n.rfc3986.IPv4address+"|[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=]{0,255})(?::[0-9]*)?",m="(?:\\/[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]*)*",v="\\/(?:[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]+"+m+")?";n.rfc3986.hierPart="(?:(?:\\/\\/"+g+m+")"+e+v+"|[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]+(?:\\/[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]*)*)",n.rfc3986.relativeRef="(?:(?:\\/\\/"+g+m+")"+e+v+"|[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=@]+(?:\\/[a-zA-Z0-9-\\._~%0-9A-Fa-f!\\$&'\\(\\)\\*\\+,;=:@]*)*|)",n.rfc3986.query="["+r+"\\/\\?]*(?=#|$)",n.rfc3986.fragment="["+r+"\\/\\?]*"}};n.generate(),e.exports=n.rfc3986},function(e,t){},function(e,t,i){(function(e,n){function r(e,i){var n={seen:[],stylize:o};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),u(i)?n.showHidden=i:i&&t._extend(n,i),m(n.showHidden)&&(n.showHidden=!1),m(n.depth)&&(n.depth=2),m(n.colors)&&(n.colors=!1),m(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=a),s(n,e,n.depth)}function a(e,t){var i=r.styles[t];return i?"\x1b["+r.colors[i][0]+"m"+e+"\x1b["+r.colors[i][1]+"m":e}function o(e,t){return e}function s(e,i,n){if(e.customInspect&&i&&y(i.inspect)&&i.inspect!==t.inspect&&(!i.constructor||i.constructor.prototype!==i)){var r=i.inspect(n,e);return g(r)||(r=s(e,r,n)),r}var a=l(e,i);if(a)return a;var o=Object.keys(i),u=function(e){var t={};return e.forEach((function(e,i){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(i)),w(i)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return c(i);if(0===o.length){if(y(i)){var p=i.name?": "+i.name:"";return e.stylize("[Function"+p+"]","special")}if(v(i))return e.stylize(RegExp.prototype.toString.call(i),"regexp");if(b(i))return e.stylize(Date.prototype.toString.call(i),"date");if(w(i))return c(i)}var f,m="",_=!1,x=["{","}"];return h(i)&&(_=!0,x=["[","]"]),y(i)&&(m=" [Function"+(i.name?": "+i.name:"")+"]"),v(i)&&(m=" "+RegExp.prototype.toString.call(i)),b(i)&&(m=" "+Date.prototype.toUTCString.call(i)),w(i)&&(m=" "+c(i)),0!==o.length||_&&0!=i.length?n<0?v(i)?e.stylize(RegExp.prototype.toString.call(i),"regexp"):e.stylize("[Object]","special"):(e.seen.push(i),f=_?function(e,t,i,n,r){for(var a=[],o=0,s=t.length;o<s;++o)T(t,String(o))?a.push(d(e,t,i,n,String(o),!0)):a.push("");return r.forEach((function(r){r.match(/^\d+$/)||a.push(d(e,t,i,n,r,!0))})),a}(e,i,n,u,o):o.map((function(t){return d(e,i,n,u,t,_)})),e.seen.pop(),function(e,t,i){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?i[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+i[1]:i[0]+t+" "+e.join(", ")+" "+i[1]}(f,m,x)):x[0]+m+x[1]}function l(e,t){if(m(t))return e.stylize("undefined","undefined");if(g(t)){var i="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(i,"string")}return f(t)?e.stylize(""+t,"number"):u(t)?e.stylize(""+t,"boolean"):p(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,i,n,r,a){var o,l,c;if((c=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]}).get?l=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(l=e.stylize("[Setter]","special")),T(n,r)||(o="["+r+"]"),l||(e.seen.indexOf(c.value)<0?(l=p(i)?s(e,c.value,null):s(e,c.value,i-1)).indexOf("\n")>-1&&(l=a?l.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+l.split("\n").map((function(e){return"   "+e})).join("\n")):l=e.stylize("[Circular]","special")),m(o)){if(a&&r.match(/^\d+$/))return l;(o=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+l}function h(e){return Array.isArray(e)}function u(e){return"boolean"==typeof e}function p(e){return null===e}function f(e){return"number"==typeof e}function g(e){return"string"==typeof e}function m(e){return void 0===e}function v(e){return _(e)&&"[object RegExp]"===x(e)}function _(e){return"object"==typeof e&&null!==e}function b(e){return _(e)&&"[object Date]"===x(e)}function w(e){return _(e)&&("[object Error]"===x(e)||e instanceof Error)}function y(e){return"function"==typeof e}function x(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}function S(){var e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":");return[e.getDate(),D[e.getMonth()],t].join(" ")}function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var k=/%[sdj%]/g;t.format=function(e){if(!g(e)){for(var t=[],i=0;i<arguments.length;i++)t.push(r(arguments[i]));return t.join(" ")}i=1;for(var n=arguments,a=n.length,o=String(e).replace(k,(function(e){if("%%"===e)return"%";if(i>=a)return e;switch(e){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(e){return"[Circular]"}default:return e}})),s=n[i];i<a;s=n[++i])p(s)||!_(s)?o+=" "+s:o+=" "+r(s);return o},t.deprecate=function(i,r){if(m(e.process))return function(){return t.deprecate(i,r).apply(this,arguments)};if(!0===n.noDeprecation)return i;var a=!1;return function(){if(!a){if(n.throwDeprecation)throw new Error(r);n.traceDeprecation?console.trace(r):console.error(r),a=!0}return i.apply(this,arguments)}};var A,P={};t.debuglog=function(e){if(m(A)&&(A=n.env.NODE_DEBUG||""),e=e.toUpperCase(),!P[e])if(new RegExp("\\b"+e+"\\b","i").test(A)){var i=n.pid;P[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,i,n)}}else P[e]=function(){};return P[e]},t.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=u,t.isNull=p,t.isNullOrUndefined=function(e){return null==e},t.isNumber=f,t.isString=g,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=m,t.isRegExp=v,t.isObject=_,t.isDate=b,t.isError=w,t.isFunction=y,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=i(40);var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",S(),t.format.apply(t,arguments))},t.inherits=i(39),t._extend=function(e,t){if(!t||!_(t))return e;for(var i=Object.keys(t),n=i.length;n--;)e[i[n]]=t[i[n]];return e}}).call(t,i(5),i(7))},function(e,t,i){"use strict";(function(t){function n(e,t){if(e===t)return 0;for(var i=e.length,n=t.length,r=0,a=Math.min(i,n);r<a;++r)if(e[r]!==t[r]){i=e[r],n=t[r];break}return i<n?-1:n<i?1:0}function r(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}function a(e){return Object.prototype.toString.call(e)}function o(e){return!r(e)&&"function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer)))}function s(e){if(m.isFunction(e)){if(b)return e.name;var t=e.toString().match(y);return t&&t[1]}}function l(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function c(e){if(b||!m.isFunction(e))return m.inspect(e);var t=s(e);return"[Function"+(t?": "+t:"")+"]"}function d(e,t,i,n,r){throw new w.AssertionError({message:i,actual:e,expected:t,operator:n,stackStartFunction:r})}function h(e,t){e||d(e,!0,t,"==",w.ok)}function u(e,t,i,s){if(e===t)return!0;if(r(e)&&r(t))return 0===n(e,t);if(m.isDate(e)&&m.isDate(t))return e.getTime()===t.getTime();if(m.isRegExp(e)&&m.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(o(e)&&o(t)&&a(e)===a(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===n(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(r(e)!==r(t))return!1;var l=(s=s||{actual:[],expected:[]}).actual.indexOf(e);return-1!==l&&l===s.expected.indexOf(t)||(s.actual.push(e),s.expected.push(t),function(e,t,i,n){if(null===e||void 0===e||null===t||void 0===t)return!1;if(m.isPrimitive(e)||m.isPrimitive(t))return e===t;if(i&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var r=p(e),a=p(t);if(r&&!a||!r&&a)return!1;if(r)return e=_.call(e),t=_.call(t),u(e,t,i);var o,s,l=x(e),c=x(t);if(l.length!==c.length)return!1;for(l.sort(),c.sort(),s=l.length-1;s>=0;s--)if(l[s]!==c[s])return!1;for(s=l.length-1;s>=0;s--)if(o=l[s],!u(e[o],t[o],i,n))return!1;return!0}(e,t,i,s))}return i?e===t:e==t}function p(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function f(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function g(e,t,i,n){var r;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof i&&(n=i,i=null),r=function(e){var t;try{e()}catch(e){t=e}return t}(t),n=(i&&i.name?" ("+i.name+").":".")+(n?" "+n:"."),e&&!r&&d(r,i,"Missing expected exception"+n);var a="string"==typeof n,o=!e&&r&&!i;if((!e&&m.isError(r)&&a&&f(r,i)||o)&&d(r,i,"Got unwanted exception"+n),e&&r&&i&&!f(r,i)||!e&&r)throw r}var m=i(16),v=Object.prototype.hasOwnProperty,_=Array.prototype.slice,b="foo"===function(){}.name,w=e.exports=h,y=/\s*function\s+([^\(\s]*)\s*/;w.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return l(c(e.actual),128)+" "+e.operator+" "+l(c(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||d;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var i=new Error;if(i.stack){var n=i.stack,r=s(t),a=n.indexOf("\n"+r);if(a>=0){var o=n.indexOf("\n",a+1);n=n.substring(o+1)}this.stack=n}}},m.inherits(w.AssertionError,Error),w.fail=d,w.ok=h,w.equal=function(e,t,i){e!=t&&d(e,t,i,"==",w.equal)},w.notEqual=function(e,t,i){e==t&&d(e,t,i,"!=",w.notEqual)},w.deepEqual=function(e,t,i){u(e,t,!1)||d(e,t,i,"deepEqual",w.deepEqual)},w.deepStrictEqual=function(e,t,i){u(e,t,!0)||d(e,t,i,"deepStrictEqual",w.deepStrictEqual)},w.notDeepEqual=function(e,t,i){u(e,t,!1)&&d(e,t,i,"notDeepEqual",w.notDeepEqual)},w.notDeepStrictEqual=function e(t,i,n){u(t,i,!0)&&d(t,i,n,"notDeepStrictEqual",e)},w.strictEqual=function(e,t,i){e!==t&&d(e,t,i,"===",w.strictEqual)},w.notStrictEqual=function(e,t,i){e===t&&d(e,t,i,"!==",w.notStrictEqual)},w.throws=function(e,t,i){g(!0,e,t,i)},w.doesNotThrow=function(e,t,i){g(!1,e,t,i)},w.ifError=function(e){if(e)throw e};var x=Object.keys||function(e){var t=[];for(var i in e)v.call(e,i)&&t.push(i);return t}}).call(t,i(5))},function(e,t,i){"use strict";(function(e){var i={};t.escapeJavaScript=function(e){if(!e)return"";for(var t="",n=0;n<e.length;++n){var r=e.charCodeAt(n);i.isSafe(r)?t+=e[n]:t+=i.escapeJavaScriptChar(r)}return t},t.escapeHtml=function(e){if(!e)return"";for(var t="",n=0;n<e.length;++n){var r=e.charCodeAt(n);i.isSafe(r)?t+=e[n]:t+=i.escapeHtmlChar(r)}return t},t.escapeJson=function(e){if(!e)return"";var t=void 0;return e.replace(/[<>&\u2028\u2029]/g,(function(e){return 60===(t=e.charCodeAt(0))?"\\u003c":62===t?"\\u003e":38===t?"\\u0026":8232===t?"\\u2028":"\\u2029"}))},i.escapeJavaScriptChar=function(t){if(t>=256)return"\\u"+i.padLeft(""+t,4);var n=e.from(String.fromCharCode(t),"ascii").toString("hex");return"\\x"+i.padLeft(n,2)},i.escapeHtmlChar=function(t){var n=i.namedHtml[t];if(void 0!==n)return n;if(t>=256)return"&#"+t+";";var r=e.from(String.fromCharCode(t),"ascii").toString("hex");return"&#x"+i.padLeft(r,2)+";"},i.padLeft=function(e,t){for(;e.length<t;)e="0"+e;return e},i.isSafe=function(e){return void 0!==i.safeCharCodes[e]},i.namedHtml={38:"&amp;",60:"&lt;",62:"&gt;",34:"&quot;",160:"&nbsp;",162:"&cent;",163:"&pound;",164:"&curren;",169:"&copy;",174:"&reg;"},i.safeCharCodes=function(){for(var e={},t=32;t<123;++t)(t>=97||t>=65&&t<=90||t>=48&&t<=57||32===t||46===t||44===t||45===t||58===t||95===t)&&(e[t]=null);return e}()}).call(t,i(3).Buffer)},function(e,t,i){"use strict";(function(e){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=i(38),a={hasOwn:Object.prototype.hasOwnProperty,indexOf:Array.prototype.indexOf,defaultThreshold:16,maxIPv6Groups:8,categories:{valid:1,dnsWarn:7,rfc5321:15,cfws:31,deprecated:63,rfc5322:127,error:255},diagnoses:{valid:0,rfc5321TLD:9,rfc5321TLDNumeric:10,rfc5321QuotedString:11,rfc5321AddressLiteral:12,cfwsComment:17,cfwsFWS:18,undesiredNonAscii:25,deprecatedLocalPart:33,deprecatedFWS:34,deprecatedQTEXT:35,deprecatedQP:36,deprecatedComment:37,deprecatedCTEXT:38,deprecatedIPv6:39,deprecatedCFWSNearAt:49,rfc5322Domain:65,rfc5322TooLong:66,rfc5322LocalTooLong:67,rfc5322DomainTooLong:68,rfc5322LabelTooLong:69,rfc5322DomainLiteral:70,rfc5322DomainLiteralOBSDText:71,rfc5322IPv6GroupCount:72,rfc5322IPv62x2xColon:73,rfc5322IPv6BadCharacter:74,rfc5322IPv6MaxGroups:75,rfc5322IPv6ColonStart:76,rfc5322IPv6ColonEnd:77,errExpectingDTEXT:129,errNoLocalPart:130,errNoDomain:131,errConsecutiveDots:132,errATEXTAfterCFWS:133,errATEXTAfterQS:134,errATEXTAfterDomainLiteral:135,errExpectingQPair:136,errExpectingATEXT:137,errExpectingQTEXT:138,errExpectingCTEXT:139,errBackslashEnd:140,errDotStart:141,errDotEnd:142,errDomainHyphenStart:143,errDomainHyphenEnd:144,errUnclosedQuotedString:145,errUnclosedComment:146,errUnclosedDomainLiteral:147,errFWSCRLFx2:148,errFWSCRLFEnd:149,errCRNoLF:150,errUnknownTLD:160,errDomainTooShort:161},components:{localpart:0,domain:1,literal:2,contextComment:3,contextFWS:4,contextQuotedString:5,contextQuotedPair:6}};a.specials=function(){var e='()<>[]:;@\\,."',t=new Array(256);t.fill(!1);for(var i=0;i<e.length;++i)t[e.codePointAt(i)]=!0;return function(e){return t[e]}}(),a.c0Controls=function(){var e=new Array(256);e.fill(!1);for(var t=0;t<33;++t)e[t]=!0;return function(t){return e[t]}}(),a.c1Controls=function(){var e=new Array(256);e.fill(!1);for(var t=127;t<160;++t)e[t]=!0;return function(t){return e[t]}}(),a.regex={ipV4:/\b(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipV6:/^[a-fA-F\d]{0,4}$/},a.normalizeSupportsNul="\0"==="\0".normalize("NFC"),a.nulNormalize=function(e){return e.split("\0").map((function(e){return e.normalize("NFC")})).join("\0")},a.normalize=function(e){return!a.normalizeSupportsNul&&e.indexOf("\0")>=0?a.nulNormalize(e):e.normalize("NFC")},a.checkIpV6=function(e){return e.every((function(e){return a.regex.ipV6.test(e)}))},a.validDomain=function(e,t){return t.tldBlacklist?Array.isArray(t.tldBlacklist)?-1===a.indexOf.call(t.tldBlacklist,e):!a.hasOwn.call(t.tldBlacklist,e):Array.isArray(t.tldWhitelist)?-1!==a.indexOf.call(t.tldWhitelist,e):a.hasOwn.call(t.tldWhitelist,e)},t.validate=a.validate=function(t,i,o){i=i||{},t=a.normalize(t),"function"==typeof i&&(o=i,i={}),"function"!=typeof o&&(o=null);var s=void 0,l=void 0;if("number"==typeof i.errorLevel?(s=!0,l=i.errorLevel):(s=!!i.errorLevel,l=a.diagnoses.valid),i.tldWhitelist)if("string"==typeof i.tldWhitelist)i.tldWhitelist=[i.tldWhitelist];else if("object"!==n(i.tldWhitelist))throw new TypeError("expected array or object tldWhitelist");if(i.tldBlacklist)if("string"==typeof i.tldBlacklist)i.tldBlacklist=[i.tldBlacklist];else if("object"!==n(i.tldBlacklist))throw new TypeError("expected array or object tldBlacklist");if(i.minDomainAtoms&&(i.minDomainAtoms!==(0|+i.minDomainAtoms)||i.minDomainAtoms<0))throw new TypeError("expected positive integer minDomainAtoms");var c=a.diagnoses.valid,d=function(e){e>c&&(c=e)};void 0!==i.allowUnicode&&!i.allowUnicode&&/[^\x00-\x7f]/.test(t)&&d(a.diagnoses.undesiredNonAscii);for(var h={now:a.components.localpart,prev:a.components.localpart,stack:[a.components.localpart]},u="",p={local:"",domain:""},f={locals:[""],domains:[""]},g=0,m=0,v=0,_=void 0,b=!1,w=!1,y=t.length,x=void 0,C=0;C<y;C+=x.length){switch(x=String.fromCodePoint(t.codePointAt(C)),h.now){case a.components.localpart:switch(x){case"(":0===m?d(0===g?a.diagnoses.cfwsComment:a.diagnoses.deprecatedComment):(d(a.diagnoses.cfwsComment),w=!0),h.stack.push(h.now),h.now=a.components.contextComment;break;case".":0===m?d(0===g?a.diagnoses.errDotStart:a.diagnoses.errConsecutiveDots):(w&&d(a.diagnoses.deprecatedLocalPart),w=!1,m=0,++g,p.local+=x,f.locals[g]="");break;case'"':0===m?(d(0===g?a.diagnoses.rfc5321QuotedString:a.diagnoses.deprecatedLocalPart),p.local+=x,f.locals[g]+=x,m+=e.byteLength(x,"utf8"),w=!0,h.stack.push(h.now),h.now=a.components.contextQuotedString):d(a.diagnoses.errExpectingATEXT);break;case"\r":if(y===++C||"\n"!==t[C]){d(a.diagnoses.errCRNoLF);break}case" ":case"\t":0===m?d(0===g?a.diagnoses.cfwsFWS:a.diagnoses.deprecatedFWS):w=!0,h.stack.push(h.now),h.now=a.components.contextFWS,u=x;break;case"@":if(1!==h.stack.length)throw new Error("unexpected item on context stack");0===p.local.length?d(a.diagnoses.errNoLocalPart):0===m?d(a.diagnoses.errDotEnd):e.byteLength(p.local,"utf8")>64?d(a.diagnoses.rfc5322LocalTooLong):h.prev!==a.components.contextComment&&h.prev!==a.components.contextFWS||d(a.diagnoses.deprecatedCFWSNearAt),h.now=a.components.domain,h.stack[0]=a.components.domain,g=0,m=0,w=!1;break;default:if(w)switch(h.prev){case a.components.contextComment:case a.components.contextFWS:d(a.diagnoses.errATEXTAfterCFWS);break;case a.components.contextQuotedString:d(a.diagnoses.errATEXTAfterQS);break;default:throw new Error("more atext found where none is allowed, but unrecognized prev context: "+h.prev)}else h.prev=h.now,_=x.codePointAt(0),(a.specials(_)||a.c0Controls(_)||a.c1Controls(_))&&d(a.diagnoses.errExpectingATEXT),p.local+=x,f.locals[g]+=x,m+=e.byteLength(x,"utf8")}break;case a.components.domain:switch(x){case"(":0===m?d(0===g?a.diagnoses.deprecatedCFWSNearAt:a.diagnoses.deprecatedComment):(w=!0,d(a.diagnoses.cfwsComment)),h.stack.push(h.now),h.now=a.components.contextComment;break;case".":var S=r.encode(f.domains[g]).length;0===m?d(0===g?a.diagnoses.errDotStart:a.diagnoses.errConsecutiveDots):b?d(a.diagnoses.errDomainHyphenEnd):S>63&&d(a.diagnoses.rfc5322LabelTooLong),w=!1,m=0,++g,f.domains[g]="",p.domain+=x;break;case"[":0===p.domain.length?(w=!0,m+=e.byteLength(x,"utf8"),h.stack.push(h.now),h.now=a.components.literal,p.domain+=x,f.domains[g]+=x,p.literal=""):d(a.diagnoses.errExpectingATEXT);break;case"\r":if(y===++C||"\n"!==t[C]){d(a.diagnoses.errCRNoLF);break}case" ":case"\t":0===m?d(0===g?a.diagnoses.deprecatedCFWSNearAt:a.diagnoses.deprecatedFWS):(d(a.diagnoses.cfwsFWS),w=!0),h.stack.push(h.now),h.now=a.components.contextFWS,u=x;break;default:if(w)switch(h.prev){case a.components.contextComment:case a.components.contextFWS:d(a.diagnoses.errATEXTAfterCFWS);break;case a.components.literal:d(a.diagnoses.errATEXTAfterDomainLiteral);break;default:throw new Error("more atext found where none is allowed, but unrecognized prev context: "+h.prev)}_=x.codePointAt(0),b=!1,a.specials(_)||a.c0Controls(_)||a.c1Controls(_)?d(a.diagnoses.errExpectingATEXT):"-"===x?(0===m&&d(a.diagnoses.errDomainHyphenStart),b=!0):(_<48||_>122&&_<192||_>57&&_<65||_>90&&_<97)&&d(a.diagnoses.rfc5322Domain),p.domain+=x,f.domains[g]+=x,m+=e.byteLength(x,"utf8")}break;case a.components.literal:switch(x){case"]":if(c<a.categories.deprecated){var T=-1,k=p.literal,A=a.regex.ipV4.exec(k);if(A&&0!==(T=A.index)&&(k=k.slice(0,T)+"0:0"),0===T)d(a.diagnoses.rfc5321AddressLiteral);else if("ipv6:"!==k.slice(0,5).toLowerCase())d(a.diagnoses.rfc5322DomainLiteral);else{var P=k.slice(5),D=a.maxIPv6Groups,E=P.split(":");~(T=P.indexOf("::"))?T!==P.lastIndexOf("::")?d(a.diagnoses.rfc5322IPv62x2xColon):(0!==T&&T!==P.length-2||++D,E.length>D?d(a.diagnoses.rfc5322IPv6MaxGroups):E.length===D&&d(a.diagnoses.deprecatedIPv6)):E.length!==D&&d(a.diagnoses.rfc5322IPv6GroupCount),d(":"===P[0]&&":"!==P[1]?a.diagnoses.rfc5322IPv6ColonStart:":"===P[P.length-1]&&":"!==P[P.length-2]?a.diagnoses.rfc5322IPv6ColonEnd:a.checkIpV6(E)?a.diagnoses.rfc5321AddressLiteral:a.diagnoses.rfc5322IPv6BadCharacter)}}else d(a.diagnoses.rfc5322DomainLiteral);p.domain+=x,f.domains[g]+=x,m+=e.byteLength(x,"utf8"),h.prev=h.now,h.now=h.stack.pop();break;case"\\":d(a.diagnoses.rfc5322DomainLiteralOBSDText),h.stack.push(h.now),h.now=a.components.contextQuotedPair;break;case"\r":if(y===++C||"\n"!==t[C]){d(a.diagnoses.errCRNoLF);break}case" ":case"\t":d(a.diagnoses.cfwsFWS),h.stack.push(h.now),h.now=a.components.contextFWS,u=x;break;default:if(127!==(_=x.codePointAt(0))&&a.c1Controls(_)||0===_||"["===x){d(a.diagnoses.errExpectingDTEXT);break}(a.c0Controls(_)||127===_)&&d(a.diagnoses.rfc5322DomainLiteralOBSDText),p.literal+=x,p.domain+=x,f.domains[g]+=x,m+=e.byteLength(x,"utf8")}break;case a.components.contextQuotedString:switch(x){case"\\":h.stack.push(h.now),h.now=a.components.contextQuotedPair;break;case"\r":if(y===++C||"\n"!==t[C]){d(a.diagnoses.errCRNoLF);break}case"\t":p.local+=" ",f.locals[g]+=" ",m+=e.byteLength(x,"utf8"),d(a.diagnoses.cfwsFWS),h.stack.push(h.now),h.now=a.components.contextFWS,u=x;break;case'"':p.local+=x,f.locals[g]+=x,m+=e.byteLength(x,"utf8"),h.prev=h.now,h.now=h.stack.pop();break;default:127!==(_=x.codePointAt(0))&&a.c1Controls(_)||0===_||10===_?d(a.diagnoses.errExpectingQTEXT):(a.c0Controls(_)||127===_)&&d(a.diagnoses.deprecatedQTEXT),p.local+=x,f.locals[g]+=x,m+=e.byteLength(x,"utf8")}break;case a.components.contextQuotedPair:127!==(_=x.codePointAt(0))&&a.c1Controls(_)?d(a.diagnoses.errExpectingQPair):(_<31&&9!==_||127===_)&&d(a.diagnoses.deprecatedQP),h.prev=h.now,h.now=h.stack.pop();var M="\\"+x;switch(h.now){case a.components.contextComment:break;case a.components.contextQuotedString:p.local+=M,f.locals[g]+=M,m+=2;break;case a.components.literal:p.domain+=M,f.domains[g]+=M,m+=2;break;default:throw new Error("quoted pair logic invoked in an invalid context: "+h.now)}break;case a.components.contextComment:switch(x){case"(":h.stack.push(h.now),h.now=a.components.contextComment;break;case")":h.prev=h.now,h.now=h.stack.pop();break;case"\\":h.stack.push(h.now),h.now=a.components.contextQuotedPair;break;case"\r":if(y===++C||"\n"!==t[C]){d(a.diagnoses.errCRNoLF);break}case" ":case"\t":d(a.diagnoses.cfwsFWS),h.stack.push(h.now),h.now=a.components.contextFWS,u=x;break;default:if(0===(_=x.codePointAt(0))||10===_||127!==_&&a.c1Controls(_)){d(a.diagnoses.errExpectingCTEXT);break}(a.c0Controls(_)||127===_)&&d(a.diagnoses.deprecatedCTEXT)}break;case a.components.contextFWS:if("\r"===u){if("\r"===x){d(a.diagnoses.errFWSCRLFx2);break}++v>1?d(a.diagnoses.deprecatedFWS):v=1}switch(x){case"\r":y!==++C&&"\n"===t[C]||d(a.diagnoses.errCRNoLF);break;case" ":case"\t":break;default:"\r"===u&&d(a.diagnoses.errFWSCRLFEnd),v=0,h.prev=h.now,h.now=h.stack.pop(),--C}u=x;break;default:throw new Error("unknown context: "+h.now)}if(c>a.categories.rfc5322)break}if(c<a.categories.rfc5322){var O=r.encode(p.domain).length;if(h.now===a.components.contextQuotedString)d(a.diagnoses.errUnclosedQuotedString);else if(h.now===a.components.contextQuotedPair)d(a.diagnoses.errBackslashEnd);else if(h.now===a.components.contextComment)d(a.diagnoses.errUnclosedComment);else if(h.now===a.components.literal)d(a.diagnoses.errUnclosedDomainLiteral);else if("\r"===x)d(a.diagnoses.errFWSCRLFEnd);else if(0===p.domain.length)d(a.diagnoses.errNoDomain);else if(0===m)d(a.diagnoses.errDotEnd);else if(b)d(a.diagnoses.errDomainHyphenEnd);else if(O>255)d(a.diagnoses.rfc5322DomainTooLong);else if(e.byteLength(p.local,"utf8")+O+1>254)d(a.diagnoses.rfc5322TooLong);else if(m>63)d(a.diagnoses.rfc5322LabelTooLong);else if(i.minDomainAtoms&&f.domains.length<i.minDomainAtoms)d(a.diagnoses.errDomainTooShort);else if(i.tldWhitelist||i.tldBlacklist){var I=f.domains[g];a.validDomain(I,i)||d(a.diagnoses.errUnknownTLD)}}c<a.categories.dnsWarn&&f.domains[g].codePointAt(0)<=57&&d(a.diagnoses.rfc5321TLDNumeric),c<l&&(c=a.diagnoses.valid);var N=s?c:c<a.defaultThreshold;return o&&o(N),N},t.diagnoses=a.validate.diagnoses=function(){for(var e={},t=Object.keys(a.diagnoses),i=0;i<t.length;++i){var n=t[i];e[n]=a.diagnoses[n]}return e}(),t.normalize=a.normalize}).call(t,i(3).Buffer)},function(e,t,i){"use strict";t.errors={root:"value",key:'"{{!label}}" ',messages:{wrapArrays:!0},any:{unknown:"is not allowed",invalid:"contains an invalid value",empty:"is not allowed to be empty",required:"is required",allowOnly:"must be one of {{valids}}",default:"threw an error when running default method"},alternatives:{base:"not matching any of the allowed alternatives",child:null},array:{base:"must be an array",includes:"at position {{pos}} does not match any of the allowed types",includesSingle:'single value of "{{!label}}" does not match any of the allowed types',includesOne:"at position {{pos}} fails because {{reason}}",includesOneSingle:'single value of "{{!label}}" fails because {{reason}}',includesRequiredUnknowns:"does not contain {{unknownMisses}} required value(s)",includesRequiredKnowns:"does not contain {{knownMisses}}",includesRequiredBoth:"does not contain {{knownMisses}} and {{unknownMisses}} other required value(s)",excludes:"at position {{pos}} contains an excluded value",excludesSingle:'single value of "{{!label}}" contains an excluded value',min:"must contain at least {{limit}} items",max:"must contain less than or equal to {{limit}} items",length:"must contain {{limit}} items",ordered:"at position {{pos}} fails because {{reason}}",orderedLength:"at position {{pos}} fails because array must contain at most {{limit}} items",ref:'references "{{ref}}" which is not a positive integer',sparse:"must not be a sparse array",unique:"position {{pos}} contains a duplicate value"},boolean:{base:"must be a boolean"},binary:{base:"must be a buffer or a string",min:"must be at least {{limit}} bytes",max:"must be less than or equal to {{limit}} bytes",length:"must be {{limit}} bytes"},date:{base:"must be a number of milliseconds or valid date string",format:"must be a string with one of the following formats {{format}}",strict:"must be a valid date",min:'must be larger than or equal to "{{limit}}"',max:'must be less than or equal to "{{limit}}"',less:'must be less than "{{limit}}"',greater:'must be greater than "{{limit}}"',isoDate:"must be a valid ISO 8601 date",timestamp:{javascript:"must be a valid timestamp or number of milliseconds",unix:"must be a valid timestamp or number of seconds"},ref:'references "{{ref}}" which is not a date'},function:{base:"must be a Function",arity:"must have an arity of {{n}}",minArity:"must have an arity greater or equal to {{n}}",maxArity:"must have an arity lesser or equal to {{n}}",ref:"must be a Joi reference",class:"must be a class"},lazy:{base:"!!schema error: lazy schema must be set",schema:"!!schema error: lazy schema function must return a schema"},object:{base:"must be an object",child:'!!child "{{!child}}" fails because {{reason}}',min:"must have at least {{limit}} children",max:"must have less than or equal to {{limit}} children",length:"must have {{limit}} children",allowUnknown:'!!"{{!child}}" is not allowed',with:'!!"{{mainWithLabel}}" missing required peer "{{peerWithLabel}}"',without:'!!"{{mainWithLabel}}" conflict with forbidden peer "{{peerWithLabel}}"',missing:"must contain at least one of {{peersWithLabels}}",xor:"contains a conflict between exclusive peers {{peersWithLabels}}",or:"must contain at least one of {{peersWithLabels}}",and:"contains {{presentWithLabels}} without its required peers {{missingWithLabels}}",nand:'!!"{{mainWithLabel}}" must not exist simultaneously with {{peersWithLabels}}',assert:'!!"{{ref}}" validation failed because "{{ref}}" failed to {{message}}',rename:{multiple:'cannot rename child "{{from}}" because multiple renames are disabled and another key was already renamed to "{{to}}"',override:'cannot rename child "{{from}}" because override is disabled and target "{{to}}" exists',regex:{multiple:'cannot rename children {{from}} because multiple renames are disabled and another key was already renamed to "{{to}}"',override:'cannot rename children {{from}} because override is disabled and target "{{to}}" exists'}},type:'must be an instance of "{{type}}"',schema:"must be a Joi instance"},number:{base:"must be a number",min:"must be larger than or equal to {{limit}}",max:"must be less than or equal to {{limit}}",less:"must be less than {{limit}}",greater:"must be greater than {{limit}}",float:"must be a float or double",integer:"must be an integer",negative:"must be a negative number",positive:"must be a positive number",precision:"must have no more than {{limit}} decimal places",ref:'references "{{ref}}" which is not a number',multiple:"must be a multiple of {{multiple}}",port:"must be a valid port"},string:{base:"must be a string",min:"length must be at least {{limit}} characters long",max:"length must be less than or equal to {{limit}} characters long",length:"length must be {{limit}} characters long",alphanum:"must only contain alpha-numeric characters",token:"must only contain alpha-numeric and underscore characters",regex:{base:'with value "{{!value}}" fails to match the required pattern: {{pattern}}',name:'with value "{{!value}}" fails to match the {{name}} pattern',invert:{base:'with value "{{!value}}" matches the inverted pattern: {{pattern}}',name:'with value "{{!value}}" matches the inverted {{name}} pattern'}},email:"must be a valid email",uri:"must be a valid uri",uriRelativeOnly:"must be a valid relative uri",uriCustomScheme:"must be a valid uri with a scheme matching the {{scheme}} pattern",isoDate:"must be a valid ISO 8601 date",guid:"must be a valid GUID",hex:"must only contain hexadecimal characters",hexAlign:"hex decoded representation must be byte aligned",base64:"must be a valid base64 string",hostname:"must be a valid hostname",normalize:"must be unicode normalized in the {{form}} form",lowercase:"must only contain lowercase characters",uppercase:"must only contain uppercase characters",trim:"must not have leading or trailing whitespace",creditCard:"must be a credit card",ref:'references "{{ref}}" which is not a number',ip:"must be a valid ip address with a {{cidr}} CIDR",ipVersion:"must be a valid ip address of one of the following versions {{version}} with a {{cidr}} CIDR"}}},function(e,t,i){"use strict";var n=i(8);t.options=n.object({abortEarly:n.boolean(),convert:n.boolean(),allowUnknown:n.boolean(),skipFunctions:n.boolean(),stripUnknown:[n.boolean(),n.object({arrays:n.boolean(),objects:n.boolean()}).or("arrays","objects")],language:n.object(),presence:n.string().only("required","optional","forbidden","ignore"),raw:n.boolean(),context:n.object(),strip:n.boolean(),noDefaults:n.boolean(),escapeHtml:n.boolean()}).strict()},function(e,t,i){"use strict";function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var i=Object.getOwnPropertyNames(t),n=0;n<i.length;n++){var r=i[n],a=Object.getOwnPropertyDescriptor(t,r);a&&a.configurable&&void 0===e[r]&&Object.defineProperty(e,r,a)}}(e,t))}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(2),o=i(4),s=i(1),l=i(0),c={fastSplice:function(e,t){for(var i=t;i<e.length;)e[i++]=e[i];--e.length}};c.Array=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return i._type="array",i._inner.items=[],i._inner.ordereds=[],i._inner.inclusions=[],i._inner.exclusions=[],i._inner.requireds=[],i._flags.sparse=!1,i}return n(t,e),t.prototype._base=function(e,t,i){var n={value:e};"string"==typeof e&&i.convert&&c.safeParse(e,n);var r=Array.isArray(n.value),a=r;if(i.convert&&this._flags.single&&!r&&(n.value=[n.value],r=!0),!r)return n.errors=this.createError("array.base",null,t,i),n;if((this._inner.inclusions.length||this._inner.exclusions.length||this._inner.requireds.length||this._inner.ordereds.length||!this._flags.sparse)&&(a&&(n.value=n.value.slice(0)),n.errors=this._checkItems.call(this,n.value,a,t,i),n.errors&&a&&i.convert&&this._flags.single)){var o=n.errors;n.value=[n.value],n.errors=this._checkItems.call(this,n.value,a,t,i),n.errors&&(n.errors=o,n.value=n.value[0])}return n},t.prototype._checkItems=function(e,t,i,n){for(var r=[],a=void 0,o=this._inner.requireds.slice(),s=this._inner.ordereds.slice(),l=this._inner.inclusions.concat(o),d=e.length,h=0;h<d;++h){a=!1;var u=e[h],p=!1,f={key:t?h:i.key,path:t?i.path.concat(h):i.path,parent:i.parent,reference:i.reference},g=void 0;if(this._flags.sparse||void 0!==u){for(var m=0;m<this._inner.exclusions.length;++m)if(!(g=this._inner.exclusions[m]._validate(u,f,{})).errors){if(r.push(this.createError(t?"array.excludes":"array.excludesSingle",{pos:h,value:u},{key:i.key,path:f.path},n)),a=!0,n.abortEarly)return r;s.shift();break}if(!a){if(this._inner.ordereds.length){if(s.length>0){var v=s.shift();if((g=v._validate(u,f,n)).errors){if(r.push(this.createError("array.ordered",{pos:h,reason:g.errors,value:u},{key:i.key,path:f.path},n)),n.abortEarly)return r}else if(v._flags.strip)c.fastSplice(e,h),--h,--d;else{if(!this._flags.sparse&&void 0===g.value){if(r.push(this.createError("array.sparse",null,{key:i.key,path:f.path,pos:h},n)),n.abortEarly)return r;continue}e[h]=g.value}continue}if(!this._inner.items.length){if(r.push(this.createError("array.orderedLength",{pos:h,limit:this._inner.ordereds.length},{key:i.key,path:f.path},n)),n.abortEarly)return r;continue}}for(var _=[],b=o.length,w=0;w<b;++w)if(!(g=_[w]=o[w]._validate(u,f,n)).errors){if(e[h]=g.value,p=!0,c.fastSplice(o,w),--w,--b,!this._flags.sparse&&void 0===g.value&&(r.push(this.createError("array.sparse",null,{key:i.key,path:f.path,pos:h},n)),n.abortEarly))return r;break}if(!p){var y=!!n.stripUnknown&&(!0===n.stripUnknown||!!n.stripUnknown.arrays);b=l.length;for(var x=0;x<b;++x){var C=l[x],S=o.indexOf(C);if(-1!==S)g=_[S];else if(!(g=C._validate(u,f,n)).errors){C._flags.strip?(c.fastSplice(e,h),--h,--d):this._flags.sparse||void 0!==g.value?e[h]=g.value:(r.push(this.createError("array.sparse",null,{key:i.key,path:f.path,pos:h},n)),a=!0),p=!0;break}if(1===b){if(y){c.fastSplice(e,h),--h,--d,p=!0;break}if(r.push(this.createError(t?"array.includesOne":"array.includesOneSingle",{pos:h,reason:g.errors,value:u},{key:i.key,path:f.path},n)),a=!0,n.abortEarly)return r;break}}if(!a&&this._inner.inclusions.length&&!p){if(y){c.fastSplice(e,h),--h,--d;continue}if(r.push(this.createError(t?"array.includes":"array.includesSingle",{pos:h,value:u},{key:i.key,path:f.path},n)),n.abortEarly)return r}}}}else{if(r.push(this.createError("array.sparse",null,{key:i.key,path:f.path,pos:h},n)),n.abortEarly)return r;s.shift()}}return o.length&&this._fillMissedErrors.call(this,r,o,i,n),s.length&&this._fillOrderedErrors.call(this,r,s,i,n),r.length?r:null},t.prototype.describe=function(){var e=a.prototype.describe.call(this);if(this._inner.ordereds.length){e.orderedItems=[];for(var t=0;t<this._inner.ordereds.length;++t)e.orderedItems.push(this._inner.ordereds[t].describe())}if(this._inner.items.length){e.items=[];for(var i=0;i<this._inner.items.length;++i)e.items.push(this._inner.items[i].describe())}return e},t.prototype.items=function(){for(var e=this,t=this.clone(),i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];return l.flatten(n).forEach((function(i,n){try{i=o.schema(e._currentJoi,i)}catch(e){throw e.hasOwnProperty("path")?e.path=n+"."+e.path:e.path=n,e.message=e.message+"("+e.path+")",e}t._inner.items.push(i),"required"===i._flags.presence?t._inner.requireds.push(i):"forbidden"===i._flags.presence?t._inner.exclusions.push(i.optional()):t._inner.inclusions.push(i)})),t},t.prototype.ordered=function(){for(var e=this,t=this.clone(),i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];return l.flatten(n).forEach((function(i,n){try{i=o.schema(e._currentJoi,i)}catch(e){throw e.hasOwnProperty("path")?e.path=n+"."+e.path:e.path=n,e.message=e.message+"("+e.path+")",e}t._inner.ordereds.push(i)})),t},t.prototype.min=function(e){var t=s.isRef(e);return l.assert(Number.isSafeInteger(e)&&e>=0||t,"limit must be a positive integer or reference"),this._test("min",e,(function(i,n,r){var a=void 0;if(t){if(a=e(n.reference||n.parent,r),!(Number.isSafeInteger(a)&&a>=0))return this.createError("array.ref",{ref:e.key},n,r)}else a=e;return i.length>=a?i:this.createError("array.min",{limit:e,value:i},n,r)}))},t.prototype.max=function(e){var t=s.isRef(e);return l.assert(Number.isSafeInteger(e)&&e>=0||t,"limit must be a positive integer or reference"),this._test("max",e,(function(i,n,r){var a=void 0;if(t){if(a=e(n.reference||n.parent,r),!(Number.isSafeInteger(a)&&a>=0))return this.createError("array.ref",{ref:e.key},n,r)}else a=e;return i.length<=a?i:this.createError("array.max",{limit:e,value:i},n,r)}))},t.prototype.length=function(e){var t=s.isRef(e);return l.assert(Number.isSafeInteger(e)&&e>=0||t,"limit must be a positive integer or reference"),this._test("length",e,(function(i,n,r){var a=void 0;if(t){if(a=e(n.reference||n.parent,r),!(Number.isSafeInteger(a)&&a>=0))return this.createError("array.ref",{ref:e.key},n,r)}else a=e;return i.length===a?i:this.createError("array.length",{limit:e,value:i},n,r)}))},t.prototype.unique=function(e){l.assert(void 0===e||"function"==typeof e||"string"==typeof e,"comparator must be a function or a string");var t={};return"string"==typeof e?t.path=e:"function"==typeof e&&(t.comparator=e),this._test("unique",t,(function(e,i,n){for(var a={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),object:new Map,function:new Map,custom:new Map},o=t.comparator||l.deepEqual,s=0;s<e.length;++s){var c=t.path?l.reach(e[s],t.path):e[s],d=t.comparator?a.custom:a[void 0===c?"undefined":r(c)];if(d)if(d instanceof Map){for(var h=d.entries(),u=void 0;!(u=h.next()).done;)if(o(u.value[0],c)){var p={key:i.key,path:i.path.concat(s),parent:i.parent,reference:i.reference},f={pos:s,value:e[s],dupePos:u.value[1],dupeValue:e[u.value[1]]};return t.path&&(f.path=t.path),this.createError("array.unique",f,p,n)}d.set(c,s)}else{if(void 0!==d[c]){var g={key:i.key,path:i.path.concat(s),parent:i.parent,reference:i.reference},m={pos:s,value:e[s],dupePos:d[c],dupeValue:e[d[c]]};return t.path&&(m.path=t.path),this.createError("array.unique",m,g,n)}d[c]=s}}return e}))},t.prototype.sparse=function(e){var t=void 0===e||!!e;if(this._flags.sparse===t)return this;var i=this.clone();return i._flags.sparse=t,i},t.prototype.single=function(e){var t=void 0===e||!!e;if(this._flags.single===t)return this;var i=this.clone();return i._flags.single=t,i},t.prototype._fillMissedErrors=function(e,t,i,n){for(var r=[],a=0,o=0;o<t.length;++o){var s=t[o]._getLabel();s?r.push(s):++a}r.length?a?e.push(this.createError("array.includesRequiredBoth",{knownMisses:r,unknownMisses:a},{key:i.key,path:i.path},n)):e.push(this.createError("array.includesRequiredKnowns",{knownMisses:r},{key:i.key,path:i.path},n)):e.push(this.createError("array.includesRequiredUnknowns",{unknownMisses:a},{key:i.key,path:i.path},n))},t.prototype._fillOrderedErrors=function(e,t,i,n){for(var r=[],a=0;a<t.length;++a)"required"===l.reach(t[a],"_flags.presence")&&r.push(t[a]);r.length&&this._fillMissedErrors.call(this,e,r,i,n)},t}(a),c.safeParse=function(e,t){try{var i=JSON.parse(e);Array.isArray(i)&&(t.value=i)}catch(e){}},e.exports=new c.Array},function(e,t,i){"use strict";(function(t){function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var i=Object.getOwnPropertyNames(t),n=0;n<i.length;n++){var r=i[n],a=Object.getOwnPropertyDescriptor(t,r);a&&a.configurable&&void 0===e[r]&&Object.defineProperty(e,r,a)}}(e,t))}var r=i(2),a=i(0),o={};o.Binary=function(e){function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return t._type="binary",t}return n(i,e),i.prototype._base=function(e,i,n){var r={value:e};if("string"==typeof e&&n.convert)try{r.value=t.from(e,this._flags.encoding)}catch(e){}return r.errors=t.isBuffer(r.value)?null:this.createError("binary.base",null,i,n),r},i.prototype.encoding=function(e){if(a.assert(t.isEncoding(e),"Invalid encoding:",e),this._flags.encoding===e)return this;var i=this.clone();return i._flags.encoding=e,i},i.prototype.min=function(e){return a.assert(Number.isSafeInteger(e)&&e>=0,"limit must be a positive integer"),this._test("min",e,(function(t,i,n){return t.length>=e?t:this.createError("binary.min",{limit:e,value:t},i,n)}))},i.prototype.max=function(e){return a.assert(Number.isSafeInteger(e)&&e>=0,"limit must be a positive integer"),this._test("max",e,(function(t,i,n){return t.length<=e?t:this.createError("binary.max",{limit:e,value:t},i,n)}))},i.prototype.length=function(e){return a.assert(Number.isSafeInteger(e)&&e>=0,"limit must be a positive integer"),this._test("length",e,(function(t,i,n){return t.length===e?t:this.createError("binary.length",{limit:e,value:t},i,n)}))},i}(r),e.exports=new o.Binary}).call(t,i(3).Buffer)},function(e,t,i){"use strict";function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var i=Object.getOwnPropertyNames(t),n=0;n<i.length;n++){var r=i[n],a=Object.getOwnPropertyDescriptor(t,r);a&&a.configurable&&void 0===e[r]&&Object.defineProperty(e,r,a)}}(e,t))}var r=i(2),a=i(0),o={Set:i(9)};o.Boolean=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return i._type="boolean",i._flags.insensitive=!0,i._inner.truthySet=new o.Set,i._inner.falsySet=new o.Set,i}return n(t,e),t.prototype._base=function(e,t,i){var n={value:e};if("string"==typeof e&&i.convert){var r=this._flags.insensitive?e.toLowerCase():e;n.value="true"===r||"false"!==r&&e}return"boolean"!=typeof n.value&&(n.value=!!this._inner.truthySet.has(e,null,null,this._flags.insensitive)||!this._inner.falsySet.has(e,null,null,this._flags.insensitive)&&e),n.errors="boolean"==typeof n.value?null:this.createError("boolean.base",null,t,i),n},t.prototype.truthy=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=this.clone();t=a.flatten(t);for(var r=0;r<t.length;++r){var o=t[r];a.assert(void 0!==o,"Cannot call truthy with undefined"),n._inner.truthySet.add(o)}return n},t.prototype.falsy=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=this.clone();t=a.flatten(t);for(var r=0;r<t.length;++r){var o=t[r];a.assert(void 0!==o,"Cannot call falsy with undefined"),n._inner.falsySet.add(o)}return n},t.prototype.insensitive=function(e){var t=void 0===e||!!e;if(this._flags.insensitive===t)return this;var i=this.clone();return i._flags.insensitive=t,i},t.prototype.describe=function(){var e=r.prototype.describe.call(this);return e.truthy=[!0].concat(this._inner.truthySet.values()),e.falsy=[!1].concat(this._inner.falsySet.values()),e},t}(r),e.exports=new o.Boolean},function(e,t,i){"use strict";function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var i=Object.getOwnPropertyNames(t),n=0;n<i.length;n++){var r=i[n],a=Object.getOwnPropertyDescriptor(t,r);a&&a.configurable&&void 0===e[r]&&Object.defineProperty(e,r,a)}}(e,t))}var r=i(0),a=i(13),o=i(1),s={};s.Func=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return i._flags.func=!0,i}return n(t,e),t.prototype.arity=function(e){return r.assert(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this._test("arity",e,(function(t,i,n){return t.length===e?t:this.createError("function.arity",{n:e},i,n)}))},t.prototype.minArity=function(e){return r.assert(Number.isSafeInteger(e)&&e>0,"n must be a strict positive integer"),this._test("minArity",e,(function(t,i,n){return t.length>=e?t:this.createError("function.minArity",{n:e},i,n)}))},t.prototype.maxArity=function(e){return r.assert(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this._test("maxArity",e,(function(t,i,n){return t.length<=e?t:this.createError("function.maxArity",{n:e},i,n)}))},t.prototype.ref=function(){return this._test("ref",null,(function(e,t,i){return o.isRef(e)?e:this.createError("function.ref",null,t,i)}))},t.prototype.class=function(){return this._test("class",null,(function(e,t,i){return/^\s*class\s/.test(e.toString())?e:this.createError("function.class",null,t,i)}))},t}(a.constructor),e.exports=new s.Func},function(e,t,i){"use strict";function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var i=Object.getOwnPropertyNames(t),n=0;n<i.length;n++){var r=i[n],a=Object.getOwnPropertyDescriptor(t,r);a&&a.configurable&&void 0===e[r]&&Object.defineProperty(e,r,a)}}(e,t))}var r=i(2),a=i(0),o={};o.Lazy=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return i._type="lazy",i}return n(t,e),t.prototype._base=function(e,t,i){var n={value:e},a=this._flags.lazy;if(!a)return n.errors=this.createError("lazy.base",null,t,i),n;var o=a();return o instanceof r?o._validate(e,t,i):(n.errors=this.createError("lazy.schema",null,t,i),n)},t.prototype.set=function(e){a.assert("function"==typeof e,"You must provide a function as first argument");var t=this.clone();return t._flags.lazy=e,t},t}(r),e.exports=new o.Lazy},function(e,t,i){"use strict";function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var i=Object.getOwnPropertyNames(t),n=0;n<i.length;n++){var r=i[n],a=Object.getOwnPropertyDescriptor(t,r);a&&a.configurable&&void 0===e[r]&&Object.defineProperty(e,r,a)}}(e,t))}var r=i(2),a=i(1),o=i(0),s={precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/};s.Number=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return i._type="number",i._invalids.add(1/0),i._invalids.add(-1/0),i}return n(t,e),t.prototype._base=function(e,t,i){var n={errors:null,value:e};if("string"==typeof e&&i.convert){var r=parseFloat(e);n.value=isNaN(r)||!isFinite(e)?NaN:r}var a="number"==typeof n.value&&!isNaN(n.value);if(i.convert&&"precision"in this._flags&&a){var o=Math.pow(10,this._flags.precision);n.value=Math.round(n.value*o)/o}return n.errors=a?null:this.createError("number.base",null,t,i),n},t.prototype.multiple=function(e){var t=a.isRef(e);return t||(o.assert("number"==typeof e&&isFinite(e),"multiple must be a number"),o.assert(e>0,"multiple must be greater than 0")),this._test("multiple",e,(function(i,n,r){var a=t?e(n.reference||n.parent,r):e;return!t||"number"==typeof a&&isFinite(a)?i%a==0?i:this.createError("number.multiple",{multiple:e,value:i},n,r):this.createError("number.ref",{ref:e.key},n,r)}))},t.prototype.integer=function(){return this._test("integer",void 0,(function(e,t,i){return Number.isSafeInteger(e)?e:this.createError("number.integer",{value:e},t,i)}))},t.prototype.negative=function(){return this._test("negative",void 0,(function(e,t,i){return e<0?e:this.createError("number.negative",{value:e},t,i)}))},t.prototype.positive=function(){return this._test("positive",void 0,(function(e,t,i){return e>0?e:this.createError("number.positive",{value:e},t,i)}))},t.prototype.precision=function(e){o.assert(Number.isSafeInteger(e),"limit must be an integer"),o.assert(!("precision"in this._flags),"precision already set");var t=this._test("precision",e,(function(t,i,n){var r=t.toString().match(s.precisionRx);return Math.max((r[1]?r[1].length:0)-(r[2]?parseInt(r[2],10):0),0)<=e?t:this.createError("number.precision",{limit:e,value:t},i,n)}));return t._flags.precision=e,t},t.prototype.port=function(){return this._test("port",void 0,(function(e,t,i){return!Number.isSafeInteger(e)||e<0||e>65535?this.createError("number.port",{value:e},t,i):e}))},t}(r),s.compare=function(e,t){return function(i){var n=a.isRef(i),r="number"==typeof i&&!isNaN(i);return o.assert(r||n,"limit must be a number or reference"),this._test(e,i,(function(r,a,o){var s=void 0;if(n){if("number"!=typeof(s=i(a.reference||a.parent,o))||isNaN(s))return this.createError("number.ref",{ref:i.key},a,o)}else s=i;return t(r,s)?r:this.createError("number."+e,{limit:s,value:r},a,o)}))}},s.Number.prototype.min=s.compare("min",(function(e,t){return e>=t})),s.Number.prototype.max=s.compare("max",(function(e,t){return e<=t})),s.Number.prototype.greater=s.compare("greater",(function(e,t){return e>t})),s.Number.prototype.less=s.compare("less",(function(e,t){return e<t})),e.exports=new s.Number},function(e,t,i){"use strict";(function(t){function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var i=Object.getOwnPropertyNames(t),n=0;n<i.length;n++){var r=i[n],a=Object.getOwnPropertyDescriptor(t,r);a&&a.configurable&&void 0===e[r]&&Object.defineProperty(e,r,a)}}(e,t))}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(15),o=i(0),s=void 0,l=i(2),c=i(1),d=i(12),h=i(30),u=i(29),p={uriRegex:h.createUriRegex(),ipRegex:u.createIpRegex(["ipv4","ipv6","ipvfuture"],"optional"),guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5"},cidrPresences:["required","optional","forbidden"],normalizationForms:["NFC","NFD","NFKC","NFKD"]};p.String=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return i._type="string",i._invalids.add(""),i}return n(t,e),t.prototype._base=function(e,t,i){if("string"==typeof e&&i.convert){if(this._flags.normalize&&(e=e.normalize(this._flags.normalize)),this._flags.case&&(e="upper"===this._flags.case?e.toLocaleUpperCase():e.toLocaleLowerCase()),this._flags.trim&&(e=e.trim()),this._inner.replacements)for(var n=0;n<this._inner.replacements.length;++n){var r=this._inner.replacements[n];e=e.replace(r.pattern,r.replacement)}if(this._flags.truncate)for(var a=0;a<this._tests.length;++a){var o=this._tests[a];if("max"===o.name){e=e.slice(0,o.arg);break}}this._flags.byteAligned&&e.length%2!=0&&(e="0"+e)}return{value:e,errors:"string"==typeof e?null:this.createError("string.base",{value:e},t,i)}},t.prototype.insensitive=function(){if(this._flags.insensitive)return this;var e=this.clone();return e._flags.insensitive=!0,e},t.prototype.creditCard=function(){return this._test("creditCard",void 0,(function(e,t,i){for(var n=e.length,r=0,a=1;n--;){var o=e.charAt(n)*a;r+=o-9*(o>9),a^=3}return r%10==0&&r>0?e:this.createError("string.creditCard",{value:e},t,i)}))},t.prototype.regex=function(e,t){o.assert(e instanceof RegExp,"pattern must be a RegExp");var i={pattern:new RegExp(e.source,e.ignoreCase?"i":void 0)};"string"==typeof t?i.name=t:"object"===(void 0===t?"undefined":r(t))&&(i.invert=!!t.invert,t.name&&(i.name=t.name));var n=["string.regex",i.invert?".invert":"",i.name?".name":".base"].join("");return this._test("regex",i,(function(e,t,r){return i.pattern.test(e)^i.invert?e:this.createError(n,{name:i.name,pattern:i.pattern,value:e},t,r)}))},t.prototype.alphanum=function(){return this._test("alphanum",void 0,(function(e,t,i){return/^[a-zA-Z0-9]+$/.test(e)?e:this.createError("string.alphanum",{value:e},t,i)}))},t.prototype.token=function(){return this._test("token",void 0,(function(e,t,i){return/^\w+$/.test(e)?e:this.createError("string.token",{value:e},t,i)}))},t.prototype.email=function(e){return e&&(o.assert("object"===(void 0===e?"undefined":r(e)),"email options must be an object"),o.assert(void 0===e.checkDNS,"checkDNS option is not supported"),o.assert(void 0===e.tldWhitelist||"object"===r(e.tldWhitelist),"tldWhitelist must be an array or object"),o.assert(void 0===e.minDomainAtoms||Number.isSafeInteger(e.minDomainAtoms)&&e.minDomainAtoms>0,"minDomainAtoms must be a positive integer"),o.assert(void 0===e.errorLevel||"boolean"==typeof e.errorLevel||Number.isSafeInteger(e.errorLevel)&&e.errorLevel>=0,"errorLevel must be a non-negative integer or boolean")),this._test("email",e,(function(t,n,r){s=s||i(19);try{var a=s.validate(t,e);if(!0===a||0===a)return t}catch(e){}return this.createError("string.email",{value:t},n,r)}))},t.prototype.ip=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=p.ipRegex;o.assert("object"===(void 0===e?"undefined":r(e)),"options must be an object"),e.cidr?(o.assert("string"==typeof e.cidr,"cidr must be a string"),e.cidr=e.cidr.toLowerCase(),o.assert(o.contain(p.cidrPresences,e.cidr),"cidr must be one of "+p.cidrPresences.join(", ")),e.version||"optional"===e.cidr||(t=u.createIpRegex(["ipv4","ipv6","ipvfuture"],e.cidr))):e.cidr="optional";var i=void 0;if(e.version){Array.isArray(e.version)||(e.version=[e.version]),o.assert(e.version.length>=1,"version must have at least 1 version specified"),i=[];for(var n=0;n<e.version.length;++n){var a=e.version[n];o.assert("string"==typeof a,"version at position "+n+" must be a string"),a=a.toLowerCase(),o.assert(u.versions[a],"version at position "+n+" must be one of "+Object.keys(u.versions).join(", ")),i.push(a)}i=o.unique(i),t=u.createIpRegex(i,e.cidr)}return this._test("ip",e,(function(n,r,a){return t.test(n)?n:i?this.createError("string.ipVersion",{value:n,cidr:e.cidr,version:i},r,a):this.createError("string.ip",{value:n,cidr:e.cidr},r,a)}))},t.prototype.uri=function(e){var t="",i=!1,n=!1,a=p.uriRegex;if(e){if(o.assert("object"===(void 0===e?"undefined":r(e)),"options must be an object"),e.scheme){o.assert(e.scheme instanceof RegExp||"string"==typeof e.scheme||Array.isArray(e.scheme),"scheme must be a RegExp, String, or Array"),Array.isArray(e.scheme)||(e.scheme=[e.scheme]),o.assert(e.scheme.length>=1,"scheme must have at least 1 scheme specified");for(var s=0;s<e.scheme.length;++s){var l=e.scheme[s];o.assert(l instanceof RegExp||"string"==typeof l,"scheme at position "+s+" must be a RegExp or String"),t+=t?"|":"",l instanceof RegExp?t+=l.source:(o.assert(/[a-zA-Z][a-zA-Z0-9+-\.]*/.test(l),"scheme at position "+s+" must be a valid scheme"),t+=o.escapeRegex(l))}}e.allowRelative&&(i=!0),e.relativeOnly&&(n=!0)}return(t||i||n)&&(a=h.createUriRegex(t,i,n)),this._test("uri",e,(function(e,i,r){return a.test(e)?e:n?this.createError("string.uriRelativeOnly",{value:e},i,r):t?this.createError("string.uriCustomScheme",{scheme:t,value:e},i,r):this.createError("string.uri",{value:e},i,r)}))},t.prototype.isoDate=function(){return this._test("isoDate",void 0,(function(e,t,i){if(d._isIsoDate(e)){if(!i.convert)return e;var n=new Date(e);if(!isNaN(n.getTime()))return n.toISOString()}return this.createError("string.isoDate",{value:e},t,i)}))},t.prototype.guid=function(e){var t="";if(e&&e.version){Array.isArray(e.version)||(e.version=[e.version]),o.assert(e.version.length>=1,"version must have at least 1 valid version specified");for(var i=new Set,n=0;n<e.version.length;++n){var r=e.version[n];o.assert("string"==typeof r,"version at position "+n+" must be a string"),r=r.toLowerCase();var a=p.guidVersions[r];o.assert(a,"version at position "+n+" must be one of "+Object.keys(p.guidVersions).join(", ")),o.assert(!i.has(a),"version at position "+n+" must not be a duplicate."),t+=a,i.add(a)}}var s=new RegExp("^([\\[{\\(]?)[0-9A-F]{8}([:-]?)[0-9A-F]{4}\\2?["+(t||"0-9A-F")+"][0-9A-F]{3}\\2?["+(t?"89AB":"0-9A-F")+"][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$","i");return this._test("guid",e,(function(e,t,i){var n=s.exec(e);return n?p.guidBrackets[n[1]]!==n[n.length-1]?this.createError("string.guid",{value:e},t,i):e:this.createError("string.guid",{value:e},t,i)}))},t.prototype.hex=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.assert("object"===(void 0===e?"undefined":r(e)),"hex options must be an object"),o.assert(void 0===e.byteAligned||"boolean"==typeof e.byteAligned,"byteAligned must be boolean");var t=!0===e.byteAligned,i=/^[a-f0-9]+$/i,n=this._test("hex",i,(function(e,n,r){return i.test(e)?t&&e.length%2!=0?this.createError("string.hexAlign",{value:e},n,r):e:this.createError("string.hex",{value:e},n,r)}));return t&&(n._flags.byteAligned=!0),n},t.prototype.base64=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.assert("object"===(void 0===e?"undefined":r(e)),"base64 options must be an object"),o.assert(void 0===e.paddingRequired||"boolean"==typeof e.paddingRequired,"paddingRequired must be boolean");var t=!1===e.paddingRequired?e.paddingRequired:e.paddingRequired||!0,i=t?/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/:/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/;return this._test("base64",i,(function(e,t,n){return i.test(e)?e:this.createError("string.base64",{value:e},t,n)}))},t.prototype.hostname=function(){var e=/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$/;return this._test("hostname",void 0,(function(t,i,n){return t.length<=255&&e.test(t)||a.isIPv6(t)?t:this.createError("string.hostname",{value:t},i,n)}))},t.prototype.normalize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"NFC";o.assert(o.contain(p.normalizationForms,e),"normalization form must be one of "+p.normalizationForms.join(", "));var t=this._test("normalize",e,(function(t,i,n){return n.convert||t===t.normalize(e)?t:this.createError("string.normalize",{value:t,form:e},i,n)}));return t._flags.normalize=e,t},t.prototype.lowercase=function(){var e=this._test("lowercase",void 0,(function(e,t,i){return i.convert||e===e.toLocaleLowerCase()?e:this.createError("string.lowercase",{value:e},t,i)}));return e._flags.case="lower",e},t.prototype.uppercase=function(){var e=this._test("uppercase",void 0,(function(e,t,i){return i.convert||e===e.toLocaleUpperCase()?e:this.createError("string.uppercase",{value:e},t,i)}));return e._flags.case="upper",e},t.prototype.trim=function(){var e=this._test("trim",void 0,(function(e,t,i){return i.convert||e===e.trim()?e:this.createError("string.trim",{value:e},t,i)}));return e._flags.trim=!0,e},t.prototype.replace=function(e,t){"string"==typeof e&&(e=new RegExp(o.escapeRegex(e),"g")),o.assert(e instanceof RegExp,"pattern must be a RegExp"),o.assert("string"==typeof t,"replacement must be a String");var i=this.clone();return i._inner.replacements||(i._inner.replacements=[]),i._inner.replacements.push({pattern:e,replacement:t}),i},t.prototype.truncate=function(e){var t=void 0===e||!!e;if(this._flags.truncate===t)return this;var i=this.clone();return i._flags.truncate=t,i},t}(l),p.compare=function(e,i){return function(n,r){var a=c.isRef(n);return o.assert(Number.isSafeInteger(n)&&n>=0||a,"limit must be a positive integer or reference"),o.assert(!r||t.isEncoding(r),"Invalid encoding:",r),this._test(e,n,(function(t,o,s){var l=void 0;if(a){if(l=n(o.reference||o.parent,s),!Number.isSafeInteger(l))return this.createError("string.ref",{ref:n.key},o,s)}else l=n;return i(t,l,r)?t:this.createError("string."+e,{limit:l,value:t,encoding:r},o,s)}))}},p.String.prototype.min=p.compare("min",(function(e,i,n){return(n?t.byteLength(e,n):e.length)>=i})),p.String.prototype.max=p.compare("max",(function(e,i,n){return(n?t.byteLength(e,n):e.length)<=i})),p.String.prototype.length=p.compare("length",(function(e,i,n){return(n?t.byteLength(e,n):e.length)===i})),p.String.prototype.uuid=p.String.prototype.guid,e.exports=new p.String}).call(t,i(3).Buffer)},function(e,t,i){"use strict";var n=i(14),r={Ip:{cidrs:{ipv4:{required:"\\/(?:"+n.ipv4Cidr+")",optional:"(?:\\/(?:"+n.ipv4Cidr+"))?",forbidden:""},ipv6:{required:"\\/"+n.ipv6Cidr,optional:"(?:\\/"+n.ipv6Cidr+")?",forbidden:""},ipvfuture:{required:"\\/"+n.ipv6Cidr,optional:"(?:\\/"+n.ipv6Cidr+")?",forbidden:""}},versions:{ipv4:n.IPv4address,ipv6:n.IPv6address,ipvfuture:n.IPvFuture}}};r.Ip.createIpRegex=function(e,t){for(var i=void 0,n=0;n<e.length;++n){var a=e[n];i?i+="|"+r.Ip.versions[a]+r.Ip.cidrs[a][t]:i="^(?:"+r.Ip.versions[a]+r.Ip.cidrs[a][t]}return new RegExp(i+")$")},e.exports=r.Ip},function(e,t,i){"use strict";var n=i(14),r={Uri:{createUriRegex:function(e,t,i){var r=n.scheme,a=void 0;if(i)a="(?:"+n.relativeRef+")";else{e&&(r="(?:"+e+")");var o="(?:"+r+":"+n.hierPart+")";a=t?"(?:"+o+"|"+n.relativeRef+")":o}return new RegExp("^"+a+"(?:\\?"+n.query+")?(?:#"+n.fragment+")?$")}}};e.exports=r.Uri},function(e,t,i){"use strict";var n=i(0),r={};e.exports=r.Topo=function(){this._items=[],this.nodes=[]},r.Topo.prototype.add=function(e,t){var i=this,r=[].concat((t=t||{}).before||[]),a=[].concat(t.after||[]),o=t.group||"?",s=t.sort||0;n.assert(-1===r.indexOf(o),"Item cannot come before itself:",o),n.assert(-1===r.indexOf("?"),"Item cannot come before unassociated items"),n.assert(-1===a.indexOf(o),"Item cannot come after itself:",o),n.assert(-1===a.indexOf("?"),"Item cannot come after unassociated items"),[].concat(e).forEach((function(e,t){var n={seq:i._items.length,sort:s,before:r,after:a,group:o,node:e};i._items.push(n)}));var l=this._sort();return n.assert(!l,"item","?"!==o?"added into group "+o:"","created a dependencies error"),this.nodes},r.Topo.prototype.merge=function(e){e=[].concat(e);for(var t=0;t<e.length;++t){var i=e[t];if(i)for(var a=0;a<i._items.length;++a){var o=n.shallow(i._items[a]);this._items.push(o)}}this._items.sort(r.mergeSort);for(var s=0;s<this._items.length;++s)this._items[s].seq=s;var l=this._sort();return n.assert(!l,"merge created a dependencies error"),this.nodes},r.mergeSort=function(e,t){return e.sort===t.sort?0:e.sort<t.sort?-1:1},r.Topo.prototype._sort=function(){for(var e={},t=Object.create(null),i=Object.create(null),n=0;n<this._items.length;++n){var r=this._items[n],a=r.seq,o=r.group;i[o]=i[o]||[],i[o].push(a),e[a]=r.before;for(var s=r.after,l=0;l<s.length;++l)t[s[l]]=(t[s[l]]||[]).concat(a)}for(var c=Object.keys(e),d=0;d<c.length;++d){for(var h=c[d],u=[],p=Object.keys(e[h]),f=0;f<p.length;++f){var g=e[h][p[f]];i[g]=i[g]||[];for(var m=0;m<i[g].length;++m)u.push(i[g][m])}e[h]=u}for(var v=Object.keys(t),_=0;_<v.length;++_){var b=v[_];if(i[b])for(var w=0;w<i[b].length;++w){var y=i[b][w];e[y]=e[y].concat(t[b])}}var x=void 0,C={};c=Object.keys(e);for(var S=0;S<c.length;++S){var T=c[S];x=e[T];for(var k=0;k<x.length;++k)C[x[k]]=(C[x[k]]||[]).concat(T)}for(var A={},P=[],D=0;D<this._items.length;++D){var E=D;if(C[D]){E=null;for(var M=0;M<this._items.length;++M)if(!0!==A[M]){C[M]||(C[M]=[]);for(var O=C[M].length,I=0,N=0;N<O;++N)A[C[M][N]]&&++I;if(I===O){E=M;break}}}null!==E&&(A[E]=!0,P.push(E))}if(P.length!==this._items.length)return new Error("Invalid dependencies");for(var L={},R=0;R<this._items.length;++R){var j=this._items[R];L[j.seq]=j}var $=[];this._items=P.map((function(e){var t=L[e];return $.push(t.node),t})),this.nodes=$}},function(e,t,i){"use strict";var n=i(8);e.exports=n},function(e,t,i){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function r(e){return o[e>>18&63]+o[e>>12&63]+o[e>>6&63]+o[63&e]}function a(e,t,i){for(var n,a=[],o=t;o<i;o+=3)n=(e[o]<<16)+(e[o+1]<<8)+e[o+2],a.push(r(n));return a.join("")}t.byteLength=function(e){return 3*e.length/4-n(e)},t.toByteArray=function(e){var t,i,r,a,o,c=e.length;a=n(e),o=new l(3*c/4-a),i=a>0?c-4:c;var d=0;for(t=0;t<i;t+=4)r=s[e.charCodeAt(t)]<<18|s[e.charCodeAt(t+1)]<<12|s[e.charCodeAt(t+2)]<<6|s[e.charCodeAt(t+3)],o[d++]=r>>16&255,o[d++]=r>>8&255,o[d++]=255&r;return 2===a?(r=s[e.charCodeAt(t)]<<2|s[e.charCodeAt(t+1)]>>4,o[d++]=255&r):1===a&&(r=s[e.charCodeAt(t)]<<10|s[e.charCodeAt(t+1)]<<4|s[e.charCodeAt(t+2)]>>2,o[d++]=r>>8&255,o[d++]=255&r),o},t.fromByteArray=function(e){for(var t,i=e.length,n=i%3,r="",s=[],l=0,c=i-n;l<c;l+=16383)s.push(a(e,l,l+16383>c?c:l+16383));return 1===n?(t=e[i-1],r+=o[t>>2],r+=o[t<<4&63],r+="=="):2===n&&(t=(e[i-2]<<8)+e[i-1],r+=o[t>>10],r+=o[t>>4&63],r+=o[t<<2&63],r+="="),s.push(r),s.join("")};for(var o=[],s=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,h=c.length;d<h;++d)o[d]=c[d],s[c.charCodeAt(d)]=d;s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,i,n,r){var a,o,s=8*r-n-1,l=(1<<s)-1,c=l>>1,d=-7,h=i?r-1:0,u=i?-1:1,p=e[t+h];for(h+=u,a=p&(1<<-d)-1,p>>=-d,d+=s;d>0;a=256*a+e[t+h],h+=u,d-=8);for(o=a&(1<<-d)-1,a>>=-d,d+=n;d>0;o=256*o+e[t+h],h+=u,d-=8);if(0===a)a=1-c;else{if(a===l)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,n),a-=c}return(p?-1:1)*o*Math.pow(2,a-n)},t.write=function(e,t,i,n,r,a){var o,s,l,c=8*a-r-1,d=(1<<c)-1,h=d>>1,u=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:a-1,f=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=d):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+h>=1?u/l:u*Math.pow(2,1-h))*l>=2&&(o++,l/=2),o+h>=d?(s=0,o=d):o+h>=1?(s=(t*l-1)*Math.pow(2,r),o+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,r),o=0));r>=8;e[i+p]=255&s,p+=f,s/=256,r-=8);for(o=o<<r|s,c+=r;c>0;e[i+p]=255&o,p+=f,o/=256,c-=8);e[i+p-f]|=128*g}},function(e,t){var i={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},function(e,t){e.exports={_args:[["joi@13.4.0","/Users/hkernbach/Git/joi-browser"]],_development:!0,_from:"joi@13.4.0",_id:"joi@13.4.0",_inBundle:!1,_integrity:"sha512-JuK4GjEu6j7zr9FuVe2MAseZ6si/8/HaY0qMAejfDFHp7jcH4OKE937mIHM5VT4xDS0q7lpQbszbxKV9rm0yUg==",_location:"/joi",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"joi@13.4.0",name:"joi",escapedName:"joi",rawSpec:"13.4.0",saveSpec:null,fetchSpec:"13.4.0"},_requiredBy:["#DEV:/"],_resolved:"https://registry.npmjs.org/joi/-/joi-13.4.0.tgz",_spec:"13.4.0",_where:"/Users/hkernbach/Git/joi-browser",bugs:{url:"https://github.com/hapijs/joi/issues"},dependencies:{hoek:"5.x.x",isemail:"3.x.x",topo:"3.x.x"},description:"Object schema validation",devDependencies:{code:"5.x.x",hapitoc:"1.x.x",lab:"15.x.x"},engines:{node:">=8.9.0"},homepage:"https://github.com/hapijs/joi",keywords:["hapi","schema","validation"],license:"BSD-3-Clause",main:"lib/index.js",name:"joi",repository:{type:"git",url:"git://github.com/hapijs/joi.git"},scripts:{test:"lab -t 100 -a code -L","test-cov-html":"lab -r html -o coverage.html -a code","test-debug":"lab -a code",toc:"hapitoc",version:"npm run toc && git add API.md README.md"},version:"13.4.0"}},function(e,t,i){(function(e){function i(e,t){for(var i=0,n=e.length-1;n>=0;n--){var r=e[n];"."===r?e.splice(n,1):".."===r?(e.splice(n,1),i++):i&&(e.splice(n,1),i--)}if(t)for(;i--;i)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var i=[],n=0;n<e.length;n++)t(e[n],n,e)&&i.push(e[n]);return i}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,a=function(e){return r.exec(e).slice(1)};t.resolve=function(){for(var t="",r=!1,a=arguments.length-1;a>=-1&&!r;a--){var o=a>=0?arguments[a]:e.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,r="/"===o.charAt(0))}return(r?"/":"")+(t=i(n(t.split("/"),(function(e){return!!e})),!r).join("/"))||"."},t.normalize=function(e){var r=t.isAbsolute(e),a="/"===o(e,-1);return(e=i(n(e.split("/"),(function(e){return!!e})),!r).join("/"))||r||(e="."),e&&a&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(n(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,i){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var i=e.length-1;i>=0&&""===e[i];i--);return t>i?[]:e.slice(t,i-t+1)}e=t.resolve(e).substr(1),i=t.resolve(i).substr(1);for(var r=n(e.split("/")),a=n(i.split("/")),o=Math.min(r.length,a.length),s=o,l=0;l<o;l++)if(r[l]!==a[l]){s=l;break}var c=[];for(l=s;l<r.length;l++)c.push("..");return(c=c.concat(a.slice(s))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=a(e),i=t[0],n=t[1];return i||n?(n&&(n=n.substr(0,n.length-1)),i+n):"."},t.basename=function(e,t){var i=a(e)[2];return t&&i.substr(-1*t.length)===t&&(i=i.substr(0,i.length-t.length)),i},t.extname=function(e){return a(e)[3]};var o="b"==="ab".substr(-1)?function(e,t,i){return e.substr(t,i)}:function(e,t,i){return t<0&&(t=e.length+t),e.substr(t,i)}}).call(t,i(7))},function(e,t,i){(function(e,n){var r;!function(n){function a(e){throw new RangeError(P[e])}function o(e,t){for(var i=e.length,n=[];i--;)n[i]=t(e[i]);return n}function s(e,t){var i=e.split("@"),n="";return i.length>1&&(n=i[0]+"@",e=i[1]),n+o((e=e.replace(A,".")).split("."),t).join(".")}function l(e){for(var t,i,n=[],r=0,a=e.length;r<a;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<a?56320==(64512&(i=e.charCodeAt(r++)))?n.push(((1023&t)<<10)+(1023&i)+65536):(n.push(t),r--):n.push(t);return n}function c(e){return o(e,(function(e){var t="";return e>65535&&(t+=M((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+M(e)})).join("")}function d(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:v}function h(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function u(e,t,i){var n=0;for(e=i?E(e/y):e>>1,e+=E(e/t);e>D*b>>1;n+=v)e=E(e/D);return E(n+(D+1)*e/(e+w))}function p(e){var t,i,n,r,o,s,l,h,p,f,g=[],w=e.length,y=0,T=C,k=x;for((i=e.lastIndexOf(S))<0&&(i=0),n=0;n<i;++n)e.charCodeAt(n)>=128&&a("not-basic"),g.push(e.charCodeAt(n));for(r=i>0?i+1:0;r<w;){for(o=y,s=1,l=v;r>=w&&a("invalid-input"),((h=d(e.charCodeAt(r++)))>=v||h>E((m-y)/s))&&a("overflow"),y+=h*s,!(h<(p=l<=k?_:l>=k+b?b:l-k));l+=v)s>E(m/(f=v-p))&&a("overflow"),s*=f;k=u(y-o,t=g.length+1,0==o),E(y/t)>m-T&&a("overflow"),T+=E(y/t),y%=t,g.splice(y++,0,T)}return c(g)}function f(e){var t,i,n,r,o,s,c,d,p,f,g,w,y,T,k,A=[];for(w=(e=l(e)).length,t=C,i=0,o=x,s=0;s<w;++s)(g=e[s])<128&&A.push(M(g));for(n=r=A.length,r&&A.push(S);n<w;){for(c=m,s=0;s<w;++s)(g=e[s])>=t&&g<c&&(c=g);for(c-t>E((m-i)/(y=n+1))&&a("overflow"),i+=(c-t)*y,t=c,s=0;s<w;++s)if((g=e[s])<t&&++i>m&&a("overflow"),g==t){for(d=i,p=v;!(d<(f=p<=o?_:p>=o+b?b:p-o));p+=v)k=d-f,T=v-f,A.push(M(h(f+k%T,0))),d=E(k/T);A.push(M(h(d,0))),o=u(i,y,n==r),i=0,++n}++i,++t}return A.join("")}"object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType;var g,m=2147483647,v=36,_=1,b=26,w=38,y=700,x=72,C=128,S="-",T=/^xn--/,k=/[^\x20-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,P={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=v-_,E=Math.floor,M=String.fromCharCode;g={version:"1.4.1",ucs2:{decode:l,encode:c},decode:p,encode:f,toASCII:function(e){return s(e,(function(e){return k.test(e)?"xn--"+f(e):e}))},toUnicode:function(e){return s(e,(function(e){return T.test(e)?p(e.slice(4).toLowerCase()):e}))}},void 0!==(r=function(){return g}.call(t,i,t,e))&&(e.exports=r)}()}).call(t,i(41)(e),i(5))},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}}])},function(e,t){var i;"undefined"==typeof(i=jQuery).fn.each2&&i.extend(i.fn,{each2:function(e){for(var t=i([0]),n=-1,r=this.length;++n<r&&(t.context=t[0]=this[n])&&!1!==e.call(t[0],n,t););return this}}),function(e,t){"use strict";function i(e){var t,i,n,r;if(!e||e.length<1)return e;for(t="",i=0,n=e.length;n>i;i++)r=e.charAt(i),t+=I[r]||r;return t}function n(e,t){for(var i=0,n=t.length;n>i;i+=1)if(r(e,t[i]))return i;return-1}function r(e,i){return e===i||e!==t&&i!==t&&(null!==e&&null!==i&&(e.constructor===String?e+""==i+"":i.constructor===String&&i+""==e+""))}function a(t,i){var n,r,a;if(null===t||t.length<1)return[];for(r=0,a=(n=t.split(i)).length;a>r;r+=1)n[r]=e.trim(n[r]);return n}function o(e){return e.outerWidth(!1)-e.width()}function s(i){var n="keyup-change-value";i.on("keydown",(function(){e.data(i,n)===t&&e.data(i,n,i.val())})),i.on("keyup",(function(){var r=e.data(i,n);r!==t&&i.val()!==r&&(e.removeData(i,n),i.trigger("keyup-change"))}))}function l(i){i.on("mousemove",(function(i){var n=E;(n===t||n.x!==i.pageX||n.y!==i.pageY)&&e(i.target).trigger("mousemove-filtered",i)}))}function c(e,i,n){var r;return n=n||t,function(){var t=arguments;window.clearTimeout(r),r=window.setTimeout((function(){i.apply(n,t)}),e)}}function d(t){var i=0,n=0;if("selectionStart"in(t=e(t)[0]))i=t.selectionStart,n=t.selectionEnd-i;else if("selection"in document){t.focus();var r=document.selection.createRange();n=document.selection.createRange().text.length,r.moveStart("character",-t.value.length),i=r.text.length-n}return{offset:i,length:n}}function h(e){e.preventDefault(),e.stopPropagation()}function u(t){if(!A){var i=t[0].currentStyle||window.getComputedStyle(t[0],null);(A=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),e("body").append(A)}return A.text(t.val()),A.width()}function p(t,i,n){var r,a,o=[];(r=t.attr("class"))&&e((r=""+r).split(" ")).each2((function(){0===this.indexOf("select2-")&&o.push(this)})),(r=i.attr("class"))&&e((r=""+r).split(" ")).each2((function(){0!==this.indexOf("select2-")&&((a=n(this))&&o.push(a))})),t.attr("class",o.join(" "))}function f(e,t,n,r){var a=i(e.toUpperCase()).indexOf(i(t.toUpperCase())),o=t.length;return 0>a?void n.push(r(e)):(n.push(r(e.substring(0,a))),n.push("<span class='select2-match'>"),n.push(r(e.substring(a,a+o))),n.push("</span>"),void n.push(r(e.substring(a+o,e.length))))}function g(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,(function(e){return t[e]}))}function m(i){var n,r=null,a=i.quietMillis||100,o=i.url,s=this;return function(l){window.clearTimeout(n),n=window.setTimeout((function(){var n=i.data,a=o,c=i.transport||e.fn.select2.ajaxDefaults.transport,d={type:i.type||"GET",cache:i.cache||!1,jsonpCallback:i.jsonpCallback||t,dataType:i.dataType||"json"},h=e.extend({},e.fn.select2.ajaxDefaults.params,d);n=n?n.call(s,l.term,l.page,l.context):null,a="function"==typeof a?a.call(s,l.term,l.page,l.context):a,r&&r.abort(),i.params&&(e.isFunction(i.params)?e.extend(h,i.params.call(s)):e.extend(h,i.params)),e.extend(h,{url:a,dataType:i.dataType,data:n,success:function(e){var t=i.results(e,l.page);l.callback(t)}}),r=c.call(s,h)}),a)}}function v(t){var i,n,r=t,a=function(e){return""+e.text};e.isArray(r)&&(r={results:n=r}),!1===e.isFunction(r)&&(n=r,r=function(){return n});var o=r();return o.text&&(a=o.text,e.isFunction(a)||(i=o.text,a=function(e){return e[i]})),function(t){var i,n=t.term,o={results:[]};return""===n?void t.callback(r()):(i=function(r,o){var s,l;if((r=r[0]).children){for(l in s={},r)r.hasOwnProperty(l)&&(s[l]=r[l]);s.children=[],e(r.children).each2((function(e,t){i(t,s.children)})),(s.children.length||t.matcher(n,a(s),r))&&o.push(s)}else t.matcher(n,a(r),r)&&o.push(r)},e(r().results).each2((function(e,t){i(t,o.results)})),void t.callback(o))}}function _(i){var n=e.isFunction(i);return function(r){var a=r.term,o={results:[]};e(n?i():i).each((function(){var e=this.text!==t,i=e?this.text:this;(""===a||r.matcher(a,i))&&o.results.push(e?this:{id:this,text:this})})),r.callback(o)}}function b(t,i){if(e.isFunction(t))return!0;if(!t)return!1;throw new Error(i+" must be a function or a falsy value")}function w(t){return e.isFunction(t)?t():t}function y(t){var i=0;return e.each(t,(function(e,t){t.children?i+=y(t.children):i++})),i}function x(t,i){var n=function(){};return(n.prototype=new t).constructor=n,n.prototype.parent=t.prototype,n.prototype=e.extend(n.prototype,i),n}if(window.Select2===t){var C,S,T,k,A,P,D,E={x:0,y:0},M={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case M.LEFT:case M.RIGHT:case M.UP:case M.DOWN:return!0}return!1},isControl:function(e){switch(e.which){case M.SHIFT:case M.CTRL:case M.ALT:return!0}return!!e.metaKey},isFunctionKey:function(e){return(e=e.which?e.which:e)>=112&&123>=e}},O="<div class='select2-measure-scrollbar'></div>",I={"\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z"};P=e(document),k=function(){var e=1;return function(){return e++}}(),P.on("mousemove",(function(e){E.x=e.pageX,E.y=e.pageY})),C=x(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(i){var r,a,o=".select2-results";this.opts=i=this.prepareOpts(i),this.id=i.id,i.element.data("select2")!==t&&null!==i.element.data("select2")&&i.element.data("select2").destroy(),this.container=this.createContainer(),this.containerId="s2id_"+(i.element.attr("id")||"autogen"+k()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=function(e){var t,i=!1;return function(){return!1===i&&(t=e(),i=!0),t}}((function(){return i.element.closest("body")})),p(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",i.element.attr("style")),this.container.css(w(i.containerCss)),this.container.addClass(w(i.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",h),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),p(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(w(i.dropdownCssClass)),this.dropdown.data("select2",this),this.dropdown.on("click",h),this.results=r=this.container.find(o),this.search=a=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",h),l(this.results),this.dropdown.on("mousemove-filtered touchstart touchmove touchend",o,this.bind(this.highlightUnderEvent)),function(e,t){var i=c(e,(function(e){t.trigger("scroll-debounced",e)}));t.on("scroll",(function(e){n(e.target,t.get())>=0&&i(e)}))}(80,this.results),this.dropdown.on("scroll-debounced",o,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",(function(e){e.stopPropagation()})),e(this.dropdown).on("change",".select2-input",(function(e){e.stopPropagation()})),e.fn.mousewheel&&r.mousewheel((function(e,t,i,n){var a=r.scrollTop();n>0&&0>=a-n?(r.scrollTop(0),h(e)):0>n&&r.get(0).scrollHeight-r.scrollTop()+n<=r.height()&&(r.scrollTop(r.get(0).scrollHeight-r.height()),h(e))})),s(a),a.on("keyup-change input paste",this.bind(this.updateResults)),a.on("focus",(function(){a.addClass("select2-focused")})),a.on("blur",(function(){a.removeClass("select2-focused")})),this.dropdown.on("mouseup",o,this.bind((function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))}))),this.dropdown.on("click mouseup mousedown",(function(e){e.stopPropagation()})),e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==i.maximumInputLength&&this.search.attr("maxlength",i.maximumInputLength);var d=i.element.prop("disabled");d===t&&(d=!1),this.enable(!d);var u=i.element.prop("readonly");u===t&&(u=!1),this.readonly(u),D=D||function(){var t=e(O);t.appendTo("body");var i={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),i}(),this.autofocus=i.element.prop("autofocus"),i.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.nextSearchTerm=t},destroy:function(){var e=this.opts.element,i=e.data("select2");this.close(),this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),i!==t&&(i.container.remove(),i.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show())},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:r(e.attr("locked"),"locked")||r(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(i){var n,o,s,l,c=this;if("select"===(n=i.element).get(0).tagName.toLowerCase()&&(this.select=o=i.element),o&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],(function(){if(this in i)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")})),"function"!=typeof(i=e.extend({},{populateResults:function(n,r,a){var o,s=this.opts.id;(o=function(n,r,l){var d,h,u,p,f,g,m,v,_,b;for(d=0,h=(n=i.sortResults(n,r,a)).length;h>d;d+=1)p=!(f=!0===(u=n[d]).disabled)&&s(u)!==t,g=u.children&&u.children.length>0,(m=e("<li></li>")).addClass("select2-results-dept-"+l),m.addClass("select2-result"),m.addClass(p?"select2-result-selectable":"select2-result-unselectable"),f&&m.addClass("select2-disabled"),g&&m.addClass("select2-result-with-children"),m.addClass(c.opts.formatResultCssClass(u)),(v=e(document.createElement("div"))).addClass("select2-result-label"),(b=i.formatResult(u,v,a,c.opts.escapeMarkup))!==t&&v.html(b),m.append(v),g&&((_=e("<ul></ul>")).addClass("select2-result-sub"),o(u.children,_,l+1),m.append(_)),m.data("select2-data",u),r.append(m)})(r,n,0)}},e.fn.select2.defaults,i)).id&&(s=i.id,i.id=function(e){return e[s]}),e.isArray(i.element.data("select2Tags"))){if("tags"in i)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+i.element.attr("id");i.tags=i.element.data("select2Tags")}if(o?(i.query=this.bind((function(e){var i,r,a,o={results:[],more:!1},s=e.term;a=function(t,i){var n;t.is("option")?e.matcher(s,t.text(),t)&&i.push(c.optionToData(t)):t.is("optgroup")&&(n=c.optionToData(t),t.children().each2((function(e,t){a(t,n.children)})),n.children.length>0&&i.push(n))},i=n.children(),this.getPlaceholder()!==t&&i.length>0&&((r=this.getPlaceholderOption())&&(i=i.not(r))),i.each2((function(e,t){a(t,o.results)})),e.callback(o)})),i.id=function(e){return e.id},i.formatResultCssClass=function(e){return e.css}):"query"in i||("ajax"in i?((l=i.element.data("ajax-url"))&&l.length>0&&(i.ajax.url=l),i.query=m.call(i.element,i.ajax)):"data"in i?i.query=v(i.data):"tags"in i&&(i.query=_(i.tags),i.createSearchChoice===t&&(i.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),i.initSelection===t&&(i.initSelection=function(t,n){var o=[];e(a(t.val(),i.separator)).each((function(){var t={id:this,text:this},n=i.tags;e.isFunction(n)&&(n=n()),e(n).each((function(){return r(this.id,t.id)?(t=this,!1):void 0})),o.push(t)})),n(o)}))),"function"!=typeof i.query)throw"query function not defined for Select2 "+i.element.attr("id");return i},monitorSource:function(){var e,i,n=this.opts.element;n.on("change.select2",this.bind((function(){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()}))),e=this.bind((function(){var e=n.prop("disabled");e===t&&(e=!1),this.enable(!e);var i=n.prop("readonly");i===t&&(i=!1),this.readonly(i),p(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(w(this.opts.containerCssClass)),p(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(w(this.opts.dropdownCssClass))})),n.on("propertychange.select2",e),this.mutationCallback===t&&(this.mutationCallback=function(t){t.forEach(e)}),(i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new i(this.mutationCallback),this.propertyObserver.observe(n.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var i=e.Event("select2-selecting",{val:this.id(t),object:t});return this.opts.element.trigger(i),!i.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){return e===t&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface(),!0)},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,i,n,r,a,o=this.dropdown,s=this.container.offset(),l=this.container.outerHeight(!1),c=this.container.outerWidth(!1),d=o.outerHeight(!1),h=e(window),u=h.width(),p=h.height(),f=h.scrollLeft()+u,g=h.scrollTop()+p,m=s.top+l,v=s.left,_=g>=m+d,b=s.top-d>=this.body().scrollTop(),y=o.outerWidth(!1),x=f>=v+y;o.hasClass("select2-drop-above")?(i=!0,!b&&_&&(n=!0,i=!1)):(i=!1,!_&&b&&(n=!0,i=!0)),n&&(o.hide(),s=this.container.offset(),l=this.container.outerHeight(!1),c=this.container.outerWidth(!1),d=o.outerHeight(!1),f=h.scrollLeft()+u,g=h.scrollTop()+p,m=s.top+l,x=f>=(v=s.left)+(y=o.outerWidth(!1)),o.show()),this.opts.dropdownAutoWidth?(a=e(".select2-results",o)[0],o.addClass("select2-drop-auto-width"),o.css("width",""),(y=o.outerWidth(!1)+(a.scrollHeight===a.clientHeight?0:D.width))>c?c=y:y=c,x=f>=v+y):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body().css("position")&&(m-=(t=this.body().offset()).top,v-=t.left),x||(v=s.left+c-y),r={left:v,width:c},i?(r.bottom=p-s.top,r.top="auto",this.container.addClass("select2-drop-above"),o.addClass("select2-drop-above")):(r.top=m,r.bottom="auto",this.container.removeClass("select2-drop-above"),o.removeClass("select2-drop-above")),r=e.extend(r,w(this.opts.dropdownCss)),o.css(r)},shouldOpen:function(){var t;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),!0)},opening:function(){var t,i=this.containerId,n="scroll."+i,r="resize."+i,a="orientationchange."+i;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),0==(t=e("#select2-drop-mask")).length&&((t=e(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),t.hide(),t.appendTo(this.body()),t.on("mousedown touchstart click",(function(t){var i,n=e("#select2-drop");n.length>0&&((i=n.data("select2")).opts.selectOnBlur&&i.selectHighlighted({noFocus:!0}),i.close({focus:!0}),t.preventDefault(),t.stopPropagation())}))),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var o=this;this.container.parents().add(window).each((function(){e(this).on(r+" "+n+" "+a,(function(){o.positionDropdown()}))}))},close:function(){if(this.opened()){var t=this.containerId,i="scroll."+t,n="resize."+t,r="orientationchange."+t;this.container.parents().add(window).each((function(){e(this).off(i).off(n).off(r)})),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return w(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var t,i,n,r,a,o,s,l=this.results;if(!(0>(i=this.highlight()))){if(0==i)return void l.scrollTop(0);t=this.findHighlightableChoices().find(".select2-result-label"),r=(n=e(t[i])).offset().top+n.outerHeight(!0),i===t.length-1&&((s=l.find("li.select2-more-results")).length>0&&(r=s.offset().top+s.outerHeight(!0))),r>(a=l.offset().top+l.outerHeight(!0))&&l.scrollTop(l.scrollTop()+(r-a)),0>(o=n.offset().top-l.offset().top)&&"none"!=n.css("display")&&l.scrollTop(l.scrollTop()+o)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled, .select2-selected)")},moveHighlight:function(t){for(var i=this.findHighlightableChoices(),n=this.highlight();n>-1&&n<i.length;){var r=e(i[n+=t]);if(r.hasClass("select2-result-selectable")&&!r.hasClass("select2-disabled")&&!r.hasClass("select2-selected")){this.highlight(n);break}}},highlight:function(t){var i,r,a=this.findHighlightableChoices();return 0===arguments.length?n(a.filter(".select2-highlighted")[0],a.get()):(t>=a.length&&(t=a.length-1),0>t&&(t=0),this.removeHighlight(),(i=e(a[t])).addClass("select2-highlighted"),this.ensureHighlightVisible(),void((r=i.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(r),choice:r})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var i=e(t.target).closest(".select2-result-selectable");if(i.length>0&&!i.is(".select2-highlighted")){var n=this.findHighlightableChoices();this.highlight(n.index(i))}else 0==i.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e=this.results,t=e.find("li.select2-more-results"),i=this.resultsPage+1,n=this,r=this.search.val(),a=this.context;0!==t.length&&(t.offset().top-e.offset().top-e.height()<=this.opts.loadMorePadding&&(t.addClass("select2-active"),this.opts.query({element:this.opts.element,term:r,page:i,context:a,matcher:this.opts.matcher,callback:this.bind((function(o){n.opened()&&(n.opts.populateResults.call(this,e,o.results,{term:r,page:i,context:a}),n.postprocessResults(o,!1,!1),!0===o.more?(t.detach().appendTo(e).text(n.opts.formatLoadMore(i+1)),window.setTimeout((function(){n.loadMoreIfNeeded()}),10)):t.remove(),n.positionDropdown(),n.resultsPage=i,n.context=o.context,this.opts.element.trigger({type:"select2-loaded",items:o}))}))})))},tokenize:function(){},updateResults:function(i){function n(){c.removeClass("select2-active"),u.positionDropdown()}function a(e){d.html(e),n()}var o,s,l,c=this.search,d=this.results,h=this.opts,u=this,p=c.val(),f=e.data(this.container,"select2-last-term");if((!0===i||!f||!r(p,f))&&(e.data(this.container,"select2-last-term",p),!0===i||!1!==this.showSearchInput&&this.opened())){l=++this.queryCount;var g=this.getMaximumSelectionSize();if(g>=1&&(o=this.data(),e.isArray(o)&&o.length>=g&&b(h.formatSelectionTooBig,"formatSelectionTooBig")))return void a("<li class='select2-selection-limit'>"+h.formatSelectionTooBig(g)+"</li>");if(c.val().length<h.minimumInputLength)return b(h.formatInputTooShort,"formatInputTooShort")?a("<li class='select2-no-results'>"+h.formatInputTooShort(c.val(),h.minimumInputLength)+"</li>"):a(""),void(i&&this.showSearch&&this.showSearch(!0));if(h.maximumInputLength&&c.val().length>h.maximumInputLength)return void(b(h.formatInputTooLong,"formatInputTooLong")?a("<li class='select2-no-results'>"+h.formatInputTooLong(c.val(),h.maximumInputLength)+"</li>"):a(""));h.formatSearching&&0===this.findHighlightableChoices().length&&a("<li class='select2-searching'>"+h.formatSearching()+"</li>"),c.addClass("select2-active"),this.removeHighlight(),(s=this.tokenize())!=t&&null!=s&&c.val(s),this.resultsPage=1,h.query({element:h.element,term:c.val(),page:this.resultsPage,context:null,matcher:h.matcher,callback:this.bind((function(o){var s;if(l==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(this.context=o.context===t?null:o.context,this.opts.createSearchChoice&&""!==c.val()&&((s=this.opts.createSearchChoice.call(u,c.val(),o.results))!==t&&null!==s&&u.id(s)!==t&&null!==u.id(s)&&0===e(o.results).filter((function(){return r(u.id(this),u.id(s))})).length&&o.results.unshift(s)),0===o.results.length&&b(h.formatNoMatches,"formatNoMatches"))return void a("<li class='select2-no-results'>"+h.formatNoMatches(c.val())+"</li>");d.empty(),u.opts.populateResults.call(this,d,o.results,{term:c.val(),page:this.resultsPage,context:null}),!0===o.more&&b(h.formatLoadMore,"formatLoadMore")&&(d.append("<li class='select2-more-results'>"+u.opts.escapeMarkup(h.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout((function(){u.loadMoreIfNeeded()}),10)),this.postprocessResults(o,i),n(),this.opts.element.trigger({type:"select2-loaded",items:o})}}))})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){!function(e){e[0]!==document.activeElement&&window.setTimeout((function(){var t,i=e[0],n=e.val().length;e.focus(),e.is(":visible")&&i===document.activeElement&&(i.setSelectionRange?i.setSelectionRange(n,n):i.createTextRange&&((t=i.createTextRange()).collapse(!1),t.select()))}),0)}(this.search)},selectHighlighted:function(e){var t=this.highlight(),i=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");i?(this.highlight(t),this.onSelect(i,e)):e&&e.noFocus&&this.close()},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var e=this.select.children("option").first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&e||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.text()&&""===e.val())return e}},initContainerWidth:function(){var i=function(){var i,n,r,a,o;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if((i=this.opts.element.attr("style"))!==t)for(a=0,o=(n=i.split(";")).length;o>a;a+=1)if(null!==(r=n[a].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&r.length>=1)return r[1];return"resolve"===this.opts.width?(i=this.opts.element.css("width")).indexOf("%")>0?i:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);null!==i&&this.container.css("width",i)}}),S=x(C,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow'><b></b></span>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var i,n,r;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.search.focus(),(i=this.search.get(0)).createTextRange?((n=i.createTextRange()).collapse(!1),n.select()):i.setSelectionRange&&(r=this.search.val().length,i.setSelectionRange(r,r)),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(e){this.opened()&&(this.parent.close.apply(this,arguments),e=e||{focus:!0},this.focusser.removeAttr("disabled"),e.focus&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments)},initContainer:function(){var t,i=this.container,n=this.dropdown;this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=i.find(".select2-choice"),this.focusser=i.find(".select2-focusser"),this.focusser.attr("id","s2id_autogen"+k()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),this.focusser.attr("tabindex",this.elementTabIndex),this.search.on("keydown",this.bind((function(e){if(this.isInterfaceEnabled()){if(e.which===M.PAGE_UP||e.which===M.PAGE_DOWN)return void h(e);switch(e.which){case M.UP:case M.DOWN:return this.moveHighlight(e.which===M.UP?-1:1),void h(e);case M.ENTER:return this.selectHighlighted(),void h(e);case M.TAB:return void this.selectHighlighted({noFocus:!0});case M.ESC:return this.cancel(e),void h(e)}}}))),this.search.on("blur",this.bind((function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind((function(){this.search.focus()})),0)}))),this.focusser.on("keydown",this.bind((function(e){if(this.isInterfaceEnabled()&&e.which!==M.TAB&&!M.isControl(e)&&!M.isFunctionKey(e)&&e.which!==M.ESC){if(!1===this.opts.openOnEnter&&e.which===M.ENTER)return void h(e);if(e.which==M.DOWN||e.which==M.UP||e.which==M.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void h(e)}return e.which==M.DELETE||e.which==M.BACKSPACE?(this.opts.allowClear&&this.clear(),void h(e)):void 0}}))),s(this.focusser),this.focusser.on("keyup-change input",this.bind((function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}}))),t.on("mousedown","abbr",this.bind((function(e){this.isInterfaceEnabled()&&(this.clear(),function(e){e.preventDefault(),e.stopImmediatePropagation()}(e),this.close(),this.selection.focus())}))),t.on("mousedown",this.bind((function(t){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),h(t)}))),n.on("mousedown",this.bind((function(){this.search.focus()}))),t.on("focus",this.bind((function(e){h(e)}))),this.focusser.on("focus",this.bind((function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")}))).on("blur",this.bind((function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))}))),this.search.on("focus",this.bind((function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")}))),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(t){var i=this.selection.data("select2-data");if(i){var n=e.Event("select2-clearing");if(this.opts.element.trigger(n),n.isDefaultPrevented())return;var r=this.getPlaceholderOption();this.opts.element.val(r?r.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==t&&(this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,(function(i){i!==t&&null!==i&&(e.updateSelection(i),e.close(),e.setPlaceholder())}))}},isPlaceholderOptionSelected:function(){var e;return!!this.getPlaceholder()&&((e=this.getPlaceholderOption())!==t&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val())},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var n=e.find("option").filter((function(){return this.selected}));t(i.optionToData(n))}:"data"in t&&(t.initSelection=t.initSelection||function(i,n){var a=i.val(),o=null;t.query({matcher:function(e,i,n){var s=r(a,t.id(n));return s&&(o=n),s},callback:e.isFunction(n)?function(){n(o)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,i){var n=0,a=this;if(this.findHighlightableChoices().each2((function(e,t){return r(a.id(t.data("select2-data")),a.opts.element.val())?(n=e,!1):void 0})),!1!==i&&(!0===t&&n>=0?this.highlight(n):this.highlight(0)),!0===t){var o=this.opts.minimumResultsForSearch;o>=0&&this.showSearch(y(e.results)>=o)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var i=this.opts.element.val(),n=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),t&&t.noFocus||this.focusser.focus(),r(i,this.id(e))||this.triggerChange({added:e,removed:n})}},updateSelection:function(e){var i,n,r=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),r.empty(),null!==e&&(i=this.opts.formatSelection(e,r,this.opts.escapeMarkup)),i!==t&&r.append(i),(n=this.opts.formatSelectionCssClass(e,r))!==t&&r.addClass(n),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,i=!1,n=null,r=this,a=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(i=arguments[1]),this.select)this.select.val(e).find("option").filter((function(){return this.selected})).each2((function(e,t){return n=r.optionToData(t),!1})),this.updateSelection(n),this.setPlaceholder(),i&&this.triggerChange({added:n,removed:a});else{if(!e&&0!==e)return void this.clear(i);if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,(function(e){r.opts.element.val(e?r.id(e):""),r.updateSelection(e),r.setPlaceholder(),i&&r.triggerChange({added:e,removed:a})}))}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var i,n=!1;return 0===arguments.length?((i=this.selection.data("select2-data"))==t&&(i=null),i):(arguments.length>1&&(n=arguments[1]),void(e?(i=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),n&&this.triggerChange({added:e,removed:i})):this.clear(n)))}}),T=x(C,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var n=[];e.find("option").filter((function(){return this.selected})).each2((function(e,t){n.push(i.optionToData(t))})),t(n)}:"data"in t&&(t.initSelection=t.initSelection||function(i,n){var o=a(i.val(),t.separator),s=[];t.query({matcher:function(i,n,a){var l=e.grep(o,(function(e){return r(e,t.id(a))})).length;return l&&s.push(a),l},callback:e.isFunction(n)?function(){for(var e=[],i=0;i<o.length;i++)for(var a=o[i],l=0;l<s.length;l++){var c=s[l];if(r(a,t.id(c))){e.push(c),s.splice(l,1);break}}n(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments)},initContainer:function(){var t,i=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(i);var n=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",(function(){n.search[0].focus(),n.selectChoice(e(this))})),this.search.attr("id","s2id_autogen"+k()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.on("input paste",this.bind((function(){this.isInterfaceEnabled()&&(this.opened()||this.open())}))),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind((function(e){if(this.isInterfaceEnabled()){++this.keydowns;var i=t.find(".select2-search-choice-focus"),n=i.prev(".select2-search-choice:not(.select2-locked)"),r=i.next(".select2-search-choice:not(.select2-locked)"),a=d(this.search);if(i.length&&(e.which==M.LEFT||e.which==M.RIGHT||e.which==M.BACKSPACE||e.which==M.DELETE||e.which==M.ENTER)){var o=i;return e.which==M.LEFT&&n.length?o=n:e.which==M.RIGHT?o=r.length?r:null:e.which===M.BACKSPACE?(this.unselect(i.first()),this.search.width(10),o=n.length?n:r):e.which==M.DELETE?(this.unselect(i.first()),this.search.width(10),o=r.length?r:null):e.which==M.ENTER&&(o=null),this.selectChoice(o),h(e),void(o&&o.length||this.open())}if((e.which===M.BACKSPACE&&1==this.keydowns||e.which==M.LEFT)&&0==a.offset&&!a.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),void h(e);if(this.selectChoice(null),this.opened())switch(e.which){case M.UP:case M.DOWN:return this.moveHighlight(e.which===M.UP?-1:1),void h(e);case M.ENTER:return this.selectHighlighted(),void h(e);case M.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case M.ESC:return this.cancel(e),void h(e)}if(e.which!==M.TAB&&!M.isControl(e)&&!M.isFunctionKey(e)&&e.which!==M.BACKSPACE&&e.which!==M.ESC){if(e.which===M.ENTER){if(!1===this.opts.openOnEnter)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===M.PAGE_UP||e.which===M.PAGE_DOWN)&&h(e),e.which===M.ENTER&&h(e)}}}))),this.search.on("keyup",this.bind((function(){this.keydowns=0,this.resizeSearch()}))),this.search.on("blur",this.bind((function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))}))),this.container.on("click",i,this.bind((function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))}))),this.container.on("focus",i,this.bind((function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}))),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,(function(i){i!==t&&null!==i&&(e.updateSelection(i),e.close(),e.clearSearch())}))}},clearSearch:function(){var e=this.getPlaceholder(),i=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(e).addClass("select2-default"),this.search.width(i>0?i:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.updateResults(!0),this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var i=[],r=[],a=this;e(t).each((function(){n(a.id(this),i)<0&&(i.push(a.id(this)),r.push(this))})),t=r,this.selection.find(".select2-search-choice").remove(),e(t).each((function(){a.addSelectedChoice(this)})),a.postprocessResults()},tokenize:function(){var e=this.search.val();null!=(e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts))&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){this.triggerSelect(e)&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(e,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(i){var n,r,a=!i.locked,o=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),s=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=a?o:s,c=this.id(i),d=this.getVal();(n=this.opts.formatSelection(i,l.find("div"),this.opts.escapeMarkup))!=t&&l.find("div").replaceWith("<div>"+n+"</div>"),(r=this.opts.formatSelectionCssClass(i,l.find("div")))!=t&&l.addClass(r),a&&l.find(".select2-search-choice-close").on("mousedown",h).on("click dblclick",this.bind((function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").fadeOut("fast",this.bind((function(){this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()}))).dequeue(),h(t))}))).on("focus",this.bind((function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}))),l.data("select2-data",i),l.insertBefore(this.searchContainer),d.push(c),this.setVal(d)},unselect:function(t){var i,r,a=this.getVal();if(0===(t=t.closest(".select2-search-choice")).length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(i=t.data("select2-data")){for(;(r=n(this.id(i),a))>=0;)a.splice(r,1),this.setVal(a),this.select&&this.postprocessResults();var o=e.Event("select2-removing");o.val=this.id(i),o.choice=i,this.opts.element.trigger(o),o.isDefaultPrevented()||(t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}))}},postprocessResults:function(e,t,i){var r=this.getVal(),a=this.results.find(".select2-result"),o=this.results.find(".select2-result-with-children"),s=this;a.each2((function(e,t){n(s.id(t.data("select2-data")),r)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))})),o.each2((function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")})),-1==this.highlight()&&!1!==i&&s.highlight(0),!this.opts.createSearchChoice&&!a.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&b(s.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+s.opts.formatNoMatches(s.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-o(this.search)},resizeSearch:function(){var e,t,i,n,r=o(this.search);e=u(this.search)+10,t=this.search.offset().left,e>(n=(i=this.selection.width())-(t-this.selection.offset().left)-r)&&(n=i-r),40>n&&(n=i-r),0>=n&&(n=e),this.search.width(Math.floor(n))},getVal:function(){var e;return this.select?null===(e=this.select.val())?[]:e:a(e=this.opts.element.val(),this.opts.separator)},setVal:function(t){var i;this.select?this.select.val(t):(i=[],e(t).each((function(){n(this,i)<0&&i.push(this)})),this.opts.element.val(0===i.length?"":i.join(this.opts.separator)))},buildChangeDetails:function(e,t){t=t.slice(0),e=e.slice(0);for(var i=0;i<t.length;i++)for(var n=0;n<e.length;n++)r(this.opts.id(t[i]),this.opts.id(e[n]))&&(t.splice(i,1),i>0&&i--,e.splice(n,1),n--);return{added:t,removed:e}},val:function(i,n){var r,a=this;if(0===arguments.length)return this.getVal();if((r=this.data()).length||(r=[]),!i&&0!==i)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(n&&this.triggerChange({added:this.data(),removed:r}));if(this.setVal(i),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),n&&this.triggerChange(this.buildChangeDetails(r,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,(function(t){var i=e.map(t,a.id);a.setVal(i),a.updateSelection(t),a.clearSearch(),n&&a.triggerChange(a.buildChangeDetails(r,a.data()))}))}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],i=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each((function(){t.push(i.opts.id(e(this).data("select2-data")))})),this.setVal(t),this.triggerChange()},data:function(t,i){var n,r,a=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map((function(){return e(this).data("select2-data")})).get():(r=this.data(),t||(t=[]),n=e.map(t,(function(e){return a.opts.id(e)})),this.setVal(n),this.updateSelection(t),this.clearSearch(),void(i&&this.triggerChange(this.buildChangeDetails(r,this.data()))))}}),e.fn.select2=function(){var i,r,a,o,s,l=Array.prototype.slice.call(arguments,0),c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],d=["opened","isFocused","container","dropdown"],h=["val","data"],u={search:"externalSearch"};return this.each((function(){if(0===l.length||"object"==typeof l[0])(i=0===l.length?{}:e.extend({},l[0])).element=e(this),"select"===i.element.get(0).tagName.toLowerCase()?s=i.element.prop("multiple"):(s=i.multiple||!1,"tags"in i&&(i.multiple=s=!0)),(r=s?new T:new S).init(i);else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(n(l[0],c)<0)throw"Unknown method: "+l[0];if(o=t,(r=e(this).data("select2"))===t)return;if("container"===(a=l[0])?o=r.container:"dropdown"===a?o=r.dropdown:(u[a]&&(a=u[a]),o=r[a].apply(r,l.slice(1))),n(l[0],d)>=0||n(l[0],h)&&1==l.length)return!1}})),o===t?this:o},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,i,n){var r=[];return f(e.text,i.term,r,n),r.join("")},formatSelection:function(e,i,n){return e?n(e.text):t},sortResults:function(e){return e},formatResultCssClass:function(){return t},formatSelectionCssClass:function(){return t},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){var i=t-e.length;return"Please enter "+i+" more character"+(1==i?"":"s")},formatInputTooLong:function(e,t){var i=e.length-t;return"Please delete "+i+" character"+(1==i?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(e,t){return i(""+t).toUpperCase().indexOf(i(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:function(e,i,n,a){var o,s,l,c,d,h=e,u=!1;if(!a.createSearchChoice||!a.tokenSeparators||a.tokenSeparators.length<1)return t;for(;;){for(s=-1,l=0,c=a.tokenSeparators.length;c>l&&(d=a.tokenSeparators[l],!((s=e.indexOf(d))>=0));l++);if(0>s)break;if(o=e.substring(0,s),e=e.substring(s+d.length),o.length>0&&((o=a.createSearchChoice.call(this,o,i))!==t&&null!==o&&a.id(o)!==t&&null!==a.id(o))){for(u=!1,l=0,c=i.length;c>l;l++)if(r(a.id(o),a.id(i[l]))){u=!0;break}u||n(o)}}return h!==e?e:void 0},escapeMarkup:g,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return t}},e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:m,local:v,tags:_},util:{debounce:c,markMatch:f,escapeMarkup:g,stripDiacritics:i},class:{abstract:C,single:S,multi:T}}}}(jQuery)},function(e,t){!function(){"use strict";if(!window.hasOwnProperty("TEST_BUILD")){window.templateEngine=new function(){var e={createTemplate:function(e){$("#"+e.replace(".","\\.")).html();return{render:function(t){return e=e.replace(".ejs",""),window.JST["templates/"+e](t)}}}};return e}}}()},function(e,t){!function(){"use strict";var e=null;window.isCoordinator=function(t){if(null===e){var i="cluster/amICoordinator";frontendConfig.react&&(i=arangoHelper.databaseUrl("/_admin/aardvark/cluster/amICoordinator")),$.ajax(i,{async:!0,success:function(i){e=i,t(!1,i)},error:function(i){e=i,t(!0,i)}})}else t(!1,e)},window.versionHelper={fromString:function(e){var t=e.replace(/-[a-zA-Z0-9_-]*$/g,"").split(".");return{major:parseInt(t[0],10)||0,minor:parseInt(t[1],10)||0,patch:parseInt(t[2],10)||0,toString:function(){return this.major+"."+this.minor+"."+this.patch}}},toString:function(e){return e.major+"."+e.minor+"."+e.patch},toDocuVersion:function(e){return e.toLowerCase().indexOf("devel")>=0||e.toLowerCase().indexOf("rc")>=0?"devel":e.substring(0,3)}},window.arangoHelper={alphabetColors:{a:"rgb(0,0,180)",b:"rgb(175,13,102)",c:"rgb(146,248,70)",d:"rgb(255,200,47)",e:"rgb(255,118,0)",f:"rgb(185,185,185)",g:"rgb(235,235,222)",h:"rgb(100,100,100)",i:"rgb(255,255,0)",j:"rgb(55,19,112)",k:"rgb(255,255,150)",l:"rgb(202,62,94)",m:"rgb(205,145,63)",n:"rgb(12,75,100)",o:"rgb(255,0,0)",p:"rgb(175,155,50)",q:"rgb(0,0,0)",r:"rgb(37,70,25)",s:"rgb(121,33,135)",t:"rgb(83,140,208)",u:"rgb(0,154,37)",v:"rgb(178,220,205)",w:"rgb(255,152,213)",x:"rgb(0,0,74)",y:"rgb(175,200,74)",z:"rgb(63,25,12)"},statusColors:{fatal:"#ad5148",info:"rgb(88, 214, 141)",error:"rgb(236, 112, 99)",warning:"#ffb075",debug:"rgb(64, 74, 83)"},getCurrentJwt:function(){return sessionStorage.getItem("jwt")},getCurrentJwtUsername:function(){return sessionStorage.getItem("jwtUser")},setCurrentJwt:function(e,t){sessionStorage.setItem("jwt",e),sessionStorage.setItem("jwtUser",t)},checkJwt:function(){$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_api/version"),contentType:"application/json",processData:!1,async:!0,error:function(e){401===e.status&&window.App.navigate("login",{trigger:!0})}})},getCoordinatorShortName:function(e){var t;return window.clusterHealth&&_.each(window.clusterHealth,(function(i,n){e===n&&(t=i.ShortName)})),arangoHelper.escapeHtml(t)},getDatabaseShortName:function(e){return this.getCoordinatorShortName(e)},getDatabaseServerId:function(e){var t;return window.clusterHealth&&_.each(window.clusterHealth,(function(i,n){e===i.ShortName&&(t=n)})),t},lastNotificationMessage:null,CollectionTypes:{},systemAttributes:function(){return{_id:!0,_rev:!0,_key:!0,_bidirectional:!0,_vertices:!0,_from:!0,_to:!0,$id:!0}},getCurrentSub:function(){return window.App.naviView.activeSubMenu},parseError:function(e,t){var i;try{i=JSON.parse(t.responseText).errorMessage}catch(n){i=n}this.arangoError(e,i)},setCheckboxStatus:function(e){_.each($(e).find("ul").find("li"),(function(e){$(e).hasClass("nav-header")||($(e).find("input").attr("checked")?$(e).find("i").hasClass("css-round-label")?($(e).find("i").removeClass("fa-circle-o"),$(e).find("i").addClass("fa-dot-circle-o")):($(e).find("i").removeClass("fa-square-o"),$(e).find("i").addClass("fa-check-square-o")):$(e).find("i").hasClass("css-round-label")?($(e).find("i").removeClass("fa-dot-circle-o"),$(e).find("i").addClass("fa-circle-o")):($(e).find("i").removeClass("fa-check-square-o"),$(e).find("i").addClass("fa-square-o")))}))},parseInput:function(e){var t,i=$(e).val();try{t=JSON.parse(i)}catch(n){t=i}return t},calculateCenterDivHeight:function(){var e=$(".navbar").height(),t=$(".footer").height();return $(window).height()-t-e-110},createTooltips:function(e,t){var i=this,n={arrow:!0,multiple:!1,content:function(e){var t=e.getAttribute("title");return e.removeAttribute("title"),t}};if(t&&(n.placement=t),e||(e=".tippy"),"object"===typeof e)_.each(e,(function(e){i.lastTooltips=new tippy(e,n)}));else{if(e.indexOf(",")>-1){var r=e.split(",");_.each(r,(function(e){i.lastTooltips=new tippy(e,n)}))}this.lastTooltips=new tippy(e,n)}},fixTooltips:function(e,t){arangoHelper.createTooltips(e,t)},currentDatabase:function(e){return frontendConfig.db?e(!1,frontendConfig.db):e(!0,void 0),frontendConfig.db},allHotkeys:{jsoneditor:{name:"AQL editor",content:[{label:"Execute Query",letter:"Ctrl/Cmd + Return"},{label:"Execute Selected Query",letter:"Ctrl/Cmd + Alt + Return"},{label:"Explain Query",letter:"Ctrl/Cmd + Shift + Return"},{label:"Save Query",letter:"Ctrl/Cmd + Shift + S"},{label:"Open search",letter:"Ctrl + Space"},{label:"Toggle comments",letter:"Ctrl/Cmd + Shift + C"},{label:"Undo",letter:"Ctrl/Cmd + Z"},{label:"Redo",letter:"Ctrl/Cmd + Shift + Z"},{label:"Increase Font Size",letter:"Shift + Alt + Up"},{label:"Decrease Font Size",letter:"Shift + Alt + Down"}]},doceditor:{name:"Document editor",content:[{label:"Insert",letter:"Ctrl + Insert"},{label:"Save",letter:"Ctrl + Return, Cmd + Return"},{label:"Append",letter:"Ctrl + Shift + Insert"},{label:"Duplicate",letter:"Ctrl + D"},{label:"Remove",letter:"Ctrl + Delete"}]},modals:{name:"Modal",content:[{label:"Submit",letter:"Return"},{label:"Close",letter:"Esc"},{label:"Navigate buttons",letter:"Arrow keys"},{label:"Navigate content",letter:"Tab"}]}},hotkeysFunctions:{scrollDown:function(){window.scrollBy(0,180)},scrollUp:function(){window.scrollBy(0,-180)},showHotkeysModal:function(){var e=window.arangoHelper.allHotkeys;window.modalView.show("modalHotkeys.ejs","Keyboard Shortcuts",[],e)}},buildSubNavBar:function(e,t){var i;$("#subNavigationBar .bottom").html(""),_.each(e,(function(e,n){i="",e.active&&(i+=" active"),(e.disabled||t)&&(i+=" disabled"),$("#subNavigationBar .bottom").append('<li class="subMenuEntry '+i+'"><a>'+n+"</a></li>"),e.disabled||t||$("#subNavigationBar .bottom").children().last().bind("click",(function(){window.App.navigate(e.route,{trigger:!0})}))}))},buildUserSubNav:function(e,t){var i={General:{route:"#user/"+encodeURIComponent(e)},Permissions:{route:"#user/"+encodeURIComponent(e)+"/permission"}};i[t].active=!0,this.buildSubNavBar(i)},buildGraphSubNav:function(e,t){var i={Content:{route:"#graph/"+encodeURIComponent(e)},Settings:{route:"#graph/"+encodeURIComponent(e)+"/settings"}};i[t].active=!0,this.buildSubNavBar(i)},buildNodeSubNav:function(e,t,i){var n={Dashboard:{route:"#node/"+encodeURIComponent(e)}};n[t].active=!0,n[i].disabled=!0,this.buildSubNavBar(n)},buildNodesSubNav:function(e,t){var i={Overview:{route:"#nodes"},Shards:{route:"#shards"}};i[e].active=!0,t&&(i[e].disabled=!0),this.buildSubNavBar(i,t)},buildServicesSubNav:function(e,t){var i={Store:{route:"#services/install"},Upload:{route:"#services/install/upload"},New:{route:"#services/install/new"},GitHub:{route:"#services/install/github"},Remote:{route:"#services/install/remote"}};frontendConfig.foxxStoreEnabled||delete i.Store,i[e].active=!0,t&&(i[t].disabled=!0),this.buildSubNavBar(i)},scaleability:void 0,buildCollectionSubNav:function(e,t){var i={Content:{route:"#collection/"+encodeURIComponent(e)+"/documents/1"},Indexes:{route:"#cIndices/"+encodeURIComponent(e)},Info:{route:"#cInfo/"+encodeURIComponent(e)},Settings:{route:"#cSettings/"+encodeURIComponent(e)},Schema:{route:"#cSchema/"+encodeURIComponent(e)}};i[t].active=!0,this.buildSubNavBar(i)},enableKeyboardHotkeys:function(e){var t=window.arangoHelper.hotkeysFunctions;!0===e&&($(document).on("keydown",null,"j",t.scrollDown),$(document).on("keydown",null,"k",t.scrollUp))},databaseAllowed:function(e){var t=function(t,i){t?arangoHelper.arangoError("",""):$.ajax({type:"GET",cache:!1,url:this.databaseUrl("/_api/database/",i),contentType:"application/json",processData:!1,success:function(){e(!1,!0)},error:function(){e(!0,!1)}})}.bind(this);this.currentDatabase(t)},arangoNotification:function(e,t,i){window.App.notificationList.add({title:e,content:t,info:i,type:"success"})},arangoError:function(e,t,i){$("#offlinePlaceholder").is(":visible")||window.App.notificationList.add({title:e,content:t,info:i,type:"error"})},arangoWarning:function(e,t,i){window.App.notificationList.add({title:e,content:t,info:i,type:"warning"})},arangoMessage:function(e,t,i){window.App.notificationList.add({title:e,content:t,info:i,type:"info"})},hideArangoNotifications:function(){Noty.closeAll()},openDocEditor:function(e,t,i){var n=e.split("/"),r=this,a=new window.DocumentView({collection:window.App.arangoDocumentStore});a.breadcrumb=function(){},a.colid=n[0],a.docid=n[1],a.el=".arangoFrame .innerDiv",a.render(),a.setType(t),$(".arangoFrame .headerBar").remove(),$(".edge-edit-container").remove(),$(".arangoFrame .outerDiv").prepend('<i class="fa fa-times"></i>'),$(".arangoFrame .outerDiv").click((function(){r.closeDocEditor()})),$(".arangoFrame .innerDiv").click((function(e){e.stopPropagation()})),$(".fa-times").click((function(){r.closeDocEditor()})),$(".arangoFrame").show(),a.customView=!0,a.customDeleteFunction=function(){window.modalView.hide(),$(".arangoFrame").hide()},a.customSaveFunction=function(e){r.closeDocEditor(),i&&i(e)},$(".arangoFrame #deleteDocumentButton").click((function(){a.deleteDocumentModal()})),$(".arangoFrame #saveDocumentButton").click((function(){a.saveDocument()})),$(".arangoFrame #deleteDocumentButton").css("display","none"),$(".document-link").hover((function(){$(this).css("cursor","default"),$(this).css("text-decoration","none")}))},closeDocEditor:function(){$(".arangoFrame .outerDiv .fa-times").remove(),$(".arangoFrame").hide()},addAardvarkJob:function(e,t){$.ajax({cache:!1,type:"POST",url:this.databaseUrl("/_admin/aardvark/job"),data:JSON.stringify(e),contentType:"application/json",processData:!1,success:function(e){t&&t(!1,e)},error:function(e){t&&t(!0,e)}})},deleteAardvarkJob:function(e,t){$.ajax({cache:!1,type:"DELETE",url:this.databaseUrl("/_admin/aardvark/job/"+encodeURIComponent(e)),contentType:"application/json",processData:!1,success:function(e){e&&e.error&&404!==e.errorNum?e.errorNum&&e.errorMessage?arangoHelper.arangoError("Error ".concat(e.errorNum),e.errorMessage):arangoHelper.arangoError("Failure","Got unexpected server response: "+JSON.stringify(e)):t&&t(!1,e)},error:function(e){t&&t(!0,e)}})},deleteAllAardvarkJobs:function(e){$.ajax({cache:!1,type:"DELETE",url:this.databaseUrl("/_admin/aardvark/job"),contentType:"application/json",processData:!1,success:function(t){t.result&&t.result.length>0&&_.each(t.result,(function(e){e.error&&(e.errorNum&&e.errorMessage?arangoHelper.arangoError("Error ".concat(e.errorNum),e.errorMessage):arangoHelper.arangoError("Failure","Got unexpected server response: "+JSON.stringify(e)))})),e&&e(!1,t)},error:function(t){e&&e(!0,t)}})},getAardvarkJobs:function(e){$.ajax({cache:!1,type:"GET",url:this.databaseUrl("/_admin/aardvark/job"),contentType:"application/json",processData:!1,success:function(t){e&&e(!1,t)},error:function(t){e&&e(!0,t)}})},getPendingJobs:function(e){$.ajax({cache:!1,type:"GET",url:this.databaseUrl("/_api/job/pending"),contentType:"application/json",processData:!1,success:function(t){e(!1,t)},error:function(t){e(!0,t)}})},syncAndReturnUnfinishedAardvarkJobs:function(e,t){var i=function(i,n){if(i)t(!0);else{var r=function(i,r){if(i)arangoHelper.arangoError("","");else{var a=[];r.length>0?_.each(n,(function(t){if(t.type===e||void 0===t.type){var i=!1;_.each(r,(function(e){t.id===e&&(i=!0)})),i?a.push({collection:t.collection,id:t.id,type:t.type,desc:t.desc}):window.arangoHelper.deleteAardvarkJob(t.id)}})):n.length>0&&this.deleteAllAardvarkJobs(),t(!1,a)}}.bind(this);this.getPendingJobs(r)}}.bind(this);this.getAardvarkJobs(i)},getRandomToken:function(){return Math.round((new Date).getTime())},isSystemAttribute:function(e){return this.systemAttributes()[e]},isSystemCollection:function(e){return"_"===e.name.substr(0,1)},setDocumentStore:function(e){this.arangoDocumentStore=e},collectionApiType:function(e,t,i){if(t||void 0===this.CollectionTypes[e]){var n=function(t,i,n){t?n&&n(t):(this.CollectionTypes[e]=i.type,3===this.CollectionTypes[e]?n(!1,"edge",i):n(!1,"document",i))}.bind(this);this.arangoDocumentStore.getCollectionInfo(e,n,i)}else 3===this.CollectionTypes[e]?i(!1,"edge"):i(!1,"document")},collectionType:function(e){return e&&""!==e.name?(t=2===e.type?"document":3===e.type?"edge":"unknown",this.isSystemCollection(e)&&(t+=" (system)"),t):"-";var t},formatDT:function(e){var t=function(e){return e<10?"0"+e:e};return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+" "+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())},escapeHtml:function(e){return"string"!==typeof e&&(e=JSON.stringify(e,null,2)),String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},backendUrl:function(e){return frontendConfig.basePath+e},databaseUrl:function(e,t){if("/_db/"===e.substr(0,5))throw new Error("Calling databaseUrl with a databased url ("+e+") doesn't make any sense");return t||(t="_system",frontendConfig&&frontendConfig.db&&(t=frontendConfig.db)),t||(t="_system"),this.backendUrl("/_db/"+encodeURIComponent(t)+e)},showAuthDialog:function(){var e=!0;return"false"===localStorage.getItem("authenticationNotification")&&(e=!1),e},doNotShowAgain:function(){localStorage.setItem("authenticationNotification",!1)},renderEmpty:function(e,t){t?$("#content").html('<div class="noContent"><p>'+e+'<i class="'+t+'"></i></p></div>'):$("#content").html('<div class="noContent"><p>'+e+"</p></div>")},initSigma:function(){try{sigma.classes.graph.addMethod("neighbors",(function(e){var t,i={},n=this.allNeighborsIndex[e]||{};for(t in n)i[t]=this.nodesIndex[t];return i})),sigma.classes.graph.addMethod("getNodeEdges",(function(e){var t=this.edges(),i=[];return _.each(t,(function(t){t.source!==e&&t.target!==e||i.push(t.id)})),i})),sigma.classes.graph.addMethod("getNodeEdgesCount",(function(e){return this.allNeighborsCount[e]})),sigma.classes.graph.addMethod("getNodesCount",(function(){return this.nodesArray.length}))}catch(e){}},downloadLocalBlob:function(e,t){var i;if("csv"===t&&(i="text/csv; charset=utf-8"),"json"===t&&(i="application/json; charset=utf-8"),i){var n=new Blob([e],{type:i}),r=window.URL.createObjectURL(n),a=document.createElement("a");document.body.appendChild(a),a.style="display: none",a.href=r,a.download="results-"+window.frontendConfig.db+"."+t,a.click(),window.setTimeout((function(){window.URL.revokeObjectURL(r),document.body.removeChild(a)}),500)}},download:function(e,t){$.ajax({type:"GET",url:e,success:function(e,i,n){if(t)t(e);else{var r=new Blob([JSON.stringify(e)],{type:n.getResponseHeader("Content-Type")||"application/octet-stream"}),a=window.URL.createObjectURL(r),o=document.createElement("a");document.body.appendChild(o),o.style="display: none",o.href=a,o.download=n.getResponseHeader("Content-Disposition").replace(/.* filename="([^")]*)"/,"$1"),o.click(),window.setTimeout((function(){window.URL.revokeObjectURL(a),document.body.removeChild(o)}),500)}}})},downloadPost:function(e,t,i,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===this.readyState&&200===this.status){i&&i();var e=document.createElement("a");e.download=this.getResponseHeader("Content-Disposition").replace(/.* filename="([^")]*)"/,"$1"),document.body.appendChild(e);var t=window.URL.createObjectURL(this.response);e.href=t,e.click(),window.setTimeout((function(){window.URL.revokeObjectURL(t),document.body.removeChild(e)}),500)}else 4===this.readyState&&void 0!==n&&n(this.status,this.statusText)},r.open("POST",e),window.arangoHelper.getCurrentJwt()&&r.setRequestHeader("Authorization","bearer "+window.arangoHelper.getCurrentJwt()),r.responseType="blob",r.send(t)},checkCollectionPermissions:function(e,t){var i=arangoHelper.databaseUrl("/_api/user/"+encodeURIComponent(window.App.userCollection.activeUser)+"/database/"+encodeURIComponent(frontendConfig.db)+"/"+encodeURIComponent(e));$.ajax({type:"GET",url:i,contentType:"application/json",success:function(e){"ro"===e.result&&t()},error:function(e){arangoHelper.arangoError("User","Could not fetch collection permissions.")}})},checkDatabasePermissions:function(e,t){var i=arangoHelper.databaseUrl("/_api/user/"+encodeURIComponent(window.App.userCollection.activeUser)+"/database/"+encodeURIComponent(frontendConfig.db));$.ajax({type:"GET",url:i,contentType:"application/json",success:function(i){"ro"===i.result?e&&e(!0):"rw"===i.result?t&&t(!1):"none"===i.result&&(frontendConfig.authenticationEnabled||t&&t(!1))},error:function(e){arangoHelper.arangoError("User","Could not fetch collection permissions.")}})},getFoxxFlags:function(){var e={},t=$("#new-app-flag-replace")[0];t&&(e.replace=Boolean(t.checked));var i=$("#new-app-flag-teardown")[0];i&&(e.teardown=Boolean(i.checked));var n=$("#new-app-flag-setup")[0];return n&&(e.setup=Boolean(n.checked)),e},createMountPointModal:function(e,t,i){var n,r=[],a=[];window.App.replaceApp&&(n=(n=window.App.replaceAppData.mount).substr(1,n.length)),a.push(window.modalView.createTextEntry("new-app-mount","Mount point",n,"The path the app will be mounted. Is not allowed to start with _","mountpoint",!1,[{rule:Joi.string().required(),msg:""}])),window.App.replaceApp&&a.push(window.modalView.createCheckboxEntry("new-app-flag-teardown","Run teardown?",!1,"Should the existing service's teardown script be executed before replacing the service?",!1)),a.push(window.modalView.createCheckboxEntry("new-app-flag-setup","Run setup?",!0,"Should this service's setup script be executed after installing the service?",!0)),window.App.replaceApp?(a.push(window.modalView.createCheckboxEntry("new-app-flag-replace","Discard configuration and dependency files?",!1,"Should this service's existing configuration and settings be removed completely before replacing the service?",!1)),r.push(window.modalView.createSuccessButton("Replace",e))):r.push(window.modalView.createSuccessButton("Install",e));var o="Create Foxx Service";window.App.replaceApp&&(o="Replace Foxx Service ("+window.App.replaceAppData.mount+")"),window.modalView.show("modalTable.ejs",o,r,a),window.App.replaceApp?($("#new-app-mount").attr("disabled","true"),$("#new-app-replace").attr("checked",!1),$("#new-app-replace").on("click",(function(){$("#new-app-replace").prop("checked")?$("#new-app-teardown").attr("disabled",!0):$("#new-app-teardown").attr("disabled",!1)}))):window.modalView.modalBindValidation({id:"new-app-mount",validateInput:function(){return[{rule:Joi.string().regex(/(\/|^)APP(\/|$)/i,{invert:!0}),msg:"May not contain APP"},{rule:Joi.string().regex(/^([a-zA-Z0-9_\-/]+)+$/),msg:"Can only contain [a-zA-Z0-9_-/]"},{rule:Joi.string().regex(/([^_]|_open\/)/),msg:"Mountpoints with _ are reserved for internal use"},{rule:Joi.string().regex(/[^/]$/),msg:"May not end with /"},{rule:Joi.string().required().min(1),msg:"Has to be non-empty"}]}})}}}()},function(module,exports){var t;!function(e,t){function i(t,i){var r,a,o,s=t.nodeName.toLowerCase();return"area"===s?(a=(r=t.parentNode).name,!(!t.href||!a||"map"!==r.nodeName.toLowerCase())&&(!!(o=e("img[usemap=#"+a+"]")[0])&&n(o))):(/input|select|textarea|button|object/.test(s)?!t.disabled:"a"===s&&t.href||i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter((function(){return"hidden"===e.css(this,"visibility")})).length}var r=0,a=/^ui-id-\d+$/;e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,i){return"number"==typeof t?this.each((function(){var n=this;setTimeout((function(){e(n).focus(),i&&i.call(n)}),t)})):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter((function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))})).eq(0):this.parents().filter((function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))})).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,r,a=e(this[0]);a.length&&a[0]!==document;){if(("absolute"===(n=a.css("position"))||"relative"===n||"fixed"===n)&&(r=parseInt(a.css("zIndex"),10),!isNaN(r)&&0!==r))return r;a=a.parent()}return 0},uniqueId:function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++r)}))},removeUniqueId:function(){return this.each((function(){a.test(this.id)&&e(this).removeAttr("id")}))}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo((function(t){return function(i){return!!e.data(i,t)}})):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e((function(){var t=document.body,i=t.appendChild(i=document.createElement("div"));i.offsetHeight,e.extend(i.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===i.offsetHeight,e.support.selectstart="onselectstart"in i,t.removeChild(i).style.display="none"})),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],(function(i,n){function r(t,i,n,r){return e.each(a,(function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),r&&(i-=parseFloat(e.css(t,"margin"+this))||0)})),i}var a="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?s["inner"+n].call(this):this.each((function(){e(this).css(o,r(this,i)+"px")}))},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?s["outer"+n].call(this,t):this.each((function(){e(this).css(o,r(this,t,!0,i)+"px")}))}})),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=!!t.length,e.ui.ie6=6===parseFloat(t[1],10)}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",(function(e){e.preventDefault()}))},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var r,a=e.ui[t].prototype;for(r in n)a.plugins[r]=a.plugins[r]||[],a.plugins[r].push([i,n[r]])},call:function(e,t,i){var n,r=e.plugins[t];if(r&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;n<r.length;n++)e.options[r[n][0]]&&r[n][1].apply(e.element,i)}},contains:e.contains,hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",r=!1;return t[n]>0||(t[n]=1,r=t[n]>0,t[n]=0,r)},isOverAxis:function(e,t,i){return e>t&&t+i>e},isOver:function(t,i,n,r,a,o){return e.ui.isOverAxis(t,n,a)&&e.ui.isOverAxis(i,r,o)}}))}(jQuery),function(e,t){var i=0,n=Array.prototype.slice,r=e.cleanData;e.cleanData=function(t){for(var i,n=0;null!=(i=t[n]);n++)try{e(i).triggerHandler("remove")}catch(a){}r(t)},e.widget=function(t,i,n){var r,a,o,s,l=t.split(".")[0];t=t.split(".")[1],r=l+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[l]=e[l]||{},a=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new o(e,t)},e.extend(o,a,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),(s=new i).options=e.widget.extend({},s.options),e.each(n,(function(t,r){e.isFunction(r)&&(n[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,a=this._superApply;return this._super=e,this._superApply=n,t=r.apply(this,arguments),this._super=i,this._superApply=a,t}}())})),o.prototype=e.widget.extend(s,{widgetEventPrefix:a?s.widgetEventPrefix:t},n,{constructor:o,namespace:l,widgetName:t,widgetBaseClass:r,widgetFullName:r}),a?(e.each(a._childConstructors,(function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,o,i._proto)})),delete a._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(i){for(var r,a,o=n.call(arguments,1),s=0,l=o.length;l>s;s++)for(r in o[s])a=o[s][r],o[s].hasOwnProperty(r)&&a!==t&&(e.isPlainObject(a)?i[r]=e.isPlainObject(i[r])?e.widget.extend({},i[r],a):e.widget.extend({},a):i[r]=a);return i},e.widget.bridge=function(i,r){var a=r.prototype.widgetFullName||i;e.fn[i]=function(o){var s="string"==typeof o,l=n.call(arguments,1),c=this;return o=!s&&l.length?e.widget.extend.apply(null,[o].concat(l)):o,s?this.each((function(){var n,r=e.data(this,a);return r?e.isFunction(r[o])&&"_"!==o.charAt(0)?(n=r[o].apply(r,l))!==r&&n!==t?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):void 0:e.error("no such method '"+o+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+o+"'")})):this.each((function(){var t=e.data(this,a);t?t.option(o||{})._init():e.data(this,a,new r(o,this))})),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetName,this),e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,n){var r,a,o,s=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(s={},r=i.split("."),i=r.shift(),r.length){for(a=s[i]=e.widget.extend({},this.options[i]),o=0;o<r.length-1;o++)a[r[o]]=a[r[o]]||{},a=a[r[o]];if(i=r.pop(),n===t)return a[i]===t?null:a[i];a[i]=n}else{if(n===t)return this.options[i]===t?null:this.options[i];s[i]=n}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,n){var r,a=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=r=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,r=this.widget()),e.each(n,(function(n,o){function s(){return t||!0!==a.options.disabled&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?a[o]:o).apply(a,arguments):void 0}"string"!=typeof o&&(s.guid=o.guid=o.guid||s.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+a.eventNamespace,d=l[2];d?r.delegate(d,c,s):i.bind(c,s)}))},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){var i=this;return setTimeout((function(){return("string"==typeof e?i[e]:e).apply(i,arguments)}),t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var r,a,o=this.options[t];if(n=n||{},(i=e.Event(i)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(r in a)r in i||(i[r]=a[r]);return this.element.trigger(i,n),!(e.isFunction(o)&&!1===o.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},(function(t,i){e.Widget.prototype["_"+t]=function(n,r,a){"string"==typeof r&&(r={effect:r});var o,s=r?!0===r||"number"==typeof r?i:r.effect||i:t;"number"==typeof(r=r||{})&&(r={duration:r}),o=!e.isEmptyObject(r),r.complete=a,r.delay&&n.delay(r.delay),o&&e.effects&&(e.effects.effect[s]||!1!==e.uiBackCompat&&e.effects[s])?n[t](r):s!==t&&n[s]?n[s](r.duration,r.easing,a):n.queue((function(i){e(this)[t](),a&&a.call(n[0]),i()}))}})),!1!==e.uiBackCompat&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})}(jQuery),function(e,t){var i=!1;e(document).mouseup((function(e){i=!1})),e.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,(function(e){return t._mouseDown(e)})).bind("click."+this.widgetName,(function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0})),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!i){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,r=1===t.which,a=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(r&&!a&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){n.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),i=!0,!0))}},_mouseMove:function(t){return!e.ui.ie||document.documentMode>=9||t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(jQuery),function(e,t){function i(e,t,i){return[parseInt(e[0],10)*(u.test(e[0])?t/100:1),parseInt(e[1],10)*(u.test(e[1])?i/100:1)]}function n(t,i){return parseInt(e.css(t,i),10)||0}e.ui=e.ui||{};var r,a=Math.max,o=Math.abs,s=Math.round,l=/left|center|right/,c=/top|center|bottom/,d=/[\+\-]\d+%?/,h=/^\w+/,u=/%$/,p=e.fn.position;e.position={scrollbarWidth:function(){if(r!==t)return r;var i,n,a=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=a.children()[0];return e("body").append(a),i=o.offsetWidth,a.css("overflow","scroll"),i===(n=o.offsetWidth)&&(n=a[0].clientWidth),a.remove(),r=i-n},getScrollInfo:function(t){var i=t.isWindow?"":t.element.css("overflow-x"),n=t.isWindow?"":t.element.css("overflow-y"),r="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,a="scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight;return{width:r?e.position.scrollbarWidth():0,height:a?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]);return{element:i,isWindow:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return p.apply(this,arguments);t=e.extend({},t);var r,u,f,g,m,v=e(t.of),_=e.position.getWithinInfo(t.within),b=e.position.getScrollInfo(_),w=v[0],y=(t.collision||"flip").split(" "),x={};return 9===w.nodeType?(u=v.width(),f=v.height(),g={top:0,left:0}):e.isWindow(w)?(u=v.width(),f=v.height(),g={top:v.scrollTop(),left:v.scrollLeft()}):w.preventDefault?(t.at="left top",u=f=0,g={top:w.pageY,left:w.pageX}):(u=v.outerWidth(),f=v.outerHeight(),g=v.offset()),m=e.extend({},g),e.each(["my","at"],(function(){var e,i,n=(t[this]||"").split(" ");1===n.length&&(n=l.test(n[0])?n.concat(["center"]):c.test(n[0])?["center"].concat(n):["center","center"]),n[0]=l.test(n[0])?n[0]:"center",n[1]=c.test(n[1])?n[1]:"center",e=d.exec(n[0]),i=d.exec(n[1]),x[this]=[e?e[0]:0,i?i[0]:0],t[this]=[h.exec(n[0])[0],h.exec(n[1])[0]]})),1===y.length&&(y[1]=y[0]),"right"===t.at[0]?m.left+=u:"center"===t.at[0]&&(m.left+=u/2),"bottom"===t.at[1]?m.top+=f:"center"===t.at[1]&&(m.top+=f/2),r=i(x.at,u,f),m.left+=r[0],m.top+=r[1],this.each((function(){var l,c,d=e(this),h=d.outerWidth(),p=d.outerHeight(),w=n(this,"marginLeft"),C=n(this,"marginTop"),S=h+w+n(this,"marginRight")+b.width,T=p+C+n(this,"marginBottom")+b.height,k=e.extend({},m),A=i(x.my,d.outerWidth(),d.outerHeight());"right"===t.my[0]?k.left-=h:"center"===t.my[0]&&(k.left-=h/2),"bottom"===t.my[1]?k.top-=p:"center"===t.my[1]&&(k.top-=p/2),k.left+=A[0],k.top+=A[1],e.support.offsetFractions||(k.left=s(k.left),k.top=s(k.top)),l={marginLeft:w,marginTop:C},e.each(["left","top"],(function(i,n){e.ui.position[y[i]]&&e.ui.position[y[i]][n](k,{targetWidth:u,targetHeight:f,elemWidth:h,elemHeight:p,collisionPosition:l,collisionWidth:S,collisionHeight:T,offset:[r[0]+A[0],r[1]+A[1]],my:t.my,at:t.at,within:_,elem:d})})),e.fn.bgiframe&&d.bgiframe(),t.using&&(c=function(e){var i=g.left-k.left,n=i+u-h,r=g.top-k.top,s=r+f-p,l={target:{element:v,left:g.left,top:g.top,width:u,height:f},element:{element:d,left:k.left,top:k.top,width:h,height:p},horizontal:0>n?"left":i>0?"right":"center",vertical:0>s?"top":r>0?"bottom":"middle"};h>u&&o(i+n)<u&&(l.horizontal="center"),p>f&&o(r+s)<f&&(l.vertical="middle"),a(o(i),o(n))>a(o(r),o(s))?l.important="horizontal":l.important="vertical",t.using.call(this,e,l)}),d.offset(e.extend(k,{using:c}))}))},e.ui.position={fit:{left:function(e,t){var i,n=t.within,r=n.isWindow?n.scrollLeft:n.offset.left,o=n.width,s=e.left-t.collisionPosition.marginLeft,l=r-s,c=s+t.collisionWidth-o-r;t.collisionWidth>o?l>0&&0>=c?(i=e.left+l+t.collisionWidth-o-r,e.left+=l-i):e.left=c>0&&0>=l?r:l>c?r+o-t.collisionWidth:r:l>0?e.left+=l:c>0?e.left-=c:e.left=a(e.left-s,e.left)},top:function(e,t){var i,n=t.within,r=n.isWindow?n.scrollTop:n.offset.top,o=t.within.height,s=e.top-t.collisionPosition.marginTop,l=r-s,c=s+t.collisionHeight-o-r;t.collisionHeight>o?l>0&&0>=c?(i=e.top+l+t.collisionHeight-o-r,e.top+=l-i):e.top=c>0&&0>=l?r:l>c?r+o-t.collisionHeight:r:l>0?e.top+=l:c>0?e.top-=c:e.top=a(e.top-s,e.top)}},flip:{left:function(e,t){var i,n,r=t.within,a=r.offset.left+r.scrollLeft,s=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,c=e.left-t.collisionPosition.marginLeft,d=c-l,h=c+t.collisionWidth-s-l,u="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>d?(0>(i=e.left+u+p+f+t.collisionWidth-s-a)||i<o(d))&&(e.left+=u+p+f):h>0&&(((n=e.left-t.collisionPosition.marginLeft+u+p+f-l)>0||o(n)<h)&&(e.left+=u+p+f))},top:function(e,t){var i,n,r=t.within,a=r.offset.top+r.scrollTop,s=r.height,l=r.isWindow?r.scrollTop:r.offset.top,c=e.top-t.collisionPosition.marginTop,d=c-l,h=c+t.collisionHeight-s-l,u="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,f=-2*t.offset[1];0>d?(n=e.top+u+p+f+t.collisionHeight-s-a,e.top+u+p+f>d&&(0>n||n<o(d))&&(e.top+=u+p+f)):h>0&&(i=e.top-t.collisionPosition.marginTop+u+p+f-l,e.top+u+p+f>h&&(i>0||o(i)<h)&&(e.top+=u+p+f))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,n,r,a,o=document.getElementsByTagName("body")[0],s=document.createElement("div");for(a in t=document.createElement(o?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"}),n)t.style[a]=n[a];t.appendChild(s),(i=o||document.documentElement).insertBefore(t,i.firstChild),s.style.cssText="position: absolute; left: 10.7432222px;",r=e(s).offset().left,e.support.offsetFractions=r>10&&11>r,t.innerHTML="",i.removeChild(t)}(),!1!==e.uiBackCompat&&function(e){var i=e.fn.position;e.fn.position=function(n){if(!n||!n.offset)return i.call(this,n);var r=n.offset.split(" "),a=n.at.split(" ");return 1===r.length&&(r[1]=r[0]),/^\d/.test(r[0])&&(r[0]="+"+r[0]),/^\d/.test(r[1])&&(r[1]="+"+r[1]),1===a.length&&(/left|center|right/.test(a[0])?a[1]="center":(a[1]=a[0],a[0]="center")),i.call(this,e.extend(n,{at:a[0]+r[0]+" "+a[1]+r[1],offset:t}))}}(jQuery)}(jQuery),t=jQuery,t.widget("ui.draggable",t.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var i=this.options;return!(this.helper||i.disabled||t(e.target).is(".ui-resizable-handle"))&&(this.handle=this._getHandle(e),!!this.handle&&(t(!0===i.iframeFix?"iframe":i.iframeFix).each((function(){t('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")})),!0))},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,i){if(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(!1===this._trigger("drag",e,n))return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=!1;t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1);for(var n=this.element[0],r=!1;n&&(n=n.parentNode);)n==document&&(r=!0);if(!r&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!i||"valid"==this.options.revert&&i||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)){var a=this;t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==a._trigger("stop",e)&&a._clear()}))}else!1!==this._trigger("stop",e)&&this._clear();return!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each((function(){this.parentNode.removeChild(this)})),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){var i=!this.options.handle||!t(this.options.handle,this.element).length;return t(this.options.handle,this.element).find("*").andSelf().each((function(){this==e.target&&(i=!0)})),i},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e])):"clone"==i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"==i.appendTo?this.element[0].parentNode:i.appendTo),n[0]==this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e=this.options;if("parent"==e.containment&&(e.containment=this.helper[0].parentNode),("document"==e.containment||"window"==e.containment)&&(this.containment=["document"==e.containment?0:t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==e.containment?0:t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==e.containment?0:t(window).scrollLeft())+t("document"==e.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==e.containment?0:t(window).scrollTop())+(t("document"==e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||e.containment.constructor==Array)e.containment.constructor==Array&&(this.containment=e.containment);else{var i=t(e.containment),n=i[0];if(!n)return;var r=(i.offset(),"hidden"!=t(n).css("overflow"));this.containment=[(parseInt(t(n).css("borderLeftWidth"),10)||0)+(parseInt(t(n).css("paddingLeft"),10)||0),(parseInt(t(n).css("borderTopWidth"),10)||0)+(parseInt(t(n).css("paddingTop"),10)||0),(r?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(t(n).css("borderLeftWidth"),10)||0)-(parseInt(t(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(r?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(t(n).css("borderTopWidth"),10)||0)-(parseInt(t(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i}},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"==e?1:-1,r=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),a=/(html|body)/i.test(r[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():a?0:r.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():a?0:r.scrollLeft())*n}},_generatePosition:function(e){var i=this.options,n="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(n[0].tagName),a=e.pageX,o=e.pageY;if(this.originalPosition){var s;if(this.containment){if(this.relative_container){var l=this.relative_container.offset();s=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+l.left,this.containment[3]+l.top]}else s=this.containment;e.pageX-this.offset.click.left<s[0]&&(a=s[0]+this.offset.click.left),e.pageY-this.offset.click.top<s[1]&&(o=s[1]+this.offset.click.top),e.pageX-this.offset.click.left>s[2]&&(a=s[2]+this.offset.click.left),e.pageY-this.offset.click.top>s[3]&&(o=s[3]+this.offset.click.top)}if(i.grid){var c=i.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1]:this.originalPageY;o=s&&(c-this.offset.click.top<s[1]||c-this.offset.click.top>s[3])?c-this.offset.click.top<s[1]?c+i.grid[1]:c-i.grid[1]:c;var d=i.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/i.grid[0])*i.grid[0]:this.originalPageX;a=s&&(d-this.offset.click.left<s[0]||d-this.offset.click.left>s[2])?d-this.offset.click.left<s[0]?d+i.grid[0]:d-i.grid[0]:d}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:n.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:n.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,i,n){return n=n||this._uiHash(),t.ui.plugin.call(this,e,[i,n]),"drag"==e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,i,n)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i){var n=t(this).data("draggable"),r=n.options,a=t.extend({},i,{item:n.element});n.sortables=[],t(r.connectToSortable).each((function(){var i=t.data(this,"sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",e,a))}))},stop:function(e,i){var n=t(this).data("draggable"),r=t.extend({},i,{item:n.element});t.each(n.sortables,(function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"==n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,r))}))},drag:function(e,i){var n=t(this).data("draggable"),r=this;t.each(n.sortables,(function(a){var o=!1,s=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,t.each(n.sortables,(function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!=s&&this.instance._intersectsWith(this.instance.containerCache)&&t.ui.contains(s.instance.element[0],this.instance.element[0])&&(o=!1),o}))),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(r).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",e),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",e),n.dropped=!1)}))}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i){var n=t("body"),r=t(this).data("draggable").options;n.css("cursor")&&(r._cursor=n.css("cursor")),n.css("cursor",r.cursor)},stop:function(e,i){var n=t(this).data("draggable").options;n._cursor&&t("body").css("cursor",n._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i){var n=t(i.helper),r=t(this).data("draggable").options;n.css("opacity")&&(r._opacity=n.css("opacity")),n.css("opacity",r.opacity)},stop:function(e,i){var n=t(this).data("draggable").options;n._opacity&&t(i.helper).css("opacity",n._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(e,i){var n=t(this).data("draggable");n.scrollParent[0]!=document&&"HTML"!=n.scrollParent[0].tagName&&(n.overflowOffset=n.scrollParent.offset())},drag:function(e,i){var n=t(this).data("draggable"),r=n.options,a=!1;n.scrollParent[0]!=document&&"HTML"!=n.scrollParent[0].tagName?(r.axis&&"x"==r.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-e.pageY<r.scrollSensitivity?n.scrollParent[0].scrollTop=a=n.scrollParent[0].scrollTop+r.scrollSpeed:e.pageY-n.overflowOffset.top<r.scrollSensitivity&&(n.scrollParent[0].scrollTop=a=n.scrollParent[0].scrollTop-r.scrollSpeed)),r.axis&&"y"==r.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-e.pageX<r.scrollSensitivity?n.scrollParent[0].scrollLeft=a=n.scrollParent[0].scrollLeft+r.scrollSpeed:e.pageX-n.overflowOffset.left<r.scrollSensitivity&&(n.scrollParent[0].scrollLeft=a=n.scrollParent[0].scrollLeft-r.scrollSpeed))):(r.axis&&"x"==r.axis||(e.pageY-t(document).scrollTop()<r.scrollSensitivity?a=t(document).scrollTop(t(document).scrollTop()-r.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<r.scrollSensitivity&&(a=t(document).scrollTop(t(document).scrollTop()+r.scrollSpeed))),r.axis&&"y"==r.axis||(e.pageX-t(document).scrollLeft()<r.scrollSensitivity?a=t(document).scrollLeft(t(document).scrollLeft()-r.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<r.scrollSensitivity&&(a=t(document).scrollLeft(t(document).scrollLeft()+r.scrollSpeed)))),!1!==a&&t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i){var n=t(this).data("draggable"),r=n.options;n.snapElements=[],t(r.snap.constructor!=String?r.snap.items||":data(draggable)":r.snap).each((function(){var e=t(this),i=e.offset();this!=n.element[0]&&n.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})}))},drag:function(e,i){for(var n=t(this).data("draggable"),r=n.options,a=r.snapTolerance,o=i.offset.left,s=o+n.helperProportions.width,l=i.offset.top,c=l+n.helperProportions.height,d=n.snapElements.length-1;d>=0;d--){var h=n.snapElements[d].left,u=h+n.snapElements[d].width,p=n.snapElements[d].top,f=p+n.snapElements[d].height;if(o>h-a&&u+a>o&&l>p-a&&f+a>l||o>h-a&&u+a>o&&c>p-a&&f+a>c||s>h-a&&u+a>s&&l>p-a&&f+a>l||s>h-a&&u+a>s&&c>p-a&&f+a>c){if("inner"!=r.snapMode){var g=Math.abs(p-c)<=a,m=Math.abs(f-l)<=a,v=Math.abs(h-s)<=a,_=Math.abs(u-o)<=a;g&&(i.position.top=n._convertPositionTo("relative",{top:p-n.helperProportions.height,left:0}).top-n.margins.top),m&&(i.position.top=n._convertPositionTo("relative",{top:f,left:0}).top-n.margins.top),v&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left-n.margins.left),_&&(i.position.left=n._convertPositionTo("relative",{top:0,left:u}).left-n.margins.left)}var b=g||m||v||_;"outer"!=r.snapMode&&(g=Math.abs(p-l)<=a,m=Math.abs(f-c)<=a,v=Math.abs(h-o)<=a,_=Math.abs(u-s)<=a,g&&(i.position.top=n._convertPositionTo("relative",{top:p,left:0}).top-n.margins.top),m&&(i.position.top=n._convertPositionTo("relative",{top:f-n.helperProportions.height,left:0}).top-n.margins.top),v&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h}).left-n.margins.left),_&&(i.position.left=n._convertPositionTo("relative",{top:0,left:u-n.helperProportions.width}).left-n.margins.left)),!n.snapElements[d].snapping&&(g||m||v||_||b)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=g||m||v||_||b}else n.snapElements[d].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=!1}}}),t.ui.plugin.add("draggable","stack",{start:function(e,i){var n=t(this).data("draggable").options,r=t.makeArray(t(n.stack)).sort((function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)}));if(r.length){var a=parseInt(r[0].style.zIndex)||0;t(r).each((function(e){this.style.zIndex=a+e})),this[0].style.zIndex=a+r.length}}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i){var n=t(i.helper),r=t(this).data("draggable").options;n.css("zIndex")&&(r._zIndex=n.css("zIndex")),n.css("zIndex",r.zIndex)},stop:function(e,i){var n=t(this).data("draggable").options;n._zIndex&&t(i.helper).css("zIndex",n._zIndex)}}),function(e,t){e.widget("ui.droppable",{version:"1.9.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,i=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=e.ui.ddmanager.droppables[this.options.scope],i=0;i<t.length;i++)t[i]==this&&t.splice(i,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){"accept"==t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var n=i||e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return!1;var r=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each((function(){var t=e.data(this,"droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope==n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&e.ui.intersect(n,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(r=!0,!1):void 0})),!r&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(n)),this.element))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(t,i,n){if(!i.offset)return!1;var r=(t.positionAbs||t.position.absolute).left,a=r+t.helperProportions.width,o=(t.positionAbs||t.position.absolute).top,s=o+t.helperProportions.height,l=i.offset.left,c=l+i.proportions.width,d=i.offset.top,h=d+i.proportions.height;switch(n){case"fit":return r>=l&&c>=a&&o>=d&&h>=s;case"intersect":return l<r+t.helperProportions.width/2&&a-t.helperProportions.width/2<c&&d<o+t.helperProportions.height/2&&s-t.helperProportions.height/2<h;case"pointer":var u=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,p=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top;return e.ui.isOver(p,u,d,l,i.proportions.height,i.proportions.width);case"touch":return(o>=d&&h>=o||s>=d&&h>=s||d>o&&s>h)&&(r>=l&&c>=r||a>=l&&c>=a||l>r&&a>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,i){var n=e.ui.ddmanager.droppables[t.options.scope]||[],r=i?i.type:null,a=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var o=0;o<n.length;o++)if(!(n[o].options.disabled||t&&!n[o].accept.call(n[o].element[0],t.currentItem||t.element))){for(var s=0;s<a.length;s++)if(a[s]==n[o].element[0]){n[o].proportions.height=0;continue e}n[o].visible="none"!=n[o].element.css("display"),n[o].visible&&("mousedown"==r&&n[o]._activate.call(n[o],i),n[o].offset=n[o].element.offset(),n[o].proportions={width:n[o].element[0].offsetWidth,height:n[o].element[0].offsetHeight})}},drop:function(t,i){var n=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],(function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,i)))})),n},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",(function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}))},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],(function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n=e.ui.intersect(t,this,this.options.tolerance),r=n||1!=this.isover?n&&0==this.isover?"isover":null:"isout";if(r){var a;if(this.options.greedy){var o=this.options.scope,s=this.element.parents(":data(droppable)").filter((function(){return e.data(this,"droppable").options.scope===o}));s.length&&((a=e.data(s[0],"droppable")).greedyChild="isover"==r?1:0)}a&&"isover"==r&&(a.isover=0,a.isout=1,a._out.call(a,i)),this[r]=1,this["isout"==r?"isover":"isout"]=0,this["isover"==r?"_over":"_out"].call(this,i),a&&"isout"==r&&(a.isout=0,a.isover=1,a._over.call(a,i))}}}))},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}}}(jQuery),function(e,t){e.widget("ui.resizable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,i=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=i.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var n=this.handles.split(",");this.handles={};for(var r=0;r<n.length;r++){var a=e.trim(n[r]),o=e('<div class="ui-resizable-handle '+("ui-resizable-"+a)+'"></div>');o.css({zIndex:i.zIndex}),"se"==a&&o.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[a]=".ui-resizable-"+a,this.element.append(o)}}this._renderAxis=function(t){for(var i in t=t||this.element,this.handles){if(this.handles[i].constructor==String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var n,r=e(this.handles[i],this.element);n=/sw|ne|nw|se|n|s/.test(i)?r.outerHeight():r.outerWidth();var a=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");t.css(a,n),this._proportionallyResize()}e(this.handles[i]).length}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover((function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}})),i.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter((function(){i.disabled||(e(this).removeClass("ui-resizable-autohide"),t._handles.show())})).mouseleave((function(){i.disabled||t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())}))),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var i=this.element;this.originalElement.css({position:i.css("position"),width:i.outerWidth(),height:i.outerHeight(),top:i.css("top"),left:i.css("left")}).insertAfter(i),i.remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var i=!1;for(var n in this.handles)e(this.handles[n])[0]==t.target&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(t){var n=this.options,r=this.element.position(),a=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(a.is(".ui-draggable")||/absolute/.test(a.css("position")))&&a.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy();var o=i(this.helper.css("left")),s=i(this.helper.css("top"));n.containment&&(o+=e(n.containment).scrollLeft()||0,s+=e(n.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:o,top:s},this.size=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalPosition={left:o,top:s},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof n.aspectRatio?n.aspectRatio:this.originalSize.width/this.originalSize.height||1;var l=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor","auto"==l?this.axis+"-resize":l),a.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(e){var t=this.helper,i=(this.options,this.originalMousePosition),n=this.axis,r=e.pageX-i.left||0,a=e.pageY-i.top||0,o=this._change[n];if(!o)return!1;var s=o.apply(this,[e,r,a]);return this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(s=this._updateRatio(s,e)),s=this._respectSize(s,e),this._propagate("resize",e),t.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(s),this._trigger("resize",e,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var i=this.options,n=this;if(this._helper){var r=this._proportionallyResizeElements,a=r.length&&/textarea/i.test(r[0].nodeName),o=a&&e.ui.hasScroll(r[0],"left")?0:n.sizeDiff.height,s=a?0:n.sizeDiff.width,l={width:n.helper.width()-s,height:n.helper.height()-o},c=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,d=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;i.animate||this.element.css(e.extend(l,{top:d,left:c})),n.helper.height(n.size.height),n.helper.width(n.size.width),this._helper&&!i.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,i,r,a,o,s=this.options;o={minWidth:n(s.minWidth)?s.minWidth:0,maxWidth:n(s.maxWidth)?s.maxWidth:1/0,minHeight:n(s.minHeight)?s.minHeight:0,maxHeight:n(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,r=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,a=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),r>o.minHeight&&(o.minHeight=r),i<o.maxWidth&&(o.maxWidth=i),a<o.maxHeight&&(o.maxHeight=a)),this._vBoundaries=o},_updateCache:function(e){this.options,this.offset=this.helper.offset(),n(e.left)&&(this.position.left=e.left),n(e.top)&&(this.position.top=e.top),n(e.height)&&(this.size.height=e.height),n(e.width)&&(this.size.width=e.width)},_updateRatio:function(e,t){var i=(this.options,this.position),r=this.size,a=this.axis;return n(e.height)?e.width=e.height*this.aspectRatio:n(e.width)&&(e.height=e.width/this.aspectRatio),"sw"==a&&(e.left=i.left+(r.width-e.width),e.top=null),"nw"==a&&(e.top=i.top+(r.height-e.height),e.left=i.left+(r.width-e.width)),e},_respectSize:function(e,t){var i=(this.helper,this._vBoundaries),r=(this._aspectRatio||t.shiftKey,this.axis),a=n(e.width)&&i.maxWidth&&i.maxWidth<e.width,o=n(e.height)&&i.maxHeight&&i.maxHeight<e.height,s=n(e.width)&&i.minWidth&&i.minWidth>e.width,l=n(e.height)&&i.minHeight&&i.minHeight>e.height;s&&(e.width=i.minWidth),l&&(e.height=i.minHeight),a&&(e.width=i.maxWidth),o&&(e.height=i.maxHeight);var c=this.originalPosition.left+this.originalSize.width,d=this.position.top+this.size.height,h=/sw|nw|w/.test(r),u=/nw|ne|n/.test(r);s&&h&&(e.left=c-i.minWidth),a&&h&&(e.left=c-i.maxWidth),l&&u&&(e.top=d-i.minHeight),o&&u&&(e.top=d-i.maxHeight);var p=!e.width&&!e.height;return p&&!e.left&&e.top?e.top=null:p&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){if(this.options,this._proportionallyResizeElements.length)for(var t=this.helper||this.element,i=0;i<this._proportionallyResizeElements.length;i++){var n=this._proportionallyResizeElements[i];if(!this.borderDif){var r=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],a=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")];this.borderDif=e.map(r,(function(e,t){return(parseInt(e,10)||0)+(parseInt(a[t],10)||0)}))}n.css({height:t.height()-this.borderDif[0]-this.borderDif[2]||0,width:t.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,i=this.options;if(this.elementOffset=t.offset(),this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var n=e.ui.ie6?1:0,r=e.ui.ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+r,height:this.element.outerHeight()+r,position:"absolute",left:this.elementOffset.left-n+"px",top:this.elementOffset.top-n+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t,i){return{width:this.originalSize.width+t}},w:function(e,t,i){var n=(this.options,this.originalSize);return{left:this.originalPosition.left+t,width:n.width-t}},n:function(e,t,i){var n=(this.options,this.originalSize),r=this.originalPosition;return{top:r.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!=t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","alsoResize",{start:function(t,i){var n=e(this).data("resizable").options,r=function(t){e(t).each((function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})}))};"object"!=typeof n.alsoResize||n.alsoResize.parentNode?r(n.alsoResize):n.alsoResize.length?(n.alsoResize=n.alsoResize[0],r(n.alsoResize)):e.each(n.alsoResize,(function(e){r(e)}))},resize:function(t,i){var n=e(this).data("resizable"),r=n.options,a=n.originalSize,o=n.originalPosition,s={height:n.size.height-a.height||0,width:n.size.width-a.width||0,top:n.position.top-o.top||0,left:n.position.left-o.left||0},l=function(t,n){e(t).each((function(){var t=e(this),r=e(this).data("resizable-alsoresize"),a={},o=n&&n.length?n:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,(function(e,t){var i=(r[t]||0)+(s[t]||0);i&&i>=0&&(a[t]=i||null)})),t.css(a)}))};"object"!=typeof r.alsoResize||r.alsoResize.nodeType?l(r.alsoResize):e.each(r.alsoResize,(function(e,t){l(e,t)}))},stop:function(t,i){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(t,i){var n=e(this).data("resizable"),r=n.options,a=n._proportionallyResizeElements,o=a.length&&/textarea/i.test(a[0].nodeName),s=o&&e.ui.hasScroll(a[0],"left")?0:n.sizeDiff.height,l=o?0:n.sizeDiff.width,c={width:n.size.width-l,height:n.size.height-s},d=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,h=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(c,h&&d?{top:h,left:d}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var i={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};a&&a.length&&e(a[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(t,n){var r=e(this).data("resizable"),a=r.options,o=r.element,s=a.containment,l=s instanceof e?s.get(0):/parent/.test(s)?o.parent().get(0):s;if(l)if(r.containerElement=e(l),/document/.test(s)||s==document)r.containerOffset={left:0,top:0},r.containerPosition={left:0,top:0},r.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var c=e(l),d=[];e(["Top","Right","Left","Bottom"]).each((function(e,t){d[e]=i(c.css("padding"+t))})),r.containerOffset=c.offset(),r.containerPosition=c.position(),r.containerSize={height:c.innerHeight()-d[3],width:c.innerWidth()-d[1]};var h=r.containerOffset,u=r.containerSize.height,p=r.containerSize.width,f=e.ui.hasScroll(l,"left")?l.scrollWidth:p,g=e.ui.hasScroll(l)?l.scrollHeight:u;r.parentData={element:l,left:h.left,top:h.top,width:f,height:g}}},resize:function(t,i){var n=e(this).data("resizable"),r=n.options,a=(n.containerSize,n.containerOffset),o=(n.size,n.position),s=n._aspectRatio||t.shiftKey,l={top:0,left:0},c=n.containerElement;c[0]!=document&&/static/.test(c.css("position"))&&(l=a),o.left<(n._helper?a.left:0)&&(n.size.width=n.size.width+(n._helper?n.position.left-a.left:n.position.left-l.left),s&&(n.size.height=n.size.width/n.aspectRatio),n.position.left=r.helper?a.left:0),o.top<(n._helper?a.top:0)&&(n.size.height=n.size.height+(n._helper?n.position.top-a.top:n.position.top),s&&(n.size.width=n.size.height*n.aspectRatio),n.position.top=n._helper?a.top:0),n.offset.left=n.parentData.left+n.position.left,n.offset.top=n.parentData.top+n.position.top;var d=Math.abs((n._helper,n.offset.left-l.left+n.sizeDiff.width)),h=Math.abs((n._helper?n.offset.top-l.top:n.offset.top-a.top)+n.sizeDiff.height),u=n.containerElement.get(0)==n.element.parent().get(0),p=/relative|absolute/.test(n.containerElement.css("position"));u&&p&&(d-=n.parentData.left),d+n.size.width>=n.parentData.width&&(n.size.width=n.parentData.width-d,s&&(n.size.height=n.size.width/n.aspectRatio)),h+n.size.height>=n.parentData.height&&(n.size.height=n.parentData.height-h,s&&(n.size.width=n.size.height*n.aspectRatio))},stop:function(t,i){var n=e(this).data("resizable"),r=n.options,a=(n.position,n.containerOffset),o=n.containerPosition,s=n.containerElement,l=e(n.helper),c=l.offset(),d=l.outerWidth()-n.sizeDiff.width,h=l.outerHeight()-n.sizeDiff.height;n._helper&&!r.animate&&/relative/.test(s.css("position"))&&e(this).css({left:c.left-o.left-a.left,width:d,height:h}),n._helper&&!r.animate&&/static/.test(s.css("position"))&&e(this).css({left:c.left-o.left-a.left,width:d,height:h})}}),e.ui.plugin.add("resizable","ghost",{start:function(t,i){var n=e(this).data("resizable"),r=n.options,a=n.size;n.ghost=n.originalElement.clone(),n.ghost.css({opacity:.25,display:"block",position:"relative",height:a.height,width:a.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof r.ghost?r.ghost:""),n.ghost.appendTo(n.helper)},resize:function(t,i){var n=e(this).data("resizable");n.options,n.ghost&&n.ghost.css({position:"relative",height:n.size.height,width:n.size.width})},stop:function(t,i){var n=e(this).data("resizable");n.options,n.ghost&&n.helper&&n.helper.get(0).removeChild(n.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(t,i){var n=e(this).data("resizable"),r=n.options,a=n.size,o=n.originalSize,s=n.originalPosition,l=n.axis;r._aspectRatio||t.shiftKey,r.grid="number"==typeof r.grid?[r.grid,r.grid]:r.grid;var c=Math.round((a.width-o.width)/(r.grid[0]||1))*(r.grid[0]||1),d=Math.round((a.height-o.height)/(r.grid[1]||1))*(r.grid[1]||1);/^(se|s|e)$/.test(l)?(n.size.width=o.width+c,n.size.height=o.height+d):/^(ne)$/.test(l)?(n.size.width=o.width+c,n.size.height=o.height+d,n.position.top=s.top-d):/^(sw)$/.test(l)?(n.size.width=o.width+c,n.size.height=o.height+d,n.position.left=s.left-c):(n.size.width=o.width+c,n.size.height=o.height+d,n.position.top=s.top-d,n.position.left=s.left-c)}});var i=function(e){return parseInt(e,10)||0},n=function(e){return!isNaN(parseInt(e,10))}}(jQuery),function(e,t){e.widget("ui.selectable",e.ui.mouse,{version:"1.9.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){(t=e(i.options.filter,i.element[0])).addClass("ui-selectee"),t.each((function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})}))},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this;if(this.opos=[t.pageX,t.pageY],!this.options.disabled){var n=this.options;this.selectees=e(n.filter,this.element[0]),this._trigger("start",t),e(n.appendTo).append(this.helper),this.helper.css({left:t.clientX,top:t.clientY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each((function(){var n=e.data(this,"selectable-item");n.startselected=!0,t.metaKey||t.ctrlKey||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element}))})),e(t.target).parents().andSelf().each((function(){var n=e.data(this,"selectable-item");if(n){var r=!t.metaKey&&!t.ctrlKey||!n.$element.hasClass("ui-selected");return n.$element.removeClass(r?"ui-unselecting":"ui-selected").addClass(r?"ui-selecting":"ui-unselecting"),n.unselecting=!r,n.selecting=r,n.selected=r,r?i._trigger("selecting",t,{selecting:n.element}):i._trigger("unselecting",t,{unselecting:n.element}),!1}}))}},_mouseDrag:function(t){var i=this;if(this.dragged=!0,!this.options.disabled){var n=this.options,r=this.opos[0],a=this.opos[1],o=t.pageX,s=t.pageY;if(r>o){var l=o;o=r,r=l}if(a>s){l=s;s=a,a=l}return this.helper.css({left:r,top:a,width:o-r,height:s-a}),this.selectees.each((function(){var l=e.data(this,"selectable-item");if(l&&l.element!=i.element[0]){var c=!1;"touch"==n.tolerance?c=!(l.left>o||l.right<r||l.top>s||l.bottom<a):"fit"==n.tolerance&&(c=l.left>r&&l.right<o&&l.top>a&&l.bottom<s),c?(l.selected&&(l.$element.removeClass("ui-selected"),l.selected=!1),l.unselecting&&(l.$element.removeClass("ui-unselecting"),l.unselecting=!1),l.selecting||(l.$element.addClass("ui-selecting"),l.selecting=!0,i._trigger("selecting",t,{selecting:l.element}))):(l.selecting&&((t.metaKey||t.ctrlKey)&&l.startselected?(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.$element.addClass("ui-selected"),l.selected=!0):(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.startselected&&(l.$element.addClass("ui-unselecting"),l.unselecting=!0),i._trigger("unselecting",t,{unselecting:l.element}))),l.selected&&(t.metaKey||t.ctrlKey||l.startselected||(l.$element.removeClass("ui-selected"),l.selected=!1,l.$element.addClass("ui-unselecting"),l.unselecting=!0,i._trigger("unselecting",t,{unselecting:l.element}))))}})),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,this.options,e(".ui-unselecting",this.element[0]).each((function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",t,{unselected:n.element})})),e(".ui-selecting",this.element[0]).each((function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",t,{selected:n.element})})),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e,t){e.widget("ui.sortable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===e.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display"))),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var n=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(t);var r=null;if(e(t.target).parents().each((function(){return e.data(this,n.widgetName+"-item")==n?(r=e(this),!1):void 0})),e.data(t.target,n.widgetName+"-item")==n&&(r=e(t.target)),!r)return!1;if(this.options.handle&&!i){var a=!1;if(e(this.options.handle,r).find("*").andSelf().each((function(){this==t.target&&(a=!0)})),!a)return!1}return this.currentItem=r,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,i,n){var r=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",r.cursor)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(var a=this.containers.length-1;a>=0;a--)this.containers[a]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var i=this.options,n=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=n=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=n=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(t.pageY-e(document).scrollTop()<i.scrollSensitivity?n=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(n=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed)),t.pageX-e(document).scrollLeft()<i.scrollSensitivity?n=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(n=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))),!1!==n&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var r=this.items.length-1;r>=0;r--){var a=this.items[r],o=a.item[0],s=this._intersectsWithPointer(a);if(s&&a.instance===this.currentContainer&&o!=this.currentItem[0]&&this.placeholder[1==s?"next":"prev"]()[0]!=o&&!e.contains(this.placeholder[0],o)&&("semi-dynamic"!=this.options.type||!e.contains(this.element[0],o))){if(this.direction=1==s?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(a))break;this._rearrange(t,a),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,r=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,(function(){n._clear(t)}))}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each((function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))})),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each((function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")})),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,r=n+this.helperProportions.height,a=e.left,o=a+e.width,s=e.top,l=s+e.height,c=this.offset.click.top,d=this.offset.click.left,h=n+c>s&&l>n+c&&t+d>a&&o>t+d;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?h:a<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<o&&s<n+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var i="x"===this.options.axis||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),r=i&&n,a=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return!!r&&(this.floating?o&&"right"==o||"down"==a?2:1:a&&("down"==a?2:1))},_intersectsWithSides:function(t){var i=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),r=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return this.floating&&a?"right"==a&&n||"left"==a&&!n:r&&("down"==r&&i||"up"==r&&!i)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!=e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!=e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i=[],n=[],r=this._connectWith();if(r&&t)for(var a=r.length-1;a>=0;a--)for(var o=e(r[a]),s=o.length-1;s>=0;s--){var l=e.data(o[s],this.widgetName);l&&l!=this&&!l.options.disabled&&n.push([e.isFunction(l.options.items)?l.options.items.call(l.element):e(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}n.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(a=n.length-1;a>=0;a--)n[a][0].each((function(){i.push(this)}));return e(i)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,(function(e){for(var i=0;i<t.length;i++)if(t[i]==e.item[0])return!1;return!0}))},_refreshItems:function(t){this.items=[],this.containers=[this];var i=this.items,n=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],r=this._connectWith();if(r&&this.ready)for(var a=r.length-1;a>=0;a--)for(var o=e(r[a]),s=o.length-1;s>=0;s--){var l=e.data(o[s],this.widgetName);l&&l!=this&&!l.options.disabled&&(n.push([e.isFunction(l.options.items)?l.options.items.call(l.element[0],t,{item:this.currentItem}):e(l.options.items,l.element),l]),this.containers.push(l))}for(a=n.length-1;a>=0;a--)for(var c=n[a][1],d=n[a][0],h=(s=0,d.length);h>s;s++){var u=e(d[s]);u.data(this.widgetName+"-item",c),i.push({item:u,instance:c,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var i=this.items.length-1;i>=0;i--){var n=this.items[i];if(n.instance==this.currentContainer||!this.currentContainer||n.item[0]==this.currentItem[0]){var r=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item;t||(n.width=r.outerWidth(),n.height=r.outerHeight());var a=r.offset();n.left=a.left,n.top=a.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--){a=this.containers[i].element.offset();this.containers[i].containerCache.left=a.left,this.containers[i].containerCache.top=a.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}return this},_createPlaceholder:function(t){var i=(t=t||this).options;if(!i.placeholder||i.placeholder.constructor==String){var n=i.placeholder;i.placeholder={element:function(){var i=e(document.createElement(t.currentItem[0].nodeName)).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return n||(i.style.visibility="hidden"),i},update:function(e,r){(!n||i.forcePlaceholderSize)&&(r.height()||r.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}}t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_contactContainers:function(t){for(var i=null,n=null,r=this.containers.length-1;r>=0;r--)if(!e.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(i&&e.contains(this.containers[r].element[0],i.element[0]))continue;i=this.containers[r],n=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",t,this._uiHash(this)),this.containers[r].containerCache.over=0);if(i)if(1===this.containers.length)this.containers[n]._trigger("over",t,this._uiHash(this)),this.containers[n].containerCache.over=1;else{for(var a=1e4,o=null,s=this.containers[n].floating?"left":"top",l=this.containers[n].floating?"width":"height",c=this.positionAbs[s]+this.offset.click[s],d=this.items.length-1;d>=0;d--)if(e.contains(this.containers[n].element[0],this.items[d].item[0])&&this.items[d].item[0]!=this.currentItem[0]){var h=this.items[d].item.offset()[s],u=!1;Math.abs(h-c)>Math.abs(h+this.items[d][l]-c)&&(u=!0,h+=this.items[d][l]),Math.abs(h-c)<a&&(a=Math.abs(h-c),o=this.items[d],this.direction=u?"up":"down")}if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[n],o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[n].element,!0),this._trigger("change",t,this._uiHash()),this.containers[n]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[n]._trigger("over",t,this._uiHash(this)),this.containers[n].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"==i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!=i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(""==n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(t.containment)){var i=e(t.containment)[0],n=e(t.containment).offset(),r="hidden"!=e(i).css("overflow");this.containment=[n.left+(parseInt(e(i).css("borderLeftWidth"),10)||0)+(parseInt(e(i).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(i).css("borderTopWidth"),10)||0)+(parseInt(e(i).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(e(i).css("borderLeftWidth"),10)||0)-(parseInt(e(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(e(i).css("borderTopWidth"),10)||0)-(parseInt(e(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"==t?1:-1,r=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),a=/(html|body)/i.test(r[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():a?0:r.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():a?0:r.scrollLeft())*n}},_generatePosition:function(t){var i=this.options,n="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(n[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var a=t.pageX,o=t.pageY;if(this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid)){var s=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1];o=this.containment&&(s-this.offset.click.top<this.containment[1]||s-this.offset.click.top>this.containment[3])?s-this.offset.click.top<this.containment[1]?s+i.grid[1]:s-i.grid[1]:s;var l=this.originalPageX+Math.round((a-this.originalPageX)/i.grid[0])*i.grid[0];a=this.containment&&(l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2])?l-this.offset.click.left<this.containment[0]?l+i.grid[0]:l-i.grid[0]:l}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:n.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:n.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay((function(){r==this.counter&&this.refreshPositions(!n)}))},_clear:function(t,i){this.reverting=!1;var n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var r in this._storedCSS)("auto"==this._storedCSS[r]||"static"==this._storedCSS[r])&&(this._storedCSS[r]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!i&&n.push((function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))})),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||i||n.push((function(e){this._trigger("update",e,this._uiHash())})),this!==this.currentContainer&&(i||(n.push((function(e){this._trigger("remove",e,this._uiHash())})),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(r=this.containers.length-1;r>=0;r--)i||n.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over&&(n.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over=0);if(this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!i){this._trigger("beforeStop",t,this._uiHash());for(r=0;r<n.length;r++)n[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(i||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!i){for(r=0;r<n.length;r++)n[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){!1===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}(jQuery),function(e,t){var i=0,n={},r={};n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="hide",r.height=r.paddingTop=r.paddingBottom=r.borderTopWidth=r.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.9.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.accordionId="ui-accordion-"+(this.element.attr("id")||++i),n=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset"),this.headers=this.element.find(n.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this._hoverable(this.headers),this._focusable(this.headers),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide(),n.collapsible||!1!==n.active&&null!=n.active||(n.active=0),n.active<0&&(n.active+=this.headers.length),this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass("ui-accordion-content-active").show(),this._createIcons(),this.refresh(),this.element.attr("role","tablist"),this.headers.attr("role","tab").each((function(i){var n=e(this),r=n.attr("id"),a=n.next(),o=a.attr("id");r||(r=t+"-header-"+i,n.attr("id",r)),o||(o=t+"-panel-"+i,a.attr("id",o)),n.attr("aria-controls",o),a.attr("aria-labelledby",r)})).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._on(this.headers,{keydown:"_keydown"}),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._setupEvents(n.event)},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each((function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")})),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each((function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")})),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?void this._activate(t):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||!1!==this.options.active||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),void("disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)))},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,n=this.headers.length,r=this.headers.index(t.target),a=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:a=this.headers[(r+1)%n];break;case i.LEFT:case i.UP:a=this.headers[(r-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:a=this.headers[0];break;case i.END:a=this.headers[n-1]}a&&(e(t.target).attr("tabIndex",-1),e(a).attr("tabIndex",0),a.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t,i,n=this.options.heightStyle,r=this.element.parent();"fill"===n?(e.support.minHeight||(i=r.css("overflow"),r.css("overflow","hidden")),t=r.height(),this.element.siblings(":visible").each((function(){var i=e(this),n=i.css("position");"absolute"!==n&&"fixed"!==n&&(t-=i.outerHeight(!0))})),i&&r.css("overflow",i),this.headers.each((function(){t-=e(this).outerHeight(!0)})),this.headers.next().each((function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))})).css("overflow","auto")):"auto"===n&&(t=0,this.headers.next().each((function(){t=Math.max(t,e(this).css("height","").height())})).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={};t&&(e.each(t.split(" "),(function(e,t){i[t]="_eventHandler"})),this._on(this.headers,i))},_eventHandler:function(t){var i=this.options,n=this.active,r=e(t.currentTarget),a=r[0]===n[0],o=a&&i.collapsible,s=o?e():r.next(),l=n.next(),c={oldHeader:n,oldPanel:l,newHeader:o?e():r,newPanel:s};t.preventDefault(),a&&!i.collapsible||!1===this._trigger("beforeActivate",t,c)||(i.active=!o&&this.headers.index(r),this.active=a?e():r,this._toggle(c),n.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),a||(r.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&r.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),r.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,t):(n.hide(),i.show(),this._toggleComplete(t)),n.attr({"aria-expanded":"false","aria-hidden":"true"}),n.prev().attr("aria-selected","false"),i.length&&n.length?n.prev().attr("tabIndex",-1):i.length&&this.headers.filter((function(){return 0===e(this).attr("tabIndex")})).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,i){var a,o,s,l=this,c=0,d=e.length&&(!t.length||e.index()<t.index()),h=this.options.animate||{},u=d&&h.down||h,p=function(){l._toggleComplete(i)};return"number"==typeof u&&(s=u),"string"==typeof u&&(o=u),o=o||u.easing||h.easing,s=s||u.duration||h.duration,t.length?e.length?(a=e.show().outerHeight(),t.animate(n,{duration:s,easing:o,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(r,{duration:s,easing:o,complete:p,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?c+=i.now:"content"!==l.options.heightStyle&&(i.now=Math.round(a-t.outerHeight()-c),c=0)}})):t.animate(n,s,o,p):e.animate(r,s,o,p)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),!1!==e.uiBackCompat&&(function(e,t){e.extend(t.options,{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var i=t._create;t._create=function(){if(this.options.navigation){var t=this,n=this.element.find(this.options.header),r=n.next(),a=n.add(r).find("a").filter(this.options.navigationFilter)[0];a&&n.add(r).each((function(i){return e.contains(this,a)?(t.options.active=Math.floor(i/2),!1):void 0}))}i.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options,{heightStyle:null,autoHeight:!0,clearStyle:!1,fillSpace:!1});var i=t._create,n=t._setOption;e.extend(t,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle(),i.call(this)},_setOption:function(e){("autoHeight"===e||"clearStyle"===e||"fillSpace"===e)&&(this.options.heightStyle=this._mergeHeightStyle()),n.apply(this,arguments)},_mergeHeightStyle:function(){var e=this.options;return e.fillSpace?"fill":e.clearStyle?"content":e.autoHeight?"auto":void 0}})}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var i=t._createIcons;t._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected),i.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){t.activate=t._activate;var i=t._findActive;t._findActive=function(e){return-1===e&&(e=!1),e&&"number"!=typeof e&&(-1===(e=this.headers.index(this.headers.filter(e)))&&(e=!1)),i.call(this,e)}}(jQuery,jQuery.ui.accordion.prototype),jQuery.ui.accordion.prototype.resize=jQuery.ui.accordion.prototype.refresh,function(e,t){e.extend(t.options,{change:null,changestart:null});var i=t._trigger;t._trigger=function(e,t,n){var r=i.apply(this,arguments);return!!r&&("beforeActivate"===e?r=i.call(this,"changestart",t,{oldHeader:n.oldHeader,oldContent:n.oldPanel,newHeader:n.newHeader,newContent:n.newPanel}):"activate"===e&&(r=i.call(this,"change",t,{oldHeader:n.oldHeader,oldContent:n.oldPanel,newHeader:n.newHeader,newContent:n.newPanel})),r)}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options,{animate:null,animated:"slide"});var i=t._create;t._create=function(){var e=this.options;null===e.animate&&(e.animated?"slide"===e.animated?e.animate=300:"bounceslide"===e.animated?e.animate={duration:200,down:{easing:"easeOutBounce",duration:1e3}}:e.animate=e.animated:e.animate=!1),i.call(this)}}(jQuery,jQuery.ui.accordion.prototype))}(jQuery),function(e,t){var i=0;e.widget("ui.autocomplete",{version:"1.9.2",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,i,n;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(r){if(this.element.prop("readOnly"))return t=!0,n=!0,void(i=!0);t=!1,n=!1,i=!1;var a=e.ui.keyCode;switch(r.keyCode){case a.PAGE_UP:t=!0,this._move("previousPage",r);break;case a.PAGE_DOWN:t=!0,this._move("nextPage",r);break;case a.UP:t=!0,this._keyEvent("previous",r);break;case a.DOWN:t=!0,this._keyEvent("next",r);break;case a.ENTER:case a.NUMPAD_ENTER:this.menu.active&&(t=!0,r.preventDefault(),this.menu.select(r));break;case a.TAB:this.menu.active&&this.menu.select(r);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(r),r.preventDefault());break;default:i=!0,this._searchTimeout(r)}},keypress:function(n){if(t)return t=!1,void n.preventDefault();if(!i){var r=e.ui.keyCode;switch(n.keyCode){case r.PAGE_UP:this._move("previousPage",n);break;case r.PAGE_DOWN:this._move("nextPage",n);break;case r.UP:this._keyEvent("previous",n);break;case r.DOWN:this._keyEvent("next",n)}}},input:function(e){return n?(n=!1,void e.preventDefault()):void this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),void this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:e(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur}));var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay((function(){var t=this;this.document.one("mousedown",(function(n){n.target===t.element[0]||n.target===i||e.contains(i,n.target)||t.close()}))}))},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){e(t.target).trigger(t.originalEvent)}));var n=i.item.data("ui-autocomplete-item")||i.item.data("item.autocomplete");!1!==this._trigger("focus",t,{item:n})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item")||t.item.data("item.autocomplete"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay((function(){this.previous=n,this.selectedItem=i}))),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),e.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this.document.find(t||"body")[0]),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return!!this.element.is("textarea")||!this.element.is("input")&&this.element.prop("isContentEditable")},_initSource:function(){var t,i,n=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,r){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){r(e)},error:function(){r([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay((function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))}),this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,t=++i;return function(n){t===i&&e.__response(n),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,(function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)}))},_suggest:function(t){var i=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(i,t),this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,(function(e,i){n._renderItemData(t,i)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,(function(e){return n.test(e.label||e.value||e)}))}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),function(e,t){var i,n,r,a,o="ui-button ui-widget ui-state-default ui-corner-all",s="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var t=e(this).find(":ui-button");setTimeout((function(){t.button("refresh")}),1)},c=function(t){var i=t.name,n=t.form,r=e([]);return i&&(r=n?e(n).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter((function(){return!this.form}))),r};e.widget("ui.button",{version:"1.9.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,s=this.options,d="checkbox"===this.type||"radio"===this.type,h=d?"":"ui-state-active",u="ui-state-focus";null===s.label&&(s.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,(function(){s.disabled||this===i&&e(this).addClass("ui-state-active")})).bind("mouseleave"+this.eventNamespace,(function(){s.disabled||e(this).removeClass(h)})).bind("click"+this.eventNamespace,(function(e){s.disabled&&(e.preventDefault(),e.stopImmediatePropagation())})),this.element.bind("focus"+this.eventNamespace,(function(){t.buttonElement.addClass(u)})).bind("blur"+this.eventNamespace,(function(){t.buttonElement.removeClass(u)})),d&&(this.element.bind("change"+this.eventNamespace,(function(){a||t.refresh()})),this.buttonElement.bind("mousedown"+this.eventNamespace,(function(e){s.disabled||(a=!1,n=e.pageX,r=e.pageY)})).bind("mouseup"+this.eventNamespace,(function(e){s.disabled||(n!==e.pageX||r!==e.pageY)&&(a=!0)}))),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,(function(){return!s.disabled&&!a&&(e(this).toggleClass("ui-state-active"),void t.buttonElement.attr("aria-pressed",t.element[0].checked))})):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,(function(){if(s.disabled||a)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var i=t.element[0];c(i).not(i).map((function(){return e(this).button("widget")[0]})).removeClass("ui-state-active").attr("aria-pressed","false")})):(this.buttonElement.bind("mousedown"+this.eventNamespace,(function(){return!s.disabled&&(e(this).addClass("ui-state-active"),i=this,void t.document.one("mouseup",(function(){i=null})))})).bind("mouseup"+this.eventNamespace,(function(){return!s.disabled&&void e(this).removeClass("ui-state-active")})).bind("keydown"+this.eventNamespace,(function(t){return!s.disabled&&void((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"))})).bind("keyup"+this.eventNamespace,(function(){e(this).removeClass("ui-state-active")})),this.buttonElement.is("a")&&this.buttonElement.keyup((function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()}))),this._setOption("disabled",s.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),(i=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" ui-state-hover ui-state-active  "+s).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?void(t?this.element.prop("disabled",!0):this.element.prop("disabled",!1)):void this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?c(this.element[0]).each((function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")})):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"!==this.type){var t=this.buttonElement.removeClass(s),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),n=this.options.icons,r=n.primary&&n.secondary,a=[];n.primary||n.secondary?(this.options.text&&a.push("ui-button-text-icon"+(r?"s":n.primary?"-primary":"-secondary")),n.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(a.push(r?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):a.push("ui-button-text-only"),t.addClass(a.join(" "))}else this.options.label&&this.element.val(this.options.label)}}),e.widget("ui.buttonset",{version:"1.9.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map((function(){return e(this).button("widget")[0]})).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map((function(){return e(this).button("widget")[0]})).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",(function(){$(this).removeClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).removeClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).removeClass("ui-datepicker-next-hover")})).delegate(t,"mouseover",(function(){$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).addClass("ui-datepicker-next-hover"))}))}function extendRemove(e,t){for(var i in $.extend(e,t),t)(null==t[i]||t[i]==undefined)&&(e[i]=t[i]);return e}$.extend($.ui,{datepicker:{version:"1.9.2"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function _attachDatepicker(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){return{id:e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var i=$(e);t.append=$([]),t.trigger=$([]),i.hasClass(this.markerClassName)||(this._attachments(i,t),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",(function(e,i,n){t.settings[i]=n})).bind("getData.datepicker",(function(e,i){return this._get(t,i)})),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var i=this._get(t,"appendText"),n=this._get(t,"isRTL");t.append&&t.append.remove(),i&&(t.append=$('<span class="'+this._appendClass+'">'+i+"</span>"),e[n?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var r=this._get(t,"showOn");if(("focus"==r||"both"==r)&&e.focus(this._showDatepicker),"button"==r||"both"==r){var a=this._get(t,"buttonText"),o=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:o,alt:a,title:a}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==o?a:$("<img/>").attr({src:o,alt:a,title:a}))),e[n?"before":"after"](t.trigger),t.trigger.click((function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1}))}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),i=this._get(e,"dateFormat");if(i.match(/[DM]/)){var n=function(e){for(var t=0,i=0,n=0;n<e.length;n++)e[n].length>t&&(t=e[n].length,i=n);return i};t.setMonth(n(this._get(e,i.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(n(this._get(e,i.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var i=$(e);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",(function(e,i,n){t.settings[i]=n})).bind("getData.datepicker",(function(e,i){return this._get(t,i)})),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,i,n,r){var a=this._dialogInst;if(!a){this.uuid+=1;var o="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),(a=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},$.data(this._dialogInput[0],PROP_NAME,a)}if(extendRemove(a.settings,n||{}),t=t&&t.constructor==Date?this._formatDate(a,t):t,this._dialogInput.val(t),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,!this._pos){var s=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[s/2-100+c,l/2-150+d]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),a.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,a),this},_destroyDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),"input"==n?(i.append.remove(),i.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==n||"span"==n)&&t.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();if("input"==n)e.disabled=!1,i.trigger.filter("button").each((function(){this.disabled=!1})).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==n||"span"==n){var r=t.children("."+this._inlineClass);r.children().removeClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=$.map(this._disabledInputs,(function(t){return t==e?null:t}))}},_disableDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();if("input"==n)e.disabled=!0,i.trigger.filter("button").each((function(){this.disabled=!0})).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==n||"span"==n){var r=t.children("."+this._inlineClass);r.children().addClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=$.map(this._disabledInputs,(function(t){return t==e?null:t})),this._disabledInputs[this._disabledInputs.length]=e}},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,i){var n=this._getInst(e);if(2==arguments.length&&"string"==typeof t)return"defaults"==t?$.extend({},$.datepicker._defaults):n?"all"==t?$.extend({},n.settings):this._get(n,t):null;var r=t||{};if("string"==typeof t&&((r={})[t]=i),n){this._curInst==n&&this._hideDatepicker();var a=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(n,"min"),s=this._getMinMaxDate(n,"max");extendRemove(n.settings,r),null!==o&&r.dateFormat!==undefined&&r.minDate===undefined&&(n.settings.minDate=this._formatDate(n,o)),null!==s&&r.dateFormat!==undefined&&r.maxDate===undefined&&(n.settings.maxDate=this._formatDate(n,s)),this._attachments($(e),n),this._autoSize(n),this._setDate(n,a),this._updateAlternate(n),this._updateDatepicker(n)}},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),i=!0,n=t.dpDiv.is(".ui-datepicker-rtl");if(t._keyEvent=!0,$.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),i=!1;break;case 13:var r=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);r[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,r[0]);var a=$.datepicker._get(t,"onSelect");if(a){var o=$.datepicker._formatDate(t);a.apply(t.input?t.input[0]:null,[o,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),i=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),i=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,n?1:-1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),i=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,n?-1:1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),i=e.ctrlKey||e.metaKey;break;default:i=!1}else 36==e.keyCode&&e.ctrlKey?$.datepicker._showDatepicker(this):i=!1;i&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var i=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),n=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||" ">n||!i||i.indexOf(n)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t))&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(s){$.datepicker.log(s)}return!0},_showDatepicker:function(e){if("input"!=(e=e.target||e).nodeName.toLowerCase()&&(e=$("input",e.parentNode)[0]),!$.datepicker._isDisabledDatepicker(e)&&$.datepicker._lastInput!=e){var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var i=$.datepicker._get(t,"beforeShow"),n=i?i.apply(e,[e,t]):{};if(!1!==n){extendRemove(t.settings,n),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var r=!1;$(e).parents().each((function(){return!(r|="fixed"==$(this).css("position"))}));var a={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),a=$.datepicker._checkOffset(t,a,r),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":r?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"}),!t.inline){var o=$.datepicker._get(t,"showAnim"),s=$.datepicker._get(t,"duration"),l=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(e.length){var i=$.datepicker._getBorders(t.dpDiv);e.css({left:-i[0],top:-i[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[o]||$.effects[o])?t.dpDiv.show(o,$.datepicker._get(t,"showOptions"),s,l):t.dpDiv[o||"show"](o?s:null,l),o&&s||l(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}}}},_updateDatepicker:function(e){this.maxRows=4;var t=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var i=e.dpDiv.find("iframe.ui-datepicker-cover");i.length&&i.css({left:-t[0],top:-t[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n=this._getNumberOfMonths(e),r=n[1];if(e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),r>1&&e.dpDiv.addClass("ui-datepicker-multi-"+r).css("width",17*r+"em"),e.dpDiv[(1!=n[0]||1!=n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus(),e.yearshtml){var a=e.yearshtml;setTimeout((function(){a===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),a=e.yearshtml=null}),0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,i){var n=e.dpDiv.outerWidth(),r=e.dpDiv.outerHeight(),a=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,s=document.documentElement.clientWidth+(i?0:$(document).scrollLeft()),l=document.documentElement.clientHeight+(i?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?n-a:0,t.left-=i&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=i&&t.top==e.input.offset().top+o?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+n>s&&s>n?Math.abs(t.left+n-s):0),t.top-=Math.min(t.top,t.top+r>l&&l>r?Math.abs(r+o):0),t},_findPos:function(e){for(var t=this._getInst(e),i=this._get(t,"isRTL");e&&("hidden"==e.type||1!=e.nodeType||$.expr.filters.hidden(e));)e=e[i?"previousSibling":"nextSibling"];var n=$(e).offset();return[n.left,n.top]},_hideDatepicker:function(e){var t=this._curInst;if(t&&(!e||t==$.data(e,PROP_NAME))&&this._datepickerShowing){var i=this._get(t,"showAnim"),n=this._get(t,"duration"),r=function(){$.datepicker._tidyDialog(t)};$.effects&&($.effects.effect[i]||$.effects[i])?t.dpDiv.hide(i,$.datepicker._get(t,"showOptions"),n,r):t.dpDiv["slideDown"==i?"slideUp":"fadeIn"==i?"fadeOut":"hide"](i?n:null,r),i||r(),this._datepickerShowing=!1;var a=this._get(t,"onClose");a&&a.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if($.datepicker._curInst){var t=$(e.target),i=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&0==t.parents("#"+$.datepicker._mainDivId).length&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=i)&&$.datepicker._hideDatepicker()}},_adjustDate:function(e,t,i){var n=$(e),r=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(r,t+("M"==i?this._get(r,"showCurrentAtPos"):0),i),this._updateDatepicker(r))},_gotoToday:function(e){var t=$(e),i=this._getInst(t[0]);if(this._get(i,"gotoCurrent")&&i.currentDay)i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear;else{var n=new Date;i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()}this._notifyChange(i),this._adjustDate(t)},_selectMonthYear:function(e,t,i){var n=$(e),r=this._getInst(n[0]);r["selected"+("M"==i?"Month":"Year")]=r["draw"+("M"==i?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(r),this._adjustDate(n)},_selectDay:function(e,t,i,n){var r=$(e);if(!$(n).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(r[0])){var a=this._getInst(r[0]);a.selectedDay=a.currentDay=$("a",n).html(),a.selectedMonth=a.currentMonth=t,a.selectedYear=a.currentYear=i,this._selectDate(e,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear))}},_clearDate:function(e){var t=$(e);this._getInst(t[0]),this._selectDate(t,"")},_selectDate:function(e,t){var i=$(e),n=this._getInst(i[0]);t=null!=t?t:this._formatDate(n),n.input&&n.input.val(t),this._updateAlternate(n);var r=this._get(n,"onSelect");r?r.apply(n.input?n.input[0]:null,[t,n]):n.input&&n.input.trigger("change"),n.inline?this._updateDatepicker(n):(this._hideDatepicker(),this._lastInput=n.input[0],"object"!=typeof n.input[0]&&n.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var i=this._get(e,"altFormat")||this._get(e,"dateFormat"),n=this._getDate(e),r=this.formatDate(i,n,this._getFormatConfig(e));$(t).each((function(){$(this).val(r)}))}},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var i=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((i-t)/864e5)/7)+1},parseDate:function(e,t,i){if(null==e||null==t)throw"Invalid arguments";if(""==(t="object"==typeof t?t.toString():t+""))return null;var n=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff;n="string"!=typeof n?n:(new Date).getFullYear()%100+parseInt(n,10);for(var r=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,s=(i?i.monthNames:null)||this._defaults.monthNames,l=-1,c=-1,d=-1,h=-1,u=!1,p=function(t){var i=_+1<e.length&&e.charAt(_+1)==t;return i&&_++,i},f=function(e){var i=p(e),n=new RegExp("^\\d{1,"+("@"==e?14:"!"==e?20:"y"==e&&i?4:"o"==e?3:2)+"}"),r=t.substring(v).match(n);if(!r)throw"Missing number at position "+v;return v+=r[0].length,parseInt(r[0],10)},g=function(e,i,n){var r=$.map(p(e)?n:i,(function(e,t){return[[t,e]]})).sort((function(e,t){return-(e[1].length-t[1].length)})),a=-1;if($.each(r,(function(e,i){var n=i[1];return t.substr(v,n.length).toLowerCase()==n.toLowerCase()?(a=i[0],v+=n.length,!1):void 0})),-1!=a)return a+1;throw"Unknown name at position "+v},m=function(){if(t.charAt(v)!=e.charAt(_))throw"Unexpected literal at position "+v;v++},v=0,_=0;_<e.length;_++)if(u)"'"!=e.charAt(_)||p("'")?m():u=!1;else switch(e.charAt(_)){case"d":d=f("d");break;case"D":g("D",r,a);break;case"o":h=f("o");break;case"m":c=f("m");break;case"M":c=g("M",o,s);break;case"y":l=f("y");break;case"@":l=(b=new Date(f("@"))).getFullYear(),c=b.getMonth()+1,d=b.getDate();break;case"!":var b;l=(b=new Date((f("!")-this._ticksTo1970)/1e4)).getFullYear(),c=b.getMonth()+1,d=b.getDate();break;case"'":p("'")?m():u=!0;break;default:m()}if(v<t.length){var w=t.substr(v);if(!/^\s+/.test(w))throw"Extra/unparsed characters found in date: "+w}if(-1==l?l=(new Date).getFullYear():100>l&&(l+=(new Date).getFullYear()-(new Date).getFullYear()%100+(n>=l?0:-100)),h>-1)for(c=1,d=h;;){var y=this._getDaysInMonth(l,c-1);if(y>=d)break;c++,d-=y}if((b=this._daylightSavingAdjust(new Date(l,c-1,d))).getFullYear()!=l||b.getMonth()+1!=c||b.getDate()!=d)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,i){if(!t)return"";var n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,r=(i?i.dayNames:null)||this._defaults.dayNames,a=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,o=(i?i.monthNames:null)||this._defaults.monthNames,s=function(t){var i=u+1<e.length&&e.charAt(u+1)==t;return i&&u++,i},l=function(e,t,i){var n=""+t;if(s(e))for(;n.length<i;)n="0"+n;return n},c=function(e,t,i,n){return s(e)?n[t]:i[t]},d="",h=!1;if(t)for(var u=0;u<e.length;u++)if(h)"'"!=e.charAt(u)||s("'")?d+=e.charAt(u):h=!1;else switch(e.charAt(u)){case"d":d+=l("d",t.getDate(),2);break;case"D":d+=c("D",t.getDay(),n,r);break;case"o":d+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=l("m",t.getMonth()+1,2);break;case"M":d+=c("M",t.getMonth(),a,o);break;case"y":d+=s("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":s("'")?d+="'":h=!0;break;default:d+=e.charAt(u)}return d},_possibleChars:function(e){for(var t="",i=!1,n=function(t){var i=r+1<e.length&&e.charAt(r+1)==t;return i&&r++,i},r=0;r<e.length;r++)if(i)"'"!=e.charAt(r)||n("'")?t+=e.charAt(r):i=!1;else switch(e.charAt(r)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":n("'")?t+="'":i=!0;break;default:t+=e.charAt(r)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!=e.lastVal){var i,n,a=this._get(e,"dateFormat"),o=e.lastVal=e.input?e.input.val():null;i=n=this._getDefaultDate(e);var s=this._getFormatConfig(e);try{i=this.parseDate(a,o,s)||n}catch(r){this.log(r),o=t?"":o}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=o?i.getDate():0,e.currentMonth=o?i.getMonth():0,e.currentYear=o?i.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,i){var n=null==t||""===t?i:"string"==typeof t?function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(i){}for(var n=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,r=n.getFullYear(),a=n.getMonth(),o=n.getDate(),s=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=s.exec(t);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":a+=parseInt(l[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(r,a));break;case"y":case"Y":r+=parseInt(l[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(r,a))}l=s.exec(t)}return new Date(r,a,o)}(t):"number"==typeof t?isNaN(t)?i:function(e){var t=new Date;return t.setDate(t.getDate()+e),t}(t):new Date(t.getTime());return(n=n&&"Invalid Date"==n.toString()?i:n)&&(n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0)),this._daylightSavingAdjust(n)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,r=e.selectedMonth,a=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),r==e.selectedMonth&&a==e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""==e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),i="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map((function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(i)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])}))},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var i=this._get(e,"isRTL"),n=this._get(e,"showButtonPanel"),r=this._get(e,"hideIfNoPrevNext"),a=this._get(e,"navigationAsDateFormat"),o=this._getNumberOfMonths(e),s=this._get(e,"showCurrentAtPos"),l=this._get(e,"stepMonths"),c=1!=o[0]||1!=o[1],d=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),h=this._getMinMaxDate(e,"min"),u=this._getMinMaxDate(e,"max"),p=e.drawMonth-s,f=e.drawYear;if(0>p&&(p+=12,f--),u){var g=this._daylightSavingAdjust(new Date(u.getFullYear(),u.getMonth()-o[0]*o[1]+1,u.getDate()));for(g=h&&h>g?h:g;this._daylightSavingAdjust(new Date(f,p,1))>g;)0>--p&&(p=11,f--)}e.drawMonth=p,e.drawYear=f;var m=this._get(e,"prevText");m=a?this.formatDate(m,this._daylightSavingAdjust(new Date(f,p-l,1)),this._getFormatConfig(e)):m;var v=this._canAdjustMonth(e,-1,f,p)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+m+"</span></a>":r?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+m+"</span></a>",_=this._get(e,"nextText");_=a?this.formatDate(_,this._daylightSavingAdjust(new Date(f,p+l,1)),this._getFormatConfig(e)):_;var b=this._canAdjustMonth(e,1,f,p)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+_+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+_+"</span></a>":r?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+_+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+_+"</span></a>",w=this._get(e,"currentText"),y=this._get(e,"gotoCurrent")&&e.currentDay?d:t;w=a?this.formatDate(w,y,this._getFormatConfig(e)):w;var x=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",C=n?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(i?x:"")+(this._isInRange(e,y)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+w+"</button>":"")+(i?"":x)+"</div>":"",S=parseInt(this._get(e,"firstDay"),10);S=isNaN(S)?0:S;for(var T=this._get(e,"showWeek"),k=this._get(e,"dayNames"),A=(this._get(e,"dayNamesShort"),this._get(e,"dayNamesMin")),P=this._get(e,"monthNames"),D=this._get(e,"monthNamesShort"),E=this._get(e,"beforeShowDay"),M=this._get(e,"showOtherMonths"),O=this._get(e,"selectOtherMonths"),I=(this._get(e,"calculateWeek")||this.iso8601Week,this._getDefaultDate(e)),N="",L=0;L<o[0];L++){var R="";this.maxRows=4;for(var j=0;j<o[1];j++){var B=this._daylightSavingAdjust(new Date(f,p,e.selectedDay)),V=" ui-corner-all",H="";if(c){if(H+='<div class="ui-datepicker-group',o[1]>1)switch(j){case 0:H+=" ui-datepicker-group-first",V=" ui-corner-"+(i?"right":"left");break;case o[1]-1:H+=" ui-datepicker-group-last",V=" ui-corner-"+(i?"left":"right");break;default:H+=" ui-datepicker-group-middle",V=""}H+='">'}H+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+V+'">'+(/all|left/.test(V)&&0==L?i?b:v:"")+(/all|right/.test(V)&&0==L?i?v:b:"")+this._generateMonthYearHeader(e,p,f,h,u,L>0||j>0,P,D)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var F=T?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"",z=0;7>z;z++){var U=(z+S)%7;F+="<th"+((z+S+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+k[U]+'">'+A[U]+"</span></th>"}H+=F+"</tr></thead><tbody>";var W=this._getDaysInMonth(f,p);f==e.selectedYear&&p==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,W));var G=(this._getFirstDayOfMonth(f,p)-S+7)%7,q=Math.ceil((G+W)/7),Y=c&&this.maxRows>q?this.maxRows:q;this.maxRows=Y;for(var Q=this._daylightSavingAdjust(new Date(f,p,1-G)),J=0;Y>J;J++){H+="<tr>";var Z=T?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(Q)+"</td>":"";for(z=0;7>z;z++){var X=E?E.apply(e.input?e.input[0]:null,[Q]):[!0,""],K=Q.getMonth()!=p,ee=K&&!O||!X[0]||h&&h>Q||u&&Q>u;Z+='<td class="'+((z+S+6)%7>=5?" ui-datepicker-week-end":"")+(K?" ui-datepicker-other-month":"")+(Q.getTime()==B.getTime()&&p==e.selectedMonth&&e._keyEvent||I.getTime()==Q.getTime()&&I.getTime()==B.getTime()?" "+this._dayOverClass:"")+(ee?" "+this._unselectableClass+" ui-state-disabled":"")+(K&&!M?"":" "+X[1]+(Q.getTime()==d.getTime()?" "+this._currentClass:"")+(Q.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+(K&&!M||!X[2]?"":' title="'+X[2]+'"')+(ee?"":' data-handler="selectDay" data-event="click" data-month="'+Q.getMonth()+'" data-year="'+Q.getFullYear()+'"')+">"+(K&&!M?"&#xa0;":ee?'<span class="ui-state-default">'+Q.getDate()+"</span>":'<a class="ui-state-default'+(Q.getTime()==t.getTime()?" ui-state-highlight":"")+(Q.getTime()==d.getTime()?" ui-state-active":"")+(K?" ui-priority-secondary":"")+'" href="#">'+Q.getDate()+"</a>")+"</td>",Q.setDate(Q.getDate()+1),Q=this._daylightSavingAdjust(Q)}H+=Z+"</tr>"}++p>11&&(p=0,f++),R+=H+="</tbody></table>"+(c?"</div>"+(o[0]>0&&j==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"")}N+=R}return N+=C+($.ui.ie6&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,N},_generateMonthYearHeader:function(e,t,i,n,r,a,o,s){var l=this._get(e,"changeMonth"),c=this._get(e,"changeYear"),d=this._get(e,"showMonthAfterYear"),h='<div class="ui-datepicker-title">',u="";if(a||!l)u+='<span class="ui-datepicker-month">'+o[t]+"</span>";else{var p=n&&n.getFullYear()==i,f=r&&r.getFullYear()==i;u+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var g=0;12>g;g++)(!p||g>=n.getMonth())&&(!f||g<=r.getMonth())&&(u+='<option value="'+g+'"'+(g==t?' selected="selected"':"")+">"+s[g]+"</option>");u+="</select>"}if(d||(h+=u+(!a&&l&&c?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",a||!c)h+='<span class="ui-datepicker-year">'+i+"</span>";else{var m=this._get(e,"yearRange").split(":"),v=(new Date).getFullYear(),_=function(e){var t=e.match(/c[+-].*/)?i+parseInt(e.substring(1),10):e.match(/[+-].*/)?v+parseInt(e,10):parseInt(e,10);return isNaN(t)?v:t},b=_(m[0]),w=Math.max(b,_(m[1]||""));for(b=n?Math.max(b,n.getFullYear()):b,w=r?Math.min(w,r.getFullYear()):w,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';w>=b;b++)e.yearshtml+='<option value="'+b+'"'+(b==i?' selected="selected"':"")+">"+b+"</option>";e.yearshtml+="</select>",h+=e.yearshtml,e.yearshtml=null}return h+=this._get(e,"yearSuffix"),d&&(h+=(!a&&l&&c?"":"&#xa0;")+u),h+"</div>"},_adjustInstDate:function(e,t,i){var n=e.drawYear+("Y"==i?t:0),r=e.drawMonth+("M"==i?t:0),a=Math.min(e.selectedDay,this._getDaysInMonth(n,r))+("D"==i?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,r,a)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"==i||"Y"==i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),r=i&&i>t?i:t;return n&&r>n?n:r},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var r=this._getNumberOfMonths(e),a=this._daylightSavingAdjust(new Date(i,n+(0>t?t:r[0]*r[1]),1));return 0>t&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(e,a)},_isInRange:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max");return(!i||t.getTime()>=i.getTime())&&(!n||t.getTime()<=n.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var r=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),r,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!=e&&"getDate"!=e&&"widget"!=e?"option"==e&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each((function(){"string"==typeof e?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)})):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.2",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(e,t){var i="ui-dialog ui-widget ui-widget-content ui-corner-all ",n={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},r={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.9.2",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.options.title=this.options.title||this.originalTitle;var t,n,r,a,o,s=this,l=this.options,c=l.title||"&#160;";t=(this.uiDialog=e("<div>")).addClass(i+l.dialogClass).css({display:"none",outline:0,zIndex:l.zIndex}).attr("tabIndex",-1).keydown((function(t){l.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE&&(s.close(t),t.preventDefault())})).mousedown((function(e){s.moveToTop(!1,e)})).appendTo("body"),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(t),n=(this.uiDialogTitlebar=e("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown",(function(){t.focus()})).prependTo(t),r=e("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click((function(e){e.preventDefault(),s.close(e)})).appendTo(n),(this.uiDialogTitlebarCloseText=e("<span>")).addClass("ui-icon ui-icon-closethick").text(l.closeText).appendTo(r),a=e("<span>").uniqueId().addClass("ui-dialog-title").html(c).prependTo(n),o=(this.uiDialogButtonPane=e("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),(this.uiButtonSet=e("<div>")).addClass("ui-dialog-buttonset").appendTo(o),t.attr({role:"dialog","aria-labelledby":a.attr("id")}),n.find("*").add(n).disableSelection(),this._hoverable(r),this._focusable(r),l.draggable&&e.fn.draggable&&this._makeDraggable(),l.resizable&&e.fn.resizable&&this._makeResizable(),this._createButtons(l.buttons),this._isOpen=!1,e.fn.bgiframe&&t.bgiframe(),this._on(t,{keydown:function(i){if(l.modal&&i.keyCode===e.ui.keyCode.TAB){var n=e(":tabbable",t),r=n.filter(":first"),a=n.filter(":last");return i.target!==a[0]||i.shiftKey?i.target===r[0]&&i.shiftKey?(a.focus(1),!1):void 0:(r.focus(1),!1)}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var e,t=this.oldPosition;this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(e=t.parent.children().eq(t.index)).length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(t){var i,n,r=this;if(this._isOpen&&!1!==this._trigger("beforeClose",t))return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this._hide(this.uiDialog,this.options.hide,(function(){r._trigger("close",t)})):(this.uiDialog.hide(),this._trigger("close",t)),e.ui.dialog.overlay.resize(),this.options.modal&&(i=0,e(".ui-dialog").each((function(){this!==r.uiDialog[0]&&(n=e(this).css("z-index"),isNaN(n)||(i=Math.max(i,n)))})),e.ui.dialog.maxZ=i),this},isOpen:function(){return this._isOpen},moveToTop:function(t,i){var n,r=this.options;return r.modal&&!t||!r.stack&&!r.modal?this._trigger("focus",i):(r.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=r.zIndex),this.overlay&&(e.ui.dialog.maxZ+=1,e.ui.dialog.overlay.maxZ=e.ui.dialog.maxZ,this.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ)),n={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},e.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",e.ui.dialog.maxZ),this.element.attr(n),this._trigger("focus",i),this)},open:function(){if(!this._isOpen){var t,i=this.options,n=this.uiDialog;return this._size(),this._position(i.position),n.show(i.show),this.overlay=i.modal?new e.ui.dialog.overlay(this):null,this.moveToTop(!0),(t=this.element.find(":tabbable")).length||((t=this.uiDialogButtonPane.find(":tabbable")).length||(t=n)),t.eq(0).focus(),this._isOpen=!0,this._trigger("open"),this}},_createButtons:function(t){var i=this,n=!1;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),"object"==typeof t&&null!==t&&e.each(t,(function(){return!(n=!0)})),n?(e.each(t,(function(t,n){var r,a;n=e.isFunction(n)?{click:n,text:t}:n,n=e.extend({type:"button"},n),a=n.click,n.click=function(){a.apply(i.element[0],arguments)},r=e("<button></button>",n).appendTo(i.uiButtonSet),e.fn.button&&r.button()})),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,r){e(this).addClass("ui-dialog-dragging"),i._trigger("dragStart",n,t(r))},drag:function(e,n){i._trigger("drag",e,t(n))},stop:function(r,a){n.position=[a.position.left-i.document.scrollLeft(),a.position.top-i.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),i._trigger("dragStop",r,t(a)),e.ui.dialog.overlay.resize()}})},_makeResizable:function(t){function i(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}t=void 0===t?this.options.resizable:t;var n=this,r=this.options,a=this.uiDialog.css("position"),o="string"==typeof t?t:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:r.maxWidth,maxHeight:r.maxHeight,minWidth:r.minWidth,minHeight:this._minHeight(),handles:o,start:function(t,r){e(this).addClass("ui-dialog-resizing"),n._trigger("resizeStart",t,i(r))},resize:function(e,t){n._trigger("resize",e,i(t))},stop:function(t,a){e(this).removeClass("ui-dialog-resizing"),r.height=e(this).height(),r.width=e(this).width(),n._trigger("resizeStop",t,i(a)),e.ui.dialog.overlay.resize()}}).css("position",a).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(t){var i,n=[],r=[0,0];t?(("string"==typeof t||"object"==typeof t&&"0"in t)&&(1===(n=t.split?t.split(" "):[t[0],t[1]]).length&&(n[1]=n[0]),e.each(["left","top"],(function(e,t){+n[e]===n[e]&&(r[e]=n[e],n[e]=t)})),t={my:n[0]+(r[0]<0?r[0]:"+"+r[0])+" "+n[1]+(r[1]<0?r[1]:"+"+r[1]),at:n.join(" ")}),t=e.extend({},e.ui.dialog.prototype.options.position,t)):t=e.ui.dialog.prototype.options.position,(i=this.uiDialog.is(":visible"))||this.uiDialog.show(),this.uiDialog.position(t),i||this.uiDialog.hide()},_setOptions:function(t){var i=this,a={},o=!1;e.each(t,(function(e,t){i._setOption(e,t),e in n&&(o=!0),e in r&&(a[e]=t)})),o&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",a)},_setOption:function(t,n){var r,a,o=this.uiDialog;switch(t){case"buttons":this._createButtons(n);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+n);break;case"dialogClass":o.removeClass(this.options.dialogClass).addClass(i+n);break;case"disabled":n?o.addClass("ui-dialog-disabled"):o.removeClass("ui-dialog-disabled");break;case"draggable":(r=o.is(":data(draggable)"))&&!n&&o.draggable("destroy"),!r&&n&&this._makeDraggable();break;case"position":this._position(n);break;case"resizable":(a=o.is(":data(resizable)"))&&!n&&o.resizable("destroy"),a&&"string"==typeof n&&o.resizable("option","handles",n),a||!1===n||this._makeResizable(n);break;case"title":e(".ui-dialog-title",this.uiDialogTitlebar).html(""+(n||"&#160;"))}this._super(t,n)},_size:function(){var t,i,n,r=this.options,a=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),r.minWidth>r.width&&(r.width=r.minWidth),t=this.uiDialog.css({height:"auto",width:r.width}).outerHeight(),i=Math.max(0,r.minHeight-t),"auto"===r.height?e.support.minHeight?this.element.css({minHeight:i,height:"auto"}):(this.uiDialog.show(),n=this.element.css("height","auto").height(),a||this.uiDialog.hide(),this.element.height(Math.max(n,i))):this.element.height(Math.max(r.height-t,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),e.extend(e.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(e){var t=e.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=e.ui.dialog.overlay.create(t)}}),e.extend(e.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),(function(e){return e+".dialog-overlay"})).join(" "),create:function(t){0===this.instances.length&&(setTimeout((function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,(function(t){return!(e(t.target).zIndex()<e.ui.dialog.overlay.maxZ)&&void 0}))}),1),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var i=this.oldInstances.pop()||e("<div>").addClass("ui-widget-overlay");return e(document).bind("keydown.dialog-overlay",(function(n){var r=e.ui.dialog.overlay.instances;0!==r.length&&r[r.length-1]===i&&t.options.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===e.ui.keyCode.ESCAPE&&(t.close(n),n.preventDefault())})),i.appendTo(document.body).css({width:this.width(),height:this.height()}),e.fn.bgiframe&&i.bgiframe(),this.instances.push(i),i},destroy:function(t){var i=e.inArray(t,this.instances),n=0;-1!==i&&this.oldInstances.push(this.instances.splice(i,1)[0]),0===this.instances.length&&e([document,window]).unbind(".dialog-overlay"),t.height(0).width(0).remove(),e.each(this.instances,(function(){n=Math.max(n,this.css("z-index"))})),this.maxZ=n},height:function(){var t;return e.ui.ie?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),Math.max(document.documentElement.offsetHeight,document.body.offsetHeight)>t?e(window).height()+"px":t+"px"):e(document).height()+"px"},width:function(){var t;return e.ui.ie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),Math.max(document.documentElement.offsetWidth,document.body.offsetWidth)>t?e(window).width()+"px":t+"px"):e(document).width()+"px"},resize:function(){var t=e([]);e.each(e.ui.dialog.overlay.instances,(function(){t=t.add(this)})),t.css({width:0,height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}}),e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(e,t){var i=!1;e.widget("ui.menu",{version:"1.9.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy((function(e){this.options.disabled&&e.preventDefault()}),this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var n=e(t.target).closest(".ui-menu-item");!i&&n.not(".ui-state-disabled").length&&(i=!0,this.select(t),n.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var i=e(t.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,i)},blur:function(t){this._delay((function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),i=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each((function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()})),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,r,a,o,s,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,r=this.previousFilter||"",a=String.fromCharCode(t.keyCode),o=!1,clearTimeout(this.filterTimer),a===r?o=!0:a=r+a,s=new RegExp("^"+i(a),"i"),n=this.activeMenu.children(".ui-menu-item").filter((function(){return s.test(e(this).children("a").text())})),(n=o&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n).length||(a=String.fromCharCode(t.keyCode),s=new RegExp("^"+i(a),"i"),n=this.activeMenu.children(".ui-menu-item").filter((function(){return s.test(e(this).children("a").text())}))),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=a,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i=this.options.icons.submenu,n=this.element.find(this.options.menus);n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each((function(){var t=e(this),n=t.prev("a"),r=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(r),t.attr("aria-labelledby",n.attr("id"))})),(t=n.add(this.element)).children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each((function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")})),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(e,t){var i,n;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),n=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(i=t.children(".ui-menu")).length&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,r,a,o,s;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,r=t.offset().top-this.activeMenu.offset().top-i-n,a=this.activeMenu.scrollTop(),o=this.activeMenu.height(),s=t.height(),0>r?this.activeMenu.scrollTop(a+r):r+s>o&&this.activeMenu.scrollTop(a+r-o+s))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(e)}),this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay((function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(t),this.activeMenu=n}),this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay((function(){this.focus(e,t)})))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;this.active&&(n="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(i,n)},nextPage:function(t){var i,n,r;return this.active?void(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,r=this.element.height(),this.active.nextAll(".ui-menu-item").each((function(){return(i=e(this)).offset().top-n-r<0})),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var i,n,r;return this.active?void(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,r=this.element.height(),this.active.prevAll(".ui-menu-item").each((function(){return(i=e(this)).offset().top-n+r>0})),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item").first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)}})}(jQuery),function(e,t){e.widget("ui.progressbar",{version:"1.9.2",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return void 0===e?this._value():(this._setOption("value",e),this)},_setOption:function(e,t){"value"===e&&(this.options.value=t,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),this._super(e,t)},_value:function(){var e=this.options.value;return"number"!=typeof e&&(e=0),Math.min(this.options.max,Math.max(this.min,e))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var e=this.value(),t=this._percentage();this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),this.valueDiv.toggle(e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(t.toFixed(0)+"%"),this.element.attr("aria-valuenow",e)}})}(jQuery),function(e,t){e.widget("ui.slider",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t,i,n=this.options,r=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a=[];for(this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(n.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),n.range&&(!0===n.range&&(n.values||(n.values=[this._valueMin(),this._valueMin()]),n.values.length&&2!==n.values.length&&(n.values=[n.values[0],n.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===n.range||"max"===n.range?" ui-slider-range-"+n.range:""))),i=n.values&&n.values.length||1,t=r.length;i>t;t++)a.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");this.handles=r.add(e(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click((function(e){e.preventDefault()})).mouseenter((function(){n.disabled||e(this).addClass("ui-state-hover")})).mouseleave((function(){e(this).removeClass("ui-state-hover")})).focus((function(){n.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))})).blur((function(){e(this).removeClass("ui-state-focus")})),this.handles.each((function(t){e(this).data("ui-slider-handle-index",t)})),this._on(this.handles,{keydown:function(t){var i,n,r,a=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),!1===this._start(t,a)))return}switch(r=this.options.step,i=n=this.options.values&&this.options.values.length?this.values(a):this.value(),t.keyCode){case e.ui.keyCode.HOME:n=this._valueMin();break;case e.ui.keyCode.END:n=this._valueMax();break;case e.ui.keyCode.PAGE_UP:n=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/5);break;case e.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/5);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;n=this._trimAlignValue(i+r);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;n=this._trimAlignValue(i-r)}this._slide(t,a,n)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,n,r,a,o,s,l,c=this,d=this.options;return!d.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),r=this._valueMax()-this._valueMin()+1,this.handles.each((function(t){var i=Math.abs(n-c.values(t));r>i&&(r=i,a=e(this),o=t)})),!0===d.range&&this.values(1)===d.min&&(o+=1,a=e(this.handles[o])),!1!==this._start(t,o)&&(this._mouseSliding=!0,this._handleIndex=o,a.addClass("ui-state-active").focus(),s=a.offset(),l=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-s.left-a.width()/2,top:t.pageY-s.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,r,a;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(n=i/t)>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),r=this._valueMax()-this._valueMin(),a=this._valueMin()+n*r,this._trimAlignValue(a)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var n,r,a;this.options.values&&this.options.values.length?(n=this.values(t?0:1),2===this.options.values.length&&!0===this.options.range&&(0===t&&i>n||1===t&&n>i)&&(i=n),i!==this.values(t)&&((r=this.values())[t]=i,a=this._trigger("slide",e,{handle:this.handles[t],value:i,values:r}),n=this.values(t?0:1),!1!==a&&this.values(t,i,!0))):i!==this.value()&&(!1!==(a=this._trigger("slide",e,{handle:this.handles[t],value:i}))&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,i){var n,r,a;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(n=this.options.values,r=arguments[0],a=0;a<n.length;a+=1)n[a]=this._trimAlignValue(r[a]),this._change(null,a);this._refreshValue()},_setOption:function(t,i){var n,r=0;switch(e.isArray(this.options.values)&&(r=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":i?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;r>n;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var e=this.options.value;return this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],this._trimAlignValue(t);for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,n,r,a,o=this.options.range,s=this.options,l=this,c=!this._animateOff&&s.animate,d={};this.options.values&&this.options.values.length?this.handles.each((function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,d["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[c?"animate":"css"](d,s.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},s.animate),1===n&&l.range[c?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:s.animate})):(0===n&&l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},s.animate),1===n&&l.range[c?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:s.animate}))),t=i})):(n=this.value(),r=this._valueMin(),a=this._valueMax(),i=a!==r?(n-r)/(a-r)*100:0,d["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[c?"animate":"css"](d,s.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},s.animate),"max"===o&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:s.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},s.animate),"max"===o&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:s.animate}))}})}(jQuery),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.9.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],(function(e,n){var r=i.attr(n);void 0!==r&&r.length&&(t[n]=r)})),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",e)))},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay((function(){this.spinning&&this._stop(e)}),100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){this.element[0]===this.document[0].activeElement||(this.element.focus(),this.previous=n,this._delay((function(){this.previous=n})))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur,i.call(this)})),!1!==this._start(t)&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?!1!==this._start(t)&&void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,n=e.ui.keyCode;switch(t.keyCode){case n.UP:return this._repeat(null,1,t),!0;case n.DOWN:return this._repeat(null,-1,t),!0;case n.PAGE_UP:return this._repeat(null,i.page,t),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(e){return!(!this.spinning&&!1===this._trigger("start",e))&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay((function(){this._repeat(40,t,i)}),e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",t,{value:i})||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,n=this.options;return i=e-(t=null!==n.min?n.min:0),e=t+(i=Math.round(i/n.step)*n.step),e=parseFloat(e.toFixed(this._precision())),null!==n.max&&e>n.max?n.max:null!==n.min&&e<n.min?n.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,void this.element.val(this._format(i))}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),this._super(e,t),"disabled"===e&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t((function(e){this._super(e),this._value(this.element.val())})),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var i;""!==e&&(null!==(i=this._parse(e))&&(t||(i=this._adjustValue(i)),e=this._format(i))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t((function(e){this._stepUp(e)})),_stepUp:function(e){this._spin((e||1)*this.options.step)},stepDown:t((function(e){this._stepDown(e)})),_stepDown:function(e){this._spin((e||1)*-this.options.step)},pageUp:t((function(e){this._stepUp((e||1)*this.options.page)})),pageDown:t((function(e){this._stepDown((e||1)*this.options.page)})),value:function(e){return arguments.length?void t(this._value).call(this,e):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(e,t){function i(){return++r}function n(e){return e.hash.length>1&&e.href.replace(a,"")===location.href.replace(a,"").replace(/\s/g,"%20")}var r=0,a=/#.*$/;e.widget("ui.tabs",{version:"1.9.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,i=this.options,n=i.active,r=location.hash.substring(1);this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,(function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()})).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,(function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()})),this._processTabs(),null===n&&(r&&this.tabs.each((function(t,i){return e(i).attr("aria-controls")===r?(n=t,!1):void 0})),null===n&&(n=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===n||-1===n)&&(n=!!this.tabs.length&&0)),!1!==n&&(-1===(n=this.tabs.index(this.tabs.eq(n)))&&(n=!i.collapsible&&0)),i.active=n,!i.collapsible&&!1===i.active&&this.anchors.length&&(i.active=0),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),(function(e){return t.tabs.index(e)})))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(this.options.active):this.active=e(),this._refresh(),this.active.length&&this.load(i.active)},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),n=this.tabs.index(i),r=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:n++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:r=!1,n--;break;case e.ui.keyCode.END:n=this.anchors.length-1;break;case e.ui.keyCode.HOME:n=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n!==this.options.active&&n);default:return}t.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,r),t.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay((function(){this.option("active",n)}),this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){for(var n=this.tabs.length-1;-1!==e.inArray((t>n&&(t=0),0>t&&(t=n),t),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?void this._activate(t):"disabled"===e?void this._setupDisabled(t):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||!1!==this.options.active||this._activate(0)),"event"===e&&this._setupEvents(t),void("heightStyle"===e&&this._setupHeightStyle(t)))},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),(function(e){return i.index(e)})),this._processTabs(),!1!==t.active&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map((function(){return e("a",this)[0]})).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each((function(i,r){var a,o,s,l=e(r).uniqueId().attr("id"),c=e(r).closest("li"),d=c.attr("aria-controls");n(r)?(a=r.hash,o=t.element.find(t._sanitizeSelector(a))):(a="#"+(s=t._tabId(c)),(o=t.element.find(a)).length||(o=t._createPanel(s)).insertAfter(t.panels[i-1]||t.tablist),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),d&&c.data("ui-tabs-aria-controls",d),c.attr({"aria-controls":a.substring(1),"aria-labelledby":l}),o.attr("aria-labelledby",l)})),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,n=0;i=this.tabs[n];n++)!0===t||-1!==e.inArray(n,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),(function(e,t){i[t]="_eventHandler"})),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,n,r=this.element.parent();"fill"===t?(e.support.minHeight||(n=r.css("overflow"),r.css("overflow","hidden")),i=r.height(),this.element.siblings(":visible").each((function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))})),n&&r.css("overflow",n),this.element.children().not(this.panels).each((function(){i-=e(this).outerHeight(!0)})),this.panels.each((function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))})).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each((function(){i=Math.max(i,e(this).height("").height())})).height(i))},_eventHandler:function(t){var i=this.options,n=this.active,r=e(t.currentTarget).closest("li"),a=r[0]===n[0],o=a&&i.collapsible,s=o?e():this._getPanelForTab(r),l=n.length?this._getPanelForTab(n):e(),c={oldTab:n,oldPanel:l,newTab:o?e():r,newPanel:s};t.preventDefault(),r.hasClass("ui-state-disabled")||r.hasClass("ui-tabs-loading")||this.running||a&&!i.collapsible||!1===this._trigger("beforeActivate",t,c)||(i.active=!o&&this.tabs.index(r),this.active=a?e():r,this.xhr&&this.xhr.abort(),l.length||s.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),s.length&&this.load(this.tabs.index(r),t),this._toggle(t,c))},_toggle:function(t,i){function n(){a.running=!1,a._trigger("activate",t,i)}function r(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&a.options.show?a._show(o,a.options.show,n):(o.show(),n())}var a=this,o=i.newPanel,s=i.oldPanel;this.running=!0,s.length&&this.options.hide?this._hide(s,this.options.hide,(function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r()})):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s.hide(),r()),s.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),o.length&&s.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter((function(){return 0===e(this).attr("tabIndex")})).attr("tabIndex",-1),o.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var i,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return!1===t?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId(),this.tabs.add(this.panels).each((function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")})),this.tabs.each((function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i):t.removeAttr("aria-controls")})),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var n=this.options.disabled;!1!==n&&(i===t?n=!1:(i=this._getIndex(i),n=e.isArray(n)?e.map(n,(function(e){return e!==i?e:null})):e.map(this.tabs,(function(e,t){return t!==i?t:null}))),this._setupDisabled(n))},disable:function(i){var n=this.options.disabled;if(!0!==n){if(i===t)n=!0;else{if(i=this._getIndex(i),-1!==e.inArray(i,n))return;n=e.isArray(n)?e.merge([i],n).sort():[i]}this._setupDisabled(n)}},load:function(t,i){t=this._getIndex(t);var r=this,a=this.tabs.eq(t),o=a.find(".ui-tabs-anchor"),s=this._getPanelForTab(a),l={tab:a,panel:s};n(o[0])||(this.xhr=e.ajax(this._ajaxSettings(o,i,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(a.addClass("ui-tabs-loading"),s.attr("aria-busy","true"),this.xhr.success((function(e){setTimeout((function(){s.html(e),r._trigger("load",i,l)}),1)})).complete((function(e,t){setTimeout((function(){"abort"===t&&r.panels.stop(!1,!0),a.removeClass("ui-tabs-loading"),s.removeAttr("aria-busy"),e===r.xhr&&delete r.xhr}),1)}))))},_ajaxSettings:function(t,i,n){var r=this;return{url:t.attr("href"),beforeSend:function(t,a){return r._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:a},n))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),!1!==e.uiBackCompat&&(e.ui.tabs.prototype._ui=function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},e.widget("ui.tabs",e.ui.tabs,{url:function(e,t){this.anchors.eq(e).attr("href",t)}}),e.widget("ui.tabs",e.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var t=this;this._on({tabsbeforeload:function(i,n){return e.data(n.tab[0],"cache.tabs")?void i.preventDefault():void n.jqXHR.success((function(){t.options.cache&&e.data(n.tab[0],"cache.tabs",!0)}))}})},_ajaxSettings:function(t,i,n){var r=this.options.ajaxOptions;return e.extend({},r,{error:function(e,t){try{r.error(e,t,n.tab.closest("li").index(),n.tab[0])}catch(i){}}},this._superApply(arguments))},_setOption:function(e,t){"cache"===e&&!1===t&&this.anchors.removeData("cache.tabs"),this._super(e,t)},_destroy:function(){this.anchors.removeData("cache.tabs"),this._super()},url:function(e){this.anchors.eq(e).removeData("cache.tabs"),this._superApply(arguments)}}),e.widget("ui.tabs",e.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),e.widget("ui.tabs",e.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super(),this._on({tabsbeforeload:function(e,t){if(e.target===this.element[0]&&this.options.spinner){var i=t.tab.find("span"),n=i.html();i.html(this.options.spinner),t.jqXHR.complete((function(){i.html(n)}))}}})}}),e.widget("ui.tabs",e.ui.tabs,{options:{enable:null,disable:null},enable:function(t){var i,n=this.options;(t&&!0===n.disabled||e.isArray(n.disabled)&&-1!==e.inArray(t,n.disabled))&&(i=!0),this._superApply(arguments),i&&this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t]))},disable:function(t){var i,n=this.options;(t&&!1===n.disabled||e.isArray(n.disabled)&&-1===e.inArray(t,n.disabled))&&(i=!0),this._superApply(arguments),i&&this._trigger("disable",null,this._ui(this.anchors[t],this.panels[t]))}}),e.widget("ui.tabs",e.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(i,n,r){r===t&&(r=this.anchors.length);var a,o,s=this.options,l=e(s.tabTemplate.replace(/#\{href\}/g,i).replace(/#\{label\}/g,n)),c=i.indexOf("#")?this._tabId(l):i.replace("#","");return l.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0),l.attr("aria-controls",c),a=r>=this.tabs.length,(o=this.element.find("#"+c)).length||(o=this._createPanel(c),a?r>0?o.insertAfter(this.panels.eq(-1)):o.appendTo(this.element):o.insertBefore(this.panels[r])),o.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide(),a?l.appendTo(this.tablist):l.insertBefore(this.tabs[r]),s.disabled=e.map(s.disabled,(function(e){return e>=r?++e:e})),this.refresh(),1===this.tabs.length&&!1===s.active&&this.option("active",0),this._trigger("add",null,this._ui(this.anchors[r],this.panels[r])),this},remove:function(t){t=this._getIndex(t);var i=this.options,n=this.tabs.eq(t).remove(),r=this._getPanelForTab(n).remove();return n.hasClass("ui-tabs-active")&&this.anchors.length>2&&this._activate(t+(t+1<this.anchors.length?1:-1)),i.disabled=e.map(e.grep(i.disabled,(function(e){return e!==t})),(function(e){return e>=t?--e:e})),this.refresh(),this._trigger("remove",null,this._ui(n.find("a")[0],r[0])),this}}),e.widget("ui.tabs",e.ui.tabs,{length:function(){return this.anchors.length}}),e.widget("ui.tabs",e.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(t){var n=t.is("li")?t.find("a[href]"):t;return n=n[0],e(n).closest("li").attr("aria-controls")||n.title&&n.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+i()}}),e.widget("ui.tabs",e.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(t){return e(this.options.panelTemplate).attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),e.widget("ui.tabs",e.ui.tabs,{_create:function(){var e=this.options;null===e.active&&e.selected!==t&&(e.active=-1!==e.selected&&e.selected),this._super(),e.selected=e.active,!1===e.selected&&(e.selected=-1)},_setOption:function(e,t){if("selected"!==e)return this._super(e,t);var i=this.options;this._super("active",-1!==t&&t),i.selected=i.active,!1===i.selected&&(i.selected=-1)},_eventHandler:function(){this._superApply(arguments),this.options.selected=this.options.active,!1===this.options.selected&&(this.options.selected=-1)}}),e.widget("ui.tabs",e.ui.tabs,{options:{show:null,select:null},_create:function(){this._super(),!1!==this.options.active&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(e,t,i){var n,r,a=this._superApply(arguments);return!!a&&("beforeActivate"===e?(n=i.newTab.length?i.newTab:i.oldTab,r=i.newPanel.length?i.newPanel:i.oldPanel,a=this._super("select",t,{tab:n.find(".ui-tabs-anchor")[0],panel:r[0],index:n.closest("li").index()})):"activate"===e&&i.newTab.length&&(a=this._super("show",t,{tab:i.newTab.find(".ui-tabs-anchor")[0],panel:i.newPanel[0],index:i.newTab.closest("li").index()})),a)}}),e.widget("ui.tabs",e.ui.tabs,{select:function(e){if(-1===(e=this._getIndex(e))){if(!this.options.collapsible||-1===this.options.selected)return;e=this.options.selected}this.anchors.eq(e).trigger(this.options.event+this.eventNamespace)}}),function(){var t=0;e.widget("ui.tabs",e.ui.tabs,{options:{cookie:null},_create:function(){var e,t=this.options;null==t.active&&t.cookie&&(-1===(e=parseInt(this._cookie(),10))&&(e=!1),t.active=e),this._super()},_cookie:function(i){var n=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++t)];return arguments.length&&(n.push(!1===i?-1:i),n.push(this.options.cookie)),e.cookie.apply(null,n)},_refresh:function(){this._super(),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(){this._superApply(arguments),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_destroy:function(){this._super(),this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),e.widget("ui.tabs",e.ui.tabs,{_trigger:function(t,i,n){var r=e.extend({},n);return"load"===t&&(r.panel=r.panel[0],r.tab=r.tab.find(".ui-tabs-anchor")[0]),this._super(t,i,r)}}),e.widget("ui.tabs",e.ui.tabs,{options:{fx:null},_getFx:function(){var t,i,n=this.options.fx;return n&&(e.isArray(n)?(t=n[0],i=n[1]):t=i=n),n?{show:i,hide:t}:null},_toggle:function(e,t){function i(){r.running=!1,r._trigger("activate",e,t)}function n(){t.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),a.length&&s.show?a.animate(s.show,s.show.duration,(function(){i()})):(a.show(),i())}var r=this,a=t.newPanel,o=t.oldPanel,s=this._getFx();return s?(r.running=!0,void(o.length&&s.hide?o.animate(s.hide,s.hide.duration,(function(){t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()})):(t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),o.hide(),n()))):this._super(e,t)}}))}(jQuery),function(e){var t=0;e.widget("ui.tooltip",{version:"1.9.2",options:{content:function(){return e(this).attr("title")},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,i){var n=this;return"disabled"===t?(this[i?"_disable":"_enable"](),void(this.options[t]=i)):(this._super(t,i),void("content"===t&&e.each(this.tooltips,(function(e,t){n._updateContent(t)}))))},_disable:function(){var t=this;e.each(this.tooltips,(function(i,n){var r=e.Event("blur");r.target=r.currentTarget=n[0],t.close(r,!0)})),this.element.find(this.options.items).andSelf().each((function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")}))},_enable:function(){this.element.find(this.options.items).andSelf().each((function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))}))},open:function(t){var i=this,n=e(t?t.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&n.parents().each((function(){var t,n=e(this);n.data("ui-tooltip-open")&&((t=e.Event("blur")).target=t.currentTarget=this,i.close(t,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))})),this._updateContent(n,t))},_updateContent:function(e,t){var i,n=this.options.content,r=this,a=t?t.type:null;return"string"==typeof n?this._open(t,e,n):void((i=n.call(e[0],(function(i){e.data("ui-tooltip-open")&&r._delay((function(){t&&(t.type=a),this._open(t,e,i)}))})))&&this._open(t,e,i))},_open:function(t,i,n){function r(e){l.of=e,a.is(":hidden")||a.position(l)}var a,o,s,l=e.extend({},this.options.position);if(n){if((a=this._find(i)).length)return void a.find(".ui-tooltip-content").html(n);i.is("[title]")&&(t&&"mouseover"===t.type?i.attr("title",""):i.removeAttr("title")),a=this._tooltip(i),function(t,i){var n=(t.attr("aria-describedby")||"").split(/\s+/);n.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(n.join(" ")))}(i,a.attr("id")),a.find(".ui-tooltip-content").html(n),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:r}),r(t)):a.position(e.extend({of:i},this.options.position)),a.hide(),this._show(a,this.options.show),this.options.show&&this.options.show.delay&&(s=setInterval((function(){a.is(":visible")&&(r(l.of),clearInterval(s))}),e.fx.interval)),this._trigger("open",t,{tooltip:a}),o={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=i[0],this.close(n,!0)}},remove:function(){this._removeTooltip(a)}},t&&"mouseover"!==t.type||(o.mouseleave="close"),t&&"focusin"!==t.type||(o.focusout="close"),this._on(!0,i,o)}},close:function(t){var i=this,n=e(t?t.currentTarget:this.element),r=this._find(n);this.closing||(n.data("ui-tooltip-title")&&n.attr("title",n.data("ui-tooltip-title")),function(t){var i=t.data("ui-tooltip-id"),n=(t.attr("aria-describedby")||"").split(/\s+/),r=e.inArray(i,n);-1!==r&&n.splice(r,1),t.removeData("ui-tooltip-id"),(n=e.trim(n.join(" ")))?t.attr("aria-describedby",n):t.removeAttr("aria-describedby")}(n),r.stop(!0),this._hide(r,this.options.hide,(function(){i._removeTooltip(e(this))})),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,(function(t,n){e(n.element).attr("title",n.title),delete i.parents[t]})),this.closing=!0,this._trigger("close",t,{tooltip:r}),this.closing=!1)},_tooltip:function(i){var n="ui-tooltip-"+t++,r=e("<div>").attr({id:n,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(r),r.appendTo(this.document[0].body),e.fn.bgiframe&&r.bgiframe(),this.tooltips[n]=i,r},_find:function(t){var i=t.data("ui-tooltip-id");return i?e("#"+i):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,(function(i,n){var r=e.Event("blur");r.target=r.currentTarget=n[0],t.close(r,!0),e("#"+i).remove(),n.data("ui-tooltip-title")&&(n.attr("title",n.data("ui-tooltip-title")),n.removeData("ui-tooltip-title"))}))}})}(jQuery),jQuery.effects||function(e,t){var i=!1!==e.uiBackCompat,n="ui-effects-";e.effects={effect:{}},function(t,i){function n(e,t,i){var n=u[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:0>e?0:n.max<e?n.max:e)}function r(e){var i=d(),n=i._rgba=[];return e=e.toLowerCase(),g(c,(function(t,r){var a,o=r.re.exec(e),s=o&&r.parse(o),l=r.space||"rgba";return s?(a=i[l](s),i[h[l].cache]=a[h[l].cache],n=i._rgba=a._rgba,!1):void 0})),n.length?("0,0,0,0"===n.join()&&t.extend(n,o.transparent),i):o[e]}function a(e,t,i){return 1>6*(i=(i+1)%1)?e+(t-e)*i*6:1>2*i?t:2>3*i?e+(t-e)*(2/3-i)*6:e}var o,s="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),l=/^([\-+])=\s*(\d+\.?\d*)/,c=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],d=t.Color=function(e,i,n,r){return new t.Color.fn.parse(e,i,n,r)},h={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},p=d.support={},f=t("<p>")[0],g=t.each;f.style.cssText="background-color:rgba(1,1,1,.5)",p.rgba=f.style.backgroundColor.indexOf("rgba")>-1,g(h,(function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}})),d.fn=t.extend(d.prototype,{parse:function(a,s,l,c){if(a===i)return this._rgba=[null,null,null,null],this;(a.jquery||a.nodeType)&&(a=t(a).css(s),s=i);var u=this,p=t.type(a),f=this._rgba=[];return s!==i&&(a=[a,s,l,c],p="array"),"string"===p?this.parse(r(a)||o._default):"array"===p?(g(h.rgba.props,(function(e,t){f[t.idx]=n(a[t.idx],t)})),this):"object"===p?(g(h,a instanceof d?function(e,t){a[t.cache]&&(u[t.cache]=a[t.cache].slice())}:function(t,i){var r=i.cache;g(i.props,(function(e,t){if(!u[r]&&i.to){if("alpha"===e||null==a[e])return;u[r]=i.to(u._rgba)}u[r][t.idx]=n(a[e],t,!0)})),u[r]&&e.inArray(null,u[r].slice(0,3))<0&&(u[r][3]=1,i.from&&(u._rgba=i.from(u[r])))}),this):void 0},is:function(e){var t=d(e),i=!0,n=this;return g(h,(function(e,r){var a,o=t[r.cache];return o&&(a=n[r.cache]||r.to&&r.to(n._rgba)||[],g(r.props,(function(e,t){return null!=o[t.idx]?i=o[t.idx]===a[t.idx]:void 0}))),i})),i},_space:function(){var e=[],t=this;return g(h,(function(i,n){t[n.cache]&&e.push(i)})),e.pop()},transition:function(e,t){var i=d(e),r=i._space(),a=h[r],o=0===this.alpha()?d("transparent"):this,s=o[a.cache]||a.to(o._rgba),l=s.slice();return i=i[a.cache],g(a.props,(function(e,r){var a=r.idx,o=s[a],c=i[a],d=u[r.type]||{};null!==c&&(null===o?l[a]=c:(d.mod&&(c-o>d.mod/2?o+=d.mod:o-c>d.mod/2&&(o-=d.mod)),l[a]=n((c-o)*t+o,r)))})),this[r](l)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),r=d(e)._rgba;return d(t.map(i,(function(e,t){return(1-n)*r[t]+n*e})))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,(function(e,t){return null==e?t>2?1:0:e}));return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),(function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e}));return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),n=i.pop();return e&&i.push(~~(255*n)),"#"+t.map(i,(function(e){return 1===(e=(e||0).toString(16)).length?"0"+e:e})).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),d.fn.parse.prototype=d.fn,h.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,r=e[1]/255,a=e[2]/255,o=e[3],s=Math.max(n,r,a),l=Math.min(n,r,a),c=s-l,d=s+l,h=.5*d;return t=l===s?0:n===s?60*(r-a)/c+360:r===s?60*(a-n)/c+120:60*(n-r)/c+240,i=0===h||1===h?h:.5>=h?c/d:c/(2-d),[Math.round(t)%360,i,h,null==o?1:o]},h.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],r=e[3],o=.5>=n?n*(1+i):n+i-n*i,s=2*n-o;return[Math.round(255*a(s,o,t+1/3)),Math.round(255*a(s,o,t)),Math.round(255*a(s,o,t-1/3)),r]},g(h,(function(e,r){var a=r.props,o=r.cache,s=r.to,c=r.from;d.fn[e]=function(e){if(s&&!this[o]&&(this[o]=s(this._rgba)),e===i)return this[o].slice();var r,l=t.type(e),h="array"===l||"object"===l?e:arguments,u=this[o].slice();return g(a,(function(e,t){var i=h["object"===l?e:t.idx];null==i&&(i=u[t.idx]),u[t.idx]=n(i,t)})),c?((r=d(c(u)))[o]=u,r):d(u)},g(a,(function(i,n){d.fn[i]||(d.fn[i]=function(r){var a,o=t.type(r),s="alpha"===i?this._hsla?"hsla":"rgba":e,c=this[s](),d=c[n.idx];return"undefined"===o?d:("function"===o&&(r=r.call(this,d),o=t.type(r)),null==r&&n.empty?this:("string"===o&&((a=l.exec(r))&&(r=d+parseFloat(a[2])*("+"===a[1]?1:-1))),c[n.idx]=r,this[s](c)))})}))})),g(s,(function(e,i){t.cssHooks[i]={set:function(e,n){var a,o,s="";if("string"!==t.type(n)||(a=r(n))){if(n=d(a||n),!p.rgba&&1!==n._rgba[3]){for(o="backgroundColor"===i?e.parentNode:e;(""===s||"transparent"===s)&&o&&o.style;)try{s=t.css(o,"backgroundColor"),o=o.parentNode}catch(l){}n=n.blend(s&&"transparent"!==s?s:"_default")}n=n.toRgbaString()}try{e.style[i]=n}catch(c){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=d(e.elem,i),e.end=d(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})),t.cssHooks.borderColor={expand:function(e){var t={};return g(["Top","Right","Bottom","Left"],(function(i,n){t["border"+n+"Color"]=e})),t}},o=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(){var t,i,n=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,r={};if(n&&n.length&&n[0]&&n[n[0]])for(i=n.length;i--;)"string"==typeof n[t=n[i]]&&(r[e.camelCase(t)]=n[t]);else for(t in n)"string"==typeof n[t]&&(r[t]=n[t]);return r}function n(t,i){var n,r,o={};for(n in i)r=i[n],t[n]!==r&&(a[n]||(e.fx.step[n]||!isNaN(parseFloat(r)))&&(o[n]=r));return o}var r=["add","remove","toggle"],a={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],(function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,i,e.end),e.setAttr=!0)}})),e.effects.animateClass=function(t,a,o,s){var l=e.speed(a,o,s);return this.queue((function(){var a,o=e(this),s=o.attr("class")||"",c=l.children?o.find("*").andSelf():o;c=c.map((function(){return{el:e(this),start:i.call(this)}})),(a=function(){e.each(r,(function(e,i){t[i]&&o[i+"Class"](t[i])}))})(),c=c.map((function(){return this.end=i.call(this.el[0]),this.diff=n(this.start,this.end),this})),o.attr("class",s),c=c.map((function(){var t=this,i=e.Deferred(),n=jQuery.extend({},l,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,n),i.promise()})),e.when.apply(e,c.get()).done((function(){a(),e.each(arguments,(function(){var t=this.el;e.each(this.diff,(function(e){t.css(e,"")}))})),l.complete.call(o[0])}))}))},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,i,n,r){return i?e.effects.animateClass.call(this,{add:t},i,n,r):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,i,n,r){return i?e.effects.animateClass.call(this,{remove:t},i,n,r):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(i,n,r,a,o){return"boolean"==typeof n||n===t?r?e.effects.animateClass.call(this,n?{add:i}:{remove:i},r,a,o):this._toggleClass(i,n):e.effects.animateClass.call(this,{toggle:i},n,r,a)},switchClass:function(t,i,n,r,a){return e.effects.animateClass.call(this,{add:i,remove:t},n,r,a)}})}(),function(){function r(t,i,n,r){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(r=i,n=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(r=n,n=i,i={}),e.isFunction(n)&&(r=n,n=null),i&&e.extend(t,i),n=n||i.duration,t.duration=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default,t.complete=r||i.complete,t}function a(t){return!(t&&"number"!=typeof t&&!e.fx.speeds[t])||"string"==typeof t&&!e.effects.effect[t]&&(!i||!e.effects[t])}e.extend(e.effects,{version:"1.9.2",save:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.data(n+t[i],e[0].style[t[i]])},restore:function(e,i){var r,a;for(a=0;a<i.length;a++)null!==i[a]&&((r=e.data(n+i[a]))===t&&(r=""),e.css(i[a],r))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r={width:t.width(),height:t.height()},a=document.activeElement;try{a.id}catch(o){a=document.body}return t.wrap(n),(t[0]===a||e.contains(t[0],a))&&e(a).focus(),n=t.parent(),"static"===t.css("position")?(n.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],(function(e,n){i[n]=t.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")})),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(r),n.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,n,r){return r=r||{},e.each(i,(function(e,i){var a=t.cssUnit(i);a[0]>0&&(r[i]=a[0]*n+a[1])})),r}}),e.fn.extend({effect:function(){function t(t){function i(){e.isFunction(a)&&a.call(r[0]),e.isFunction(t)&&t()}var r=e(this),a=n.complete,o=n.mode;(r.is(":hidden")?"hide"===o:"show"===o)?i():s.call(r[0],n,i)}var n=r.apply(this,arguments),a=n.mode,o=n.queue,s=e.effects.effect[n.effect],l=!s&&i&&e.effects[n.effect];return e.fx.off||!s&&!l?a?this[a](n.duration,n.complete):this.each((function(){n.complete&&n.complete.call(this)})):s?!1===o?this.each(t):this.queue(o||"fx",t):l.call(this,{options:n,duration:n.duration,callback:n.complete,mode:n.mode})},_show:e.fn.show,show:function(e){if(a(e))return this._show.apply(this,arguments);var t=r.apply(this,arguments);return t.mode="show",this.effect.call(this,t)},_hide:e.fn.hide,hide:function(e){if(a(e))return this._hide.apply(this,arguments);var t=r.apply(this,arguments);return t.mode="hide",this.effect.call(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(a(t)||"boolean"==typeof t||e.isFunction(t))return this.__toggle.apply(this,arguments);var i=r.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)},cssUnit:function(t){var i=this.css(t),n=[];return e.each(["em","px","%","pt"],(function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])})),n}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],(function(e,i){t[i]=function(t){return Math.pow(t,e+2)}})),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;e<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,(function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}}))}()}(jQuery),function(e,t){var i=/up|down|vertical/,n=/up|left|vertical|horizontal/;e.effects.effect.blind=function(t,r){var a,o,s,l=e(this),c=["position","top","bottom","left","right","height","width"],d=e.effects.setMode(l,t.mode||"hide"),h=t.direction||"up",u=i.test(h),p=u?"height":"width",f=u?"top":"left",g=n.test(h),m={},v="show"===d;l.parent().is(".ui-effects-wrapper")?e.effects.save(l.parent(),c):e.effects.save(l,c),l.show(),o=(a=e.effects.createWrapper(l).css({overflow:"hidden"}))[p](),s=parseFloat(a.css(f))||0,m[p]=v?o:0,g||(l.css(u?"bottom":"right",0).css(u?"top":"left","auto").css({position:"absolute"}),m[f]=v?s:o+s),v&&(a.css(p,0),g||a.css(f,s+o)),a.animate(m,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===d&&l.hide(),e.effects.restore(l,c),e.effects.removeWrapper(l),r()}})}}(jQuery),function(e,t){e.effects.effect.bounce=function(t,i){var n,r,a,o=e(this),s=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(o,t.mode||"effect"),c="hide"===l,d="show"===l,h=t.direction||"up",u=t.distance,p=t.times||5,f=2*p+(d||c?1:0),g=t.duration/f,m=t.easing,v="up"===h||"down"===h?"top":"left",_="up"===h||"left"===h,b=o.queue(),w=b.length;for((d||c)&&s.push("opacity"),e.effects.save(o,s),o.show(),e.effects.createWrapper(o),u||(u=o["top"===v?"outerHeight":"outerWidth"]()/3),d&&((a={opacity:1})[v]=0,o.css("opacity",0).css(v,_?2*-u:2*u).animate(a,g,m)),c&&(u/=Math.pow(2,p-1)),(a={})[v]=0,n=0;p>n;n++)(r={})[v]=(_?"-=":"+=")+u,o.animate(r,g,m).animate(a,g,m),u=c?2*u:u/2;c&&((r={opacity:0})[v]=(_?"-=":"+=")+u,o.animate(r,g,m)),o.queue((function(){c&&o.hide(),e.effects.restore(o,s),e.effects.removeWrapper(o),i()})),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,f+1))),o.dequeue()}}(jQuery),function(e,t){e.effects.effect.clip=function(t,i){var n,r,a,o=e(this),s=["position","top","bottom","left","right","height","width"],l="show"===e.effects.setMode(o,t.mode||"hide"),c="vertical"===(t.direction||"vertical"),d=c?"height":"width",h=c?"top":"left",u={};e.effects.save(o,s),o.show(),n=e.effects.createWrapper(o).css({overflow:"hidden"}),a=(r="IMG"===o[0].tagName?n:o)[d](),l&&(r.css(d,0),r.css(h,a/2)),u[d]=l?a:0,u[h]=l?0:a/2,r.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){l||o.hide(),e.effects.restore(o,s),e.effects.removeWrapper(o),i()}})}}(jQuery),function(e,t){e.effects.effect.drop=function(t,i){var n,r=e(this),a=["position","top","bottom","left","right","opacity","height","width"],o=e.effects.setMode(r,t.mode||"hide"),s="show"===o,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",d="up"===l||"left"===l?"pos":"neg",h={opacity:s?1:0};e.effects.save(r,a),r.show(),e.effects.createWrapper(r),n=t.distance||r["top"===c?"outerHeight":"outerWidth"](!0)/2,s&&r.css("opacity",0).css(c,"pos"===d?-n:n),h[c]=(s?"pos"===d?"+=":"-=":"pos"===d?"-=":"+=")+n,r.animate(h,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&r.hide(),e.effects.restore(r,a),e.effects.removeWrapper(r),i()}})}}(jQuery),function(e,t){e.effects.effect.explode=function(t,i){function n(){v.push(this),v.length===d*h&&(u.css({visibility:"visible"}),e(v).remove(),p||u.hide(),i())}var r,a,o,s,l,c,d=t.pieces?Math.round(Math.sqrt(t.pieces)):3,h=d,u=e(this),p="show"===e.effects.setMode(u,t.mode||"hide"),f=u.show().css("visibility","hidden").offset(),g=Math.ceil(u.outerWidth()/h),m=Math.ceil(u.outerHeight()/d),v=[];for(r=0;d>r;r++)for(s=f.top+r*m,c=r-(d-1)/2,a=0;h>a;a++)o=f.left+a*g,l=a-(h-1)/2,u.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-a*g,top:-r*m}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g,height:m,left:o+(p?l*g:0),top:s+(p?c*m:0),opacity:p?0:1}).animate({left:o+(p?0:l*g),top:s+(p?0:c*m),opacity:p?1:0},t.duration||500,t.easing,n)}}(jQuery),function(e,t){e.effects.effect.fade=function(t,i){var n=e(this),r=e.effects.setMode(n,t.mode||"toggle");n.animate({opacity:r},{queue:!1,duration:t.duration,easing:t.easing,complete:i})}}(jQuery),function(e,t){e.effects.effect.fold=function(t,i){var n,r,a=e(this),o=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(a,t.mode||"hide"),l="show"===s,c="hide"===s,d=t.size||15,h=/([0-9]+)%/.exec(d),u=!!t.horizFirst,p=l!==u,f=p?["width","height"]:["height","width"],g=t.duration/2,m={},v={};e.effects.save(a,o),a.show(),n=e.effects.createWrapper(a).css({overflow:"hidden"}),r=p?[n.width(),n.height()]:[n.height(),n.width()],h&&(d=parseInt(h[1],10)/100*r[c?0:1]),l&&n.css(u?{height:0,width:d}:{height:d,width:0}),m[f[0]]=l?r[0]:d,v[f[1]]=l?r[1]:0,n.animate(m,g,t.easing).animate(v,g,t.easing,(function(){c&&a.hide(),e.effects.restore(a,o),e.effects.removeWrapper(a),i()}))}}(jQuery),function(e,t){e.effects.effect.highlight=function(t,i){var n=e(this),r=["backgroundImage","backgroundColor","opacity"],a=e.effects.setMode(n,t.mode||"show"),o={backgroundColor:n.css("backgroundColor")};"hide"===a&&(o.opacity=0),e.effects.save(n,r),n.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&n.hide(),e.effects.restore(n,r),i()}})}}(jQuery),function(e,t){e.effects.effect.pulsate=function(t,i){var n,r=e(this),a=e.effects.setMode(r,t.mode||"show"),o="show"===a,s="hide"===a,l=o||"hide"===a,c=2*(t.times||5)+(l?1:0),d=t.duration/c,h=0,u=r.queue(),p=u.length;for((o||!r.is(":visible"))&&(r.css("opacity",0).show(),h=1),n=1;c>n;n++)r.animate({opacity:h},d,t.easing),h=1-h;r.animate({opacity:h},d,t.easing),r.queue((function(){s&&r.hide(),i()})),p>1&&u.splice.apply(u,[1,0].concat(u.splice(p,c+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect.puff=function(t,i){var n=e(this),r=e.effects.setMode(n,t.mode||"hide"),a="hide"===r,o=parseInt(t.percent,10)||150,s=o/100,l={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:r,complete:i,percent:a?o:100,from:a?l:{height:l.height*s,width:l.width*s,outerHeight:l.outerHeight*s,outerWidth:l.outerWidth*s}}),n.effect(t)},e.effects.effect.scale=function(t,i){var n=e(this),r=e.extend(!0,{},t),a=e.effects.setMode(n,t.mode||"effect"),o=parseInt(t.percent,10)||(0===parseInt(t.percent,10)||"hide"===a?0:100),s=t.direction||"both",l=t.origin,c={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()},d="horizontal"!==s?o/100:1,h="vertical"!==s?o/100:1;r.effect="size",r.queue=!1,r.complete=i,"effect"!==a&&(r.origin=l||["middle","center"],r.restore=!0),r.from=t.from||("show"===a?{height:0,width:0,outerHeight:0,outerWidth:0}:c),r.to={height:c.height*d,width:c.width*h,outerHeight:c.outerHeight*d,outerWidth:c.outerWidth*h},r.fade&&("show"===a&&(r.from.opacity=0,r.to.opacity=1),"hide"===a&&(r.from.opacity=1,r.to.opacity=0)),n.effect(r)},e.effects.effect.size=function(t,i){var n,r,a,o=e(this),s=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["width","height","overflow"],c=["fontSize"],d=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],u=e.effects.setMode(o,t.mode||"effect"),p=t.restore||"effect"!==u,f=t.scale||"both",g=t.origin||["middle","center"],m=o.css("position"),v=p?s:["position","top","bottom","left","right","overflow","opacity"],_={height:0,width:0,outerHeight:0,outerWidth:0};"show"===u&&o.show(),n={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},"toggle"===t.mode&&"show"===u?(o.from=t.to||_,o.to=t.from||n):(o.from=t.from||("show"===u?_:n),o.to=t.to||("hide"===u?_:n)),a={from:{y:o.from.height/n.height,x:o.from.width/n.width},to:{y:o.to.height/n.height,x:o.to.width/n.width}},("box"===f||"both"===f)&&(a.from.y!==a.to.y&&(v=v.concat(d),o.from=e.effects.setTransition(o,d,a.from.y,o.from),o.to=e.effects.setTransition(o,d,a.to.y,o.to)),a.from.x!==a.to.x&&(v=v.concat(h),o.from=e.effects.setTransition(o,h,a.from.x,o.from),o.to=e.effects.setTransition(o,h,a.to.x,o.to))),("content"===f||"both"===f)&&a.from.y!==a.to.y&&(v=v.concat(c).concat(l),o.from=e.effects.setTransition(o,c,a.from.y,o.from),o.to=e.effects.setTransition(o,c,a.to.y,o.to)),e.effects.save(o,v),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),g&&(r=e.effects.getBaseline(g,n),o.from.top=(n.outerHeight-o.outerHeight())*r.y,o.from.left=(n.outerWidth-o.outerWidth())*r.x,o.to.top=(n.outerHeight-o.to.outerHeight)*r.y,o.to.left=(n.outerWidth-o.to.outerWidth)*r.x),o.css(o.from),("content"===f||"both"===f)&&(d=d.concat(["marginTop","marginBottom"]).concat(c),h=h.concat(["marginLeft","marginRight"]),l=s.concat(d).concat(h),o.find("*[width]").each((function(){var i=e(this),n=i.height(),r=i.width(),o=i.outerHeight(),s=i.outerWidth();p&&e.effects.save(i,l),i.from={height:n*a.from.y,width:r*a.from.x,outerHeight:o*a.from.y,outerWidth:s*a.from.x},i.to={height:n*a.to.y,width:r*a.to.x,outerHeight:n*a.to.y,outerWidth:r*a.to.x},a.from.y!==a.to.y&&(i.from=e.effects.setTransition(i,d,a.from.y,i.from),i.to=e.effects.setTransition(i,d,a.to.y,i.to)),a.from.x!==a.to.x&&(i.from=e.effects.setTransition(i,h,a.from.x,i.from),i.to=e.effects.setTransition(i,h,a.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,(function(){p&&e.effects.restore(i,l)}))}))),o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===o.to.opacity&&o.css("opacity",o.from.opacity),"hide"===u&&o.hide(),e.effects.restore(o,v),p||("static"===m?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],(function(e,t){o.css(t,(function(t,i){var n=parseInt(i,10),r=e?o.to.left:o.to.top;return"auto"===i?r+"px":n+r+"px"}))}))),e.effects.removeWrapper(o),i()}})}}(jQuery),function(e,t){e.effects.effect.shake=function(t,i){var n,r=e(this),a=["position","top","bottom","left","right","height","width"],o=e.effects.setMode(r,t.mode||"effect"),s=t.direction||"left",l=t.distance||20,c=t.times||3,d=2*c+1,h=Math.round(t.duration/d),u="up"===s||"down"===s?"top":"left",p="up"===s||"left"===s,f={},g={},m={},v=r.queue(),_=v.length;for(e.effects.save(r,a),r.show(),e.effects.createWrapper(r),f[u]=(p?"-=":"+=")+l,g[u]=(p?"+=":"-=")+2*l,m[u]=(p?"-=":"+=")+2*l,r.animate(f,h,t.easing),n=1;c>n;n++)r.animate(g,h,t.easing).animate(m,h,t.easing);r.animate(g,h,t.easing).animate(f,h/2,t.easing).queue((function(){"hide"===o&&r.hide(),e.effects.restore(r,a),e.effects.removeWrapper(r),i()})),_>1&&v.splice.apply(v,[1,0].concat(v.splice(_,d+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect.slide=function(t,i){var n,r=e(this),a=["position","top","bottom","left","right","width","height"],o=e.effects.setMode(r,t.mode||"show"),s="show"===o,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",d="up"===l||"left"===l,h={};e.effects.save(r,a),r.show(),n=t.distance||r["top"===c?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(r).css({overflow:"hidden"}),s&&r.css(c,d?isNaN(n)?"-"+n:-n:n),h[c]=(s?d?"+=":"-=":d?"-=":"+=")+n,r.animate(h,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&r.hide(),e.effects.restore(r,a),e.effects.removeWrapper(r),i()}})}}(jQuery),function(e,t){e.effects.effect.transfer=function(t,i){var n=e(this),r=e(t.to),a="fixed"===r.css("position"),o=e("body"),s=a?o.scrollTop():0,l=a?o.scrollLeft():0,c=r.offset(),d={top:c.top-s,left:c.left-l,height:r.innerHeight(),width:r.innerWidth()},h=n.offset(),u=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.className).css({top:h.top-s,left:h.left-l,height:n.innerHeight(),width:n.innerWidth(),position:a?"fixed":"absolute"}).animate(d,t.duration,t.easing,(function(){u.remove(),i()}))}}(jQuery)},function(e,t){!function(e){"use strict";!function(e){var t={};t.fileapi=void 0!==e("<input type='file'/>").get(0).files,t.formdata=void 0!==window.FormData;var i=!!e.fn.prop;function n(t){var i=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(i))}function r(t){var i=t.target,n=e(i);if(!n.is("[type=submit],[type=image]")){var r=n.closest("[type=submit]");if(0===r.length)return;i=r[0]}var a=this;if(a.clk=i,"image"==i.type)if(void 0!==t.offsetX)a.clk_x=t.offsetX,a.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var o=n.offset();a.clk_x=t.pageX-o.left,a.clk_y=t.pageY-o.top}else a.clk_x=t.pageX-i.offsetLeft,a.clk_y=t.pageY-i.offsetTop;setTimeout((function(){a.clk=a.clk_x=a.clk_y=null}),100)}function a(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}e.fn.attr2=function(){if(!i)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"===typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(n){if(!this.length)return a("ajaxSubmit: skipping submit process - no element selected"),this;var r,o,s,l=this;"function"==typeof n?n={success:n}:void 0===n&&(n={}),r=n.type||this.attr2("method"),(s=(s="string"===typeof(o=n.url||this.attr2("action"))?e.trim(o):"")||window.location.href||"")&&(s=(s.match(/^([^#]+)/)||[])[1]),n=e.extend(!0,{url:s,success:e.ajaxSettings.success,type:r||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},n);var c={};if(this.trigger("form-pre-serialize",[this,n,c]),c.veto)return a("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(n.beforeSerialize&&!1===n.beforeSerialize(this,n))return a("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var d=n.traditional;void 0===d&&(d=e.ajaxSettings.traditional);var h,u=[],p=this.formToArray(n.semantic,u);if(n.data&&(n.extraData=n.data,h=e.param(n.data,d)),n.beforeSubmit&&!1===n.beforeSubmit(p,this,n))return a("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[p,this,n,c]),c.veto)return a("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var f=e.param(p,d);h&&(f=f?f+"&"+h:h),"GET"==n.type.toUpperCase()?(n.url+=(n.url.indexOf("?")>=0?"&":"?")+f,n.data=null):n.data=f;var g=[];if(n.resetForm&&g.push((function(){l.resetForm()})),n.clearForm&&g.push((function(){l.clearForm(n.includeHidden)})),!n.dataType&&n.target){var m=n.success||function(){};g.push((function(t){var i=n.replaceTarget?"replaceWith":"html";e(n.target)[i](t).each(m,arguments)}))}else n.success&&g.push(n.success);if(n.success=function(e,t,i){for(var r=n.context||this,a=0,o=g.length;a<o;a++)g[a].apply(r,[e,t,i||l,l])},n.error){var v=n.error;n.error=function(e,t,i){var r=n.context||this;v.apply(r,[e,t,i,l])}}if(n.complete){var _=n.complete;n.complete=function(e,t){var i=n.context||this;_.apply(i,[e,t,l])}}var b=e("input[type=file]:enabled",this).filter((function(){return""!==e(this).val()})).length>0,w="multipart/form-data",y=l.attr("enctype")==w||l.attr("encoding")==w,x=t.fileapi&&t.formdata;a("fileAPI :"+x);var C,S=(b||y)&&!x;!1!==n.iframe&&(n.iframe||S)?n.closeKeepAlive?e.get(n.closeKeepAlive,(function(){C=k(p)})):C=k(p):C=(b||y)&&x?function(t){for(var i=new FormData,a=0;a<t.length;a++)i.append(t[a].name,t[a].value);if(n.extraData){var o=function(t){var i,r,a=e.param(t,n.traditional).split("&"),o=a.length,s=[];for(i=0;i<o;i++)a[i]=a[i].replace(/\+/g," "),r=a[i].split("="),s.push([decodeURIComponent(r[0]),decodeURIComponent(r[1])]);return s}(n.extraData);for(a=0;a<o.length;a++)o[a]&&i.append(o[a][0],o[a][1])}n.data=null;var s=e.extend(!0,{},e.ajaxSettings,n,{contentType:!1,processData:!1,cache:!1,type:r||"POST"});n.uploadProgress&&(s.xhr=function(){var t=e.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",(function(e){var t=0,i=e.loaded||e.position,r=e.total;e.lengthComputable&&(t=Math.ceil(i/r*100)),n.uploadProgress(e,i,r,t)}),!1),t});s.data=null;var l=s.beforeSend;return s.beforeSend=function(e,t){n.formData?t.data=n.formData:t.data=i,l&&l.call(this,e,t)},e.ajax(s)}(p):e.ajax(n),l.removeData("jqxhr").data("jqxhr",C);for(var T=0;T<u.length;T++)u[T]=null;return this.trigger("form-submit-notify",[this,n]),this;function k(t){var o,s,c,d,h,p,f,g,m,v,_,b,w=l[0],y=e.Deferred();if(y.abort=function(e){g.abort(e)},t)for(s=0;s<u.length;s++)o=e(u[s]),i?o.prop("disabled",!1):o.removeAttr("disabled");if((c=e.extend(!0,{},e.ajaxSettings,n)).context=c.context||c,h="jqFormIO"+(new Date).getTime(),c.iframeTarget?(v=(p=e(c.iframeTarget)).attr2("name"))?h=v:p.attr2("name",h):(p=e('<iframe name="'+h+'" src="'+c.iframeSrc+'" />')).css({position:"absolute",top:"-1000px",left:"-1000px"}),f=p[0],g={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var i="timeout"===t?"timeout":"aborted";a("aborting upload... "+i),this.aborted=1;try{f.contentWindow.document.execCommand&&f.contentWindow.document.execCommand("Stop")}catch(n){}p.attr("src",c.iframeSrc),g.error=i,c.error&&c.error.call(c.context,g,i,t),d&&e.event.trigger("ajaxError",[g,c,i]),c.complete&&c.complete.call(c.context,g,i)}},(d=c.global)&&0===e.active++&&e.event.trigger("ajaxStart"),d&&e.event.trigger("ajaxSend",[g,c]),c.beforeSend&&!1===c.beforeSend.call(c.context,g,c))return c.global&&e.active--,y.reject(),y;if(g.aborted)return y.reject(),y;(m=w.clk)&&(v=m.name)&&!m.disabled&&(c.extraData=c.extraData||{},c.extraData[v]=m.value,"image"==m.type&&(c.extraData[v+".x"]=w.clk_x,c.extraData[v+".y"]=w.clk_y));function x(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(i){a("cannot get iframe.contentWindow document: "+i)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(i){a("cannot get iframe.contentDocument: "+i),t=e.document}return t}var C=e("meta[name=csrf-token]").attr("content"),S=e("meta[name=csrf-param]").attr("content");function T(){var t=l.attr2("target"),i=l.attr2("action"),n=l.attr("enctype")||l.attr("encoding")||"multipart/form-data";w.setAttribute("target",h),r&&!/post/i.test(r)||w.setAttribute("method","POST"),i!=c.url&&w.setAttribute("action",c.url),c.skipEncodingOverride||r&&!/post/i.test(r)||l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),c.timeout&&(b=setTimeout((function(){_=!0,E(1)}),c.timeout));var o=[];try{if(c.extraData)for(var s in c.extraData)c.extraData.hasOwnProperty(s)&&(e.isPlainObject(c.extraData[s])&&c.extraData[s].hasOwnProperty("name")&&c.extraData[s].hasOwnProperty("value")?o.push(e('<input type="hidden" name="'+c.extraData[s].name+'">').val(c.extraData[s].value).appendTo(w)[0]):o.push(e('<input type="hidden" name="'+s+'">').val(c.extraData[s]).appendTo(w)[0]));c.iframeTarget||p.appendTo("body"),f.attachEvent?f.attachEvent("onload",E):f.addEventListener("load",E,!1),setTimeout((function e(){try{var t=x(f).readyState;a("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(i){a("Server abort: ",i," (",i.name,")"),E(2),b&&clearTimeout(b),b=void 0}}),15);try{w.submit()}catch(d){document.createElement("form").submit.apply(w)}}finally{w.setAttribute("action",i),w.setAttribute("enctype",n),t?w.setAttribute("target",t):l.removeAttr("target"),e(o).remove()}}S&&C&&(c.extraData=c.extraData||{},c.extraData[S]=C),c.forceSync?T():setTimeout(T,10);var k,A,P,D=50;function E(t){if(!g.aborted&&!P){if((A=x(f))||(a("cannot access response document"),t=2),1===t&&g)return g.abort("timeout"),void y.reject(g,"timeout");if(2==t&&g)return g.abort("server abort"),void y.reject(g,"error","server abort");if(A&&A.location.href!=c.iframeSrc||_){f.detachEvent?f.detachEvent("onload",E):f.removeEventListener("load",E,!1);var i,n="success";try{if(_)throw"timeout";var r="xml"==c.dataType||A.XMLDocument||e.isXMLDoc(A);if(a("isXml="+r),!r&&window.opera&&(null===A.body||!A.body.innerHTML)&&--D)return a("requeing onLoad callback, DOM not available"),void setTimeout(E,250);var o=A.body?A.body:A.documentElement;g.responseText=o?o.innerHTML:null,g.responseXML=A.XMLDocument?A.XMLDocument:A,r&&(c.dataType="xml"),g.getResponseHeader=function(e){return{"content-type":c.dataType}[e.toLowerCase()]},o&&(g.status=Number(o.getAttribute("status"))||g.status,g.statusText=o.getAttribute("statusText")||g.statusText);var s=(c.dataType||"").toLowerCase(),l=/(json|script|text)/.test(s);if(l||c.textarea){var h=A.getElementsByTagName("textarea")[0];if(h)g.responseText=h.value,g.status=Number(h.getAttribute("status"))||g.status,g.statusText=h.getAttribute("statusText")||g.statusText;else if(l){var u=A.getElementsByTagName("pre")[0],m=A.getElementsByTagName("body")[0];u?g.responseText=u.textContent?u.textContent:u.innerText:m&&(g.responseText=m.textContent?m.textContent:m.innerText)}}else"xml"==s&&!g.responseXML&&g.responseText&&(g.responseXML=M(g.responseText));try{k=I(g,s,c)}catch(v){n="parsererror",g.error=i=v||n}}catch(v){a("error caught: ",v),n="error",g.error=i=v||n}g.aborted&&(a("upload aborted"),n=null),g.status&&(n=g.status>=200&&g.status<300||304===g.status?"success":"error"),"success"===n?(c.success&&c.success.call(c.context,k,"success",g),y.resolve(g.responseText,"success",g),d&&e.event.trigger("ajaxSuccess",[g,c])):n&&(void 0===i&&(i=g.statusText),c.error&&c.error.call(c.context,g,n,i),y.reject(g,"error",i),d&&e.event.trigger("ajaxError",[g,c,i])),d&&e.event.trigger("ajaxComplete",[g,c]),d&&!--e.active&&e.event.trigger("ajaxStop"),c.complete&&c.complete.call(c.context,g,n),P=!0,c.timeout&&clearTimeout(b),setTimeout((function(){c.iframeTarget?p.attr("src",c.iframeSrc):p.remove(),g.responseXML=null}),100)}}}var M=e.parseXML||function(e,t){return window.ActiveXObject?((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},O=e.parseJSON||function(e){return window.eval("("+e+")")},I=function(t,i,n){var r=t.getResponseHeader("content-type")||"",a="xml"===i||!i&&r.indexOf("xml")>=0,o=a?t.responseXML:t.responseText;return a&&"parsererror"===o.documentElement.nodeName&&e.error&&e.error("parsererror"),n&&n.dataFilter&&(o=n.dataFilter(o,i)),"string"===typeof o&&("json"===i||!i&&r.indexOf("json")>=0?o=O(o):("script"===i||!i&&r.indexOf("javascript")>=0)&&e.globalEval(o)),o};return y}},e.fn.ajaxForm=function(t){if((t=t||{}).delegation=t.delegation&&e.isFunction(e.fn.on),!t.delegation&&0===this.length){var i={s:this.selector,c:this.context};return!e.isReady&&i.s?(a("DOM not ready, queuing ajaxForm"),e((function(){e(i.s,i.c).ajaxForm(t)})),this):(a("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return t.delegation?(e(document).off("submit.form-plugin",this.selector,n).off("click.form-plugin",this.selector,r).on("submit.form-plugin",this.selector,t,n).on("click.form-plugin",this.selector,t,r),this):this.ajaxFormUnbind().bind("submit.form-plugin",t,n).bind("click.form-plugin",t,r)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(i,n){var r=[];if(0===this.length)return r;var a,o,s,l,c,d,h,u,p=this[0],f=this.attr("id"),g=i?p.getElementsByTagName("*"):p.elements;if(g&&!/MSIE [678]/.test(navigator.userAgent)&&(g=e(g).get()),f&&(a=e(':input[form="'+f+'"]').get()).length&&(g=(g||[]).concat(a)),!g||!g.length)return r;for(o=0,h=g.length;o<h;o++)if((l=(d=g[o]).name)&&!d.disabled)if(i&&p.clk&&"image"==d.type)p.clk==d&&(r.push({name:l,value:e(d).val(),type:d.type}),r.push({name:l+".x",value:p.clk_x},{name:l+".y",value:p.clk_y}));else if((c=e.fieldValue(d,!0))&&c.constructor==Array)for(n&&n.push(d),s=0,u=c.length;s<u;s++)r.push({name:l,value:c[s]});else if(t.fileapi&&"file"==d.type){n&&n.push(d);var m=d.files;if(m.length)for(s=0;s<m.length;s++)r.push({name:l,value:m[s],type:d.type});else r.push({name:l,value:"",type:d.type})}else null!==c&&"undefined"!=typeof c&&(n&&n.push(d),r.push({name:l,value:c,type:d.type,required:d.required}));if(!i&&p.clk){var v=e(p.clk),_=v[0];(l=_.name)&&!_.disabled&&"image"==_.type&&(r.push({name:l,value:v.val()}),r.push({name:l+".x",value:p.clk_x},{name:l+".y",value:p.clk_y}))}return r},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var i=[];return this.each((function(){var n=this.name;if(n){var r=e.fieldValue(this,t);if(r&&r.constructor==Array)for(var a=0,o=r.length;a<o;a++)i.push({name:n,value:r[a]});else null!==r&&"undefined"!=typeof r&&i.push({name:this.name,value:r})}})),e.param(i)},e.fn.fieldValue=function(t){for(var i=[],n=0,r=this.length;n<r;n++){var a=this[n],o=e.fieldValue(a,t);null===o||"undefined"==typeof o||o.constructor==Array&&!o.length||(o.constructor==Array?e.merge(i,o):i.push(o))}return i},e.fieldValue=function(t,i){var n=t.name,r=t.type,a=t.tagName.toLowerCase();if(void 0===i&&(i=!0),i&&(!n||t.disabled||"reset"==r||"button"==r||("checkbox"==r||"radio"==r)&&!t.checked||("submit"==r||"image"==r)&&t.form&&t.form.clk!=t||"select"==a&&-1==t.selectedIndex))return null;if("select"==a){var o=t.selectedIndex;if(o<0)return null;for(var s=[],l=t.options,c="select-one"==r,d=c?o+1:l.length,h=c?o:0;h<d;h++){var u=l[h];if(u.selected){var p=u.value;if(p||(p=u.attributes&&u.attributes.value&&!u.attributes.value.specified?u.text:u.value),c)return p;s.push(p)}}return s}return e(t).val()},e.fn.clearForm=function(t){return this.each((function(){e("input,select,textarea",this).clearFields(t)}))},e.fn.clearFields=e.fn.clearInputs=function(t){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each((function(){var n=this.type,r=this.tagName.toLowerCase();i.test(n)||"textarea"==r?this.value="":"checkbox"==n||"radio"==n?this.checked=!1:"select"==r?this.selectedIndex=-1:"file"==n?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(!0===t&&/hidden/.test(n)||"string"==typeof t&&e(this).is(t))&&(this.value="")}))},e.fn.resetForm=function(){return this.each((function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()}))},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each((function(){this.disabled=!e}))},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each((function(){var i=this.type;if("checkbox"==i||"radio"==i)this.checked=t;else if("option"==this.tagName.toLowerCase()){var n=e(this).parent("select");t&&n[0]&&"select-one"==n[0].type&&n.find("option").selected(!1),this.selected=t}}))},e.fn.ajaxSubmit.debug=!1}("undefined"!=typeof jQuery?jQuery:window.Zepto)}()},function(e,t){!function(e){var t={};t.fileapi=void 0!==e("<input type='file'/>").get(0).files,t.formdata=void 0!==window.FormData,e.fn.uploadFile=function(i){var n=e.extend({url:"",method:"POST",enctype:"multipart/form-data",returnType:null,allowDuplicates:!0,duplicateStrict:!1,allowedTypes:"*",acceptFiles:"*",fileName:"file",formData:!1,dynamicFormData:!1,maxFileSize:-1,maxFileCount:-1,multiple:!0,dragDrop:!0,autoSubmit:!0,showCancel:!0,showAbort:!0,showDone:!1,showDelete:!1,showError:!0,showStatusAfterSuccess:!0,showStatusAfterError:!0,showFileCounter:!0,fileCounterStyle:"). ",showFileSize:!0,showProgress:!1,nestedForms:!0,showDownload:!1,onLoad:function(e){},onSelect:function(e){return!0},onSubmit:function(e,t){},onSuccess:function(e,t,i,n){},onError:function(e,t,i,n){},onCancel:function(e,t){},onAbort:function(e,t){},downloadCallback:!1,deleteCallback:!1,afterUploadAll:!1,serialize:!0,sequential:!1,sequentialCount:2,customProgressBar:!1,abortButtonClass:"ajax-file-upload-abort",cancelButtonClass:"ajax-file-upload-cancel",dragDropContainerClass:"ajax-upload-dragdrop",dragDropHoverClass:"state-hover",errorClass:"ajax-file-upload-error",uploadButtonClass:"ajax-file-upload",dragDropStr:"<span><b>Drag &amp; Drop Files</b></span>",uploadStr:"Upload",abortStr:"Abort",cancelStr:"Cancel",deleteStr:"Delete",doneStr:"Done",multiDragErrorStr:"Multiple File Drag &amp; Drop is not allowed.",extErrorStr:"is not allowed. Allowed extensions: ",duplicateErrorStr:"is not allowed. File already exists.",sizeErrorStr:"is not allowed. Allowed Max size: ",uploadErrorStr:"Upload is not allowed",maxFileCountErrorStr:" is not allowed. Maximum allowed files are:",downloadStr:"Download",customErrorKeyStr:"jquery-upload-file-error",showQueueDiv:!1,statusBarWidth:400,dragdropWidth:400,showPreview:!1,previewHeight:"auto",previewWidth:"100%",extraHTML:!1,uploadQueueOrder:"top",headers:{}},i);this.fileCounter=1,this.selectedFiles=0;var r="ajax-file-upload-"+(new Date).getTime();this.formGroup=r,this.errorLog=e("<div></div>"),this.responses=[],this.existingFileNames=[],t.formdata||(n.dragDrop=!1),t.formdata&&1!==n.maxFileCount||(n.multiple=!1),e(this).html("");var a=this,o=e("<div>"+n.uploadStr+"</div>");e(o).addClass(n.uploadButtonClass),function i(){if(e.fn.ajaxForm){if(n.dragDrop){var s=e('<div class="'+n.dragDropContainerClass+'" style="vertical-align:top;"></div>').width(n.dragdropWidth);e(a).append(s),e(s).append(o),e(s).append(e(n.dragDropStr)),function(t,i,n){n.on("dragenter",(function(t){t.stopPropagation(),t.preventDefault(),e(this).addClass(i.dragDropHoverClass)})),n.on("dragover",(function(t){t.stopPropagation(),t.preventDefault();var n=e(this);n.hasClass(i.dragDropContainerClass)&&!n.hasClass(i.dragDropHoverClass)&&n.addClass(i.dragDropHoverClass)})),n.on("drop",(function(n){n.preventDefault(),e(this).removeClass(i.dragDropHoverClass),t.errorLog.html("");var r=n.originalEvent.dataTransfer.files;!i.multiple&&r.length>1?i.showError&&e("<div class='"+i.errorClass+"'>"+i.multiDragErrorStr+"</div>").appendTo(t.errorLog):0!=i.onSelect(r)&&p(i,t,r)})),n.on("dragleave",(function(t){e(this).removeClass(i.dragDropHoverClass)})),e(document).on("dragenter",(function(e){e.stopPropagation(),e.preventDefault()})),e(document).on("dragover",(function(t){t.stopPropagation(),t.preventDefault();var n=e(this);n.hasClass(i.dragDropContainerClass)||n.removeClass(i.dragDropHoverClass)})),e(document).on("drop",(function(t){t.stopPropagation(),t.preventDefault(),e(this).removeClass(i.dragDropHoverClass)}))}(a,n,s)}else e(a).append(o);e(a).append(a.errorLog),n.showQueueDiv?a.container=e("#"+n.showQueueDiv):a.container=e("<div class='ajax-file-upload-container'></div>").insertAfter(e(a)),n.onLoad.call(this,a),function i(n,r,a,o){var s="ajax-upload-id-"+(new Date).getTime(),l=e("<form method='"+a.method+"' action='"+a.url+"' enctype='"+a.enctype+"'></form>"),c="<input type='file' id='"+s+"' name='"+a.fileName+"' accept='"+a.acceptFiles+"'/>";a.multiple&&(a.fileName.indexOf("[]")!=a.fileName.length-2&&(a.fileName+="[]"),c="<input type='file' id='"+s+"' name='"+a.fileName+"' accept='"+a.acceptFiles+"' multiple/>");var d=e(c).appendTo(l);d.change((function(){n.errorLog.html("");a.allowedTypes.toLowerCase().split(",");var s=[];if(this.files){for(g=0;g<this.files.length;g++)s.push(this.files[g].name);if(0==a.onSelect(this.files))return}else{var c=e(this).val(),d=[];if(s.push(c),!f(n,a,c))return void(a.showError&&e("<div class='"+a.errorClass+"'><b>"+c+"</b> "+a.extErrorStr+a.allowedTypes+"</div>").appendTo(n.errorLog));if(d.push({name:c,size:"NA"}),0==a.onSelect(d))return}if(v(a,n),o.unbind("click"),l.hide(),i(n,r,a,o),l.addClass(r),a.serialize&&t.fileapi&&t.formdata){l.removeClass(r);var h=this.files;l.remove(),p(a,n,h)}else{for(var u="",g=0;g<s.length;g++)a.showFileCounter?u+=n.fileCounter+a.fileCounterStyle+s[g]+"<br>":u+=s[g]+"<br>",n.fileCounter++;if(-1!=a.maxFileCount&&n.selectedFiles+s.length>a.maxFileCount)return void(a.showError&&e("<div class='"+a.errorClass+"'><b>"+u+"</b> "+a.maxFileCountErrorStr+a.maxFileCount+"</div>").appendTo(n.errorLog));n.selectedFiles+=s.length;var m=new b(n,a);m.filename.html(u),w(l,a,m,s,n,null)}})),a.nestedForms?(l.css({margin:0,padding:0}),o.css({position:"relative",overflow:"hidden",cursor:"default"}),d.css({position:"absolute",cursor:"pointer",top:"0px",width:"100%",height:"100%",left:"0px","z-index":"100",opacity:"0.0",filter:"alpha(opacity=0)","-ms-filter":"alpha(opacity=0)","-khtml-opacity":"0.0","-moz-opacity":"0.0"}),l.appendTo(o)):(l.appendTo(e("body")),l.css({margin:0,padding:0,display:"block",position:"absolute",left:"-250px"}),-1!=navigator.appVersion.indexOf("MSIE ")?o.attr("for",s):o.click((function(){d.click()})))}(a,r,n,o)}else window.setTimeout(i,10)}(),this.startUpload=function(){e("form").each((function(t,i){e(this).hasClass(a.formGroup)&&s.push(e(this))})),s.length>=1&&d()},this.getFileCount=function(){return a.selectedFiles},this.stopUpload=function(){e("."+n.abortButtonClass).each((function(t,i){e(this).hasClass(a.formGroup)&&e(this).click()})),e("."+n.cancelButtonClass).each((function(t,i){e(this).hasClass(a.formGroup)&&e(this).click()}))},this.cancelAll=function(){e("."+n.cancelButtonClass).each((function(t,i){e(this).hasClass(a.formGroup)&&e(this).click()}))},this.update=function(t){n=e.extend(n,t),t.hasOwnProperty("url")&&e("form").each((function(i,n){e(this).attr("action",t.url)}))},this.enqueueFile=function(e){e instanceof File&&p(n,a,[e])},this.reset=function(e){a.fileCounter=1,a.selectedFiles=0,a.errorLog.html(""),0!=e&&a.container.html("")},this.remove=function(){a.container.html(""),e(a).remove()},this.createProgress=function(e,t,i){var r=new b(this,n);r.progressDiv.show(),r.progressbar.width("100%");var o="";return o=n.showFileCounter?a.fileCounter+n.fileCounterStyle+e:e,n.showFileSize&&(o+=" ("+h(i)+")"),r.filename.html(o),a.fileCounter++,a.selectedFiles++,n.showPreview&&(r.preview.attr("src",t),r.preview.show()),n.showDownload&&(r.download.show(),r.download.click((function(){n.downloadCallback&&n.downloadCallback.call(a,[e],r)}))),n.showDelete&&(r.del.show(),r.del.click((function(){r.statusbar.hide().remove();var t=[e];n.deleteCallback&&n.deleteCallback.call(this,t,r),a.selectedFiles-=1,v(n,a)}))),r},this.getResponses=function(){return this.responses};var s=[],l=[],c=!1;function d(){c||(c=!0,function e(){if(n.sequential||(n.sequentialCount=99999),0==s.length&&0==l.length)n.afterUploadAll&&n.afterUploadAll(a),c=!1;else{if(l.length<n.sequentialCount){var t=s.shift();void 0!=t&&(l.push(t),t.removeClass(a.formGroup),t.submit())}window.setTimeout(e,100)}}())}function h(e){var t="",i=e/1024;parseInt(i)>1024?t=(i/1024).toFixed(2)+" MB":t=i.toFixed(2)+" KB";return t}function u(t){var i,n,r=[],a=(r="string"==jQuery.type(t)?t.split("&"):e.param(t).split("&")).length,o=[];for(i=0;i<a;i++)r[i]=r[i].replace(/\+/g," "),n=r[i].split("="),o.push([decodeURIComponent(n[0]),decodeURIComponent(n[1])]);return o}function p(t,i,n){for(var r=0;r<n.length;r++)if(f(i,t,n[r].name))if(t.allowDuplicates||!g(i,n[r].name))if(-1!=t.maxFileSize&&n[r].size>t.maxFileSize)t.showError&&e("<div class='"+t.errorClass+"'><b>"+n[r].name+"</b> "+t.sizeErrorStr+h(t.maxFileSize)+"</div>").appendTo(i.errorLog);else if(-1!=t.maxFileCount&&i.selectedFiles>=t.maxFileCount)t.showError&&e("<div class='"+t.errorClass+"'><b>"+n[r].name+"</b> "+t.maxFileCountErrorStr+t.maxFileCount+"</div>").appendTo(i.errorLog);else{i.selectedFiles++,i.existingFileNames.push(n[r].name);var a=e.extend({},t),o=new FormData,s=t.fileName.replace("[]","");o.append(s,n[r]);var l=t.formData;if(l)for(var c=u(l),d=0;d<c.length;d++)c[d]&&o.append(c[d][0],c[d][1]);a.fileData=o;var p=new b(i,t),m="";m=t.showFileCounter?i.fileCounter+t.fileCounterStyle+n[r].name:n[r].name,t.showFileSize&&(m+=" ("+h(n[r].size)+")"),p.filename.html(m);var v=e("<form style='display:block; position:absolute;left: 150px;' class='"+i.formGroup+"' method='"+t.method+"' action='"+t.url+"' enctype='"+t.enctype+"'></form>");v.appendTo("body");var _=[];_.push(n[r].name),w(v,a,p,_,i,n[r]),i.fileCounter++}else t.showError&&e("<div class='"+t.errorClass+"'><b>"+n[r].name+"</b> "+t.duplicateErrorStr+"</div>").appendTo(i.errorLog);else t.showError&&e("<div class='"+t.errorClass+"'><b>"+n[r].name+"</b> "+t.extErrorStr+t.allowedTypes+"</div>").appendTo(i.errorLog)}function f(e,t,i){var n=t.allowedTypes.toLowerCase().split(/[\s,]+/g),r=i.split(".").pop().toLowerCase();return!("*"!=t.allowedTypes&&jQuery.inArray(r,n)<0)}function g(e,t){var i=!1;if(e.existingFileNames.length)for(var r=0;r<e.existingFileNames.length;r++)(e.existingFileNames[r]==t||n.duplicateStrict&&e.existingFileNames[r].toLowerCase()==t.toLowerCase())&&(i=!0);return i}function m(e,t){if(e.existingFileNames.length)for(var i=0;i<t.length;i++){var n=e.existingFileNames.indexOf(t[i]);-1!=n&&e.existingFileNames.splice(n,1)}}function v(t,i){if(t.showFileCounter){var n=e(i.container).find(".ajax-file-upload-filename").length;i.fileCounter=n+1,e(i.container).find(".ajax-file-upload-filename").each((function(i,r){var a=e(this).html().split(t.fileCounterStyle),o=(parseInt(a[0]),n+t.fileCounterStyle+a[1]);e(this).html(o),n--}))}}function _(t,i){return this.statusbar=e("<div class='ajax-file-upload-statusbar'></div>").width(i.statusBarWidth),this.preview=e("<img class='ajax-file-upload-preview' />").width(i.previewWidth).height(i.previewHeight).appendTo(this.statusbar).hide(),this.filename=e("<div class='ajax-file-upload-filename'></div>").appendTo(this.statusbar),this.progressDiv=e("<div class='ajax-file-upload-progress'>").appendTo(this.statusbar).hide(),this.progressbar=e("<div class='ajax-file-upload-bar'></div>").appendTo(this.progressDiv),this.abort=e("<div>"+i.abortStr+"</div>").appendTo(this.statusbar).hide(),this.cancel=e("<div>"+i.cancelStr+"</div>").appendTo(this.statusbar).hide(),this.done=e("<div>"+i.doneStr+"</div>").appendTo(this.statusbar).hide(),this.download=e("<div>"+i.downloadStr+"</div>").appendTo(this.statusbar).hide(),this.del=e("<div>"+i.deleteStr+"</div>").appendTo(this.statusbar).hide(),this.abort.addClass("ajax-file-upload-red"),this.done.addClass("ajax-file-upload-green"),this.download.addClass("ajax-file-upload-green"),this.cancel.addClass("ajax-file-upload-red"),this.del.addClass("ajax-file-upload-red"),this}function b(t,i){var n=null;return(n=i.customProgressBar?new i.customProgressBar(t,i):new _(t,i)).abort.addClass(t.formGroup),n.abort.addClass(i.abortButtonClass),n.cancel.addClass(t.formGroup),n.cancel.addClass(i.cancelButtonClass),i.extraHTML&&(n.extraHTML=e("<div class='extrahtml'>"+i.extraHTML()+"</div>").insertAfter(n.filename)),"bottom"==i.uploadQueueOrder?e(t.container).append(n.statusbar):e(t.container).prepend(n.statusbar),n}function w(i,n,r,a,o,c){var h={cache:!1,contentType:!1,processData:!1,forceSync:!1,type:n.method,data:n.formData,formData:n.fileData,dataType:n.returnType,headers:n.headers,beforeSubmit:function(t,l,c){if(0!=n.onSubmit.call(this,a)){if(n.dynamicFormData){var d=u(n.dynamicFormData());if(d)for(var h=0;h<d.length;h++)d[h]&&(n.serialize&&void 0!=n.fileData?c.formData.append(d[h][0],d[h][1]):c.data[d[h][0]]=d[h][1])}return n.extraHTML&&e(r.extraHTML).find("input,select,textarea").each((function(t,i){n.serialize&&void 0!=n.fileData?c.formData.append(e(this).attr("name"),e(this).val()):c.data[e(this).attr("name")]=e(this).val()})),!0}return r.statusbar.append("<div class='"+n.errorClass+"'>"+n.uploadErrorStr+"</div>"),r.cancel.show(),i.remove(),r.cancel.click((function(){s.splice(s.indexOf(i),1),m(o,a),r.statusbar.remove(),n.onCancel.call(o,a,r),o.selectedFiles-=a.length,v(n,o)})),!1},beforeSend:function(e,i){for(var s in i.headers)e.setRequestHeader(s,i.headers[s]);r.progressDiv.show(),r.cancel.hide(),r.done.hide(),n.showAbort&&(r.abort.show(),r.abort.click((function(){m(o,a),e.abort(),o.selectedFiles-=a.length,n.onAbort.call(o,a,r)}))),t.formdata?r.progressbar.width("1%"):r.progressbar.width("5%")},uploadProgress:function(e,t,i,a){a>98&&(a=98);var o=a+"%";a>1&&r.progressbar.width(o),n.showProgress&&(r.progressbar.html(o),r.progressbar.css("text-align","center"))},success:function(t,s,c){if(r.cancel.remove(),l.pop(),"json"==n.returnType&&"object"==e.type(t)&&t.hasOwnProperty(n.customErrorKeyStr)){r.abort.hide();var d=t[n.customErrorKeyStr];return n.onError.call(this,a,200,d,r),n.showStatusAfterError?(r.progressDiv.hide(),r.statusbar.append("<span class='"+n.errorClass+"'>ERROR: "+d+"</span>")):(r.statusbar.hide(),r.statusbar.remove()),o.selectedFiles-=a.length,void i.remove()}o.responses.push(t),r.progressbar.width("100%"),n.showProgress&&(r.progressbar.html("100%"),r.progressbar.css("text-align","center")),r.abort.hide(),n.onSuccess.call(this,a,t,c,r),n.showStatusAfterSuccess?(n.showDone?(r.done.show(),r.done.click((function(){r.statusbar.hide("slow"),r.statusbar.remove()}))):r.done.hide(),n.showDelete?(r.del.show(),r.del.click((function(){m(o,a),r.statusbar.hide().remove(),n.deleteCallback&&n.deleteCallback.call(this,t,r),o.selectedFiles-=a.length,v(n,o)}))):r.del.hide()):(r.statusbar.hide("slow"),r.statusbar.remove()),n.showDownload&&(r.download.show(),r.download.click((function(){n.downloadCallback&&n.downloadCallback(t,r)}))),i.remove()},error:function(e,t,s){r.cancel.remove(),l.pop(),r.abort.hide(),"abort"==e.statusText?(r.statusbar.hide("slow").remove(),v(n,o)):(n.onError.call(this,a,t,s,r),n.showStatusAfterError?(r.progressDiv.hide(),r.statusbar.append("<span class='"+n.errorClass+"'>ERROR: "+s+"</span>")):(r.statusbar.hide(),r.statusbar.remove()),o.selectedFiles-=a.length),i.remove()}};n.showPreview&&null!=c&&"image"==c.type.toLowerCase().split("/").shift()&&function(e,t){if(e){t.show();var i=new FileReader;i.onload=function(e){t.attr("src",e.target.result)},i.readAsDataURL(e)}}(c,r.preview),n.autoSubmit?(i.ajaxForm(h),s.push(i),d()):(n.showCancel&&(r.cancel.show(),r.cancel.click((function(){s.splice(s.indexOf(i),1),m(o,a),i.remove(),r.statusbar.remove(),n.onCancel.call(o,a,r),o.selectedFiles-=a.length,v(n,o)}))),i.ajaxForm(h))}return this}}(jQuery)},function(e,t){!function(e){"use strict";e((function(){e.support.transition=function(){var e=function(){var e,t=document.createElement("bootstrap"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in i)if(void 0!==t.style[e])return i[e]}();return e&&{end:e}}()}))}(window.jQuery),function(e){"use strict";var t='[data-dismiss="alert"]',i=function(i){e(i).on("click",t,this.close)};i.prototype.close=function(t){var i,n=e(this),r=n.attr("data-target");function a(){i.trigger("closed").remove()}r||(r=(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]*$)/,"")),i=e(r),t&&t.preventDefault(),i.length||(i=n.hasClass("alert")?n:n.parent()),i.trigger(t=e.Event("close")),t.isDefaultPrevented()||(i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.on(e.support.transition.end,a):a())};var n=e.fn.alert;e.fn.alert=function(t){return this.each((function(){var n=e(this),r=n.data("alert");r||n.data("alert",r=new i(this)),"string"==typeof t&&r[t].call(n)}))},e.fn.alert.Constructor=i,e.fn.alert.noConflict=function(){return e.fn.alert=n,this},e(document).on("click.alert.data-api",t,i.prototype.close)}(window.jQuery),function(e){"use strict";var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,i)};t.prototype.setState=function(e){var t="disabled",i=this.$element,n=i.data(),r=i.is("input")?"val":"html";e+="Text",n.resetText||i.data("resetText",i[r]()),i[r](n[e]||this.options[e]),setTimeout((function(){"loadingText"==e?i.addClass(t).attr(t,t):i.removeClass(t).removeAttr(t)}),0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")};var i=e.fn.button;e.fn.button=function(i){return this.each((function(){var n=e(this),r=n.data("button"),a="object"==typeof i&&i;r||n.data("button",r=new t(this,a)),"toggle"==i?r.toggle():i&&r.setState(i)}))},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=i,this},e(document).on("click.button.data-api","[data-toggle^=button]",(function(t){var i=e(t.target);i.hasClass("btn")||(i=i.closest(".btn")),i.button("toggle")}))}(window.jQuery),function(e){"use strict";var t=function(t,i){this.$element=e(t),this.options=i,"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.prototype={cycle:function(t){return t||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},to:function(t){var i=this.$element.find(".item.active"),n=i.parent().children(),r=n.index(i),a=this;if(!(t>n.length-1||t<0))return this.sliding?this.$element.one("slid",(function(){a.to(t)})):r==t?this.pause().cycle():this.slide(t>r?"next":"prev",e(n[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){if(!this.sliding)return this.slide("next")},prev:function(){if(!this.sliding)return this.slide("prev")},slide:function(t,i){var n,r=this.$element.find(".item.active"),a=i||r[t](),o=this.interval,s="next"==t?"left":"right",l="next"==t?"first":"last",c=this;if(this.sliding=!0,o&&this.pause(),a=a.length?a:this.$element.find(".item")[l](),n=e.Event("slide",{relatedTarget:a[0]}),!a.hasClass("active")){if(e.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(n),n.isDefaultPrevented())return;a.addClass(t),a[0].offsetWidth,r.addClass(s),a.addClass(s),this.$element.one(e.support.transition.end,(function(){a.removeClass([t,s].join(" ")).addClass("active"),r.removeClass(["active",s].join(" ")),c.sliding=!1,setTimeout((function(){c.$element.trigger("slid")}),0)}))}else{if(this.$element.trigger(n),n.isDefaultPrevented())return;r.removeClass("active"),a.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return o&&this.cycle(),this}}};var i=e.fn.carousel;e.fn.carousel=function(i){return this.each((function(){var n=e(this),r=n.data("carousel"),a=e.extend({},e.fn.carousel.defaults,"object"==typeof i&&i),o="string"==typeof i?i:a.slide;r||n.data("carousel",r=new t(this,a)),"number"==typeof i?r.to(i):o?r[o]():a.interval&&r.cycle()}))},e.fn.carousel.defaults={interval:5e3,pause:"hover"},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=i,this},e(document).on("click.carousel.data-api","[data-slide]",(function(t){var i,n=e(this),r=e(n.attr("data-target")||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")),a=e.extend({},r.data(),n.data());r.carousel(a),t.preventDefault()}))}(window.jQuery),function(e){"use strict";var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,i),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){return this.$element.hasClass("width")?"width":"height"},show:function(){var t,i,n,r;if(!this.transitioning){if(t=this.dimension(),i=e.camelCase(["scroll",t].join("-")),(n=this.$parent&&this.$parent.find("> .accordion-group > .in"))&&n.length){if((r=n.data("collapse"))&&r.transitioning)return;n.collapse("hide"),r||n.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][i])}},hide:function(){var t;this.transitioning||(t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0))},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[null!==e?"addClass":"removeClass"]("collapse"),this},transition:function(t,i,n){var r=this,a=function(){"show"==i.type&&r.reset(),r.transitioning=0,r.$element.trigger(n)};this.$element.trigger(i),i.isDefaultPrevented()||(this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,a):a())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var i=e.fn.collapse;e.fn.collapse=function(i){return this.each((function(){var n=e(this),r=n.data("collapse"),a="object"==typeof i&&i;r||n.data("collapse",r=new t(this,a)),"string"==typeof i&&r[i]()}))},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.collapse.data-api","[data-toggle=collapse]",(function(t){var i,n=e(this),r=n.attr("data-target")||t.preventDefault()||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),a=e(r).data("collapse")?"toggle":n.data();n[e(r).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(r).collapse(a)}))}(window.jQuery),function(e){"use strict";var t="[data-toggle=dropdown]",i=function(t){var i=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",(function(){i.parent().removeClass("open")}))};function n(){e(t).each((function(){r(e(this)).removeClass("open")}))}function r(t){var i,n=t.attr("data-target");return n||(n=(n=t.attr("href"))&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),(i=e(n)).length||(i=t.parent()),i}i.prototype={constructor:i,toggle:function(t){var i,a,o=e(this);if(!o.is(".disabled, :disabled"))return a=(i=r(o)).hasClass("open"),n(),a||i.toggleClass("open"),o.focus(),!1},keydown:function(t){var i,n,a,o,s;if(/(38|40|27)/.test(t.keyCode)&&(i=e(this),t.preventDefault(),t.stopPropagation(),!i.is(".disabled, :disabled"))){if(!(o=(a=r(i)).hasClass("open"))||o&&27==t.keyCode)return i.click();(n=e("[role=menu] li:not(.divider):visible a",a)).length&&(s=n.index(n.filter(":focus")),38==t.keyCode&&s>0&&s--,40==t.keyCode&&s<n.length-1&&s++,~s||(s=0),n.eq(s).focus())}}};var a=e.fn.dropdown;e.fn.dropdown=function(t){return this.each((function(){var n=e(this),r=n.data("dropdown");r||n.data("dropdown",r=new i(this)),"string"==typeof t&&r[t].call(n)}))},e.fn.dropdown.Constructor=i,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=a,this},e(document).on("click.dropdown.data-api touchstart.dropdown.data-api",n).on("click.dropdown touchstart.dropdown.data-api",".dropdown form",(function(e){e.stopPropagation()})).on("touchstart.dropdown.data-api",".dropdown-menu",(function(e){e.stopPropagation()})).on("click.dropdown.data-api touchstart.dropdown.data-api",t,i.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",t+", [role=menu]",i.prototype.keydown)}(window.jQuery),function(e){"use strict";var t=function(t,i){this.options=i,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,i=e.Event("show");this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop((function(){var i=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),i&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),i?t.$element.one(e.support.transition.end,(function(){t.$element.focus().trigger("shown")})):t.$element.focus().trigger("shown")})))},hide:function(t){t&&t.preventDefault();t=e.Event("hide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;e(document).on("focusin.modal",(function(e){t.$element[0]===e.target||t.$element.has(e.target).length||t.$element.focus()}))},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",(function(t){27==t.which&&e.hide()})):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,i=setTimeout((function(){t.$element.off(e.support.transition.end),t.hideModal()}),500);this.$element.one(e.support.transition.end,(function(){clearTimeout(i),t.hideModal()}))},hideModal:function(e){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=e.support.transition&&i;this.$backdrop=e('<div class="modal-backdrop '+i+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),n?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,e.proxy(this.removeBackdrop,this)):this.removeBackdrop()):t&&t()}};var i=e.fn.modal;e.fn.modal=function(i){return this.each((function(){var n=e(this),r=n.data("modal"),a=e.extend({},e.fn.modal.defaults,n.data(),"object"==typeof i&&i);r||n.data("modal",r=new t(this,a)),"string"==typeof i?r[i]():a.show&&r.show()}))},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=i,this},e(document).on("click.modal.data-api",'[data-toggle="modal"]',(function(t){var i=e(this),n=i.attr("href"),r=e(i.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),a=r.data("modal")?"toggle":e.extend({remote:!/#/.test(n)&&n},r.data(),i.data());t.preventDefault(),r.modal(a).one("hide",(function(){i.focus()}))}))}(window.jQuery),function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,i,n){var r,a;this.type=t,this.$element=e(i),this.options=this.getOptions(n),this.enabled=!0,"click"==this.options.trigger?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):"manual"!=this.options.trigger&&(r="hover"==this.options.trigger?"mouseenter":"focus",a="hover"==this.options.trigger?"mouseleave":"blur",this.$element.on(r+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.leave,this))),this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return(t=e.extend({},e.fn[this.type].defaults,t,this.$element.data())).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var i=e(t.currentTarget)[this.type](this._options).data(this.type);if(!i.options.delay||!i.options.delay.show)return i.show();clearTimeout(this.timeout),i.hoverState="in",this.timeout=setTimeout((function(){"in"==i.hoverState&&i.show()}),i.options.delay.show)},leave:function(t){var i=e(t.currentTarget)[this.type](this._options).data(this.type);if(this.timeout&&clearTimeout(this.timeout),!i.options.delay||!i.options.delay.hide)return i.hide();i.hoverState="out",this.timeout=setTimeout((function(){"out"==i.hoverState&&i.hide()}),i.options.delay.hide)},show:function(){var e,t,i,n,r,a,o;if(this.hasContent()&&this.enabled){switch(e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),a="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,t=/in/.test(a),e.detach().css({top:0,left:0,display:"block"}).insertAfter(this.$element),i=this.getPosition(t),n=e[0].offsetWidth,r=e[0].offsetHeight,t?a.split(" ")[1]:a){case"bottom":o={top:i.top+i.height,left:i.left+i.width/2-n/2};break;case"top":o={top:i.top-r,left:i.left+i.width/2-n/2};break;case"left":o={top:i.top+i.height/2-r/2,left:i.left-n};break;case"right":o={top:i.top+i.height/2-r/2,left:i.left+i.width}}e.offset(o).addClass(a).addClass("in")}},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){var t=this.tip();return t.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?function(){var i=setTimeout((function(){t.off(e.support.transition.end).detach()}),500);t.one(e.support.transition.end,(function(){clearTimeout(i),t.detach()}))}():t.detach(),this},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(t){return e.extend({},t?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},tip:function(){return this.$tip=this.$tip||e(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var i=e(t.currentTarget)[this.type](this._options).data(this.type);i[i.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var i=e.fn.tooltip;e.fn.tooltip=function(i){return this.each((function(){var n=e(this),r=n.data("tooltip"),a="object"==typeof i&&i;r||n.data("tooltip",r=new t(this,a)),"string"==typeof i&&r[i]()}))},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this}}(window.jQuery),function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"html":"text"](i),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var i=e.fn.popover;e.fn.popover=function(i){return this.each((function(){var n=e(this),r=n.data("popover"),a="object"==typeof i&&i;r||n.data("popover",r=new t(this,a)),"string"==typeof i&&r[i]()}))},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"></div></div></div>'}),e.fn.popover.noConflict=function(){return e.fn.popover=i,this}}(window.jQuery),function(e){"use strict";function t(t,i){var n,r=e.proxy(this.process,this),a=e(t).is("body")?e(window):e(t);this.options=e.extend({},e.fn.scrollspy.defaults,i),this.$scrollElement=a.on("scroll.scroll-spy.data-api",r),this.selector=(this.options.target||(n=e(t).attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=e("body"),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){var t=this;this.offsets=e([]),this.targets=e([]),this.$body.find(this.selector).map((function(){var i=e(this),n=i.data("target")||i.attr("href"),r=/^#\w/.test(n)&&e(n);return r&&r.length&&[[r.position().top+t.$scrollElement.scrollTop(),n]]||null})).sort((function(e,t){return e[0]-t[0]})).each((function(){t.offsets.push(this[0]),t.targets.push(this[1])}))},process:function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,i=(this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight)-this.$scrollElement.height(),n=this.offsets,r=this.targets,a=this.activeTarget;if(t>=i)return a!=(e=r.last()[0])&&this.activate(e);for(e=n.length;e--;)a!=r[e]&&t>=n[e]&&(!n[e+1]||t<=n[e+1])&&this.activate(r[e])},activate:function(t){var i,n;this.activeTarget=t,e(this.selector).parent(".active").removeClass("active"),n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',(i=e(n).parent("li").addClass("active")).parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate")}};var i=e.fn.scrollspy;e.fn.scrollspy=function(i){return this.each((function(){var n=e(this),r=n.data("scrollspy"),a="object"==typeof i&&i;r||n.data("scrollspy",r=new t(this,a)),"string"==typeof i&&r[i]()}))},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.defaults={offset:10},e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=i,this},e(window).on("load",(function(){e('[data-spy="scroll"]').each((function(){var t=e(this);t.scrollspy(t.data())}))}))}(window.jQuery),function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t,i,n,r=this.element,a=r.closest("ul:not(.dropdown-menu)"),o=r.attr("data-target");o||(o=(o=r.attr("href"))&&o.replace(/.*(?=#[^\s]*$)/,"")),r.parent("li").hasClass("active")||(t=a.find(".active:last a")[0],n=e.Event("show",{relatedTarget:t}),r.trigger(n),n.isDefaultPrevented()||(i=e(o),this.activate(r.parent("li"),a),this.activate(i,i.parent(),(function(){r.trigger({type:"shown",relatedTarget:t})}))))},activate:function(t,i,n){var r=i.find("> .active"),a=n&&e.support.transition&&r.hasClass("fade");function o(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),a?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),n&&n()}a?r.one(e.support.transition.end,o):o(),r.removeClass("in")}};var i=e.fn.tab;e.fn.tab=function(i){return this.each((function(){var n=e(this),r=n.data("tab");r||n.data("tab",r=new t(this)),"string"==typeof i&&r[i]()}))},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=i,this},e(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',(function(t){t.preventDefault(),e(this).tab("show")}))}(window.jQuery),function(e){"use strict";var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,i),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=e(this.options.menu),this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){var i;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(i=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source)?this.process(i):this},process:function(t){var i=this;return t=e.grep(t,(function(e){return i.matcher(e)})),(t=this.sorter(t)).length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){for(var t,i=[],n=[],r=[];t=e.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?n.push(t):r.push(t):i.push(t);return i.concat(n,r)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),(function(e,t){return"<strong>"+t+"</strong>"}))},render:function(t){var i=this;return(t=e(t).map((function(t,n){return(t=e(i.options.item).attr("data-value",n)).find("a").html(i.highlighter(n)),t[0]}))).first().addClass("active"),this.$menu.html(t),this},next:function(t){var i=this.$menu.find(".active").removeClass("active").next();i.length||(i=e(this.$menu.find("li")[0])),i.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active").prev();t.length||(t=this.$menu.find("li").last()),t.addClass("active")},listen:function(){this.$element.on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this))},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"===typeof this.$element[e]),t},move:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},blur:function(e){var t=this;setTimeout((function(){t.hide()}),150)},click:function(e){e.stopPropagation(),e.preventDefault(),this.select()},mouseenter:function(t){this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")}};var i=e.fn.typeahead;e.fn.typeahead=function(i){return this.each((function(){var n=e(this),r=n.data("typeahead"),a="object"==typeof i&&i;r||n.data("typeahead",r=new t(this,a)),"string"==typeof i&&r[i]()}))},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=i,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',(function(t){var i=e(this);i.data("typeahead")||(t.preventDefault(),i.typeahead(i.data()))}))}(window.jQuery),function(e){"use strict";var t=function(t,i){this.options=e.extend({},e.fn.affix.defaults,i),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)).on("click.affix.data-api",e.proxy((function(){setTimeout(e.proxy(this.checkPosition,this),1)}),this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t,i=e(document).height(),n=this.$window.scrollTop(),r=this.$element.offset(),a=this.options.offset,o=a.bottom,s=a.top;"object"!=typeof a&&(o=s=a),"function"==typeof s&&(s=a.top()),"function"==typeof o&&(o=a.bottom()),t=!(null!=this.unpin&&n+this.unpin<=r.top)&&(null!=o&&r.top+this.$element.height()>=i-o?"bottom":null!=s&&n<=s&&"top"),this.affixed!==t&&(this.affixed=t,this.unpin="bottom"==t?r.top-n:null,this.$element.removeClass("affix affix-top affix-bottom").addClass("affix"+(t?"-"+t:"")))}};var i=e.fn.affix;e.fn.affix=function(i){return this.each((function(){var n=e(this),r=n.data("affix"),a="object"==typeof i&&i;r||n.data("affix",r=new t(this,a)),"string"==typeof i&&r[i]()}))},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e.fn.affix.noConflict=function(){return e.fn.affix=i,this},e(window).on("load",(function(){e('[data-spy="affix"]').each((function(){var t=e(this),i=t.data();i.offset=i.offset||{},i.offsetBottom&&(i.offset.bottom=i.offsetBottom),i.offsetTop&&(i.offset.top=i.offsetTop),t.affix(i)}))}))}(window.jQuery)},,,,,function(e,t){!function(){"use strict";window.Router=Backbone.Router.extend({toUpdate:[],dbServers:[],isCluster:void 0,foxxApiEnabled:void 0,lastRoute:void 0,routes:{"":"cluster",dashboard:"dashboard",replication:"replication","replication/applier/:endpoint/:database":"applier",collections:"collections",new:"newCollection",login:"login","collection/:colid/documents/:pageid":"documents","cIndices/:colname":"cIndices","cSettings/:colname":"cSettings","cSchema/:colname":"cSchema","cInfo/:colname":"cInfo","collection/:colid/:docid":"document",shell:"shell",queries:"query",databases:"databases",settings:"databases",services:"applications","services/install":"installService","services/install/new":"installNewService","services/install/github":"installGitHubService","services/install/upload":"installUploadService","services/install/remote":"installUrlService","service/:mount":"applicationDetail","store/:name":"storeDetail",graphs:"graphManagement","graphs/:name":"showGraph",users:"userManagement","user/:name":"userView","user/:name/permission":"userPermission",userProfile:"userProfile",cluster:"cluster",nodes:"nodes",shards:"shards","node/:name":"node","nodeInfo/:id":"nodeInfo",logs:"logger",helpus:"helpUs",views:"views","view/:name":"view","graph/:name":"graph","graph/:name/settings":"graphSettings",support:"support"},execute:function(e,t){if("#queries"===this.lastRoute&&(this.queryView.removeInputEditors(),this.queryView.cleanupGraphs(),this.queryView.removeResults()),this.lastRoute){var i=this.lastRoute.split("/")[0],n=this.lastRoute.split("/")[1],r=this.lastRoute.split("/")[2];"#service"!==i&&(window.App.replaceApp?"install"!==n&&r&&(window.App.replaceApp=!1):window.App.replaceApp=!1),"#collection"===this.lastRoute.substr(0,11)&&3===this.lastRoute.split("/").length&&this.documentView.cleanupEditor(),"#dasboard"!==this.lastRoute&&"#node"!==window.location.hash.substr(0,5)||d3.selectAll("svg > *").remove(),"#logger"===this.lastRoute&&(this.loggerView.logLevelView&&this.loggerView.logLevelView.remove(),this.loggerView.logTopicView&&this.loggerView.logTopicView.remove()),ReactDOM.unmountComponentAtNode(document.getElementById("content"))}this.lastRoute=window.location.hash,$("#subNavigationBar .breadcrumb").html(""),$("#subNavigationBar .bottom").html(""),$("#loadingScreen").hide(),$("#content").show(),e&&e.apply(this,t),"#services"===this.lastRoute&&(window.App.replaceApp=!1),this.graphViewer&&this.graphViewer.graphSettingsView&&this.graphViewer.graphSettingsView.hide(),this.queryView&&this.queryView.graphViewer&&this.queryView.graphViewer.graphSettingsView&&this.queryView.graphViewer.graphSettingsView.hide()},listenerFunctions:{},listener:function(e){_.each(window.App.listenerFunctions,(function(t,i){t(e)}))},checkUser:function(){var e=this;if("#login"!==window.location.hash){var t=function(){this.initOnce(),$(".bodyWrapper").show(),$(".navbar").show()}.bind(this),i=function(i,n){frontendConfig.authenticationEnabled?(e.currentUser=n,i||null===n?"#login"!==window.location.hash&&this.navigate("login",{trigger:!0}):t()):t()}.bind(this);frontendConfig.authenticationEnabled?this.userCollection.whoAmI(i):(this.initOnce(),$(".bodyWrapper").show(),$(".navbar").show())}},waitForInit:function(e,t,i){this.initFinished?(t||e(!0),t&&!i&&e(t,!0),t&&i&&e(t,i,!0)):setTimeout((function(){t||e(!1),t&&!i&&e(t,!1),t&&i&&e(t,i,!1)}),350)},initFinished:!1,initialize:function(){!0===frontendConfig.isCluster&&(this.isCluster=!0),"boolean"===typeof frontendConfig.foxxApiEnabled&&(this.foxxApiEnabled=frontendConfig.foxxApiEnabled),document.addEventListener("keyup",this.listener,!1),window.modalView=new window.ModalView,this.foxxList=new window.FoxxCollection,this.foxxRepo=new window.FoxxRepository,frontendConfig.foxxStoreEnabled&&this.foxxRepo.fetch({success:function(){e.serviceInstallView&&(e.serviceInstallView.collection=e.foxxRepo)}}),window.progressView=new window.ProgressView;var e=this;this.userCollection=new window.ArangoUsers,this.initOnce=function(){this.initOnce=function(){};var t=function(t,i){e=this,!0===i&&e.coordinatorCollection.fetch({success:function(){e.fetchDBS()}}),t&&console.log(t)}.bind(this);window.isCoordinator(t),!1===frontendConfig.isCluster&&(this.initFinished=!0),this.arangoDatabase=new window.ArangoDatabase,this.currentDB=new window.CurrentDatabase,this.arangoCollectionsStore=new window.ArangoCollections,this.arangoDocumentStore=new window.ArangoDocument,this.arangoViewsStore=new window.ArangoViews,this.coordinatorCollection=new window.ClusterCoordinators,window.spotlightView=new window.SpotlightView({collection:this.arangoCollectionsStore}),arangoHelper.setDocumentStore(this.arangoDocumentStore),this.arangoCollectionsStore.fetch({cache:!1}),this.footerView=new window.FooterView({collection:e.coordinatorCollection}),this.notificationList=new window.NotificationCollection,this.currentDB.fetch({cache:!1,success:function(){e.naviView=new window.NavigationView({database:e.arangoDatabase,currentDB:e.currentDB,notificationCollection:e.notificationList,userCollection:e.userCollection,isCluster:e.isCluster,foxxApiEnabled:e.foxxApiEnabled}),e.naviView.render()}}),this.queryCollection=new window.ArangoQueries,this.footerView.render(),window.checkVersion(),this.userConfig=new window.UserConfig({ldapEnabled:frontendConfig.ldapEnabled}),this.userConfig.fetch(),this.documentsView=new window.DocumentsView({collection:new window.ArangoDocuments,documentStore:this.arangoDocumentStore,collectionsStore:this.arangoCollectionsStore}),arangoHelper.initSigma()}.bind(this),$(window).resize((function(){e.handleResize()})),$(window).scroll((function(){}))},handleScroll:function(){$(window).scrollTop()>50?($(".navbar > .secondary").css("top",$(window).scrollTop()),$(".navbar > .secondary").css("position","absolute"),$(".navbar > .secondary").css("z-index","10"),$(".navbar > .secondary").css("width",$(window).width())):($(".navbar > .secondary").css("top","0"),$(".navbar > .secondary").css("position","relative"),$(".navbar > .secondary").css("width",""))},cluster:function(e){this.checkUser(),e?this.isCluster?(this.clusterView||(this.clusterView=new window.ClusterView({coordinators:this.coordinatorCollection,dbServers:this.dbServers})),this.clusterView.render()):"_system"===this.currentDB.get("name")?(this.routes[""]="dashboard",this.navigate("#dashboard",{trigger:!0})):(this.routes[""]="collections",this.navigate("#collections",{trigger:!0})):this.waitForInit(this.cluster.bind(this))},node:function(e,t){if(this.checkUser(),t&&void 0!==this.isCluster){if(!1===this.isCluster)return this.routes[""]="dashboard",void this.navigate("#dashboard",{trigger:!0});this.nodeView&&this.nodeView.remove(),this.nodeView=new window.NodeView({coordid:e,coordinators:this.coordinatorCollection,dbServers:this.dbServers}),this.nodeView.render()}else this.waitForInit(this.node.bind(this),e)},shards:function(e){if(this.checkUser(),e&&void 0!==this.isCluster){if(!1===this.isCluster)return this.routes[""]="dashboard",void this.navigate("#dashboard",{trigger:!0});this.shardsView&&this.shardsView.remove(),this.shardsView=new window.ShardsView({dbServers:this.dbServers}),this.shardsView.render()}else this.waitForInit(this.shards.bind(this))},nodes:function(e){if(this.checkUser(),e&&void 0!==this.isCluster){if(!1===this.isCluster)return this.routes[""]="dashboard",void this.navigate("#dashboard",{trigger:!0});this.nodesView&&this.nodesView.remove(),this.nodesView=new window.NodesView({}),this.nodesView.render()}else this.waitForInit(this.nodes.bind(this))},cNodes:function(e){if(this.checkUser(),e&&void 0!==this.isCluster){if(!1===this.isCluster)return this.routes[""]="dashboard",void this.navigate("#dashboard",{trigger:!0});this.nodesView=new window.NodesView({coordinators:this.coordinatorCollection,dbServers:this.dbServers[0],toRender:"coordinator"}),this.nodesView.render()}else this.waitForInit(this.cNodes.bind(this))},dNodes:function(e){if(this.checkUser(),e&&void 0!==this.isCluster)return!1===this.isCluster?(this.routes[""]="dashboard",void this.navigate("#dashboard",{trigger:!0})):void(0!==this.dbServers.length?(this.nodesView=new window.NodesView({coordinators:this.coordinatorCollection,dbServers:this.dbServers[0],toRender:"dbserver"}),this.nodesView.render()):this.navigate("#cNodes",{trigger:!0}));this.waitForInit(this.dNodes.bind(this))},sNodes:function(e){if(this.checkUser(),e&&void 0!==this.isCluster){if(!1===this.isCluster)return this.routes[""]="dashboard",void this.navigate("#dashboard",{trigger:!0});this.scaleView=new window.ScaleView({coordinators:this.coordinatorCollection,dbServers:this.dbServers[0]}),this.scaleView.render()}else this.waitForInit(this.sNodes.bind(this))},addAuth:function(e){var t=this.clusterPlan.get("user");if(!t)return e.abort(),void(this.isCheckingUser||this.requestAuth());var i=t.name,n=t.passwd,r=i.concat(":",n);e.setRequestHeader("Authorization","Basic "+btoa(r))},logger:function(e){if(this.checkUser(),e){this.loggerView&&this.loggerView.remove();var t=new window.ArangoLogs({upto:!0,loglevel:4});this.loggerView=new window.LoggerView({collection:t}),this.loggerView.render()}else this.waitForInit(this.logger.bind(this))},applicationDetail:function(e,t){if(this.checkUser(),t)if(this.foxxApiEnabled){var i=function(){this.hasOwnProperty("applicationDetailView")&&this.applicationDetailView.remove(),this.applicationDetailView=new window.ApplicationDetailView({model:this.foxxList.get(decodeURIComponent(e))}),this.applicationDetailView.model=this.foxxList.get(decodeURIComponent(e)),this.applicationDetailView.render("swagger")}.bind(this);0===this.foxxList.length?this.foxxList.fetch({cache:!1,success:function(){i()}}):i()}else this.navigate("#dashboard",{trigger:!0});else this.waitForInit(this.applicationDetail.bind(this),e)},storeDetail:function(e,t){if(this.checkUser(),t)if(this.foxxApiEnabled){var i=function(){this.hasOwnProperty("storeDetailView")&&this.storeDetailView.remove(),this.storeDetailView=new window.StoreDetailView({model:this.foxxRepo.get(decodeURIComponent(e)),collection:this.foxxList}),this.storeDetailView.model=this.foxxRepo.get(decodeURIComponent(e)),this.storeDetailView.render()}.bind(this);0===this.foxxRepo.length?this.foxxRepo.fetch({cache:!1,success:function(){i()}}):i()}else this.navigate("#dashboard",{trigger:!0});else this.waitForInit(this.storeDetail.bind(this),e)},login:function(){var e=function(e,t){this.loginView||(this.loginView=new window.LoginView({collection:this.userCollection})),e||null===t||void 0===t?this.loginView.render():this.loginView.render(!0)}.bind(this);this.userCollection.whoAmI(e)},collections:function(e){if(this.checkUser(),e){var t=this;this.collectionsView&&this.collectionsView.remove(),this.collectionsView=new window.CollectionsView({collection:this.arangoCollectionsStore}),this.arangoCollectionsStore.fetch({cache:!1,success:function(){t.collectionsView.render()}})}else this.waitForInit(this.collections.bind(this))},cIndices:function(e,t){var i=this;this.checkUser(),t?this.arangoCollectionsStore.fetch({cache:!1,success:function(){i.indicesView&&i.indicesView.remove(),i.indicesView=new window.IndicesView({collectionName:e,collection:i.arangoCollectionsStore.findWhere({name:e})}),i.indicesView.render()}}):this.waitForInit(this.cIndices.bind(this),e)},cSettings:function(e,t){var i=this;this.checkUser(),t?this.arangoCollectionsStore.fetch({cache:!1,success:function(){i.settingsView=new window.SettingsView({collectionName:e,collection:i.arangoCollectionsStore.findWhere({name:e})}),i.settingsView.render()}}):this.waitForInit(this.cSettings.bind(this),e)},cSchema:function(e,t){var i=this;this.checkUser(),t?this.arangoCollectionsStore.fetch({cache:!1,success:function(){i.settingsView=new window.ValidationView({collectionName:e,collection:i.arangoCollectionsStore.findWhere({name:e})}),i.settingsView.render()}}):this.waitForInit(this.cSchema.bind(this),e)},cInfo:function(e,t){var i=this;this.checkUser(),t?this.arangoCollectionsStore.fetch({cache:!1,success:function(){i.infoView=new window.InfoView({collectionName:e,collection:i.arangoCollectionsStore.findWhere({name:e})}),i.infoView.render()}}):this.waitForInit(this.cInfo.bind(this),e)},documents:function(e,t,i){this.checkUser(),i?(this.documentsView&&this.documentsView.unbindEvents(),this.documentsView||(this.documentsView=new window.DocumentsView({collection:new window.ArangoDocuments,documentStore:this.arangoDocumentStore,collectionsStore:this.arangoCollectionsStore})),this.documentsView.setCollectionId(e,t),this.documentsView.render(),this.documentsView.delegateEvents()):this.waitForInit(this.documents.bind(this),e,t)},document:function(e,t,i){if(this.checkUser(),i){var n;this.documentView&&(this.documentView.defaultMode&&(n=this.documentView.defaultMode),this.documentView.remove()),this.documentView=new window.DocumentView({collection:this.arangoDocumentStore}),this.documentView.colid=e,this.documentView.defaultMode=n;var r=window.location.hash.split("/")[2],a=(r.split("%").length-1)%3;decodeURI(r)!==r&&0!==a&&(r=decodeURIComponent(r)),this.documentView.docid=r,this.documentView.render();var o=function(t,i){t?this.documentView.renderNotFound(e,!0):this.documentView.setType()}.bind(this);arangoHelper.collectionApiType(e,null,o)}else this.waitForInit(this.document.bind(this),e,t)},query:function(e){this.checkUser(),e?(this.queryView||(this.queryView=new window.QueryView({collection:this.queryCollection})),this.queryView.render()):this.waitForInit(this.query.bind(this))},graph:function(e,t){this.checkUser(),t?(this.graphViewer&&(this.graphViewer.graphSettingsView&&this.graphViewer.graphSettingsView.remove(),this.graphViewer.killCurrentGraph(),this.graphViewer.unbind(),this.graphViewer.remove()),this.graphViewer=new window.GraphViewer({name:e,documentStore:this.arangoDocumentStore,collection:new window.GraphCollection,userConfig:this.userConfig}),this.graphViewer.render()):this.waitForInit(this.graph.bind(this),e)},graphSettings:function(e,t){this.checkUser(),t?(this.graphSettingsView&&this.graphSettingsView.remove(),this.graphSettingsView=new window.GraphSettingsView({name:e,userConfig:this.userConfig}),this.graphSettingsView.render()):this.waitForInit(this.graphSettings.bind(this),e)},helpUs:function(e){this.checkUser(),e?(this.testView||(this.helpUsView=new window.HelpUsView({})),this.helpUsView.render()):this.waitForInit(this.helpUs.bind(this))},support:function(e){this.checkUser(),e?(this.testView||(this.supportView=new window.SupportView({})),this.supportView.render()):this.waitForInit(this.support.bind(this))},queryManagement:function(e){this.checkUser(),e?(this.queryManagementView&&this.queryManagementView.remove(),this.queryManagementView=new window.QueryManagementView({collection:void 0}),this.queryManagementView.render()):this.waitForInit(this.queryManagement.bind(this))},databases:function(e){if(this.checkUser(),e){var t=function(e){e?(arangoHelper.arangoError("DB","Could not get list of allowed databases"),this.navigate("#",{trigger:!0}),$("#databaseNavi").css("display","none"),$("#databaseNaviSelect").css("display","none")):(this.databaseView&&this.databaseView.remove(),this.databaseView=new window.DatabaseView({users:this.userCollection,collection:this.arangoDatabase}),this.databaseView.render())}.bind(this);arangoHelper.databaseAllowed(t)}else this.waitForInit(this.databases.bind(this))},dashboard:function(e){this.checkUser(),e?(void 0===this.dashboardView&&(this.dashboardView=new window.DashboardView({dygraphConfig:window.dygraphConfig,database:this.arangoDatabase})),this.dashboardView.render()):this.waitForInit(this.dashboard.bind(this))},replication:function(e){this.checkUser(),e?(this.replicationView||(this.replicationView=new window.ReplicationView({})),this.replicationView.render()):this.waitForInit(this.replication.bind(this))},applier:function(e,t,i){this.checkUser(),i?(void 0===this.applierView&&(this.applierView=new window.ApplierView({})),this.applierView.endpoint=atob(e),this.applierView.database=atob(t),this.applierView.render()):this.waitForInit(this.applier.bind(this),e,t)},graphManagement:function(e){this.checkUser(),e?(this.graphManagementView&&this.graphManagementView.undelegateEvents(),this.graphManagementView=new window.GraphManagementView({collection:new window.GraphCollection,collectionCollection:this.arangoCollectionsStore}),this.graphManagementView.render()):this.waitForInit(this.graphManagement.bind(this))},showGraph:function(e,t){this.checkUser(),t?this.graphManagementView?this.graphManagementView.loadGraphViewer(e):(this.graphManagementView=new window.GraphManagementView({collection:new window.GraphCollection,collectionCollection:this.arangoCollectionsStore}),this.graphManagementView.render(e,!0)):this.waitForInit(this.showGraph.bind(this),e)},applications:function(e){this.checkUser(),e?this.foxxApiEnabled?(void 0===this.applicationsView&&(this.applicationsView=new window.ApplicationsView({collection:this.foxxList})),this.applicationsView.reload()):this.navigate("#dashboard",{trigger:!0}):this.waitForInit(this.applications.bind(this))},installService:function(e){this.checkUser(),e?this.foxxApiEnabled?frontendConfig.foxxStoreEnabled?(window.modalView.clearValidators(),this.serviceInstallView&&this.serviceInstallView.remove(),this.serviceInstallView=new window.ServiceInstallView({collection:this.foxxRepo,functionsCollection:this.foxxList}),this.serviceInstallView.render()):this.navigate("#services/install/upload",{trigger:!0}):this.navigate("#dashboard",{trigger:!0}):this.waitForInit(this.installService.bind(this))},installNewService:function(e){this.checkUser(),e?this.foxxApiEnabled?(window.modalView.clearValidators(),this.serviceNewView&&this.serviceNewView.remove(),this.serviceNewView=new window.ServiceInstallNewView({collection:this.foxxList}),this.serviceNewView.render()):this.navigate("#dashboard",{trigger:!0}):this.waitForInit(this.installNewService.bind(this))},installGitHubService:function(e){this.checkUser(),e?this.foxxApiEnabled?(window.modalView.clearValidators(),this.serviceGitHubView&&this.serviceGitHubView.remove(),this.serviceGitHubView=new window.ServiceInstallGitHubView({collection:this.foxxList}),this.serviceGitHubView.render()):this.navigate("#dashboard",{trigger:!0}):this.waitForInit(this.installGitHubService.bind(this))},installUrlService:function(e){this.checkUser(),e?this.foxxApiEnabled?(window.modalView.clearValidators(),this.serviceUrlView&&this.serviceUrlView.remove(),this.serviceUrlView=new window.ServiceInstallUrlView({collection:this.foxxList}),this.serviceUrlView.render()):this.navigate("#dashboard",{trigger:!0}):this.waitForInit(this.installUrlService.bind(this))},installUploadService:function(e){this.checkUser(),e?this.foxxApiEnabled?(window.modalView.clearValidators(),this.serviceUploadView&&this.serviceUploadView.remove(),this.serviceUploadView=new window.ServiceInstallUploadView({collection:this.foxxList}),this.serviceUploadView.render()):this.navigate("#dashboard",{trigger:!0}):this.waitForInit(this.installUploadService.bind(this))},handleSelectDatabase:function(e){this.checkUser(),e?this.naviView.handleSelectDatabase():this.waitForInit(this.handleSelectDatabase.bind(this))},handleResize:function(){this.dashboardView&&this.dashboardView.resize(),this.graphManagementView&&"graphs"===Backbone.history.getFragment()&&this.graphManagementView.handleResize($("#content").width()),this.queryView&&"queries"===Backbone.history.getFragment()&&this.queryView.resize(),this.naviView&&this.naviView.resize(),this.graphViewer&&Backbone.history.getFragment().indexOf("graph")>-1&&this.graphViewer.resize(),this.documentsView&&Backbone.history.getFragment().indexOf("documents")>-1&&this.documentsView.resize(),this.documentView&&Backbone.history.getFragment().indexOf("collection")>-1&&this.documentView.resize(),this.validationView&&Backbone.history.getFragment().indexOf("cSchema")>-1&&this.validationView.resize()},userPermission:function(e,t){this.checkUser(),t||null===t?(this.userPermissionView&&this.userPermissionView.remove(),this.userPermissionView=new window.UserPermissionView({collection:this.userCollection,databases:this.arangoDatabase,username:e}),this.userPermissionView.render()):!1===t&&this.waitForInit(this.userPermissionView.bind(this),e)},userView:function(e,t){this.checkUser(),t||null===t?(this.userView=new window.UserView({collection:this.userCollection,username:e}),this.userView.render()):!1===t&&this.waitForInit(this.userView.bind(this),e)},userManagement:function(e){this.checkUser(),e?(this.userManagementView&&this.userManagementView.remove(),this.userManagementView=new window.UserManagementView({collection:this.userCollection}),this.userManagementView.render()):this.waitForInit(this.userManagement.bind(this))},userProfile:function(e){this.checkUser(),e?(this.userManagementView||(this.userManagementView=new window.UserManagementView({collection:this.userCollection})),this.userManagementView.render(!0)):this.waitForInit(this.userProfile.bind(this))},view:function(e,t){var i=this;this.checkUser(),t?(this.viewView&&this.viewView.remove(),this.arangoViewsStore.fetch({success:function(){i.viewView=new window.ViewView({model:i.arangoViewsStore.get(e),name:e}),i.viewView.render()}})):this.waitForInit(this.view.bind(this),e)},views:function(e){this.checkUser(),e?(this.viewsView&&this.viewsView.remove(),this.viewsView=new window.ViewsView({collection:this.arangoViewsStore}),this.viewsView.render()):this.waitForInit(this.views.bind(this))},fetchDBS:function(e){var t=this,i=!1;this.coordinatorCollection.each((function(e){t.dbServers.push(new window.ClusterServers([],{host:e.get("address")}))})),this.initFinished=!0,_.each(this.dbServers,(function(t){t.fetch({success:function(){!1===i&&e&&(e(),i=!0)}})}))},getNewRoute:function(e){return"http://"+e},registerForUpdate:function(e){this.toUpdate.push(e),e.updateUrl()}})}()},function(e,t){!function(){"use strict";window.checkVersion=function(){$.ajax({type:"GET",cache:!1,url:arangoHelper.databaseUrl("/_admin/status?overview=true"),contentType:"application/json",processData:!1,async:!0,success:function(e){var t=window.versionHelper.fromString(e.version);$(".navbar #currentVersion").html(e.version+'<i class="fa fa-check-circle"></i>'),window.parseVersions=function(e){_.isEmpty(e)?$("#currentVersion").addClass("up-to-date"):($("#currentVersion").addClass("out-of-date"),$("#currentVersion .fa").removeClass("fa-check-circle").addClass("fa-exclamation-circle"),$("#currentVersion").click((function(){!function(e,t){var i=[];i.push(window.modalView.createSuccessButton("Download Page",(function(){window.open("https://www.arangodb.com/download","_blank"),window.modalView.hide()})));var n=[],r=window.modalView.createReadOnlyEntry.bind(window.modalView);n.push(r("current","Current",e.toString())),t.major&&n.push(r("major","Major",t.major.version)),t.minor&&n.push(r("minor","Minor",t.minor.version)),t.bugfix&&n.push(r("bugfix","Bugfix",t.bugfix.version)),window.modalView.show("modalTable.ejs","New Version Available",i,n)}(t,e)})))},$.ajax({type:"GET",async:!0,crossDomain:!0,timeout:3e3,dataType:"jsonp",url:"https://www.arangodb.com/versions.php?jsonp=parseVersions&version="+encodeURIComponent(e.version)+"&platform="+encodeURIComponent(e.platform)+"&engine="+encodeURIComponent(e.engine)+"&license="+encodeURIComponent(e.license)+"&source=ui&hash="+encodeURIComponent(e.hash),error:function(e){200===e.status?window.activeInternetConnection=!0:window.activeInternetConnection=!1},success:function(e){window.activeInternetConnection=!0}})}})}}()},function(e,t){!function(){"use strict";window.hasOwnProperty("TEST_BUILD")||($(document).ajaxSend((function(e,t,i){t.setRequestHeader("X-Arango-Frontend","true");var n=window.arangoHelper.getCurrentJwt();n&&t.setRequestHeader("Authorization","bearer "+n)})),$.ajaxSetup({error:function(e,t,i){401===e.status&&arangoHelper.checkJwt()}}),$(document).ready((function(){window.App=new window.Router,Backbone.history.start(),window.App.handleResize()})),$(document).click((function(e){e.stopPropagation(),$(e.target).hasClass("subBarDropdown")||$(e.target).hasClass("dropdown-header")||$(e.target).hasClass("dropdown-footer")||$(e.target).hasClass("toggle")||$("#userInfo").is(":visible")&&$(".subBarDropdown").hide()})),$("body").on("keyup",(function(e){27===e.keyCode&&window.modalView&&window.modalView.hide()})))}()},function(e,t,i){var n={"./_paginationView":88,"./_paginationView.js":88,"./applicationDetailView":89,"./applicationDetailView.js":89,"./applicationsView":90,"./applicationsView.js":90,"./applierView":91,"./applierView.js":91,"./clusterView":92,"./clusterView.js":92,"./collectionsItemView":93,"./collectionsItemView.js":93,"./collectionsView":94,"./collectionsView.js":94,"./dashboardView":95,"./dashboardView.js":95,"./databaseView":96,"./databaseView.js":96,"./dbSelectionView":97,"./dbSelectionView.js":97,"./documentView":98,"./documentView.js":98,"./documentsView":99,"./documentsView.js":99,"./filterSelect":100,"./filterSelect.js":100,"./footerView":101,"./footerView.js":101,"./foxxActiveListView":102,"./foxxActiveListView.js":102,"./foxxActiveView":103,"./foxxActiveView.js":103,"./foxxRepoView":104,"./foxxRepoView.js":104,"./graphManagementView":105,"./graphManagementView.js":105,"./graphSettingsView":106,"./graphSettingsView.js":106,"./graphViewer":107,"./graphViewer.js":107,"./helpUsView":108,"./helpUsView.js":108,"./indicesView":109,"./indicesView.js":109,"./infoView":110,"./infoView.js":110,"./installGitHubServiceView":111,"./installGitHubServiceView.js":111,"./installNewServiceView":112,"./installNewServiceView.js":112,"./installServiceView":113,"./installServiceView.js":113,"./installUploadServiceView":114,"./installUploadServiceView.js":114,"./installUrlServiceView":115,"./installUrlServiceView.js":115,"./loggerView":116,"./loggerView.js":116,"./loginView":117,"./loginView.js":117,"./modalView":118,"./modalView.js":118,"./navigationView":119,"./navigationView.js":119,"./nodeView":120,"./nodeView.js":120,"./nodesView":121,"./nodesView.js":121,"./notificationView":122,"./notificationView.js":122,"./progressView":123,"./progressView.js":123,"./queryManagementView":124,"./queryManagementView.js":124,"./queryView":125,"./queryView.js":125,"./replicationView":126,"./replicationView.js":126,"./scaleView":127,"./scaleView.js":127,"./settingsView":128,"./settingsView.js":128,"./shardsView":129,"./shardsView.js":129,"./showClusterView":130,"./showClusterView.js":130,"./spotlightView":131,"./spotlightView.js":131,"./statisticBarView":132,"./statisticBarView.js":132,"./storeDetailView":133,"./storeDetailView.js":133,"./supportView":134,"./supportView.js":134,"./tableView":135,"./tableView.js":135,"./userBarView":136,"./userBarView.js":136,"./userManagementView":137,"./userManagementView.js":137,"./userPermissions":138,"./userPermissions.js":138,"./userView":139,"./userView.js":139,"./validationView":140,"./validationView.js":140,"./viewView":141,"./viewView.js":141,"./viewsView":142,"./viewsView.js":142};function r(e){var t=a(e);return i(t)}function a(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=a,e.exports=r,r.id=461},function(e,t,i){var n={"./arangoCollectionModel":143,"./arangoCollectionModel.js":143,"./arangoDatabase":144,"./arangoDatabase.js":144,"./arangoDocument":145,"./arangoDocument.js":145,"./arangoQuery":146,"./arangoQuery.js":146,"./arangoReplication":147,"./arangoReplication.js":147,"./arangoSession":148,"./arangoSession.js":148,"./arangoStatistics":149,"./arangoStatistics.js":149,"./arangoStatisticsDescription":150,"./arangoStatisticsDescription.js":150,"./arangoUsers":151,"./arangoUsers.js":151,"./arangoViewModel":152,"./arangoViewModel.js":152,"./clusterCoordinator":153,"./clusterCoordinator.js":153,"./clusterServer":154,"./clusterServer.js":154,"./coordinator":155,"./coordinator.js":155,"./currentDatabase":156,"./currentDatabase.js":156,"./foxx":157,"./foxx.js":157,"./foxxRepoModel":158,"./foxxRepoModel.js":158,"./graph":159,"./graph.js":159,"./newArangoLog":160,"./newArangoLog.js":160,"./notification":161,"./notification.js":161,"./queryManagement":162,"./queryManagement.js":162,"./userConfig":163,"./userConfig.js":163};function r(e){var t=a(e);return i(t)}function a(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=a,e.exports=r,r.id=462},function(e,t,i){var n={"./_automaticRetryCollection":164,"./_automaticRetryCollection.js":164,"./_paginatedCollection":165,"./_paginatedCollection.js":165,"./arangoClusterStatisticsCollection":166,"./arangoClusterStatisticsCollection.js":166,"./arangoCollections":167,"./arangoCollections.js":167,"./arangoDatabase":168,"./arangoDatabase.js":168,"./arangoDocument":169,"./arangoDocument.js":169,"./arangoDocuments":170,"./arangoDocuments.js":170,"./arangoLogs":171,"./arangoLogs.js":171,"./arangoQueries":172,"./arangoQueries.js":172,"./arangoReplication":173,"./arangoReplication.js":173,"./arangoStatisticsCollection":174,"./arangoStatisticsCollection.js":174,"./arangoStatisticsDescriptionCollection":175,"./arangoStatisticsDescriptionCollection.js":175,"./arangoUsers":176,"./arangoUsers.js":176,"./arangoViews":177,"./arangoViews.js":177,"./clusterCoordinators":178,"./clusterCoordinators.js":178,"./clusterServers":179,"./clusterServers.js":179,"./coordinatorCollection":180,"./coordinatorCollection.js":180,"./foxxCollection":181,"./foxxCollection.js":181,"./foxxRepository":182,"./foxxRepository.js":182,"./graphCollection":183,"./graphCollection.js":183,"./notificationCollection":184,"./notificationCollection.js":184,"./queryManagementCollectionActive":185,"./queryManagementCollectionActive.js":185,"./queryManagementCollectionSlow":186,"./queryManagementCollectionSlow.js":186};function r(e){var t=a(e);return i(t)}function a(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=a,e.exports=r,r.id=463},,function(e,t){!function(e){"use strict";function t(e){}function i(e){e.stopPropagation()}e.fn.pagination=function(n){function r(t,n){var r=n>=1&&n<=o.lastPage,a=e("<a/>").append(t),s=e("<li/>").append(a);return r?(a.click((function(){o.click(n)})),e(".arango-pagination").next().children().first().removeClass("disabledPag"),e(".arango-pagination").prev().children().first().removeClass("disabledPag")):(s.addClass("disabledPag"),setTimeout((function(){e(s).find("i").hasClass("fa-angle-right")?e(".arango-pagination").next().children().first().addClass("disabledPag"):e(s).find("i").hasClass("fa-angle-left")&&e(".arango-pagination").prev().children().first().addClass("disabledPag")}),50)),a.click(i),n===o.page&&s.addClass("active active-arango-pagination-button"),s}function a(){var t,i=e('<ul class="arango-pagination"/>');for(i.append(r(o.prev,o.page-1)),t=l;c>=t;t+=1)i.append(r(t,t));return i.append(r(o.next,o.page+1))}var o=e.extend({prev:'<span><i class="fa fa-angle-left"/></span>',next:'<span><i class="fa fa-angle-right"/></span>',left:3,right:3,page:1,lastPage:1,click:t},n||{}),s=o.left+o.right,l=Math.max(1,o.page-o.left),c=l+s;return o.lastPage<c&&(l=Math.max(1,o.lastPage-s),c=o.lastPage),this.each((function(t){var i=e(this),n=i.children("ul");n.length?n.replaceWith(a()):i.append(a())}))}}(jQuery)},function(e,t,i){var n;(function(){function i(e){this._value=e}function r(e,t,i,n){var r,a,o=Math.pow(10,t);return a=(i(e*o)/o).toFixed(t),n&&(r=new RegExp("0{1,"+n+"}$"),a=a.replace(r,"")),a}function a(e,t,i){return t.indexOf("$")>-1?function(e,t,i){var n,r,a=t.indexOf("$"),o=t.indexOf("("),l=t.indexOf("-"),c="";return t.indexOf(" $")>-1?(c=" ",t=t.replace(" $","")):t.indexOf("$ ")>-1?(c=" ",t=t.replace("$ ","")):t=t.replace("$",""),r=s(e._value,t,i),1>=a?r.indexOf("(")>-1||r.indexOf("-")>-1?(r=r.split(""),n=1,(o>a||l>a)&&(n=0),r.splice(n,0,h[u].currency.symbol+c),r=r.join("")):r=h[u].currency.symbol+c+r:r.indexOf(")")>-1?((r=r.split("")).splice(-1,0,c+h[u].currency.symbol),r=r.join("")):r=r+c+h[u].currency.symbol,r}(e,t,i):t.indexOf("%")>-1?function(e,t,i){var n,r="",a=100*e._value;return t.indexOf(" %")>-1?(r=" ",t=t.replace(" %","")):t=t.replace("%",""),(n=s(a,t,i)).indexOf(")")>-1?((n=n.split("")).splice(-1,0,r+"%"),n=n.join("")):n=n+r+"%",n}(e,t,i):t.indexOf(":")>-1?function(e){var t=Math.floor(e._value/60/60),i=Math.floor((e._value-60*t*60)/60),n=Math.round(e._value-60*t*60-60*i);return t+":"+(10>i?"0"+i:i)+":"+(10>n?"0"+n:n)}(e):s(e._value,t,i)}function o(e,t){var i,n,r,a,o,s=t,l=["KB","MB","GB","TB","PB","EB","ZB","YB"],c=!1;if(t.indexOf(":")>-1)e._value=function(e){var t=e.split(":"),i=0;return 3===t.length?(i+=60*Number(t[0])*60,i+=60*Number(t[1]),i+=Number(t[2])):2===t.length&&(i+=60*Number(t[0]),i+=Number(t[1])),Number(i)}(t);else if(t===p)e._value=0;else{for("."!==h[u].delimiters.decimal&&(t=t.replace(/\./g,"").replace(h[u].delimiters.decimal,".")),i=new RegExp("[^a-zA-Z]"+h[u].abbreviations.thousand+"(?:\\)|(\\"+h[u].currency.symbol+")?(?:\\))?)?$"),n=new RegExp("[^a-zA-Z]"+h[u].abbreviations.million+"(?:\\)|(\\"+h[u].currency.symbol+")?(?:\\))?)?$"),r=new RegExp("[^a-zA-Z]"+h[u].abbreviations.billion+"(?:\\)|(\\"+h[u].currency.symbol+")?(?:\\))?)?$"),a=new RegExp("[^a-zA-Z]"+h[u].abbreviations.trillion+"(?:\\)|(\\"+h[u].currency.symbol+")?(?:\\))?)?$"),o=0;o<=l.length&&!(c=t.indexOf(l[o])>-1&&Math.pow(1024,o+1));o++);e._value=(c||1)*(s.match(i)?Math.pow(10,3):1)*(s.match(n)?Math.pow(10,6):1)*(s.match(r)?Math.pow(10,9):1)*(s.match(a)?Math.pow(10,12):1)*(t.indexOf("%")>-1?.01:1)*((t.split("-").length+Math.min(t.split("(").length-1,t.split(")").length-1))%2?1:-1)*Number(t.replace(/[^0-9\.]+/g,"")),e._value=c?Math.ceil(e._value):e._value}return e._value}function s(e,t,i){var n,a,o,s,l,c,d=!1,f=!1,g=!1,m="",v=!1,_=!1,b=!1,w=!1,y=!1,x="",C="",S=Math.abs(e),T=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],k="",A=!1;if(0===e&&null!==p)return p;if(t.indexOf("(")>-1?(d=!0,t=t.slice(1,-1)):t.indexOf("+")>-1&&(f=!0,t=t.replace(/\+/g,"")),t.indexOf("a")>-1&&(v=t.indexOf("aK")>=0,_=t.indexOf("aM")>=0,b=t.indexOf("aB")>=0,w=t.indexOf("aT")>=0,y=v||_||b||w,t.indexOf(" a")>-1?(m=" ",t=t.replace(" a","")):t=t.replace("a",""),S>=Math.pow(10,12)&&!y||w?(m+=h[u].abbreviations.trillion,e/=Math.pow(10,12)):S<Math.pow(10,12)&&S>=Math.pow(10,9)&&!y||b?(m+=h[u].abbreviations.billion,e/=Math.pow(10,9)):S<Math.pow(10,9)&&S>=Math.pow(10,6)&&!y||_?(m+=h[u].abbreviations.million,e/=Math.pow(10,6)):(S<Math.pow(10,6)&&S>=Math.pow(10,3)&&!y||v)&&(m+=h[u].abbreviations.thousand,e/=Math.pow(10,3))),t.indexOf("b")>-1)for(t.indexOf(" b")>-1?(x=" ",t=t.replace(" b","")):t=t.replace("b",""),o=0;o<=T.length;o++)if(n=Math.pow(1024,o),a=Math.pow(1024,o+1),e>=n&&a>e){x+=T[o],n>0&&(e/=n);break}return t.indexOf("o")>-1&&(t.indexOf(" o")>-1?(C=" ",t=t.replace(" o","")):t=t.replace("o",""),C+=h[u].ordinal(e)),t.indexOf("[.]")>-1&&(g=!0,t=t.replace("[.]",".")),s=e.toString().split(".")[0],l=t.split(".")[1],c=t.indexOf(","),l?(l.indexOf("[")>-1?k=r(e,(l=(l=l.replace("]","")).split("["))[0].length+l[1].length,i,l[1].length):k=r(e,l.length,i),s=k.split(".")[0],k=k.split(".")[1].length?h[u].delimiters.decimal+k.split(".")[1]:"",g&&0===Number(k.slice(1))&&(k="")):s=r(e,null,i),s.indexOf("-")>-1&&(s=s.slice(1),A=!0),c>-1&&(s=s.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+h[u].delimiters.thousands)),0===t.indexOf(".")&&(s=""),(d&&A?"(":"")+(!d&&A?"-":"")+(!A&&f?"+":"")+s+k+(C||"")+(m||"")+(x||"")+(d&&A?")":"")}function l(e){var t=e.toString().split(".");return t.length<2?1:Math.pow(10,t[1].length)}function c(){var e=Array.prototype.slice.call(arguments);return e.reduce((function(e,t){var i=l(e),n=l(t);return i>n?i:n}),-1/0)}var d,h={},u="en",p=null,f="0,0",g=e.exports;(d=function(e){return d.isNumeral(e)?e=e.value():0===e||"undefined"==typeof e?e=0:Number(e)||(e=d.fn.unformat(e)),new i(Number(e))}).version="1.5.3",d.isNumeral=function(e){return e instanceof i},d.language=function(e,t){if(!e)return u;if(e&&!t){if(!h[e])throw new Error("Unknown language : "+e);u=e}return(t||!h[e])&&function(e,t){h[e]=t}(e,t),d},d.languageData=function(e){if(!e)return h[u];if(!h[e])throw new Error("Unknown language : "+e);return h[e]},d.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),d.zeroFormat=function(e){p="string"==typeof e?e:null},d.defaultFormat=function(e){f="string"==typeof e?e:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(e,t){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var i,n,r=this.length>>>0,a=!1;for(1<arguments.length&&(n=t,a=!0),i=0;r>i;++i)this.hasOwnProperty(i)&&(a?n=e(n,this[i],i,this):(n=this[i],a=!0));if(!a)throw new TypeError("Reduce of empty array with no initial value");return n}),d.fn=i.prototype={clone:function(){return d(this)},format:function(e,t){return a(this,e||f,void 0!==t?t:Math.round)},unformat:function(e){return"[object Number]"===Object.prototype.toString.call(e)?e:o(this,e||f)},value:function(){return this._value},valueOf:function(){return this._value},set:function(e){return this._value=Number(e),this},add:function(e){var t=c.call(null,this._value,e);return this._value=[this._value,e].reduce((function(e,i){return e+t*i}),0)/t,this},subtract:function(e){var t=c.call(null,this._value,e);return this._value=[e].reduce((function(e,i){return e-t*i}),this._value*t)/t,this},multiply:function(e){return this._value=[this._value,e].reduce((function(e,t){var i=c(e,t);return e*i*t*i/(i*i)}),1),this},divide:function(e){return this._value=[this._value,e].reduce((function(e,t){var i=c(e,t);return e*i/(t*i)})),this},difference:function(e){return Math.abs(d(this._value).subtract(e).value())}},g&&(e.exports=d),"undefined"==typeof ender&&(this.numeral=d),void 0===(n=function(){return d}.apply(t,[]))||(e.exports=n)}).call(this)},function(e){e.exports=JSON.parse('[{"name":"FOR .. FILTER .. RETURN template","value":"/* Please insert some values for the @@collection and @value bind parameters */\\nFOR doc IN @@collection\\n  FILTER doc.`attribute` == @value\\n  RETURN doc","parameter":{"@collection":"my_collection","value":"my_value"}},{"name":"Limit","value":"/* Please insert some values for the @@collection, @offset and @count bind parameters */\\nFOR doc IN @@collection\\n  LIMIT @offset, @count\\n  RETURN doc","parameter":{"@collection":"my_collection","offset":0,"count":10}},{"name":"Inner join","value":"/* Please insert some values for the @@collection1 and @@collection2 bind parameters */\\nFOR doc1 IN @@collection1\\n  FOR doc2 IN @@collection2\\n    FILTER doc1.`attribute` == doc2.`attribute`\\n    RETURN { doc1, doc2 }","parameter":{"@collection1":"collection1","@collection2":"collection2"}},{"name":"Random document","value":"/* Please insert some value for the @@collection bind parameter */\\nFOR doc IN @@collection\\n  SORT RAND()\\n  LIMIT 1\\n  RETURN doc","parameter":{"@collection":"my_collection"}},{"name":"Subquery example","value":"/* Please insert some values for the @@collection, @value and @count bind parameters */\\nFOR doc IN @@collection\\n  LET values = (\\n    FOR s IN doc.`attribute`\\n      FILTER s.`attribute` == @value\\n      RETURN s\\n  )\\n  FILTER LENGTH(values) > @count\\n  RETURN {\\n    doc,\\n    values\\n  }","parameter":{"@collection":"my_collection","value":"my_value","count":10}},{"name":"Sequences","value":"/* Returns the sequence of integers between 2010 and 2015 (including) */\\nFOR year IN 2010..2015\\n  RETURN year"},{"name":"Bind parameters","value":"/* There are two types of bind parameters:\\n   - bind parameter names starting with a single @ character, e.g. @count, @value, @test:\\n     These can be used to ship any JSON-encodable data to the server.\\n   - bind parameter names starting with two @ characters always refer to collections, e.g. @@collections, @@c:\\n     These can be used as placeholders for collection names.\\n */\\nFOR doc IN @@collection\\n  FILTER doc.value == @value\\n  RETURN doc","parameter":{"@collection":"my_collection","value":"my_value"}}]')},function(e,t,i){!function(e){"use strict";function t(e){var t,i,n,r;for(i=1,n=arguments.length;i<n;i++)for(t in r=arguments[i])e[t]=r[t];return e}function i(e,t){var i=Array.prototype.slice;if(e.bind)return e.bind.apply(e,i.call(arguments,1));var n=i.call(arguments,2);return function(){return e.apply(t,n.length?n.concat(i.call(arguments)):arguments)}}function n(e){return e._leaflet_id=e._leaflet_id||++qe,e._leaflet_id}function r(e,t,i){var n,r,a,o;return o=function(){n=!1,r&&(a.apply(i,r),r=!1)},a=function(){n?r=arguments:(e.apply(i,arguments),setTimeout(o,t),n=!0)}}function a(e,t,i){var n=t[1],r=t[0],a=n-r;return e===n&&i?e:((e-r)%a+a)%a+r}function o(){return!1}function s(e,t){var i=Math.pow(10,void 0===t?6:t);return Math.round(e*i)/i}function l(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function c(e){return l(e).split(/\s+/)}function d(e,t){for(var i in e.hasOwnProperty("options")||(e.options=e.options?Ge(e.options):{}),t)e.options[i]=t[i];return e.options}function h(e,t,i){var n=[];for(var r in e)n.push(encodeURIComponent(i?r.toUpperCase():r)+"="+encodeURIComponent(e[r]));return(t&&-1!==t.indexOf("?")?"&":"?")+n.join("&")}function u(e,t){return e.replace(Ye,(function(e,i){var n=t[i];if(void 0===n)throw new Error("No value provided for variable "+e);return"function"==typeof n&&(n=n(t)),n}))}function p(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1}function f(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}function g(e){var t=+new Date,i=Math.max(0,16-(t-Ze));return Ze=t+i,window.setTimeout(e,i)}function m(e,t,n){if(!n||Xe!==g)return Xe.call(window,i(e,t));e.call(t)}function v(e){e&&Ke.call(window,e)}function _(){}function b(e,t,i){this.x=i?Math.round(e):e,this.y=i?Math.round(t):t}function w(e,t,i){return e instanceof b?e:Qe(e)?new b(e[0],e[1]):void 0===e||null===e?e:"object"==typeof e&&"x"in e&&"y"in e?new b(e.x,e.y):new b(e,t,i)}function y(e,t){if(e)for(var i=t?[e,t]:e,n=0,r=i.length;n<r;n++)this.extend(i[n])}function x(e,t){return!e||e instanceof y?e:new y(e,t)}function C(e,t){if(e)for(var i=t?[e,t]:e,n=0,r=i.length;n<r;n++)this.extend(i[n])}function S(e,t){return e instanceof C?e:new C(e,t)}function T(e,t,i){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,void 0!==i&&(this.alt=+i)}function k(e,t,i){return e instanceof T?e:Qe(e)&&"object"!=typeof e[0]?3===e.length?new T(e[0],e[1],e[2]):2===e.length?new T(e[0],e[1]):null:void 0===e||null===e?e:"object"==typeof e&&"lat"in e?new T(e.lat,"lng"in e?e.lng:e.lon,e.alt):void 0===t?null:new T(e,t,i)}function A(e,t,i,n){if(Qe(e))return this._a=e[0],this._b=e[1],this._c=e[2],void(this._d=e[3]);this._a=e,this._b=t,this._c=i,this._d=n}function P(e,t,i,n){return new A(e,t,i,n)}function D(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function E(e,t){var i,n,r,a,o,s,l="";for(i=0,r=e.length;i<r;i++){for(n=0,a=(o=e[i]).length;n<a;n++)l+=(n?"L":"M")+(s=o[n]).x+" "+s.y;l+=t?Ft?"z":"x":""}return l||"M0 0"}function M(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}function O(e,t,i,n){return"touchstart"===t?I(e,i,n):"touchmove"===t?function(e,t,i){var n=function(e){(e.pointerType!==e.MSPOINTER_TYPE_MOUSE&&"mouse"!==e.pointerType||0!==e.buttons)&&$(e,t)};e["_leaflet_touchmove"+i]=n,e.addEventListener(Gt,n,!1)}(e,i,n):"touchend"===t&&function(e,t,i){var n=function(e){$(e,t)};e["_leaflet_touchend"+i]=n,e.addEventListener(qt,n,!1),e.addEventListener(Yt,n,!1)}(e,i,n),this}function I(e,t,n){var r=i((function(e){if("mouse"!==e.pointerType&&e.MSPOINTER_TYPE_MOUSE&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE){if(!(Qt.indexOf(e.target.tagName)<0))return;ve(e)}$(e,t)}));e["_leaflet_touchstart"+n]=r,e.addEventListener(Wt,r,!1),Zt||(document.documentElement.addEventListener(Wt,N,!0),document.documentElement.addEventListener(Gt,R,!0),document.documentElement.addEventListener(qt,j,!0),document.documentElement.addEventListener(Yt,j,!0),Zt=!0)}function N(e){Jt[e.pointerId]=e,Xt++}function R(e){Jt[e.pointerId]&&(Jt[e.pointerId]=e)}function j(e){delete Jt[e.pointerId],Xt--}function $(e,t){for(var i in e.touches=[],Jt)e.touches.push(Jt[i]);e.changedTouches=[e],t(e)}function B(e,t,i){function n(e){var t;if(Rt){if(!gt||"mouse"===e.pointerType)return;t=Xt}else t=e.touches.length;if(!(t>1)){var i=Date.now(),n=i-(a||i);o=e.touches?e.touches[0]:e,s=n>0&&n<=l,a=i}}function r(e){if(s&&!o.cancelBubble){if(Rt){if(!gt||"mouse"===e.pointerType)return;var i,n,r={};for(n in o)i=o[n],r[n]=i&&i.bind?i.bind(o):i;o=r}o.type="dblclick",t(o),a=null}}var a,o,s=!1,l=250;return e[ti+Kt+i]=n,e[ti+ei+i]=r,e[ti+"dblclick"+i]=t,e.addEventListener(Kt,n,!1),e.addEventListener(ei,r,!1),e.addEventListener("dblclick",t,!1),this}function V(e,t){var i=e[ti+Kt+t],n=e[ti+ei+t],r=e[ti+"dblclick"+t];return e.removeEventListener(Kt,i,!1),e.removeEventListener(ei,n,!1),gt||e.removeEventListener("dblclick",r,!1),this}function H(e){return"string"==typeof e?document.getElementById(e):e}function F(e,t){var i=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!i||"auto"===i)&&document.defaultView){var n=document.defaultView.getComputedStyle(e,null);i=n?n[t]:null}return"auto"===i?null:i}function z(e,t,i){var n=document.createElement(e);return n.className=t||"",i&&i.appendChild(n),n}function U(e){var t=e.parentNode;t&&t.removeChild(e)}function W(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function G(e){var t=e.parentNode;t.lastChild!==e&&t.appendChild(e)}function q(e){var t=e.parentNode;t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function Y(e,t){if(void 0!==e.classList)return e.classList.contains(t);var i=X(e);return i.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(i)}function Q(e,t){if(void 0!==e.classList)for(var i=c(t),n=0,r=i.length;n<r;n++)e.classList.add(i[n]);else if(!Y(e,t)){var a=X(e);Z(e,(a?a+" ":"")+t)}}function J(e,t){void 0!==e.classList?e.classList.remove(t):Z(e,l((" "+X(e)+" ").replace(" "+t+" "," ")))}function Z(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t}function X(e){return void 0===e.className.baseVal?e.className:e.className.baseVal}function K(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&function(e,t){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=e.filters.item(n)}catch(e){if(1===t)return}t=Math.round(100*t),i?(i.Enabled=100!==t,i.Opacity=t):e.style.filter+=" progid:"+n+"(opacity="+t+")"}(e,t)}function ee(e){for(var t=document.documentElement.style,i=0;i<e.length;i++)if(e[i]in t)return e[i];return!1}function te(e,t,i){var n=t||new b(0,0);e.style[ii]=(Pt?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")}function ie(e,t){e._leaflet_pos=t,Mt?te(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function ne(e){return e._leaflet_pos||new b(0,0)}function re(){de(window,"dragstart",ve)}function ae(){he(window,"dragstart",ve)}function oe(e){for(;-1===e.tabIndex;)e=e.parentNode;e.style&&(se(),oi=e,si=e.style.outline,e.style.outline="none",de(window,"keydown",se))}function se(){oi&&(oi.style.outline=si,oi=void 0,si=void 0,he(window,"keydown",se))}function le(e){do{e=e.parentNode}while(!(e.offsetWidth&&e.offsetHeight||e===document.body));return e}function ce(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}function de(e,t,i,n){if("object"==typeof t)for(var r in t)ue(e,r,t[r],i);else for(var a=0,o=(t=c(t)).length;a<o;a++)ue(e,t[a],i,n);return this}function he(e,t,i,n){if("object"==typeof t)for(var r in t)pe(e,r,t[r],i);else if(t)for(var a=0,o=(t=c(t)).length;a<o;a++)pe(e,t[a],i,n);else{for(var s in e[di])pe(e,s,e[di][s]);delete e[di]}return this}function ue(e,t,i,r){var a=t+n(i)+(r?"_"+n(r):"");if(e[di]&&e[di][a])return this;var o=function(t){return i.call(r||e,t||window.event)},s=o;Rt&&0===t.indexOf("touch")?O(e,t,o,a):!jt||"dblclick"!==t||!B||Rt&&xt?"addEventListener"in e?"mousewheel"===t?e.addEventListener("onwheel"in e?"wheel":"mousewheel",o,!1):"mouseenter"===t||"mouseleave"===t?(o=function(t){t=t||window.event,Ce(e,t)&&s(t)},e.addEventListener("mouseenter"===t?"mouseover":"mouseout",o,!1)):("click"===t&&vt&&(o=function(e){!function(e,t){var i=e.timeStamp||e.originalEvent&&e.originalEvent.timeStamp,n=li&&i-li;n&&n>100&&n<500||e.target._simulatedClick&&!e._simulated?_e(e):(li=i,t(e))}(e,s)}),e.addEventListener(t,o,!1)):"attachEvent"in e&&e.attachEvent("on"+t,o):B(e,o,a),e[di]=e[di]||{},e[di][a]=o}function pe(e,t,i,r){var a=t+n(i)+(r?"_"+n(r):""),o=e[di]&&e[di][a];if(!o)return this;Rt&&0===t.indexOf("touch")?function(e,t,i){var n=e["_leaflet_"+t+i];"touchstart"===t?e.removeEventListener(Wt,n,!1):"touchmove"===t?e.removeEventListener(Gt,n,!1):"touchend"===t&&(e.removeEventListener(qt,n,!1),e.removeEventListener(Yt,n,!1))}(e,t,a):!jt||"dblclick"!==t||!V||Rt&&xt?"removeEventListener"in e?"mousewheel"===t?e.removeEventListener("onwheel"in e?"wheel":"mousewheel",o,!1):e.removeEventListener("mouseenter"===t?"mouseover":"mouseleave"===t?"mouseout":t,o,!1):"detachEvent"in e&&e.detachEvent("on"+t,o):V(e,a),e[di][a]=null}function fe(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,xe(e),this}function ge(e){return ue(e,"mousewheel",fe),this}function me(e){return de(e,"mousedown touchstart dblclick",fe),ue(e,"click",ye),this}function ve(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function _e(e){return ve(e),fe(e),this}function be(e,t){if(!t)return new b(e.clientX,e.clientY);var i=ce(t),n=i.boundingClientRect;return new b((e.clientX-n.left)/i.x-t.clientLeft,(e.clientY-n.top)/i.y-t.clientTop)}function we(e){return gt?e.wheelDeltaY/2:e.deltaY&&0===e.deltaMode?-e.deltaY/hi:e.deltaY&&1===e.deltaMode?20*-e.deltaY:e.deltaY&&2===e.deltaMode?60*-e.deltaY:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?20*-e.detail:e.detail?e.detail/-32765*60:0}function ye(e){ui[e.type]=!0}function xe(e){var t=ui[e.type];return ui[e.type]=!1,t}function Ce(e,t){var i=t.relatedTarget;if(!i)return!0;try{for(;i&&i!==e;)i=i.parentNode}catch(e){return!1}return i!==e}function Se(e,t){if(!t||!e.length)return e.slice();var i=t*t;return function(e,t){var i=e.length,n=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(i);n[0]=n[i-1]=1,function e(t,i,n,r,a){var o,s,l,c=0;for(s=r+1;s<=a-1;s++)(l=Ee(t[s],t[r],t[a],!0))>c&&(o=s,c=l);c>n&&(i[o]=1,e(t,i,n,r,o),e(t,i,n,o,a))}(e,n,t,0,i-1);var r,a=[];for(r=0;r<i;r++)n[r]&&a.push(e[r]);return a}(e=function(e,t){for(var i=[e[0]],n=1,r=0,a=e.length;n<a;n++)De(e[n],e[r])>t&&(i.push(e[n]),r=n);return r<a-1&&i.push(e[a-1]),i}(e,i),i)}function Te(e,t,i){return Math.sqrt(Ee(e,t,i,!0))}function ke(e,t,i,n,r){var a,o,s,l=n?Ci:Pe(e,i),c=Pe(t,i);for(Ci=c;;){if(!(l|c))return[e,t];if(l&c)return!1;s=Pe(o=Ae(e,t,a=l||c,i,r),i),a===l?(e=o,l=s):(t=o,c=s)}}function Ae(e,t,i,n,r){var a,o,s=t.x-e.x,l=t.y-e.y,c=n.min,d=n.max;return 8&i?(a=e.x+s*(d.y-e.y)/l,o=d.y):4&i?(a=e.x+s*(c.y-e.y)/l,o=c.y):2&i?(a=d.x,o=e.y+l*(d.x-e.x)/s):1&i&&(a=c.x,o=e.y+l*(c.x-e.x)/s),new b(a,o,r)}function Pe(e,t){var i=0;return e.x<t.min.x?i|=1:e.x>t.max.x&&(i|=2),e.y<t.min.y?i|=4:e.y>t.max.y&&(i|=8),i}function De(e,t){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n}function Ee(e,t,i,n){var r,a=t.x,o=t.y,s=i.x-a,l=i.y-o,c=s*s+l*l;return c>0&&((r=((e.x-a)*s+(e.y-o)*l)/c)>1?(a=i.x,o=i.y):r>0&&(a+=s*r,o+=l*r)),s=e.x-a,l=e.y-o,n?s*s+l*l:new b(a,o)}function Me(e){return!Qe(e[0])||"object"!=typeof e[0][0]&&void 0!==e[0][0]}function Oe(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Me(e)}function Ie(e,t,i){var n,r,a,o,s,l,c,d,h,u=[1,4,2,8];for(r=0,c=e.length;r<c;r++)e[r]._code=Pe(e[r],t);for(o=0;o<4;o++){for(d=u[o],n=[],r=0,a=(c=e.length)-1;r<c;a=r++)s=e[r],l=e[a],s._code&d?l._code&d||((h=Ae(l,s,d,t,i))._code=Pe(h,t),n.push(h)):(l._code&d&&((h=Ae(l,s,d,t,i))._code=Pe(h,t),n.push(h)),n.push(s));e=n}return e}function Ne(e,t){var i,n,r,a,o="Feature"===e.type?e.geometry:e,s=o?o.coordinates:null,l=[],c=t&&t.pointToLayer,d=t&&t.coordsToLatLng||Le;if(!s&&!o)return null;switch(o.type){case"Point":return i=d(s),c?c(e,i):new zi(i);case"MultiPoint":for(r=0,a=s.length;r<a;r++)i=d(s[r]),l.push(c?c(e,i):new zi(i));return new Bi(l);case"LineString":case"MultiLineString":return n=Re(s,"LineString"===o.type?0:1,d),new qi(n,t);case"Polygon":case"MultiPolygon":return n=Re(s,"Polygon"===o.type?1:2,d),new Yi(n,t);case"GeometryCollection":for(r=0,a=o.geometries.length;r<a;r++){var h=Ne({geometry:o.geometries[r],type:"Feature",properties:e.properties},t);h&&l.push(h)}return new Bi(l);default:throw new Error("Invalid GeoJSON object.")}}function Le(e){return new T(e[1],e[0],e[2])}function Re(e,t,i){for(var n,r=[],a=0,o=e.length;a<o;a++)n=t?Re(e[a],t-1,i):(i||Le)(e[a]),r.push(n);return r}function je(e,t){return t="number"==typeof t?t:6,void 0!==e.alt?[s(e.lng,t),s(e.lat,t),s(e.alt,t)]:[s(e.lng,t),s(e.lat,t)]}function $e(e,t,i,n){for(var r=[],a=0,o=e.length;a<o;a++)r.push(t?$e(e[a],t-1,i,n):je(e[a],n));return!t&&i&&r.push(r[0]),r}function Be(e,i){return e.feature?t({},e.feature,{geometry:i}):Ve(i)}function Ve(e){return"Feature"===e.type||"FeatureCollection"===e.type?e:{type:"Feature",properties:{},geometry:e}}function He(e,t){return new Qi(e,t)}function Fe(e,t){return new on(e,t)}function ze(e){return Ht?new cn(e):null}function Ue(e){return Ft||zt?new pn(e):null}var We=Object.freeze;Object.freeze=function(e){return e};var Ge=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}(),qe=0,Ye=/\{ *([\w_-]+) *\}/g,Qe=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Je="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",Ze=0,Xe=window.requestAnimationFrame||f("RequestAnimationFrame")||g,Ke=window.cancelAnimationFrame||f("CancelAnimationFrame")||f("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)},et=(Object.freeze||Object)({freeze:We,extend:t,create:Ge,bind:i,lastId:qe,stamp:n,throttle:r,wrapNum:a,falseFn:o,formatNum:s,trim:l,splitWords:c,setOptions:d,getParamString:h,template:u,isArray:Qe,indexOf:p,emptyImageUrl:Je,requestFn:Xe,cancelFn:Ke,requestAnimFrame:m,cancelAnimFrame:v});_.extend=function(e){var i=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=i.__super__=this.prototype,r=Ge(n);for(var a in r.constructor=i,i.prototype=r,this)this.hasOwnProperty(a)&&"prototype"!==a&&"__super__"!==a&&(i[a]=this[a]);return e.statics&&(t(i,e.statics),delete e.statics),e.includes&&(function(e){if("undefined"!=typeof L&&L&&L.Mixin){e=Qe(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(e.includes),t.apply(null,[r].concat(e.includes)),delete e.includes),r.options&&(e.options=t(Ge(r.options),e.options)),t(r,e),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=r._initHooks.length;e<t;e++)r._initHooks[e].call(this)}},i},_.include=function(e){return t(this.prototype,e),this},_.mergeOptions=function(e){return t(this.prototype.options,e),this},_.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),i="function"==typeof e?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};var tt={on:function(e,t,i){if("object"==typeof e)for(var n in e)this._on(n,e[n],t);else for(var r=0,a=(e=c(e)).length;r<a;r++)this._on(e[r],t,i);return this},off:function(e,t,i){if(e)if("object"==typeof e)for(var n in e)this._off(n,e[n],t);else for(var r=0,a=(e=c(e)).length;r<a;r++)this._off(e[r],t,i);else delete this._events;return this},_on:function(e,t,i){this._events=this._events||{};var n=this._events[e];n||(n=[],this._events[e]=n),i===this&&(i=void 0);for(var r={fn:t,ctx:i},a=n,o=0,s=a.length;o<s;o++)if(a[o].fn===t&&a[o].ctx===i)return;a.push(r)},_off:function(e,t,i){var n,r,a;if(this._events&&(n=this._events[e]))if(t){if(i===this&&(i=void 0),n)for(r=0,a=n.length;r<a;r++){var s=n[r];if(s.ctx===i&&s.fn===t)return s.fn=o,this._firingCount&&(this._events[e]=n=n.slice()),void n.splice(r,1)}}else{for(r=0,a=n.length;r<a;r++)n[r].fn=o;delete this._events[e]}},fire:function(e,i,n){if(!this.listens(e,n))return this;var r=t({},i,{type:e,target:this,sourceTarget:i&&i.sourceTarget||this});if(this._events){var a=this._events[e];if(a){this._firingCount=this._firingCount+1||1;for(var o=0,s=a.length;o<s;o++){var l=a[o];l.fn.call(l.ctx||this,r)}this._firingCount--}}return n&&this._propagateEvent(r),this},listens:function(e,t){var i=this._events&&this._events[e];if(i&&i.length)return!0;if(t)for(var n in this._eventParents)if(this._eventParents[n].listens(e,t))return!0;return!1},once:function(e,t,n){if("object"==typeof e){for(var r in e)this.once(r,e[r],t);return this}var a=i((function(){this.off(e,t,n).off(e,a,n)}),this);return this.on(e,t,n).on(e,a,n)},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[n(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[n(e)],this},_propagateEvent:function(e){for(var i in this._eventParents)this._eventParents[i].fire(e.type,t({layer:e.target,propagatedFrom:e.target},e),!0)}};tt.addEventListener=tt.on,tt.removeEventListener=tt.clearAllEventListeners=tt.off,tt.addOneTimeEventListener=tt.once,tt.fireEvent=tt.fire,tt.hasEventListeners=tt.listens;var it=_.extend(tt),nt=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};b.prototype={clone:function(){return new b(this.x,this.y)},add:function(e){return this.clone()._add(w(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(w(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new b(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new b(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=nt(this.x),this.y=nt(this.y),this},distanceTo:function(e){var t=(e=w(e)).x-this.x,i=e.y-this.y;return Math.sqrt(t*t+i*i)},equals:function(e){return(e=w(e)).x===this.x&&e.y===this.y},contains:function(e){return e=w(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+s(this.x)+", "+s(this.y)+")"}},y.prototype={extend:function(e){return e=w(e),this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(e.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(e.y,this.max.y)):(this.min=e.clone(),this.max=e.clone()),this},getCenter:function(e){return new b((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return new b(this.min.x,this.max.y)},getTopRight:function(){return new b(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,i;return(e="number"==typeof e[0]||e instanceof b?w(e):x(e))instanceof y?(t=e.min,i=e.max):t=i=e,t.x>=this.min.x&&i.x<=this.max.x&&t.y>=this.min.y&&i.y<=this.max.y},intersects:function(e){e=x(e);var t=this.min,i=this.max,n=e.min,r=e.max,a=r.x>=t.x&&n.x<=i.x,o=r.y>=t.y&&n.y<=i.y;return a&&o},overlaps:function(e){e=x(e);var t=this.min,i=this.max,n=e.min,r=e.max,a=r.x>t.x&&n.x<i.x,o=r.y>t.y&&n.y<i.y;return a&&o},isValid:function(){return!(!this.min||!this.max)}},C.prototype={extend:function(e){var t,i,n=this._southWest,r=this._northEast;if(e instanceof T)t=e,i=e;else{if(!(e instanceof C))return e?this.extend(k(e)||S(e)):this;if(t=e._southWest,i=e._northEast,!t||!i)return this}return n||r?(n.lat=Math.min(t.lat,n.lat),n.lng=Math.min(t.lng,n.lng),r.lat=Math.max(i.lat,r.lat),r.lng=Math.max(i.lng,r.lng)):(this._southWest=new T(t.lat,t.lng),this._northEast=new T(i.lat,i.lng)),this},pad:function(e){var t=this._southWest,i=this._northEast,n=Math.abs(t.lat-i.lat)*e,r=Math.abs(t.lng-i.lng)*e;return new C(new T(t.lat-n,t.lng-r),new T(i.lat+n,i.lng+r))},getCenter:function(){return new T((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new T(this.getNorth(),this.getWest())},getSouthEast:function(){return new T(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"==typeof e[0]||e instanceof T||"lat"in e?k(e):S(e);var t,i,n=this._southWest,r=this._northEast;return e instanceof C?(t=e.getSouthWest(),i=e.getNorthEast()):t=i=e,t.lat>=n.lat&&i.lat<=r.lat&&t.lng>=n.lng&&i.lng<=r.lng},intersects:function(e){e=S(e);var t=this._southWest,i=this._northEast,n=e.getSouthWest(),r=e.getNorthEast(),a=r.lat>=t.lat&&n.lat<=i.lat,o=r.lng>=t.lng&&n.lng<=i.lng;return a&&o},overlaps:function(e){e=S(e);var t=this._southWest,i=this._northEast,n=e.getSouthWest(),r=e.getNorthEast(),a=r.lat>t.lat&&n.lat<i.lat,o=r.lng>t.lng&&n.lng<i.lng;return a&&o},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return!!e&&(e=S(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t))},isValid:function(){return!(!this._southWest||!this._northEast)}},T.prototype={equals:function(e,t){return!!e&&(e=k(e),Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng))<=(void 0===t?1e-9:t))},toString:function(e){return"LatLng("+s(this.lat,e)+", "+s(this.lng,e)+")"},distanceTo:function(e){return at.distance(this,k(e))},wrap:function(){return at.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,i=t/Math.cos(Math.PI/180*this.lat);return S([this.lat-t,this.lng-i],[this.lat+t,this.lng+i])},clone:function(){return new T(this.lat,this.lng,this.alt)}};var rt={latLngToPoint:function(e,t){var i=this.projection.project(e),n=this.scale(t);return this.transformation._transform(i,n)},pointToLatLng:function(e,t){var i=this.scale(t),n=this.transformation.untransform(e,i);return this.projection.unproject(n)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,i=this.scale(e);return new y(this.transformation.transform(t.min,i),this.transformation.transform(t.max,i))},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?a(e.lng,this.wrapLng,!0):e.lng;return new T(this.wrapLat?a(e.lat,this.wrapLat,!0):e.lat,t,e.alt)},wrapLatLngBounds:function(e){var t=e.getCenter(),i=this.wrapLatLng(t),n=t.lat-i.lat,r=t.lng-i.lng;if(0===n&&0===r)return e;var a=e.getSouthWest(),o=e.getNorthEast();return new C(new T(a.lat-n,a.lng-r),new T(o.lat-n,o.lng-r))}},at=t({},rt,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var i=Math.PI/180,n=e.lat*i,r=t.lat*i,a=Math.sin((t.lat-e.lat)*i/2),o=Math.sin((t.lng-e.lng)*i/2),s=a*a+Math.cos(n)*Math.cos(r)*o*o,l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*l}}),ot={R:6378137,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,e.lat),-i),r=Math.sin(n*t);return new b(this.R*e.lng*t,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(e){var t=180/Math.PI;return new T((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:function(){var e=6378137*Math.PI;return new y([-e,-e],[e,e])}()};A.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new b((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};var st,lt,ct,dt=t({},at,{code:"EPSG:3857",projection:ot,transformation:function(){var e=.5/(Math.PI*ot.R);return P(e,.5,-e,.5)}()}),ht=t({},dt,{code:"EPSG:900913"}),ut=document.documentElement.style,pt="ActiveXObject"in window,ft=pt&&!document.addEventListener,gt="msLaunchUri"in navigator&&!("documentMode"in document),mt=M("webkit"),vt=M("android"),_t=M("android 2")||M("android 3"),bt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),wt=vt&&M("Google")&&bt<537&&!("AudioNode"in window),yt=!!window.opera,xt=M("chrome"),Ct=M("gecko")&&!mt&&!yt&&!pt,St=!xt&&M("safari"),Tt=M("phantom"),kt="OTransition"in ut,At=0===navigator.platform.indexOf("Win"),Pt=pt&&"transition"in ut,Dt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!_t,Et="MozPerspective"in ut,Mt=!window.L_DISABLE_3D&&(Pt||Dt||Et)&&!kt&&!Tt,Ot="undefined"!=typeof orientation||M("mobile"),It=Ot&&mt,Nt=Ot&&Dt,Lt=!window.PointerEvent&&window.MSPointerEvent,Rt=!(!window.PointerEvent&&!Lt),jt=!window.L_NO_TOUCH&&(Rt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),$t=Ot&&yt,Bt=Ot&&Ct,Vt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ht=!!document.createElement("canvas").getContext,Ft=!(!document.createElementNS||!D("svg").createSVGRect),zt=!Ft&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"==typeof t.adj}catch(e){return!1}}(),Ut=(Object.freeze||Object)({ie:pt,ielt9:ft,edge:gt,webkit:mt,android:vt,android23:_t,androidStock:wt,opera:yt,chrome:xt,gecko:Ct,safari:St,phantom:Tt,opera12:kt,win:At,ie3d:Pt,webkit3d:Dt,gecko3d:Et,any3d:Mt,mobile:Ot,mobileWebkit:It,mobileWebkit3d:Nt,msPointer:Lt,pointer:Rt,touch:jt,mobileOpera:$t,mobileGecko:Bt,retina:Vt,canvas:Ht,svg:Ft,vml:zt}),Wt=Lt?"MSPointerDown":"pointerdown",Gt=Lt?"MSPointerMove":"pointermove",qt=Lt?"MSPointerUp":"pointerup",Yt=Lt?"MSPointerCancel":"pointercancel",Qt=["INPUT","SELECT","OPTION"],Jt={},Zt=!1,Xt=0,Kt=Lt?"MSPointerDown":Rt?"pointerdown":"touchstart",ei=Lt?"MSPointerUp":Rt?"pointerup":"touchend",ti="_leaflet_",ii=ee(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),ni=ee(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ri="webkitTransition"===ni||"OTransition"===ni?ni+"End":"transitionend";if("onselectstart"in document)st=function(){de(window,"selectstart",ve)},lt=function(){he(window,"selectstart",ve)};else{var ai=ee(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);st=function(){if(ai){var e=document.documentElement.style;ct=e[ai],e[ai]="none"}},lt=function(){ai&&(document.documentElement.style[ai]=ct,ct=void 0)}}var oi,si,li,ci=(Object.freeze||Object)({TRANSFORM:ii,TRANSITION:ni,TRANSITION_END:ri,get:H,getStyle:F,create:z,remove:U,empty:W,toFront:G,toBack:q,hasClass:Y,addClass:Q,removeClass:J,setClass:Z,getClass:X,setOpacity:K,testProp:ee,setTransform:te,setPosition:ie,getPosition:ne,disableTextSelection:st,enableTextSelection:lt,disableImageDrag:re,enableImageDrag:ae,preventOutline:oe,restoreOutline:se,getSizedParentNode:le,getScale:ce}),di="_leaflet_events",hi=At&&xt?2*window.devicePixelRatio:Ct?window.devicePixelRatio:1,ui={},pi=(Object.freeze||Object)({on:de,off:he,stopPropagation:fe,disableScrollPropagation:ge,disableClickPropagation:me,preventDefault:ve,stop:_e,getMousePosition:be,getWheelDelta:we,fakeStop:ye,skipped:xe,isExternalTarget:Ce,addListener:de,removeListener:he}),fi=it.extend({run:function(e,t,i,n){this.stop(),this._el=e,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=ne(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=m(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,i=1e3*this._duration;t<i?this._runFrame(this._easeOut(t/i),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var i=this._startPos.add(this._offset.multiplyBy(e));t&&i._round(),ie(this._el,i),this.fire("step")},_complete:function(){v(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),gi=it.extend({options:{crs:dt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=d(this,t),this._initContainer(e),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),void 0!==t.zoom&&(this._zoom=this._limitZoom(t.zoom)),t.center&&void 0!==t.zoom&&this.setView(k(t.center),t.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=ni&&Mt&&!$t&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),de(this._proxy,ri,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,i,n){return i=void 0===i?this._zoom:this._limitZoom(i),e=this._limitCenter(k(e),i,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&!0!==n&&(void 0!==n.animate&&(n.zoom=t({animate:n.animate},n.zoom),n.pan=t({animate:n.animate,duration:n.duration},n.pan)),this._zoom!==i?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,i,n.zoom):this._tryAnimatedPan(e,n.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(e,i),this)},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(Mt?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(Mt?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,i){var n=this.getZoomScale(t),r=this.getSize().divideBy(2),a=(e instanceof b?e:this.latLngToContainerPoint(e)).subtract(r).multiplyBy(1-1/n),o=this.containerPointToLatLng(r.add(a));return this.setView(o,t,{zoom:i})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():S(e);var i=w(t.paddingTopLeft||t.padding||[0,0]),n=w(t.paddingBottomRight||t.padding||[0,0]),r=this.getBoundsZoom(e,!1,i.add(n));if((r="number"==typeof t.maxZoom?Math.min(t.maxZoom,r):r)===1/0)return{center:e.getCenter(),zoom:r};var a=n.subtract(i).divideBy(2),o=this.project(e.getSouthWest(),r),s=this.project(e.getNorthEast(),r);return{center:this.unproject(o.add(s).divideBy(2).add(a),r),zoom:r}},fitBounds:function(e,t){if(!(e=S(e)).isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(e,t);return this.setView(i.center,i.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(t=t||{},!(e=w(e).round()).x&&!e.y)return this.fire("moveend");if(!0!==t.animate&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new fi,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate){Q(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,i,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,t,i){function n(e){var t=(u*u-h*h+(e?-1:1)*g*g*p*p)/(2*(e?u:h)*g*p),i=Math.sqrt(t*t+1)-t;return i<1e-9?-18:Math.log(i)}function r(e){return(Math.exp(e)-Math.exp(-e))/2}function a(e){return(Math.exp(e)+Math.exp(-e))/2}function o(e){return h*(a(v)*function(e){return r(e)/a(e)}(v+f*e)-r(v))/g}if(!1===(i=i||{}).animate||!Mt)return this.setView(e,t,i);this._stop();var s=this.project(this.getCenter()),l=this.project(e),c=this.getSize(),d=this._zoom;e=k(e),t=void 0===t?d:t;var h=Math.max(c.x,c.y),u=h*this.getZoomScale(d,t),p=l.distanceTo(s)||1,f=1.42,g=f*f,v=n(0),_=Date.now(),b=(n(1)-v)/f,w=i.duration?1e3*i.duration:1e3*b*.8;return this._moveStart(!0,i.noMoveStart),function i(){var n=(Date.now()-_)/w,r=function(e){return 1-Math.pow(1-e,1.5)}(n)*b;n<=1?(this._flyToFrame=m(i,this),this._move(this.unproject(s.add(l.subtract(s).multiplyBy(o(r)/p)),d),this.getScaleZoom(h/function(e){return h*(a(v)/a(v+f*e))}(r),d),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}.call(this),this},flyToBounds:function(e,t){var i=this._getBoundsCenterZoom(e,t);return this.flyTo(i.center,i.zoom,t)},setMaxBounds:function(e){return(e=S(e)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,S(e));return i.equals(n)||this.panTo(n,t),this._enforcingBounds=!1,this},invalidateSize:function(e){if(!this._loaded)return this;e=t({animate:!1,pan:!0},!0===e?{animate:!0}:e);var n=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),a=n.divideBy(2).round(),o=r.divideBy(2).round(),s=a.subtract(o);return s.x||s.y?(e.animate&&e.pan?this.panBy(s):(e.pan&&this._rawPanBy(s),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:n,newSize:r})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=t({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var n=i(this._handleGeolocationResponse,this),r=i(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,r,e):navigator.geolocation.getCurrentPosition(n,r,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){var t=e.code,i=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(e){var t=new T(e.coords.latitude,e.coords.longitude),i=t.toBounds(2*e.coords.accuracy),n=this._locateOptions;if(n.setView){var r=this.getBoundsZoom(i);this.setView(t,n.maxZoom?Math.min(r,n.maxZoom):r)}var a={latlng:t,bounds:i,timestamp:e.timestamp};for(var o in e.coords)"number"==typeof e.coords[o]&&(a[o]=e.coords[o]);this.fire("locationfound",a)},addHandler:function(e,t){if(!t)return this;var i=this[e]=new t(this);return this._handlers.push(i),this.options[e]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(e){this._container._leaflet_id=void 0,this._containerId=void 0}var e;for(e in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),U(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(v(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[e].remove();for(e in this._panes)U(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var i=z("div","leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),t||this._mapPane);return e&&(this._panes[e]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds();return new C(this.unproject(e.getBottomLeft()),this.unproject(e.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,i){e=S(e),i=w(i||[0,0]);var n=this.getZoom()||0,r=this.getMinZoom(),a=this.getMaxZoom(),o=e.getNorthWest(),s=e.getSouthEast(),l=this.getSize().subtract(i),c=x(this.project(s,n),this.project(o,n)).getSize(),d=Mt?this.options.zoomSnap:1,h=l.x/c.x,u=l.y/c.y,p=t?Math.max(h,u):Math.min(h,u);return n=this.getScaleZoom(p,n),d&&(n=Math.round(n/(d/100))*(d/100),n=t?Math.ceil(n/d)*d:Math.floor(n/d)*d),Math.max(r,Math.min(a,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new b(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var i=this._getTopLeftPoint(e,t);return new y(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(void 0===e?this.getZoom():e)},getPane:function(e){return"string"==typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var i=this.options.crs;return t=void 0===t?this._zoom:t,i.scale(e)/i.scale(t)},getScaleZoom:function(e,t){var i=this.options.crs;t=void 0===t?this._zoom:t;var n=i.zoom(e*i.scale(t));return isNaN(n)?1/0:n},project:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint(k(e),t)},unproject:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(w(e),t)},layerPointToLatLng:function(e){var t=w(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){return this.project(k(e))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(k(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(S(e))},distance:function(e,t){return this.options.crs.distance(k(e),k(t))},containerPointToLayerPoint:function(e){return w(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return w(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(w(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(k(e)))},mouseEventToContainerPoint:function(e){return be(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=H(e);if(!t)throw new Error("Map container not found.");if(t._leaflet_id)throw new Error("Map container is already initialized.");de(t,"scroll",this._onScroll,this),this._containerId=n(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&Mt,Q(e,"leaflet-container"+(jt?" leaflet-touch":"")+(Vt?" leaflet-retina":"")+(ft?" leaflet-oldie":"")+(St?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=F(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ie(this._mapPane,new b(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Q(e.markerPane,"leaflet-zoom-hide"),Q(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t){ie(this._mapPane,new b(0,0));var i=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var n=this._zoom!==t;this._moveStart(n,!1)._move(e,t)._moveEnd(n),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,i){void 0===t&&(t=this._zoom);var n=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),(n||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return v(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){ie(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[n(this._container)]=this;var t=e?he:de;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),Mt&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){v(this._resizeRequest),this._resizeRequest=m((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var i,r=[],a="mouseout"===t||"mouseover"===t,o=e.target||e.srcElement,s=!1;o;){if((i=this._targets[n(o)])&&("click"===t||"preclick"===t)&&!e._simulated&&this._draggableMoved(i)){s=!0;break}if(i&&i.listens(t,!0)){if(a&&!Ce(o,e))break;if(r.push(i),a)break}if(o===this._container)break;o=o.parentNode}return r.length||s||a||!Ce(o,e)||(r=[this]),r},_handleDOMEvent:function(e){if(this._loaded&&!xe(e)){var t=e.type;"mousedown"!==t&&"keypress"!==t||oe(e.target||e.srcElement),this._fireDOMEvent(e,t)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,i,n){if("click"===e.type){var r=t({},e);r.type="preclick",this._fireDOMEvent(r,r.type,n)}if(!e._stopped&&(n=(n||[]).concat(this._findEventTargets(e,i))).length){var a=n[0];"contextmenu"===i&&a.listens(i,!0)&&ve(e);var o={originalEvent:e};if("keypress"!==e.type){var s=a.getLatLng&&(!a._radius||a._radius<=10);o.containerPoint=s?this.latLngToContainerPoint(a.getLatLng()):this.mouseEventToContainerPoint(e),o.layerPoint=this.containerPointToLayerPoint(o.containerPoint),o.latlng=s?a.getLatLng():this.layerPointToLatLng(o.layerPoint)}for(var l=0;l<n.length;l++)if(n[l].fire(i,o,!0),o.originalEvent._stopped||!1===n[l].options.bubblingMouseEvents&&-1!==p(this._mouseEvents,i))return}},_draggableMoved:function(e){return(e=e.dragging&&e.dragging.enabled()?e:this).dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return ne(this._mapPane)||new b(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){return(e&&void 0!==t?this._getNewPixelOrigin(e,t):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var i=this.getSize()._divideBy(2);return this.project(e,t)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,i){var n=this._getNewPixelOrigin(i,t);return this.project(e,t)._subtract(n)},_latLngBoundsToNewLayerBounds:function(e,t,i){var n=this._getNewPixelOrigin(i,t);return x([this.project(e.getSouthWest(),t)._subtract(n),this.project(e.getNorthWest(),t)._subtract(n),this.project(e.getSouthEast(),t)._subtract(n),this.project(e.getNorthEast(),t)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,i){if(!i)return e;var n=this.project(e,t),r=this.getSize().divideBy(2),a=new y(n.subtract(r),n.add(r)),o=this._getBoundsOffset(a,i,t);return o.round().equals([0,0])?e:this.unproject(n.add(o),t)},_limitOffset:function(e,t){if(!t)return e;var i=this.getPixelBounds(),n=new y(i.min.add(e),i.max.add(e));return e.add(this._getBoundsOffset(n,t))},_getBoundsOffset:function(e,t,i){var n=x(this.project(t.getNorthEast(),i),this.project(t.getSouthWest(),i)),r=n.min.subtract(e.min),a=n.max.subtract(e.max);return new b(this._rebound(r.x,-a.x),this._rebound(r.y,-a.y))},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),i=this.getMaxZoom(),n=Mt?this.options.zoomSnap:1;return n&&(e=Math.round(e/n)*n),Math.max(t,Math.min(i,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){J(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var i=this._getCenterOffset(e)._trunc();return!(!0!==(t&&t.animate)&&!this.getSize().contains(i))&&(this.panBy(i,t),!0)},_createAnimProxy:function(){var e=this._proxy=z("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",(function(e){var t=ii,i=this._proxy.style[t];te(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),i===this._proxy.style[t]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",(function(){var e=this.getCenter(),t=this.getZoom();te(this._proxy,this.project(e,t),this.getZoomScale(t,1))}),this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){U(this._proxy),delete this._proxy},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(t),r=this._getCenterOffset(e)._divideBy(1-1/n);return!(!0!==i.animate&&!this.getSize().contains(r))&&(m((function(){this._moveStart(!0,!1)._animateZoom(e,t,!0)}),this),!0)},_animateZoom:function(e,t,n,r){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,Q(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:r}),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&J(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),m((function(){this._moveEnd(!0)}),this))}}),mi=_.extend({options:{position:"topright"},initialize:function(e){d(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),i=this.getPosition(),n=e._controlCorners[i];return Q(t,"leaflet-control"),-1!==i.indexOf("bottom")?n.insertBefore(t,n.firstChild):n.appendChild(t),this},remove:function(){return this._map?(U(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),vi=function(e){return new mi(e)};gi.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){function e(e,r){var a=i+e+" "+i+r;t[e+r]=z("div",a,n)}var t=this._controlCorners={},i="leaflet-",n=this._controlContainer=z("div",i+"control-container",this._container);e("top","left"),e("top","right"),e("bottom","left"),e("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)U(this._controlCorners[e]);U(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var _i=mi.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,i,n){return i<n?-1:n<i?1:0}},initialize:function(e,t,i){for(var n in d(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,e)this._addLayer(e[n],n);for(n in t)this._addLayer(t[n],n,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return mi.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(n(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){Q(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._form.clientHeight?(Q(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=e+"px"):J(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return J(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=z("div",e),i=this.options.collapsed;t.setAttribute("aria-haspopup",!0),me(t),ge(t);var n=this._form=z("form",e+"-list");i&&(this._map.on("click",this.collapse,this),vt||de(t,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=this._layersLink=z("a",e+"-toggle",t);r.href="#",r.title="Layers",jt?(de(r,"click",_e),de(r,"click",this.expand,this)):de(r,"focus",this.expand,this),i||this.expand(),this._baseLayersList=z("div",e+"-base",n),this._separator=z("div",e+"-separator",n),this._overlaysList=z("div",e+"-overlays",n),t.appendChild(n)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&n(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,n){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:n}),this.options.sortLayers&&this._layers.sort(i((function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)}),this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;W(this._baseLayersList),W(this._overlaysList),this._layerControlInputs=[];var e,t,i,n,r=0;for(i=0;i<this._layers.length;i++)n=this._layers[i],this._addItem(n),t=t||n.overlay,e=e||!n.overlay,r+=n.overlay?0:1;return this.options.hideSingleBase&&(e=e&&r>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(n(e.target)),i=t.overlay?"add"===e.type?"overlayadd":"overlayremove":"add"===e.type?"baselayerchange":null;i&&this._map.fire(i,t)},_createRadioElement:function(e,t){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",n=document.createElement("div");return n.innerHTML=i,n.firstChild},_addItem:function(e){var t,i=document.createElement("label"),r=this._map.hasLayer(e.layer);e.overlay?((t=document.createElement("input")).type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=r):t=this._createRadioElement("leaflet-base-layers",r),this._layerControlInputs.push(t),t.layerId=n(e.layer),de(t,"click",this._onInputClick,this);var a=document.createElement("span");a.innerHTML=" "+e.name;var o=document.createElement("div");return i.appendChild(o),o.appendChild(t),o.appendChild(a),(e.overlay?this._overlaysList:this._baseLayersList).appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){var e,t,i=this._layerControlInputs,n=[],r=[];this._handlingClick=!0;for(var a=i.length-1;a>=0;a--)e=i[a],t=this._getLayer(e.layerId).layer,e.checked?n.push(t):e.checked||r.push(t);for(a=0;a<r.length;a++)this._map.hasLayer(r[a])&&this._map.removeLayer(r[a]);for(a=0;a<n.length;a++)this._map.hasLayer(n[a])||this._map.addLayer(n[a]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var e,t,i=this._layerControlInputs,n=this._map.getZoom(),r=i.length-1;r>=0;r--)e=i[r],t=this._getLayer(e.layerId).layer,e.disabled=void 0!==t.options.minZoom&&n<t.options.minZoom||void 0!==t.options.maxZoom&&n>t.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),bi=mi.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",i=z("div",t+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,t+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,t+"-out",i,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,i,n,r){var a=z("a",i,n);return a.innerHTML=e,a.href="#",a.title=t,a.setAttribute("role","button"),a.setAttribute("aria-label",t),me(a),de(a,"click",_e),de(a,"click",r,this),de(a,"click",this._refocusOnMap,this),a},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";J(this._zoomInButton,t),J(this._zoomOutButton,t),(this._disabled||e._zoom===e.getMinZoom())&&Q(this._zoomOutButton,t),(this._disabled||e._zoom===e.getMaxZoom())&&Q(this._zoomInButton,t)}});gi.mergeOptions({zoomControl:!0}),gi.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new bi,this.addControl(this.zoomControl))}));var wi=mi.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t=z("div","leaflet-control-scale"),i=this.options;return this._addScales(i,"leaflet-control-scale-line",t),e.on(i.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),t},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,i){e.metric&&(this._mScale=z("div",t,i)),e.imperial&&(this._iScale=z("div",t,i))},_update:function(){var e=this._map,t=e.getSize().y/2,i=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(i)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),i=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,i,t/e)},_updateImperial:function(e){var t,i,n,r=3.2808399*e;r>5280?(t=r/5280,i=this._getRoundNum(t),this._updateScale(this._iScale,i+" mi",i/t)):(n=this._getRoundNum(r),this._updateScale(this._iScale,n+" ft",n/r))},_updateScale:function(e,t,i){e.style.width=Math.round(this.options.maxWidth*i)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),i=e/t;return t*(i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1)}}),yi=mi.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(e){d(this,e),this._attributions={}},onAdd:function(e){for(var t in e.attributionControl=this,this._container=z("div","leaflet-control-attribution"),me(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),this._container},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var i=[];this.options.prefix&&i.push(this.options.prefix),e.length&&i.push(e.join(", ")),this._container.innerHTML=i.join(" | ")}}});gi.mergeOptions({attributionControl:!0}),gi.addInitHook((function(){this.options.attributionControl&&(new yi).addTo(this)})),mi.Layers=_i,mi.Zoom=bi,mi.Scale=wi,mi.Attribution=yi,vi.layers=function(e,t,i){return new _i(e,t,i)},vi.zoom=function(e){return new bi(e)},vi.scale=function(e){return new wi(e)},vi.attribution=function(e){return new yi(e)};var xi=_.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});xi.addTo=function(e,t){return e.addHandler(t,this),this};var Ci,Si={Events:tt},Ti=jt?"touchstart mousedown":"mousedown",ki={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},Ai={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},Pi=it.extend({options:{clickTolerance:3},initialize:function(e,t,i,n){d(this,n),this._element=e,this._dragStartTarget=t||e,this._preventOutline=i},enable:function(){this._enabled||(de(this._dragStartTarget,Ti,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Pi._dragging===this&&this.finishDrag(),he(this._dragStartTarget,Ti,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(!e._simulated&&this._enabled&&(this._moved=!1,!Y(this._element,"leaflet-zoom-anim")&&!(Pi._dragging||e.shiftKey||1!==e.which&&1!==e.button&&!e.touches||(Pi._dragging=this,this._preventOutline&&oe(this._element),re(),st(),this._moving)))){this.fire("down");var t=e.touches?e.touches[0]:e,i=le(this._element);this._startPoint=new b(t.clientX,t.clientY),this._parentScale=ce(i),de(document,Ai[e.type],this._onMove,this),de(document,ki[e.type],this._onUp,this)}},_onMove:function(e){if(!e._simulated&&this._enabled)if(e.touches&&e.touches.length>1)this._moved=!0;else{var t=e.touches&&1===e.touches.length?e.touches[0]:e,i=new b(t.clientX,t.clientY)._subtract(this._startPoint);(i.x||i.y)&&(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,ve(e),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=ne(this._element).subtract(i),Q(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Q(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,v(this._animRequest),this._lastEvent=e,this._animRequest=m(this._updatePosition,this,!0)))}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),ie(this._element,this._newPos),this.fire("drag",e)},_onUp:function(e){!e._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var e in J(document.body,"leaflet-dragging"),this._lastTarget&&(J(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ai)he(document,Ai[e],this._onMove,this),he(document,ki[e],this._onUp,this);ae(),lt(),this._moved&&this._moving&&(v(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,Pi._dragging=!1}}),Di=(Object.freeze||Object)({simplify:Se,pointToSegmentDistance:Te,closestPointOnSegment:function(e,t,i){return Ee(e,t,i)},clipSegment:ke,_getEdgeIntersection:Ae,_getBitCode:Pe,_sqClosestPointOnSegment:Ee,isFlat:Me,_flat:Oe}),Ei=(Object.freeze||Object)({clipPolygon:Ie}),Mi={project:function(e){return new b(e.lng,e.lat)},unproject:function(e){return new T(e.y,e.x)},bounds:new y([-180,-90],[180,90])},Oi={R:6378137,R_MINOR:6356752.314245179,bounds:new y([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(e){var t=Math.PI/180,i=this.R,n=e.lat*t,r=this.R_MINOR/i,a=Math.sqrt(1-r*r),o=a*Math.sin(n),s=Math.tan(Math.PI/4-n/2)/Math.pow((1-o)/(1+o),a/2);return n=-i*Math.log(Math.max(s,1e-10)),new b(e.lng*t*i,n)},unproject:function(e){for(var t,i=180/Math.PI,n=this.R,r=this.R_MINOR/n,a=Math.sqrt(1-r*r),o=Math.exp(-e.y/n),s=Math.PI/2-2*Math.atan(o),l=0,c=.1;l<15&&Math.abs(c)>1e-7;l++)t=a*Math.sin(s),t=Math.pow((1-t)/(1+t),a/2),s+=c=Math.PI/2-2*Math.atan(o*t)-s;return new T(s*i,e.x*i/n)}},Ii=(Object.freeze||Object)({LonLat:Mi,Mercator:Oi,SphericalMercator:ot}),Ni=t({},at,{code:"EPSG:3395",projection:Oi,transformation:function(){var e=.5/(Math.PI*Oi.R);return P(e,.5,-e,.5)}()}),Li=t({},at,{code:"EPSG:4326",projection:Mi,transformation:P(1/180,1,-1/180,.5)}),Ri=t({},rt,{projection:Mi,transformation:P(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var i=t.lng-e.lng,n=t.lat-e.lat;return Math.sqrt(i*i+n*n)},infinite:!0});rt.Earth=at,rt.EPSG3395=Ni,rt.EPSG3857=dt,rt.EPSG900913=ht,rt.EPSG4326=Li,rt.Simple=Ri;var ji=it.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[n(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[n(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var i=this.getEvents();t.on(i,this),this.once("remove",(function(){t.off(i,this)}),this)}this.onAdd(t),this.getAttribution&&t.attributionControl&&t.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),t.fire("layeradd",{layer:this})}}});gi.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=n(e);return this._layers[t]||(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e)),this},removeLayer:function(e){var t=n(e);return this._layers[t]?(this._loaded&&e.onRemove(this),e.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(e.getAttribution()),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return!!e&&n(e)in this._layers},eachLayer:function(e,t){for(var i in this._layers)e.call(t,this._layers[i]);return this},_addLayers:function(e){for(var t=0,i=(e=e?Qe(e)?e:[e]:[]).length;t<i;t++)this.addLayer(e[t])},_addZoomLimit:function(e){!isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[n(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=n(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,i=this._getZoomSpan();for(var n in this._zoomBoundLayers){var r=this._zoomBoundLayers[n].options;e=void 0===r.minZoom?e:Math.min(e,r.minZoom),t=void 0===r.maxZoom?t:Math.max(t,r.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var $i=ji.extend({initialize:function(e,t){var i,n;if(d(this,t),this._layers={},e)for(i=0,n=e.length;i<n;i++)this.addLayer(e[i])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return!!e&&(e in this._layers||this.getLayerId(e)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t,i,n=Array.prototype.slice.call(arguments,1);for(t in this._layers)(i=this._layers[t])[e]&&i[e].apply(i,n);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var i in this._layers)e.call(t,this._layers[i]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return n(e)}}),Bi=$i.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),$i.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),$i.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new C;for(var t in this._layers){var i=this._layers[t];e.extend(i.getBounds?i.getBounds():i.getLatLng())}return e}}),Vi=_.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(e){d(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var i=this._getIconUrl(e);if(!i){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(i,t&&"IMG"===t.tagName?t:null);return this._setIconStyles(n,e),n},_setIconStyles:function(e,t){var i=this.options,n=i[t+"Size"];"number"==typeof n&&(n=[n,n]);var r=w(n),a=w("shadow"===t&&i.shadowAnchor||i.iconAnchor||r&&r.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(i.className||""),a&&(e.style.marginLeft=-a.x+"px",e.style.marginTop=-a.y+"px"),r&&(e.style.width=r.x+"px",e.style.height=r.y+"px")},_createImg:function(e,t){return(t=t||document.createElement("img")).src=e,t},_getIconUrl:function(e){return Vt&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}}),Hi=Vi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return Hi.imagePath||(Hi.imagePath=this._detectIconPath()),(this.options.imagePath||Hi.imagePath)+Vi.prototype._getIconUrl.call(this,e)},_detectIconPath:function(){var e=z("div","leaflet-default-icon-path",document.body),t=F(e,"background-image")||F(e,"backgroundImage");return document.body.removeChild(e),null===t||0!==t.indexOf("url")?"":t.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Fi=xi.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new Pi(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Q(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&J(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,i=t._map,n=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,a=ne(t._icon),o=i.getPixelBounds(),s=i.getPixelOrigin(),l=x(o.min._subtract(s).add(r),o.max._subtract(s).subtract(r));if(!l.contains(a)){var c=w((Math.max(l.max.x,a.x)-l.max.x)/(o.max.x-l.max.x)-(Math.min(l.min.x,a.x)-l.min.x)/(o.min.x-l.min.x),(Math.max(l.max.y,a.y)-l.max.y)/(o.max.y-l.max.y)-(Math.min(l.min.y,a.y)-l.min.y)/(o.min.y-l.min.y)).multiplyBy(n);i.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),ie(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=m(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(v(this._panRequest),this._panRequest=m(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,i=t._shadow,n=ne(t._icon),r=t._map.layerPointToLatLng(n);i&&ie(i,n),t._latlng=r,e.latlng=r,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){v(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),zi=ji.extend({options:{icon:new Hi,interactive:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",bubblingMouseEvents:!1},initialize:function(e,t){d(this,t),this._latlng=k(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=k(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=e.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,e.title&&(i.title=e.title),"IMG"===i.tagName&&(i.alt=e.alt||"")),Q(i,t),e.keyboard&&(i.tabIndex="0"),this._icon=i,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var r=e.icon.createShadow(this._shadow),a=!1;r!==this._shadow&&(this._removeShadow(),a=!0),r&&(Q(r,t),r.alt=""),this._shadow=r,e.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&a&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),U(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&U(this._shadow),this._shadow=null},_setPos:function(e){ie(this._icon,e),this._shadow&&ie(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon.style.zIndex=this._zIndex+e},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(Q(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Fi)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Fi(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;K(this._icon,e),this._shadow&&K(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),Ui=ji.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return d(this,e),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Wi=Ui.extend({options:{fill:!0,radius:10},initialize:function(e,t){d(this,t),this._latlng=k(e),this._radius=this.options.radius},setLatLng:function(e){return this._latlng=k(e),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return Ui.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,i=this._clickTolerance(),n=[e+i,t+i];this._pxBounds=new y(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),Gi=Wi.extend({initialize:function(e,i,n){if("number"==typeof i&&(i=t({},n,{radius:i})),d(this,i),this._latlng=k(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new C(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:Ui.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===at.distance){var r=Math.PI/180,a=this._mRadius/at.R/r,o=i.project([t+a,e]),s=i.project([t-a,e]),l=o.add(s).divideBy(2),c=i.unproject(l).lat,d=Math.acos((Math.cos(a*r)-Math.sin(t*r)*Math.sin(c*r))/(Math.cos(t*r)*Math.cos(c*r)))/r;(isNaN(d)||0===d)&&(d=a/Math.cos(Math.PI/180*t)),this._point=l.subtract(i.getPixelOrigin()),this._radius=isNaN(d)?0:l.x-i.project([c,e-d]).x,this._radiusY=l.y-o.y}else{var h=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(h).x}this._updateBounds()}}),qi=Ui.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){d(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t,i,n=1/0,r=null,a=Ee,o=0,s=this._parts.length;o<s;o++)for(var l=this._parts[o],c=1,d=l.length;c<d;c++){var h=a(e,t=l[c-1],i=l[c],!0);h<n&&(n=h,r=a(e,t,i))}return r&&(r.distance=Math.sqrt(n)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var e,t,i,n,r,a,o,s=this._rings[0],l=s.length;if(!l)return null;for(e=0,t=0;e<l-1;e++)t+=s[e].distanceTo(s[e+1])/2;if(0===t)return this._map.layerPointToLatLng(s[0]);for(e=0,n=0;e<l-1;e++)if(r=s[e],a=s[e+1],(n+=i=r.distanceTo(a))>t)return o=(n-t)/i,this._map.layerPointToLatLng([a.x-o*(a.x-r.x),a.y-o*(a.y-r.y)])},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=k(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new C,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return Me(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],i=Me(e),n=0,r=e.length;n<r;n++)i?(t[n]=k(e[n]),this._bounds.extend(t[n])):t[n]=this._convertLatLngs(e[n]);return t},_project:function(){var e=new y;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e);var t=this._clickTolerance(),i=new b(t,t);this._bounds.isValid()&&e.isValid()&&(e.min._subtract(i),e.max._add(i),this._pxBounds=e)},_projectLatlngs:function(e,t,i){var n,r,a=e[0]instanceof T,o=e.length;if(a){for(r=[],n=0;n<o;n++)r[n]=this._map.latLngToLayerPoint(e[n]),i.extend(r[n]);t.push(r)}else for(n=0;n<o;n++)this._projectLatlngs(e[n],t,i)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else{var t,i,n,r,a,o,s,l=this._parts;for(t=0,n=0,r=this._rings.length;t<r;t++)for(i=0,a=(s=this._rings[t]).length;i<a-1;i++)(o=ke(s[i],s[i+1],e,i,!0))&&(l[n]=l[n]||[],l[n].push(o[0]),o[1]===s[i+1]&&i!==a-2||(l[n].push(o[1]),n++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,i=0,n=e.length;i<n;i++)e[i]=Se(e[i],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var i,n,r,a,o,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(i=0,a=this._parts.length;i<a;i++)for(n=0,r=(o=(s=this._parts[i]).length)-1;n<o;r=n++)if((t||0!==n)&&Te(e,s[r],s[n])<=l)return!0;return!1}});qi._flat=Oe;var Yi=qi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var e,t,i,n,r,a,o,s,l,c=this._rings[0],d=c.length;if(!d)return null;for(a=o=s=0,e=0,t=d-1;e<d;t=e++)i=c[e],n=c[t],r=i.y*n.x-n.y*i.x,o+=(i.x+n.x)*r,s+=(i.y+n.y)*r,a+=3*r;return l=0===a?c[0]:[o/a,s/a],this._map.layerPointToLatLng(l)},_convertLatLngs:function(e){var t=qi.prototype._convertLatLngs.call(this,e),i=t.length;return i>=2&&t[0]instanceof T&&t[0].equals(t[i-1])&&t.pop(),t},_setLatLngs:function(e){qi.prototype._setLatLngs.call(this,e),Me(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Me(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,i=new b(t,t);if(e=new y(e.min.subtract(i),e.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else for(var n,r=0,a=this._rings.length;r<a;r++)(n=Ie(this._rings[r],e,!0)).length&&this._parts.push(n)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t,i,n,r,a,o,s,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(r=0,s=this._parts.length;r<s;r++)for(a=0,o=(l=(t=this._parts[r]).length)-1;a<l;o=a++)i=t[a],n=t[o],i.y>e.y!=n.y>e.y&&e.x<(n.x-i.x)*(e.y-i.y)/(n.y-i.y)+i.x&&(c=!c);return c||qi.prototype._containsPoint.call(this,e,!0)}}),Qi=Bi.extend({initialize:function(e,t){d(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,i,n,r=Qe(e)?e:e.features;if(r){for(t=0,i=r.length;t<i;t++)((n=r[t]).geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var a=this.options;if(a.filter&&!a.filter(e))return this;var o=Ne(e,a);return o?(o.feature=Ve(e),o.defaultOptions=o.options,this.resetStyle(o),a.onEachFeature&&a.onEachFeature(e,o),this.addLayer(o)):this},resetStyle:function(e){return e.options=t({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this},setStyle:function(e){return this.eachLayer((function(t){this._setLayerStyle(t,e)}),this)},_setLayerStyle:function(e,t){"function"==typeof t&&(t=t(e.feature)),e.setStyle&&e.setStyle(t)}}),Ji={toGeoJSON:function(e){return Be(this,{type:"Point",coordinates:je(this.getLatLng(),e)})}};zi.include(Ji),Gi.include(Ji),Wi.include(Ji),qi.include({toGeoJSON:function(e){var t=!Me(this._latlngs);return Be(this,{type:(t?"Multi":"")+"LineString",coordinates:$e(this._latlngs,t?1:0,!1,e)})}}),Yi.include({toGeoJSON:function(e){var t=!Me(this._latlngs),i=t&&!Me(this._latlngs[0]),n=$e(this._latlngs,i?2:t?1:0,!0,e);return t||(n=[n]),Be(this,{type:(i?"Multi":"")+"Polygon",coordinates:n})}}),$i.include({toMultiPoint:function(e){var t=[];return this.eachLayer((function(i){t.push(i.toGeoJSON(e).geometry.coordinates)})),Be(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(e);var i="GeometryCollection"===t,n=[];return this.eachLayer((function(t){if(t.toGeoJSON){var r=t.toGeoJSON(e);if(i)n.push(r.geometry);else{var a=Ve(r);"FeatureCollection"===a.type?n.push.apply(n,a.features):n.push(a)}}})),i?Be(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}});var Zi=He,Xi=ji.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,i){this._url=e,this._bounds=S(t),d(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Q(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){U(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&G(this._image),this},bringToBack:function(){return this._map&&q(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=S(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e="IMG"===this._url.tagName,t=this._image=e?this._url:z("img");Q(t,"leaflet-image-layer"),this._zoomAnimated&&Q(t,"leaflet-zoom-animated"),this.options.className&&Q(t,this.options.className),t.onselectstart=o,t.onmousemove=o,t.onload=i(this.fire,this,"load"),t.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(t.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e?this._url=t.src:(t.src=this._url,t.alt=this.options.alt)},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;te(this._image,i,t)},_reset:function(){var e=this._image,t=new y(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=t.getSize();ie(e,t.min),e.style.width=i.x+"px",e.style.height=i.y+"px"},_updateOpacity:function(){K(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)}}),Ki=Xi.extend({options:{autoplay:!0,loop:!0},_initImage:function(){var e="VIDEO"===this._url.tagName,t=this._image=e?this._url:z("video");if(Q(t,"leaflet-image-layer"),this._zoomAnimated&&Q(t,"leaflet-zoom-animated"),t.onselectstart=o,t.onmousemove=o,t.onloadeddata=i(this.fire,this,"load"),e){for(var n=t.getElementsByTagName("source"),r=[],a=0;a<n.length;a++)r.push(n[a].src);this._url=n.length>0?r:[t.src]}else{Qe(this._url)||(this._url=[this._url]),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop;for(var s=0;s<this._url.length;s++){var l=z("source");l.src=this._url[s],t.appendChild(l)}}}}),en=ji.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(e,t){d(this,e),this._source=t},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&K(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&K(this._container,1),this.bringToFront()},onRemove:function(e){e._fadeAnimated?(K(this._container,0),this._removeTimeout=setTimeout(i(U,void 0,this._container),200)):U(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=k(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&G(this._container),this},bringToBack:function(){return this._map&&q(this._container),this},_updateContent:function(){if(this._content){var e=this._contentNode,t="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof t)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=w(this.options.offset),i=this._getAnchor();this._zoomAnimated?ie(this._container,e.add(i)):t=t.add(e).add(i);var n=this._containerBottom=-t.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=n+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}}),tn=en.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return e.openPopup(this),this},onAdd:function(e){en.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ui||this._source.on("preclick",fe))},onRemove:function(e){en.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ui||this._source.off("preclick",fe))},getEvents:function(){var e=en.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this._close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var e="leaflet-popup",t=this._container=z("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=z("div",e+"-content-wrapper",t);if(this._contentNode=z("div",e+"-content",i),me(i),ge(this._contentNode),de(i,"contextmenu",fe),this._tipContainer=z("div",e+"-tip-container",t),this._tip=z("div",e+"-tip",this._tipContainer),this.options.closeButton){var n=this._closeButton=z("a",e+"-close-button",t);n.href="#close",n.innerHTML="&#215;",de(n,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var i=e.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),t.width=i+1+"px",t.whiteSpace="",t.height="";var n=e.offsetHeight,r=this.options.maxHeight;r&&n>r?(t.height=r+"px",Q(e,"leaflet-popup-scrolled")):J(e,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),i=this._getAnchor();ie(this._container,t.add(i))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var e=this._map,t=parseInt(F(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+t,n=this._containerWidth,r=new b(this._containerLeft,-i-this._containerBottom);r._add(ne(this._container));var a=e.layerPointToContainerPoint(r),o=w(this.options.autoPanPadding),s=w(this.options.autoPanPaddingTopLeft||o),l=w(this.options.autoPanPaddingBottomRight||o),c=e.getSize(),d=0,h=0;a.x+n+l.x>c.x&&(d=a.x+n-c.x+l.x),a.x-d-s.x<0&&(d=a.x-s.x),a.y+i+l.y>c.y&&(h=a.y+i-c.y+l.y),a.y-h-s.y<0&&(h=a.y-s.y),(d||h)&&e.fire("autopanstart").panBy([d,h])}},_onCloseButtonClick:function(e){this._close(),_e(e)},_getAnchor:function(){return w(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});gi.mergeOptions({closePopupOnClick:!0}),gi.include({openPopup:function(e,t,i){return e instanceof tn||(e=new tn(i).setContent(e)),t&&e.setLatLng(t),this.hasLayer(e)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=e,this.addLayer(e))},closePopup:function(e){return e&&e!==this._popup||(e=this._popup,this._popup=null),e&&this.removeLayer(e),this}}),ji.include({bindPopup:function(e,t){return e instanceof tn?(d(e,t),this._popup=e,e._source=this):(this._popup&&!t||(this._popup=new tn(t,this)),this._popup.setContent(e)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e,t){if(e instanceof ji||(t=e,e=this),e instanceof Bi)for(var i in this._layers){e=this._layers[i];break}return t||(t=e.getCenter?e.getCenter():e.getLatLng()),this._popup&&this._map&&(this._popup._source=e,this._popup.update(),this._map.openPopup(this._popup,t)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(e){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(e)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){var t=e.layer||e.target;this._popup&&this._map&&(_e(e),t instanceof Ui?this.openPopup(e.layer||e.target,e.latlng):this._map.hasLayer(this._popup)&&this._popup._source===t?this.closePopup():this.openPopup(t,e.latlng))},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){13===e.originalEvent.keyCode&&this._openPopup(e)}});var nn=en.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(e){en.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(e){en.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var e=en.prototype.getEvents.call(this);return jt&&!this.options.permanent&&(e.preclick=this._close),e},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var e="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=z("div",e)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t=this._map,i=this._container,n=t.latLngToContainerPoint(t.getCenter()),r=t.layerPointToContainerPoint(e),a=this.options.direction,o=i.offsetWidth,s=i.offsetHeight,l=w(this.options.offset),c=this._getAnchor();"top"===a?e=e.add(w(-o/2+l.x,-s+l.y+c.y,!0)):"bottom"===a?e=e.subtract(w(o/2-l.x,-l.y,!0)):"center"===a?e=e.subtract(w(o/2+l.x,s/2-c.y+l.y,!0)):"right"===a||"auto"===a&&r.x<n.x?(a="right",e=e.add(w(l.x+c.x,c.y-s/2+l.y,!0))):(a="left",e=e.subtract(w(o+c.x-l.x,s/2-c.y-l.y,!0))),J(i,"leaflet-tooltip-right"),J(i,"leaflet-tooltip-left"),J(i,"leaflet-tooltip-top"),J(i,"leaflet-tooltip-bottom"),Q(i,"leaflet-tooltip-"+a),ie(i,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&K(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return w(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});gi.include({openTooltip:function(e,t,i){return e instanceof nn||(e=new nn(i).setContent(e)),t&&e.setLatLng(t),this.hasLayer(e)?this:this.addLayer(e)},closeTooltip:function(e){return e&&this.removeLayer(e),this}}),ji.include({bindTooltip:function(e,t){return e instanceof nn?(d(e,t),this._tooltip=e,e._source=this):(this._tooltip&&!t||(this._tooltip=new nn(t,this)),this._tooltip.setContent(e)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(e||!this._tooltipHandlersAdded){var t=e?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),jt&&(i.click=this._openTooltip)),this[t](i),this._tooltipHandlersAdded=!e}},openTooltip:function(e,t){if(e instanceof ji||(t=e,e=this),e instanceof Bi)for(var i in this._layers){e=this._layers[i];break}return t||(t=e.getCenter?e.getCenter():e.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=e,this._tooltip.update(),this._map.openTooltip(this._tooltip,t),this._tooltip.options.interactive&&this._tooltip._container&&(Q(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(J(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(e){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(e)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_openTooltip:function(e){var t=e.layer||e.target;this._tooltip&&this._map&&this.openTooltip(t,this._tooltip.options.sticky?e.latlng:void 0)},_moveTooltip:function(e){var t,i,n=e.latlng;this._tooltip.options.sticky&&e.originalEvent&&(t=this._map.mouseEventToContainerPoint(e.originalEvent),i=this._map.containerPointToLayerPoint(t),n=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(n)}});var rn=Vi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&"DIV"===e.tagName?e:document.createElement("div"),i=this.options;if(t.innerHTML=!1!==i.html?i.html:"",i.bgPos){var n=w(i.bgPos);t.style.backgroundPosition=-n.x+"px "+-n.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});Vi.Default=Hi;var an=ji.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ot,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){d(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),U(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(G(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(q(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=r(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof b?e:new b(e,e)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t,i=this.getPane().children,n=-e(-1/0,1/0),r=0,a=i.length;r<a;r++)t=i[r].style.zIndex,i[r]!==this._container&&t&&(n=e(n,+t));isFinite(n)&&(this.options.zIndex=n+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ft){K(this._container,this.options.opacity);var e=+new Date,t=!1,i=!1;for(var n in this._tiles){var r=this._tiles[n];if(r.current&&r.loaded){var a=Math.min(1,(e-r.loaded)/200);K(r.el,a),a<1?t=!0:(r.active?i=!0:this._onOpaqueTile(r),r.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),t&&(v(this._fadeFrame),this._fadeFrame=m(this._updateOpacity,this))}},_onOpaqueTile:o,_initContainer:function(){this._container||(this._container=z("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(void 0!==e){for(var i in this._levels)this._levels[i].el.children.length||i===e?(this._levels[i].el.style.zIndex=t-Math.abs(e-i),this._onUpdateLevel(i)):(U(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var n=this._levels[e],r=this._map;return n||((n=this._levels[e]={}).el=z("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=t,n.origin=r.project(r.unproject(r.getPixelOrigin()),e).round(),n.zoom=e,this._setZoomTransform(n,r.getCenter(),r.getZoom()),n.el.offsetWidth,this._onCreateLevel(n)),this._level=n,n}},_onUpdateLevel:o,_onRemoveLevel:o,_onCreateLevel:o,_pruneTiles:function(){if(this._map){var e,t,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom)this._removeAllTiles();else{for(e in this._tiles)(t=this._tiles[e]).retain=t.current;for(e in this._tiles)if((t=this._tiles[e]).current&&!t.active){var n=t.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)U(this._levels[e].el),this._onRemoveLevel(e),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,i,n){var r=Math.floor(e/2),a=Math.floor(t/2),o=i-1,s=new b(+r,+a);s.z=+o;var l=this._tileCoordsToKey(s),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),o>n&&this._retainParent(r,a,o,n))},_retainChildren:function(e,t,i,n){for(var r=2*e;r<2*e+2;r++)for(var a=2*t;a<2*t+2;a++){var o=new b(r,a);o.z=i+1;var s=this._tileCoordsToKey(o),l=this._tiles[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),i+1<n&&this._retainChildren(r,a,i+1,n))}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return void 0!==t.minNativeZoom&&e<t.minNativeZoom?t.minNativeZoom:void 0!==t.maxNativeZoom&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,i,n){var r=this._clampZoom(Math.round(t));(void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom)&&(r=void 0);var a=this.options.updateWhenZooming&&r!==this._tileZoom;n&&!a||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(e),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var i in this._levels)this._setZoomTransform(this._levels[i],e,t)},_setZoomTransform:function(e,t,i){var n=this._map.getZoomScale(i,e.zoom),r=e.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(t,i)).round();Mt?te(e.el,r,n):ie(e.el,r)},_resetGrid:function(){var e=this._map,t=e.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],n).x/i.x),Math.ceil(e.project([0,t.wrapLng[1]],n).x/i.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],n).y/i.x),Math.ceil(e.project([t.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(e){var t=this._map,i=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),n=t.getZoomScale(i,this._tileZoom),r=t.project(e,this._tileZoom).floor(),a=t.getSize().divideBy(2*n);return new y(r.subtract(a),r.add(a))},_update:function(e){var t=this._map;if(t){var i=this._clampZoom(t.getZoom());if(void 0===e&&(e=t.getCenter()),void 0!==this._tileZoom){var n=this._getTiledPixelBounds(e),r=this._pxBoundsToTileRange(n),a=r.getCenter(),o=[],s=this.options.keepBuffer,l=new y(r.getBottomLeft().subtract([s,-s]),r.getTopRight().add([s,-s]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var d=this._tiles[c].coords;d.z===this._tileZoom&&l.contains(new b(d.x,d.y))||(this._tiles[c].current=!1)}if(Math.abs(i-this._tileZoom)>1)this._setView(e,i);else{for(var h=r.min.y;h<=r.max.y;h++)for(var u=r.min.x;u<=r.max.x;u++){var p=new b(u,h);if(p.z=this._tileZoom,this._isValidTile(p)){var f=this._tiles[this._tileCoordsToKey(p)];f?f.current=!0:o.push(p)}}if(o.sort((function(e,t){return e.distanceTo(a)-t.distanceTo(a)})),0!==o.length){this._loading||(this._loading=!0,this.fire("loading"));var g=document.createDocumentFragment();for(u=0;u<o.length;u++)this._addTile(o[u],g);this._level.el.appendChild(g)}}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var i=this._globalTileRange;if(!t.wrapLng&&(e.x<i.min.x||e.x>i.max.x)||!t.wrapLat&&(e.y<i.min.y||e.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(e);return S(this.options.bounds).overlaps(n)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,i=this.getTileSize(),n=e.scaleBy(i),r=n.add(i);return[t.unproject(n,e.z),t.unproject(r,e.z)]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),i=new C(t[0],t[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),i=new b(+t[0],+t[1]);return i.z=+t[2],i},_removeTile:function(e){var t=this._tiles[e];t&&(wt||t.el.setAttribute("src",Je),U(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){Q(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=o,e.onmousemove=o,ft&&this.options.opacity<1&&K(e,this.options.opacity),vt&&!_t&&(e.style.WebkitBackfaceVisibility="hidden")},_addTile:function(e,t){var n=this._getTilePos(e),r=this._tileCoordsToKey(e),a=this.createTile(this._wrapCoords(e),i(this._tileReady,this,e));this._initTile(a),this.createTile.length<2&&m(i(this._tileReady,this,e,null,a)),ie(a,n),this._tiles[r]={el:a,coords:e,current:!0},t.appendChild(a),this.fire("tileloadstart",{tile:a,coords:e})},_tileReady:function(e,t,n){if(this._map&&n.getAttribute("src")!==Je){t&&this.fire("tileerror",{error:t,tile:n,coords:e});var r=this._tileCoordsToKey(e);(n=this._tiles[r])&&(n.loaded=+new Date,this._map._fadeAnimated?(K(n.el,0),v(this._fadeFrame),this._fadeFrame=m(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),t||(Q(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ft||!this._map._fadeAnimated?m(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))}},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new b(this._wrapX?a(e.x,this._wrapX):e.x,this._wrapY?a(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new y(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}}),on=an.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(e,t){this._url=e,(t=d(this,t)).detectRetina&&Vt&&t.maxZoom>0&&(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom++):(t.zoomOffset++,t.maxZoom--),t.minZoom=Math.max(0,t.minZoom)),"string"==typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),vt||this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url=e,t||this.redraw(),this},createTile:function(e,t){var n=document.createElement("img");return de(n,"load",i(this._tileOnLoad,this,t,n)),de(n,"error",i(this._tileOnError,this,t,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(e),n},getTileUrl:function(e){var i={r:Vt?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-e.y;this.options.tms&&(i.y=n),i["-y"]=n}return u(this._url,t(i,this.options))},_tileOnLoad:function(e,t){ft?setTimeout(i(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,i){var n=this.options.errorTileUrl;n&&t.getAttribute("src")!==n&&(t.src=n),e(i,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom;return this.options.zoomReverse&&(e=t-e),e+this.options.zoomOffset},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)this._tiles[e].coords.z!==this._tileZoom&&((t=this._tiles[e].el).onload=o,t.onerror=o,t.complete||(t.src=Je,U(t),delete this._tiles[e]))}}),sn=on.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,i){this._url=e;var n=t({},this.defaultWmsParams);for(var r in i)r in this.options||(n[r]=i[r]);var a=(i=d(this,i)).detectRetina&&Vt?2:1,o=this.getTileSize();n.width=o.x*a,n.height=o.y*a,this.wmsParams=n},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,on.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),i=this._crs,n=x(i.project(t[0]),i.project(t[1])),r=n.min,a=n.max,o=(this._wmsVersion>=1.3&&this._crs===Li?[r.y,r.x,a.y,a.x]:[r.x,r.y,a.x,a.y]).join(","),s=on.prototype.getTileUrl.call(this,e);return s+h(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+o},setParams:function(e,i){return t(this.wmsParams,e),i||this.redraw(),this}});on.WMS=sn,Fe.wms=function(e,t){return new sn(e,t)};var ln=ji.extend({options:{padding:.1,tolerance:0},initialize:function(e){d(this,e),n(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&Q(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var i=this._map.getZoomScale(t,this._zoom),n=ne(this._container),r=this._map.getSize().multiplyBy(.5+this.options.padding),a=this._map.project(this._center,t),o=this._map.project(e,t).subtract(a),s=r.multiplyBy(-i).add(n).add(r).subtract(o);Mt?te(this._container,s,i):ie(this._container,s)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),i=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new y(i,i.add(t.multiplyBy(1+2*e)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),cn=ln.extend({getEvents:function(){var e=ln.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ln.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");de(e,"mousemove",r(this._onMouseMove,32,this),this),de(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),de(e,"mouseout",this._handleMouseOut,this),this._ctx=e.getContext("2d")},_destroyContainer:function(){v(this._redrawRequest),delete this._ctx,U(this._container),he(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var e in this._redrawBounds=null,this._layers)this._layers[e]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},ln.prototype._update.call(this);var e=this._bounds,t=this._container,i=e.getSize(),n=Vt?2:1;ie(t,e.min),t.width=n*i.x,t.height=n*i.y,t.style.width=i.x+"px",t.style.height=i.y+"px",Vt&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){ln.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[n(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,i=t.next,r=t.prev;i?i.prev=r:this._drawLast=r,r?r.next=i:this._drawFirst=i,delete this._drawnLayers[e._leaflet_id],delete e._order,delete this._layers[n(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if("string"==typeof e.options.dashArray){var t,i=e.options.dashArray.split(","),n=[];for(t=0;t<i.length;t++)n.push(Number(i[t]));e.options._dashArray=n}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||m(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new y,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var i=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)e=n.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var i,n,r,a,o=e._parts,s=o.length,l=this._ctx;if(s){for(this._drawnLayers[e._leaflet_id]=e,l.beginPath(),i=0;i<s;i++){for(n=0,r=o[i].length;n<r;n++)a=o[i][n],l[n?"lineTo":"moveTo"](a.x,a.y);t&&l.closePath()}this._fillStroke(l,e)}}},_updateCircle:function(e){if(this._drawing&&!e._empty()){var t=e._point,i=this._ctx,n=Math.max(Math.round(e._radius),1),r=(Math.max(Math.round(e._radiusY),1)||n)/n;this._drawnLayers[e._leaflet_id]=e,1!==r&&(i.save(),i.scale(1,r)),i.beginPath(),i.arc(t.x,t.y/r,n,0,2*Math.PI,!1),1!==r&&i.restore(),this._fillStroke(i,e)}},_fillStroke:function(e,t){var i=t.options;i.fill&&(e.globalAlpha=i.fillOpacity,e.fillStyle=i.fillColor||i.color,e.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=i.opacity,e.lineWidth=i.weight,e.strokeStyle=i.color,e.lineCap=i.lineCap,e.lineJoin=i.lineJoin,e.stroke())},_onClick:function(e){for(var t,i,n=this._map.mouseEventToLayerPoint(e),r=this._drawFirst;r;r=r.next)(t=r.layer).options.interactive&&t._containsPoint(n)&&!this._map._draggableMoved(t)&&(i=t);i&&(ye(e),this._fireEvent([i],e))},_onMouseMove:function(e){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(J(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(e,t){for(var i,n,r=this._drawFirst;r;r=r.next)(i=r.layer).options.interactive&&i._containsPoint(t)&&(n=i);n!==this._hoveredLayer&&(this._handleMouseOut(e),n&&(Q(this._container,"leaflet-interactive"),this._fireEvent([n],e,"mouseover"),this._hoveredLayer=n)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],e)},_fireEvent:function(e,t,i){this._map._fireDOMEvent(t,i||t.type,e)},_bringToFront:function(e){var t=e._order,i=t.next,n=t.prev;i&&(i.prev=n,n?n.next=i:i&&(this._drawFirst=i),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e))},_bringToBack:function(e){var t=e._order,i=t.next,n=t.prev;n&&(n.next=i,i?i.prev=n:n&&(this._drawLast=n),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e))}}),dn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch(e){return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),hn={_initContainer:function(){this._container=z("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ln.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=dn("shape");Q(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=dn("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[n(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;U(t),e.removeInteractiveTarget(t),delete this._layers[n(e)]},_updateStyle:function(e){var t=e._stroke,i=e._fill,n=e.options,r=e._container;r.stroked=!!n.stroke,r.filled=!!n.fill,n.stroke?(t||(t=e._stroke=dn("stroke")),r.appendChild(t),t.weight=n.weight+"px",t.color=n.color,t.opacity=n.opacity,n.dashArray?t.dashStyle=Qe(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=n.lineCap.replace("butt","flat"),t.joinstyle=n.lineJoin):t&&(r.removeChild(t),e._stroke=null),n.fill?(i||(i=e._fill=dn("fill")),r.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(r.removeChild(i),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),i=Math.round(e._radius),n=Math.round(e._radiusY||i);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+i+","+n+" 0,23592600")},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){G(e._container)},_bringToBack:function(e){q(e._container)}},un=zt?dn:D,pn=ln.extend({getEvents:function(){var e=ln.prototype.getEvents.call(this);return e.zoomstart=this._onZoomStart,e},_initContainer:function(){this._container=un("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=un("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){U(this._container),he(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){ln.prototype._update.call(this);var e=this._bounds,t=e.getSize(),i=this._container;this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,i.setAttribute("width",t.x),i.setAttribute("height",t.y)),ie(i,e.min),i.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=un("path");e.options.className&&Q(t,e.options.className),e.options.interactive&&Q(t,"leaflet-interactive"),this._updateStyle(e),this._layers[n(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){U(e._path),e.removeInteractiveTarget(e._path),delete this._layers[n(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,i=e.options;t&&(i.stroke?(t.setAttribute("stroke",i.color),t.setAttribute("stroke-opacity",i.opacity),t.setAttribute("stroke-width",i.weight),t.setAttribute("stroke-linecap",i.lineCap),t.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?t.setAttribute("stroke-dasharray",i.dashArray):t.removeAttribute("stroke-dasharray"),i.dashOffset?t.setAttribute("stroke-dashoffset",i.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),i.fill?(t.setAttribute("fill",i.fillColor||i.color),t.setAttribute("fill-opacity",i.fillOpacity),t.setAttribute("fill-rule",i.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,E(e._parts,t))},_updateCircle:function(e){var t=e._point,i=Math.max(Math.round(e._radius),1),n="a"+i+","+(Math.max(Math.round(e._radiusY),1)||i)+" 0 1,0 ",r=e._empty()?"M0 0":"M"+(t.x-i)+","+t.y+n+2*i+",0 "+n+2*-i+",0 ";this._setPath(e,r)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){G(e._path)},_bringToBack:function(e){q(e._path)}});zt&&pn.include(hn),gi.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if("overlayPane"===e||void 0===e)return!1;var t=this._paneRenderers[e];return void 0===t&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&ze(e)||Ue(e)}});var fn=Yi.extend({initialize:function(e,t){Yi.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return[(e=S(e)).getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});pn.create=un,pn.pointsToPath=E,Qi.geometryToLayer=Ne,Qi.coordsToLatLng=Le,Qi.coordsToLatLngs=Re,Qi.latLngToCoords=je,Qi.latLngsToCoords=$e,Qi.getFeature=Be,Qi.asFeature=Ve,gi.mergeOptions({boxZoom:!0});var gn=xi.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){de(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){he(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){U(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||1!==e.which&&1!==e.button)return!1;this._clearDeferredResetState(),this._resetState(),st(),re(),this._startPoint=this._map.mouseEventToContainerPoint(e),de(document,{contextmenu:_e,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=z("div","leaflet-zoom-box",this._container),Q(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new y(this._point,this._startPoint),i=t.getSize();ie(this._box,t.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(U(this._box),J(this._container,"leaflet-crosshair")),lt(),ae(),he(document,{contextmenu:_e,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if((1===e.which||1===e.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var t=new C(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){27===e.keyCode&&this._finish()}});gi.addInitHook("addHandler","boxZoom",gn),gi.mergeOptions({doubleClickZoom:!0});var mn=xi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,i=t.getZoom(),n=t.options.zoomDelta,r=e.originalEvent.shiftKey?i-n:i+n;"center"===t.options.doubleClickZoom?t.setZoom(r):t.setZoomAround(e.containerPoint,r)}});gi.addInitHook("addHandler","doubleClickZoom",mn),gi.mergeOptions({dragging:!0,inertia:!_t,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var vn=xi.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new Pi(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}Q(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){J(this._map._container,"leaflet-grab"),J(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=S(this._map.options.maxBounds);this._offsetLimit=x(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,r=(n-t+i)%e+t-i,a=(n+t+i)%e-t-i,o=Math.abs(r+i)<Math.abs(a+i)?r:a;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=o},_onDragEnd:function(e){var t=this._map,i=t.options,n=!i.inertia||this._times.length<2;if(t.fire("dragend",e),n)t.fire("moveend");else{this._prunePositions(+new Date);var r=this._lastPos.subtract(this._positions[0]),a=(this._lastTime-this._times[0])/1e3,o=i.easeLinearity,s=r.multiplyBy(o/a),l=s.distanceTo([0,0]),c=Math.min(i.inertiaMaxSpeed,l),d=s.multiplyBy(c/l),h=c/(i.inertiaDeceleration*o),u=d.multiplyBy(-h/2).round();u.x||u.y?(u=t._limitOffset(u,t.options.maxBounds),m((function(){t.panBy(u,{duration:h,easeLinearity:o,noMoveStart:!0,animate:!0})}))):t.fire("moveend")}}});gi.addInitHook("addHandler","dragging",vn),gi.mergeOptions({keyboard:!0,keyboardPanDelta:80});var _n=xi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),de(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),he(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,i=e.scrollTop||t.scrollTop,n=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(n,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t,i,n=this._panKeys={},r=this.keyCodes;for(t=0,i=r.left.length;t<i;t++)n[r.left[t]]=[-1*e,0];for(t=0,i=r.right.length;t<i;t++)n[r.right[t]]=[e,0];for(t=0,i=r.down.length;t<i;t++)n[r.down[t]]=[0,e];for(t=0,i=r.up.length;t<i;t++)n[r.up[t]]=[0,-1*e]},_setZoomDelta:function(e){var t,i,n=this._zoomKeys={},r=this.keyCodes;for(t=0,i=r.zoomIn.length;t<i;t++)n[r.zoomIn[t]]=e;for(t=0,i=r.zoomOut.length;t<i;t++)n[r.zoomOut[t]]=-e},_addHooks:function(){de(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){he(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t,i=e.keyCode,n=this._map;if(i in this._panKeys)n._panAnim&&n._panAnim._inProgress||(t=this._panKeys[i],e.shiftKey&&(t=w(t).multiplyBy(3)),n.panBy(t),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds));else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i||!n._popup||!n._popup.options.closeOnEscapeKey)return;n.closePopup()}_e(e)}}});gi.addInitHook("addHandler","keyboard",_n),gi.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var bn=xi.extend({addHooks:function(){de(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){he(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=we(e),n=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),r),_e(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),i=this._map.options.zoomSnap||0;e._stop();var n=this._delta/(4*this._map.options.wheelPxPerZoomLevel),r=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,a=i?Math.ceil(r/i)*i:r,o=e._limitZoom(t+(this._delta>0?a:-a))-t;this._delta=0,this._startTime=null,o&&("center"===e.options.scrollWheelZoom?e.setZoom(t+o):e.setZoomAround(this._lastMousePos,t+o))}});gi.addInitHook("addHandler","scrollWheelZoom",bn),gi.mergeOptions({tap:!0,tapTolerance:15});var wn=xi.extend({addHooks:function(){de(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){he(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(e.touches){if(ve(e),this._fireClick=!0,e.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var t=e.touches[0],n=t.target;this._startPos=this._newPos=new b(t.clientX,t.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&Q(n,"leaflet-active"),this._holdTimeout=setTimeout(i((function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",t))}),this),1e3),this._simulateEvent("mousedown",t),de(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(e){if(clearTimeout(this._holdTimeout),he(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&e&&e.changedTouches){var t=e.changedTouches[0],i=t.target;i&&i.tagName&&"a"===i.tagName.toLowerCase()&&J(i,"leaflet-active"),this._simulateEvent("mouseup",t),this._isTapValid()&&this._simulateEvent("click",t)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(e){var t=e.touches[0];this._newPos=new b(t.clientX,t.clientY),this._simulateEvent("mousemove",t)},_simulateEvent:function(e,t){var i=document.createEvent("MouseEvents");i._simulated=!0,t.target._simulatedClick=!0,i.initMouseEvent(e,!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(i)}});jt&&!Rt&&gi.addInitHook("addHandler","tap",wn),gi.mergeOptions({touchZoom:jt&&!_t,bounceAtZoomLimits:!0});var yn=xi.extend({addHooks:function(){Q(this._map._container,"leaflet-touch-zoom"),de(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){J(this._map._container,"leaflet-touch-zoom"),he(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&!t._animatingZoom&&!this._zooming){var i=t.mouseEventToContainerPoint(e.touches[0]),n=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),"center"!==t.options.touchZoom&&(this._pinchStartLatLng=t.containerPointToLatLng(i.add(n)._divideBy(2))),this._startDist=i.distanceTo(n),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),de(document,"touchmove",this._onTouchMove,this),de(document,"touchend",this._onTouchEnd,this),ve(e)}},_onTouchMove:function(e){if(e.touches&&2===e.touches.length&&this._zooming){var t=this._map,n=t.mouseEventToContainerPoint(e.touches[0]),r=t.mouseEventToContainerPoint(e.touches[1]),a=n.distanceTo(r)/this._startDist;if(this._zoom=t.getScaleZoom(a,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&a<1||this._zoom>t.getMaxZoom()&&a>1)&&(this._zoom=t._limitZoom(this._zoom)),"center"===t.options.touchZoom){if(this._center=this._startLatLng,1===a)return}else{var o=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===a&&0===o.x&&0===o.y)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(o),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),v(this._animRequest);var s=i(t._move,t,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=m(s,this,!0),ve(e)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,v(this._animRequest),he(document,"touchmove",this._onTouchMove),he(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});gi.addInitHook("addHandler","touchZoom",yn),gi.BoxZoom=gn,gi.DoubleClickZoom=mn,gi.Drag=vn,gi.Keyboard=_n,gi.ScrollWheelZoom=bn,gi.Tap=wn,gi.TouchZoom=yn,Object.freeze=We,e.version="1.3.3+HEAD.b22aef4",e.Control=mi,e.control=vi,e.Browser=Ut,e.Evented=it,e.Mixin=Si,e.Util=et,e.Class=_,e.Handler=xi,e.extend=t,e.bind=i,e.stamp=n,e.setOptions=d,e.DomEvent=pi,e.DomUtil=ci,e.PosAnimation=fi,e.Draggable=Pi,e.LineUtil=Di,e.PolyUtil=Ei,e.Point=b,e.point=w,e.Bounds=y,e.bounds=x,e.Transformation=A,e.transformation=P,e.Projection=Ii,e.LatLng=T,e.latLng=k,e.LatLngBounds=C,e.latLngBounds=S,e.CRS=rt,e.GeoJSON=Qi,e.geoJSON=He,e.geoJson=Zi,e.Layer=ji,e.LayerGroup=$i,e.layerGroup=function(e,t){return new $i(e,t)},e.FeatureGroup=Bi,e.featureGroup=function(e){return new Bi(e)},e.ImageOverlay=Xi,e.imageOverlay=function(e,t,i){return new Xi(e,t,i)},e.VideoOverlay=Ki,e.videoOverlay=function(e,t,i){return new Ki(e,t,i)},e.DivOverlay=en,e.Popup=tn,e.popup=function(e,t){return new tn(e,t)},e.Tooltip=nn,e.tooltip=function(e,t){return new nn(e,t)},e.Icon=Vi,e.icon=function(e){return new Vi(e)},e.DivIcon=rn,e.divIcon=function(e){return new rn(e)},e.Marker=zi,e.marker=function(e,t){return new zi(e,t)},e.TileLayer=on,e.tileLayer=Fe,e.GridLayer=an,e.gridLayer=function(e){return new an(e)},e.SVG=pn,e.svg=Ue,e.Renderer=ln,e.Canvas=cn,e.canvas=ze,e.Path=Ui,e.CircleMarker=Wi,e.circleMarker=function(e,t){return new Wi(e,t)},e.Circle=Gi,e.circle=function(e,t,i){return new Gi(e,t,i)},e.Polyline=qi,e.polyline=function(e,t){return new qi(e,t)},e.Polygon=Yi,e.polygon=function(e,t){return new Yi(e,t)},e.Rectangle=fn,e.rectangle=function(e,t){return new fn(e,t)},e.Map=gi,e.map=function(e,t){return new gi(e,t)};var xn=window.L;e.noConflict=function(){return window.L=xn,this},window.L=e}(t)},function(e,t,i){!function(e){var t="a. b. c. d.".split(" "),i=function(e,i,n,r){return{url:["http://{S}tile.stamen.com/",e,"/{Z}/{X}/{Y}.",i].join(""),type:i,subdomains:t.slice(),minZoom:n,maxZoom:r,attribution:['Map tiles by <a href="http://stamen.com/">Stamen Design</a>, ','under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. ','Data by <a href="http://openstreetmap.org/">OpenStreetMap</a>, ','under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.'].join("")}},n={toner:i("toner","png",0,20),terrain:i("terrain","png",0,18),"terrain-classic":i("terrain-classic","png",0,18),watercolor:i("watercolor","jpg",1,18),"trees-cabs-crime":{url:"http://{S}.tiles.mapbox.com/v3/stamen.trees-cabs-crime/{Z}/{X}/{Y}.png",type:"png",subdomains:"a b c d".split(" "),minZoom:11,maxZoom:18,extent:[{lat:37.853,lon:-122.577},{lat:37.684,lon:-122.313}],attribution:['Design by Shawn Allen at <a href="http://stamen.com/">Stamen</a>.','Data courtesy of <a href="http://fuf.net/">FuF</a>,','<a href="http://www.yellowcabsf.com/">Yellow Cab</a>','&amp; <a href="http://sf-police.org/">SFPD</a>.'].join(" ")}};n["terrain-classic"].url="http://{S}tile.stamen.com/terrain/{Z}/{X}/{Y}.png",l("toner",["hybrid","labels","lines","background","lite"]),l("terrain",["background","labels","lines"]),s("toner",["2010"]),s("toner",["2011","2011-lines","2011-labels","2011-lite"]);for(var r=["toner","toner-hybrid","toner-labels","toner-lines","toner-background","toner-lite","terrain","terrain-background","terrain-lines","terrain-labels","terrain-classic"],a=0;a<r.length;a++){var o=r[a];n[o].retina=!0,n[o].attribution=['Map tiles by <a href="http://stamen.com/">Stamen Design</a>, ','under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. ','Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, ','under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.'].join("")}function s(e,t){for(var r=c(e),a=0;a<t.length;a++){var o=[e,t[a]].join("-");n[o]=i(o,r.type,r.minZoom,r.maxZoom),n[o].deprecated=!0}}function l(e,t,r){for(var a=c(e),o=0;o<t.length;o++){var s=[e,t[o]].join("-");n[s]=i(s,r||a.type,a.minZoom,a.maxZoom)}}function c(e){if(e in n){var t=n[e];return t.deprecated&&console&&console.warn&&console.warn(e+" is a deprecated style; it will be redirected to its replacement. For performance improvements, please change your reference."),t}throw"No such provider ("+e+")"}if(e.stamen=e.stamen||{},e.stamen.tile=e.stamen.tile||{},e.stamen.tile.providers=n,e.stamen.tile.getProvider=c,"object"===typeof MM){var d="function"===typeof MM.Template?MM.Template:MM.TemplatedMapProvider;MM.StamenTileLayer=function(e){var t=c(e);this._provider=t,MM.Layer.call(this,new d(t.url,t.subdomains)),this.provider.setZoomRange(t.minZoom,t.maxZoom),this.attribution=t.attribution},MM.StamenTileLayer.prototype={setCoordLimits:function(e){var t=this._provider;return!!t.extent&&(e.coordLimits=[e.locationCoordinate(t.extent[0]).zoomTo(t.minZoom),e.locationCoordinate(t.extent[1]).zoomTo(t.maxZoom)],!0)}},MM.extend(MM.StamenTileLayer,MM.Layer)}if("object"===typeof L&&(L.StamenTileLayer=L.TileLayer.extend({initialize:function(e,t){var i=c(e),n=i.url.replace(/({[A-Z]})/g,(function(e){return e.toLowerCase()})),r=L.Util.extend({},t,{minZoom:i.minZoom,maxZoom:i.maxZoom,subdomains:i.subdomains,scheme:"xyz",attribution:i.attribution,sa_id:e});L.TileLayer.prototype.initialize.call(this,n,r)}}),L.stamenTileLayer=function(e,t){return new L.StamenTileLayer(e,t)}),"object"===typeof OpenLayers){var h=function(e){return e.replace(/({.})/g,(function(e){return"$"+e.toLowerCase()}))};OpenLayers.Layer.Stamen=OpenLayers.Class(OpenLayers.Layer.OSM,{initialize:function(e,t){var i=c(e),n=i.url,r=i.subdomains,a=[];if(n.indexOf("{S}")>-1)for(var o=0;o<r.length;o++)a.push(h(n.replace("{S}",r[o])));else a.push(h(n));return t=OpenLayers.Util.extend({numZoomLevels:i.maxZoom,buffer:0,transitionEffect:"resize",tileOptions:{crossOriginKeyword:null},attribution:i.attribution},t),OpenLayers.Layer.OSM.prototype.initialize.call(this,e,a,t)}})}"object"===typeof google&&"object"===typeof google.maps&&(google.maps.ImageMapType=function(e){var t=function(){arguments.length&&e.apply(this,arguments)};return t.prototype=e.prototype,t}(google.maps.ImageMapType),google.maps.StamenMapType=function(e){var t=c(e),i=t.subdomains;return google.maps.ImageMapType.call(this,{getTileUrl:function(e,n){var r=1<<n,a=e.x%r,o=a<0?a+r:a,s=e.y,l=(n+o+s)%i.length;return t.url.replace("{S}",i[l]).replace("{Z}",n).replace("{X}",o).replace("{Y}",s)},tileSize:new google.maps.Size(256,256),name:e,minZoom:t.minZoom,maxZoom:t.maxZoom})},google.maps.StamenMapType.prototype=new google.maps.ImageMapType)}(t)},function(e,t,i){!function(){"use strict";var t=function(e){if("number"!==typeof e||(t=e)!==t)throw new TypeError("Expected a number");var t,i,n=e<0,r=["B","kB","MB","GB","TB","PB","EB","ZB","YB"];return n&&(e=-e),e<1?(n?"-":"")+e+" B":(i=Math.min(Math.floor(Math.log(e)/Math.log(1e3)),r.length-1),(n?"-":"")+(e=1*(e/Math.pow(1e3,i)).toFixed(2))+" "+r[i])};e.exports?e.exports=t:self.prettyBytes=t}()},function(e,t,i){e.exports=function e(t,i,n){function r(o,s){if(!i[o]){if(!t[o]){if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[o]={exports:{}};t[o][0].call(c.exports,(function(e){return r(t[o][1][e]||e)}),c,c.exports,e,t,i,n)}return i[o].exports}for(var a=!1,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t,i){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(e){if(d===setTimeout)return setTimeout(e,0);if((d===n||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function o(){g&&p&&(g=!1,p.length?f=p.concat(f):m=-1,f.length&&s())}function s(){if(!g){var e=a(o);g=!0;for(var t=f.length;t;){for(p=f,f=[];++m<t;)p&&p[m].run();m=-1,t=f.length}p=null,g=!1,function(e){if(h===clearTimeout)return clearTimeout(e);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var d,h,u=t.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:n}catch(e){d=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(e){h=r}}();var p,f=[],g=!1,m=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];f.push(new l(e,t)),1!==f.length||g||a(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=c,u.addListener=c,u.once=c,u.off=c,u.removeListener=c,u.removeAllListeners=c,u.emit=c,u.prependListener=c,u.prependOnceListener=c,u.listeners=function(e){return[]},u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./bars")),r=function(){};(r.prototype=new n.default).extractSeries=function(e,t,i){for(var n,r,a,o=[],s=i.get("logscale"),l=0;l<e.length;l++)n=e[l][0],a=e[l][t],s&&null!==a&&(a[0]<=0||a[1]<=0||a[2]<=0)&&(a=null),null!==a?null===(r=a[1])||isNaN(r)?o.push([n,r,[r,r]]):o.push([n,r,[a[0],a[2]]]):o.push([n,null,[null,null]]);return o},r.prototype.rollingAverage=function(e,t,i){t=Math.min(t,e.length);var n,r,a,o,s,l,c,d=[];for(r=0,o=0,a=0,s=0,l=0;l<e.length;l++){if(n=e[l][1],c=e[l][2],d[l]=e[l],null===n||isNaN(n)||(r+=c[0],o+=n,a+=c[1],s+=1),l-t>=0){var h=e[l-t];null===h[1]||isNaN(h[1])||(r-=h[2][0],o-=h[1],a-=h[2][1],s-=1)}d[l]=s?[e[l][0],1*o/s,[1*r/s,1*a/s]]:[e[l][0],null,[null,null]]}return d},i.default=r,t.exports=i.default},{"./bars":5}],3:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./bars")),r=function(){};(r.prototype=new n.default).extractSeries=function(e,t,i){for(var n,r,a,o,s=[],l=i.get("sigma"),c=i.get("logscale"),d=0;d<e.length;d++)n=e[d][0],o=e[d][t],c&&null!==o&&(o[0]<=0||o[0]-l*o[1]<=0)&&(o=null),null!==o?null===(r=o[0])||isNaN(r)?s.push([n,r,[r,r,r]]):(a=l*o[1],s.push([n,r,[r-a,r+a,o[1]]])):s.push([n,null,[null,null,null]]);return s},r.prototype.rollingAverage=function(e,t,i){t=Math.min(t,e.length);var n,r,a,o,s,l,c,d,h,u=[],p=i.get("sigma");for(n=0;n<e.length;n++){for(s=0,d=0,l=0,r=Math.max(0,n-t+1);r<n+1;r++)null===(a=e[r][1])||isNaN(a)||(l++,s+=a,d+=Math.pow(e[r][2][2],2));l?(c=Math.sqrt(d)/l,h=s/l,u[n]=[e[n][0],h,[h-p*c,h+p*c]]):(o=1==t?e[n][1]:null,u[n]=[e[n][0],o,[o,o]])}return u},i.default=r,t.exports=i.default},{"./bars":5}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./bars")),r=function(){};(r.prototype=new n.default).extractSeries=function(e,t,i){for(var n,r,a,o,s,l,c,d=[],h=i.get("sigma"),u=i.get("logscale"),p=0;p<e.length;p++)n=e[p][0],a=e[p][t],u&&null!==a&&(a[0]<=0||a[1]<=0)&&(a=null),null!==a?(o=a[0],s=a[1],null===o||isNaN(o)?d.push([n,o,[o,o,o,s]]):(l=s?o/s:0,c=100*(s?h*Math.sqrt(l*(1-l)/s):1),r=100*l,d.push([n,r,[r-c,r+c,o,s]]))):d.push([n,null,[null,null,null,null]]);return d},r.prototype.rollingAverage=function(e,t,i){t=Math.min(t,e.length);var n,r,a,o,s=[],l=i.get("sigma"),c=i.get("wilsonInterval"),d=0,h=0;for(a=0;a<e.length;a++){d+=e[a][2][2],h+=e[a][2][3],a-t>=0&&(d-=e[a-t][2][2],h-=e[a-t][2][3]);var u=e[a][0],p=h?d/h:0;if(c)if(h){var f=p<0?0:p,g=h,m=l*Math.sqrt(f*(1-f)/g+l*l/(4*g*g)),v=1+l*l/h;n=(f+l*l/(2*h)-m)/v,r=(f+l*l/(2*h)+m)/v,s[a]=[u,100*f,[100*n,100*r]]}else s[a]=[u,0,[0,0]];else o=h?l*Math.sqrt(p*(1-p)/h):1,s[a]=[u,100*p,[100*(p-o),100*(p+o)]]}return s},i.default=r,t.exports=i.default},{"./bars":5}],5:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(i,"__esModule",{value:!0});var r=n(e("./datahandler")),a=n(e("../dygraph-layout")),o=function(){r.default.call(this)};(o.prototype=new r.default).extractSeries=function(e,t,i){},o.prototype.rollingAverage=function(e,t,i){},o.prototype.onPointsCreated_=function(e,t){for(var i=0;i<e.length;++i){var n=e[i],a=t[i];a.y_top=NaN,a.y_bottom=NaN,a.yval_minus=r.default.parseFloat(n[2][0]),a.yval_plus=r.default.parseFloat(n[2][1])}},o.prototype.getExtremeYValues=function(e,t,i){for(var n,r=null,a=null,o=e.length-1,s=0;s<=o;s++)if(null!==(n=e[s][1])&&!isNaN(n)){var l=e[s][2][0],c=e[s][2][1];l>n&&(l=n),c<n&&(c=n),(null===a||c>a)&&(a=c),(null===r||l<r)&&(r=l)}return[r,a]},o.prototype.onLineEvaluated=function(e,t,i){for(var n,r=0;r<e.length;r++)(n=e[r]).y_top=a.default.calcYNormal_(t,n.yval_minus,i),n.y_bottom=a.default.calcYNormal_(t,n.yval_plus,i)},i.default=o,t.exports=i.default},{"../dygraph-layout":13,"./datahandler":6}],6:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){},r=n;r.X=0,r.Y=1,r.EXTRAS=2,r.prototype.extractSeries=function(e,t,i){},r.prototype.seriesToPoints=function(e,t,i){for(var n=[],a=0;a<e.length;++a){var o=e[a],s=o[1],l=null===s?null:r.parseFloat(s),c={x:NaN,y:NaN,xval:r.parseFloat(o[0]),yval:l,name:t,idx:a+i};n.push(c)}return this.onPointsCreated_(e,n),n},r.prototype.onPointsCreated_=function(e,t){},r.prototype.rollingAverage=function(e,t,i){},r.prototype.getExtremeYValues=function(e,t,i){},r.prototype.onLineEvaluated=function(e,t,i){},r.parseFloat=function(e){return null===e?NaN:e},i.default=n,t.exports=i.default},{}],7:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(i,"__esModule",{value:!0});var r=(n(e("./datahandler")),e("./default")),a=n(r),o=function(){};(o.prototype=new a.default).extractSeries=function(e,t,i){for(var n,r,a,o,s,l=[],c=i.get("logscale"),d=0;d<e.length;d++)n=e[d][0],a=e[d][t],c&&null!==a&&(a[0]<=0||a[1]<=0)&&(a=null),null!==a?(o=a[0],s=a[1],null===o||isNaN(o)?l.push([n,o,[o,s]]):(r=100*(s?o/s:0),l.push([n,r,[o,s]]))):l.push([n,null,[null,null]]);return l},o.prototype.rollingAverage=function(e,t,i){t=Math.min(t,e.length);var n,r=[],a=0,o=0;for(n=0;n<e.length;n++){a+=e[n][2][0],o+=e[n][2][1],n-t>=0&&(a-=e[n-t][2][0],o-=e[n-t][2][1]);var s=e[n][0],l=o?a/o:0;r[n]=[s,100*l]}return r},i.default=o,t.exports=i.default},{"./datahandler":6,"./default":8}],8:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./datahandler")),r=function(){};(r.prototype=new n.default).extractSeries=function(e,t,i){for(var n=[],r=i.get("logscale"),a=0;a<e.length;a++){var o=e[a][0],s=e[a][t];r&&s<=0&&(s=null),n.push([o,s])}return n},r.prototype.rollingAverage=function(e,t,i){var n,r,a,o,s,l=[];if(1==(t=Math.min(t,e.length)))return e;for(n=0;n<e.length;n++){for(o=0,s=0,r=Math.max(0,n-t+1);r<n+1;r++)null===(a=e[r][1])||isNaN(a)||(s++,o+=e[r][1]);l[n]=s?[e[n][0],o/s]:[e[n][0],null]}return l},r.prototype.getExtremeYValues=function(e,t,i){for(var n,r=null,a=null,o=e.length-1,s=0;s<=o;s++)null===(n=e[s][1])||isNaN(n)||((null===a||n>a)&&(a=n),(null===r||n<r)&&(r=n));return[r,a]},i.default=r,t.exports=i.default},{"./datahandler":6}],9:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("./dygraph-utils")),r=function(e){return e&&e.__esModule?e:{default:e}}(e("./dygraph")),a=function(e,t,i,r){if(this.dygraph_=e,this.layout=r,this.element=t,this.elementContext=i,this.height=e.height_,this.width=e.width_,!n.isCanvasSupported(this.element))throw"Canvas is not supported.";this.area=r.getPlotArea();var a=this.dygraph_.canvas_ctx_;a.beginPath(),a.rect(this.area.x,this.area.y,this.area.w,this.area.h),a.clip(),(a=this.dygraph_.hidden_ctx_).beginPath(),a.rect(this.area.x,this.area.y,this.area.w,this.area.h),a.clip()};a.prototype.clear=function(){this.elementContext.clearRect(0,0,this.width,this.height)},a.prototype.render=function(){this._updatePoints(),this._renderLineChart()},a._getIteratorPredicate=function(e){return e?a._predicateThatSkipsEmptyPoints:null},a._predicateThatSkipsEmptyPoints=function(e,t){return null!==e[t].yval},a._drawStyledLine=function(e,t,i,r,o,s,l){var c=e.dygraph,d=c.getBooleanOption("stepPlot",e.setName);n.isArrayLike(r)||(r=null);var h=c.getBooleanOption("drawGapEdgePoints",e.setName),u=e.points,p=e.setName,f=n.createIterator(u,0,u.length,a._getIteratorPredicate(c.getBooleanOption("connectSeparatedPoints",p))),g=r&&r.length>=2,m=e.drawingContext;m.save(),g&&m.setLineDash&&m.setLineDash(r);var v=a._drawSeries(e,f,i,l,o,h,d,t);a._drawPointsOnLine(e,v,s,t,l),g&&m.setLineDash&&m.setLineDash([]),m.restore()},a._drawSeries=function(e,t,i,n,r,a,o,s){var l,c,d=null,h=null,u=null,p=[],f=!0,g=e.drawingContext;g.beginPath(),g.strokeStyle=s,g.lineWidth=i;for(var m=t.array_,v=t.end_,_=t.predicate_,b=t.start_;b<v;b++){if(c=m[b],_){for(;b<v&&!_(m,b);)b++;if(b==v)break;c=m[b]}if(null===c.canvasy||c.canvasy!=c.canvasy)o&&null!==d&&(g.moveTo(d,h),g.lineTo(c.canvasx,h)),d=h=null;else{if(l=!1,a||null===d){t.nextIdx_=b,t.next();var w=null===(u=t.hasNext?t.peek.canvasy:null)||u!=u;l=null===d&&w,a&&(!f&&null===d||t.hasNext&&w)&&(l=!0)}null!==d?i&&(o&&(g.moveTo(d,h),g.lineTo(c.canvasx,h)),g.lineTo(c.canvasx,c.canvasy)):g.moveTo(c.canvasx,c.canvasy),(r||l)&&p.push([c.canvasx,c.canvasy,c.idx]),d=c.canvasx,h=c.canvasy}f=!1}return g.stroke(),p},a._drawPointsOnLine=function(e,t,i,n,r){for(var a=e.drawingContext,o=0;o<t.length;o++){var s=t[o];a.save(),i.call(e.dygraph,e.dygraph,e.setName,a,s[0],s[1],n,r,s[2]),a.restore()}},a.prototype._updatePoints=function(){for(var e=this.layout.points,t=e.length;t--;)for(var i=e[t],n=i.length;n--;){var r=i[n];r.canvasx=this.area.w*r.x+this.area.x,r.canvasy=this.area.h*r.y+this.area.y}},a.prototype._renderLineChart=function(e,t){var i,r,a=t||this.elementContext,o=this.layout.points,s=this.layout.setNames;this.colors=this.dygraph_.colorsMap_;var l=this.dygraph_.getOption("plotter"),c=l;n.isArrayLike(c)||(c=[c]);var d={};for(i=0;i<s.length;i++){r=s[i];var h=this.dygraph_.getOption("plotter",r);h!=l&&(d[r]=h)}for(i=0;i<c.length;i++)for(var u=c[i],p=i==c.length-1,f=0;f<o.length;f++)if(r=s[f],!e||r==e){var g=o[f],m=u;if(r in d){if(!p)continue;m=d[r]}var v=this.colors[r],_=this.dygraph_.getOption("strokeWidth",r);a.save(),a.strokeStyle=v,a.lineWidth=_,m({points:g,setName:r,drawingContext:a,color:v,strokeWidth:_,dygraph:this.dygraph_,axis:this.dygraph_.axisPropertiesForSeries(r),plotArea:this.area,seriesIndex:f,seriesCount:o.length,singleSeriesName:e,allSeriesPoints:o}),a.restore()}},a._Plotters={linePlotter:function(e){a._linePlotter(e)},fillPlotter:function(e){a._fillPlotter(e)},errorPlotter:function(e){a._errorPlotter(e)}},a._linePlotter=function(e){var t=e.dygraph,i=e.setName,r=e.strokeWidth,o=t.getNumericOption("strokeBorderWidth",i),s=t.getOption("drawPointCallback",i)||n.Circles.DEFAULT,l=t.getOption("strokePattern",i),c=t.getBooleanOption("drawPoints",i),d=t.getNumericOption("pointSize",i);o&&r&&a._drawStyledLine(e,t.getOption("strokeBorderColor",i),r+2*o,l,c,s,d),a._drawStyledLine(e,e.color,r,l,c,s,d)},a._errorPlotter=function(e){var t=e.dygraph,i=e.setName;if(t.getBooleanOption("errorBars")||t.getBooleanOption("customBars")){t.getBooleanOption("fillGraph",i)&&console.warn("Can't use fillGraph option with error bars");var r,o=e.drawingContext,s=e.color,l=t.getNumericOption("fillAlpha",i),c=t.getBooleanOption("stepPlot",i),d=e.points,h=n.createIterator(d,0,d.length,a._getIteratorPredicate(t.getBooleanOption("connectSeparatedPoints",i))),u=NaN,p=NaN,f=[-1,-1],g=n.toRGB_(s),m="rgba("+g.r+","+g.g+","+g.b+","+l+")";o.fillStyle=m,o.beginPath();for(var v=function(e){return null===e||void 0===e||isNaN(e)};h.hasNext;){var _=h.next();!c&&v(_.y)||c&&!isNaN(p)&&v(p)?u=NaN:(r=[_.y_bottom,_.y_top],c&&(p=_.y),isNaN(r[0])&&(r[0]=_.y),isNaN(r[1])&&(r[1]=_.y),r[0]=e.plotArea.h*r[0]+e.plotArea.y,r[1]=e.plotArea.h*r[1]+e.plotArea.y,isNaN(u)||(c?(o.moveTo(u,f[0]),o.lineTo(_.canvasx,f[0]),o.lineTo(_.canvasx,f[1])):(o.moveTo(u,f[0]),o.lineTo(_.canvasx,r[0]),o.lineTo(_.canvasx,r[1])),o.lineTo(u,f[1]),o.closePath()),f=r,u=_.canvasx)}o.fill()}},a._fastCanvasProxy=function(e){var t=[],i=null,n=null,r=0,a=function(i){!function(e){if(!(t.length<=1)){for(var i=t.length-1;i>0;i--)if(2==(s=t[i])[0]){var n=t[i-1];n[1]==s[1]&&n[2]==s[2]&&t.splice(i,1)}for(i=0;i<t.length-1;)2==(s=t[i])[0]&&2==t[i+1][0]?t.splice(i,1):i++;if(t.length>2&&!e){var r=0;2==t[0][0]&&r++;var a=null,o=null;for(i=r;i<t.length;i++){var s;if(1==(s=t[i])[0])if(null===a&&null===o)a=i,o=i;else{var l=s[2];l<t[a][2]?a=i:l>t[o][2]&&(o=i)}}var c=t[a],d=t[o];t.splice(r,t.length-r),a<o?(t.push(c),t.push(d)):a>o?(t.push(d),t.push(c)):t.push(c)}}}(i);for(var a=0,o=t.length;a<o;a++){var s=t[a];1==s[0]?e.lineTo(s[1],s[2]):2==s[0]&&e.moveTo(s[1],s[2])}t.length&&(n=t[t.length-1][1]),r+=t.length,t=[]},o=function(e,r,o){var s=Math.round(r);null!==i&&s==i||(a(i-n>1||s-i>1),i=s),t.push([e,r,o])};return{moveTo:function(e,t){o(2,e,t)},lineTo:function(e,t){o(1,e,t)},stroke:function(){a(!0),e.stroke()},fill:function(){a(!0),e.fill()},beginPath:function(){a(!0),e.beginPath()},closePath:function(){a(!0),e.closePath()},_count:function(){return r}}},a._fillPlotter=function(e){if(!e.singleSeriesName&&0===e.seriesIndex){for(var t=e.dygraph,i=t.getLabels().slice(1),o=i.length;o>=0;o--)t.visibility()[o]||i.splice(o,1);if(function(){for(var e=0;e<i.length;e++)if(t.getBooleanOption("fillGraph",i[e]))return!0;return!1}())for(var s,l,c=e.plotArea,d=e.allSeriesPoints,h=d.length,u=t.getBooleanOption("stackedGraph"),p=t.getColors(),f={},g=function(e,t,i,n){if(e.lineTo(t,i),u)for(var r=n.length-1;r>=0;r--){var a=n[r];e.lineTo(a[0],a[1])}},m=h-1;m>=0;m--){var v=e.drawingContext,_=i[m];if(t.getBooleanOption("fillGraph",_)){var b=t.getNumericOption("fillAlpha",_),w=t.getBooleanOption("stepPlot",_),y=p[m],x=t.axisPropertiesForSeries(_),C=1+x.minyval*x.yscale;C<0?C=0:C>1&&(C=1),C=c.h*C+c.y;var S,T=d[m],k=n.createIterator(T,0,T.length,a._getIteratorPredicate(t.getBooleanOption("connectSeparatedPoints",_))),A=NaN,P=[-1,-1],D=n.toRGB_(y),E="rgba("+D.r+","+D.g+","+D.b+","+b+")";v.fillStyle=E,v.beginPath();var M,O=!0;(T.length>2*t.width_||r.default.FORCE_FAST_PROXY)&&(v=a._fastCanvasProxy(v));for(var I,N=[];k.hasNext;)if(I=k.next(),n.isOK(I.y)||w){if(u){if(!O&&M==I.xval)continue;var L;O=!1,M=I.xval,L=void 0===(s=f[I.canvasx])?C:l?s[0]:s,S=[I.canvasy,L],w?-1===P[0]?f[I.canvasx]=[I.canvasy,C]:f[I.canvasx]=[I.canvasy,P[0]]:f[I.canvasx]=I.canvasy}else S=isNaN(I.canvasy)&&w?[c.y+c.h,C]:[I.canvasy,C];isNaN(A)?(v.moveTo(I.canvasx,S[1]),v.lineTo(I.canvasx,S[0])):(w?(v.lineTo(I.canvasx,P[0]),v.lineTo(I.canvasx,S[0])):v.lineTo(I.canvasx,S[0]),u&&(N.push([A,P[1]]),l&&s?N.push([I.canvasx,s[1]]):N.push([I.canvasx,S[1]]))),P=S,A=I.canvasx}else g(v,A,P[1],N),N=[],A=NaN,null===I.y_stacked||isNaN(I.y_stacked)||(f[I.canvasx]=c.h*I.y_stacked+c.y);l=w,S&&I&&(g(v,I.canvasx,S[1],N),N=[]),v.fill()}}}},i.default=a,t.exports=i.default},{"./dygraph":18,"./dygraph-utils":17}],10:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}Object.defineProperty(i,"__esModule",{value:!0});var a=r(e("./dygraph-tickers")),o=n(e("./dygraph-interaction-model")),s=n(e("./dygraph-canvas")),l=r(e("./dygraph-utils")),c={highlightCircleSize:3,highlightSeriesOpts:null,highlightSeriesBackgroundAlpha:.5,highlightSeriesBackgroundColor:"rgb(255, 255, 255)",labelsSeparateLines:!1,labelsShowZeroValues:!0,labelsKMB:!1,labelsKMG2:!1,showLabelsOnHighlight:!0,digitsAfterDecimal:2,maxNumberWidth:6,sigFigs:null,strokeWidth:1,strokeBorderWidth:0,strokeBorderColor:"white",axisTickSize:3,axisLabelFontSize:14,rightGap:5,showRoller:!1,xValueParser:void 0,delimiter:",",sigma:2,errorBars:!1,fractions:!1,wilsonInterval:!0,customBars:!1,fillGraph:!1,fillAlpha:.15,connectSeparatedPoints:!1,stackedGraph:!1,stackedGraphNaNFill:"all",hideOverlayOnMouseOut:!0,legend:"onmouseover",stepPlot:!1,xRangePad:0,yRangePad:null,drawAxesAtZero:!1,titleHeight:28,xLabelHeight:18,yLabelWidth:18,axisLineColor:"black",axisLineWidth:.3,gridLineWidth:.3,axisLabelWidth:50,gridLineColor:"rgb(128,128,128)",interactionModel:o.default.defaultModel,animatedZooms:!1,showRangeSelector:!1,rangeSelectorHeight:40,rangeSelectorPlotStrokeColor:"#808FAB",rangeSelectorPlotFillGradientColor:"white",rangeSelectorPlotFillColor:"#A7B1C4",rangeSelectorBackgroundStrokeColor:"gray",rangeSelectorBackgroundLineWidth:1,rangeSelectorPlotLineWidth:1.5,rangeSelectorForegroundStrokeColor:"black",rangeSelectorForegroundLineWidth:1,rangeSelectorAlpha:.6,showInRangeSelector:null,plotter:[s.default._fillPlotter,s.default._errorPlotter,s.default._linePlotter],plugins:[],axes:{x:{pixelsPerLabel:70,axisLabelWidth:60,axisLabelFormatter:l.dateAxisLabelFormatter,valueFormatter:l.dateValueFormatter,drawGrid:!0,drawAxis:!0,independentTicks:!0,ticker:a.dateTicker},y:{axisLabelWidth:50,pixelsPerLabel:30,valueFormatter:l.numberValueFormatter,axisLabelFormatter:l.numberAxisLabelFormatter,drawGrid:!0,drawAxis:!0,independentTicks:!0,ticker:a.numericTicks},y2:{axisLabelWidth:50,pixelsPerLabel:30,valueFormatter:l.numberValueFormatter,axisLabelFormatter:l.numberAxisLabelFormatter,drawAxis:!0,drawGrid:!1,independentTicks:!1,ticker:a.numericTicks}}};i.default=c,t.exports=i.default},{"./dygraph-canvas":9,"./dygraph-interaction-model":12,"./dygraph-tickers":16,"./dygraph-utils":17}],11:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./dygraph")),r=function(e){this.container=e};r.prototype.draw=function(e,t){this.container.innerHTML="",void 0!==this.date_graph&&this.date_graph.destroy(),this.date_graph=new n.default(this.container,e,t)},r.prototype.setSelection=function(e){var t=!1;e.length&&(t=e[0].row),this.date_graph.setSelection(t)},r.prototype.getSelection=function(){var e=[],t=this.date_graph.getSelection();if(t<0)return e;for(var i=this.date_graph.layout_.points,n=0;n<i.length;++n)e.push({row:t,column:n+1});return e},i.default=r,t.exports=i.default},{"./dygraph":18}],12:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("./dygraph-utils")),r={maybeTreatMouseOpAsClick:function(e,t,i){i.dragEndX=n.dragGetX_(e,i),i.dragEndY=n.dragGetY_(e,i);var a=Math.abs(i.dragEndX-i.dragStartX),o=Math.abs(i.dragEndY-i.dragStartY);a<2&&o<2&&void 0!==t.lastx_&&-1!=t.lastx_&&r.treatMouseOpAsClick(t,e,i),i.regionWidth=a,i.regionHeight=o},startPan:function(e,t,i){var r,a;i.isPanning=!0;var o=t.xAxisRange();if(t.getOptionForAxis("logscale","x")?(i.initialLeftmostDate=n.log10(o[0]),i.dateRange=n.log10(o[1])-n.log10(o[0])):(i.initialLeftmostDate=o[0],i.dateRange=o[1]-o[0]),i.xUnitsPerPixel=i.dateRange/(t.plotter_.area.w-1),t.getNumericOption("panEdgeFraction")){var s=t.width_*t.getNumericOption("panEdgeFraction"),l=t.xAxisExtremes(),c=t.toDomXCoord(l[0])-s,d=t.toDomXCoord(l[1])+s,h=t.toDataXCoord(c),u=t.toDataXCoord(d);i.boundedDates=[h,u];var p=[],f=t.height_*t.getNumericOption("panEdgeFraction");for(r=0;r<t.axes_.length;r++){var g=(a=t.axes_[r]).extremeRange,m=t.toDomYCoord(g[0],r)+f,v=t.toDomYCoord(g[1],r)-f,_=t.toDataYCoord(m,r),b=t.toDataYCoord(v,r);p[r]=[_,b]}i.boundedValues=p}for(i.is2DPan=!1,i.axes=[],r=0;r<t.axes_.length;r++){a=t.axes_[r];var w={},y=t.yAxisRange(r);t.attributes_.getForAxis("logscale",r)?(w.initialTopValue=n.log10(y[1]),w.dragValueRange=n.log10(y[1])-n.log10(y[0])):(w.initialTopValue=y[1],w.dragValueRange=y[1]-y[0]),w.unitsPerPixel=w.dragValueRange/(t.plotter_.area.h-1),i.axes.push(w),a.valueRange&&(i.is2DPan=!0)}},movePan:function(e,t,i){i.dragEndX=n.dragGetX_(e,i),i.dragEndY=n.dragGetY_(e,i);var r=i.initialLeftmostDate-(i.dragEndX-i.dragStartX)*i.xUnitsPerPixel;i.boundedDates&&(r=Math.max(r,i.boundedDates[0]));var a=r+i.dateRange;if(i.boundedDates&&a>i.boundedDates[1]&&(a=(r-=a-i.boundedDates[1])+i.dateRange),t.getOptionForAxis("logscale","x")?t.dateWindow_=[Math.pow(n.LOG_SCALE,r),Math.pow(n.LOG_SCALE,a)]:t.dateWindow_=[r,a],i.is2DPan)for(var o=i.dragEndY-i.dragStartY,s=0;s<t.axes_.length;s++){var l=t.axes_[s],c=i.axes[s],d=o*c.unitsPerPixel,h=i.boundedValues?i.boundedValues[s]:null,u=c.initialTopValue+d;h&&(u=Math.min(u,h[1]));var p=u-c.dragValueRange;h&&p<h[0]&&(p=(u-=p-h[0])-c.dragValueRange),t.attributes_.getForAxis("logscale",s)?l.valueRange=[Math.pow(n.LOG_SCALE,p),Math.pow(n.LOG_SCALE,u)]:l.valueRange=[p,u]}t.drawGraph_(!1)}};r.endPan=r.maybeTreatMouseOpAsClick,r.startZoom=function(e,t,i){i.isZooming=!0,i.zoomMoved=!1},r.moveZoom=function(e,t,i){i.zoomMoved=!0,i.dragEndX=n.dragGetX_(e,i),i.dragEndY=n.dragGetY_(e,i);var r=Math.abs(i.dragStartX-i.dragEndX),a=Math.abs(i.dragStartY-i.dragEndY);i.dragDirection=r<a/2?n.VERTICAL:n.HORIZONTAL,t.drawZoomRect_(i.dragDirection,i.dragStartX,i.dragEndX,i.dragStartY,i.dragEndY,i.prevDragDirection,i.prevEndX,i.prevEndY),i.prevEndX=i.dragEndX,i.prevEndY=i.dragEndY,i.prevDragDirection=i.dragDirection},r.treatMouseOpAsClick=function(e,t,i){for(var n=e.getFunctionOption("clickCallback"),r=e.getFunctionOption("pointClickCallback"),a=null,o=-1,s=Number.MAX_VALUE,l=0;l<e.selPoints_.length;l++){var c=e.selPoints_[l],d=Math.pow(c.canvasx-i.dragEndX,2)+Math.pow(c.canvasy-i.dragEndY,2);!isNaN(d)&&(-1==o||d<s)&&(s=d,o=l)}var h=e.getNumericOption("highlightCircleSize")+2;if(s<=h*h&&(a=e.selPoints_[o]),a){var u={cancelable:!0,point:a,canvasx:i.dragEndX,canvasy:i.dragEndY};if(e.cascadeEvents_("pointClick",u))return;r&&r.call(e,t,a)}u={cancelable:!0,xval:e.lastx_,pts:e.selPoints_,canvasx:i.dragEndX,canvasy:i.dragEndY},e.cascadeEvents_("click",u)||n&&n.call(e,t,e.lastx_,e.selPoints_)},r.endZoom=function(e,t,i){t.clearZoomRect_(),i.isZooming=!1,r.maybeTreatMouseOpAsClick(e,t,i);var a=t.getArea();if(i.regionWidth>=10&&i.dragDirection==n.HORIZONTAL){var o=Math.min(i.dragStartX,i.dragEndX),s=Math.max(i.dragStartX,i.dragEndX);(o=Math.max(o,a.x))<(s=Math.min(s,a.x+a.w))&&t.doZoomX_(o,s),i.cancelNextDblclick=!0}else if(i.regionHeight>=10&&i.dragDirection==n.VERTICAL){var l=Math.min(i.dragStartY,i.dragEndY),c=Math.max(i.dragStartY,i.dragEndY);(l=Math.max(l,a.y))<(c=Math.min(c,a.y+a.h))&&t.doZoomY_(l,c),i.cancelNextDblclick=!0}i.dragStartX=null,i.dragStartY=null},r.startTouch=function(e,t,i){e.preventDefault(),e.touches.length>1&&(i.startTimeForDoubleTapMs=null);for(var n=[],r=0;r<e.touches.length;r++){var a=e.touches[r];n.push({pageX:a.pageX,pageY:a.pageY,dataX:t.toDataXCoord(a.pageX),dataY:t.toDataYCoord(a.pageY)})}if(i.initialTouches=n,1==n.length)i.initialPinchCenter=n[0],i.touchDirections={x:!0,y:!0};else if(n.length>=2){i.initialPinchCenter={pageX:.5*(n[0].pageX+n[1].pageX),pageY:.5*(n[0].pageY+n[1].pageY),dataX:.5*(n[0].dataX+n[1].dataX),dataY:.5*(n[0].dataY+n[1].dataY)};var o=180/Math.PI*Math.atan2(i.initialPinchCenter.pageY-n[0].pageY,n[0].pageX-i.initialPinchCenter.pageX);(o=Math.abs(o))>90&&(o=90-o),i.touchDirections={x:o<67.5,y:o>22.5}}i.initialRange={x:t.xAxisRange(),y:t.yAxisRange()}},r.moveTouch=function(e,t,i){i.startTimeForDoubleTapMs=null;var n,r=[];for(n=0;n<e.touches.length;n++){var a=e.touches[n];r.push({pageX:a.pageX,pageY:a.pageY})}var o,s,l,c=i.initialTouches,d=i.initialPinchCenter,h={pageX:(o=1==r.length?r[0]:{pageX:.5*(r[0].pageX+r[1].pageX),pageY:.5*(r[0].pageY+r[1].pageY)}).pageX-d.pageX,pageY:o.pageY-d.pageY},u=i.initialRange.x[1]-i.initialRange.x[0],p=i.initialRange.y[0]-i.initialRange.y[1];if(h.dataX=h.pageX/t.plotter_.area.w*u,h.dataY=h.pageY/t.plotter_.area.h*p,1==r.length)s=1,l=1;else if(r.length>=2){var f=c[1].pageX-d.pageX;s=(r[1].pageX-o.pageX)/f;var g=c[1].pageY-d.pageY;l=(r[1].pageY-o.pageY)/g}s=Math.min(8,Math.max(.125,s)),l=Math.min(8,Math.max(.125,l));var m=!1;if(i.touchDirections.x&&(t.dateWindow_=[d.dataX-h.dataX+(i.initialRange.x[0]-d.dataX)/s,d.dataX-h.dataX+(i.initialRange.x[1]-d.dataX)/s],m=!0),i.touchDirections.y)for(n=0;n<1;n++){var v=t.axes_[n];t.attributes_.getForAxis("logscale",n)||(v.valueRange=[d.dataY-h.dataY+(i.initialRange.y[0]-d.dataY)/l,d.dataY-h.dataY+(i.initialRange.y[1]-d.dataY)/l],m=!0)}if(t.drawGraph_(!1),m&&r.length>1&&t.getFunctionOption("zoomCallback")){var _=t.xAxisRange();t.getFunctionOption("zoomCallback").call(t,_[0],_[1],t.yAxisRanges())}},r.endTouch=function(e,t,i){if(0!==e.touches.length)r.startTouch(e,t,i);else if(1==e.changedTouches.length){var n=(new Date).getTime(),a=e.changedTouches[0];i.startTimeForDoubleTapMs&&n-i.startTimeForDoubleTapMs<500&&i.doubleTapX&&Math.abs(i.doubleTapX-a.screenX)<50&&i.doubleTapY&&Math.abs(i.doubleTapY-a.screenY)<50?t.resetZoom():(i.startTimeForDoubleTapMs=n,i.doubleTapX=a.screenX,i.doubleTapY=a.screenY)}};var a=function(e,t,i){return e<t?t-e:e>i?e-i:0},o=function(e,t){var i=n.findPos(t.canvas_),r={left:i.x,right:i.x+t.canvas_.offsetWidth,top:i.y,bottom:i.y+t.canvas_.offsetHeight},o={x:n.pageX(e),y:n.pageY(e)},s=a(o.x,r.left,r.right),l=a(o.y,r.top,r.bottom);return Math.max(s,l)};r.defaultModel={mousedown:function(e,t,i){if(!e.button||2!=e.button){i.initializeMouseDown(e,t,i),e.altKey||e.shiftKey?r.startPan(e,t,i):r.startZoom(e,t,i);var a=function(e){i.isZooming?o(e,t)<100?r.moveZoom(e,t,i):null!==i.dragEndX&&(i.dragEndX=null,i.dragEndY=null,t.clearZoomRect_()):i.isPanning&&r.movePan(e,t,i)};t.addAndTrackEvent(document,"mousemove",a),t.addAndTrackEvent(document,"mouseup",(function e(o){i.isZooming?null!==i.dragEndX?r.endZoom(o,t,i):r.maybeTreatMouseOpAsClick(o,t,i):i.isPanning&&r.endPan(o,t,i),n.removeEvent(document,"mousemove",a),n.removeEvent(document,"mouseup",e),i.destroy()}))}},willDestroyContextMyself:!0,touchstart:function(e,t,i){r.startTouch(e,t,i)},touchmove:function(e,t,i){r.moveTouch(e,t,i)},touchend:function(e,t,i){r.endTouch(e,t,i)},dblclick:function(e,t,i){if(i.cancelNextDblclick)i.cancelNextDblclick=!1;else{var n={canvasx:i.dragEndX,canvasy:i.dragEndY,cancelable:!0};t.cascadeEvents_("dblclick",n)||e.altKey||e.shiftKey||t.resetZoom()}}},r.nonInteractiveModel_={mousedown:function(e,t,i){i.initializeMouseDown(e,t,i)},mouseup:r.maybeTreatMouseOpAsClick},r.dragIsPanInteractionModel={mousedown:function(e,t,i){i.initializeMouseDown(e,t,i),r.startPan(e,t,i)},mousemove:function(e,t,i){i.isPanning&&r.movePan(e,t,i)},mouseup:function(e,t,i){i.isPanning&&r.endPan(e,t,i)}},i.default=r,t.exports=i.default},{"./dygraph-utils":17}],13:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("./dygraph-utils")),r=function(e){this.dygraph_=e,this.points=[],this.setNames=[],this.annotations=[],this.yAxes_=null,this.xTicks_=null,this.yTicks_=null};r.prototype.addDataset=function(e,t){this.points.push(t),this.setNames.push(e)},r.prototype.getPlotArea=function(){return this.area_},r.prototype.computePlotArea=function(){var e={x:0,y:0};e.w=this.dygraph_.width_-e.x-this.dygraph_.getOption("rightGap"),e.h=this.dygraph_.height_;var t={chart_div:this.dygraph_.graphDiv,reserveSpaceLeft:function(t){var i={x:e.x,y:e.y,w:t,h:e.h};return e.x+=t,e.w-=t,i},reserveSpaceRight:function(t){var i={x:e.x+e.w-t,y:e.y,w:t,h:e.h};return e.w-=t,i},reserveSpaceTop:function(t){var i={x:e.x,y:e.y,w:e.w,h:t};return e.y+=t,e.h-=t,i},reserveSpaceBottom:function(t){var i={x:e.x,y:e.y+e.h-t,w:e.w,h:t};return e.h-=t,i},chartRect:function(){return{x:e.x,y:e.y,w:e.w,h:e.h}}};this.dygraph_.cascadeEvents_("layout",t),this.area_=e},r.prototype.setAnnotations=function(e){this.annotations=[];for(var t=this.dygraph_.getOption("xValueParser")||function(e){return e},i=0;i<e.length;i++){var r={};if(!e[i].xval&&void 0===e[i].x)return void console.error("Annotations must have an 'x' property");if(e[i].icon&&(!e[i].hasOwnProperty("width")||!e[i].hasOwnProperty("height")))return void console.error("Must set width and height when setting annotation.icon property");n.update(r,e[i]),r.xval||(r.xval=t(r.x)),this.annotations.push(r)}},r.prototype.setXTicks=function(e){this.xTicks_=e},r.prototype.setYAxes=function(e){this.yAxes_=e},r.prototype.evaluate=function(){this._xAxis={},this._evaluateLimits(),this._evaluateLineCharts(),this._evaluateLineTicks(),this._evaluateAnnotations()},r.prototype._evaluateLimits=function(){var e=this.dygraph_.xAxisRange();this._xAxis.minval=e[0],this._xAxis.maxval=e[1];var t=e[1]-e[0];this._xAxis.scale=0!==t?1/t:1,this.dygraph_.getOptionForAxis("logscale","x")&&(this._xAxis.xlogrange=n.log10(this._xAxis.maxval)-n.log10(this._xAxis.minval),this._xAxis.xlogscale=0!==this._xAxis.xlogrange?1/this._xAxis.xlogrange:1);for(var i=0;i<this.yAxes_.length;i++){var r=this.yAxes_[i];r.minyval=r.computedValueRange[0],r.maxyval=r.computedValueRange[1],r.yrange=r.maxyval-r.minyval,r.yscale=0!==r.yrange?1/r.yrange:1,this.dygraph_.getOption("logscale")&&(r.ylogrange=n.log10(r.maxyval)-n.log10(r.minyval),r.ylogscale=0!==r.ylogrange?1/r.ylogrange:1,isFinite(r.ylogrange)&&!isNaN(r.ylogrange)||console.error("axis "+i+" of graph at "+r.g+" can't be displayed in log scale for range ["+r.minyval+" - "+r.maxyval+"]"))}},r.calcXNormal_=function(e,t,i){return i?(n.log10(e)-n.log10(t.minval))*t.xlogscale:(e-t.minval)*t.scale},r.calcYNormal_=function(e,t,i){if(i){var r=1-(n.log10(t)-n.log10(e.minyval))*e.ylogscale;return isFinite(r)?r:NaN}return 1-(t-e.minyval)*e.yscale},r.prototype._evaluateLineCharts=function(){for(var e=this.dygraph_.getOption("stackedGraph"),t=this.dygraph_.getOptionForAxis("logscale","x"),i=0;i<this.points.length;i++){for(var n=this.points[i],a=this.setNames[i],o=this.dygraph_.getOption("connectSeparatedPoints",a),s=this.dygraph_.axisPropertiesForSeries(a),l=this.dygraph_.attributes_.getForSeries("logscale",a),c=0;c<n.length;c++){var d=n[c];d.x=r.calcXNormal_(d.xval,this._xAxis,t);var h=d.yval;e&&(d.y_stacked=r.calcYNormal_(s,d.yval_stacked,l),null===h||isNaN(h)||(h=d.yval_stacked)),null===h&&(h=NaN,o||(d.yval=NaN)),d.y=r.calcYNormal_(s,h,l)}this.dygraph_.dataHandler_.onLineEvaluated(n,s,l)}},r.prototype._evaluateLineTicks=function(){var e,t,i,n,r,a;for(this.xticks=[],e=0;e<this.xTicks_.length;e++)i=(t=this.xTicks_[e]).label,r=(a=!("label_v"in t))?t.v:t.label_v,(n=this.dygraph_.toPercentXCoord(r))>=0&&n<1&&this.xticks.push({pos:n,label:i,has_tick:a});for(this.yticks=[],e=0;e<this.yAxes_.length;e++)for(var o=this.yAxes_[e],s=0;s<o.ticks.length;s++)i=(t=o.ticks[s]).label,r=(a=!("label_v"in t))?t.v:t.label_v,(n=this.dygraph_.toPercentYCoord(r,e))>0&&n<=1&&this.yticks.push({axis:e,pos:n,label:i,has_tick:a})},r.prototype._evaluateAnnotations=function(){var e,t={};for(e=0;e<this.annotations.length;e++){var i=this.annotations[e];t[i.xval+","+i.series]=i}if(this.annotated_points=[],this.annotations&&this.annotations.length)for(var n=0;n<this.points.length;n++){var r=this.points[n];for(e=0;e<r.length;e++){var a=r[e],o=a.xval+","+a.name;o in t&&(a.annotation=t[o],this.annotated_points.push(a))}}},r.prototype.removeAllDatasets=function(){delete this.points,delete this.setNames,delete this.setPointsLengths,delete this.setPointsOffsets,this.points=[],this.setNames=[],this.setPointsLengths=[],this.setPointsOffsets=[]},i.default=r,t.exports=i.default},{"./dygraph-utils":17}],14:[function(e,t,i){(function(e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=null,t.exports=i.default}).call(this,e("_process"))},{_process:1}],15:[function(e,t,i){(function(n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(i,"__esModule",{value:!0});var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("./dygraph-utils")),o=r(e("./dygraph-default-attrs")),s=(r(e("./dygraph-options-reference")),function(e){this.dygraph_=e,this.yAxes_=[],this.xAxis_={},this.series_={},this.global_=this.dygraph_.attrs_,this.user_=this.dygraph_.user_attrs_||{},this.labels_=[],this.highlightSeries_=this.get("highlightSeriesOpts")||{},this.reparseSeries()});s.AXIS_STRING_MAPPINGS_={y:0,Y:0,y1:0,Y1:0,y2:1,Y2:1},s.axisToIndex_=function(e){if("string"==typeof e){if(s.AXIS_STRING_MAPPINGS_.hasOwnProperty(e))return s.AXIS_STRING_MAPPINGS_[e];throw"Unknown axis : "+e}if("number"==typeof e){if(0===e||1===e)return e;throw"Dygraphs only supports two y-axes, indexed from 0-1."}if(e)throw"Unknown axis : "+e;return 0},s.prototype.reparseSeries=function(){var e=this.get("labels");if(e){this.labels_=e.slice(1),this.yAxes_=[{series:[],options:{}}],this.xAxis_={options:{}},this.series_={};for(var t=this.user_.series||{},i=0;i<this.labels_.length;i++){var n=this.labels_[i],r=t[n]||{},o=s.axisToIndex_(r.axis);this.series_[n]={idx:i,yAxis:o,options:r},this.yAxes_[o]?this.yAxes_[o].series.push(n):this.yAxes_[o]={series:[n],options:{}}}var l=this.user_.axes||{};a.update(this.yAxes_[0].options,l.y||{}),this.yAxes_.length>1&&a.update(this.yAxes_[1].options,l.y2||{}),a.update(this.xAxis_.options,l.x||{})}},s.prototype.get=function(e){var t=this.getGlobalUser_(e);return null!==t?t:this.getGlobalDefault_(e)},s.prototype.getGlobalUser_=function(e){return this.user_.hasOwnProperty(e)?this.user_[e]:null},s.prototype.getGlobalDefault_=function(e){return this.global_.hasOwnProperty(e)?this.global_[e]:o.default.hasOwnProperty(e)?o.default[e]:null},s.prototype.getForAxis=function(e,t){var i,n;if("number"==typeof t)n=0===(i=t)?"y":"y2";else{if("y1"==t&&(t="y"),"y"==t)i=0;else if("y2"==t)i=1;else{if("x"!=t)throw"Unknown axis "+t;i=-1}n=t}var r=-1==i?this.xAxis_:this.yAxes_[i];if(r){var a=r.options;if(a.hasOwnProperty(e))return a[e]}if("x"!==t||"logscale"!==e){var s=this.getGlobalUser_(e);if(null!==s)return s}var l=o.default.axes[n];return l.hasOwnProperty(e)?l[e]:this.getGlobalDefault_(e)},s.prototype.getForSeries=function(e,t){if(t===this.dygraph_.getHighlightSeries()&&this.highlightSeries_.hasOwnProperty(e))return this.highlightSeries_[e];if(!this.series_.hasOwnProperty(t))throw"Unknown series: "+t;var i=this.series_[t],n=i.options;return n.hasOwnProperty(e)?n[e]:this.getForAxis(e,i.yAxis)},s.prototype.numAxes=function(){return this.yAxes_.length},s.prototype.axisForSeries=function(e){return this.series_[e].yAxis},s.prototype.axisOptions=function(e){return this.yAxes_[e].options},s.prototype.seriesForAxis=function(e){return this.yAxes_[e].series},s.prototype.seriesNames=function(){return this.labels_},i.default=s,t.exports=i.default}).call(this,e("_process"))},{"./dygraph-default-attrs":10,"./dygraph-options-reference":14,"./dygraph-utils":17,_process:1}],16:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("./dygraph-utils"));i.numericLinearTicks=function(e,t,i,n,a,o){return r(e,t,i,(function(e){return"logscale"!==e&&n(e)}),a,o)};var r=function(e,t,i,r,a,o){var s,l,c,d,h=r("pixelsPerLabel"),u=[];if(o)for(s=0;s<o.length;s++)u.push({v:o[s]});else{if(r("logscale")){d=Math.floor(i/h);var p=n.binarySearch(e,g,1),f=n.binarySearch(t,g,-1);-1==p&&(p=0),-1==f&&(f=g.length-1);var m=null;if(f-p>=d/4){for(var v=f;v>=p;v--){var _=g[v],b=Math.log(_/e)/Math.log(t/e)*i,w={v:_};null===m||Math.abs(b-m.pixel_coord)>=h?m={tickValue:_,pixel_coord:b}:w.label="",u.push(w)}u.reverse()}}if(0===u.length){var y,x;r("labelsKMG2")?(y=[1,2,4,8,16,32,64,128,256],x=16):(y=[1,2,5,10,20,50,100],x=10);var C,S,T,k=Math.ceil(i/h),A=Math.abs(t-e)/k,P=Math.floor(Math.log(A)/Math.log(x)),D=Math.pow(x,P);for(l=0;l<y.length&&(C=D*y[l],S=Math.floor(e/C)*C,T=Math.ceil(t/C)*C,!(i/(d=Math.abs(T-S)/C)>h));l++);for(S>T&&(C*=-1),s=0;s<=d;s++)c=S+s*C,u.push({v:c})}}var E=r("axisLabelFormatter");for(s=0;s<u.length;s++)void 0===u[s].label&&(u[s].label=E.call(a,u[s].v,0,r,a));return u};i.numericTicks=r,i.dateTicker=function(e,t,i,n,r,a){var o=m(e,t,i,n);return o>=0?_(e,t,o,n,r):[]};var a={MILLISECONDLY:0,TWO_MILLISECONDLY:1,FIVE_MILLISECONDLY:2,TEN_MILLISECONDLY:3,FIFTY_MILLISECONDLY:4,HUNDRED_MILLISECONDLY:5,FIVE_HUNDRED_MILLISECONDLY:6,SECONDLY:7,TWO_SECONDLY:8,FIVE_SECONDLY:9,TEN_SECONDLY:10,THIRTY_SECONDLY:11,MINUTELY:12,TWO_MINUTELY:13,FIVE_MINUTELY:14,TEN_MINUTELY:15,THIRTY_MINUTELY:16,HOURLY:17,TWO_HOURLY:18,SIX_HOURLY:19,DAILY:20,TWO_DAILY:21,WEEKLY:22,MONTHLY:23,QUARTERLY:24,BIANNUAL:25,ANNUAL:26,DECADAL:27,CENTENNIAL:28,NUM_GRANULARITIES:29};i.Granularity=a;var o=0,s=1,l=2,c=3,d=4,h=5,u=6,p=7,f=[];f[a.MILLISECONDLY]={datefield:u,step:1,spacing:1},f[a.TWO_MILLISECONDLY]={datefield:u,step:2,spacing:2},f[a.FIVE_MILLISECONDLY]={datefield:u,step:5,spacing:5},f[a.TEN_MILLISECONDLY]={datefield:u,step:10,spacing:10},f[a.FIFTY_MILLISECONDLY]={datefield:u,step:50,spacing:50},f[a.HUNDRED_MILLISECONDLY]={datefield:u,step:100,spacing:100},f[a.FIVE_HUNDRED_MILLISECONDLY]={datefield:u,step:500,spacing:500},f[a.SECONDLY]={datefield:h,step:1,spacing:1e3},f[a.TWO_SECONDLY]={datefield:h,step:2,spacing:2e3},f[a.FIVE_SECONDLY]={datefield:h,step:5,spacing:5e3},f[a.TEN_SECONDLY]={datefield:h,step:10,spacing:1e4},f[a.THIRTY_SECONDLY]={datefield:h,step:30,spacing:3e4},f[a.MINUTELY]={datefield:d,step:1,spacing:6e4},f[a.TWO_MINUTELY]={datefield:d,step:2,spacing:12e4},f[a.FIVE_MINUTELY]={datefield:d,step:5,spacing:3e5},f[a.TEN_MINUTELY]={datefield:d,step:10,spacing:6e5},f[a.THIRTY_MINUTELY]={datefield:d,step:30,spacing:18e5},f[a.HOURLY]={datefield:c,step:1,spacing:36e5},f[a.TWO_HOURLY]={datefield:c,step:2,spacing:72e5},f[a.SIX_HOURLY]={datefield:c,step:6,spacing:216e5},f[a.DAILY]={datefield:l,step:1,spacing:864e5},f[a.TWO_DAILY]={datefield:l,step:2,spacing:1728e5},f[a.WEEKLY]={datefield:l,step:7,spacing:6048e5},f[a.MONTHLY]={datefield:s,step:1,spacing:2629817280},f[a.QUARTERLY]={datefield:s,step:3,spacing:7889451840.000001},f[a.BIANNUAL]={datefield:s,step:6,spacing:432e5*365.2524},f[a.ANNUAL]={datefield:o,step:1,spacing:864e5*365.2524},f[a.DECADAL]={datefield:o,step:10,spacing:315578073600},f[a.CENTENNIAL]={datefield:o,step:100,spacing:3155780736e3};var g=function(){for(var e=[],t=-39;t<=39;t++)for(var i=Math.pow(10,t),n=1;n<=9;n++){var r=i*n;e.push(r)}return e}(),m=function(e,t,i,n){for(var r=n("pixelsPerLabel"),o=0;o<a.NUM_GRANULARITIES;o++)if(i/v(e,t,o)>=r)return o;return-1},v=function(e,t,i){var n=f[i].spacing;return Math.round(1*(t-e)/n)},_=function(e,t,i,r,g){var m=r("axisLabelFormatter"),v=r("labelsUTC")?n.DateAccessorsUTC:n.DateAccessorsLocal,_=f[i].datefield,b=f[i].step,w=f[i].spacing,y=new Date(e),x=[];x[o]=v.getFullYear(y),x[s]=v.getMonth(y),x[l]=v.getDate(y),x[c]=v.getHours(y),x[d]=v.getMinutes(y),x[h]=v.getSeconds(y),x[u]=v.getMilliseconds(y);var C=x[_]%b;i==a.WEEKLY&&(C=v.getDay(y)),x[_]-=C;for(var S=_+1;S<p;S++)x[S]=S===l?1:0;var T=[],k=v.makeDate.apply(null,x),A=k.getTime();if(i<=a.HOURLY)for(A<e&&(A+=w,k=new Date(A));A<=t;)T.push({v:A,label:m.call(g,k,i,r,g)}),A+=w,k=new Date(A);else for(A<e&&(x[_]+=b,A=(k=v.makeDate.apply(null,x)).getTime());A<=t;)(i>=a.DAILY||v.getHours(k)%b==0)&&T.push({v:A,label:m.call(g,k,i,r,g)}),x[_]+=b,A=(k=v.makeDate.apply(null,x)).getTime();return T};i.getDateAxis=_},{"./dygraph-utils":17}],17:[function(e,t,i){"use strict";function n(e){return!e.pageX||e.pageX<0?0:e.pageX}function r(e){return!e.pageY||e.pageY<0?0:e.pageY}function a(e,t){var i=Math.min(Math.max(1,t||2),21);return Math.abs(e)<.001&&0!==e?e.toExponential(i-1):e.toPrecision(i)}function o(e){return e<10?"0"+e:""+e}function s(e,t,i,n){var r=o(e)+":"+o(t);if(i&&(r+=":"+o(i),n)){var a=""+n;r+="."+("000"+a).substring(a.length)}return r}function l(e,t){var i=t?w:b,n=new Date(e),r=i.getFullYear(n),a=i.getMonth(n),l=i.getDate(n),c=i.getHours(n),d=i.getMinutes(n),h=i.getSeconds(n),u=i.getMilliseconds(n),p=r+"/"+o(a+1)+"/"+o(l);return 3600*c+60*d+h+.001*u&&(p+=" "+s(c,d,h,u)),p}function c(e,t){var i=Math.pow(10,t);return Math.round(e*i)/i}function d(e){return new Date(e).getTime()}function h(e){var t=typeof e;return("object"==t||"function"==t&&"function"==typeof e.item)&&null!==e&&"number"==typeof e.length&&3!==e.nodeType}function u(e,t,i,n){t=t||0,i=i||e.length,this.hasNext=!0,this.peek=null,this.start_=t,this.array_=e,this.predicate_=n,this.end_=Math.min(e.length,t+i),this.nextIdx_=t-1,this.next()}function p(e,t){return t<0?1/Math.pow(e,-t):Math.pow(e,t)}function f(e){var t=S.exec(e);if(!t)return null;var i=parseInt(t[1],10),n=parseInt(t[2],10),r=parseInt(t[3],10);return t[4]?{r:i,g:n,b:r,a:parseFloat(t[4])}:{r:i,g:n,b:r}}function g(e,t){var i=t("sigFigs");if(null!==i)return a(e,i);var n,r=t("digitsAfterDecimal"),o=t("maxNumberWidth"),s=t("labelsKMB"),l=t("labelsKMG2");if(n=0!==e&&(Math.abs(e)>=Math.pow(10,o)||Math.abs(e)<Math.pow(10,-r))?e.toExponential(r):""+c(e,r),s||l){var d,h=[],u=[];s&&(d=1e3,h=T),l&&(s&&console.warn("Setting both labelsKMB and labelsKMG2. Pick one!"),d=1024,h=k,u=A);for(var f=Math.abs(e),g=p(d,h.length),m=h.length-1;m>=0;m--,g/=d)if(f>=g){n=c(e/g,r)+h[m];break}if(l){var v=String(e.toExponential()).split("e-");2===v.length&&v[1]>=3&&v[1]<=24&&(n=v[1]%3>0?c(v[0]/p(10,v[1]%3),r):Number(v[0]).toFixed(2),n+=u[Math.floor(v[1]/3)-1])}}return n}Object.defineProperty(i,"__esModule",{value:!0}),i.removeEvent=function(e,t,i){e.removeEventListener(t,i,!1)},i.cancelEvent=function(e){return(e=e||window.event).stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.cancel=!0,e.returnValue=!1,!1},i.hsvToRGB=function(e,t,i){var n,r,a;if(0===t)n=i,r=i,a=i;else{var o=Math.floor(6*e),s=6*e-o,l=i*(1-t),c=i*(1-t*s),d=i*(1-t*(1-s));switch(o){case 1:n=c,r=i,a=l;break;case 2:n=l,r=i,a=d;break;case 3:n=l,r=c,a=i;break;case 4:n=d,r=l,a=i;break;case 5:n=i,r=l,a=c;break;case 6:case 0:n=i,r=d,a=l}}return"rgb("+(n=Math.floor(255*n+.5))+","+(r=Math.floor(255*r+.5))+","+(a=Math.floor(255*a+.5))+")"},i.findPos=function(e){var t=e.getBoundingClientRect(),i=window,n=document.documentElement;return{x:t.left+(i.pageXOffset||n.scrollLeft),y:t.top+(i.pageYOffset||n.scrollTop)}},i.pageX=n,i.pageY=r,i.dragGetX_=function(e,t){return n(e)-t.px},i.dragGetY_=function(e,t){return r(e)-t.py},i.isOK=function(e){return!!e&&!isNaN(e)},i.isValidPoint=function(e,t){return!!e&&null!==e.yval&&null!==e.x&&void 0!==e.x&&null!==e.y&&void 0!==e.y&&!(isNaN(e.x)||!t&&isNaN(e.y))},i.floatFormat=a,i.zeropad=o,i.hmsString_=s,i.dateString_=l,i.round_=c,i.binarySearch=function(e,t,i,n,r){for(var a=!0;a;){var o=e,s=t,l=i,c=n,d=r;if(a=!1,null!==c&&void 0!==c&&null!==d&&void 0!==d||(c=0,d=s.length-1),c>d)return-1;null!==l&&void 0!==l||(l=0);var h,u=function(e){return e>=0&&e<s.length},p=parseInt((c+d)/2,10),f=s[p];if(f==o)return p;if(f>o){if(l>0&&u(h=p-1)&&s[h]<o)return p;e=o,t=s,i=l,n=c,r=p-1,a=!0,u=p=f=h=void 0}else{if(!(f<o))return-1;if(l<0&&u(h=p+1)&&s[h]>o)return p;e=o,t=s,i=l,n=p+1,r=d,a=!0,u=p=f=h=void 0}}},i.dateParser=function(e){var t,i;if((-1==e.search("-")||-1!=e.search("T")||-1!=e.search("Z"))&&(i=d(e))&&!isNaN(i))return i;if(-1!=e.search("-")){for(t=e.replace("-","/","g");-1!=t.search("-");)t=t.replace("-","/");i=d(t)}else i=8==e.length?d(t=e.substr(0,4)+"/"+e.substr(4,2)+"/"+e.substr(6,2)):d(e);return i&&!isNaN(i)||console.error("Couldn't parse "+e+" as a date"),i},i.dateStrToMillis=d,i.update=function(e,t){if(void 0!==t&&null!==t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},i.updateDeep=function e(t,i){if(void 0!==i&&null!==i)for(var n in i)i.hasOwnProperty(n)&&(null===i[n]?t[n]=null:h(i[n])?t[n]=i[n].slice():function(e){return"object"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}(i[n])||"object"!=typeof i[n]?t[n]=i[n]:("object"==typeof t[n]&&null!==t[n]||(t[n]={}),e(t[n],i[n])));return t},i.isArrayLike=h,i.isDateLike=function(e){return"object"==typeof e&&null!==e&&"function"==typeof e.getTime},i.clone=function e(t){for(var i=[],n=0;n<t.length;n++)h(t[n])?i.push(e(t[n])):i.push(t[n]);return i},i.createCanvas=function(){return document.createElement("canvas")},i.getContextPixelRatio=function(e){try{var t=window.devicePixelRatio,i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return void 0!==t?t/i:1}catch(e){return 1}},i.Iterator=u,i.createIterator=function(e,t,i,n){return new u(e,t,i,n)},i.repeatAndCleanup=function(e,t,i,n){var r,a=0,o=(new Date).getTime();if(e(a),1!=t){var s=t-1;!function l(){a>=t||y.call(window,(function(){var t=(new Date).getTime()-o;r=a;var c=(a=Math.floor(t/i))-r;a+c>s||a>=s?(e(s),n()):(0!==c&&e(a),l())}))}()}else n()},i.isPixelChangingOptionList=function(e,t){var i={};if(e)for(var n=1;n<e.length;n++)i[e[n]]=!0;var r=function(e){for(var t in e)if(e.hasOwnProperty(t)&&!x[t])return!0;return!1};for(var a in t)if(t.hasOwnProperty(a))if("highlightSeriesOpts"==a||i[a]&&!t.series){if(r(t[a]))return!0}else if("series"==a||"axes"==a){var o=t[a];for(var s in o)if(o.hasOwnProperty(s)&&r(o[s]))return!0}else if(!x[a])return!0;return!1},i.detectLineDelimiter=function(e){for(var t=0;t<e.length;t++){var i=e.charAt(t);if("\r"===i)return t+1<e.length&&"\n"===e.charAt(t+1)?"\r\n":i;if("\n"===i)return t+1<e.length&&"\r"===e.charAt(t+1)?"\n\r":i}return null},i.isNodeContainedBy=function(e,t){if(null===t||null===e)return!1;for(var i=e;i&&i!==t;)i=i.parentNode;return i===t},i.pow=p,i.toRGB_=function(e){var t=f(e);if(t)return t;var i=document.createElement("div");i.style.backgroundColor=e,i.style.visibility="hidden",document.body.appendChild(i);var n=window.getComputedStyle(i,null).backgroundColor;return document.body.removeChild(i),f(n)},i.isCanvasSupported=function(e){try{(e||document.createElement("canvas")).getContext("2d")}catch(e){return!1}return!0},i.parseFloat_=function(e,t,i){var n=parseFloat(e);if(!isNaN(n))return n;if(/^ *$/.test(e))return null;if(/^ *nan *$/i.test(e))return NaN;var r="Unable to parse '"+e+"' as a number";return void 0!==i&&void 0!==t&&(r+=" on line "+(1+(t||0))+" ('"+i+"') of CSV."),console.error(r),null},i.numberValueFormatter=g,i.numberAxisLabelFormatter=function(e,t,i){return g.call(this,e,i)},i.dateAxisLabelFormatter=function(e,t,i){var n=i("labelsUTC")?w:b,r=n.getFullYear(e),a=n.getMonth(e),l=n.getDate(e),c=n.getHours(e),d=n.getMinutes(e),h=n.getSeconds(e),u=n.getMilliseconds(e);if(t>=m.Granularity.DECADAL)return""+r;if(t>=m.Granularity.MONTHLY)return P[a]+"&#160;"+r;if(0===3600*c+60*d+h+.001*u||t>=m.Granularity.DAILY)return o(l)+"&#160;"+P[a];if(t<m.Granularity.SECONDLY){var p=""+u;return o(h)+"."+("000"+p).substring(p.length)}return t>m.Granularity.MINUTELY?s(c,d,h,0):s(c,d,h,u)},i.dateValueFormatter=function(e,t){return l(e,t("labelsUTC"))};var m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("./dygraph-tickers"));i.LOG_SCALE=10;var v=Math.log(10);i.LN_TEN=v;var _=function(e){return Math.log(e)/v};i.log10=_,i.logRangeFraction=function(e,t,i){var n=_(e),r=n+i*(_(t)-n);return Math.pow(10,r)},i.DOTTED_LINE=[2,2],i.DASHED_LINE=[7,3],i.DOT_DASH_LINE=[7,2,2,2],i.HORIZONTAL=1,i.VERTICAL=2,i.getContext=function(e){return e.getContext("2d")},i.addEvent=function(e,t,i){e.addEventListener(t,i,!1)};var b={getFullYear:function(e){return e.getFullYear()},getMonth:function(e){return e.getMonth()},getDate:function(e){return e.getDate()},getHours:function(e){return e.getHours()},getMinutes:function(e){return e.getMinutes()},getSeconds:function(e){return e.getSeconds()},getMilliseconds:function(e){return e.getMilliseconds()},getDay:function(e){return e.getDay()},makeDate:function(e,t,i,n,r,a,o){return new Date(e,t,i,n,r,a,o)}};i.DateAccessorsLocal=b;var w={getFullYear:function(e){return e.getUTCFullYear()},getMonth:function(e){return e.getUTCMonth()},getDate:function(e){return e.getUTCDate()},getHours:function(e){return e.getUTCHours()},getMinutes:function(e){return e.getUTCMinutes()},getSeconds:function(e){return e.getUTCSeconds()},getMilliseconds:function(e){return e.getUTCMilliseconds()},getDay:function(e){return e.getUTCDay()},makeDate:function(e,t,i,n,r,a,o){return new Date(Date.UTC(e,t,i,n,r,a,o))}};i.DateAccessorsUTC=w,u.prototype.next=function(){if(!this.hasNext)return null;for(var e=this.peek,t=this.nextIdx_+1,i=!1;t<this.end_;){if(!this.predicate_||this.predicate_(this.array_,t)){this.peek=this.array_[t],i=!0;break}t++}return this.nextIdx_=t,i||(this.hasNext=!1,this.peek=null),e};var y=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};i.requestAnimFrame=y;var x={annotationClickHandler:!0,annotationDblClickHandler:!0,annotationMouseOutHandler:!0,annotationMouseOverHandler:!0,axisLineColor:!0,axisLineWidth:!0,clickCallback:!0,drawCallback:!0,drawHighlightPointCallback:!0,drawPoints:!0,drawPointCallback:!0,drawGrid:!0,fillAlpha:!0,gridLineColor:!0,gridLineWidth:!0,hideOverlayOnMouseOut:!0,highlightCallback:!0,highlightCircleSize:!0,interactionModel:!0,labelsDiv:!0,labelsKMB:!0,labelsKMG2:!0,labelsSeparateLines:!0,labelsShowZeroValues:!0,legend:!0,panEdgeFraction:!0,pixelsPerYLabel:!0,pointClickCallback:!0,pointSize:!0,rangeSelectorPlotFillColor:!0,rangeSelectorPlotFillGradientColor:!0,rangeSelectorPlotStrokeColor:!0,rangeSelectorBackgroundStrokeColor:!0,rangeSelectorBackgroundLineWidth:!0,rangeSelectorPlotLineWidth:!0,rangeSelectorForegroundStrokeColor:!0,rangeSelectorForegroundLineWidth:!0,rangeSelectorAlpha:!0,showLabelsOnHighlight:!0,showRoller:!0,strokeWidth:!0,underlayCallback:!0,unhighlightCallback:!0,zoomCallback:!0},C={DEFAULT:function(e,t,i,n,r,a,o){i.beginPath(),i.fillStyle=a,i.arc(n,r,o,0,2*Math.PI,!1),i.fill()}};i.Circles=C;var S=/^rgba?\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})(?:,\s*([01](?:\.\d+)?))?\)$/,T=["K","M","B","T","Q"],k=["k","M","G","T","P","E","Z","Y"],A=["m","u","n","p","f","a","z","y"],P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},{"./dygraph-tickers":16}],18:[function(e,t,i){(function(n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(i,"__esModule",{value:!0});var o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=a(e("./dygraph-layout")),l=a(e("./dygraph-canvas")),c=a(e("./dygraph-options")),d=a(e("./dygraph-interaction-model")),h=r(e("./dygraph-tickers")),u=r(e("./dygraph-utils")),p=a(e("./dygraph-default-attrs")),f=(a(e("./dygraph-options-reference")),e("./iframe-tarp")),g=a(f),m=a(e("./datahandler/default")),v=a(e("./datahandler/bars-error")),_=a(e("./datahandler/bars-custom")),b=a(e("./datahandler/default-fractions")),w=a(e("./datahandler/bars-fractions")),y=a(e("./datahandler/bars")),x=a(e("./plugins/annotations")),C=a(e("./plugins/axes")),S=a(e("./plugins/chart-labels")),T=a(e("./plugins/grid")),k=a(e("./plugins/legend")),A=a(e("./plugins/range-selector")),P=a(e("./dygraph-gviz")),D=function(e,t,i){this.__init__(e,t,i)};D.NAME="Dygraph",D.VERSION="2.1.0",D.DEFAULT_ROLL_PERIOD=1,D.DEFAULT_WIDTH=480,D.DEFAULT_HEIGHT=320,D.ANIMATION_STEPS=12,D.ANIMATION_DURATION=200,D.Plotters=l.default._Plotters,D.addedAnnotationCSS=!1,D.prototype.__init__=function(e,t,i){if(this.is_initial_draw_=!0,this.readyFns_=[],null!==i&&void 0!==i||(i={}),i=D.copyUserAttrs_(i),"string"==typeof e&&(e=document.getElementById(e)),!e)throw new Error("Constructing dygraph with a non-existent div!");this.maindiv_=e,this.file_=t,this.rollPeriod_=i.rollPeriod||D.DEFAULT_ROLL_PERIOD,this.previousVerticalX_=-1,this.fractions_=i.fractions||!1,this.dateWindow_=i.dateWindow||null,this.annotations_=[],e.innerHTML="",""===e.style.width&&i.width&&(e.style.width=i.width+"px"),""===e.style.height&&i.height&&(e.style.height=i.height+"px"),""===e.style.height&&0===e.clientHeight&&(e.style.height=D.DEFAULT_HEIGHT+"px",""===e.style.width&&(e.style.width=D.DEFAULT_WIDTH+"px")),this.width_=e.clientWidth||i.width||0,this.height_=e.clientHeight||i.height||0,i.stackedGraph&&(i.fillGraph=!0),this.user_attrs_={},u.update(this.user_attrs_,i),this.attrs_={},u.updateDeep(this.attrs_,p.default),this.boundaryIds_=[],this.setIndexByName_={},this.datasetIndex_=[],this.registeredEvents_=[],this.eventListeners_={},this.attributes_=new c.default(this),this.createInterface_(),this.plugins_=[];for(var n=D.PLUGINS.concat(this.getOption("plugins")),r=0;r<n.length;r++){var a,o=n[r],s={plugin:a=void 0!==o.activate?o:new o,events:{},options:{},pluginOptions:{}},l=a.activate(this);for(var d in l)l.hasOwnProperty(d)&&(s.events[d]=l[d]);this.plugins_.push(s)}for(r=0;r<this.plugins_.length;r++){var h=this.plugins_[r];for(var d in h.events)if(h.events.hasOwnProperty(d)){var f=h.events[d],g=[h.plugin,f];d in this.eventListeners_?this.eventListeners_[d].push(g):this.eventListeners_[d]=[g]}}this.createDragInterface_(),this.start_()},D.prototype.cascadeEvents_=function(e,t){if(!(e in this.eventListeners_))return!1;var i={dygraph:this,cancelable:!1,defaultPrevented:!1,preventDefault:function(){if(!i.cancelable)throw"Cannot call preventDefault on non-cancelable event.";i.defaultPrevented=!0},propagationStopped:!1,stopPropagation:function(){i.propagationStopped=!0}};u.update(i,t);var n=this.eventListeners_[e];if(n)for(var r=n.length-1;r>=0;r--){var a=n[r][0];if(n[r][1].call(a,i),i.propagationStopped)break}return i.defaultPrevented},D.prototype.getPluginInstance_=function(e){for(var t=0;t<this.plugins_.length;t++){var i=this.plugins_[t];if(i.plugin instanceof e)return i.plugin}return null},D.prototype.isZoomed=function(e){var t=!!this.dateWindow_;if("x"===e)return t;var i=this.axes_.map((function(e){return!!e.valueRange})).indexOf(!0)>=0;if(null===e||void 0===e)return t||i;if("y"===e)return i;throw new Error("axis parameter is ["+e+"] must be null, 'x' or 'y'.")},D.prototype.toString=function(){var e=this.maindiv_;return"[Dygraph "+(e&&e.id?e.id:e)+"]"},D.prototype.attr_=function(e,t){return t?this.attributes_.getForSeries(e,t):this.attributes_.get(e)},D.prototype.getOption=function(e,t){return this.attr_(e,t)},D.prototype.getNumericOption=function(e,t){return this.getOption(e,t)},D.prototype.getStringOption=function(e,t){return this.getOption(e,t)},D.prototype.getBooleanOption=function(e,t){return this.getOption(e,t)},D.prototype.getFunctionOption=function(e,t){return this.getOption(e,t)},D.prototype.getOptionForAxis=function(e,t){return this.attributes_.getForAxis(e,t)},D.prototype.optionsViewForAxis_=function(e){var t=this;return function(i){var n=t.user_attrs_.axes;return n&&n[e]&&n[e].hasOwnProperty(i)?n[e][i]:("x"!==e||"logscale"!==i)&&(void 0!==t.user_attrs_[i]?t.user_attrs_[i]:(n=t.attrs_.axes)&&n[e]&&n[e].hasOwnProperty(i)?n[e][i]:"y"==e&&t.axes_[0].hasOwnProperty(i)?t.axes_[0][i]:"y2"==e&&t.axes_[1].hasOwnProperty(i)?t.axes_[1][i]:t.attr_(i))}},D.prototype.rollPeriod=function(){return this.rollPeriod_},D.prototype.xAxisRange=function(){return this.dateWindow_?this.dateWindow_:this.xAxisExtremes()},D.prototype.xAxisExtremes=function(){var e=this.getNumericOption("xRangePad")/this.plotter_.area.w;if(0===this.numRows())return[0-e,1+e];var t=this.rawData_[0][0],i=this.rawData_[this.rawData_.length-1][0];if(e){var n=i-t;t-=n*e,i+=n*e}return[t,i]},D.prototype.yAxisExtremes=function(){var e=this.gatherDatasets_(this.rolledSeries_,null).extremes,t=this.axes_;this.computeYAxisRanges_(e);var i=this.axes_;return this.axes_=t,i.map((function(e){return e.extremeRange}))},D.prototype.yAxisRange=function(e){if(void 0===e&&(e=0),e<0||e>=this.axes_.length)return null;var t=this.axes_[e];return[t.computedValueRange[0],t.computedValueRange[1]]},D.prototype.yAxisRanges=function(){for(var e=[],t=0;t<this.axes_.length;t++)e.push(this.yAxisRange(t));return e},D.prototype.toDomCoords=function(e,t,i){return[this.toDomXCoord(e),this.toDomYCoord(t,i)]},D.prototype.toDomXCoord=function(e){if(null===e)return null;var t=this.plotter_.area,i=this.xAxisRange();return t.x+(e-i[0])/(i[1]-i[0])*t.w},D.prototype.toDomYCoord=function(e,t){var i=this.toPercentYCoord(e,t);if(null===i)return null;var n=this.plotter_.area;return n.y+i*n.h},D.prototype.toDataCoords=function(e,t,i){return[this.toDataXCoord(e),this.toDataYCoord(t,i)]},D.prototype.toDataXCoord=function(e){if(null===e)return null;var t=this.plotter_.area,i=this.xAxisRange();if(this.attributes_.getForAxis("logscale","x")){var n=(e-t.x)/t.w;return u.logRangeFraction(i[0],i[1],n)}return i[0]+(e-t.x)/t.w*(i[1]-i[0])},D.prototype.toDataYCoord=function(e,t){if(null===e)return null;var i=this.plotter_.area,n=this.yAxisRange(t);if(void 0===t&&(t=0),this.attributes_.getForAxis("logscale",t)){var r=(e-i.y)/i.h;return u.logRangeFraction(n[1],n[0],r)}return n[0]+(i.y+i.h-e)/i.h*(n[1]-n[0])},D.prototype.toPercentYCoord=function(e,t){if(null===e)return null;void 0===t&&(t=0);var i,n=this.yAxisRange(t);if(this.attributes_.getForAxis("logscale",t)){var r=u.log10(n[0]),a=u.log10(n[1]);i=(a-u.log10(e))/(a-r)}else i=(n[1]-e)/(n[1]-n[0]);return i},D.prototype.toPercentXCoord=function(e){if(null===e)return null;var t,i=this.xAxisRange();if(!0===this.attributes_.getForAxis("logscale","x")){var n=u.log10(i[0]),r=u.log10(i[1]);t=(u.log10(e)-n)/(r-n)}else t=(e-i[0])/(i[1]-i[0]);return t},D.prototype.numColumns=function(){return this.rawData_?this.rawData_[0]?this.rawData_[0].length:this.attr_("labels").length:0},D.prototype.numRows=function(){return this.rawData_?this.rawData_.length:0},D.prototype.getValue=function(e,t){return e<0||e>this.rawData_.length||t<0||t>this.rawData_[e].length?null:this.rawData_[e][t]},D.prototype.createInterface_=function(){var e=this.maindiv_;this.graphDiv=document.createElement("div"),this.graphDiv.style.textAlign="left",this.graphDiv.style.position="relative",e.appendChild(this.graphDiv),this.canvas_=u.createCanvas(),this.canvas_.style.position="absolute",this.hidden_=this.createPlotKitCanvas_(this.canvas_),this.canvas_ctx_=u.getContext(this.canvas_),this.hidden_ctx_=u.getContext(this.hidden_),this.resizeElements_(),this.graphDiv.appendChild(this.hidden_),this.graphDiv.appendChild(this.canvas_),this.mouseEventElement_=this.createMouseEventElement_(),this.layout_=new s.default(this);var t=this;this.mouseMoveHandler_=function(e){t.mouseMove_(e)},this.mouseOutHandler_=function(e){var i=e.target||e.fromElement,n=e.relatedTarget||e.toElement;u.isNodeContainedBy(i,t.graphDiv)&&!u.isNodeContainedBy(n,t.graphDiv)&&t.mouseOut_(e)},this.addAndTrackEvent(window,"mouseout",this.mouseOutHandler_),this.addAndTrackEvent(this.mouseEventElement_,"mousemove",this.mouseMoveHandler_),this.resizeHandler_||(this.resizeHandler_=function(e){t.resize()},this.addAndTrackEvent(window,"resize",this.resizeHandler_))},D.prototype.resizeElements_=function(){this.graphDiv.style.width=this.width_+"px",this.graphDiv.style.height=this.height_+"px";var e=this.getNumericOption("pixelRatio"),t=e||u.getContextPixelRatio(this.canvas_ctx_);this.canvas_.width=this.width_*t,this.canvas_.height=this.height_*t,this.canvas_.style.width=this.width_+"px",this.canvas_.style.height=this.height_+"px",1!==t&&this.canvas_ctx_.scale(t,t);var i=e||u.getContextPixelRatio(this.hidden_ctx_);this.hidden_.width=this.width_*i,this.hidden_.height=this.height_*i,this.hidden_.style.width=this.width_+"px",this.hidden_.style.height=this.height_+"px",1!==i&&this.hidden_ctx_.scale(i,i)},D.prototype.destroy=function(){this.canvas_ctx_.restore(),this.hidden_ctx_.restore();for(var e=this.plugins_.length-1;e>=0;e--){var t=this.plugins_.pop();t.plugin.destroy&&t.plugin.destroy()}this.removeTrackedEvents_(),u.removeEvent(window,"mouseout",this.mouseOutHandler_),u.removeEvent(this.mouseEventElement_,"mousemove",this.mouseMoveHandler_),u.removeEvent(window,"resize",this.resizeHandler_),this.resizeHandler_=null,function e(t){for(;t.hasChildNodes();)e(t.firstChild),t.removeChild(t.firstChild)}(this.maindiv_);var i=function(e){for(var t in e)"object"==typeof e[t]&&(e[t]=null)};i(this.layout_),i(this.plotter_),i(this)},D.prototype.createPlotKitCanvas_=function(e){var t=u.createCanvas();return t.style.position="absolute",t.style.top=e.style.top,t.style.left=e.style.left,t.width=this.width_,t.height=this.height_,t.style.width=this.width_+"px",t.style.height=this.height_+"px",t},D.prototype.createMouseEventElement_=function(){return this.canvas_},D.prototype.setColors_=function(){var e=this.getLabels(),t=e.length-1;this.colors_=[],this.colorsMap_={};for(var i=this.getNumericOption("colorSaturation")||1,n=this.getNumericOption("colorValue")||.5,r=Math.ceil(t/2),a=this.getOption("colors"),o=this.visibility(),s=0;s<t;s++)if(o[s]){var l=e[s+1],c=this.attributes_.getForSeries("color",l);if(!c)if(a)c=a[s%a.length];else{var d=1*(s%2?r+(s+1)/2:Math.ceil((s+1)/2))/(1+t);c=u.hsvToRGB(d,i,n)}this.colors_.push(c),this.colorsMap_[l]=c}},D.prototype.getColors=function(){return this.colors_},D.prototype.getPropertiesForSeries=function(e){for(var t=-1,i=this.getLabels(),n=1;n<i.length;n++)if(i[n]==e){t=n;break}return-1==t?null:{name:e,column:t,visible:this.visibility()[t-1],color:this.colorsMap_[e],axis:1+this.attributes_.axisForSeries(e)}},D.prototype.createRollInterface_=function(){var e=this,t=this.roller_;t||(this.roller_=t=document.createElement("input"),t.type="text",t.style.display="none",t.className="dygraph-roller",this.graphDiv.appendChild(t));var i=this.getBooleanOption("showRoller")?"block":"none",n=this.getArea(),r={top:n.y+n.h-25+"px",left:n.x+1+"px",display:i};t.size="2",t.value=this.rollPeriod_,u.update(t.style,r),t.onchange=function(){return e.adjustRoll(t.value)}},D.prototype.createDragInterface_=function(){var e={isZooming:!1,isPanning:!1,is2DPan:!1,dragStartX:null,dragStartY:null,dragEndX:null,dragEndY:null,dragDirection:null,prevEndX:null,prevEndY:null,prevDragDirection:null,cancelNextDblclick:!1,initialLeftmostDate:null,xUnitsPerPixel:null,dateRange:null,px:0,py:0,boundedDates:null,boundedValues:null,tarp:new g.default,initializeMouseDown:function(e,t,i){e.preventDefault?e.preventDefault():(e.returnValue=!1,e.cancelBubble=!0);var n=u.findPos(t.canvas_);i.px=n.x,i.py=n.y,i.dragStartX=u.dragGetX_(e,i),i.dragStartY=u.dragGetY_(e,i),i.cancelNextDblclick=!1,i.tarp.cover()},destroy:function(){var e=this;if((e.isZooming||e.isPanning)&&(e.isZooming=!1,e.dragStartX=null,e.dragStartY=null),e.isPanning){e.isPanning=!1,e.draggingDate=null,e.dateRange=null;for(var t=0;t<i.axes_.length;t++)delete i.axes_[t].draggingValue,delete i.axes_[t].dragValueRange}e.tarp.uncover()}},t=this.getOption("interactionModel"),i=this;for(var n in t)t.hasOwnProperty(n)&&this.addAndTrackEvent(this.mouseEventElement_,n,function(t){return function(n){t(n,i,e)}}(t[n]));t.willDestroyContextMyself||this.addAndTrackEvent(document,"mouseup",(function(t){e.destroy()}))},D.prototype.drawZoomRect_=function(e,t,i,n,r,a,o,s){var l=this.canvas_ctx_;a==u.HORIZONTAL?l.clearRect(Math.min(t,o),this.layout_.getPlotArea().y,Math.abs(t-o),this.layout_.getPlotArea().h):a==u.VERTICAL&&l.clearRect(this.layout_.getPlotArea().x,Math.min(n,s),this.layout_.getPlotArea().w,Math.abs(n-s)),e==u.HORIZONTAL?i&&t&&(l.fillStyle="rgba(128,128,128,0.33)",l.fillRect(Math.min(t,i),this.layout_.getPlotArea().y,Math.abs(i-t),this.layout_.getPlotArea().h)):e==u.VERTICAL&&r&&n&&(l.fillStyle="rgba(128,128,128,0.33)",l.fillRect(this.layout_.getPlotArea().x,Math.min(n,r),this.layout_.getPlotArea().w,Math.abs(r-n)))},D.prototype.clearZoomRect_=function(){this.currentZoomRectArgs_=null,this.canvas_ctx_.clearRect(0,0,this.width_,this.height_)},D.prototype.doZoomX_=function(e,t){this.currentZoomRectArgs_=null;var i=this.toDataXCoord(e),n=this.toDataXCoord(t);this.doZoomXDates_(i,n)},D.prototype.doZoomXDates_=function(e,t){var i=this,n=this.xAxisRange(),r=[e,t],a=this.getFunctionOption("zoomCallback");this.doAnimatedZoom(n,r,null,null,(function(){a&&a.call(i,e,t,i.yAxisRanges())}))},D.prototype.doZoomY_=function(e,t){var i=this;this.currentZoomRectArgs_=null;for(var n=this.yAxisRanges(),r=[],a=0;a<this.axes_.length;a++){var s=this.toDataYCoord(e,a),l=this.toDataYCoord(t,a);r.push([l,s])}var c=this.getFunctionOption("zoomCallback");this.doAnimatedZoom(null,null,n,r,(function(){if(c){var e=i.xAxisRange(),t=o(e,2),n=t[0],r=t[1];c.call(i,n,r,i.yAxisRanges())}}))},D.zoomAnimationFunction=function(e,t){return(1-Math.pow(1.5,-e))/(1-Math.pow(1.5,-t))},D.prototype.resetZoom=function(){var e=this,t=this.isZoomed("x"),i=this.isZoomed("y"),n=t||i;if(this.clearSelection(),n){var r=this.xAxisExtremes(),a=o(r,2),s=a[0],l=a[1],c=this.getBooleanOption("animatedZooms"),d=this.getFunctionOption("zoomCallback");if(!c)return this.dateWindow_=null,this.axes_.forEach((function(e){e.valueRange&&delete e.valueRange})),this.drawGraph_(),void(d&&d.call(this,s,l,this.yAxisRanges()));var h=null,u=null,p=null,f=null;t&&(h=this.xAxisRange(),u=[s,l]),i&&(p=this.yAxisRanges(),f=this.yAxisExtremes()),this.doAnimatedZoom(h,u,p,f,(function(){e.dateWindow_=null,e.axes_.forEach((function(e){e.valueRange&&delete e.valueRange})),d&&d.call(e,s,l,e.yAxisRanges())}))}},D.prototype.doAnimatedZoom=function(e,t,i,n,r){var a,o,s=this,l=this.getBooleanOption("animatedZooms")?D.ANIMATION_STEPS:1,c=[],d=[];if(null!==e&&null!==t)for(a=1;a<=l;a++)o=D.zoomAnimationFunction(a,l),c[a-1]=[e[0]*(1-o)+o*t[0],e[1]*(1-o)+o*t[1]];if(null!==i&&null!==n)for(a=1;a<=l;a++){o=D.zoomAnimationFunction(a,l);for(var h=[],p=0;p<this.axes_.length;p++)h.push([i[p][0]*(1-o)+o*n[p][0],i[p][1]*(1-o)+o*n[p][1]]);d[a-1]=h}u.repeatAndCleanup((function(e){if(d.length)for(var t=0;t<s.axes_.length;t++){var i=d[e][t];s.axes_[t].valueRange=[i[0],i[1]]}c.length&&(s.dateWindow_=c[e]),s.drawGraph_()}),l,D.ANIMATION_DURATION/l,r)},D.prototype.getArea=function(){return this.plotter_.area},D.prototype.eventToDomCoords=function(e){if(e.offsetX&&e.offsetY)return[e.offsetX,e.offsetY];var t=u.findPos(this.mouseEventElement_);return[u.pageX(e)-t.x,u.pageY(e)-t.y]},D.prototype.findClosestRow=function(e){for(var t=1/0,i=-1,n=this.layout_.points,r=0;r<n.length;r++)for(var a=n[r],o=a.length,s=0;s<o;s++){var l=a[s];if(u.isValidPoint(l,!0)){var c=Math.abs(l.canvasx-e);c<t&&(t=c,i=l.idx)}}return i},D.prototype.findClosestPoint=function(e,t){for(var i,n,r,a,o,s,l,c=1/0,d=this.layout_.points.length-1;d>=0;--d)for(var h=this.layout_.points[d],p=0;p<h.length;++p)a=h[p],u.isValidPoint(a)&&(i=(n=a.canvasx-e)*n+(r=a.canvasy-t)*r)<c&&(c=i,o=a,s=d,l=a.idx);return{row:l,seriesName:this.layout_.setNames[s],point:o}},D.prototype.findStackedPoint=function(e,t){for(var i,n,r=this.findClosestRow(e),a=0;a<this.layout_.points.length;++a){var o=r-this.getLeftBoundary_(a),s=this.layout_.points[a];if(!(o>=s.length)){var l=s[o];if(u.isValidPoint(l)){var c=l.canvasy;if(e>l.canvasx&&o+1<s.length){var d=s[o+1];u.isValidPoint(d)&&(h=d.canvasx-l.canvasx)>0&&(c+=(e-l.canvasx)/h*(d.canvasy-l.canvasy))}else if(e<l.canvasx&&o>0){var h,p=s[o-1];u.isValidPoint(p)&&(h=l.canvasx-p.canvasx)>0&&(c+=(l.canvasx-e)/h*(p.canvasy-l.canvasy))}(0===a||c<t)&&(i=l,n=a)}}}return{row:r,seriesName:this.layout_.setNames[n],point:i}},D.prototype.mouseMove_=function(e){var t=this.layout_.points;if(void 0!==t&&null!==t){var i=this.eventToDomCoords(e),n=i[0],r=i[1],a=!1;if(this.getOption("highlightSeriesOpts")&&!this.isSeriesLocked()){var o;o=this.getBooleanOption("stackedGraph")?this.findStackedPoint(n,r):this.findClosestPoint(n,r),a=this.setSelection(o.row,o.seriesName)}else{var s=this.findClosestRow(n);a=this.setSelection(s)}var l=this.getFunctionOption("highlightCallback");l&&a&&l.call(this,e,this.lastx_,this.selPoints_,this.lastRow_,this.highlightSet_)}},D.prototype.getLeftBoundary_=function(e){if(this.boundaryIds_[e])return this.boundaryIds_[e][0];for(var t=0;t<this.boundaryIds_.length;t++)if(void 0!==this.boundaryIds_[t])return this.boundaryIds_[t][0];return 0},D.prototype.animateSelection_=function(e){void 0===this.fadeLevel&&(this.fadeLevel=0),void 0===this.animateId&&(this.animateId=0);var t=this.fadeLevel,i=e<0?t:10-t;if(i<=0)this.fadeLevel&&this.updateSelection_(1);else{var n=++this.animateId,r=this;u.repeatAndCleanup((function(t){r.animateId==n&&(r.fadeLevel+=e,0===r.fadeLevel?r.clearSelection():r.updateSelection_(r.fadeLevel/10))}),i,30,(function(){0!==r.fadeLevel&&e<0&&(r.fadeLevel=0,r.clearSelection())}))}},D.prototype.updateSelection_=function(e){this.cascadeEvents_("select",{selectedRow:-1===this.lastRow_?void 0:this.lastRow_,selectedX:-1===this.lastx_?void 0:this.lastx_,selectedPoints:this.selPoints_});var t,i=this.canvas_ctx_;if(this.getOption("highlightSeriesOpts")){i.clearRect(0,0,this.width_,this.height_);var n=1-this.getNumericOption("highlightSeriesBackgroundAlpha"),r=u.toRGB_(this.getOption("highlightSeriesBackgroundColor"));if(n){if(void 0===e)return void this.animateSelection_(1);n*=e,i.fillStyle="rgba("+r.r+","+r.g+","+r.b+","+n+")",i.fillRect(0,0,this.width_,this.height_)}this.plotter_._renderLineChart(this.highlightSet_,i)}else if(this.previousVerticalX_>=0){var a=0,o=this.attr_("labels");for(t=1;t<o.length;t++){var s=this.getNumericOption("highlightCircleSize",o[t]);s>a&&(a=s)}var l=this.previousVerticalX_;i.clearRect(l-a-1,0,2*a+2,this.height_)}if(this.selPoints_.length>0){var c=this.selPoints_[0].canvasx;for(i.save(),t=0;t<this.selPoints_.length;t++){var d=this.selPoints_[t];if(!isNaN(d.canvasy)){var h=this.getNumericOption("highlightCircleSize",d.name),p=this.getFunctionOption("drawHighlightPointCallback",d.name),f=this.plotter_.colors[d.name];p||(p=u.Circles.DEFAULT),i.lineWidth=this.getNumericOption("strokeWidth",d.name),i.strokeStyle=f,i.fillStyle=f,p.call(this,this,d.name,i,c,d.canvasy,f,h,d.idx)}}i.restore(),this.previousVerticalX_=c}},D.prototype.setSelection=function(e,t,i){this.selPoints_=[];var n=!1;if(!1!==e&&e>=0){e!=this.lastRow_&&(n=!0),this.lastRow_=e;for(var r=0;r<this.layout_.points.length;++r){var a=this.layout_.points[r],o=e-this.getLeftBoundary_(r);if(o>=0&&o<a.length&&a[o].idx==e)null!==(l=a[o]).yval&&this.selPoints_.push(l);else for(var s=0;s<a.length;++s){var l;if((l=a[s]).idx==e){null!==l.yval&&this.selPoints_.push(l);break}}}}else this.lastRow_>=0&&(n=!0),this.lastRow_=-1;return this.selPoints_.length?this.lastx_=this.selPoints_[0].xval:this.lastx_=-1,void 0!==t&&(this.highlightSet_!==t&&(n=!0),this.highlightSet_=t),void 0!==i&&(this.lockedSet_=i),n&&this.updateSelection_(void 0),n},D.prototype.mouseOut_=function(e){this.getFunctionOption("unhighlightCallback")&&this.getFunctionOption("unhighlightCallback").call(this,e),this.getBooleanOption("hideOverlayOnMouseOut")&&!this.lockedSet_&&this.clearSelection()},D.prototype.clearSelection=function(){this.cascadeEvents_("deselect",{}),this.lockedSet_=!1,this.fadeLevel?this.animateSelection_(-1):(this.canvas_ctx_.clearRect(0,0,this.width_,this.height_),this.fadeLevel=0,this.selPoints_=[],this.lastx_=-1,this.lastRow_=-1,this.highlightSet_=null)},D.prototype.getSelection=function(){if(!this.selPoints_||this.selPoints_.length<1)return-1;for(var e=0;e<this.layout_.points.length;e++)for(var t=this.layout_.points[e],i=0;i<t.length;i++)if(t[i].x==this.selPoints_[0].x)return t[i].idx;return-1},D.prototype.getHighlightSeries=function(){return this.highlightSet_},D.prototype.isSeriesLocked=function(){return this.lockedSet_},D.prototype.loadedEvent_=function(e){this.rawData_=this.parseCSV_(e),this.cascadeDataDidUpdateEvent_(),this.predraw_()},D.prototype.addXTicks_=function(){var e;e=this.dateWindow_?[this.dateWindow_[0],this.dateWindow_[1]]:this.xAxisExtremes();var t=this.optionsViewForAxis_("x"),i=t("ticker")(e[0],e[1],this.plotter_.area.w,t,this);this.layout_.setXTicks(i)},D.prototype.getHandlerClass_=function(){return this.attr_("dataHandler")?this.attr_("dataHandler"):this.fractions_?this.getBooleanOption("errorBars")?w.default:b.default:this.getBooleanOption("customBars")?_.default:this.getBooleanOption("errorBars")?v.default:m.default},D.prototype.predraw_=function(){var e=new Date;this.dataHandler_=new(this.getHandlerClass_()),this.layout_.computePlotArea(),this.computeYAxes_(),this.is_initial_draw_||(this.canvas_ctx_.restore(),this.hidden_ctx_.restore()),this.canvas_ctx_.save(),this.hidden_ctx_.save(),this.plotter_=new l.default(this,this.hidden_,this.hidden_ctx_,this.layout_),this.createRollInterface_(),this.cascadeEvents_("predraw"),this.rolledSeries_=[null];for(var t=1;t<this.numColumns();t++){var i=this.dataHandler_.extractSeries(this.rawData_,t,this.attributes_);this.rollPeriod_>1&&(i=this.dataHandler_.rollingAverage(i,this.rollPeriod_,this.attributes_)),this.rolledSeries_.push(i)}this.drawGraph_();var n=new Date;this.drawingTimeMs_=n-e},D.PointType=void 0,D.stackPoints_=function(e,t,i,n){for(var r=null,a=null,o=null,s=-1,l=0;l<e.length;++l){var c=e[l],d=c.xval;void 0===t[d]&&(t[d]=0);var h=c.yval;isNaN(h)||null===h?"none"==n?h=0:(function(t){if(!(s>=t))for(var i=t;i<e.length;++i)if(o=null,!isNaN(e[i].yval)&&null!==e[i].yval){s=i,o=e[i];break}}(l),h=a&&o&&"none"!=n?a.yval+(o.yval-a.yval)*((d-a.xval)/(o.xval-a.xval)):a&&"all"==n?a.yval:o&&"all"==n?o.yval:0):a=c;var u=t[d];r!=d&&(u+=h,t[d]=u),r=d,c.yval_stacked=u,u>i[1]&&(i[1]=u),u<i[0]&&(i[0]=u)}},D.prototype.gatherDatasets_=function(e,t){var i,n,r,a,o,s,l=[],c=[],d=[],h={};for(i=e.length-1;i>=1;i--)if(this.visibility()[i-1]){if(t){s=e[i];var u=t[0],p=t[1];for(r=null,a=null,n=0;n<s.length;n++)s[n][0]>=u&&null===r&&(r=n),s[n][0]<=p&&(a=n);null===r&&(r=0);for(var f=r,g=!0;g&&f>0;)g=null===s[--f][1];null===a&&(a=s.length-1);var m=a;for(g=!0;g&&m<s.length-1;)g=null===s[++m][1];f!==r&&(r=f),m!==a&&(a=m),l[i-1]=[r,a],s=s.slice(r,a+1)}else s=e[i],l[i-1]=[0,s.length-1];var v=this.attr_("labels")[i],_=this.dataHandler_.getExtremeYValues(s,t,this.getBooleanOption("stepPlot",v)),b=this.dataHandler_.seriesToPoints(s,v,l[i-1][0]);this.getBooleanOption("stackedGraph")&&(void 0===d[o=this.attributes_.axisForSeries(v)]&&(d[o]=[]),D.stackPoints_(b,d[o],_,this.getBooleanOption("stackedGraphNaNFill"))),h[v]=_,c[i]=b}return{points:c,extremes:h,boundaryIds:l}},D.prototype.drawGraph_=function(){var e=new Date,t=this.is_initial_draw_;this.is_initial_draw_=!1,this.layout_.removeAllDatasets(),this.setColors_(),this.attrs_.pointSize=.5*this.getNumericOption("highlightCircleSize");var i=this.gatherDatasets_(this.rolledSeries_,this.dateWindow_),n=i.points,r=i.extremes;this.boundaryIds_=i.boundaryIds,this.setIndexByName_={};for(var a=this.attr_("labels"),o=0,s=1;s<n.length;s++)this.visibility()[s-1]&&(this.layout_.addDataset(a[s],n[s]),this.datasetIndex_[s]=o++);for(s=0;s<a.length;s++)this.setIndexByName_[a[s]]=s;if(this.computeYAxisRanges_(r),this.layout_.setYAxes(this.axes_),this.addXTicks_(),this.layout_.evaluate(),this.renderGraph_(t),this.getStringOption("timingName")){var l=new Date;console.log(this.getStringOption("timingName")+" - drawGraph: "+(l-e)+"ms")}},D.prototype.renderGraph_=function(e){this.cascadeEvents_("clearChart"),this.plotter_.clear();var t=this.getFunctionOption("underlayCallback");t&&t.call(this,this.hidden_ctx_,this.layout_.getPlotArea(),this,this);var i={canvas:this.hidden_,drawingContext:this.hidden_ctx_};this.cascadeEvents_("willDrawChart",i),this.plotter_.render(),this.cascadeEvents_("didDrawChart",i),this.lastRow_=-1,this.canvas_.getContext("2d").clearRect(0,0,this.width_,this.height_);var n=this.getFunctionOption("drawCallback");if(null!==n&&n.call(this,this,e),e)for(this.readyFired_=!0;this.readyFns_.length>0;)this.readyFns_.pop()(this)},D.prototype.computeYAxes_=function(){var e,t,i;for(this.axes_=[],e=0;e<this.attributes_.numAxes();e++)t={g:this},u.update(t,this.attributes_.axisOptions(e)),this.axes_[e]=t;for(e=0;e<this.axes_.length;e++)if(0===e)(i=(t=this.optionsViewForAxis_("y"+(e?"2":"")))("valueRange"))&&(this.axes_[e].valueRange=i);else{var n=this.user_attrs_.axes;n&&n.y2&&(i=n.y2.valueRange)&&(this.axes_[e].valueRange=i)}},D.prototype.numAxes=function(){return this.attributes_.numAxes()},D.prototype.axisPropertiesForSeries=function(e){return this.axes_[this.attributes_.axisForSeries(e)]},D.prototype.computeYAxisRanges_=function(e){for(var t,i,n,r,a,o=function(e){return isNaN(parseFloat(e))},s=this.attributes_.numAxes(),l=0;l<s;l++){var c=this.axes_[l],d=this.attributes_.getForAxis("logscale",l),h=this.attributes_.getForAxis("includeZero",l),p=this.attributes_.getForAxis("independentTicks",l);n=this.attributes_.seriesForAxis(l),t=!0,r=.1;var f=this.getNumericOption("yRangePad");if(null!==f&&(t=!1,r=f/this.plotter_.area.h),0===n.length)c.extremeRange=[0,1];else{for(var g,m,v=1/0,_=-1/0,b=0;b<n.length;b++)e.hasOwnProperty(n[b])&&(null!==(g=e[n[b]][0])&&(v=Math.min(g,v)),null!==(m=e[n[b]][1])&&(_=Math.max(m,_)));h&&!d&&(v>0&&(v=0),_<0&&(_=0)),v==1/0&&(v=0),_==-1/0&&(_=1),0===(i=_-v)&&(0!==_?i=Math.abs(_):(_=1,i=1));var w=_,y=v;t&&(d?(w=_+r*i,y=v):((y=v-r*i)<0&&v>=0&&(y=0),(w=_+r*i)>0&&_<=0&&(w=0))),c.extremeRange=[y,w]}if(c.valueRange){var x=o(c.valueRange[0])?c.extremeRange[0]:c.valueRange[0],C=o(c.valueRange[1])?c.extremeRange[1]:c.valueRange[1];c.computedValueRange=[x,C]}else c.computedValueRange=c.extremeRange;if(!t)if(d){x=c.computedValueRange[0],C=c.computedValueRange[1];var S=r/(2*r-1),T=(r-1)/(2*r-1);c.computedValueRange[0]=u.logRangeFraction(x,C,S),c.computedValueRange[1]=u.logRangeFraction(x,C,T)}else x=c.computedValueRange[0],i=(C=c.computedValueRange[1])-x,c.computedValueRange[0]=x-i*r,c.computedValueRange[1]=C+i*r;if(p){c.independentTicks=p;var k=(A=this.optionsViewForAxis_("y"+(l?"2":"")))("ticker");c.ticks=k(c.computedValueRange[0],c.computedValueRange[1],this.plotter_.area.h,A,this),a||(a=c)}}if(void 0===a)throw'Configuration Error: At least one axis has to have the "independentTicks" option activated.';for(l=0;l<s;l++)if(!(c=this.axes_[l]).independentTicks){k=(A=this.optionsViewForAxis_("y"+(l?"2":"")))("ticker");for(var A,P=a.ticks,D=a.computedValueRange[1]-a.computedValueRange[0],E=c.computedValueRange[1]-c.computedValueRange[0],M=[],O=0;O<P.length;O++){var I=(P[O].v-a.computedValueRange[0])/D,N=c.computedValueRange[0]+I*E;M.push(N)}c.ticks=k(c.computedValueRange[0],c.computedValueRange[1],this.plotter_.area.h,A,this,M)}},D.prototype.detectTypeFromString_=function(e){var t=!1,i=e.indexOf("-");(i>0&&"e"!=e[i-1]&&"E"!=e[i-1]||e.indexOf("/")>=0||isNaN(parseFloat(e))||8==e.length&&e>"19700101"&&e<"20371231")&&(t=!0),this.setXAxisOptions_(t)},D.prototype.setXAxisOptions_=function(e){e?(this.attrs_.xValueParser=u.dateParser,this.attrs_.axes.x.valueFormatter=u.dateValueFormatter,this.attrs_.axes.x.ticker=h.dateTicker,this.attrs_.axes.x.axisLabelFormatter=u.dateAxisLabelFormatter):(this.attrs_.xValueParser=function(e){return parseFloat(e)},this.attrs_.axes.x.valueFormatter=function(e){return e},this.attrs_.axes.x.ticker=h.numericTicks,this.attrs_.axes.x.axisLabelFormatter=this.attrs_.axes.x.valueFormatter)},D.prototype.parseCSV_=function(e){var t,i,n=[],r=u.detectLineDelimiter(e),a=e.split(r||"\n"),o=this.getStringOption("delimiter");-1==a[0].indexOf(o)&&a[0].indexOf("\t")>=0&&(o="\t");var s=0;"labels"in this.user_attrs_||(s=1,this.attrs_.labels=a[0].split(o),this.attributes_.reparseSeries());for(var l,c=!1,d=this.attr_("labels").length,h=!1,p=s;p<a.length;p++){var f=a[p];if(0!==f.length&&"#"!=f[0]){var g=f.split(o);if(!(g.length<2)){var m=[];if(c||(this.detectTypeFromString_(g[0]),l=this.getFunctionOption("xValueParser"),c=!0),m[0]=l(g[0],this),this.fractions_)for(i=1;i<g.length;i++)2!=(t=g[i].split("/")).length?(console.error('Expected fractional "num/den" values in CSV data but found a value \''+g[i]+"' on line "+(1+p)+" ('"+f+"') which is not of this form."),m[i]=[0,0]):m[i]=[u.parseFloat_(t[0],p,f),u.parseFloat_(t[1],p,f)];else if(this.getBooleanOption("errorBars"))for(g.length%2!=1&&console.error("Expected alternating (value, stdev.) pairs in CSV data but line "+(1+p)+" has an odd number of values ("+(g.length-1)+"): '"+f+"'"),i=1;i<g.length;i+=2)m[(i+1)/2]=[u.parseFloat_(g[i],p,f),u.parseFloat_(g[i+1],p,f)];else if(this.getBooleanOption("customBars"))for(i=1;i<g.length;i++){var v=g[i];/^ *$/.test(v)?m[i]=[null,null,null]:3==(t=v.split(";")).length?m[i]=[u.parseFloat_(t[0],p,f),u.parseFloat_(t[1],p,f),u.parseFloat_(t[2],p,f)]:console.warn('When using customBars, values must be either blank or "low;center;high" tuples (got "'+v+'" on line '+(1+p))}else for(i=1;i<g.length;i++)m[i]=u.parseFloat_(g[i],p,f);if(n.length>0&&m[0]<n[n.length-1][0]&&(h=!0),m.length!=d&&console.error("Number of columns in line "+p+" ("+m.length+") does not agree with number of labels ("+d+") "+f),0===p&&this.attr_("labels")){var _=!0;for(i=0;_&&i<m.length;i++)m[i]&&(_=!1);if(_){console.warn("The dygraphs 'labels' option is set, but the first row of CSV data ('"+f+"') appears to also contain labels. Will drop the CSV labels and use the option labels.");continue}}n.push(m)}}}return h&&(console.warn("CSV is out of order; order it correctly to speed loading."),n.sort((function(e,t){return e[0]-t[0]}))),n},D.prototype.parseArray_=function(e){if(0===e.length)return console.error("Can't plot empty data set"),null;if(0===e[0].length)return console.error("Data set cannot contain an empty row"),null;var t;if(function(e){var t=e[0],i=t[0];if("number"!=typeof i&&!u.isDateLike(i))throw new Error("Expected number or date but got "+typeof i+": "+i+".");for(var n=1;n<t.length;n++){var r=t[n];if(null!==r&&void 0!==r&&"number"!=typeof r&&!u.isArrayLike(r))throw new Error("Expected number or array but got "+typeof r+": "+r+".")}}(e),null===this.attr_("labels")){for(console.warn("Using default labels. Set labels explicitly via 'labels' in the options parameter"),this.attrs_.labels=["X"],t=1;t<e[0].length;t++)this.attrs_.labels.push("Y"+t);this.attributes_.reparseSeries()}else{var i=this.attr_("labels");if(i.length!=e[0].length)return console.error("Mismatch between number of labels ("+i+") and number of columns in array ("+e[0].length+")"),null}if(u.isDateLike(e[0][0])){this.attrs_.axes.x.valueFormatter=u.dateValueFormatter,this.attrs_.axes.x.ticker=h.dateTicker,this.attrs_.axes.x.axisLabelFormatter=u.dateAxisLabelFormatter;var n=u.clone(e);for(t=0;t<e.length;t++){if(0===n[t].length)return console.error("Row "+(1+t)+" of data is empty"),null;if(null===n[t][0]||"function"!=typeof n[t][0].getTime||isNaN(n[t][0].getTime()))return console.error("x value in row "+(1+t)+" is not a Date"),null;n[t][0]=n[t][0].getTime()}return n}return this.attrs_.axes.x.valueFormatter=function(e){return e},this.attrs_.axes.x.ticker=h.numericTicks,this.attrs_.axes.x.axisLabelFormatter=u.numberAxisLabelFormatter,e},D.prototype.parseDataTable_=function(e){var t=e.getNumberOfColumns(),i=e.getNumberOfRows(),n=e.getColumnType(0);if("date"==n||"datetime"==n)this.attrs_.xValueParser=u.dateParser,this.attrs_.axes.x.valueFormatter=u.dateValueFormatter,this.attrs_.axes.x.ticker=h.dateTicker,this.attrs_.axes.x.axisLabelFormatter=u.dateAxisLabelFormatter;else{if("number"!=n)throw new Error("only 'date', 'datetime' and 'number' types are supported for column 1 of DataTable input (Got '"+n+"')");this.attrs_.xValueParser=function(e){return parseFloat(e)},this.attrs_.axes.x.valueFormatter=function(e){return e},this.attrs_.axes.x.ticker=h.numericTicks,this.attrs_.axes.x.axisLabelFormatter=this.attrs_.axes.x.valueFormatter}var r,a,o=[],s={},l=!1;for(r=1;r<t;r++){var c=e.getColumnType(r);if("number"==c)o.push(r);else{if("string"!=c||!this.getBooleanOption("displayAnnotations"))throw new Error("Only 'number' is supported as a dependent type with Gviz. 'string' is only supported if displayAnnotations is true");var d=o[o.length-1];s.hasOwnProperty(d)?s[d].push(r):s[d]=[r],l=!0}}var p=[e.getColumnLabel(0)];for(r=0;r<o.length;r++)p.push(e.getColumnLabel(o[r])),this.getBooleanOption("errorBars")&&(r+=1);this.attrs_.labels=p,t=p.length;var f=[],g=!1,m=[];for(r=0;r<i;r++){var v=[];if(void 0!==e.getValue(r,0)&&null!==e.getValue(r,0)){if("date"==n||"datetime"==n?v.push(e.getValue(r,0).getTime()):v.push(e.getValue(r,0)),this.getBooleanOption("errorBars"))for(a=0;a<t-1;a++)v.push([e.getValue(r,1+2*a),e.getValue(r,2+2*a)]);else{for(a=0;a<o.length;a++){var _=o[a];if(v.push(e.getValue(r,_)),l&&s.hasOwnProperty(_)&&null!==e.getValue(r,s[_][0])){var b={};b.series=e.getColumnLabel(_),b.xval=v[0],b.shortText=function(e){var t=String.fromCharCode(65+e%26);for(e=Math.floor(e/26);e>0;)t=String.fromCharCode(65+(e-1)%26)+t.toLowerCase(),e=Math.floor((e-1)/26);return t}(m.length),b.text="";for(var w=0;w<s[_].length;w++)w&&(b.text+="\n"),b.text+=e.getValue(r,s[_][w]);m.push(b)}}for(a=0;a<v.length;a++)isFinite(v[a])||(v[a]=null)}f.length>0&&v[0]<f[f.length-1][0]&&(g=!0),f.push(v)}else console.warn("Ignoring row "+r+" of DataTable because of undefined or null first column.")}g&&(console.warn("DataTable is out of order; order it correctly to speed loading."),f.sort((function(e,t){return e[0]-t[0]}))),this.rawData_=f,m.length>0&&this.setAnnotations(m,!0),this.attributes_.reparseSeries()},D.prototype.cascadeDataDidUpdateEvent_=function(){this.cascadeEvents_("dataDidUpdate",{})},D.prototype.start_=function(){var e=this.file_;if("function"==typeof e&&(e=e()),u.isArrayLike(e))this.rawData_=this.parseArray_(e),this.cascadeDataDidUpdateEvent_(),this.predraw_();else if("object"==typeof e&&"function"==typeof e.getColumnRange)this.parseDataTable_(e),this.cascadeDataDidUpdateEvent_(),this.predraw_();else if("string"==typeof e)if(u.detectLineDelimiter(e))this.loadedEvent_(e);else{var t;t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");var i=this;t.onreadystatechange=function(){4==t.readyState&&(200!==t.status&&0!==t.status||i.loadedEvent_(t.responseText))},t.open("GET",e,!0),t.send(null)}else console.error("Unknown data format: "+typeof e)},D.prototype.updateOptions=function(e,t){void 0===t&&(t=!1);var i=e.file,n=D.copyUserAttrs_(e);"rollPeriod"in n&&(this.rollPeriod_=n.rollPeriod),"dateWindow"in n&&(this.dateWindow_=n.dateWindow);var r=u.isPixelChangingOptionList(this.attr_("labels"),n);u.updateDeep(this.user_attrs_,n),this.attributes_.reparseSeries(),i?(this.cascadeEvents_("dataWillUpdate",{}),this.file_=i,t||this.start_()):t||(r?this.predraw_():this.renderGraph_(!1))},D.copyUserAttrs_=function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&"file"!=i&&e.hasOwnProperty(i)&&(t[i]=e[i]);return t},D.prototype.resize=function(e,t){if(!this.resize_lock){this.resize_lock=!0,null===e!=(null===t)&&(console.warn("Dygraph.resize() should be called with zero parameters or two non-NULL parameters. Pretending it was zero."),e=t=null);var i=this.width_,n=this.height_;e?(this.maindiv_.style.width=e+"px",this.maindiv_.style.height=t+"px",this.width_=e,this.height_=t):(this.width_=this.maindiv_.clientWidth,this.height_=this.maindiv_.clientHeight),i==this.width_&&n==this.height_||(this.resizeElements_(),this.predraw_()),this.resize_lock=!1}},D.prototype.adjustRoll=function(e){this.rollPeriod_=e,this.predraw_()},D.prototype.visibility=function(){for(this.getOption("visibility")||(this.attrs_.visibility=[]);this.getOption("visibility").length<this.numColumns()-1;)this.attrs_.visibility.push(!0);return this.getOption("visibility")},D.prototype.setVisibility=function(e,t){var i=this.visibility(),n=!1;if(Array.isArray(e)||(null!==e&&"object"==typeof e?n=!0:e=[e]),n)for(var r in e)e.hasOwnProperty(r)&&(r<0||r>=i.length?console.warn("Invalid series number in setVisibility: "+r):i[r]=e[r]);else for(r=0;r<e.length;r++)"boolean"==typeof e[r]?r>=i.length?console.warn("Invalid series number in setVisibility: "+r):i[r]=e[r]:e[r]<0||e[r]>=i.length?console.warn("Invalid series number in setVisibility: "+e[r]):i[e[r]]=t;this.predraw_()},D.prototype.size=function(){return{width:this.width_,height:this.height_}},D.prototype.setAnnotations=function(e,t){this.annotations_=e,this.layout_?(this.layout_.setAnnotations(this.annotations_),t||this.predraw_()):console.warn("Tried to setAnnotations before dygraph was ready. Try setting them in a ready() block. See dygraphs.com/tests/annotation.html")},D.prototype.annotations=function(){return this.annotations_},D.prototype.getLabels=function(){var e=this.attr_("labels");return e?e.slice():null},D.prototype.indexFromSetName=function(e){return this.setIndexByName_[e]},D.prototype.getRowForX=function(e){for(var t=0,i=this.numRows()-1;t<=i;){var n=i+t>>1,r=this.getValue(n,0);if(r<e)t=n+1;else if(r>e)i=n-1;else{if(t==n)return n;i=n}}return null},D.prototype.ready=function(e){this.is_initial_draw_?this.readyFns_.push(e):e.call(this,this)},D.prototype.addAndTrackEvent=function(e,t,i){u.addEvent(e,t,i),this.registeredEvents_.push({elem:e,type:t,fn:i})},D.prototype.removeTrackedEvents_=function(){if(this.registeredEvents_)for(var e=0;e<this.registeredEvents_.length;e++){var t=this.registeredEvents_[e];u.removeEvent(t.elem,t.type,t.fn)}this.registeredEvents_=[]},D.PLUGINS=[k.default,C.default,A.default,S.default,x.default,T.default],D.GVizChart=P.default,D.DASHED_LINE=u.DASHED_LINE,D.DOT_DASH_LINE=u.DOT_DASH_LINE,D.dateAxisLabelFormatter=u.dateAxisLabelFormatter,D.toRGB_=u.toRGB_,D.findPos=u.findPos,D.pageX=u.pageX,D.pageY=u.pageY,D.dateString_=u.dateString_,D.defaultInteractionModel=d.default.defaultModel,D.nonInteractiveModel=D.nonInteractiveModel_=d.default.nonInteractiveModel_,D.Circles=u.Circles,D.Plugins={Legend:k.default,Axes:C.default,Annotations:x.default,ChartLabels:S.default,Grid:T.default,RangeSelector:A.default},D.DataHandlers={DefaultHandler:m.default,BarsHandler:y.default,CustomBarsHandler:_.default,DefaultFractionHandler:b.default,ErrorBarsHandler:v.default,FractionsBarsHandler:w.default},D.startPan=d.default.startPan,D.startZoom=d.default.startZoom,D.movePan=d.default.movePan,D.moveZoom=d.default.moveZoom,D.endPan=d.default.endPan,D.endZoom=d.default.endZoom,D.numericLinearTicks=h.numericLinearTicks,D.numericTicks=h.numericTicks,D.dateTicker=h.dateTicker,D.Granularity=h.Granularity,D.getDateAxis=h.getDateAxis,D.floatFormat=u.floatFormat,i.default=D,t.exports=i.default}).call(this,e("_process"))},{"./datahandler/bars":5,"./datahandler/bars-custom":2,"./datahandler/bars-error":3,"./datahandler/bars-fractions":4,"./datahandler/default":8,"./datahandler/default-fractions":7,"./dygraph-canvas":9,"./dygraph-default-attrs":10,"./dygraph-gviz":11,"./dygraph-interaction-model":12,"./dygraph-layout":13,"./dygraph-options":15,"./dygraph-options-reference":14,"./dygraph-tickers":16,"./dygraph-utils":17,"./iframe-tarp":19,"./plugins/annotations":20,"./plugins/axes":21,"./plugins/chart-labels":22,"./plugins/grid":23,"./plugins/legend":24,"./plugins/range-selector":25,_process:1}],19:[function(e,t,i){"use strict";function n(){this.tarps=[]}Object.defineProperty(i,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("./dygraph-utils"));n.prototype.cover=function(){for(var e=document.getElementsByTagName("iframe"),t=0;t<e.length;t++){var i=e[t],n=r.findPos(i),a=n.x,o=n.y,s=i.offsetWidth,l=i.offsetHeight,c=document.createElement("div");c.style.position="absolute",c.style.left=a+"px",c.style.top=o+"px",c.style.width=s+"px",c.style.height=l+"px",c.style.zIndex=999,document.body.appendChild(c),this.tarps.push(c)}},n.prototype.uncover=function(){for(var e=0;e<this.tarps.length;e++)this.tarps[e].parentNode.removeChild(this.tarps[e]);this.tarps=[]},i.default=n,t.exports=i.default},{"./dygraph-utils":17}],20:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){this.annotations_=[]};n.prototype.toString=function(){return"Annotations Plugin"},n.prototype.activate=function(e){return{clearChart:this.clearChart,didDrawChart:this.didDrawChart}},n.prototype.detachLabels=function(){for(var e=0;e<this.annotations_.length;e++){var t=this.annotations_[e];t.parentNode&&t.parentNode.removeChild(t),this.annotations_[e]=null}this.annotations_=[]},n.prototype.clearChart=function(e){this.detachLabels()},n.prototype.didDrawChart=function(e){var t=e.dygraph,i=t.layout_.annotated_points;if(i&&0!==i.length)for(var n=e.canvas.parentNode,r=function(e,i,n){return function(r){var a=n.annotation;a.hasOwnProperty(e)?a[e](a,n,t,r):t.getOption(i)&&t.getOption(i)(a,n,t,r)}},a=e.dygraph.getArea(),o={},s=0;s<i.length;s++){var l=i[s];if(!(l.canvasx<a.x||l.canvasx>a.x+a.w||l.canvasy<a.y||l.canvasy>a.y+a.h)){var c=l.annotation,d=6;c.hasOwnProperty("tickHeight")&&(d=c.tickHeight);var h=document.createElement("div");h.style.fontSize=t.getOption("axisLabelFontSize")+"px";var u="dygraph-annotation";c.hasOwnProperty("icon")||(u+=" dygraphDefaultAnnotation dygraph-default-annotation"),c.hasOwnProperty("cssClass")&&(u+=" "+c.cssClass),h.className=u;var p=c.hasOwnProperty("width")?c.width:16,f=c.hasOwnProperty("height")?c.height:16;if(c.hasOwnProperty("icon")){var g=document.createElement("img");g.src=c.icon,g.width=p,g.height=f,h.appendChild(g)}else l.annotation.hasOwnProperty("shortText")&&h.appendChild(document.createTextNode(l.annotation.shortText));var m=l.canvasx-p/2;h.style.left=m+"px";var v=0;if(c.attachAtBottom){var _=a.y+a.h-f-d;o[m]?_-=o[m]:o[m]=0,o[m]+=d+f,v=_}else v=l.canvasy-f-d;h.style.top=v+"px",h.style.width=p+"px",h.style.height=f+"px",h.title=l.annotation.text,h.style.color=t.colorsMap_[l.name],h.style.borderColor=t.colorsMap_[l.name],c.div=h,t.addAndTrackEvent(h,"click",r("clickHandler","annotationClickHandler",l)),t.addAndTrackEvent(h,"mouseover",r("mouseOverHandler","annotationMouseOverHandler",l)),t.addAndTrackEvent(h,"mouseout",r("mouseOutHandler","annotationMouseOutHandler",l)),t.addAndTrackEvent(h,"dblclick",r("dblClickHandler","annotationDblClickHandler",l)),n.appendChild(h),this.annotations_.push(h);var b=e.drawingContext;b.save(),b.strokeStyle=c.hasOwnProperty("tickColor")?c.tickColor:t.colorsMap_[l.name],b.lineWidth=c.hasOwnProperty("tickWidth")?c.tickWidth:t.getOption("strokeWidth"),b.beginPath(),c.attachAtBottom?(_=v+f,b.moveTo(l.canvasx,_),b.lineTo(l.canvasx,_+d)):(b.moveTo(l.canvasx,l.canvasy),b.lineTo(l.canvasx,l.canvasy-2-d)),b.closePath(),b.stroke(),b.restore()}}},n.prototype.destroy=function(){this.detachLabels()},i.default=n,t.exports=i.default},{}],21:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../dygraph-utils")),r=function(){this.xlabels_=[],this.ylabels_=[]};r.prototype.toString=function(){return"Axes Plugin"},r.prototype.activate=function(e){return{layout:this.layout,clearChart:this.clearChart,willDrawChart:this.willDrawChart}},r.prototype.layout=function(e){var t,i=e.dygraph;if(i.getOptionForAxis("drawAxis","y")){var n=i.getOptionForAxis("axisLabelWidth","y")+2*i.getOptionForAxis("axisTickSize","y");e.reserveSpaceLeft(n)}i.getOptionForAxis("drawAxis","x")&&(t=i.getOption("xAxisHeight")?i.getOption("xAxisHeight"):i.getOptionForAxis("axisLabelFontSize","x")+2*i.getOptionForAxis("axisTickSize","x"),e.reserveSpaceBottom(t)),2==i.numAxes()?i.getOptionForAxis("drawAxis","y2")&&(n=i.getOptionForAxis("axisLabelWidth","y2")+2*i.getOptionForAxis("axisTickSize","y2"),e.reserveSpaceRight(n)):i.numAxes()>2&&i.error("Only two y-axes are supported at this time. (Trying to use "+i.numAxes()+")")},r.prototype.detachLabels=function(){function e(e){for(var t=0;t<e.length;t++){var i=e[t];i.parentNode&&i.parentNode.removeChild(i)}}e(this.xlabels_),e(this.ylabels_),this.xlabels_=[],this.ylabels_=[]},r.prototype.clearChart=function(e){this.detachLabels()},r.prototype.willDrawChart=function(e){function t(e){return Math.round(e)+.5}function i(e){return Math.round(e)-.5}var r=this,a=e.dygraph;if(a.getOptionForAxis("drawAxis","x")||a.getOptionForAxis("drawAxis","y")||a.getOptionForAxis("drawAxis","y2")){var o,s,l,c=e.drawingContext,d=e.canvas.parentNode,h=a.width_,u=a.height_,p=function(e){return{position:"absolute",fontSize:a.getOptionForAxis("axisLabelFontSize",e)+"px",width:a.getOptionForAxis("axisLabelWidth",e)+"px"}},f={x:p("x"),y:p("y"),y2:p("y2")},g=function(e,t,i){var r=document.createElement("div"),a=f["y2"==i?"y2":t];n.update(r.style,a);var o=document.createElement("div");return o.className="dygraph-axis-label dygraph-axis-label-"+t+(i?" dygraph-axis-label-"+i:""),o.innerHTML=e,r.appendChild(o),r};c.save();var m=a.layout_,v=e.dygraph.plotter_.area,_=function(e){return function(t){return a.getOptionForAxis(t,e)}};if(a.getOptionForAxis("drawAxis","y")){if(m.yticks&&m.yticks.length>0){var b=a.numAxes(),w=[_("y"),_("y2")];m.yticks.forEach((function(e){if(void 0!==e.label){s=v.x;var t="y1",i=w[0];1==e.axis&&(s=v.x+v.w,t="y2",i=w[1]);var n=i("axisLabelFontSize");l=v.y+e.pos*v.h,o=g(e.label,"y",2==b?t:null);var a=l-n/2;a<0&&(a=0),a+n+3>u?o.style.bottom="0":o.style.top=a+"px",0===e.axis?(o.style.left=v.x-i("axisLabelWidth")-i("axisTickSize")+"px",o.style.textAlign="right"):1==e.axis&&(o.style.left=v.x+v.w+i("axisTickSize")+"px",o.style.textAlign="left"),o.style.width=i("axisLabelWidth")+"px",d.appendChild(o),r.ylabels_.push(o)}}));var y=this.ylabels_[0],x=a.getOptionForAxis("axisLabelFontSize","y");parseInt(y.style.top,10)+x>u-x&&(y.style.top=parseInt(y.style.top,10)-x/2+"px")}var C;a.getOption("drawAxesAtZero")?(((k=a.toPercentXCoord(0))>1||k<0||isNaN(k))&&(k=0),C=t(v.x+k*v.w)):C=t(v.x),c.strokeStyle=a.getOptionForAxis("axisLineColor","y"),c.lineWidth=a.getOptionForAxis("axisLineWidth","y"),c.beginPath(),c.moveTo(C,i(v.y)),c.lineTo(C,i(v.y+v.h)),c.closePath(),c.stroke(),2==a.numAxes()&&(c.strokeStyle=a.getOptionForAxis("axisLineColor","y2"),c.lineWidth=a.getOptionForAxis("axisLineWidth","y2"),c.beginPath(),c.moveTo(i(v.x+v.w),i(v.y)),c.lineTo(i(v.x+v.w),i(v.y+v.h)),c.closePath(),c.stroke())}if(a.getOptionForAxis("drawAxis","x")){if(m.xticks){var S=_("x");m.xticks.forEach((function(e){if(void 0!==e.label){s=v.x+e.pos*v.w,l=v.y+v.h,(o=g(e.label,"x")).style.textAlign="center",o.style.top=l+S("axisTickSize")+"px";var t=s-S("axisLabelWidth")/2;t+S("axisLabelWidth")>h&&(t=h-S("axisLabelWidth"),o.style.textAlign="right"),t<0&&(t=0,o.style.textAlign="left"),o.style.left=t+"px",o.style.width=S("axisLabelWidth")+"px",d.appendChild(o),r.xlabels_.push(o)}}))}var T,k;c.strokeStyle=a.getOptionForAxis("axisLineColor","x"),c.lineWidth=a.getOptionForAxis("axisLineWidth","x"),c.beginPath(),a.getOption("drawAxesAtZero")?(((k=a.toPercentYCoord(0,0))>1||k<0)&&(k=1),T=i(v.y+k*v.h)):T=i(v.y+v.h),c.moveTo(t(v.x),T),c.lineTo(t(v.x+v.w),T),c.closePath(),c.stroke()}c.restore()}},i.default=r,t.exports=i.default},{"../dygraph-utils":17}],22:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){this.title_div_=null,this.xlabel_div_=null,this.ylabel_div_=null,this.y2label_div_=null};n.prototype.toString=function(){return"ChartLabels Plugin"},n.prototype.activate=function(e){return{layout:this.layout,didDrawChart:this.didDrawChart}};var r=function(e){var t=document.createElement("div");return t.style.position="absolute",t.style.left=e.x+"px",t.style.top=e.y+"px",t.style.width=e.w+"px",t.style.height=e.h+"px",t};n.prototype.detachLabels_=function(){for(var e=[this.title_div_,this.xlabel_div_,this.ylabel_div_,this.y2label_div_],t=0;t<e.length;t++){var i=e[t];i&&i.parentNode&&i.parentNode.removeChild(i)}this.title_div_=null,this.xlabel_div_=null,this.ylabel_div_=null,this.y2label_div_=null};var a=function(e,t,i,n,r){var a=document.createElement("div");a.style.position="absolute",a.style.left=1==i?"0px":t.x+"px",a.style.top=t.y+"px",a.style.width=t.w+"px",a.style.height=t.h+"px",a.style.fontSize=e.getOption("yLabelWidth")-2+"px";var o=document.createElement("div");o.style.position="absolute",o.style.width=t.h+"px",o.style.height=t.w+"px",o.style.top=t.h/2-t.w/2+"px",o.style.left=t.w/2-t.h/2+"px",o.className="dygraph-label-rotate-"+(1==i?"right":"left");var s=document.createElement("div");return s.className=n,s.innerHTML=r,o.appendChild(s),a.appendChild(o),a};n.prototype.layout=function(e){this.detachLabels_();var t=e.dygraph,i=e.chart_div;if(t.getOption("title")){var n=e.reserveSpaceTop(t.getOption("titleHeight"));this.title_div_=r(n),this.title_div_.style.fontSize=t.getOption("titleHeight")-8+"px",(o=document.createElement("div")).className="dygraph-label dygraph-title",o.innerHTML=t.getOption("title"),this.title_div_.appendChild(o),i.appendChild(this.title_div_)}if(t.getOption("xlabel")){var o,s=e.reserveSpaceBottom(t.getOption("xLabelHeight"));this.xlabel_div_=r(s),this.xlabel_div_.style.fontSize=t.getOption("xLabelHeight")-2+"px",(o=document.createElement("div")).className="dygraph-label dygraph-xlabel",o.innerHTML=t.getOption("xlabel"),this.xlabel_div_.appendChild(o),i.appendChild(this.xlabel_div_)}if(t.getOption("ylabel")){var l=e.reserveSpaceLeft(0);this.ylabel_div_=a(t,l,1,"dygraph-label dygraph-ylabel",t.getOption("ylabel")),i.appendChild(this.ylabel_div_)}if(t.getOption("y2label")&&2==t.numAxes()){var c=e.reserveSpaceRight(0);this.y2label_div_=a(t,c,2,"dygraph-label dygraph-y2label",t.getOption("y2label")),i.appendChild(this.y2label_div_)}},n.prototype.didDrawChart=function(e){var t=e.dygraph;this.title_div_&&(this.title_div_.children[0].innerHTML=t.getOption("title")),this.xlabel_div_&&(this.xlabel_div_.children[0].innerHTML=t.getOption("xlabel")),this.ylabel_div_&&(this.ylabel_div_.children[0].children[0].innerHTML=t.getOption("ylabel")),this.y2label_div_&&(this.y2label_div_.children[0].children[0].innerHTML=t.getOption("y2label"))},n.prototype.clearChart=function(){},n.prototype.destroy=function(){this.detachLabels_()},i.default=n,t.exports=i.default},{}],23:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){};n.prototype.toString=function(){return"Gridline Plugin"},n.prototype.activate=function(e){return{willDrawChart:this.willDrawChart}},n.prototype.willDrawChart=function(e){function t(e){return Math.round(e)+.5}function i(e){return Math.round(e)-.5}var n,r,a,o=e.dygraph,s=e.drawingContext,l=o.layout_,c=e.dygraph.plotter_.area;if(o.getOptionForAxis("drawGrid","y")){for(var d=["y","y2"],h=[],u=[],p=[],f=[],g=[],m=0;m<d.length;m++)p[m]=o.getOptionForAxis("drawGrid",d[m]),p[m]&&(h[m]=o.getOptionForAxis("gridLineColor",d[m]),u[m]=o.getOptionForAxis("gridLineWidth",d[m]),g[m]=o.getOptionForAxis("gridLinePattern",d[m]),f[m]=g[m]&&g[m].length>=2);a=l.yticks,s.save(),a.forEach((function(e){if(e.has_tick){var a=e.axis;p[a]&&(s.save(),f[a]&&s.setLineDash&&s.setLineDash(g[a]),s.strokeStyle=h[a],s.lineWidth=u[a],n=t(c.x),r=i(c.y+e.pos*c.h),s.beginPath(),s.moveTo(n,r),s.lineTo(n+c.w,r),s.stroke(),s.restore())}})),s.restore()}o.getOptionForAxis("drawGrid","x")&&(a=l.xticks,s.save(),g=o.getOptionForAxis("gridLinePattern","x"),(f=g&&g.length>=2)&&s.setLineDash&&s.setLineDash(g),s.strokeStyle=o.getOptionForAxis("gridLineColor","x"),s.lineWidth=o.getOptionForAxis("gridLineWidth","x"),a.forEach((function(e){e.has_tick&&(n=t(c.x+e.pos*c.w),r=i(c.y+c.h),s.beginPath(),s.moveTo(n,r),s.lineTo(n,c.y),s.closePath(),s.stroke())})),f&&s.setLineDash&&s.setLineDash([]),s.restore())},n.prototype.destroy=function(){},i.default=n,t.exports=i.default},{}],24:[function(e,t,i){"use strict";function n(e,t,i){if(!e||e.length<=1)return'<div class="dygraph-legend-line" style="border-bottom-color: '+t+';"></div>';var n,r,a,o,s=0,l=0,c=[];for(n=0;n<=e.length;n++)s+=e[n%e.length];if((o=Math.floor(i/(s-e[0])))>1){for(n=0;n<e.length;n++)c[n]=e[n]/i;l=c.length}else{for(o=1,n=0;n<e.length;n++)c[n]=e[n]/s;l=c.length+1}var d="";for(r=0;r<o;r++)for(n=0;n<l;n+=2)a=c[n%c.length],d+='<div class="dygraph-legend-dash" style="margin-right: '+(n<e.length?c[(n+1)%c.length]:0)+"em; padding-left: "+a+'em;"></div>';return d}Object.defineProperty(i,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../dygraph-utils")),a=function(){this.legend_div_=null,this.is_generated_div_=!1};a.prototype.toString=function(){return"Legend Plugin"},a.prototype.activate=function(e){var t,i=e.getOption("labelsDiv");return i&&null!==i?t="string"==typeof i||i instanceof String?document.getElementById(i):i:((t=document.createElement("div")).className="dygraph-legend",e.graphDiv.appendChild(t),this.is_generated_div_=!0),this.legend_div_=t,this.one_em_width_=10,{select:this.select,deselect:this.deselect,predraw:this.predraw,didDrawChart:this.didDrawChart}};var o=function(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};a.prototype.select=function(e){var t=e.selectedX,i=e.selectedPoints,n=e.selectedRow,r=e.dygraph.getOption("legend");if("never"!==r){if("follow"===r){var o=e.dygraph.plotter_.area,s=this.legend_div_.offsetWidth,l=e.dygraph.getOptionForAxis("axisLabelWidth","y"),c=i[0].x*o.w+50,d=i[0].y*o.h-50;c+s+1>o.w&&(c=c-100-s-(l-o.x)),e.dygraph.graphDiv.appendChild(this.legend_div_),this.legend_div_.style.left=l+c+"px",this.legend_div_.style.top=d+"px"}var h=a.generateLegendHTML(e.dygraph,t,i,this.one_em_width_,n);this.legend_div_.innerHTML=h,this.legend_div_.style.display=""}else this.legend_div_.style.display="none"},a.prototype.deselect=function(e){"always"!==e.dygraph.getOption("legend")&&(this.legend_div_.style.display="none");var t=function(e){var t=document.createElement("span");t.setAttribute("style","margin: 0; padding: 0 0 0 1em; border: 0;"),e.appendChild(t);var i=t.offsetWidth;return e.removeChild(t),i}(this.legend_div_);this.one_em_width_=t;var i=a.generateLegendHTML(e.dygraph,void 0,void 0,t,null);this.legend_div_.innerHTML=i},a.prototype.didDrawChart=function(e){this.deselect(e)},a.prototype.predraw=function(e){if(this.is_generated_div_){e.dygraph.graphDiv.appendChild(this.legend_div_);var t=e.dygraph.getArea(),i=this.legend_div_.offsetWidth;this.legend_div_.style.left=t.x+t.w-i-1+"px",this.legend_div_.style.top=t.y+"px"}},a.prototype.destroy=function(){this.legend_div_=null},a.generateLegendHTML=function(e,t,i,s,l){var c={dygraph:e,x:t,series:[]},d={},h=e.getLabels();if(h)for(var u=1;u<h.length;u++){var p=e.getPropertiesForSeries(h[u]),f={dashHTML:n(e.getOption("strokePattern",h[u]),p.color,s),label:h[u],labelHTML:o(h[u]),isVisible:p.visible,color:p.color};c.series.push(f),d[h[u]]=f}if(void 0!==t){var g=e.optionsViewForAxis_("x"),m=g("valueFormatter");c.xHTML=m.call(e,t,g,h[0],e,l,0);var v=[],_=e.numAxes();for(u=0;u<_;u++)v[u]=e.optionsViewForAxis_("y"+(u?1+u:""));var b=e.getOption("labelsShowZeroValues"),w=e.getHighlightSeries();for(u=0;u<i.length;u++){var y=i[u];if((f=d[y.name]).y=y.yval,0===y.yval&&!b||isNaN(y.canvasy))f.isVisible=!1;else{var x=v[(p=e.getPropertiesForSeries(y.name)).axis-1],C=x("valueFormatter").call(e,y.yval,x,y.name,e,l,h.indexOf(y.name));r.update(f,{yHTML:C}),y.name==w&&(f.isHighlighted=!0)}}}return(e.getOption("legendFormatter")||a.defaultFormatter).call(e,c)},a.defaultFormatter=function(e){var t=e.dygraph;if(!0!==t.getOption("showLabelsOnHighlight"))return"";var i,n=t.getOption("labelsSeparateLines");if(void 0===e.x){if("always"!=t.getOption("legend"))return"";i="";for(var r=0;r<e.series.length;r++)(a=e.series[r]).isVisible&&(""!==i&&(i+=n?"<br/>":" "),i+="<span style='font-weight: bold; color: "+a.color+";'>"+a.dashHTML+" "+a.labelHTML+"</span>");return i}for(i=e.xHTML+":",r=0;r<e.series.length;r++){var a;(a=e.series[r]).isVisible&&(n&&(i+="<br>"),i+="<span"+(a.isHighlighted?' class="highlight"':"")+"> <b><span style='color: "+a.color+";'>"+a.labelHTML+"</span></b>:&#160;"+a.yHTML+"</span>")}return i},i.default=a,t.exports=i.default},{"../dygraph-utils":17}],25:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(i,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(e("../dygraph-utils")),a=n(e("../dygraph-interaction-model")),o=n(e("../iframe-tarp")),s=function(){this.hasTouchInterface_="undefined"!=typeof TouchEvent,this.isMobileDevice_=/mobile|android/gi.test(navigator.appVersion),this.interfaceCreated_=!1};s.prototype.toString=function(){return"RangeSelector Plugin"},s.prototype.activate=function(e){return this.dygraph_=e,this.getOption_("showRangeSelector")&&this.createInterface_(),{layout:this.reserveSpace_,predraw:this.renderStaticLayer_,didDrawChart:this.renderInteractiveLayer_}},s.prototype.destroy=function(){this.bgcanvas_=null,this.fgcanvas_=null,this.leftZoomHandle_=null,this.rightZoomHandle_=null},s.prototype.getOption_=function(e,t){return this.dygraph_.getOption(e,t)},s.prototype.setDefaultOption_=function(e,t){this.dygraph_.attrs_[e]=t},s.prototype.createInterface_=function(){this.createCanvases_(),this.createZoomHandles_(),this.initInteraction_(),this.getOption_("animatedZooms")&&(console.warn("Animated zooms and range selector are not compatible; disabling animatedZooms."),this.dygraph_.updateOptions({animatedZooms:!1},!0)),this.interfaceCreated_=!0,this.addToGraph_()},s.prototype.addToGraph_=function(){var e=this.graphDiv_=this.dygraph_.graphDiv;e.appendChild(this.bgcanvas_),e.appendChild(this.fgcanvas_),e.appendChild(this.leftZoomHandle_),e.appendChild(this.rightZoomHandle_)},s.prototype.removeFromGraph_=function(){var e=this.graphDiv_;e.removeChild(this.bgcanvas_),e.removeChild(this.fgcanvas_),e.removeChild(this.leftZoomHandle_),e.removeChild(this.rightZoomHandle_),this.graphDiv_=null},s.prototype.reserveSpace_=function(e){this.getOption_("showRangeSelector")&&e.reserveSpaceBottom(this.getOption_("rangeSelectorHeight")+4)},s.prototype.renderStaticLayer_=function(){this.updateVisibility_()&&(this.resize_(),this.drawStaticLayer_())},s.prototype.renderInteractiveLayer_=function(){this.updateVisibility_()&&!this.isChangingRange_&&(this.placeZoomHandles_(),this.drawInteractiveLayer_())},s.prototype.updateVisibility_=function(){var e=this.getOption_("showRangeSelector");if(e)this.interfaceCreated_?this.graphDiv_&&this.graphDiv_.parentNode||this.addToGraph_():this.createInterface_();else if(this.graphDiv_){this.removeFromGraph_();var t=this.dygraph_;setTimeout((function(){t.width_=0,t.resize()}),1)}return e},s.prototype.resize_=function(){function e(e,t,i,n){var a=n||r.getContextPixelRatio(t);e.style.top=i.y+"px",e.style.left=i.x+"px",e.width=i.w*a,e.height=i.h*a,e.style.width=i.w+"px",e.style.height=i.h+"px",1!=a&&t.scale(a,a)}var t=this.dygraph_.layout_.getPlotArea(),i=0;this.dygraph_.getOptionForAxis("drawAxis","x")&&(i=this.getOption_("xAxisHeight")||this.getOption_("axisLabelFontSize")+2*this.getOption_("axisTickSize")),this.canvasRect_={x:t.x,y:t.y+t.h+i+4,w:t.w,h:this.getOption_("rangeSelectorHeight")};var n=this.dygraph_.getNumericOption("pixelRatio");e(this.bgcanvas_,this.bgcanvas_ctx_,this.canvasRect_,n),e(this.fgcanvas_,this.fgcanvas_ctx_,this.canvasRect_,n)},s.prototype.createCanvases_=function(){this.bgcanvas_=r.createCanvas(),this.bgcanvas_.className="dygraph-rangesel-bgcanvas",this.bgcanvas_.style.position="absolute",this.bgcanvas_.style.zIndex=9,this.bgcanvas_ctx_=r.getContext(this.bgcanvas_),this.fgcanvas_=r.createCanvas(),this.fgcanvas_.className="dygraph-rangesel-fgcanvas",this.fgcanvas_.style.position="absolute",this.fgcanvas_.style.zIndex=9,this.fgcanvas_.style.cursor="default",this.fgcanvas_ctx_=r.getContext(this.fgcanvas_)},s.prototype.createZoomHandles_=function(){var e=new Image;e.className="dygraph-rangesel-zoomhandle",e.style.position="absolute",e.style.zIndex=10,e.style.visibility="hidden",e.style.cursor="col-resize",e.width=9,e.height=16,e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAQCAYAAADESFVDAAAAAXNSR0IArs4c6QAAAAZiS0dEANAAzwDP4Z7KegAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB9sHGw0cMqdt1UwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAaElEQVQoz+3SsRFAQBCF4Z9WJM8KCDVwownl6YXsTmCUsyKGkZzcl7zkz3YLkypgAnreFmDEpHkIwVOMfpdi9CEEN2nGpFdwD03yEqDtOgCaun7sqSTDH32I1pQA2Pb9sZecAxc5r3IAb21d6878xsAAAAAASUVORK5CYII=",this.isMobileDevice_&&(e.width*=2,e.height*=2),this.leftZoomHandle_=e,this.rightZoomHandle_=e.cloneNode(!1)},s.prototype.initInteraction_=function(){var e,t,i,n,s,l,c,d,h,u,p,f,g,m,v=this,_=document,b=0,w=null,y=!1,x=!1,C=!this.isMobileDevice_,S=new o.default;e=function(e){var t=v.dygraph_.xAxisExtremes(),i=(t[1]-t[0])/v.canvasRect_.w;return[t[0]+(e.leftHandlePos-v.canvasRect_.x)*i,t[0]+(e.rightHandlePos-v.canvasRect_.x)*i]},t=function(e){return r.cancelEvent(e),y=!0,b=e.clientX,w=e.target?e.target:e.srcElement,"mousedown"!==e.type&&"dragstart"!==e.type||(r.addEvent(_,"mousemove",i),r.addEvent(_,"mouseup",n)),v.fgcanvas_.style.cursor="col-resize",S.cover(),!0},i=function(e){if(!y)return!1;r.cancelEvent(e);var t=e.clientX-b;if(Math.abs(t)<4)return!0;b=e.clientX;var i,n=v.getZoomHandleStatus_();w==v.leftZoomHandle_?(i=n.leftHandlePos+t,i=Math.min(i,n.rightHandlePos-w.width-3),i=Math.max(i,v.canvasRect_.x)):(i=n.rightHandlePos+t,i=Math.min(i,v.canvasRect_.x+v.canvasRect_.w),i=Math.max(i,n.leftHandlePos+w.width+3));var a=w.width/2;return w.style.left=i-a+"px",v.drawInteractiveLayer_(),C&&s(),!0},n=function(e){return!!y&&(y=!1,S.uncover(),r.removeEvent(_,"mousemove",i),r.removeEvent(_,"mouseup",n),v.fgcanvas_.style.cursor="default",C||s(),!0)},s=function(){try{var t=v.getZoomHandleStatus_();if(v.isChangingRange_=!0,t.isZoomed){var i=e(t);v.dygraph_.doZoomXDates_(i[0],i[1])}else v.dygraph_.resetZoom()}finally{v.isChangingRange_=!1}},l=function(e){var t=v.leftZoomHandle_.getBoundingClientRect(),i=t.left+t.width/2,n=(t=v.rightZoomHandle_.getBoundingClientRect()).left+t.width/2;return e.clientX>i&&e.clientX<n},c=function(e){return!(x||!l(e)||!v.getZoomHandleStatus_().isZoomed)&&(r.cancelEvent(e),x=!0,b=e.clientX,"mousedown"===e.type&&(r.addEvent(_,"mousemove",d),r.addEvent(_,"mouseup",h)),!0)},d=function(e){if(!x)return!1;r.cancelEvent(e);var t=e.clientX-b;if(Math.abs(t)<4)return!0;b=e.clientX;var i=v.getZoomHandleStatus_(),n=i.leftHandlePos,a=i.rightHandlePos,o=a-n;n+t<=v.canvasRect_.x?a=(n=v.canvasRect_.x)+o:a+t>=v.canvasRect_.x+v.canvasRect_.w?n=(a=v.canvasRect_.x+v.canvasRect_.w)-o:(n+=t,a+=t);var s=v.leftZoomHandle_.width/2;return v.leftZoomHandle_.style.left=n-s+"px",v.rightZoomHandle_.style.left=a-s+"px",v.drawInteractiveLayer_(),C&&u(),!0},h=function(e){return!!x&&(x=!1,r.removeEvent(_,"mousemove",d),r.removeEvent(_,"mouseup",h),C||u(),!0)},u=function(){try{v.isChangingRange_=!0,v.dygraph_.dateWindow_=e(v.getZoomHandleStatus_()),v.dygraph_.drawGraph_(!1)}finally{v.isChangingRange_=!1}},p=function(e){if(!y&&!x){var t=l(e)?"move":"default";t!=v.fgcanvas_.style.cursor&&(v.fgcanvas_.style.cursor=t)}},f=function(e){"touchstart"==e.type&&1==e.targetTouches.length?t(e.targetTouches[0])&&r.cancelEvent(e):"touchmove"==e.type&&1==e.targetTouches.length?i(e.targetTouches[0])&&r.cancelEvent(e):n(e)},g=function(e){"touchstart"==e.type&&1==e.targetTouches.length?c(e.targetTouches[0])&&r.cancelEvent(e):"touchmove"==e.type&&1==e.targetTouches.length?d(e.targetTouches[0])&&r.cancelEvent(e):h(e)},m=function(e,t){for(var i=["touchstart","touchend","touchmove","touchcancel"],n=0;n<i.length;n++)v.dygraph_.addAndTrackEvent(e,i[n],t)},this.setDefaultOption_("interactionModel",a.default.dragIsPanInteractionModel),this.setDefaultOption_("panEdgeFraction",1e-4);var T=window.opera?"mousedown":"dragstart";this.dygraph_.addAndTrackEvent(this.leftZoomHandle_,T,t),this.dygraph_.addAndTrackEvent(this.rightZoomHandle_,T,t),this.dygraph_.addAndTrackEvent(this.fgcanvas_,"mousedown",c),this.dygraph_.addAndTrackEvent(this.fgcanvas_,"mousemove",p),this.hasTouchInterface_&&(m(this.leftZoomHandle_,f),m(this.rightZoomHandle_,f),m(this.fgcanvas_,g))},s.prototype.drawStaticLayer_=function(){var e=this.bgcanvas_ctx_;e.clearRect(0,0,this.canvasRect_.w,this.canvasRect_.h);try{this.drawMiniPlot_()}catch(e){console.warn(e)}this.bgcanvas_ctx_.lineWidth=this.getOption_("rangeSelectorBackgroundLineWidth"),e.strokeStyle=this.getOption_("rangeSelectorBackgroundStrokeColor"),e.beginPath(),e.moveTo(.5,.5),e.lineTo(.5,this.canvasRect_.h-.5),e.lineTo(this.canvasRect_.w-.5,this.canvasRect_.h-.5),e.lineTo(this.canvasRect_.w-.5,.5),e.stroke()},s.prototype.drawMiniPlot_=function(){var e=this.getOption_("rangeSelectorPlotFillColor"),t=this.getOption_("rangeSelectorPlotFillGradientColor"),i=this.getOption_("rangeSelectorPlotStrokeColor");if(e||i){var n=this.getOption_("stepPlot"),r=this.computeCombinedSeriesAndLimits_(),a=r.yMax-r.yMin,o=this.bgcanvas_ctx_,s=this.dygraph_.xAxisExtremes(),l=Math.max(s[1]-s[0],1e-30),c=(this.canvasRect_.w-.5)/l,d=(this.canvasRect_.h-.5)/a,h=this.canvasRect_.w-.5,u=this.canvasRect_.h-.5,p=null,f=null;o.beginPath(),o.moveTo(.5,u);for(var g=0;g<r.data.length;g++){var m=r.data[g],v=null!==m[0]?(m[0]-s[0])*c:NaN,_=null!==m[1]?u-(m[1]-r.yMin)*d:NaN;(n||null===p||Math.round(v)!=Math.round(p))&&(isFinite(v)&&isFinite(_)?(null===p?o.lineTo(v,u):n&&o.lineTo(v,f),o.lineTo(v,_),p=v,f=_):(null!==p&&(n?(o.lineTo(v,f),o.lineTo(v,u)):o.lineTo(p,u)),p=f=null))}if(o.lineTo(h,u),o.closePath(),e){var b=this.bgcanvas_ctx_.createLinearGradient(0,0,0,u);t&&b.addColorStop(0,t),b.addColorStop(1,e),this.bgcanvas_ctx_.fillStyle=b,o.fill()}i&&(this.bgcanvas_ctx_.strokeStyle=i,this.bgcanvas_ctx_.lineWidth=this.getOption_("rangeSelectorPlotLineWidth"),o.stroke())}},s.prototype.computeCombinedSeriesAndLimits_=function(){var e,t=this.dygraph_,i=this.getOption_("logscale"),n=t.numColumns(),a=t.getLabels(),o=new Array(n),s=!1,l=t.visibility(),c=[];for(e=1;e<n;e++){var d=this.getOption_("showInRangeSelector",a[e]);c.push(d),null!==d&&(s=!0)}if(s)for(e=1;e<n;e++)o[e]=c[e-1];else for(e=1;e<n;e++)o[e]=l[e-1];var h=[],u=t.dataHandler_,p=t.attributes_;for(e=1;e<t.numColumns();e++)if(o[e]){var f=u.extractSeries(t.rawData_,e,p);t.rollPeriod()>1&&(f=u.rollingAverage(f,t.rollPeriod(),p)),h.push(f)}var g=[];for(e=0;e<h[0].length;e++){for(var m=0,v=0,_=0;_<h.length;_++){var b=h[_][e][1];null===b||isNaN(b)||(v++,m+=b)}g.push([h[0][e][0],m/v])}var w=Number.MAX_VALUE,y=-Number.MAX_VALUE;for(e=0;e<g.length;e++){var x=g[e][1];null!==x&&isFinite(x)&&(!i||x>0)&&(w=Math.min(w,x),y=Math.max(y,x))}if(i)for(y=r.log10(y),y+=.25*y,w=r.log10(w),e=0;e<g.length;e++)g[e][1]=r.log10(g[e][1]);else{var C,S=y-w;y+=C=S<=Number.MIN_VALUE?.25*y:.25*S,w-=C}return{data:g,yMin:w,yMax:y}},s.prototype.placeZoomHandles_=function(){var e=this.dygraph_.xAxisExtremes(),t=this.dygraph_.xAxisRange(),i=e[1]-e[0],n=Math.max(0,(t[0]-e[0])/i),r=Math.max(0,(e[1]-t[1])/i),a=this.canvasRect_.x+this.canvasRect_.w*n,o=this.canvasRect_.x+this.canvasRect_.w*(1-r),s=Math.max(this.canvasRect_.y,this.canvasRect_.y+(this.canvasRect_.h-this.leftZoomHandle_.height)/2),l=this.leftZoomHandle_.width/2;this.leftZoomHandle_.style.left=a-l+"px",this.leftZoomHandle_.style.top=s+"px",this.rightZoomHandle_.style.left=o-l+"px",this.rightZoomHandle_.style.top=this.leftZoomHandle_.style.top,this.leftZoomHandle_.style.visibility="visible",this.rightZoomHandle_.style.visibility="visible"},s.prototype.drawInteractiveLayer_=function(){var e=this.fgcanvas_ctx_;e.clearRect(0,0,this.canvasRect_.w,this.canvasRect_.h);var t=this.canvasRect_.w-1,i=this.canvasRect_.h-1,n=this.getZoomHandleStatus_();if(e.strokeStyle=this.getOption_("rangeSelectorForegroundStrokeColor"),e.lineWidth=this.getOption_("rangeSelectorForegroundLineWidth"),n.isZoomed){var r=Math.max(1,n.leftHandlePos-this.canvasRect_.x),a=Math.min(t,n.rightHandlePos-this.canvasRect_.x);e.fillStyle="rgba(240, 240, 240, "+this.getOption_("rangeSelectorAlpha").toString()+")",e.fillRect(0,0,r,this.canvasRect_.h),e.fillRect(a,0,this.canvasRect_.w-a,this.canvasRect_.h),e.beginPath(),e.moveTo(1,1),e.lineTo(r,1),e.lineTo(r,i),e.lineTo(a,i),e.lineTo(a,1),e.lineTo(t,1),e.stroke()}else e.beginPath(),e.moveTo(1,1),e.lineTo(1,i),e.lineTo(t,i),e.lineTo(t,1),e.stroke()},s.prototype.getZoomHandleStatus_=function(){var e=this.leftZoomHandle_.width/2,t=parseFloat(this.leftZoomHandle_.style.left)+e,i=parseFloat(this.rightZoomHandle_.style.left)+e;return{leftHandlePos:t,rightHandlePos:i,isZoomed:t-1>this.canvasRect_.x||i+1<this.canvasRect_.x+this.canvasRect_.w}},i.default=s,t.exports=i.default},{"../dygraph-interaction-model":12,"../dygraph-utils":17,"../iframe-tarp":19}]},{},[18])(18)},function(e,t){!function(){"use strict";window.dygraphConfig={defaultFrame:12e5,zeropad:function(e){return e<10?"0"+e:e},xAxisFormat:function(e){if(-1===e)return"";var t=new Date(e);return this.zeropad(t.getHours())+":"+this.zeropad(t.getMinutes())+":"+this.zeropad(t.getSeconds())},mergeObjects:function(e,t,i){i||(i=[]);var n,r={};return i.forEach((function(i){var n=e[i],a=t[i];void 0===n&&(n={}),void 0===a&&(a={}),r[i]=_.extend(n,a)})),n=_.extend(e,t),Object.keys(r).forEach((function(e){n[e]=r[e]})),n},mapStatToFigure:{pageFaults:["times","majorPageFaultsPerSecond","minorPageFaultsPerSecond"],systemUserTime:["times","systemTimePerSecond","userTimePerSecond"],totalTime:["times","avgQueueTime","avgRequestTime","avgIoTime"],dataTransfer:["times","bytesSentPerSecond","bytesReceivedPerSecond"],requests:["times","getsPerSecond","putsPerSecond","postsPerSecond","deletesPerSecond","patchesPerSecond","headsPerSecond","optionsPerSecond","othersPerSecond"]},colors:["rgb(95, 194, 135)","rgb(238, 190, 77)","#81ccd8","#7ca530","#3c3c3c","#aa90bd","#e1811d","#c7d4b2","#d0b2d4"],figureDependedOptions:{clusterRequestsPerSecond:{showLabelsOnHighlight:!0,title:"",header:"Cluster Requests per Second",stackedGraph:!0,div:"lineGraphLegend",labelsKMG2:!1,axes:{y:{valueFormatter:function(e){return parseFloat(e.toPrecision(3))},axisLabelFormatter:function(e){return 0===e?0:parseFloat(e.toPrecision(3))}}}},pageFaults:{header:"Page Faults",visibility:[!0,!1],labels:["datetime","Major Page","Minor Page"],div:"pageFaultsChart",labelsKMG2:!1,axes:{y:{valueFormatter:function(e){return parseFloat(e.toPrecision(3))},axisLabelFormatter:function(e){return 0===e?0:parseFloat(e.toPrecision(3))}}}},systemUserTime:{div:"systemUserTimeChart",header:"System and User Time",labels:["datetime","System Time","User Time"],stackedGraph:!0,labelsKMG2:!1,axes:{y:{valueFormatter:function(e){return parseFloat(e.toPrecision(3))},axisLabelFormatter:function(e){return 0===e?0:parseFloat(e.toPrecision(3))}}}},totalTime:{div:"totalTimeChart",header:"Total Time",labels:["datetime","Queue","Computation","I/O"],labelsKMG2:!1,axes:{y:{valueFormatter:function(e){return parseFloat(e.toPrecision(3))},axisLabelFormatter:function(e){return 0===e?0:parseFloat(e.toPrecision(3))}}},stackedGraph:!0},dataTransfer:{header:"Data Transfer",labels:["datetime","Bytes sent","Bytes received"],stackedGraph:!0,div:"dataTransferChart"},requests:{header:"Requests",labels:["datetime","Reads","Writes"],stackedGraph:!0,div:"requestsChart",axes:{y:{valueFormatter:function(e){return parseFloat(e.toPrecision(3))},axisLabelFormatter:function(e){return 0===e?0:parseFloat(e.toPrecision(3))}}}}},getDashBoardFigures:function(e){var t=[],i=this;return Object.keys(this.figureDependedOptions).forEach((function(n){"clusterRequestsPerSecond"!==n&&(i.figureDependedOptions[n].div||e)&&t.push(n)})),t},getDefaultConfig:function(e){var t=this,i={digitsAfterDecimal:1,drawGapPoints:!0,fillGraph:!0,fillAlpha:.85,showLabelsOnHighlight:!1,strokeWidth:0,lineWidth:0,strokeBorderWidth:0,includeZero:!0,highlightCircleSize:2.5,labelsSeparateLines:!0,strokeBorderColor:"rgba(0,0,0,0)",interactionModel:{},maxNumberWidth:10,colors:[this.colors[0]],xAxisLabelWidth:"50",rightGap:15,showRangeSelector:!1,rangeSelectorHeight:50,rangeSelectorPlotStrokeColor:"#365300",rangeSelectorPlotFillColor:"",pixelsPerLabel:50,labelsKMG2:!0,dateWindow:[(new Date).getTime()-this.defaultFrame,(new Date).getTime()],axes:{x:{valueFormatter:function(e){return t.xAxisFormat(e)}},y:{ticker:Dygraph.numericLinearTicks}}};return this.figureDependedOptions[e]&&(i=this.mergeObjects(i,this.figureDependedOptions[e],["axes"])).div&&i.labels&&(i.colors=this.getColors(i.labels),i.labelsDiv=document.getElementById(i.div+"Legend"),i.legend="always",i.showLabelsOnHighlight=!0),i},getDetailChartConfig:function(e){var t=_.extend(this.getDefaultConfig(e),{showRangeSelector:!0,interactionModel:null,showLabelsOnHighlight:!0,highlightCircleSize:2.5,legend:"always",labelsDiv:"div#detailLegend.dashboard-legend-inner"});return"pageFaults"===e&&(t.visibility=[!0,!0]),t.labels||(t.labels=["datetime",t.header],t.colors=this.getColors(t.labels)),t},getColors:function(e){return this.colors.concat([]).slice(0,e.length-1)}}}()},function(e,t,i){(function(e){e.exports=function(){"use strict";function t(){return it.apply(null,arguments)}function i(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function n(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function r(e){return void 0===e}function a(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function o(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function s(e,t){var i,n=[];for(i=0;i<e.length;++i)n.push(t(e[i],i));return n}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(e,t){for(var i in t)l(t,i)&&(e[i]=t[i]);return l(t,"toString")&&(e.toString=t.toString),l(t,"valueOf")&&(e.valueOf=t.valueOf),e}function d(e,t,i,n){return xe(e,t,i,n,!0).utc()}function h(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function u(e){if(null==e._isValid){var t=h(e),i=nt.call(t.parsedDateParts,(function(e){return null!=e})),n=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&i);if(e._strict&&(n=n&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return n;e._isValid=n}return e._isValid}function p(e){var t=d(NaN);return null!=e?c(h(t),e):h(t).userInvalidated=!0,t}function f(e,t){var i,n,a;if(r(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),r(t._i)||(e._i=t._i),r(t._f)||(e._f=t._f),r(t._l)||(e._l=t._l),r(t._strict)||(e._strict=t._strict),r(t._tzm)||(e._tzm=t._tzm),r(t._isUTC)||(e._isUTC=t._isUTC),r(t._offset)||(e._offset=t._offset),r(t._pf)||(e._pf=h(t)),r(t._locale)||(e._locale=t._locale),rt.length>0)for(i=0;i<rt.length;i++)r(a=t[n=rt[i]])||(e[n]=a);return e}function g(e){f(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===at&&(at=!0,t.updateOffset(this),at=!1)}function m(e){return e instanceof g||null!=e&&null!=e._isAMomentObject}function v(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function _(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=v(t)),i}function b(e,t,i){var n,r=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),o=0;for(n=0;n<r;n++)(i&&e[n]!==t[n]||!i&&_(e[n])!==_(t[n]))&&o++;return o+a}function w(e){!1===t.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function y(e,i){var n=!0;return c((function(){if(null!=t.deprecationHandler&&t.deprecationHandler(null,e),n){for(var r,a=[],o=0;o<arguments.length;o++){if(r="","object"==typeof arguments[o]){for(var s in r+="\n["+o+"] ",arguments[0])r+=s+": "+arguments[0][s]+", ";r=r.slice(0,-2)}else r=arguments[o];a.push(r)}w(e+"\nArguments: "+Array.prototype.slice.call(a).join("")+"\n"+(new Error).stack),n=!1}return i.apply(this,arguments)}),i)}function x(e,i){null!=t.deprecationHandler&&t.deprecationHandler(e,i),ot[e]||(w(i),ot[e]=!0)}function C(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function S(e,t){var i,r=c({},e);for(i in t)l(t,i)&&(n(e[i])&&n(t[i])?(r[i]={},c(r[i],e[i]),c(r[i],t[i])):null!=t[i]?r[i]=t[i]:delete r[i]);for(i in e)l(e,i)&&!l(t,i)&&n(e[i])&&(r[i]=c({},r[i]));return r}function T(e){null!=e&&this.set(e)}function k(e,t){var i=e.toLowerCase();lt[i]=lt[i+"s"]=lt[t]=e}function A(e){return"string"==typeof e?lt[e]||lt[e.toLowerCase()]:void 0}function P(e){var t,i,n={};for(i in e)l(e,i)&&(t=A(i))&&(n[t]=e[i]);return n}function D(e,t){ct[e]=t}function E(e,i){return function(n){return null!=n?(O(this,e,n),t.updateOffset(this,i),this):M(this,e)}}function M(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function O(e,t,i){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](i)}function I(e,t,i){var n=""+Math.abs(e),r=t-n.length;return(e>=0?i?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+n}function N(e,t,i,n){var r=n;"string"==typeof n&&(r=function(){return this[n]()}),e&&(pt[e]=r),t&&(pt[t[0]]=function(){return I(r.apply(this,arguments),t[1],t[2])}),i&&(pt[i]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function L(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function R(e,t){return e.isValid()?(t=j(t,e.localeData()),ut[t]=ut[t]||function(e){var t,i,n=e.match(dt);for(t=0,i=n.length;t<i;t++)pt[n[t]]?n[t]=pt[n[t]]:n[t]=L(n[t]);return function(t){var r,a="";for(r=0;r<i;r++)a+=C(n[r])?n[r].call(t,e):n[r];return a}}(t),ut[t](e)):e.localeData().invalidDate()}function j(e,t){function i(e){return t.longDateFormat(e)||e}var n=5;for(ht.lastIndex=0;n>=0&&ht.test(e);)e=e.replace(ht,i),ht.lastIndex=0,n-=1;return e}function $(e,t,i){Et[e]=C(t)?t:function(e,n){return e&&i?i:t}}function B(e,t){return l(Et,e)?Et[e](t._strict,t._locale):new RegExp(function(e){return V(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,i,n,r){return t||i||n||r})))}(e))}function V(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function H(e,t){var i,n=t;for("string"==typeof e&&(e=[e]),a(t)&&(n=function(e,i){i[t]=_(e)}),i=0;i<e.length;i++)Mt[e[i]]=n}function F(e,t){H(e,(function(e,i,n,r){n._w=n._w||{},t(e,n._w,n,r)}))}function z(e,t,i){null!=t&&l(Mt,e)&&Mt[e](t,i._a,i,e)}function U(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function W(e,t,i){var n,r,a,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)a=d([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(a,"").toLocaleLowerCase();return i?"MMM"===t?-1!==(r=Ht.call(this._shortMonthsParse,o))?r:null:-1!==(r=Ht.call(this._longMonthsParse,o))?r:null:"MMM"===t?-1!==(r=Ht.call(this._shortMonthsParse,o))||-1!==(r=Ht.call(this._longMonthsParse,o))?r:null:-1!==(r=Ht.call(this._longMonthsParse,o))||-1!==(r=Ht.call(this._shortMonthsParse,o))?r:null}function G(e,t){var i;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=_(t);else if(!a(t=e.localeData().monthsParse(t)))return e;return i=Math.min(e.date(),U(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e}function q(e){return null!=e?(G(this,e),t.updateOffset(this,!0),this):M(this,"Month")}function Y(){function e(e,t){return t.length-e.length}var t,i,n=[],r=[],a=[];for(t=0;t<12;t++)i=d([2e3,t]),n.push(this.monthsShort(i,"")),r.push(this.months(i,"")),a.push(this.months(i,"")),a.push(this.monthsShort(i,""));for(n.sort(e),r.sort(e),a.sort(e),t=0;t<12;t++)n[t]=V(n[t]),r[t]=V(r[t]);for(t=0;t<24;t++)a[t]=V(a[t]);this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function Q(e){return J(e)?366:365}function J(e){return e%4===0&&e%100!==0||e%400===0}function Z(e,t,i,n,r,a,o){var s=new Date(e,t,i,n,r,a,o);return e<100&&e>=0&&isFinite(s.getFullYear())&&s.setFullYear(e),s}function X(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function K(e,t,i){var n=7+t-i;return-(7+X(e,0,n).getUTCDay()-t)%7+n-1}function ee(e,t,i,n,r){var a,o,s=1+7*(t-1)+(7+i-n)%7+K(e,n,r);return s<=0?o=Q(a=e-1)+s:s>Q(e)?(a=e+1,o=s-Q(e)):(a=e,o=s),{year:a,dayOfYear:o}}function te(e,t,i){var n,r,a=K(e.year(),t,i),o=Math.floor((e.dayOfYear()-a-1)/7)+1;return o<1?n=o+ie(r=e.year()-1,t,i):o>ie(e.year(),t,i)?(n=o-ie(e.year(),t,i),r=e.year()+1):(r=e.year(),n=o),{week:n,year:r}}function ie(e,t,i){var n=K(e,t,i),r=K(e+1,t,i);return(Q(e)-n+r)/7}function ne(e,t,i){var n,r,a,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)a=d([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(a,"").toLocaleLowerCase();return i?"dddd"===t?-1!==(r=Ht.call(this._weekdaysParse,o))?r:null:"ddd"===t?-1!==(r=Ht.call(this._shortWeekdaysParse,o))?r:null:-1!==(r=Ht.call(this._minWeekdaysParse,o))?r:null:"dddd"===t?-1!==(r=Ht.call(this._weekdaysParse,o))||-1!==(r=Ht.call(this._shortWeekdaysParse,o))||-1!==(r=Ht.call(this._minWeekdaysParse,o))?r:null:"ddd"===t?-1!==(r=Ht.call(this._shortWeekdaysParse,o))||-1!==(r=Ht.call(this._weekdaysParse,o))||-1!==(r=Ht.call(this._minWeekdaysParse,o))?r:null:-1!==(r=Ht.call(this._minWeekdaysParse,o))||-1!==(r=Ht.call(this._weekdaysParse,o))||-1!==(r=Ht.call(this._shortWeekdaysParse,o))?r:null}function re(){function e(e,t){return t.length-e.length}var t,i,n,r,a,o=[],s=[],l=[],c=[];for(t=0;t<7;t++)i=d([2e3,1]).day(t),n=this.weekdaysMin(i,""),r=this.weekdaysShort(i,""),a=this.weekdays(i,""),o.push(n),s.push(r),l.push(a),c.push(n),c.push(r),c.push(a);for(o.sort(e),s.sort(e),l.sort(e),c.sort(e),t=0;t<7;t++)s[t]=V(s[t]),l[t]=V(l[t]),c[t]=V(c[t]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function ae(){return this.hours()%12||12}function oe(e,t){N(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function se(e,t){return t._meridiemParse}function le(e){return e?e.toLowerCase().replace("_","-"):e}function ce(t){var i=null;if(!ni[t]&&"undefined"!=typeof e&&e&&e.exports)try{i=ei._abbr,function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}(),de(i)}catch(t){}return ni[t]}function de(e,t){var i;return e&&(i=r(t)?ue(e):he(e,t))&&(ei=i),ei._abbr}function he(e,t){if(null!==t){var i=ii;if(t.abbr=e,null!=ni[e])x("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=ni[e]._config;else if(null!=t.parentLocale){if(null==ni[t.parentLocale])return ri[t.parentLocale]||(ri[t.parentLocale]=[]),ri[t.parentLocale].push({name:e,config:t}),null;i=ni[t.parentLocale]._config}return ni[e]=new T(S(i,t)),ri[e]&&ri[e].forEach((function(e){he(e.name,e.config)})),de(e),ni[e]}return delete ni[e],null}function ue(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return ei;if(!i(e)){if(t=ce(e))return t;e=[e]}return function(e){for(var t,i,n,r,a=0;a<e.length;){for(t=(r=le(e[a]).split("-")).length,i=(i=le(e[a+1]))?i.split("-"):null;t>0;){if(n=ce(r.slice(0,t).join("-")))return n;if(i&&i.length>=t&&b(r,i,!0)>=t-1)break;t--}a++}return null}(e)}function pe(e){var t,i=e._a;return i&&-2===h(e).overflow&&(t=i[It]<0||i[It]>11?It:i[Nt]<1||i[Nt]>U(i[Ot],i[It])?Nt:i[Lt]<0||i[Lt]>24||24===i[Lt]&&(0!==i[Rt]||0!==i[jt]||0!==i[$t])?Lt:i[Rt]<0||i[Rt]>59?Rt:i[jt]<0||i[jt]>59?jt:i[$t]<0||i[$t]>999?$t:-1,h(e)._overflowDayOfYear&&(t<Ot||t>Nt)&&(t=Nt),h(e)._overflowWeeks&&-1===t&&(t=Bt),h(e)._overflowWeekday&&-1===t&&(t=Vt),h(e).overflow=t),e}function fe(e){var t,i,n,r,a,o,s=e._i,l=ai.exec(s)||oi.exec(s);if(l){for(h(e).iso=!0,t=0,i=li.length;t<i;t++)if(li[t][1].exec(l[1])){r=li[t][0],n=!1!==li[t][2];break}if(null==r)return void(e._isValid=!1);if(l[3]){for(t=0,i=ci.length;t<i;t++)if(ci[t][1].exec(l[3])){a=(l[2]||" ")+ci[t][0];break}if(null==a)return void(e._isValid=!1)}if(!n&&null!=a)return void(e._isValid=!1);if(l[4]){if(!si.exec(l[4]))return void(e._isValid=!1);o="Z"}e._f=r+(a||"")+(o||""),be(e)}else e._isValid=!1}function ge(e){var t,i,n,r,a,o,s,l={" GMT":" +0000"," EDT":" -0400"," EST":" -0500"," CDT":" -0500"," CST":" -0600"," MDT":" -0600"," MST":" -0700"," PDT":" -0700"," PST":" -0800"};if(t=e._i.replace(/\([^\)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s|\s$/g,""),i=hi.exec(t)){if(n=i[1]?"ddd"+(5===i[1].length?", ":" "):"",r="D MMM "+(i[2].length>10?"YYYY ":"YY "),a="HH:mm"+(i[4]?":ss":""),i[1]){var c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][new Date(i[2]).getDay()];if(i[1].substr(0,3)!==c)return h(e).weekdayMismatch=!0,void(e._isValid=!1)}switch(i[5].length){case 2:o=0===s?" +0000":((s="YXWVUTSRQPONZABCDEFGHIKLM".indexOf(i[5][1].toUpperCase())-12)<0?" -":" +")+(""+s).replace(/^-?/,"0").match(/..$/)[0]+"00";break;case 4:o=l[i[5]];break;default:o=l[" GMT"]}i[5]=o,e._i=i.splice(1).join(""),e._f=n+r+a+" ZZ",be(e),h(e).rfc2822=!0}else e._isValid=!1}function me(e,t,i){return null!=e?e:null!=t?t:i}function ve(e){var i=new Date(t.now());return e._useUTC?[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]:[i.getFullYear(),i.getMonth(),i.getDate()]}function _e(e){var t,i,n,r,a=[];if(!e._d){for(n=ve(e),e._w&&null==e._a[Nt]&&null==e._a[It]&&function(e){var t,i,n,r,a,o,s,l;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)a=1,o=4,i=me(t.GG,e._a[Ot],te(Ce(),1,4).year),n=me(t.W,1),((r=me(t.E,1))<1||r>7)&&(l=!0);else{a=e._locale._week.dow,o=e._locale._week.doy;var c=te(Ce(),a,o);i=me(t.gg,e._a[Ot],c.year),n=me(t.w,c.week),null!=t.d?((r=t.d)<0||r>6)&&(l=!0):null!=t.e?(r=t.e+a,(t.e<0||t.e>6)&&(l=!0)):r=a}n<1||n>ie(i,a,o)?h(e)._overflowWeeks=!0:null!=l?h(e)._overflowWeekday=!0:(s=ee(i,n,r,a,o),e._a[Ot]=s.year,e._dayOfYear=s.dayOfYear)}(e),null!=e._dayOfYear&&(r=me(e._a[Ot],n[Ot]),(e._dayOfYear>Q(r)||0===e._dayOfYear)&&(h(e)._overflowDayOfYear=!0),i=X(r,0,e._dayOfYear),e._a[It]=i.getUTCMonth(),e._a[Nt]=i.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=n[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Lt]&&0===e._a[Rt]&&0===e._a[jt]&&0===e._a[$t]&&(e._nextDay=!0,e._a[Lt]=0),e._d=(e._useUTC?X:Z).apply(null,a),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Lt]=24)}}function be(e){if(e._f!==t.ISO_8601)if(e._f!==t.RFC_2822){e._a=[],h(e).empty=!0;var i,n,r,a,o,s=""+e._i,l=s.length,c=0;for(r=j(e._f,e._locale).match(dt)||[],i=0;i<r.length;i++)a=r[i],(n=(s.match(B(a,e))||[])[0])&&((o=s.substr(0,s.indexOf(n))).length>0&&h(e).unusedInput.push(o),s=s.slice(s.indexOf(n)+n.length),c+=n.length),pt[a]?(n?h(e).empty=!1:h(e).unusedTokens.push(a),z(a,n,e)):e._strict&&!n&&h(e).unusedTokens.push(a);h(e).charsLeftOver=l-c,s.length>0&&h(e).unusedInput.push(s),e._a[Lt]<=12&&!0===h(e).bigHour&&e._a[Lt]>0&&(h(e).bigHour=void 0),h(e).parsedDateParts=e._a.slice(0),h(e).meridiem=e._meridiem,e._a[Lt]=function(e,t,i){var n;return null==i?t:null!=e.meridiemHour?e.meridiemHour(t,i):null!=e.isPM?((n=e.isPM(i))&&t<12&&(t+=12),n||12!==t||(t=0),t):t}(e._locale,e._a[Lt],e._meridiem),_e(e),pe(e)}else ge(e);else fe(e)}function we(e){var t=e._i,n=e._f;return e._locale=e._locale||ue(e._l),null===t||void 0===n&&""===t?p({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),m(t)?new g(pe(t)):(o(t)?e._d=t:i(n)?function(e){var t,i,n,r,a;if(0===e._f.length)return h(e).invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r<e._f.length;r++)a=0,t=f({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[r],be(t),u(t)&&(a+=h(t).charsLeftOver,a+=10*h(t).unusedTokens.length,h(t).score=a,(null==n||a<n)&&(n=a,i=t));c(e,i||t)}(e):n?be(e):ye(e),u(e)||(e._d=null),e))}function ye(e){var l=e._i;r(l)?e._d=new Date(t.now()):o(l)?e._d=new Date(l.valueOf()):"string"==typeof l?function(e){var i=di.exec(e._i);null!==i?e._d=new Date(+i[1]):(fe(e),!1===e._isValid&&(delete e._isValid,ge(e),!1===e._isValid&&(delete e._isValid,t.createFromInputFallback(e))))}(e):i(l)?(e._a=s(l.slice(0),(function(e){return parseInt(e,10)})),_e(e)):n(l)?function(e){if(!e._d){var t=P(e._i);e._a=s([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),_e(e)}}(e):a(l)?e._d=new Date(l):t.createFromInputFallback(e)}function xe(e,t,r,a,o){var s={};return!0!==r&&!1!==r||(a=r,r=void 0),(n(e)&&function(e){var t;for(t in e)return!1;return!0}(e)||i(e)&&0===e.length)&&(e=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=o,s._l=r,s._i=e,s._f=t,s._strict=a,function(e){var t=new g(pe(we(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}(s)}function Ce(e,t,i,n){return xe(e,t,i,n,!1)}function Se(e,t){var n,r;if(1===t.length&&i(t[0])&&(t=t[0]),!t.length)return Ce();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}function Te(e){var t=P(e),i=t.year||0,n=t.quarter||0,r=t.month||0,a=t.week||0,o=t.day||0,s=t.hour||0,l=t.minute||0,c=t.second||0,d=t.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===fi.indexOf(t)||null!=e[t]&&isNaN(e[t]))return!1;for(var i=!1,n=0;n<fi.length;++n)if(e[fi[n]]){if(i)return!1;parseFloat(e[fi[n]])!==_(e[fi[n]])&&(i=!0)}return!0}(t),this._milliseconds=+d+1e3*c+6e4*l+1e3*s*60*60,this._days=+o+7*a,this._months=+r+3*n+12*i,this._data={},this._locale=ue(),this._bubble()}function ke(e){return e instanceof Te}function Ae(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Pe(e,t){N(e,0,0,(function(){var e=this.utcOffset(),i="+";return e<0&&(e=-e,i="-"),i+I(~~(e/60),2)+t+I(~~e%60,2)}))}function De(e,t){var i=(t||"").match(e);if(null===i)return null;var n=((i[i.length-1]||[])+"").match(gi)||["-",0,0],r=60*n[1]+_(n[2]);return 0===r?0:"+"===n[0]?r:-r}function Ee(e,i){var n,r;return i._isUTC?(n=i.clone(),r=(m(e)||o(e)?e.valueOf():Ce(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),t.updateOffset(n,!1),n):Ce(e).local()}function Me(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Oe(){return!!this.isValid()&&this._isUTC&&0===this._offset}function Ie(e,t){var i,n,r,o=e,s=null;return ke(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:a(e)?(o={},t?o[t]=e:o.milliseconds=e):(s=mi.exec(e))?(i="-"===s[1]?-1:1,o={y:0,d:_(s[Nt])*i,h:_(s[Lt])*i,m:_(s[Rt])*i,s:_(s[jt])*i,ms:_(Ae(1e3*s[$t]))*i}):(s=vi.exec(e))?(i="-"===s[1]?-1:1,o={y:Ne(s[2],i),M:Ne(s[3],i),w:Ne(s[4],i),d:Ne(s[5],i),h:Ne(s[6],i),m:Ne(s[7],i),s:Ne(s[8],i)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(r=function(e,t){var i;return e.isValid()&&t.isValid()?(t=Ee(t,e),e.isBefore(t)?i=Le(e,t):((i=Le(t,e)).milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}(Ce(o.from),Ce(o.to)),(o={}).ms=r.milliseconds,o.M=r.months),n=new Te(o),ke(e)&&l(e,"_locale")&&(n._locale=e._locale),n}function Ne(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function Le(e,t){var i={milliseconds:0,months:0};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function Re(e,t){return function(i,n){var r;return null===n||isNaN(+n)||(x(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=i,i=n,n=r),je(this,Ie(i="string"==typeof i?+i:i,n),e),this}}function je(e,i,n,r){var a=i._milliseconds,o=Ae(i._days),s=Ae(i._months);e.isValid()&&(r=null==r||r,a&&e._d.setTime(e._d.valueOf()+a*n),o&&O(e,"Date",M(e,"Date")+o*n),s&&G(e,M(e,"Month")+s*n),r&&t.updateOffset(e,o||s))}function $e(e){var t;return void 0===e?this._locale._abbr:(null!=(t=ue(e))&&(this._locale=t),this)}function Be(){return this._locale}function Ve(e,t){N(0,[e,e.length],0,t)}function He(e,t,i,n,r){var a;return null==e?te(this,n,r).year:(t>(a=ie(e,n,r))&&(t=a),Fe.call(this,e,t,i,n,r))}function Fe(e,t,i,n,r){var a=ee(e,t,i,n,r),o=X(a.year,0,a.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function ze(e,t){t[$t]=_(1e3*("0."+e))}function Ue(e){return e}function We(e,t,i,n){var r=ue(),a=d().set(n,t);return r[i](a,e)}function Ge(e,t,i){if(a(e)&&(t=e,e=void 0),e=e||"",null!=t)return We(e,t,i,"month");var n,r=[];for(n=0;n<12;n++)r[n]=We(e,n,i,"month");return r}function qe(e,t,i,n){"boolean"==typeof e?(a(t)&&(i=t,t=void 0),t=t||""):(i=t=e,e=!1,a(t)&&(i=t,t=void 0),t=t||"");var r=ue(),o=e?r._week.dow:0;if(null!=i)return We(t,(i+o)%7,n,"day");var s,l=[];for(s=0;s<7;s++)l[s]=We(t,(s+o)%7,n,"day");return l}function Ye(e,t,i,n){var r=Ie(t,i);return e._milliseconds+=n*r._milliseconds,e._days+=n*r._days,e._months+=n*r._months,e._bubble()}function Qe(e){return e<0?Math.floor(e):Math.ceil(e)}function Je(e){return 4800*e/146097}function Ze(e){return 146097*e/4800}function Xe(e){return function(){return this.as(e)}}function Ke(e){return function(){return this.isValid()?this._data[e]:NaN}}function et(e,t,i,n,r){return r.relativeTime(t||1,!!i,e,n)}function tt(){if(!this.isValid())return this.localeData().invalidDate();var e,t,i=Gi(this._milliseconds)/1e3,n=Gi(this._days),r=Gi(this._months);e=v(i/60),t=v(e/60),i%=60,e%=60;var a=v(r/12),o=r%=12,s=n,l=t,c=e,d=i,h=this.asSeconds();return h?(h<0?"-":"")+"P"+(a?a+"Y":"")+(o?o+"M":"")+(s?s+"D":"")+(l||c||d?"T":"")+(l?l+"H":"")+(c?c+"M":"")+(d?d+"S":""):"P0D"}var it,nt=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),i=t.length>>>0,n=0;n<i;n++)if(n in t&&e.call(this,t[n],n,t))return!0;return!1},rt=t.momentProperties=[],at=!1,ot={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;var st=Object.keys?Object.keys:function(e){var t,i=[];for(t in e)l(e,t)&&i.push(t);return i},lt={},ct={},dt=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ht=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ut={},pt={},ft=/\d/,gt=/\d\d/,mt=/\d{3}/,vt=/\d{4}/,_t=/[+-]?\d{6}/,bt=/\d\d?/,wt=/\d\d\d\d?/,yt=/\d\d\d\d\d\d?/,xt=/\d{1,3}/,Ct=/\d{1,4}/,St=/[+-]?\d{1,6}/,Tt=/\d+/,kt=/[+-]?\d+/,At=/Z|[+-]\d\d:?\d\d/gi,Pt=/Z|[+-]\d\d(?::?\d\d)?/gi,Dt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Et={},Mt={},Ot=0,It=1,Nt=2,Lt=3,Rt=4,jt=5,$t=6,Bt=7,Vt=8,Ht=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};N("M",["MM",2],"Mo",(function(){return this.month()+1})),N("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),N("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),k("month","M"),D("month",8),$("M",bt),$("MM",bt,gt),$("MMM",(function(e,t){return t.monthsShortRegex(e)})),$("MMMM",(function(e,t){return t.monthsRegex(e)})),H(["M","MM"],(function(e,t){t[It]=_(e)-1})),H(["MMM","MMMM"],(function(e,t,i,n){var r=i._locale.monthsParse(e,n,i._strict);null!=r?t[It]=r:h(i).invalidMonth=e}));var Ft=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,zt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ut="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Wt=Dt,Gt=Dt;N("Y",0,0,(function(){var e=this.year();return e<=9999?""+e:"+"+e})),N(0,["YY",2],0,(function(){return this.year()%100})),N(0,["YYYY",4],0,"year"),N(0,["YYYYY",5],0,"year"),N(0,["YYYYYY",6,!0],0,"year"),k("year","y"),D("year",1),$("Y",kt),$("YY",bt,gt),$("YYYY",Ct,vt),$("YYYYY",St,_t),$("YYYYYY",St,_t),H(["YYYYY","YYYYYY"],Ot),H("YYYY",(function(e,i){i[Ot]=2===e.length?t.parseTwoDigitYear(e):_(e)})),H("YY",(function(e,i){i[Ot]=t.parseTwoDigitYear(e)})),H("Y",(function(e,t){t[Ot]=parseInt(e,10)})),t.parseTwoDigitYear=function(e){return _(e)+(_(e)>68?1900:2e3)};var qt=E("FullYear",!0);N("w",["ww",2],"wo","week"),N("W",["WW",2],"Wo","isoWeek"),k("week","w"),k("isoWeek","W"),D("week",5),D("isoWeek",5),$("w",bt),$("ww",bt,gt),$("W",bt),$("WW",bt,gt),F(["w","ww","W","WW"],(function(e,t,i,n){t[n.substr(0,1)]=_(e)})),N("d",0,"do","day"),N("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),N("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),N("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),N("e",0,0,"weekday"),N("E",0,0,"isoWeekday"),k("day","d"),k("weekday","e"),k("isoWeekday","E"),D("day",11),D("weekday",11),D("isoWeekday",11),$("d",bt),$("e",bt),$("E",bt),$("dd",(function(e,t){return t.weekdaysMinRegex(e)})),$("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),$("dddd",(function(e,t){return t.weekdaysRegex(e)})),F(["dd","ddd","dddd"],(function(e,t,i,n){var r=i._locale.weekdaysParse(e,n,i._strict);null!=r?t.d=r:h(i).invalidWeekday=e})),F(["d","e","E"],(function(e,t,i,n){t[n]=_(e)}));var Yt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Qt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Jt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Zt=Dt,Xt=Dt,Kt=Dt;N("H",["HH",2],0,"hour"),N("h",["hh",2],0,ae),N("k",["kk",2],0,(function(){return this.hours()||24})),N("hmm",0,0,(function(){return""+ae.apply(this)+I(this.minutes(),2)})),N("hmmss",0,0,(function(){return""+ae.apply(this)+I(this.minutes(),2)+I(this.seconds(),2)})),N("Hmm",0,0,(function(){return""+this.hours()+I(this.minutes(),2)})),N("Hmmss",0,0,(function(){return""+this.hours()+I(this.minutes(),2)+I(this.seconds(),2)})),oe("a",!0),oe("A",!1),k("hour","h"),D("hour",13),$("a",se),$("A",se),$("H",bt),$("h",bt),$("k",bt),$("HH",bt,gt),$("hh",bt,gt),$("kk",bt,gt),$("hmm",wt),$("hmmss",yt),$("Hmm",wt),$("Hmmss",yt),H(["H","HH"],Lt),H(["k","kk"],(function(e,t,i){var n=_(e);t[Lt]=24===n?0:n})),H(["a","A"],(function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e})),H(["h","hh"],(function(e,t,i){t[Lt]=_(e),h(i).bigHour=!0})),H("hmm",(function(e,t,i){var n=e.length-2;t[Lt]=_(e.substr(0,n)),t[Rt]=_(e.substr(n)),h(i).bigHour=!0})),H("hmmss",(function(e,t,i){var n=e.length-4,r=e.length-2;t[Lt]=_(e.substr(0,n)),t[Rt]=_(e.substr(n,2)),t[jt]=_(e.substr(r)),h(i).bigHour=!0})),H("Hmm",(function(e,t,i){var n=e.length-2;t[Lt]=_(e.substr(0,n)),t[Rt]=_(e.substr(n))})),H("Hmmss",(function(e,t,i){var n=e.length-4,r=e.length-2;t[Lt]=_(e.substr(0,n)),t[Rt]=_(e.substr(n,2)),t[jt]=_(e.substr(r))}));var ei,ti=E("Hours",!0),ii={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:zt,monthsShort:Ut,week:{dow:0,doy:6},weekdays:Yt,weekdaysMin:Jt,weekdaysShort:Qt,meridiemParse:/[ap]\.?m?\.?/i},ni={},ri={},ai=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,oi=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,si=/Z|[+-]\d\d(?::?\d\d)?/,li=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],ci=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],di=/^\/?Date\((\-?\d+)/i,hi=/^((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d?\d\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(?:\d\d)?\d\d\s)(\d\d:\d\d)(\:\d\d)?(\s(?:UT|GMT|[ECMP][SD]T|[A-IK-Za-ik-z]|[+-]\d{4}))$/;t.createFromInputFallback=y("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),t.ISO_8601=function(){},t.RFC_2822=function(){};var ui=y("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Ce.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:p()})),pi=y("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Ce.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:p()})),fi=["year","quarter","month","week","day","hour","minute","second","millisecond"];Pe("Z",":"),Pe("ZZ",""),$("Z",Pt),$("ZZ",Pt),H(["Z","ZZ"],(function(e,t,i){i._useUTC=!0,i._tzm=De(Pt,e)}));var gi=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var mi=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,vi=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Ie.fn=Te.prototype,Ie.invalid=function(){return Ie(NaN)};var _i=Re(1,"add"),bi=Re(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var wi=y("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));N(0,["gg",2],0,(function(){return this.weekYear()%100})),N(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),Ve("gggg","weekYear"),Ve("ggggg","weekYear"),Ve("GGGG","isoWeekYear"),Ve("GGGGG","isoWeekYear"),k("weekYear","gg"),k("isoWeekYear","GG"),D("weekYear",1),D("isoWeekYear",1),$("G",kt),$("g",kt),$("GG",bt,gt),$("gg",bt,gt),$("GGGG",Ct,vt),$("gggg",Ct,vt),$("GGGGG",St,_t),$("ggggg",St,_t),F(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,i,n){t[n.substr(0,2)]=_(e)})),F(["gg","GG"],(function(e,i,n,r){i[r]=t.parseTwoDigitYear(e)})),N("Q",0,"Qo","quarter"),k("quarter","Q"),D("quarter",7),$("Q",ft),H("Q",(function(e,t){t[It]=3*(_(e)-1)})),N("D",["DD",2],"Do","date"),k("date","D"),D("date",9),$("D",bt),$("DD",bt,gt),$("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),H(["D","DD"],Nt),H("Do",(function(e,t){t[Nt]=_(e.match(bt)[0])}));var yi=E("Date",!0);N("DDD",["DDDD",3],"DDDo","dayOfYear"),k("dayOfYear","DDD"),D("dayOfYear",4),$("DDD",xt),$("DDDD",mt),H(["DDD","DDDD"],(function(e,t,i){i._dayOfYear=_(e)})),N("m",["mm",2],0,"minute"),k("minute","m"),D("minute",14),$("m",bt),$("mm",bt,gt),H(["m","mm"],Rt);var xi=E("Minutes",!1);N("s",["ss",2],0,"second"),k("second","s"),D("second",15),$("s",bt),$("ss",bt,gt),H(["s","ss"],jt);var Ci,Si=E("Seconds",!1);for(N("S",0,0,(function(){return~~(this.millisecond()/100)})),N(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),N(0,["SSS",3],0,"millisecond"),N(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),N(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),N(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),N(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),N(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),N(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),k("millisecond","ms"),D("millisecond",16),$("S",xt,ft),$("SS",xt,gt),$("SSS",xt,mt),Ci="SSSS";Ci.length<=9;Ci+="S")$(Ci,Tt);for(Ci="S";Ci.length<=9;Ci+="S")H(Ci,ze);var Ti=E("Milliseconds",!1);N("z",0,0,"zoneAbbr"),N("zz",0,0,"zoneName");var ki=g.prototype;ki.add=_i,ki.calendar=function(e,i){var n=e||Ce(),r=Ee(n,this).startOf("day"),a=t.calendarFormat(this,r)||"sameElse",o=i&&(C(i[a])?i[a].call(this,n):i[a]);return this.format(o||this.localeData().calendar(a,this,Ce(n)))},ki.clone=function(){return new g(this)},ki.diff=function(e,t,i){var n,r,a,o;return this.isValid()&&(n=Ee(e,this)).isValid()?(r=6e4*(n.utcOffset()-this.utcOffset()),"year"===(t=A(t))||"month"===t||"quarter"===t?(o=function(e,t){var i,n,r=12*(t.year()-e.year())+(t.month()-e.month()),a=e.clone().add(r,"months");return t-a<0?(i=e.clone().add(r-1,"months"),n=(t-a)/(a-i)):(i=e.clone().add(r+1,"months"),n=(t-a)/(i-a)),-(r+n)||0}(this,n),"quarter"===t?o/=3:"year"===t&&(o/=12)):(a=this-n,o="second"===t?a/1e3:"minute"===t?a/6e4:"hour"===t?a/36e5:"day"===t?(a-r)/864e5:"week"===t?(a-r)/6048e5:a),i?o:v(o)):NaN},ki.endOf=function(e){return void 0===(e=A(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))},ki.format=function(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var i=R(this,e);return this.localeData().postformat(i)},ki.from=function(e,t){return this.isValid()&&(m(e)&&e.isValid()||Ce(e).isValid())?Ie({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},ki.fromNow=function(e){return this.from(Ce(),e)},ki.to=function(e,t){return this.isValid()&&(m(e)&&e.isValid()||Ce(e).isValid())?Ie({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},ki.toNow=function(e){return this.to(Ce(),e)},ki.get=function(e){return C(this[e=A(e)])?this[e]():this},ki.invalidAt=function(){return h(this).overflow},ki.isAfter=function(e,t){var i=m(e)?e:Ce(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=A(r(t)?"millisecond":t))?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(t).valueOf())},ki.isBefore=function(e,t){var i=m(e)?e:Ce(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=A(r(t)?"millisecond":t))?this.valueOf()<i.valueOf():this.clone().endOf(t).valueOf()<i.valueOf())},ki.isBetween=function(e,t,i,n){return("("===(n=n||"()")[0]?this.isAfter(e,i):!this.isBefore(e,i))&&(")"===n[1]?this.isBefore(t,i):!this.isAfter(t,i))},ki.isSame=function(e,t){var i,n=m(e)?e:Ce(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=A(t||"millisecond"))?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(t).valueOf()<=i&&i<=this.clone().endOf(t).valueOf()))},ki.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},ki.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},ki.isValid=function(){return u(this)},ki.lang=wi,ki.locale=$e,ki.localeData=Be,ki.max=pi,ki.min=ui,ki.parsingFlags=function(){return c({},h(this))},ki.set=function(e,t){if("object"==typeof e)for(var i=function(e){var t=[];for(var i in e)t.push({unit:i,priority:ct[i]});return t.sort((function(e,t){return e.priority-t.priority})),t}(e=P(e)),n=0;n<i.length;n++)this[i[n].unit](e[i[n].unit]);else if(C(this[e=A(e)]))return this[e](t);return this},ki.startOf=function(e){switch(e=A(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},ki.subtract=bi,ki.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},ki.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},ki.toDate=function(){return new Date(this.valueOf())},ki.toISOString=function(){if(!this.isValid())return null;var e=this.clone().utc();return e.year()<0||e.year()>9999?R(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):C(Date.prototype.toISOString)?this.toDate().toISOString():R(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},ki.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var i="["+e+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r=t+'[")]';return this.format(i+n+"-MM-DD[T]HH:mm:ss.SSS"+r)},ki.toJSON=function(){return this.isValid()?this.toISOString():null},ki.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},ki.unix=function(){return Math.floor(this.valueOf()/1e3)},ki.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},ki.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},ki.year=qt,ki.isLeapYear=function(){return J(this.year())},ki.weekYear=function(e){return He.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},ki.isoWeekYear=function(e){return He.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},ki.quarter=ki.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},ki.month=q,ki.daysInMonth=function(){return U(this.year(),this.month())},ki.week=ki.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},ki.isoWeek=ki.isoWeeks=function(e){var t=te(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},ki.weeksInYear=function(){var e=this.localeData()._week;return ie(this.year(),e.dow,e.doy)},ki.isoWeeksInYear=function(){return ie(this.year(),1,4)},ki.date=yi,ki.day=ki.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},ki.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},ki.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},ki.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},ki.hour=ki.hours=ti,ki.minute=ki.minutes=xi,ki.second=ki.seconds=Si,ki.millisecond=ki.milliseconds=Ti,ki.utcOffset=function(e,i,n){var r,a=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=De(Pt,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&i&&(r=Me(this)),this._offset=e,this._isUTC=!0,null!=r&&this.add(r,"m"),a!==e&&(!i||this._changeInProgress?je(this,Ie(e-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?a:Me(this)},ki.utc=function(e){return this.utcOffset(0,e)},ki.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Me(this),"m")),this},ki.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=De(At,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},ki.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Ce(e).utcOffset():0,(this.utcOffset()-e)%60===0)},ki.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},ki.isLocal=function(){return!!this.isValid()&&!this._isUTC},ki.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},ki.isUtc=Oe,ki.isUTC=Oe,ki.zoneAbbr=function(){return this._isUTC?"UTC":""},ki.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},ki.dates=y("dates accessor is deprecated. Use date instead.",yi),ki.months=y("months accessor is deprecated. Use month instead",q),ki.years=y("years accessor is deprecated. Use year instead",qt),ki.zone=y("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()})),ki.isDSTShifted=y("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!r(this._isDSTShifted))return this._isDSTShifted;var e={};if(f(e,this),(e=we(e))._a){var t=e._isUTC?d(e._a):Ce(e._a);this._isDSTShifted=this.isValid()&&b(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}));var Ai=T.prototype;Ai.calendar=function(e,t,i){var n=this._calendar[e]||this._calendar.sameElse;return C(n)?n.call(t,i):n},Ai.longDateFormat=function(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return t||!i?t:(this._longDateFormat[e]=i.replace(/MMMM|MM|DD|dddd/g,(function(e){return e.slice(1)})),this._longDateFormat[e])},Ai.invalidDate=function(){return this._invalidDate},Ai.ordinal=function(e){return this._ordinal.replace("%d",e)},Ai.preparse=Ue,Ai.postformat=Ue,Ai.relativeTime=function(e,t,i,n){var r=this._relativeTime[i];return C(r)?r(e,t,i,n):r.replace(/%d/i,e)},Ai.pastFuture=function(e,t){var i=this._relativeTime[e>0?"future":"past"];return C(i)?i(t):i.replace(/%s/i,t)},Ai.set=function(e){var t,i;for(i in e)C(t=e[i])?this[i]=t:this["_"+i]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},Ai.months=function(e,t){return e?i(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Ft).test(t)?"format":"standalone"][e.month()]:i(this._months)?this._months:this._months.standalone},Ai.monthsShort=function(e,t){return e?i(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Ft.test(t)?"format":"standalone"][e.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},Ai.monthsParse=function(e,t,i){var n,r,a;if(this._monthsParseExact)return W.call(this,e,t,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(r=d([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(a="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(a.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(i&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!i&&this._monthsParse[n].test(e))return n}},Ai.monthsRegex=function(e){return this._monthsParseExact?(l(this,"_monthsRegex")||Y.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=Gt),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},Ai.monthsShortRegex=function(e){return this._monthsParseExact?(l(this,"_monthsRegex")||Y.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=Wt),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},Ai.week=function(e){return te(e,this._week.dow,this._week.doy).week},Ai.firstDayOfYear=function(){return this._week.doy},Ai.firstDayOfWeek=function(){return this._week.dow},Ai.weekdays=function(e,t){return e?i(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:i(this._weekdays)?this._weekdays:this._weekdays.standalone},Ai.weekdaysMin=function(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin},Ai.weekdaysShort=function(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort},Ai.weekdaysParse=function(e,t,i){var n,r,a;if(this._weekdaysParseExact)return ne.call(this,e,t,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(r=d([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(r,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(r,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(r,"").replace(".",".?")+"$","i")),this._weekdaysParse[n]||(a="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[n]=new RegExp(a.replace(".",""),"i")),i&&"dddd"===t&&this._fullWeekdaysParse[n].test(e))return n;if(i&&"ddd"===t&&this._shortWeekdaysParse[n].test(e))return n;if(i&&"dd"===t&&this._minWeekdaysParse[n].test(e))return n;if(!i&&this._weekdaysParse[n].test(e))return n}},Ai.weekdaysRegex=function(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||re.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=Zt),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},Ai.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||re.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Xt),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},Ai.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||re.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Kt),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},Ai.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},Ai.meridiem=function(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"},de("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===_(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),t.lang=y("moment.lang is deprecated. Use moment.locale instead.",de),t.langData=y("moment.langData is deprecated. Use moment.localeData instead.",ue);var Pi=Math.abs,Di=Xe("ms"),Ei=Xe("s"),Mi=Xe("m"),Oi=Xe("h"),Ii=Xe("d"),Ni=Xe("w"),Li=Xe("M"),Ri=Xe("y"),ji=Ke("milliseconds"),$i=Ke("seconds"),Bi=Ke("minutes"),Vi=Ke("hours"),Hi=Ke("days"),Fi=Ke("months"),zi=Ke("years"),Ui=Math.round,Wi={ss:44,s:45,m:45,h:22,d:26,M:11},Gi=Math.abs,qi=Te.prototype;return qi.isValid=function(){return this._isValid},qi.abs=function(){var e=this._data;return this._milliseconds=Pi(this._milliseconds),this._days=Pi(this._days),this._months=Pi(this._months),e.milliseconds=Pi(e.milliseconds),e.seconds=Pi(e.seconds),e.minutes=Pi(e.minutes),e.hours=Pi(e.hours),e.months=Pi(e.months),e.years=Pi(e.years),this},qi.add=function(e,t){return Ye(this,e,t,1)},qi.subtract=function(e,t){return Ye(this,e,t,-1)},qi.as=function(e){if(!this.isValid())return NaN;var t,i,n=this._milliseconds;if("month"===(e=A(e))||"year"===e)return t=this._days+n/864e5,i=this._months+Je(t),"month"===e?i:i/12;switch(t=this._days+Math.round(Ze(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}},qi.asMilliseconds=Di,qi.asSeconds=Ei,qi.asMinutes=Mi,qi.asHours=Oi,qi.asDays=Ii,qi.asWeeks=Ni,qi.asMonths=Li,qi.asYears=Ri,qi.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*_(this._months/12):NaN},qi._bubble=function(){var e,t,i,n,r,a=this._milliseconds,o=this._days,s=this._months,l=this._data;return a>=0&&o>=0&&s>=0||a<=0&&o<=0&&s<=0||(a+=864e5*Qe(Ze(s)+o),o=0,s=0),l.milliseconds=a%1e3,e=v(a/1e3),l.seconds=e%60,t=v(e/60),l.minutes=t%60,i=v(t/60),l.hours=i%24,o+=v(i/24),s+=r=v(Je(o)),o-=Qe(Ze(r)),n=v(s/12),s%=12,l.days=o,l.months=s,l.years=n,this},qi.get=function(e){return e=A(e),this.isValid()?this[e+"s"]():NaN},qi.milliseconds=ji,qi.seconds=$i,qi.minutes=Bi,qi.hours=Vi,qi.days=Hi,qi.weeks=function(){return v(this.days()/7)},qi.months=Fi,qi.years=zi,qi.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),i=function(e,t,i){var n=Ie(e).abs(),r=Ui(n.as("s")),a=Ui(n.as("m")),o=Ui(n.as("h")),s=Ui(n.as("d")),l=Ui(n.as("M")),c=Ui(n.as("y")),d=r<=Wi.ss&&["s",r]||r<Wi.s&&["ss",r]||a<=1&&["m"]||a<Wi.m&&["mm",a]||o<=1&&["h"]||o<Wi.h&&["hh",o]||s<=1&&["d"]||s<Wi.d&&["dd",s]||l<=1&&["M"]||l<Wi.M&&["MM",l]||c<=1&&["y"]||["yy",c];return d[2]=t,d[3]=+e>0,d[4]=i,et.apply(null,d)}(this,!e,t);return e&&(i=t.pastFuture(+this,i)),t.postformat(i)},qi.toISOString=tt,qi.toString=tt,qi.toJSON=tt,qi.locale=$e,qi.localeData=Be,qi.toIsoString=y("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",tt),qi.lang=wi,N("X",0,0,"unix"),N("x",0,0,"valueOf"),$("x",kt),$("X",/[+-]?\d+(\.\d{1,3})?/),H("X",(function(e,t,i){i._d=new Date(1e3*parseFloat(e,10))})),H("x",(function(e,t,i){i._d=new Date(_(e))})),t.version="2.18.1",function(e){it=e}(Ce),t.fn=ki,t.min=function(){var e=[].slice.call(arguments,0);return Se("isBefore",e)},t.max=function(){var e=[].slice.call(arguments,0);return Se("isAfter",e)},t.now=function(){return Date.now?Date.now():+new Date},t.utc=d,t.unix=function(e){return Ce(1e3*e)},t.months=function(e,t){return Ge(e,t,"months")},t.isDate=o,t.locale=de,t.invalid=p,t.duration=Ie,t.isMoment=m,t.weekdays=function(e,t,i){return qe(e,t,i,"weekdays")},t.parseZone=function(){return Ce.apply(null,arguments).parseZone()},t.localeData=ue,t.isDuration=ke,t.monthsShort=function(e,t){return Ge(e,t,"monthsShort")},t.weekdaysMin=function(e,t,i){return qe(e,t,i,"weekdaysMin")},t.defineLocale=he,t.updateLocale=function(e,t){if(null!=t){var i,n=ii;null!=ni[e]&&(n=ni[e]._config),(i=new T(t=S(n,t))).parentLocale=ni[e],ni[e]=i,de(e)}else null!=ni[e]&&(null!=ni[e].parentLocale?ni[e]=ni[e].parentLocale:null!=ni[e]&&delete ni[e]);return ni[e]},t.locales=function(){return st(ni)},t.weekdaysShort=function(e,t,i){return qe(e,t,i,"weekdaysShort")},t.normalizeUnits=A,t.relativeTimeRounding=function(e){return void 0===e?Ui:"function"==typeof e&&(Ui=e,!0)},t.relativeTimeThreshold=function(e,t){return void 0!==Wi[e]&&(void 0===t?Wi[e]:(Wi[e]=t,"s"===e&&(Wi.ss=t-1),!0))},t.calendarFormat=function(e,t){var i=e.diff(t,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"},t.prototype=ki,t}()}).call(this,i(48)(e))},,function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.canvas.edges");sigma.canvas.edges.autoCurve=function(e){var t,i=e.settings("autoCurveRatio"),n=e.settings("autoCurveSortByDirection"),r=e.settings("defaultEdgeType"),a=e.graph.edges(),o={key:function(e){var t=e.source+","+e.target;return this[t]||!n&&(t=e.target+","+e.source,this[t])||(n&&this[e.target+","+e.source]?this[t]={i:1,n:1}:this[t]={i:0,n:0}),t},inc:function(e){this[this.key(e)].n++}};a.forEach((function(e){o.inc(e)})),a.forEach((function(e){t=o.key(e),o[t].n>1||o[t].i>0?(e.cc||("arrow"===e.type||"tapered"===e.type||"arrow"===r||"tapered"===r?(e.cc_prev_type||(e.cc_prev_type=e.type),e.type="curvedArrow"):(e.cc_prev_type||(e.cc_prev_type=e.type),e.type="curve")),e.cc=function(e,t,i,n){var r;return n?{y:(r=e*t/i)||Number.POSITIVE_INFINITY}:{y:(r=e-e/(t/2)*i)?1/r:t}}(i,o[t].n,o[t].i++,n)):e.cc&&(e.type=e.cc_prev_type,e.cc_prev_type=void 0,e.cc=void 0)}))}}()}).call(window)},function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curve=function(e,t,i,n,r){var a,o=e.color,s=r("prefix")||"",l=e[s+"size"]||1,c=r("edgeColor"),d=r("defaultNodeColor"),h=r("defaultEdgeColor"),u=t[s+"size"],p=t[s+"x"],f=t[s+"y"],g=i[s+"x"],m=i[s+"y"];if(a=t.id===i.id?sigma.utils.getSelfLoopControlPoints(p,f,u):sigma.utils.getQuadraticControlPoint(p,f,g,m,e.cc),!o)switch(c){case"source":o=t.color||d;break;case"target":o=i.color||d;break;default:o=h}n.strokeStyle=o,n.lineWidth=l,n.beginPath(),n.moveTo(p,f),t.id===i.id?n.bezierCurveTo(a.x1,a.y1,a.x2,a.y2,g,m):n.quadraticCurveTo(a.x,a.y,g,m),n.stroke()}}()}).call(window)},function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.dashed=function(e,t,i,n,r){var a=e.active?e.active_color||r("defaultEdgeActiveColor"):e.color,o=r("prefix")||"",s=e[o+"size"]||1,l=r("edgeColor"),c=r("defaultNodeColor"),d=r("defaultEdgeColor");if(!a)switch(l){case"source":a=t.color||c;break;case"target":a=i.color||c;break;default:a=d}n.save(),e.active?n.strokeStyle="edge"===r("edgeActiveColor")?a||d:r("defaultEdgeActiveColor"):n.strokeStyle=a,n.setLineDash([8,3]),n.lineWidth=s,n.beginPath(),n.moveTo(t[o+"x"],t[o+"y"]),n.lineTo(i[o+"x"],i[o+"y"]),n.stroke(),n.restore()}}()}).call(window)},function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.dotted=function(e,t,i,n,r){var a=e.active?e.active_color||r("defaultEdgeActiveColor"):e.color,o=r("prefix")||"",s=e[o+"size"]||1,l=r("edgeColor"),c=r("defaultNodeColor"),d=r("defaultEdgeColor");if(!a)switch(l){case"source":a=t.color||c;break;case"target":a=i.color||c;break;default:a=d}n.save(),e.active?n.strokeStyle="edge"===r("edgeActiveColor")?a||d:r("defaultEdgeActiveColor"):n.strokeStyle=a,n.setLineDash([2]),n.lineWidth=s,n.beginPath(),n.moveTo(t[o+"x"],t[o+"y"]),n.lineTo(i[o+"x"],i[o+"y"]),n.stroke(),n.restore()}}()}).call(window)},function(e,t){(function(){(function(e){"use strict";if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.edges.labels"),sigma.canvas.edges.labels.curve=function(e,t,i,n,r){if("string"===typeof e.label){var a=r("prefix")||"",o=e[a+"size"]||1;if(!(o<r("edgeLabelThreshold"))){var s,l,c,d=t[a+"size"],h=t[a+"x"],u=t[a+"y"],p=i[a+"x"],f=i[a+"y"],g=p-h,m=f-u,v=h<p?1:-1,_={};t.id===i.id?(_=sigma.utils.getSelfLoopControlPoints(h,u,d),l=sigma.utils.getPointOnBezierCurve(.5,h,u,p,f,_.x1,_.y1,_.x2,_.y2),c=Math.atan2(1,1)):(_=sigma.utils.getQuadraticControlPoint(h,u,p,f),l=sigma.utils.getPointOnQuadraticCurve(.5,h,u,p,f,_.x,_.y),c=Math.atan2(m*v,g*v)),s="fixed"===r("edgeLabelSize")?r("defaultEdgeLabelSize"):r("defaultEdgeLabelSize")*o*Math.pow(o,-1/r("edgeLabelSizePowRatio")),n.save(),e.active?(n.font=[r("activeFontStyle"),s+"px",r("activeFont")||r("font")].join(" "),n.fillStyle="edge"===r("edgeActiveColor")?e.active_color||r("defaultEdgeActiveColor"):r("defaultEdgeLabelActiveColor")):(n.font=[r("fontStyle"),s+"px",r("font")].join(" "),n.fillStyle="edge"===r("edgeLabelColor")?e.color||r("defaultEdgeColor"):r("defaultEdgeLabelColor")),n.textAlign="center",n.textBaseline="alphabetic",n.translate(l.x,l.y),n.rotate(c),n.fillText(e.label,0,-o/2-3),n.restore()}}}}).call(this)}).call(window)},function(e,t){(function(){(function(e){"use strict";if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.edges.labels"),sigma.canvas.edges.labels.curvedArrow=function(e,t,i,n,r){sigma.canvas.edges.labels.curve(e,t,i,n,r)}}).call(this)}).call(window)},function(e,t){(function(){(function(e){"use strict";if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.edges.labels"),sigma.canvas.edges.labels.def=function(e,t,i,n,r){if("string"===typeof e.label&&t!=i){var a=r("prefix")||"",o=e[a+"size"]||1;if(!(o<r("edgeLabelThreshold"))){if(0===r("edgeLabelSizePowRatio"))throw'"edgeLabelSizePowRatio" must not be 0.';var s,l=(t[a+"x"]+i[a+"x"])/2,c=(t[a+"y"]+i[a+"y"])/2,d=i[a+"x"]-t[a+"x"],h=i[a+"y"]-t[a+"y"],u=t[a+"x"]<i[a+"x"]?1:-1,p=Math.atan2(h*u,d*u);s="fixed"===r("edgeLabelSize")?r("defaultEdgeLabelSize"):r("defaultEdgeLabelSize")*o*Math.pow(o,-1/r("edgeLabelSizePowRatio")),n.save(),e.active?(n.font=[r("activeFontStyle"),s+"px",r("activeFont")||r("font")].join(" "),n.fillStyle="edge"===r("edgeActiveColor")?e.active_color||r("defaultEdgeActiveColor"):r("defaultEdgeLabelActiveColor")):(n.font=[r("fontStyle"),s+"px",r("font")].join(" "),n.fillStyle="edge"===r("edgeLabelColor")?e.color||r("defaultEdgeColor"):r("defaultEdgeLabelColor")),n.textAlign="center",n.textBaseline="alphabetic",n.translate(l,c),n.rotate(p),n.fillText(e.label,0,-o/2-3),n.restore()}}}}).call(this)}).call(window)},function(e,t){(function(){!function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.tapered=function(e,t,i,n,r){var a=e.active?e.active_color||r("defaultEdgeActiveColor"):e.color,o=e[(l=r("prefix")||"")+"size"]||1,s=r("edgeColor"),l=r("prefix")||"",c=r("defaultNodeColor"),d=r("defaultEdgeColor"),h=t[l+"x"],u=t[l+"y"],p=i[l+"x"],f=i[l+"y"],g=sigma.utils.getDistance(h,u,p,f);if(!a)switch(s){case"source":a=t.color||c;break;case"target":a=i.color||c;break;default:a=d}var m=sigma.utils.getCircleIntersection(h,u,o,p,f,g);n.save(),e.active?n.fillStyle="edge"===r("edgeActiveColor")?a||d:r("defaultEdgeActiveColor"):n.fillStyle=a,n.globalAlpha=.65,n.beginPath(),n.moveTo(p,f),n.lineTo(m.xi,m.yi),n.lineTo(m.xi_prime,m.yi_prime),n.closePath(),n.fill(),n.restore()}}()}).call(window)},function(e,t){(function(){(function(e){"use strict";if("undefined"===typeof sigma)throw"sigma is not declared";var t,i,n,r;function a(e){if(-1==e.indexOf(";base64,")){var t=(n=e.split(","))[0].split(":")[1],i=decodeURIComponent(n[1]);return new Blob([i],{type:t})}t=(n=e.split(";base64,"))[0].split(":")[1];for(var n,r=(i=window.atob(n[1])).length,a=new Uint8Array(r),o=0;o<r;++o)a[o]=i.charCodeAt(o);return new Blob([a],{type:t})}function o(e,t,i){var n=Math.min(i/e,i/t);return{width:e*n,height:t*n}}function l(e,t,i){var n,r=i.margin||0,a={width:t.width,height:t.height};return i.clips||i.size?i.size&&i.size>=1&&(a=o(t.width,t.height,i.size)):a={width:(n=function(e,t,i){var n;return(n=sigma.utils.getBoundaries(e.graph,t.camera.readPrefix)).minX/=i.zoomRatio,n.minY/=i.zoomRatio,n.maxX/=i.zoomRatio,n.maxY/=i.zoomRatio,n}(e,t,i)).maxX-n.minX+2*n.sizeMax,height:n.maxY-n.minY+2*n.sizeMax},a.width+=r,a.height+=r,a}function c(e,t,n){if((n=n||{}).format&&!(n.format in i))throw Error('sigma.renderers.image: unsupported format "'+n.format+'".');var r=l(e,t,n),o=e.settings("batchEdgesDrawing");o&&e.settings("batchEdgesDrawing",!1),n.clip||this.clone(e,n,r);var s=this.draw(t,n,r);e.settings("batchEdgesDrawing",o);var c=s.toDataURL(i[n.format||"png"]);return n.download&&function(e,t,i){if(i=i||"graph."+t,navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(a(e),i);else if(navigator.msSaveBlob)navigator.msSaveBlob(a(e),i);else{var n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",i),document.body.appendChild(n),n.click(),document.body.removeChild(n)}}(c,n.format||"png",n.filename),c}sigma.utils.pkg("sigma.plugins"),t=["scene","edges","nodes","labels"],i={png:"image/png",jpg:"image/jpeg",gif:"image/gif",tiff:"image/tiff"},c.prototype.clone=function(e,i,a){i.tmpContainer=i.tmpContainer||"image-container";var o=sigma.utils.getPixelRatio(),s=e.settings("webglOversamplingRatio"),l=document.getElementById(i.tmpContainer);l||((l=document.createElement("div")).id=i.tmpContainer,document.body.appendChild(l)),l.setAttribute("style","width:"+Math.round(a.width/o)+"px;height:"+Math.round(a.height/o)+"px;");var c=e.addRenderer({container:document.getElementById(i.tmpContainer),type:"canvas",settings:{batchEdgesDrawing:!0,drawLabels:!!i.labels}});c.camera.ratio=i.zoomRatio>0?i.zoomRatio:1,i.size||(c.camera.ratio*=o);var d=c instanceof sigma.renderers.webgl,h=!1,u=[];n=document.createElement("canvas"),r=n.getContext("2d"),e.refresh(),t.forEach((function(e){if(c.contexts[e]&&(!1!==i.labels||"labels"!==e)){var t=c.domElements[e]||c.domElements.scene,o=c.contexts[e];h||(n.width=a.width,n.height=a.height,d&&o instanceof WebGLRenderingContext&&(n.width/=s,n.height/=s),h=!0),o instanceof WebGLRenderingContext?r.drawImage(t,0,0,t.width/s,t.height/s):r.drawImage(t,0,0),~u.indexOf(o)||u.push(o)}})),u=[],e.killRenderer(c),l.parentNode.removeChild(l)},c.prototype.draw=function(e,i,r){var a=e instanceof sigma.renderers.webgl,l=!1,c=[],d=document.createElement("canvas"),h=d.getContext("2d");return t.forEach((function(t){if(e.contexts[t]&&(!1!==i.labels||"labels"!==t)){var u=e.domElements[t]||e.domElements.scene,p=e.contexts[t];if(!~c.indexOf(p)){if(!l){var f,g;if(i.clip){var m=!i.size||i.size<1?window.innerWidth:i.size;f=u.width,g=u.height,r=o(f,g,m)}else f=n.width,g=n.height;if(d.width=r.width,d.height=r.height,!a&&!p instanceof WebGLRenderingContext){var v=s.settings("webglOversamplingRatio");d.width*=v,d.height*=v}l=!0,i.background&&(h.rect(0,0,d.width,d.height),h.fillStyle=i.background,h.fill())}h.drawImage(i.clip?u:n,0,0,d.width,d.height),c.push(p)}}})),c=[],d};var d=null;sigma.plugins.image=function(e,t,i){return sigma.plugins.killImage(),d||(d=new c(e,t,i)),d},sigma.plugins.killImage=function(){d instanceof c&&(d=null,n=null,r=null)}}).call(this)}).call(window)},function(e,t){(function(){(function(e){"use strict";if("undefined"===typeof sigma)throw new Error("sigma is not declared");sigma.utils.pkg("sigma.layouts.fruchtermanReingold");var t={autoArea:!0,area:1,gravity:10,speed:.1,iterations:1e3},i={},n={};function r(){var e=this;this.init=function(e,i){if(i=i||{},this.sigInst=e,this.config=sigma.utils.extend(i,t),this.easing=i.easing,this.duration=i.duration,!sigma.plugins||"undefined"===typeof sigma.plugins.animate)throw new Error("sigma.plugins.animate is not declared");this.running=!1},this.atomicGo=function(){if(!this.running||this.iterCount<1)return!1;var t,i,n,r,a,o,s,l,c,d=this.sigInst.graph.nodes(),h=this.sigInst.graph.edges(),u=d.length,p=h.length;this.config.area=this.config.autoArea?u*u:this.config.area,this.iterCount--,this.running=this.iterCount>0;var f,g,m,v,_,b,w=Math.sqrt(this.config.area)/10,y=Math.sqrt(this.config.area/(1+u));for(t=0;t<u;t++)for((n=d[t]).fr||(n.fr_x=n.x,n.fr_y=n.y,n.fr={dx:0,dy:0}),i=0;i<u;i++)r=d[i],n.id!=r.id&&(o=n.fr_x-r.fr_x,s=n.fr_y-r.fr_y,(l=Math.sqrt(o*o+s*s)+.01)>0&&(c=y*y/l,n.fr.dx+=o/l*c,n.fr.dy+=s/l*c));for(t=0;t<p;t++)a=h[t],f=e.sigInst.graph.nodes(a.source),g=e.sigInst.graph.nodes(a.target),o=f.fr_x-g.fr_x,s=f.fr_y-g.fr_y,m=(l=Math.sqrt(o*o+s*s)+.01)*l/y,l>0&&(f.fr.dx-=o/l*m,f.fr.dy-=s/l*m,g.fr.dx+=o/l*m,g.fr.dy+=s/l*m);for(t=0;t<u;t++)n=d[t],v=Math.sqrt(n.fr_x*n.fr_x+n.fr_y*n.fr_y),_=.01*y*e.config.gravity*v,n.fr.dx-=_*n.fr_x/v,n.fr.dy-=_*n.fr_y/v,n.fr.dx*=e.config.speed,n.fr.dy*=e.config.speed,n.fixed||(o=n.fr.dx,s=n.fr.dy,(l=Math.sqrt(o*o+s*s))>0&&(b=Math.min(w*e.config.speed,l),n.fr_x+=o/l*b,n.fr_y+=s/l*b));return this.running},this.go=function(){for(this.iterCount=this.config.iterations;this.running;)this.atomicGo();this.stop()},this.start=function(){if(!this.running){var t=this.sigInst.graph.nodes();this.running=!0;for(var i=0;i<t.length;i++)t[i].fr_x=t[i].x,t[i].fr_y=t[i].y,t[i].fr={dx:0,dy:0};n[e.sigInst.id].dispatchEvent("start"),this.go()}},this.stop=function(){var t=this.sigInst.graph.nodes();if(this.running=!1,this.easing)n[e.sigInst.id].dispatchEvent("interpolate"),sigma.plugins.animate(e.sigInst,{x:"fr_x",y:"fr_y"},{easing:e.easing,onComplete:function(){e.sigInst.refresh();for(var i=0;i<t.length;i++)t[i].fr=null,t[i].fr_x=null,t[i].fr_y=null;n[e.sigInst.id].dispatchEvent("stop")},duration:e.duration});else{for(var i=0;i<t.length;i++)t[i].x=t[i].fr_x,t[i].y=t[i].fr_y;this.sigInst.refresh();for(i=0;i<t.length;i++)t[i].fr=null,t[i].fr_x=null,t[i].fr_y=null;n[e.sigInst.id].dispatchEvent("stop")}},this.kill=function(){this.sigInst=null,this.config=null,this.easing=null}}sigma.layouts.fruchtermanReingold.configure=function(e,t){if(!e)throw new Error('Missing argument: "sigInst"');if(!t)throw new Error('Missing argument: "config"');return i[e.id]||(i[e.id]=new r,n[e.id]={},sigma.classes.dispatcher.extend(n[e.id]),e.bind("kill",(function(){i[e.id].kill(),i[e.id]=null,n[e.id]=null}))),i[e.id].init(e,t),n[e.id]},sigma.layouts.fruchtermanReingold.start=function(e,t){if(!e)throw new Error('Missing argument: "sigInst"');return t&&this.configure(e,t),i[e.id].start(),n[e.id]},sigma.layouts.fruchtermanReingold.isRunning=function(e){if(!e)throw new Error('Missing argument: "sigInst"');return!!i[e.id]&&i[e.id].running},sigma.layouts.fruchtermanReingold.progress=function(e){if(!e)throw new Error('Missing argument: "sigInst"');return(i[e.id].config.iterations-i[e.id].iterCount)/i[e.id].config.iterations}}).call(this)}).call(window)},function(e,t){(function(){(function(e){"use strict";if("undefined"===typeof sigma)throw new Error("sigma is not declared");sigma.utils.pkg("sigma.layout.noverlap");var t={speed:3,scaleNodes:1.2,nodeMargin:5,gridSize:20,permittedExpansion:1.1,rendererIndex:0,maxIterations:500},i={},n={};function r(){var e=this;this.init=function(e,i){if(i=i||{},this.sigInst=e,this.config=sigma.utils.extend(i,t),this.easing=i.easing,this.duration=i.duration,i.nodes&&(this.nodes=i.nodes,delete i.nodes),!sigma.plugins||"undefined"===typeof sigma.plugins.animate)throw new Error("sigma.plugins.animate is not declared");this.running=!1},this.atomicGo=function(){if(!this.running||this.iterCount<1)return!1;var t,i,n,r,a,o,s,l,c,d,h,u,p,f,g,m,v,_,b,w,y,x=this.nodes||this.sigInst.graph.nodes(),C=x.length,S=1/0,T=-1/0,k=1/0,A=-1/0;for(this.iterCount--,this.running=!1,t=0;t<C;t++)(i=x[t]).dn.dx=0,i.dn.dy=0,S=Math.min(S,i.dn_x-(i.dn_size*e.config.scaleNodes+e.config.nodeMargin)),T=Math.max(T,i.dn_x+(i.dn_size*e.config.scaleNodes+e.config.nodeMargin)),k=Math.min(k,i.dn_y-(i.dn_size*e.config.scaleNodes+e.config.nodeMargin)),A=Math.max(A,i.dn_y+(i.dn_size*e.config.scaleNodes+e.config.nodeMargin));for(r=T-S,a=A-k,s=(k+A)/2,S=(o=(S+T)/2)-e.config.permittedExpansion*r/2,T=o+e.config.permittedExpansion*r/2,k=s-e.config.permittedExpansion*a/2,A=s+e.config.permittedExpansion*a/2,l={},c=0;c<e.config.gridSize;c++)for(l[c]={},d=0;d<e.config.gridSize;d++)l[c][d]=[];for(t=0;t<C;t++)for(_=(i=x[t]).dn_x-(i.dn_size*e.config.scaleNodes+e.config.nodeMargin),b=i.dn_x+(i.dn_size*e.config.scaleNodes+e.config.nodeMargin),w=i.dn_y-(i.dn_size*e.config.scaleNodes+e.config.nodeMargin),y=i.dn_y+(i.dn_size*e.config.scaleNodes+e.config.nodeMargin),h=Math.floor(e.config.gridSize*(_-S)/(T-S)),u=Math.floor(e.config.gridSize*(b-S)/(T-S)),p=Math.floor(e.config.gridSize*(w-k)/(A-k)),f=Math.floor(e.config.gridSize*(y-k)/(A-k)),d=h;d<=u;d++)for(c=p;c<=f;c++)l[c][d].push(i.id);for(g={},c=0;c<e.config.gridSize;c++)for(d=0;d<e.config.gridSize;d++)l[c][d].forEach((function(t){for(g[t]||(g[t]=[]),m=Math.max(0,c-1);m<=Math.min(c+1,e.config.gridSize-1);m++)for(v=Math.max(0,d-1);v<=Math.min(d+1,e.config.gridSize-1);v++)l[m][v].forEach((function(e){e!==t&&-1===g[t].indexOf(e)&&g[t].push(e)}))}));for(t=0;t<C;t++)n=x[t],g[n.id].forEach((function(t){var i=e.sigInst.graph.nodes(t),o=i.dn_x-n.dn_x,s=i.dn_y-n.dn_y,l=Math.sqrt(o*o+s*s);l<n.dn_size*e.config.scaleNodes+e.config.nodeMargin+(i.dn_size*e.config.scaleNodes+e.config.nodeMargin)&&(e.running=!0,l>0?(i.dn.dx+=o/l*(1+n.dn_size),i.dn.dy+=s/l*(1+n.dn_size)):(i.dn.dx+=.01*r*(.5-Math.random()),i.dn.dy+=.01*a*(.5-Math.random())))}));for(t=0;t<C;t++)(i=x[t]).fixed||(i.dn_x=i.dn_x+.1*i.dn.dx*e.config.speed,i.dn_y=i.dn_y+.1*i.dn.dy*e.config.speed);return this.running&&this.iterCount<1&&(this.running=!1),this.running},this.go=function(){for(this.iterCount=this.config.maxIterations;this.running;)this.atomicGo();this.stop()},this.start=function(){if(!this.running){var t=this.sigInst.graph.nodes(),i=this.sigInst.renderers[e.config.rendererIndex].options.prefix;this.running=!0;for(var r=0;r<t.length;r++)t[r].dn_x=t[r][i+"x"],t[r].dn_y=t[r][i+"y"],t[r].dn_size=t[r][i+"size"],t[r].dn={dx:0,dy:0};n[e.sigInst.id].dispatchEvent("start"),this.go()}},this.stop=function(){var t=this.sigInst.graph.nodes();if(this.running=!1,this.easing)n[e.sigInst.id].dispatchEvent("interpolate"),sigma.plugins.animate(e.sigInst,{x:"dn_x",y:"dn_y"},{easing:e.easing,onComplete:function(){e.sigInst.refresh();for(var i=0;i<t.length;i++)t[i].dn=null,t[i].dn_x=null,t[i].dn_y=null;n[e.sigInst.id].dispatchEvent("stop")},duration:e.duration});else{for(var i=0;i<t.length;i++)t[i].x=t[i].dn_x,t[i].y=t[i].dn_y;this.sigInst.refresh();for(i=0;i<t.length;i++)t[i].dn=null,t[i].dn_x=null,t[i].dn_y=null;n[e.sigInst.id].dispatchEvent("stop")}},this.kill=function(){this.sigInst=null,this.config=null,this.easing=null}}sigma.prototype.configNoverlap=function(e){var t=this;if(!e)throw new Error('Missing argument: "config"');return i[t.id]||(i[t.id]=new r,n[t.id]={},sigma.classes.dispatcher.extend(n[t.id]),t.bind("kill",(function(){i[t.id].kill(),i[t.id]=null,n[t.id]=null}))),i[t.id].init(t,e),n[t.id]},sigma.prototype.startNoverlap=function(e){return e&&this.configNoverlap(this,e),i[this.id].start(),n[this.id]},sigma.prototype.isNoverlapRunning=function(){return!!i[this.id]&&i[this.id].running}}).call(this)}).call(window)},function(e,t){(function(){(function(){"use strict";if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var e=0,t={};function i(e){if(t[e])return t[e];var i=[0,0,0];return e.match(/^#/)?i=3===(e=(e||"").replace(/^#/,"")).length?[parseInt(e.charAt(0)+e.charAt(0),16),parseInt(e.charAt(1)+e.charAt(1),16),parseInt(e.charAt(2)+e.charAt(2),16)]:[parseInt(e.charAt(0)+e.charAt(1),16),parseInt(e.charAt(2)+e.charAt(3),16),parseInt(e.charAt(4)+e.charAt(5),16)]:e.match(/^ *rgba? *\(/)&&(i=[+(e=e.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/))[1],+e[2],+e[3]]),t[e]={r:i[0],g:i[1],b:i[2]},t[e]}function n(e,t,n){return e=i(e),t=i(t),"rgb("+[0|e.r*(1-n)+t.r*n,0|e.g*(1-n)+t.g*n,0|e.b*(1-n)+t.b*n].join(",")+")"}sigma.plugins.animate=function(t,i,r){var a,o,s,l=r||{},c=++e,d=l.duration||t.settings("animationsTime"),h="string"===typeof l.easing?sigma.utils.easings[l.easing]:"function"===typeof l.easing?l.easing:sigma.utils.easings.quadraticInOut,u=sigma.utils.dateNow();for(s in a=l.nodes&&l.nodes.length?"object"===typeof l.nodes[0]?l.nodes:t.graph.nodes(l.nodes):t.graph.nodes(),o=a.reduce((function(e,t){var n;for(n in e[t.id]={},i)n in t&&(e[t.id][n]=t[n]);return e}),{}),t.animations=t.animations||Object.create({}),sigma.plugins.kill(t),t.cameras)t.cameras[s].edgequadtree._enabled=!1;!function e(){var r=(sigma.utils.dateNow()-u)/d;if(r>=1){var s;for(s in a.forEach((function(e){for(var t in i)t in i&&(e[t]=e[i[t]])})),t.cameras)t.cameras[s].edgequadtree._enabled=!0;t.refresh(),"function"===typeof l.onComplete&&l.onComplete()}else r=h(r),a.forEach((function(e){for(var t in i)t in i&&(t.match(/color$/)?e[t]=n(o[e.id][t],e[i[t]],r):e[t]=e[i[t]]*r+o[e.id][t]*(1-r))})),t.refresh(),t.animations[c]=requestAnimationFrame(e)}()},sigma.plugins.kill=function(e){for(var t in e.animations||{})cancelAnimationFrame(e.animations[t]);for(t in e.cameras)e.cameras[t].edgequadtree._enabled=!0}}).call(window)}).call(window)},function(e,t){(function(){(function(){"use strict";if("undefined"===typeof sigma)throw"sigma is not declared";function e(e,t){sigma.classes.dispatcher.extend(this);var i=this,n=e,r=document.body,a=t,o=t.container.lastChild,s=t.camera,l=null,c="",d=[],h={},u=!1,p=!1;function f(e){h[e.data.node.id]||(d.push(e.data.node),h[e.data.node.id]=!0,d.length&&!u&&(l=d[d.length-1],o.addEventListener("mousedown",m)))}function g(e){var t=d.map((function(e){return e})).indexOf(e.data.node);d.splice(t,1),delete h[e.data.node.id],d.length&&!u?l=d[d.length-1]:o.removeEventListener("mousedown",m)}function m(e){u=!0;var t=n.graph.nodes().length;if(l&&t>1){var s,c;for(s in o.removeEventListener("mousedown",m),r.addEventListener("mousemove",_),r.addEventListener("mouseup",v),n.cameras)void 0!==(c=n.cameras[s]).edgequadtree&&(c.edgequadtree._enabled=!1);a.settings({mouseEnabled:!1,enableHovering:!1}),n.refresh(),i.dispatchEvent("startdrag",{node:l,captor:e,renderer:a})}}function v(e){var t,s;for(t in u=!1,o.addEventListener("mousedown",m),r.removeEventListener("mousemove",_),r.removeEventListener("mouseup",v),n.cameras)void 0!==(s=n.cameras[t]).edgequadtree&&(s.edgequadtree._enabled=!0);a.settings({mouseEnabled:!0,enableHovering:!0}),n.refresh(),p&&i.dispatchEvent("drop",{node:l,captor:e,renderer:a}),i.dispatchEvent("dragend",{node:l,captor:e,renderer:a}),p=!1,l=null}function _(e){if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1){clearTimeout(t);var t=setTimeout(r,0)}else r();function r(){for(var t=function(e){var t=window.getComputedStyle(e),i=function(e){return parseInt(t.getPropertyValue(e).replace("px",""))||0};return{left:e.getBoundingClientRect().left+i("padding-left"),top:e.getBoundingClientRect().top+i("padding-top")}}(a.container),r=e.clientX-t.left,o=e.clientY-t.top,d=Math.cos(s.angle),h=Math.sin(s.angle),u=n.graph.nodes(),f=[],g=0;g<2;g++){var m=u[g],v={x:m.x*d+m.y*h,y:m.y*d-m.x*h,renX:m[c+"x"],renY:m[c+"y"]};f.push(v)}if(f[0].x===f[1].x&&f[0].y===f[1].y){var _=0===f[0].renX?1:f[0].renX,b=0===f[0].renY?1:f[0].renY;r=f[0].x/_*(r-f[0].renX)+f[0].x,o=f[0].y/b*(o-f[0].renY)+f[0].y}else{_=(f[1].renX-f[0].renX)/(f[1].x-f[0].x),b=(f[1].renY-f[0].renY)/(f[1].y-f[0].y);f[1].x===f[0].x&&(_=b),f[1].y===f[0].y&&(b=_),r=(r-f[0].renX)/_+f[0].x,o=(o-f[0].renY)/b+f[0].y}l.x=r*d-o*h,l.y=o*d+r*h,n.refresh(),p=!0,i.dispatchEvent("drag",{node:l,captor:e,renderer:a})}}t instanceof sigma.renderers.svg&&(o=t.container.firstChild),c=t instanceof sigma.renderers.webgl?t.options.prefix.substr(5):t.options.prefix,t.bind("overNode",f),t.bind("outNode",g),t.bind("click",(function(e){u=!1,r.removeEventListener("mousemove",_),r.removeEventListener("mouseup",v),d.length||(l=null)})),n.bind("kill",(function(){i.unbindAll()})),this.unbindAll=function(){o.removeEventListener("mousedown",m),r.removeEventListener("mousemove",_),r.removeEventListener("mouseup",v),a.unbind("overNode",f),a.unbind("outNode",g)}}sigma.utils.pkg("sigma.plugins");var t={};sigma.plugins.dragNodes=function(i,n){return t[i.id]||(t[i.id]=new e(i,n)),i.bind("kill",(function(){sigma.plugins.killDragNodes(i)})),t[i.id]},sigma.plugins.killDragNodes=function(i){t[i.id]instanceof e&&(t[i.id].unbindAll(),delete t[i.id])}}).call(window)}).call(window)},function(module,exports){(function(){(function(undefined){"use strict";if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins"),sigma.classes.graph.hasMethod("adjacentNodes")||sigma.classes.graph.addMethod("adjacentNodes",(function(e){if("string"!==typeof e)throw"adjacentNodes: the node id must be a string.";var t,i=[];for(t in this.allNeighborsIndex[e])i.push(this.nodesIndex[t]);return i})),sigma.classes.graph.hasMethod("adjacentEdges")||sigma.classes.graph.addMethod("adjacentEdges",(function(e){if("string"!==typeof e)throw"adjacentEdges: the node id must be a string.";var t,i,n=this.allNeighborsIndex[e],r=[];for(i in n)for(t in n[i])r.push(n[i][t]);return r}));var _g=undefined,_s=undefined,_chain=[],_keysIndex=Object.create(null),Processors={};function register(e,t,i){if(i!=undefined&&"string"!==typeof i)throw'The filter key "'+i.toString()+'" must be a string.';if(i!=undefined&&!i.length)throw"The filter key must be a non-empty string.";if("function"!==typeof e)throw'The predicate of key "'+i+'" must be a function.';if("undo"===i)throw'"undo" is a reserved key.';if(_keysIndex[i])throw'The filter "'+i+'" already exists.';i&&(_keysIndex[i]=!0),_chain.push({key:i,processor:e,predicate:t})}function unregister(e){for(var t in _chain=_chain.filter((function(t){return!(t.key in e)})),e)delete _keysIndex[t]}function Filter(e){_s=e,_g=e.graph}function deepCopy(o){var copy=Object.create(null);for(var i in o)"object"===typeof o[i]&&null!==o[i]?copy[i]=deepCopy(o[i]):"function"===typeof o[i]&&null!==o[i]?eval(" copy[i] = "+o[i].toString()):copy[i]=o[i];return copy}function cloneChain(e){for(var t=e.slice(0),i=0,n=t.length;i<n;i++)t[i]=deepCopy(t[i]),"function"===typeof t[i].processor&&(t[i].processor="filter.processors."+t[i].processor.name);return t}Processors.nodes=function(e){for(var t=_g.nodes(),i=t.length,n=_g.edges(),r=n.length;i--;)t[i].hidden=!e.call(_g,t[i])||t[i].hidden;for(;r--;)(_g.nodes(n[r].source).hidden||_g.nodes(n[r].target).hidden)&&(n[r].hidden=!0)},Processors.edges=function(e){for(var t=_g.edges(),i=t.length;i--;)t[i].hidden=!e.call(_g,t[i])||t[i].hidden},Processors.neighbors=function(e){for(var t=_g.nodes(),i=t.length,n=_g.edges(),r=n.length,a=_g.adjacentNodes(e),o=a.length,s={};o--;)s[a[o].id]=!0;for(;i--;)t[i].id===e||t[i].id in s||(t[i].hidden=!0);for(;r--;)(_g.nodes(n[r].source).hidden||_g.nodes(n[r].target).hidden)&&(n[r].hidden=!0)},Filter.prototype.nodesBy=function(e,t){return register(Processors.nodes,e,t),this},Filter.prototype.edgesBy=function(e,t){return register(Processors.edges,e,t),this},Filter.prototype.neighborsOf=function(e,t){if("string"!==typeof e)throw'The node id "'+e.toString()+'" must be a string.';if(!e.length)throw"The node id must be a non-empty string.";return register(Processors.neighbors,e,t),this},Filter.prototype.apply=function(){for(var e=0,t=_chain.length;e<t;++e)_chain[e].processor(_chain[e].predicate);return _chain[0]&&"undo"===_chain[0].key&&_chain.shift(),_s.refresh(),this},Filter.prototype.undo=function(e){var t=Object.create(null),i=arguments.length;if(1===i)if("[object Array]"===Object.prototype.toString.call(e))for(var n=0,r=e.length;n<r;n++)t[e[n]]=!0;else t[e]=!0;else if(i>1)for(n=0;n<i;n++)t[arguments[n]]=!0;else this.clear();function a(){for(var e=_g.nodes(),t=e.length,i=_g.edges(),n=i.length;t--;)e[t].hidden=!1;for(;n--;)i[n].hidden=!1}return unregister(t),_chain.unshift({key:"undo",processor:a}),this},Filter.prototype.clear=function(){return _chain.length=0,_keysIndex=Object.create(null),this},Filter.prototype.export=function(){return cloneChain(_chain)},Filter.prototype.import=function(e){if(e===undefined)throw"Wrong arguments.";if("[object Array]"!==Object.prototype.toString.call(e))throw'The chain" must be an array.';for(var t=cloneChain(e),i=0,n=t.length;i<n;i++){if(t[i].predicate===undefined||t[i].processor===undefined)throw"Wrong arguments.";if(t[i].key!=undefined&&"string"!==typeof t[i].key)throw'The filter key "'+t[i].key.toString()+'" must be a string.';if("function"!==typeof t[i].predicate)throw'The predicate of key "'+t[i].key+'" must be a function.';if("string"!==typeof t[i].processor)throw'The processor of key "'+t[i].key+'" must be a string.';switch(t[i].processor){case"filter.processors.nodes":t[i].processor=Processors.nodes;break;case"filter.processors.edges":t[i].processor=Processors.edges;break;case"filter.processors.neighbors":t[i].processor=Processors.neighbors;break;default:throw"Unknown processor "+t[i].processor}}return _chain=t,this};var filter=null;sigma.plugins.filter=function(e){return filter||(filter=new Filter(e)),filter}}).call(this)}).call(window)},function(e,t){(function(){(function(e){"use strict";if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins.fullScreen");var t=null,i=null;function n(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}sigma.plugins.fullScreen=function(e){var r=e||{};t=r.container?"object"===typeof r.container?r.container:document.getElementById(r.container):this.container,i=null,r.btnId?((i=document.getElementById(r.btnId)).removeEventListener("click",n),i.addEventListener("click",n)):n()}}).call(this)}).call(window)},function(e,t){(function(){(function(e){"use strict";if("undefined"===typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var t=e,i={};function n(i,n,r){if(sigma.classes.dispatcher.extend(this),sigma.renderers.webgl&&n instanceof sigma.renderers.webgl)throw new Error("The sigma.plugins.lasso is not compatible with the WebGL renderer");this.sigmaInstance=i,this.renderer=n,this.drawingCanvas=e,this.drawingContext=e,this.drewPoints=[],this.selectedNodes=[],this.isActive=!1,this.isDrawing=!1,t=document.body,this.settings=new sigma.classes.configurable({strokeStyle:"black",lineWidth:2,fillWhileDrawing:!1,fillStyle:"rgba(200, 200, 200, 0.25)",cursor:"crosshair"},r||{})}n.prototype.clear=function(){return this.deactivate(),this.sigmaInstance=e,this.renderer=e,this},n.prototype.activate=function(){return this.sigmaInstance&&!this.isActive&&(this.isActive=!0,this.renderer.domElements.lasso||(this.renderer.initDOM("canvas","lasso"),this.drawingCanvas=this.renderer.domElements.lasso,this.drawingCanvas.width=this.renderer.container.offsetWidth,this.drawingCanvas.height=this.renderer.container.offsetHeight,this.renderer.container.appendChild(this.drawingCanvas),this.drawingContext=this.drawingCanvas.getContext("2d"),this.drawingCanvas.style.cursor=this.settings("cursor")),r.apply(this)),this},n.prototype.deactivate=function(){return this.sigmaInstance&&this.isActive&&(this.isActive=!1,this.isDrawing=!1,a.apply(this),this.renderer.domElements.lasso&&(this.renderer.container.removeChild(this.renderer.domElements.lasso),delete this.renderer.domElements.lasso,this.drawingCanvas.style.cursor="",this.drawingCanvas=e,this.drawingContext=e,this.drewPoints=[])),this};var r=function(){this.drawingCanvas.addEventListener("mousedown",o.bind(this)),t.addEventListener("mousemove",s.bind(this)),t.addEventListener("mouseup",l.bind(this)),this.drawingCanvas.addEventListener("touchstart",o.bind(this)),t.addEventListener("touchmove",s.bind(this)),t.addEventListener("touchcancel",l.bind(this)),t.addEventListener("touchleave",l.bind(this)),t.addEventListener("touchend",l.bind(this))},a=function(){this.drawingCanvas.removeEventListener("mousedown",o.bind(this)),t.removeEventListener("mousemove",s.bind(this)),t.removeEventListener("mouseup",l.bind(this)),this.drawingCanvas.removeEventListener("touchstart",o.bind(this)),this.drawingCanvas.removeEventListener("touchmove",s.bind(this)),t.removeEventListener("touchcancel",l.bind(this)),t.removeEventListener("touchleave",l.bind(this)),t.removeEventListener("touchend",l.bind(this))};function o(e){var t=this.drawingCanvas.getBoundingClientRect();this.isActive&&(this.isDrawing=!0,this.drewPoints=[],this.selectedNodes=[],this.sigmaInstance.refresh(),this.drewPoints.push({x:e.clientX-t.left,y:e.clientY-t.top}),this.drawingCanvas.style.cursor=this.settings("cursor"),e.stopPropagation())}function s(e){if(this.isActive&&this.isDrawing){var t=0,i=0,n=this.drawingCanvas.getBoundingClientRect();switch(e.type){case"touchmove":t=e.touches[0].clientX,i=e.touches[0].clientY;break;default:t=e.clientX,i=e.clientY}this.drewPoints.push({x:t-n.left,y:i-n.top}),this.drawingContext.lineWidth=this.settings("lineWidth"),this.drawingContext.strokeStyle=this.settings("strokeStyle"),this.drawingContext.fillStyle=this.settings("fillStyle"),this.drawingContext.lineJoin="round",this.drawingContext.lineCap="round",this.drawingContext.clearRect(0,0,this.drawingContext.canvas.width,this.drawingContext.canvas.height);var r=this.drewPoints[0],a=this.drewPoints[1],o=this.drewPoints.length;this.drawingContext.beginPath(),this.drawingContext.moveTo(r.x,r.y);for(var s=1;s<o;s++){var l=(d=a,{x:(c=r).x+(d.x-c.x)/2,y:c.y+(d.y-c.y)/2});this.drawingContext.quadraticCurveTo(r.x,r.y,l.x,l.y),r=this.drewPoints[s],a=this.drewPoints[s+1]}this.drawingContext.lineTo(r.x,r.y),this.drawingContext.stroke(),this.settings("fillWhileDrawing")&&this.drawingContext.fill(),e.stopPropagation()}var c,d}function l(e){if(this.isActive&&this.isDrawing){this.isDrawing=!1;for(var t=this.renderer.nodesOnScreen,i=t.length,n=this.renderer.options.prefix||"";i--;){var r=t[i],a=r[n+"x"],o=r[n+"y"];this.drawingContext.isPointInPath(a,o)&&!r.hidden&&this.selectedNodes.push(r)}this.dispatchEvent("selectedNodes",this.selectedNodes),this.drawingContext.clearRect(0,0,this.drawingCanvas.width,this.drawingCanvas.height),this.drawingCanvas.style.cursor=this.settings("cursor"),e.stopPropagation()}}n.prototype.getSelectedNodes=function(){return this.selectedNodes},sigma.plugins.lasso=function(e,t,r){return i[e.id]||(i[e.id]=new n(e,t,r)),e.bind("kill",(function(){i[e.id]instanceof n&&(i[e.id].clear(),delete i[e.id])})),i[e.id]}}).call(this)}).call(window)},function(e,t){(function(){(function(e){"use strict";if("undefined"===typeof sigma)throw new Error("sigma not in scope.");function t(){for(var e=[],t=-1,i=arguments.length;++t<i;){var n=arguments[t];e.push(n)}var r=e[0],a=-1,o=r?r.length:0,s=[];e:for(;++a<o;)if(n=r[a],s.indexOf(n)<0){for(t=i;--t;)if(e[t].indexOf(n)<0)continue e;s.push(n)}return s}function i(e,t,i){for(var n=0;n<e.length;n++)null!=e[n]&&(t.beginPath(),t.arc(e[n].x,e[n].y,e[n].radius,0,2*Math.PI,!0),t.closePath(),i?t.stroke():t.fill())}function n(e){e=e||{},this.domElements.background||(this.initDOM("canvas","background"),this.domElements.background.width=this.container.offsetWidth,this.domElements.background.height=this.container.offsetHeight,this.container.insertBefore(this.domElements.background,this.container.firstChild));var n,r,a,o,s,l,c,d,h,u,p=this,f=p.contexts.background,g=this instanceof sigma.renderers.webgl,m=p.options.prefix,v=g?m.substr(5):m,_=e.nodeHaloClustering||p.settings("nodeHaloClustering"),b=e.nodeHaloClusteringMaxRadius||p.settings("nodeHaloClusteringMaxRadius"),w=e.nodeHaloColor||p.settings("nodeHaloColor"),y=e.nodeHaloSize||p.settings("nodeHaloSize"),x=e.nodeHaloStroke||p.settings("nodeHaloStroke"),C=e.nodeHaloStrokeColor||p.settings("nodeHaloStrokeColor"),S=e.nodeHaloStrokeWidth||p.settings("nodeHaloStrokeWidth"),T=p.settings("nodeBorderSize")||0,k=p.settings("nodeOuterBorderSize")||0,A=e.edgeHaloColor||p.settings("edgeHaloColor"),P=e.edgeHaloSize||p.settings("edgeHaloSize"),D=e.drawHalo||p.settings("drawHalo"),E=e.nodes||[],M=e.edges||[];D&&(E=g?E:t(e.nodes,p.nodesOnScreen),M=g?M:t(e.edges,p.edgesOnScreen),f.clearRect(0,0,f.canvas.width,f.canvas.height),f.save(),f.strokeStyle=A,M.forEach((function(e){n=p.graph.nodes(e.source),r=p.graph.nodes(e.target),f.lineWidth=(e[m+"size"]||1)+P,f.beginPath(),a={},o=n[v+"size"],s=n[v+"x"],l=n[v+"y"],c=r[v+"x"],d=r[v+"y"],f.moveTo(s,l),"curve"===e.type||"curvedArrow"===e.type?e.source===e.target?(a=sigma.utils.getSelfLoopControlPoints(s,l,o),f.bezierCurveTo(a.x1,a.y1,a.x2,a.y2,c,d)):(a=sigma.utils.getQuadraticControlPoint(s,l,c,d,e.cc),f.quadraticCurveTo(a.x,a.y,c,d)):(f.moveTo(s,l),f.lineTo(c,d)),f.stroke(),f.closePath()})),f.fillStyle=w,x&&(f.lineWidth=S,f.strokeStyle=C),h=T+k+y,u=E.filter((function(e){return!e.hidden})).map((function(e){return{x:e[v+"x"],y:e[v+"y"],radius:e[v+"size"]+h}})),_&&(u=function(e,t,i){if(i=i||Number.POSITIVE_INFINITY,e.length>1)for(var n,r,a,o=!0;o;){o=!1;for(var s=0;s<e.length;s++)if(null!==e[s])for(var l=s+1;l<e.length;l++)if(null!==e[l]&&(r=sigma.utils.getDistance(e[s].x,e[s].y,e[l].x,e[l].y))<i&&r<e[s].radius+e[l].radius){o=!0,a=[{x:e[s].x,y:e[s].y,radius:e[s].radius},{x:e[l].x,y:e[l].y,radius:e[l].radius}],e[s].points&&(a=a.concat(e[s].points)),e[l].points&&(a=a.concat(e[l].points)),n={x:0,y:0};for(var c=0;c<a.length;c++)n.x+=a[c].x,n.y+=a[c].y;n.x/=a.length,n.y/=a.length,n.radius=Math.max.apply(null,a.map((function(e){return t+sigma.utils.getDistance(n.x,n.y,e.x,e.y)}))),e.push({x:n.x,y:n.y,radius:n.radius,points:a}),e[s]=e[l]=null;break}}return e}(u,h,b)),x&&i(u,f,!0),i(u,f),f.restore())}sigma.renderers.canvas.prototype.halo=n,sigma.renderers.webgl.prototype.halo=n}).call(this)}).call(window)},function(e,t,i){RegExp.escape=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},function(t){"use strict";var i;(i="undefined"!==typeof jQuery&&jQuery?jQuery:{}).csv={defaults:{separator:",",delimiter:'"',headers:!0},hooks:{castToScalar:function(e,t){if(isNaN(e))return e;if(/\./.test(e))return parseFloat(e);var i=parseInt(e);return isNaN(i)?null:i}},parsers:{parse:function(e,i){var n=i.separator,r=i.delimiter;i.state.rowNum||(i.state.rowNum=1),i.state.colNum||(i.state.colNum=1);var a=[],o=[],s=0,l="",c=!1;function d(){if(s=0,l="",i.start&&i.state.rowNum<i.start)return o=[],i.state.rowNum++,void(i.state.colNum=1);if(i.onParseEntry===t)a.push(o);else{var e=i.onParseEntry(o,i.state);!1!==e&&a.push(e)}o=[],i.end&&i.state.rowNum>=i.end&&(c=!0),i.state.rowNum++,i.state.colNum=1}function h(){if(i.onParseValue===t)o.push(l);else{var e=i.onParseValue(l,i.state);!1!==e&&o.push(e)}l="",s=0,i.state.colNum++}var u=RegExp.escape(n),p=RegExp.escape(r),f=/(D|S|\r\n|\n|\r|[^DS\r\n]+)/,g=f.source;return g=(g=g.replace(/S/g,u)).replace(/D/g,p),f=new RegExp(g,"gm"),e.replace(f,(function(e){if(!c)switch(s){case 0:if(e===n){l+="",h();break}if(e===r){s=1;break}if(/^(\r\n|\n|\r)$/.test(e)){h(),d();break}l+=e,s=3;break;case 1:if(e===r){s=2;break}l+=e,s=1;break;case 2:if(e===r){l+=e,s=1;break}if(e===n){h();break}if(/^(\r\n|\n|\r)$/.test(e)){h(),d();break}throw new Error("CSVDataError: Illegal State [Row:"+i.state.rowNum+"][Col:"+i.state.colNum+"]");case 3:if(e===n){h();break}if(/^(\r\n|\n|\r)$/.test(e)){h(),d();break}if(e===r)throw new Error("CSVDataError: Illegal Quote [Row:"+i.state.rowNum+"][Col:"+i.state.colNum+"]");throw new Error("CSVDataError: Illegal Data [Row:"+i.state.rowNum+"][Col:"+i.state.colNum+"]");default:throw new Error("CSVDataError: Unknown State [Row:"+i.state.rowNum+"][Col:"+i.state.colNum+"]")}})),0!==o.length&&(h(),d()),a},splitLines:function(e,i){var n=i.separator,r=i.delimiter;i.state.rowNum||(i.state.rowNum=1);var a=[],o=0,s="",l=!1;function c(){if(o=0,i.start&&i.state.rowNum<i.start)return s="",void i.state.rowNum++;if(i.onParseEntry===t)a.push(s);else{var e=i.onParseEntry(s,i.state);!1!==e&&a.push(e)}s="",i.end&&i.state.rowNum>=i.end&&(l=!0),i.state.rowNum++}var d=RegExp.escape(n),h=RegExp.escape(r),u=/(D|S|\n|\r|[^DS\r\n]+)/,p=u.source;return p=(p=p.replace(/S/g,d)).replace(/D/g,h),u=new RegExp(p,"gm"),e.replace(u,(function(e){if(!l)switch(o){case 0:if(e===n){s+=e,o=0;break}if(e===r){s+=e,o=1;break}if("\n"===e){c();break}if(/^\r$/.test(e))break;s+=e,o=3;break;case 1:if(e===r){s+=e,o=2;break}s+=e,o=1;break;case 2:var t=s.substr(s.length-1);if(e===r&&t===r){s+=e,o=1;break}if(e===n){s+=e,o=0;break}if("\n"===e){c();break}if("\r"===e)break;throw new Error("CSVDataError: Illegal state [Row:"+i.state.rowNum+"]");case 3:if(e===n){s+=e,o=0;break}if("\n"===e){c();break}if("\r"===e)break;if(e===r)throw new Error("CSVDataError: Illegal quote [Row:"+i.state.rowNum+"]");throw new Error("CSVDataError: Illegal state [Row:"+i.state.rowNum+"]");default:throw new Error("CSVDataError: Unknown state [Row:"+i.state.rowNum+"]")}})),""!==s&&c(),a},parseEntry:function(e,i){var n=i.separator,r=i.delimiter;i.state.rowNum||(i.state.rowNum=1),i.state.colNum||(i.state.colNum=1);var a=[],o=0,s="";function l(){if(i.onParseValue===t)a.push(s);else{var e=i.onParseValue(s,i.state);!1!==e&&a.push(e)}s="",o=0,i.state.colNum++}if(!i.match){var c=RegExp.escape(n),d=RegExp.escape(r),h=/(D|S|\n|\r|[^DS\r\n]+)/.source;h=(h=h.replace(/S/g,c)).replace(/D/g,d),i.match=new RegExp(h,"gm")}return e.replace(i.match,(function(e){switch(o){case 0:if(e===n){s+="",l();break}if(e===r){o=1;break}if("\n"===e||"\r"===e)break;s+=e,o=3;break;case 1:if(e===r){o=2;break}s+=e,o=1;break;case 2:if(e===r){s+=e,o=1;break}if(e===n){l();break}if("\n"===e||"\r"===e)break;throw new Error("CSVDataError: Illegal State [Row:"+i.state.rowNum+"][Col:"+i.state.colNum+"]");case 3:if(e===n){l();break}if("\n"===e||"\r"===e)break;if(e===r)throw new Error("CSVDataError: Illegal Quote [Row:"+i.state.rowNum+"][Col:"+i.state.colNum+"]");throw new Error("CSVDataError: Illegal Data [Row:"+i.state.rowNum+"][Col:"+i.state.colNum+"]");default:throw new Error("CSVDataError: Unknown State [Row:"+i.state.rowNum+"][Col:"+i.state.colNum+"]")}})),l(),a}},helpers:{collectPropertyNames:function(e){var t,i,n=[];for(t in e)for(i in e[t])e[t].hasOwnProperty(i)&&n.indexOf(i)<0&&"function"!==typeof e[t][i]&&n.push(i);return n}},toArray:function(e,n,r){n=n!==t?n:{};var a={};a.callback=r!==t&&"function"===typeof r&&r,a.separator="separator"in n?n.separator:i.csv.defaults.separator,a.delimiter="delimiter"in n?n.delimiter:i.csv.defaults.delimiter;var o=n.state!==t?n.state:{};n={delimiter:a.delimiter,separator:a.separator,onParseEntry:n.onParseEntry,onParseValue:n.onParseValue,state:o};var s=i.csv.parsers.parseEntry(e,n);if(!a.callback)return s;a.callback("",s)},toArrays:function(e,n,r){n=n!==t?n:{};var a={};a.callback=r!==t&&"function"===typeof r&&r,a.separator="separator"in n?n.separator:i.csv.defaults.separator,a.delimiter="delimiter"in n?n.delimiter:i.csv.defaults.delimiter;var o;if((n={delimiter:a.delimiter,separator:a.separator,onPreParse:n.onPreParse,onParseEntry:n.onParseEntry,onParseValue:n.onParseValue,onPostParse:n.onPostParse,start:n.start,end:n.end,state:{rowNum:1,colNum:1}}).onPreParse!==t&&n.onPreParse(e,n.state),o=i.csv.parsers.parse(e,n),n.onPostParse!==t&&n.onPostParse(o,n.state),!a.callback)return o;a.callback("",o)},toObjects:function(e,n,r){n=n!==t?n:{};var a={};a.callback=r!==t&&"function"===typeof r&&r,a.separator="separator"in n?n.separator:i.csv.defaults.separator,a.delimiter="delimiter"in n?n.delimiter:i.csv.defaults.delimiter,a.headers="headers"in n?n.headers:i.csv.defaults.headers,n.start="start"in n?n.start:1,a.headers&&n.start++,n.end&&a.headers&&n.end++;var o,s=[];n={delimiter:a.delimiter,separator:a.separator,onPreParse:n.onPreParse,onParseEntry:n.onParseEntry,onParseValue:n.onParseValue,onPostParse:n.onPostParse,start:n.start,end:n.end,state:{rowNum:1,colNum:1},match:!1,transform:n.transform};var l={delimiter:a.delimiter,separator:a.separator,start:1,end:1,state:{rowNum:1,colNum:1}};n.onPreParse!==t&&n.onPreParse(e,n.state);var c=i.csv.parsers.splitLines(e,l),d=i.csv.toArray(c[0],n);o=i.csv.parsers.splitLines(e,n),n.state.colNum=1,n.state.rowNum=d?2:1;for(var h=0,u=o.length;h<u;h++){for(var p=i.csv.toArray(o[h],n),f={},g=0;g<d.length;g++)f[d[g]]=p[g];n.transform!==t?s.push(n.transform.call(t,f)):s.push(f),n.state.rowNum++}if(n.onPostParse!==t&&n.onPostParse(s,n.state),!a.callback)return s;a.callback("",s)},fromArrays:function(e,n,r){n=n!==t?n:{};var a={};a.callback=r!==t&&"function"===typeof r&&r,a.separator="separator"in n?n.separator:i.csv.defaults.separator,a.delimiter="delimiter"in n?n.delimiter:i.csv.defaults.delimiter;var o,s,l,c,d="";for(l=0;l<e.length;l++){for(o=e[l],s=[],c=0;c<o.length;c++){var h=o[c]===t||null===o[c]?"":o[c].toString();h.indexOf(a.delimiter)>-1&&(h=h.replace(new RegExp(a.delimiter,"g"),a.delimiter+a.delimiter));var u="\n|\r|S|D";u=(u=u.replace("S",a.separator)).replace("D",a.delimiter),h.search(u)>-1&&(h=a.delimiter+h+a.delimiter),s.push(h)}d+=s.join(a.separator)+"\r\n"}if(!a.callback)return d;a.callback("",d)},fromObjects:function(e,n,r){n=n!==t?n:{};var a={};if(a.callback=r!==t&&"function"===typeof r&&r,a.separator="separator"in n?n.separator:i.csv.defaults.separator,a.delimiter="delimiter"in n?n.delimiter:i.csv.defaults.delimiter,a.headers="headers"in n?n.headers:i.csv.defaults.headers,a.sortOrder="sortOrder"in n?n.sortOrder:"declare",a.manualOrder="manualOrder"in n?n.manualOrder:[],a.transform=n.transform,"string"===typeof a.manualOrder&&(a.manualOrder=i.csv.toArray(a.manualOrder,a)),a.transform!==t){var o,s=e;for(e=[],o=0;o<s.length;o++)e.push(a.transform.call(t,s[o]))}var l=i.csv.helpers.collectPropertyNames(e);if("alpha"===a.sortOrder&&l.sort(),a.manualOrder.length>0){var c=[].concat(a.manualOrder);for(h=0;h<l.length;h++)c.indexOf(l[h])<0&&c.push(l[h]);l=c}var d,h,u,p,f=[];for(a.headers&&f.push(l),d=0;d<e.length;d++){for(u=[],h=0;h<l.length;h++)(p=l[h])in e[d]&&"function"!==typeof e[d][p]?u.push(e[d][p]):u.push("");f.push(u)}return i.csv.fromArrays(f,n,a.callback)}},i.csvEntry2Array=i.csv.toArray,i.csv2Array=i.csv.toArrays,i.csv2Dictionary=i.csv.toObjects,e.exports&&(e.exports=i.csv)}.call(this)},function(e,t){slicePath=function(){return this.NullSlice=function(e,t,i){return e.setBaseValue(t,i),{slicePathString:"",linePathString:"",titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.NullInitSlice=function(e,t,i){return e.setBaseValue(t,i),slicePathString=[e.MoveToCenter(),e.Close()],{slicePathString:slicePathString,linePathString:slicePathString,titlePosX:e.centerX,titlePosY:e.centerY}},this.PieSliceCustomization=function(){var e=new slicePathCustomization;return e.titleRadiusPercent=.6,e.arcBaseRadiusPercent=1,e.arcRadiusPercent=1,e.startRadiusPercent=0,e},this.PieSlice=function(e,t,i){null===i&&(i=PieSliceCustomization()),e.setBaseValue(t,i);var n=e.sliceRadius*i.arcBaseRadiusPercent,r=e.sliceRadius*i.arcRadiusPercent;return slicePathString=[e.MoveTo(e.middleAngle,i.startRadiusPercent*e.sliceRadius),e.LineTo(e.startAngle,n),e.ArcTo(r,e.endAngle,n),e.Close()],{slicePathString:slicePathString,linePathString:"",titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.FlowerSlice=function(e,t,i){null===i&&((i=PieSliceCustomization()).titleRadiusPercent=.5,i.arcBaseRadiusPercent=.65,i.arcRadiusPercent=.14);var n=PieSlice(e,t,i);return{slicePathString:n.slicePathString,linePathString:"",titlePosX:n.titlePosX,titlePosY:n.titlePosY}},this.PieArrowSliceCustomization=function(){var e=new slicePathCustomization;return e.titleRadiusPercent=.6,e.arrowRadiusPercent=1.1,e},this.PieArrowSlice=function(e,t,i){null===i&&(i=PieArrowSliceCustomization()),e.setBaseValue(t,i),r=e.sliceRadius,arrowAngleStart=e.startAngle+.45*e.sliceAngle,arrowAngleEnd=e.startAngle+.55*e.sliceAngle;var n=r*i.arrowRadiusPercent;return slicePathString=[e.MoveToCenter(),e.LineTo(e.startAngle,r),e.ArcTo(r,arrowAngleStart,r),e.LineTo(e.middleAngle,n),e.LineTo(arrowAngleEnd,r),e.ArcTo(r,e.endAngle,r),e.Close()],{slicePathString:slicePathString,linePathString:"",titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.PieArrowBasePieSlice=function(e,t,i){null===i&&(i=PieArrowSliceCustomization()),i.arrowRadiusPercent=1;var n=PieArrowSlice(e,t,i);return{slicePathString:n.slicePathString,linePathString:"",titlePosX:n.titlePosX,titlePosY:n.titlePosY}},this.DonutSliceCustomization=function(){var e=new slicePathCustomization;return e.minRadiusPercent=.37,e.maxRadiusPercent=.9,e},this.DonutSlice=function(e,t,i){return null===i&&(i=DonutSliceCustomization()),maxRadius=e.wheelRadius*t*i.maxRadiusPercent,minRadius=e.wheelRadius*t*i.minRadiusPercent,e.setBaseValue(t,i),e.titleRadius=(maxRadius+minRadius)/2,e.setTitlePos(),slicePathString=[e.MoveTo(e.startAngle,minRadius),e.LineTo(e.startAngle,maxRadius),e.ArcTo(maxRadius,e.endAngle,maxRadius),e.LineTo(e.endAngle,minRadius),e.ArcBackTo(minRadius,e.startAngle,minRadius),e.Close()],{slicePathString:slicePathString,linePathString:"",titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.CogSliceCustomization=function(){var e=new slicePathCustomization;return e.titleRadiusPercent=.55,e.isBasePieSlice=!1,e},this.CogSlice=function(e,t,i){return null===i&&(i=CogSliceCustomization()),e.setBaseValue(t,i),r=e.sliceRadius,rbase=e.wheelRadius*t*.83,percentAngle0625=e.startAngle+.0625*e.sliceAngle,percentAngle1250=e.startAngle+.125*e.sliceAngle,percentAngle1875=e.startAngle+.1875*e.sliceAngle,percentAngle2500=e.startAngle+.25*e.sliceAngle,percentAngle3125=e.startAngle+.3125*e.sliceAngle,percentAngle3750=e.startAngle+.375*e.sliceAngle,percentAngle4375=e.startAngle+.4375*e.sliceAngle,percentAngle5000=e.startAngle+.5*e.sliceAngle,percentAngle5625=e.startAngle+.5625*e.sliceAngle,percentAngle6250=e.startAngle+.625*e.sliceAngle,percentAngle6875=e.startAngle+.6875*e.sliceAngle,percentAngle7500=e.startAngle+.75*e.sliceAngle,percentAngle8125=e.startAngle+.8125*e.sliceAngle,percentAngle8750=e.startAngle+.875*e.sliceAngle,percentAngle9375=e.startAngle+.9375*e.sliceAngle,percentAngle9687=e.startAngle+.96875*e.sliceAngle,i.isBasePieSlice?(r=rbase,slicePathString=[e.MoveToCenter(),e.LineTo(e.startAngle,r),e.ArcTo(r,percentAngle0625,r),e.ArcTo(r,percentAngle1250,r),e.ArcTo(r,percentAngle1875,r),e.ArcTo(r,percentAngle2500,r),e.ArcTo(r,percentAngle3125,r),e.ArcTo(r,percentAngle3750,r),e.ArcTo(r,percentAngle4375,r),e.ArcTo(r,percentAngle5000,r),e.ArcTo(r,percentAngle5625,r),e.ArcTo(r,percentAngle6250,r),e.ArcTo(r,percentAngle6875,r),e.ArcTo(r,percentAngle7500,r),e.ArcTo(r,percentAngle8125,r),e.ArcTo(r,percentAngle8750,r),e.ArcTo(r,percentAngle9375,r),e.ArcTo(r,percentAngle9687,r),e.ArcTo(r,e.endAngle,r),e.Close()]):slicePathString=[e.MoveToCenter(),e.LineTo(e.startAngle,r),e.ArcTo(r,percentAngle0625,r),e.LineTo(percentAngle0625,rbase),e.ArcTo(rbase,percentAngle1875,rbase),e.LineTo(percentAngle1875,r),e.ArcTo(r,percentAngle3125,r),e.LineTo(percentAngle3125,rbase),e.ArcTo(rbase,percentAngle4375,rbase),e.LineTo(percentAngle4375,r),e.ArcTo(r,percentAngle5625,r),e.LineTo(percentAngle5625,rbase),e.ArcTo(rbase,percentAngle6875,rbase),e.LineTo(percentAngle6875,r),e.ArcTo(r,percentAngle8125,r),e.LineTo(percentAngle8125,rbase),e.ArcTo(rbase,percentAngle9375,rbase),e.LineTo(percentAngle9375,r),e.ArcTo(r,e.endAngle,r),e.Close()],{slicePathString:slicePathString,linePathString:"",titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.CogBasePieSlice=function(e,t,i){null===i&&(i=CogSliceCustomization()),i.isBasePieSlice=!0;var n=CogSlice(e,t,i);return{slicePathString:n.slicePathString,linePathString:"",titlePosX:n.titlePosX,titlePosY:n.titlePosY}},this.StarSliceCustomization=function(){var e=new slicePathCustomization;return e.titleRadiusPercent=.44,e.minRadiusPercent=.5,e.isBasePieSlice=!1,e},this.StarSlice=function(e,t,i){return null===i&&(i=StarSliceCustomization()),e.setBaseValue(t,i),r=e.wheelRadius*t,rbase=r*i.minRadiusPercent,i.isBasePieSlice?(r=e.sliceRadius,slicePathString=[e.MoveToCenter(),e.LineTo(e.startAngle,r),e.ArcTo(r,e.middleAngle,r),e.ArcTo(r,e.endAngle,r),e.Close()]):slicePathString=[e.MoveToCenter(),e.LineTo(e.startAngle,rbase),e.LineTo(e.middleAngle,r),e.LineTo(e.endAngle,rbase),e.Close()],{slicePathString:slicePathString,linePathString:"",titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.StarBasePieSlice=function(e,t,i){null===i&&(i=StarSliceCustomization()),i.titleRadiusPercent=.6,i.isBasePieSlice=!0;var n=StarSlice(e,t,i);return{slicePathString:n.slicePathString,linePathString:"",titlePosX:n.titlePosX,titlePosY:n.titlePosY}},this.MenuSliceCustomization=function(){var e=new slicePathCustomization;return e.menuRadius=35,e.titleRadiusPercent=.63,e.isSelectedLine=!1,e.lineBaseRadiusPercent=0,e},this.MenuSlice=function(e,t,i){null===i&&(i=MenuSliceCustomization()),e.setBaseValue(t,i),x=e.centerX,y=e.centerY;var n=e.wheelRadius*t;e.titleRadius=n*i.titleRadiusPercent,e.setTitlePos();var r=t*i.menuRadius;return t<=.05&&(r=10),middleTheta=e.middleTheta,slicePathString=[["M",e.titlePosX-r*Math.cos(middleTheta),e.titlePosY-r*Math.sin(middleTheta)],["A",r,r,0,0,1,e.titlePosX+r*Math.cos(middleTheta),e.titlePosY+r*Math.sin(middleTheta)],["A",r,r,0,0,1,e.titlePosX-r*Math.cos(middleTheta),e.titlePosY-r*Math.sin(middleTheta)],["z"]],t<=.05?linePathString=[["M",x,y],["A",1,1,0,0,1,x+1,y+1]]:i.isSelectedLine?linePathString=[e.MoveTo(e.middleAngle,i.lineBaseRadiusPercent*n),e.ArcTo(n/3,e.middleAngle,e.titleRadius-r)]:linePathString=[e.MoveTo(e.middleAngle,i.lineBaseRadiusPercent*n),e.ArcTo(n/2,e.middleAngle,e.titleRadius-r)],{slicePathString:slicePathString,linePathString:linePathString,titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.MenuSliceSelectedLine=function(e,t,i){null===i&&(i=MenuSliceCustomization()),i.isSelectedLine=!0;var n=MenuSlice(e,t,i);return{slicePathString:n.slicePathString,linePathString:n.linePathString,titlePosX:n.titlePosX,titlePosY:n.titlePosY}},this.MenuSliceWithoutLine=function(e,t,i){var n=MenuSlice(e,t,i);return{slicePathString:n.slicePathString,linePathString:"",titlePosX:n.titlePosX,titlePosY:n.titlePosY}},this.LineSlice=function(e,t,i){return e.setBaseValue(t,i),r=e.sliceRadius,e.sliceAngle>60&&e.sliceAngle<180?(e.titleRadius=r*(180/e.sliceAngle/5),e.setTitlePos()):(e.titleRadius=.55*r,e.setTitlePos()),e.sliceAngle<180?slicePathString=[e.MoveToCenter(),e.LineTo(e.startAngle,r),e.LineTo(e.endAngle,r),e.Close()]:180===e.startAngle||0===e.startAngle||-180===e.startAngle||360===e.startAngle?slicePathString=[e.MoveToCenter(),e.LineTo(e.startAngle,r),e.LineTo(e.startAngle,r,e.middleAngle,r),e.LineTo(e.endAngle,r,e.middleAngle,r),e.LineTo(e.endAngle,r),e.Close()]:slicePathString=[e.MoveToCenter(),e.LineTo(e.startAngle,r),e.LineTo(e.middleAngle,r,e.startAngle,r),e.LineTo(e.middleAngle,r,e.endAngle,r),e.LineTo(e.endAngle,r),e.Close()],{slicePathString:slicePathString,linePathString:"",titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.EyeSliceCustomization=function(){var e=new slicePathCustomization;return e.titleRadiusPercent=.68,e},this.EyeSlice=function(e,t,i){return null===i&&(i=EyeSliceCustomization()),e.setBaseValue(t,i),r=e.wheelRadius*t*.7,0===t&&(r=.01),startAngle=e.startAngle,endAngle=e.endAngle,180===e.sliceAngle&&(startAngle=e.startAngle+e.sliceAngle/4,endAngle=e.startAngle+e.sliceAngle-e.sliceAngle/4),slicePathString=[e.MoveTo(endAngle,r),e.ArcTo(r,startAngle,r),e.ArcTo(r,endAngle,r),e.Close()],{slicePathString:slicePathString,linePathString:"",titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.WheelSlice=function(e,t,i){var n;return e.setBaseValue(t,i),x=e.centerX,y=e.centerY,r=e.sliceRadius,startTheta=e.startTheta,middleTheta=e.middleTheta,endTheta=e.endTheta,e.sliceAngle<120?(e.titleRadius=.57*r,n=.9):e.sliceAngle<180?(e.titleRadius=.52*r,n=.91):(e.titleRadius=.45*r,n=.873),slicePathString=[e.MoveTo(e.middleAngle,.07*r),["L",.07*r*Math.cos(middleTheta)+.87*r*Math.cos(startTheta)+x,.07*r*Math.sin(middleTheta)+.87*r*Math.sin(startTheta)+y],["A",r*n,r*n,0,0,1,.07*r*Math.cos(middleTheta)+.87*r*Math.cos(endTheta)+x,.07*r*Math.sin(middleTheta)+.87*r*Math.sin(endTheta)+y],e.Close()],linePathString=[e.MoveTo(e.startAngle,r),e.ArcTo(r,e.endAngle,r),e.ArcBackTo(r,e.startAngle,r)],e.setTitlePos(),{slicePathString:slicePathString,linePathString:linePathString,titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.OuterStrokeSlice=function(e,t,i){return e.setBaseValue(t,i),x=e.centerX,y=e.centerY,r=e.sliceRadius,innerRadius=r/4,e.sliceAngle<120?e.titleRadius=.57*r:e.sliceAngle<180?e.titleRadius=.52*r:e.titleRadius=.45*r,linePathString=[e.MoveTo(e.startAngle,innerRadius),e.LineTo(e.startAngle,r),e.MoveTo(e.endAngle,innerRadius),e.LineTo(e.endAngle,r)],slicePathString=[e.MoveTo(e.startAngle,r),e.ArcTo(r,e.endAngle,r),e.ArcBackTo(r,e.startAngle,r),e.MoveTo(e.startAngle,innerRadius),e.ArcTo(innerRadius,e.endAngle,innerRadius),e.ArcBackTo(innerRadius,e.startAngle,innerRadius)],e.setTitlePos(),{slicePathString:slicePathString,linePathString:linePathString,titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.TabSlice=function(e,t,i){var n=.9*e.wheelRadius,r=2*n/(360/e.sliceAngle);return x=e.centerX,y=e.centerY,itemIndex=e.itemIndex,titlePosX=x,titlePosY=itemIndex*r+y+r/2-n,slicePathString=[["M",x-r/2,itemIndex*r+y-n],["L",r/2+x,itemIndex*r+y-n],["L",r/2+x,(itemIndex+1)*r+y-n],["L",x-r/2,(itemIndex+1)*r+y-n],["z"]],{slicePathString:slicePathString,linePathString:"",titlePosX:titlePosX,titlePosY:titlePosY}},this.YinYangSlice=function(e,t,i){return e.setBaseValue(t,i),r=e.sliceRadius,slicePathString=[e.MoveToCenter(),e.ArcTo(r/2,e.startAngle,r),e.ArcTo(r,e.endAngle,r),e.ArcBackTo(r/2,0,0),e.Close()],titlePosX=e.getX(e.startAngle,r/2),titlePosY=e.getY(e.startAngle,r/2),{slicePathString:slicePathString,linePathString:slicePathString,titlePosX:titlePosX,titlePosY:titlePosY}},this.WebSlice=function(e,t,i){return e.setBaseValue(t,i),r=e.sliceRadius,e.titleRadius=.55*r,e.setTitlePos(),linePathString=[e.MoveToCenter(),e.LineTo(e.startAngle,1.1*r),e.MoveToCenter(),e.LineTo(e.endAngle,1.1*r),e.MoveTo(e.startAngle,.15*r),e.LineTo(e.endAngle,.15*r),e.MoveTo(e.startAngle,.35*r),e.LineTo(e.endAngle,.35*r),e.MoveTo(e.startAngle,.55*r),e.LineTo(e.endAngle,.55*r),e.MoveTo(e.startAngle,.75*r),e.LineTo(e.endAngle,.75*r),e.MoveTo(e.startAngle,.95*r),e.LineTo(e.endAngle,.95*r),e.Close()],{slicePathString:"",linePathString:linePathString,titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.WinterSliceCustomization=function(){var e=new slicePathCustomization;return e.titleRadiusPercent=.85,e.arcRadiusPercent=1,e},this.WinterSlice=function(e,t,i){null===i&&(i=WinterSliceCustomization()),e.setBaseValue(t,i),sliceAngle=e.sliceAngle,parallelAngle=e.startAngle+sliceAngle/4,parallelAngle2=e.startAngle+sliceAngle/4*3,borderAngle1=e.startAngle+sliceAngle/200,borderAngle2=e.startAngle+sliceAngle/2-sliceAngle/200,borderAngle3=e.startAngle+sliceAngle/2+sliceAngle/200,borderAngle4=e.startAngle+sliceAngle-sliceAngle/200;var n=e.sliceRadius*i.arcRadiusPercent;return slicePathString=[e.MoveToCenter(),e.MoveTo(parallelAngle,n/100),e.LineTo(borderAngle1,n/2),e.LineTo(parallelAngle,n-n/100),e.LineTo(borderAngle2,n/2),e.LineTo(parallelAngle,n/100),e.MoveTo(parallelAngle2,n/100),e.LineTo(borderAngle4,n/2),e.LineTo(parallelAngle2,n-n/100),e.LineTo(borderAngle3,n/2),e.LineTo(parallelAngle2,n/100),e.Close()],linePathString=[e.MoveTo(parallelAngle,n),e.LineTo(borderAngle2,n/2),e.MoveTo(borderAngle3,n/2),e.LineTo(parallelAngle2,n)],{slicePathString:slicePathString,linePathString:linePathString,titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.TutorialSliceCustomization=function(){var e=new slicePathCustomization;return e.titleRadiusPercent=.6,e.isMoveTo=!1,e.isLineTo=!1,e.isArcTo=!1,e.isArcBackTo=!1,e},this.TutorialSlice=function(e,t,i){return null===i&&(i=TutorialSliceCustomization()),e.setBaseValue(t,i),slicePathString=[],slicePathString.push(e.MoveToCenter()),!0===i.isMoveTo&&slicePathString.push(e.MoveTo(e.middleAngle,e.sliceRadius/4)),i.isLineTo&&slicePathString.push(e.LineTo(e.startAngle,e.sliceRadius)),i.isArcTo&&slicePathString.push(e.ArcTo(e.sliceRadius,e.middleAngle,e.sliceRadius)),i.isArcBackTo&&slicePathString.push(e.ArcBackTo(e.sliceRadius,e.endAngle,e.sliceRadius)),slicePathString.push(e.Close()),linePathString=[e.MoveToCenter(),e.LineTo(e.startAngle,e.sliceRadius),e.ArcTo(e.sliceRadius,e.endAngle,e.sliceRadius),e.Close()],{slicePathString:slicePathString,linePathString:linePathString,titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this}},function(e,t){var n,a;wheelnav=function(e,t,i,n){var r,o,s,l;if(this.holderId="wheel",void 0!==e&&null!==e&&(this.holderId=e),(null===(r=document.getElementById(e))||void 0===r)&&(void 0===t||null===t))return this;if(!0,void 0===t||null===t){for(s=[],l=0;l<r.children.length;l++)"svg"===r.children[l].localName&&s.push(r.children[l]);for(l=0;l<s.length;l++)r.removeChild(s[l]);void 0!==i&&null!==i?((void 0===n||null===n)&&(n=i),this.raphael=new Raphael(e,i,n),o=i):(this.raphael=new Raphael(e),o=r.clientWidth),this.raphael.setViewBox(0,0,this.raphael.width,this.raphael.height,!0)}else this.raphael=t,o=this.raphael.width,!1;return this.centerX=o/2,this.centerY=o/2,this.wheelRadius=o/2,this.navAngle=0,this.sliceAngle=null,this.titleRotateAngle=null,this.initTitleRotate=!1,this.clickModeRotate=!0,this.rotateRound=!1,this.rotateRoundCount=0,this.clickModeSpreadOff=!1,this.animatetimeCalculated=!1,this.animateRepeatCount=0,this.clockwise=!0,this.multiSelect=!1,this.hoverPercent=1,this.selectedPercent=1,this.clickablePercentMin=0,this.clickablePercentMax=1,this.currentPercent=null,this.cssMode=!1,this.selectedToFront=!0,this.selectedNavItemIndex=0,this.navItemCount=0,this.navItemCountLabeled=!1,this.navItemCountLabelOffset=0,this.navItems=[],this.navItemsEnabled=!0,this.animateFinishFunction=null,this.navItemsContinuous=!1,this.navItemsCentered=!0,this.colors=a.defaultpalette,this.titleSpreadScale=null,this.spreaderEnable=!1,this.spreaderRadius=20,this.spreaderStartAngle=0,this.spreaderSliceAngle=360,this.spreaderPathFunction=spreaderPath().PieSpreader,this.spreaderPathCustom=null,this.spreaderInPercent=1,this.spreaderOutPercent=1,this.spreaderInTitle="+",this.spreaderOutTitle="-",this.spreaderTitleFont=null,this.spreaderPathInAttr=null,this.spreaderPathOutAttr=null,this.spreaderTitleInAttr=null,this.spreaderTitleOutAttr=null,this.spreaderInTitleWidth=null,this.spreaderInTitleHeight=null,this.spreaderOutTitleWidth=null,this.spreaderOutTitleHeight=null,this.minPercent=.01,this.maxPercent=1,this.initPercent=1,this.markerEnable=!1,this.markerPathFunction=markerPath().TriangleMarker,this.markerPathCustom=null,this.currentClick=0,this.animateLocked=!1,this.slicePathAttr=null,this.sliceHoverAttr=null,this.sliceSelectedAttr=null,this.titleFont="100 24px Impact, Charcoal, sans-serif",this.titleAttr=null,this.titleHoverAttr=null,this.titleSelectedAttr=null,this.titleWidth=null,this.titleHeight=null,this.titleHoverWidth=null,this.titleHoverHeight=null,this.titleSelectedWidth=null,this.titleSelectedHeight=null,this.linePathAttr=null,this.lineHoverAttr=null,this.lineSelectedAttr=null,this.slicePathCustom=null,this.sliceClickablePathCustom=null,this.sliceSelectedPathCustom=null,this.sliceHoverPathCustom=null,this.sliceInitPathCustom=null,this.sliceTransformCustom=null,this.sliceSelectedTransformCustom=null,this.sliceHoverTransformCustom=null,this.sliceInitTransformCustom=null,this.animateeffect=null,this.animatetime=null,this.slicePathFunction=void 0!==slicePath().PieSlice?slicePath().PieSlice:slicePath().NullSlice,this.sliceClickablePathFunction=null,this.sliceTransformFunction=null,this.sliceSelectedPathFunction=null,this.sliceSelectedTransformFunction=null,this.sliceHoverPathFunction=null,this.sliceHoverTransformFunction=null,this.sliceInitPathFunction=null,this.sliceInitTransformFunction=null,this.parseWheel(r),this},wheelnav.prototype.initWheel=function(e){var t,n,r;for(this.styleWheel(),0===this.navItemCount?(void 0!==e&&null!==e&&Array.isArray(e)||(e=["title-0","title-1","title-2","title-3"]),this.navItemCount=e.length):e=null,i=0;i<this.navItemCount;i++)"",n=this.navItemCountLabeled?(i+this.navItemCountLabelOffset).toString():null!==e?e[i]:"",t=new wheelnavItem(this,n,i),this.navItems.push(t);for(r=0,i=0;i<this.navItems.length;i++)this.navItems[i].fillAttr=this.colors[r],++r===this.colors.length&&(r=0)},wheelnav.prototype.createWheel=function(e,t){for(null===this.currentPercent&&(this.currentPercent=t?this.minPercent:this.maxPercent),0===this.navItems.length&&this.initWheel(e),null!==this.selectedNavItemIndex&&(this.navItems[this.selectedNavItemIndex].selected=!0),i=0;i<this.navItemCount;i++)this.navItems[i].createNavItem();return this.spreader=new spreader(this),this.marker=new marker(this),this.refreshWheel(),void 0!==t&&this.spreadWheel(),this},wheelnav.prototype.refreshWheel=function(e){for(i=0;i<this.navItemCount;i++){var t=this.navItems[i];t.setWheelSettings(e),t.refreshNavItem(e)}this.marker.setCurrentTransform(),this.spreader.setCurrentTransform()},wheelnav.prototype.navigateWheel=function(e){var t,n,r;for(this.animateUnlock(!0),this.clickModeRotate&&(this.animateLocked=!0),i=0;i<this.navItemCount;i++)(t=this.navItems[i]).hovered=!1,i===e?this.multiSelect?t.selected=!t.selected:(t.selected=!0,this.selectedNavItemIndex=i):this.multiSelect||(t.selected=!1),this.clickModeRotate&&(n=this.navItems[e].navAngle-this.navItems[this.currentClick].navAngle,this.rotateRound&&(this.clockwise&&n<0&&(n=360+n),!this.clockwise&&n>0&&(n-=360)),t.currentRotateAngle-=n,r=null!=this.animatetime?this.animatetime:1500,this.animatetimeCalculated&&e!==this.currentClick&&(t.animatetime=r*(Math.abs(n)/360)),this.rotateRoundCount>0&&(this.clockwise?t.currentRotateAngle-=360*this.rotateRoundCount:t.currentRotateAngle+=360*this.rotateRoundCount,t.animatetime=r*(this.rotateRoundCount+1)));for(i=0;i<this.navItemCount;i++)(t=this.navItems[i]).setCurrentTransform(!0,!0),t.refreshNavItem();this.currentClick=e,this.clickModeSpreadOff?(this.currentPercent=this.maxPercent,this.spreadWheel()):(null===e||this.clickModeRotate?this.marker.setCurrentTransform():this.marker.setCurrentTransform(this.navItems[this.currentClick].navAngle),this.spreader.setCurrentTransform(!0))},wheelnav.prototype.spreadWheel=function(){for(this.animateUnlock(!0),this.animateLocked=!0,this.currentPercent=this.currentPercent===this.maxPercent||null===this.currentPercent?this.minPercent:this.maxPercent,i=0;i<this.navItemCount;i++){var e=this.navItems[i];e.hovered=!1,e.setCurrentTransform(!0,!1)}return this.marker.setCurrentTransform(),this.spreader.setCurrentTransform(),this},wheelnav.prototype.animateUnlock=function(e,t){var i,n;if(void 0!==e&&!0===e)for(i=0;i<this.navItemCount;i++)this.navItems[i].navSliceUnderAnimation=!1,this.navItems[i].navTitleUnderAnimation=!1,this.navItems[i].navLineUnderAnimation=!1,this.navItems[i].navSlice.stop(),this.navItems[i].navLine.stop(),this.navItems[i].navTitle.stop();else{for(n=0;n<this.navItemCount;n++)if(!0===this.navItems[n].navSliceUnderAnimation||!0===this.navItems[n].navTitleUnderAnimation||!0===this.navItems[n].navLineUnderAnimation)return;this.animateLocked=!1,null!==this.animateFinishFunction&&void 0!==t&&!0===t&&this.animateFinishFunction()}},wheelnav.prototype.setTooltips=function(e){if(void 0!==e&&null!==e&&Array.isArray(e)&&e.length<=this.navItems.length)for(var t=0;t<e.length;t++)this.navItems[t].setTooltip(e[t])},wheelnav.prototype.getItemId=function(e){return"wheelnav-"+this.holderId+"-item-"+e},wheelnav.prototype.getSliceId=function(e){return"wheelnav-"+this.holderId+"-slice-"+e},wheelnav.prototype.getClickableSliceId=function(e){return"wheelnav-"+this.holderId+"-clickableslice-"+e},wheelnav.prototype.getTitleId=function(e){return"wheelnav-"+this.holderId+"-title-"+e},wheelnav.prototype.getLineId=function(e){return"wheelnav-"+this.holderId+"-line-"+e},wheelnav.prototype.getSpreaderId=function(){return"wheelnav-"+this.holderId+"-spreader"},wheelnav.prototype.getSpreaderTitleId=function(){return"wheelnav-"+this.holderId+"-spreadertitle"},wheelnav.prototype.getMarkerId=function(){return"wheelnav-"+this.holderId+"-marker"},wheelnav.prototype.parseWheel=function(e){var t,i,n,r,a,o,s,l,c,d,h;if(void 0!==e&&null!==e){if(e.hasAttribute("data-wheelnav")){var u=[],p=[],f=[],g=!1,m=e.getAttribute("data-wheelnav-slicepath");for(null!==m&&void 0!==slicePath()[m]&&(this.slicePathFunction=slicePath()[m]),null!==(t=e.getAttribute("data-wheelnav-colors"))&&(this.colors=t.split(",")),null!==(i=e.getAttribute("data-wheelnav-wheelradius"))&&(this.wheelRadius=Number(i)),null!==(n=e.getAttribute("data-wheelnav-navangle"))&&(this.navAngle=Number(n)),null!==e.getAttribute("data-wheelnav-rotateoff")&&(this.clickModeRotate=!1),null!==e.getAttribute("data-wheelnav-cssmode")&&(this.cssMode=!0),null!==e.getAttribute("data-wheelnav-spreader")&&(this.spreaderEnable=!0),null!==(r=e.getAttribute("data-wheelnav-spreaderradius"))&&(this.spreaderRadius=Number(r)),null!==(a=e.getAttribute("data-wheelnav-spreaderpath"))&&void 0!==markerPath()[a]&&(this.spreaderPathFunction=spreaderPath()[a]),null!==e.getAttribute("data-wheelnav-marker")&&(this.markerEnable=!0),null!==(o=e.getAttribute("data-wheelnav-markerpath"))&&void 0!==markerPath()[o]&&(this.markerPathFunction=markerPath()[o]),null!==(s=e.getAttribute("data-wheelnav-titlewidth"))&&(this.titleWidth=Number(s)),null!==(l=e.getAttribute("data-wheelnav-titleheight"))&&(this.titleHeight=Number(l)),null!==e.getAttribute("data-wheelnav-init")&&(g=!0),h=0;h<e.children.length;h++){var v=e.children[h].getAttribute("data-wheelnav-navitemtext"),_=e.children[h].getAttribute("data-wheelnav-navitemicon"),b=e.children[h].getAttribute("data-wheelnav-navitemimg");if(null!==v||null!==_||null!==b){if(null!==v)u.push(v);else if(null!==_)void 0!==icon[_]?u.push(icon[_]):u.push(_);else{if(null===b)continue;u.push("imgsrc:"+b)}for(void 0!==e.children[h].onmouseup?f.push(e.children[h].onmouseup):f.push(null),!1,c=0;c<e.children[h].children.length;c++)void 0!==e.children[h].children[c].getAttribute("href")&&p.push(e.children[h].children[c].getAttribute("href"));p.push(null)}}if(u.length>0){for(this.initWheel(u),h=0;h<f.length;h++)this.navItems[h].navigateFunction=f[h],this.navItems[h].navigateHref=p[h];g||this.createWheel()}}for(d=[],h=0;h<e.children.length;h++)"svg"!==e.children[h].localName&&d.push(e.children[h]);for(h=0;h<d.length;h++)e.removeChild(d[h])}},wheelnavItem=function(e,t,i){return this.wheelnav=e,this.wheelItemIndex=i,this.itemIndex=e.clockwise?i:-i,this.enabled=e.navItemsEnabled,this.selected=!1,this.hovered=!1,this.navItem=null,this.navSlice=null,this.navTitle=null,this.navLine=null,this.navClickableSlice=null,this.navSliceCurrentTransformString=null,this.navTitleCurrentTransformString=null,this.navLineCurrentTransformString=null,this.navSliceUnderAnimation=!1,this.navTitleUnderAnimation=!1,this.navLineUnderAnimation=!1,this.currentRotateAngle=0,this.title=void 0===t?null:t,this.titleHover=this.title,this.titleSelected=this.title,this.tooltip=null,this.fillAttr="#CCC",this.titleFont=this.wheelnav.titleFont,this.navigateHref=null,this.navigateFunction=null,this.titleWidth=null,this.titleHeight=null,this.titleHoverWidth=null,this.titleHoverHeight=null,this.titleSelectedWidth=null,this.titleSelectedHeight=null,this.animateeffect=null,this.animatetime=null,this.sliceInitPathFunction=null,this.sliceClickablePathFunction=null,this.slicePathFunction=null,this.sliceSelectedPathFunction=null,this.sliceHoverPathFunction=null,this.sliceTransformFunction=null,this.sliceSelectedTransformFunction=null,this.sliceHoverTransformFunction=null,this.sliceInitTransformFunction=null,this.slicePathCustom=null,this.sliceClickablePathCustom=null,this.sliceSelectedPathCustom=null,this.sliceHoverPathCustom=null,this.sliceInitPathCustom=null,this.sliceTransformCustom=null,this.sliceSelectedTransformCustom=null,this.sliceHoverTransformCustom=null,this.sliceInitTransformCustom=null,this.initPercent=null,this.minPercent=null,this.maxPercent=null,this.hoverPercent=null,this.selectedPercent=null,this.clickablePercentMin=null,this.clickablePercentMax=null,this.titleSpreadScale=null,this.sliceAngle=null,this.styleNavItem(),this},wheelnavItem.prototype.createNavItem=function(){var e,t,i,n,r;this.setWheelSettings(!1),null!==this.navigateHref&&(this.navigateFunction=function(){window.location.href=this.navigateHref}),this.wheelnav.cssMode||(this.slicePathAttr.fill=this.fillAttr,this.sliceHoverAttr.fill=this.fillAttr,this.sliceSelectedAttr.fill=this.fillAttr),this.enabled||(this.wheelnav.cssMode||(this.slicePathAttr.cursor="default",this.sliceHoverAttr.cursor="default",this.titleAttr.cursor="default",this.titleHoverAttr.cursor="default",this.linePathAttr.cursor="default",this.lineHoverAttr.cursor="default"),this.sliceClickablePathAttr.cursor="default",this.sliceClickableHoverAttr.cursor="default"),e=this.wheelItemIndex-1,t=360/this.wheelnav.navItemCount,null===this.sliceAngle&&(this.sliceAngle=360/this.wheelnav.navItemCount),this.wheelnav.clockwise?this.wheelnav.navItemsContinuous?this.baseAngle=0===this.itemIndex?this.itemIndex*this.sliceAngle+(-this.sliceAngle/2+this.wheelnav.navAngle):this.wheelnav.navItems[e].baseAngle+this.wheelnav.navItems[e].sliceAngle:this.wheelnav.navItemsCentered?this.baseAngle=this.itemIndex*t+(-this.sliceAngle/2+this.wheelnav.navAngle):(this.baseAngle=this.itemIndex*t+(-t/2+this.wheelnav.navAngle),this.currentRotateAngle+=t/2-this.wheelnav.navItems[0].sliceAngle/2):this.wheelnav.navItemsContinuous?this.baseAngle=0===this.itemIndex?this.itemIndex*this.sliceAngle+(-this.sliceAngle/2+this.wheelnav.navAngle):this.wheelnav.navItems[e].baseAngle-this.wheelnav.navItems[this.wheelItemIndex].sliceAngle:this.wheelnav.navItemsCentered?this.baseAngle=this.itemIndex*t+(-this.sliceAngle/2+this.wheelnav.navAngle):(this.baseAngle=this.itemIndex*t+(-t/2+this.wheelnav.navAngle)+(t-this.sliceAngle),this.currentRotateAngle-=t/2-this.wheelnav.navItems[0].sliceAngle/2),this.navAngle=this.baseAngle+this.sliceAngle/2,this.wheelnav.animatetimeCalculated&&(this.animatetime=this.wheelnav.animatetime/this.wheelnav.navItemCount),this.initPathsAndTransforms(),i=this.sliceInitPath,this.navSlice=this.wheelnav.raphael.path(i.slicePathString),this.navSlice.attr(this.slicePathAttr),this.navSlice.id=this.wheelnav.getSliceId(this.wheelItemIndex),this.navSlice.node.id=this.navSlice.id,this.navLine=this.wheelnav.raphael.path(i.linePathString),this.navLine.attr(this.linePathAttr),this.navLine.id=this.wheelnav.getLineId(this.wheelItemIndex),this.navLine.node.id=this.navLine.id,n=this.initNavTitle,this.navTitle=wheelnavTitle().isPathTitle(this.title)?this.wheelnav.raphael.path(n.path):wheelnavTitle().isImageTitle(this.title)?this.wheelnav.raphael.image(n.src,i.titlePosX-this.titleWidth/2,i.titlePosY-this.titleHeight/2,this.titleWidth,this.titleHeight):this.wheelnav.raphael.text(i.titlePosX,i.titlePosY,n.title),this.navTitle.attr(this.titleAttr),this.navTitle.id=this.wheelnav.getTitleId(this.wheelItemIndex),this.navTitle.node.id=this.navTitle.id,this.navSliceCurrentTransformString="",""!==this.initTransform.sliceTransformString&&(this.navSliceCurrentTransformString+=this.initTransform.sliceTransformString),this.navLineCurrentTransformString="",""!==this.initTransform.lineTransformString&&(this.navLineCurrentTransformString+=this.initTransform.lineTransformString),this.navTitleCurrentTransformString="",this.navTitleCurrentTransformString+=this.getTitleRotateString(this.wheelnav.initTitleRotate),""!==this.initTransform.titleTransformString&&(this.navTitleCurrentTransformString+=this.initTransform.titleTransformString),this.wheelnav.currentPercent<.05&&(this.navTitleCurrentTransformString+=",s0.05"),void 0!==this.navTitleSizeTransform&&(this.navTitleCurrentTransformString+=this.navTitleSizeTransform),this.navSlice.attr({transform:this.navSliceCurrentTransformString}),this.navLine.attr({transform:this.navLineCurrentTransformString}),this.navTitle.attr({transform:this.navTitleCurrentTransformString}),this.navItem=this.wheelnav.raphael.set(),null!==this.sliceClickablePathFunction?(r=this.getCurrentClickablePath(),this.navClickableSlice=this.wheelnav.raphael.path(r.slicePathString).attr(this.sliceClickablePathAttr).toBack(),this.navClickableSlice.id=this.wheelnav.getClickableSliceId(this.wheelItemIndex),this.navClickableSlice.node.id=this.navClickableSlice.id,this.navItem.push(this.navSlice,this.navLine,this.navTitle,this.navClickableSlice)):this.navItem.push(this.navSlice,this.navLine,this.navTitle),this.setTooltip(this.tooltip),this.navItem.id=this.wheelnav.getItemId(this.wheelItemIndex);var a=this.wheelnav,o=this,s=this.wheelItemIndex;this.enabled&&(this.navItem.mouseup((function(){null!==o.navigateFunction&&o.navigateFunction(),a.navigateWheel(s)})),this.navItem.mouseover((function(){!0!==o.hovered&&o.hoverEffect(s,!0)})),this.navItem.mouseout((function(){o.hovered=!1,o.hoverEffect(s,!1)}))),this.setCurrentTransform(!0,!1)},wheelnavItem.prototype.hoverEffect=function(e,t){!1===this.wheelnav.animateLocked&&(t&&(this.selected||(this.hovered=!0)),this.refreshNavItem(),(1!==this.hoverPercent||null!==this.sliceHoverPathFunction||null!==this.sliceHoverTransformFunction||this.titleHover!==this.title||this.titleHoverWidth!==this.titleWidth||this.titleHoverHeight!==this.titleHeight)&&this.setCurrentTransform(!1,!1),this.wheelnav.marker.setCurrentTransform(),this.wheelnav.spreader.setCurrentTransform(!0))},wheelnavItem.prototype.setCurrentTransform=function(e,t){var n,r,a,o,s,l,c,d,h,u,p,f,g;if(!this.wheelnav.clickModeRotate||!this.navSliceUnderAnimation&&!this.navTitleUnderAnimation&&!this.navLineUnderAnimation)if(void 0!==e&&!0===e&&(this.navSliceUnderAnimation=!0,this.navTitleUnderAnimation=!0,this.navLineUnderAnimation=!0),this.navSliceCurrentTransformString="",this.wheelnav.clickModeRotate&&(this.navSliceCurrentTransformString+=this.getItemRotateString()),this.selected?void 0!==this.selectTransform.sliceTransformString&&(this.navSliceCurrentTransformString+=this.selectTransform.sliceTransformString):this.hovered&&void 0!==this.hoverTransform.sliceTransformString&&(this.navSliceCurrentTransformString+=this.hoverTransform.sliceTransformString),void 0!==this.sliceTransform.sliceTransformString&&(this.navSliceCurrentTransformString+=this.sliceTransform.sliceTransformString),this.navLineCurrentTransformString="",this.wheelnav.clickModeRotate&&(this.navLineCurrentTransformString+=this.getItemRotateString()),this.selected?void 0!==this.selectTransform.lineTransformString&&(this.navLineCurrentTransformString+=this.selectTransform.lineTransformString):this.hovered&&void 0!==this.hoverTransform.lineTransformString&&(this.navLineCurrentTransformString+=this.hoverTransform.lineTransformString),void 0!==this.sliceTransform.lineTransformString&&(this.navLineCurrentTransformString+=this.sliceTransform.lineTransformString),this.navTitleCurrentTransformString="",this.navTitleCurrentTransformString+=this.getTitleRotateString(!0),this.selected?(void 0!==this.navTitleSizeSelectedTransform&&(this.navTitleCurrentTransformString+=this.navTitleSizeSelectedTransform),this.navTitleCurrentTransformString+=""===this.selectTransform.titleTransformString||void 0===this.selectTransform.titleTransformString?",s1":","+this.selectTransform.titleTransformString,this.wheelnav.currentPercent<.05&&(this.navTitleCurrentTransformString+=",s0.05")):this.hovered?(void 0!==this.navTitleSizeHoverTransform&&(this.navTitleCurrentTransformString+=this.navTitleSizeHoverTransform),this.navTitleCurrentTransformString+=""===this.hoverTransform.titleTransformString||void 0===this.hoverTransform.titleTransformString?",s1":","+this.hoverTransform.titleTransformString):this.wheelnav.currentPercent<.05?this.navTitleCurrentTransformString+=",s0.05":this.titleSpreadScale?this.navTitleCurrentTransformString+=",s"+this.wheelnav.currentPercent:(void 0!==this.navTitleSizeTransform&&(this.navTitleCurrentTransformString+=this.navTitleSizeTransform),this.navTitleCurrentTransformString+=""===this.sliceTransform.titleTransformString||void 0===this.sliceTransform.titleTransformString?",s1":","+this.sliceTransform.titleTransformString),{},r={path:(n=this.getCurrentPath()).slicePathString,transform:this.navSliceCurrentTransformString},a={},null!==this.sliceClickablePathFunction&&(a={path:this.getCurrentClickablePath().slicePathString,transform:this.navSliceCurrentTransformString}),{},o={path:n.linePathString,transform:this.navLineCurrentTransformString},s=this.getCurrentTitle(),l={},wheelnavTitle().isPathTitle(s.title)?l={path:s.path,transform:this.navTitleCurrentTransformString}:wheelnavTitle().isImageTitle(s.title)?(l={x:s.x,y:s.y,width:s.width,height:s.height,transform:this.navTitleCurrentTransformString},this.navTitle.attr({src:s.src})):(l={x:s.x,y:s.y,transform:this.navTitleCurrentTransformString},null!==s.title&&this.navTitle.attr({text:s.title})),c=this,d=this.wheelnav,this.animSlice=Raphael.animation(r,this.animatetime,this.animateeffect,(function(){c.navSliceUnderAnimation=!1,d.animateUnlock(!1,t)})),this.animLine=Raphael.animation(o,this.animatetime,this.animateeffect,(function(){c.navLineUnderAnimation=!1,d.animateUnlock(!1,t)})),this.animTitle=Raphael.animation(l,this.animatetime,this.animateeffect,(function(){c.navTitleUnderAnimation=!1,d.animateUnlock(!1,t)})),null!==this.navClickableSlice&&(this.animClickableSlice=Raphael.animation(a,this.animatetime,this.animateeffect)),h=this.wheelnav.animateRepeatCount,void 0!==e&&!0===e){if(this.wheelItemIndex===this.wheelnav.navItemCount-1){for(i=0;i<this.wheelnav.navItemCount;i++)(u=this.wheelnav.navItems[i]).navSlice.animate(u.animSlice.repeat(h));for(i=0;i<this.wheelnav.navItemCount;i++)(p=this.wheelnav.navItems[i]).navLine.animate(p.animLine.repeat(h));for(i=0;i<this.wheelnav.navItemCount;i++)(f=this.wheelnav.navItems[i]).navTitle.animate(f.animTitle.repeat(h));if(null!==this.wheelnav.sliceClickablePathFunction)for(i=0;i<this.wheelnav.navItemCount;i++)null!==(g=this.wheelnav.navItems[i]).navClickableSlice&&g.navClickableSlice.animate(g.animClickableSlice.repeat(h))}}else this.navSlice.animate(this.animSlice.repeat(h)),this.navLine.animate(this.animLine.repeat(h)),this.navTitle.animate(this.animTitle.repeat(h)),null!==this.navClickableSlice&&this.navClickableSlice.animate(this.animClickableSlice.repeat(h))},wheelnavItem.prototype.setTooltip=function(e){null!==e&&this.navItem.attr({title:e})},wheelnavItem.prototype.refreshNavItem=function(e){this.selected?(this.navSlice.attr(this.sliceSelectedAttr),this.navLine.attr(this.lineSelectedAttr),this.navTitle.attr(this.titleSelectedAttr),null!==this.navClickableSlice&&this.navClickableSlice.attr(this.sliceClickableSelectedAttr),this.wheelnav.selectedToFront?(this.navSlice.toFront(),this.navLine.toFront(),this.navTitle.toFront(),null!==this.navClickableSlice&&this.navClickableSlice.toFront()):(null!==this.navClickableSlice&&this.navClickableSlice.toBack(),this.navTitle.toBack(),this.navLine.toBack(),this.navSlice.toBack())):this.hovered?(this.navSlice.attr(this.sliceHoverAttr).toFront(),this.navLine.attr(this.lineHoverAttr).toFront(),this.navTitle.attr(this.titleHoverAttr).toFront(),null!==this.navClickableSlice&&this.navClickableSlice.attr(this.sliceClickableHoverAttr).toFront()):(this.navSlice.attr(this.slicePathAttr),this.navLine.attr(this.linePathAttr),this.navTitle.attr(this.titleAttr),null!==this.navClickableSlice&&this.navClickableSlice.attr(this.sliceClickablePathAttr),null!==this.navClickableSlice&&this.navClickableSlice.toBack(),this.navTitle.toBack(),this.navLine.toBack(),this.navSlice.toBack()),void 0!==e&&!0===e&&(this.initPathsAndTransforms(),this.setCurrentTransform(!1,!1))},wheelnavItem.prototype.setWheelSettings=function(e){null!==this.wheelnav.slicePathAttr&&(this.slicePathAttr=JSON.parse(JSON.stringify(this.wheelnav.slicePathAttr))),null!==this.wheelnav.sliceHoverAttr&&(this.sliceHoverAttr=JSON.parse(JSON.stringify(this.wheelnav.sliceHoverAttr))),null!==this.wheelnav.sliceSelectedAttr&&(this.sliceSelectedAttr=JSON.parse(JSON.stringify(this.wheelnav.sliceSelectedAttr))),null!==this.wheelnav.titleAttr&&(this.titleAttr=JSON.parse(JSON.stringify(this.wheelnav.titleAttr))),null!==this.wheelnav.titleHoverAttr&&(this.titleHoverAttr=JSON.parse(JSON.stringify(this.wheelnav.titleHoverAttr))),null!==this.wheelnav.titleSelectedAttr&&(this.titleSelectedAttr=JSON.parse(JSON.stringify(this.wheelnav.titleSelectedAttr))),null!==this.wheelnav.titleWidth&&null===this.titleWidth&&(this.titleWidth=this.wheelnav.titleWidth),null!==this.wheelnav.titleHeight&&null===this.titleHeight&&(this.titleHeight=this.wheelnav.titleHeight),null!==this.titleWidth&&null===this.titleHeight&&(this.titleHeight=this.titleWidth),null===this.titleWidth&&null!==this.titleHeight&&(this.titleWidth=this.titleHeight),wheelnavTitle().isImageTitle(this.title)&&(null===this.titleWidth&&(this.titleWidth=32),null===this.titleHeight&&(this.titleHeight=32)),null!==this.wheelnav.titleHoverWidth&&null===this.titleHoverWidth&&(this.titleHoverWidth=this.wheelnav.titleHoverWidth),null!==this.wheelnav.titleHoverHeight&&null===this.titleHoverHeight&&(this.titleHoverHeight=this.wheelnav.titleHoverHeight),null!==this.titleHoverWidth&&null===this.titleHoverHeight&&(this.titleHoverHeight=this.titleHoverWidth),null===this.titleHoverWidth&&null!==this.titleHoverHeight&&(this.titleHoverWidth=this.titleHoverHeight),null!==this.wheelnav.titleSelectedWidth&&null===this.titleSelectedWidth&&(this.titleSelectedWidth=this.wheelnav.titleSelectedWidth),null!==this.wheelnav.titleSelectedHeight&&null===this.titleSelectedHeight&&(this.titleSelectedHeight=this.wheelnav.titleSelectedHeight),null!==this.titleSelectedWidth&&null===this.titleSelectedHeight&&(this.titleSelectedHeight=this.titleSelectedWidth),null===this.titleSelectedWidth&&null!==this.titleSelectedHeight&&(this.titleSelectedWidth=this.titleSelectedHeight),null===this.titleHoverHeight&&(this.titleHoverHeight=this.titleHeight),null===this.titleHoverWidth&&(this.titleHoverWidth=this.titleWidth),null===this.titleSelectedHeight&&(this.titleSelectedHeight=this.titleHeight),null===this.titleSelectedWidth&&(this.titleSelectedWidth=this.titleWidth),null!==this.wheelnav.linePathAttr&&(this.linePathAttr=JSON.parse(JSON.stringify(this.wheelnav.linePathAttr))),null!==this.wheelnav.lineHoverAttr&&(this.lineHoverAttr=JSON.parse(JSON.stringify(this.wheelnav.lineHoverAttr))),null!==this.wheelnav.lineSelectedAttr&&(this.lineSelectedAttr=JSON.parse(JSON.stringify(this.wheelnav.lineSelectedAttr))),(null===this.animateeffect||e)&&(this.animateeffect=null!==this.wheelnav.animateeffect?this.wheelnav.animateeffect:"bounce"),(null===this.animatetime||e)&&(this.animatetime=null!==this.wheelnav.animatetime?this.wheelnav.animatetime:1500),null!==this.title?((null===this.sliceInitPathFunction||e)&&(this.sliceInitPathFunction=this.wheelnav.sliceInitPathFunction),(null===this.sliceClickablePathFunction||e)&&(this.sliceClickablePathFunction=this.wheelnav.sliceClickablePathFunction),(null===this.slicePathFunction||e)&&(this.slicePathFunction=this.wheelnav.slicePathFunction),(null===this.sliceSelectedPathFunction||e)&&(this.sliceSelectedPathFunction=this.wheelnav.sliceSelectedPathFunction),(null===this.sliceHoverPathFunction||e)&&(this.sliceHoverPathFunction=this.wheelnav.sliceHoverPathFunction),(null===this.sliceTransformFunction||e)&&(this.sliceTransformFunction=this.wheelnav.sliceTransformFunction),(null===this.sliceSelectedTransformFunction||e)&&(this.sliceSelectedTransformFunction=this.wheelnav.sliceSelectedTransformFunction),(null===this.sliceHoverTransformFunction||e)&&(this.sliceHoverTransformFunction=this.wheelnav.sliceHoverTransformFunction),(null===this.sliceInitTransformFunction||e)&&(this.sliceInitTransformFunction=this.wheelnav.sliceInitTransformFunction)):(this.sliceInitPathFunction=slicePath().NullInitSlice,this.sliceClickablePathFunction=slicePath().NullSlice,this.slicePathFunction=slicePath().NullSlice,this.sliceSelectedPathFunction=null,this.sliceHoverPathFunction=null,this.sliceTransformFunction=null,this.sliceSelectedTransformFunction=null,this.sliceHoverTransformFunction=null,this.sliceInitTransformFunction=null),(null===this.slicePathCustom||e)&&(this.slicePathCustom=this.wheelnav.slicePathCustom),(null===this.sliceClickablePathCustom||e)&&(this.sliceClickablePathCustom=this.wheelnav.sliceClickablePathCustom),(null===this.sliceSelectedPathCustom||e)&&(this.sliceSelectedPathCustom=this.wheelnav.sliceSelectedPathCustom),(null===this.sliceHoverPathCustom||e)&&(this.sliceHoverPathCustom=this.wheelnav.sliceHoverPathCustom),(null===this.sliceInitPathCustom||e)&&(this.sliceInitPathCustom=this.wheelnav.sliceInitPathCustom),(null===this.sliceTransformCustom||e)&&(this.sliceTransformCustom=this.wheelnav.sliceTransformCustom),(null===this.sliceSelectedTransformCustom||e)&&(this.sliceSelectedTransformCustom=this.wheelnav.sliceSelectedTransformCustom),(null===this.sliceHoverTransformCustom||e)&&(this.sliceHoverTransformCustom=this.wheelnav.sliceHoverTransformCustom),(null===this.sliceInitTransformCustom||e)&&(this.sliceInitTransformCustom=this.wheelnav.sliceInitTransformCustom),(null===this.initPercent||e)&&(this.initPercent=this.wheelnav.initPercent),(null===this.minPercent||e)&&(this.minPercent=this.wheelnav.minPercent),(null===this.maxPercent||e)&&(this.maxPercent=this.wheelnav.maxPercent),(null===this.hoverPercent||e)&&(this.hoverPercent=this.wheelnav.hoverPercent),(null===this.selectedPercent||e)&&(this.selectedPercent=this.wheelnav.selectedPercent),(null===this.clickablePercentMin||e)&&(this.clickablePercentMin=this.wheelnav.clickablePercentMin),(null===this.clickablePercentMax||e)&&(this.clickablePercentMax=this.wheelnav.clickablePercentMax),(null===this.titleSpreadScale||e)&&(this.titleSpreadScale=null!==this.wheelnav.titleSpreadScale&&this.wheelnav.titleSpreadScale),(null===this.sliceAngle||e)&&null!==this.wheelnav.sliceAngle&&(this.sliceAngle=this.wheelnav.sliceAngle)},wheelnavItem.prototype.initPathsAndTransforms=function(){this.sliceHelper=new o,this.sliceHelper.centerX=this.wheelnav.centerX,this.sliceHelper.centerY=this.wheelnav.centerY,this.sliceHelper.wheelRadius=this.wheelnav.wheelRadius,this.sliceHelper.startAngle=this.baseAngle,this.sliceHelper.sliceAngle=this.sliceAngle,this.sliceHelper.itemIndex=this.itemIndex,this.slicePathMin=this.slicePathFunction(this.sliceHelper,this.minPercent,this.slicePathCustom),this.slicePathMax=this.slicePathFunction(this.sliceHelper,this.maxPercent,this.slicePathCustom),this.selectedSlicePathMin=null!==this.sliceSelectedPathFunction?this.sliceSelectedPathFunction(this.sliceHelper,this.selectedPercent*this.minPercent,this.sliceSelectedPathCustom):this.slicePathFunction(this.sliceHelper,this.selectedPercent*this.minPercent,this.sliceSelectedPathCustom),this.selectedSlicePathMax=null!==this.sliceSelectedPathFunction?this.sliceSelectedPathFunction(this.sliceHelper,this.selectedPercent*this.maxPercent,this.sliceSelectedPathCustom):this.slicePathFunction(this.sliceHelper,this.selectedPercent*this.maxPercent,this.sliceSelectedPathCustom),this.hoverSlicePathMin=null!==this.sliceHoverPathFunction?this.sliceHoverPathFunction(this.sliceHelper,this.hoverPercent*this.minPercent,this.sliceHoverPathCustom):this.slicePathFunction(this.sliceHelper,this.hoverPercent*this.minPercent,this.sliceHoverPathCustom),this.hoverSlicePathMax=null!==this.sliceHoverPathFunction?this.sliceHoverPathFunction(this.sliceHelper,this.hoverPercent*this.maxPercent,this.sliceHoverPathCustom):this.slicePathFunction(this.sliceHelper,this.hoverPercent*this.maxPercent,this.sliceHoverPathCustom),null!==this.sliceClickablePathFunction&&(this.clickableSlicePathMin=this.sliceClickablePathFunction(this.sliceHelper,this.clickablePercentMin,this.sliceClickablePathCustom),this.clickableSlicePathMax=this.sliceClickablePathFunction(this.sliceHelper,this.clickablePercentMax,this.sliceClickablePathCustom)),this.sliceInitPath=null!==this.sliceInitPathFunction?this.sliceInitPathFunction(this.sliceHelper,this.initPercent,this.sliceInitPathCustom):this.wheelnav.currentPercent===this.wheelnav.maxPercent?this.slicePathFunction(this.sliceHelper,this.maxPercent,this.sliceInitPathCustom):this.slicePathFunction(this.sliceHelper,this.minPercent,this.sliceInitPathCustom),this.sliceTransform=null!==this.sliceTransformFunction?this.sliceTransformFunction(this.wheelnav.centerX,this.wheelnav.centerY,this.wheelnav.wheelRadius,this.baseAngle,this.sliceAngle,this.wheelnav.titleRotateAngle,this.itemIndex,this.sliceTransformCustom):n().NullTransform,this.selectTransform=null!==this.sliceSelectedTransformFunction?this.sliceSelectedTransformFunction(this.wheelnav.centerX,this.wheelnav.centerY,this.wheelnav.wheelRadius,this.baseAngle,this.sliceAngle,this.wheelnav.titleRotateAngle,this.itemIndex,this.sliceSelectedTransformCustom):n().NullTransform,this.hoverTransform=null!==this.sliceHoverTransformFunction?this.sliceHoverTransformFunction(this.wheelnav.centerX,this.wheelnav.centerY,this.wheelnav.wheelRadius,this.baseAngle,this.sliceAngle,this.wheelnav.titleRotateAngle,this.itemIndex,this.sliceHoverTransformCustom):n().NullTransform,this.initTransform=null!==this.sliceInitTransformFunction?this.sliceInitTransformFunction(this.wheelnav.centerX,this.wheelnav.centerY,this.wheelnav.wheelRadius,this.baseAngle,this.sliceAngle,this.wheelnav.titleRotateAngle,this.itemIndex,this.sliceInitTransformCustom):n().NullTransform,wheelnavTitle().isPathTitle(this.title)?(initNavTitle=new wheelnavTitle(this.title,this.wheelnav.raphael.raphael),basicNavTitleMin=new wheelnavTitle(this.title,this.wheelnav.raphael.raphael),basicNavTitleMax=new wheelnavTitle(this.title,this.wheelnav.raphael.raphael),hoverNavTitleMin=new wheelnavTitle(this.titleHover,this.wheelnav.raphael.raphael),hoverNavTitleMax=new wheelnavTitle(this.titleHover,this.wheelnav.raphael.raphael),selectedNavTitleMin=new wheelnavTitle(this.titleSelected,this.wheelnav.raphael.raphael),selectedNavTitleMax=new wheelnavTitle(this.titleSelected,this.wheelnav.raphael.raphael),this.navTitleSizeTransform=basicNavTitleMax.getTitleSizeTransform(this.titleWidth,this.titleHeight),this.navTitleSizeHoverTransform=hoverNavTitleMax.getTitleSizeTransform(this.titleHoverWidth,this.titleHoverHeight),this.navTitleSizeSelectedTransform=selectedNavTitleMax.getTitleSizeTransform(this.titleSelectedWidth,this.titleSelectedHeight)):(initNavTitle=new wheelnavTitle(this.title),basicNavTitleMin=new wheelnavTitle(this.title),basicNavTitleMax=new wheelnavTitle(this.title),hoverNavTitleMin=new wheelnavTitle(this.titleHover),hoverNavTitleMax=new wheelnavTitle(this.titleHover),selectedNavTitleMin=new wheelnavTitle(this.titleSelected),selectedNavTitleMax=new wheelnavTitle(this.titleSelected)),this.initNavTitle=initNavTitle.getTitlePercentAttr(this.sliceInitPath.titlePosX,this.sliceInitPath.titlePosY,this.titleWidth,this.titleHeight),this.basicNavTitleMin=basicNavTitleMin.getTitlePercentAttr(this.slicePathMin.titlePosX,this.slicePathMin.titlePosY,this.titleWidth,this.titleHeight),this.basicNavTitleMax=basicNavTitleMax.getTitlePercentAttr(this.slicePathMax.titlePosX,this.slicePathMax.titlePosY,this.titleWidth,this.titleHeight),this.hoverNavTitleMin=hoverNavTitleMin.getTitlePercentAttr(this.hoverSlicePathMin.titlePosX,this.hoverSlicePathMin.titlePosY,this.titleHoverWidth,this.titleHoverHeight),this.hoverNavTitleMax=hoverNavTitleMax.getTitlePercentAttr(this.hoverSlicePathMax.titlePosX,this.hoverSlicePathMax.titlePosY,this.titleHoverWidth,this.titleHoverHeight),this.selectedNavTitleMin=selectedNavTitleMin.getTitlePercentAttr(this.selectedSlicePathMin.titlePosX,this.selectedSlicePathMin.titlePosY,this.titleSelectedWidth,this.titleSelectedHeight),this.selectedNavTitleMax=selectedNavTitleMax.getTitlePercentAttr(this.selectedSlicePathMax.titlePosX,this.selectedSlicePathMax.titlePosY,this.titleSelectedWidth,this.titleSelectedHeight)},wheelnavItem.prototype.getCurrentPath=function(){return this.wheelnav.currentPercent===this.wheelnav.maxPercent?this.selected?this.selectedSlicePathMax:this.hovered?this.hoverSlicePathMax:this.slicePathMax:this.selected?this.selectedSlicePathMin:this.hovered?this.hoverSlicePathMin:this.slicePathMin},wheelnavItem.prototype.getCurrentClickablePath=function(){return this.wheelnav.currentPercent===this.wheelnav.maxPercent?this.clickableSlicePathMax:this.clickableSlicePathMin},wheelnavItem.prototype.getCurrentTitle=function(){return this.wheelnav.currentPercent===this.wheelnav.maxPercent?this.selected?this.selectedNavTitleMax:this.hovered?this.hoverNavTitleMax:this.basicNavTitleMax:this.selected?this.selectedNavTitleMin:this.hovered?this.hoverNavTitleMin:this.basicNavTitleMin},wheelnavItem.prototype.getItemRotateString=function(){return"r,"+this.currentRotateAngle.toString()+","+this.wheelnav.centerX+","+this.wheelnav.centerY},wheelnavItem.prototype.getTitleRotateString=function(e){var t="";return(t+=this.getItemRotateString())+(null!==this.wheelnav.titleRotateAngle&&e?",r,"+(this.navAngle+this.wheelnav.titleRotateAngle).toString():",r,"+(-this.currentRotateAngle).toString())},wheelnavTitle=function(e,t){if(this.title=e,null!==e){if(void 0!==t){this.relativePath=t.pathToRelative(e);var i=t.pathBBox(this.relativePath);this.centerX=i.cx,this.centerY=i.cy,this.width=i.width,this.height=i.height,this.startX=this.relativePath[0][1],this.startY=this.relativePath[0][2]}this.title=e}else this.title="";return this.isPathTitle=function(e){return!(null===e||"m"!==e.substr(0,1)&&"M"!==e.substr(0,1)||"z"!==e.substr(e.length-1,1)&&"Z"!==e.substr(e.length-1,1))&&(e.indexOf(",")>-1||e.indexOf(" ")>-1)},this.isImageTitle=function(e){return void 0===e&&(e=this.title),null!==e&&"imgsrc:"===e.substr(0,7)},this},wheelnavTitle.prototype.getTitlePercentAttr=function(e,t,i,n){var r,a,o={};return void 0!==this.relativePath?(r=e+(this.startX-this.centerX),a=t+(this.startY-this.centerY),this.relativePath[0][1]=r,this.relativePath[0][2]=a,o={path:this.relativePath,title:this.title}):o=this.isImageTitle()?{x:e-i/2,y:t-n/2,width:i,height:n,title:this.title,src:this.title.substr(7,this.title.length)}:{x:e,y:t,title:this.title},o},wheelnavTitle.prototype.getTitleSizeTransform=function(e,t){var i="";return null!==e&&null!==t&&(i="s",this.height>this.width?(i+=(e/this.height).toString()+",",i+=(t/this.height).toString()):(i+=(e/this.width).toString()+",",i+=(t/this.width).toString())),i},wheelnav.prototype.styleWheel=function(){this.cssMode?(this.spreaderPathInAttr={class:this.getSpreaderCssClass("in")},this.spreaderPathOutAttr={class:this.getSpreaderCssClass("out")},this.spreaderTitleInAttr={class:this.getSpreaderTitleCssClass("in")},this.spreaderTitleOutAttr={class:this.getSpreaderTitleCssClass("out")},this.markerAttr={class:this.getMarkerCssClass()}):((void 0===this.spreaderPathInAttr||null===this.spreaderPathInAttr)&&(this.spreaderPathInAttr={fill:"#444",stroke:"#444","stroke-width":2,cursor:"pointer"}),(void 0===this.spreaderPathOutAttr||null===this.spreaderPathOutAttr)&&(this.spreaderPathOutAttr={fill:"#444",stroke:"#444","stroke-width":2,cursor:"pointer"}),(void 0===this.spreaderTitleInAttr||null===this.spreaderTitleInAttr)&&(this.spreaderTitleInAttr={fill:"#eee",stroke:"#444",cursor:"pointer"}),(void 0===this.spreaderTitleOutAttr||null===this.spreaderTitleOutAttr)&&(this.spreaderTitleOutAttr={fill:"#eee",stroke:"#444",cursor:"pointer"}),(void 0===this.markerAttr||null===this.markerAttr)&&(this.markerAttr={stroke:"#444","stroke-width":2}))},wheelnavItem.prototype.styleNavItem=function(){this.wheelnav.cssMode?(this.slicePathAttr={class:this.wheelnav.getSliceCssClass(this.wheelItemIndex,"basic")},this.sliceHoverAttr={class:this.wheelnav.getSliceCssClass(this.wheelItemIndex,"hover")},this.sliceSelectedAttr={class:this.wheelnav.getSliceCssClass(this.wheelItemIndex,"selected")},this.titleAttr={class:this.wheelnav.getTitleCssClass(this.wheelItemIndex,"basic")},this.titleHoverAttr={class:this.wheelnav.getTitleCssClass(this.wheelItemIndex,"hover")},this.titleSelectedAttr={class:this.wheelnav.getTitleCssClass(this.wheelItemIndex,"selected")},this.linePathAttr={class:this.wheelnav.getLineCssClass(this.wheelItemIndex,"basic")},this.lineHoverAttr={class:this.wheelnav.getLineCssClass(this.wheelItemIndex,"hover")},this.lineSelectedAttr={class:this.wheelnav.getLineCssClass(this.wheelItemIndex,"selected")}):(this.slicePathAttr={stroke:"#333","stroke-width":0,cursor:"pointer","fill-opacity":1},this.sliceHoverAttr={stroke:"#222","stroke-width":0,cursor:"pointer","fill-opacity":.77},this.sliceSelectedAttr={stroke:"#111","stroke-width":0,cursor:"default","fill-opacity":1},this.titleAttr={font:this.titleFont,fill:"#333",stroke:"none",cursor:"pointer"},this.titleHoverAttr={font:this.titleFont,fill:"#222",cursor:"pointer",stroke:"none"},this.titleSelectedAttr={font:this.titleFont,fill:"#fff",cursor:"default"},this.linePathAttr={stroke:"#444","stroke-width":1,cursor:"pointer"},this.lineHoverAttr={stroke:"#222","stroke-width":2,cursor:"pointer"},this.lineSelectedAttr={stroke:"#444","stroke-width":1,cursor:"default"}),this.sliceClickablePathAttr={fill:"#FFF",stroke:"#FFF","stroke-width":0,cursor:"pointer","fill-opacity":.01},this.sliceClickableHoverAttr={stroke:"#FFF","stroke-width":0,cursor:"pointer"},this.sliceClickableSelectedAttr={stroke:"#FFF","stroke-width":0,cursor:"default"}},wheelnav.prototype.getSliceCssClass=function(e,t){return"wheelnav-"+this.holderId+"-slice-"+t+"-"+e},wheelnav.prototype.getTitleCssClass=function(e,t){return"wheelnav-"+this.holderId+"-title-"+t+"-"+e},wheelnav.prototype.getLineCssClass=function(e,t){return"wheelnav-"+this.holderId+"-line-"+t+"-"+e},wheelnav.prototype.getSpreaderCssClass=function(e){return"wheelnav-"+this.holderId+"-spreader-"+e},wheelnav.prototype.getSpreaderTitleCssClass=function(e){return"wheelnav-"+this.holderId+"-spreadertitle-"+e},wheelnav.prototype.getMarkerCssClass=function(){return"wheelnav-"+this.holderId+"-marker"};var o=function(){return this.sliceRadius=0,this.startAngle=0,this.middleAngle=0,this.endAngle=0,this.sliceAngle=0,this.startTheta=0,this.middleTheta=0,this.endTheta=0,this.titlePosX=0,this.titlePosY=0,this.titleRadius=0,this.titleTheta=0,this.custom=null,this.centerX=0,this.centerY=0,this.wheelRadius=0,this.itemIndex=0,this.navItemCount=0,this.navAngle=0,this.setBaseValue=function(e,t){null===t?t=new s:this.custom=t,this.sliceRadius=this.wheelRadius*e*.9,this.middleAngle=this.startAngle+this.sliceAngle/2,this.endAngle=this.startAngle+this.sliceAngle,this.startTheta=this.getTheta(this.startAngle),this.middleTheta=this.getTheta(this.middleAngle),this.endTheta=this.getTheta(this.endAngle),null!==t?(null!==t.titleRadiusPercent&&(this.titleRadius=this.sliceRadius*t.titleRadiusPercent),null!==t.titleSliceAnglePercent&&(this.titleTheta=this.getTheta(this.startAngle+this.sliceAngle*t.titleSliceAnglePercent))):(this.titleRadius=.5*this.sliceRadius,this.titleTheta=this.middleTheta),this.setTitlePos()},this.setTitlePos=function(){this.titlePosX=this.titleRadius*Math.cos(this.titleTheta)+this.centerX,this.titlePosY=this.titleRadius*Math.sin(this.titleTheta)+this.centerY},this.getX=function(e,t){return t*Math.cos(this.getTheta(e))+this.centerX},this.getY=function(e,t){return t*Math.sin(this.getTheta(e))+this.centerY},this.MoveTo=function(e,t){return["M",this.getX(e,t),this.getY(e,t)]},this.MoveToCenter=function(){return["M",this.centerX,this.centerY]},this.LineTo=function(e,t,i,n){return void 0===i&&(i=e),void 0===n&&(n=t),["L",this.getX(e,t),this.getY(i,n)]},this.ArcTo=function(e,t,i){return["A",e,e,0,0,1,this.getX(t,i),this.getY(t,i)]},this.ArcBackTo=function(e,t,i){return["A",e,e,0,0,0,this.getX(t,i),this.getY(t,i)]},this.StartSpreader=function(e,t,i){this.endAngle-this.startAngle==360?e.push(this.MoveTo(t,i)):(e.push(this.MoveToCenter()),e.push(this.LineTo(t,i)))},this.Close=function(){return["z"]},this.getTheta=function(e){return e%360*Math.PI/180},this},s=function(){return this.titleRadiusPercent=.5,this.titleSliceAnglePercent=.5,this},l=function(){return this.titleRadiusPercent=0,this.titleSliceAnglePercent=.5,this.spreaderPercent=1,this},c=function(){return this.titleRadiusPercent=1,this.titleSliceAnglePercent=.5,this.markerPercent=1.05,this};slicePath=function(){return this.NullSlice=function(e,t,i){return e.setBaseValue(t,i),{slicePathString:"",linePathString:"",titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.NullInitSlice=function(e,t,i){return e.setBaseValue(t,i),slicePathString=[e.MoveToCenter(),e.Close()],{slicePathString:slicePathString,linePathString:slicePathString,titlePosX:e.centerX,titlePosY:e.centerY}},this.PieSliceCustomization=function(){var e=new s;return e.titleRadiusPercent=.6,e.arcBaseRadiusPercent=1,e.arcRadiusPercent=1,e.startRadiusPercent=0,e},this.PieSlice=function(e,t,i){null===i&&(i=PieSliceCustomization()),e.setBaseValue(t,i);var n=e.sliceRadius*i.arcBaseRadiusPercent,r=e.sliceRadius*i.arcRadiusPercent;return slicePathString=[e.MoveTo(e.middleAngle,i.startRadiusPercent*e.sliceRadius),e.LineTo(e.startAngle,n),e.ArcTo(r,e.endAngle,n),e.Close()],{slicePathString:slicePathString,linePathString:"",titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.FlowerSlice=function(e,t,i){null===i&&((i=PieSliceCustomization()).titleRadiusPercent=.5,i.arcBaseRadiusPercent=.65,i.arcRadiusPercent=.14);var n=PieSlice(e,t,i);return{slicePathString:n.slicePathString,linePathString:"",titlePosX:n.titlePosX,titlePosY:n.titlePosY}},this.PieArrowSliceCustomization=function(){var e=new s;return e.titleRadiusPercent=.6,e.arrowRadiusPercent=1.1,e},this.PieArrowSlice=function(e,t,i){null===i&&(i=PieArrowSliceCustomization()),e.setBaseValue(t,i),r=e.sliceRadius,arrowAngleStart=e.startAngle+.45*e.sliceAngle,arrowAngleEnd=e.startAngle+.55*e.sliceAngle;var n=r*i.arrowRadiusPercent;return slicePathString=[e.MoveToCenter(),e.LineTo(e.startAngle,r),e.ArcTo(r,arrowAngleStart,r),e.LineTo(e.middleAngle,n),e.LineTo(arrowAngleEnd,r),e.ArcTo(r,e.endAngle,r),e.Close()],{slicePathString:slicePathString,linePathString:"",titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.PieArrowBasePieSlice=function(e,t,i){null===i&&(i=PieArrowSliceCustomization()),i.arrowRadiusPercent=1;var n=PieArrowSlice(e,t,i);return{slicePathString:n.slicePathString,linePathString:"",titlePosX:n.titlePosX,titlePosY:n.titlePosY}},this.DonutSliceCustomization=function(){var e=new s;return e.minRadiusPercent=.37,e.maxRadiusPercent=.9,e},this.DonutSlice=function(e,t,i){return null===i&&(i=DonutSliceCustomization()),maxRadius=e.wheelRadius*t*i.maxRadiusPercent,minRadius=e.wheelRadius*t*i.minRadiusPercent,e.setBaseValue(t,i),e.titleRadius=(maxRadius+minRadius)/2,e.setTitlePos(),slicePathString=[e.MoveTo(e.startAngle,minRadius),e.LineTo(e.startAngle,maxRadius),e.ArcTo(maxRadius,e.endAngle,maxRadius),e.LineTo(e.endAngle,minRadius),e.ArcBackTo(minRadius,e.startAngle,minRadius),e.Close()],{slicePathString:slicePathString,linePathString:"",titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.CogSliceCustomization=function(){var e=new s;return e.titleRadiusPercent=.55,e.isBasePieSlice=!1,e},this.CogSlice=function(e,t,i){return null===i&&(i=CogSliceCustomization()),e.setBaseValue(t,i),r=e.sliceRadius,rbase=e.wheelRadius*t*.83,percentAngle0625=e.startAngle+.0625*e.sliceAngle,percentAngle1250=e.startAngle+.125*e.sliceAngle,percentAngle1875=e.startAngle+.1875*e.sliceAngle,percentAngle2500=e.startAngle+.25*e.sliceAngle,percentAngle3125=e.startAngle+.3125*e.sliceAngle,percentAngle3750=e.startAngle+.375*e.sliceAngle,percentAngle4375=e.startAngle+.4375*e.sliceAngle,percentAngle5000=e.startAngle+.5*e.sliceAngle,percentAngle5625=e.startAngle+.5625*e.sliceAngle,percentAngle6250=e.startAngle+.625*e.sliceAngle,percentAngle6875=e.startAngle+.6875*e.sliceAngle,percentAngle7500=e.startAngle+.75*e.sliceAngle,percentAngle8125=e.startAngle+.8125*e.sliceAngle,percentAngle8750=e.startAngle+.875*e.sliceAngle,percentAngle9375=e.startAngle+.9375*e.sliceAngle,percentAngle9687=e.startAngle+.96875*e.sliceAngle,i.isBasePieSlice?(r=rbase,slicePathString=[e.MoveToCenter(),e.LineTo(e.startAngle,r),e.ArcTo(r,percentAngle0625,r),e.ArcTo(r,percentAngle1250,r),e.ArcTo(r,percentAngle1875,r),e.ArcTo(r,percentAngle2500,r),e.ArcTo(r,percentAngle3125,r),e.ArcTo(r,percentAngle3750,r),e.ArcTo(r,percentAngle4375,r),e.ArcTo(r,percentAngle5000,r),e.ArcTo(r,percentAngle5625,r),e.ArcTo(r,percentAngle6250,r),e.ArcTo(r,percentAngle6875,r),e.ArcTo(r,percentAngle7500,r),e.ArcTo(r,percentAngle8125,r),e.ArcTo(r,percentAngle8750,r),e.ArcTo(r,percentAngle9375,r),e.ArcTo(r,percentAngle9687,r),e.ArcTo(r,e.endAngle,r),e.Close()]):slicePathString=[e.MoveToCenter(),e.LineTo(e.startAngle,r),e.ArcTo(r,percentAngle0625,r),e.LineTo(percentAngle0625,rbase),e.ArcTo(rbase,percentAngle1875,rbase),e.LineTo(percentAngle1875,r),e.ArcTo(r,percentAngle3125,r),e.LineTo(percentAngle3125,rbase),e.ArcTo(rbase,percentAngle4375,rbase),e.LineTo(percentAngle4375,r),e.ArcTo(r,percentAngle5625,r),e.LineTo(percentAngle5625,rbase),e.ArcTo(rbase,percentAngle6875,rbase),e.LineTo(percentAngle6875,r),e.ArcTo(r,percentAngle8125,r),e.LineTo(percentAngle8125,rbase),e.ArcTo(rbase,percentAngle9375,rbase),e.LineTo(percentAngle9375,r),e.ArcTo(r,e.endAngle,r),e.Close()],{slicePathString:slicePathString,linePathString:"",titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.CogBasePieSlice=function(e,t,i){null===i&&(i=CogSliceCustomization()),i.isBasePieSlice=!0;var n=CogSlice(e,t,i);return{slicePathString:n.slicePathString,linePathString:"",titlePosX:n.titlePosX,titlePosY:n.titlePosY}},this.StarSliceCustomization=function(){var e=new s;return e.titleRadiusPercent=.44,e.minRadiusPercent=.5,e.isBasePieSlice=!1,e},this.StarSlice=function(e,t,i){return null===i&&(i=StarSliceCustomization()),e.setBaseValue(t,i),r=e.wheelRadius*t,rbase=r*i.minRadiusPercent,i.isBasePieSlice?(r=e.sliceRadius,slicePathString=[e.MoveToCenter(),e.LineTo(e.startAngle,r),e.ArcTo(r,e.middleAngle,r),e.ArcTo(r,e.endAngle,r),e.Close()]):slicePathString=[e.MoveToCenter(),e.LineTo(e.startAngle,rbase),e.LineTo(e.middleAngle,r),e.LineTo(e.endAngle,rbase),e.Close()],{slicePathString:slicePathString,linePathString:"",titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.StarBasePieSlice=function(e,t,i){null===i&&(i=StarSliceCustomization()),i.titleRadiusPercent=.6,i.isBasePieSlice=!0;var n=StarSlice(e,t,i);return{slicePathString:n.slicePathString,linePathString:"",titlePosX:n.titlePosX,titlePosY:n.titlePosY}},this.MenuSliceCustomization=function(){var e=new s;return e.menuRadius=35,e.titleRadiusPercent=.63,e.isSelectedLine=!1,e.lineBaseRadiusPercent=0,e},this.MenuSlice=function(e,t,i){var n,r;return null===i&&(i=MenuSliceCustomization()),e.setBaseValue(t,i),x=e.centerX,y=e.centerY,n=e.wheelRadius*t,e.titleRadius=n*i.titleRadiusPercent,e.setTitlePos(),r=t*i.menuRadius,t<=.05&&(r=10),middleTheta=e.middleTheta,slicePathString=[["M",e.titlePosX-r*Math.cos(middleTheta),e.titlePosY-r*Math.sin(middleTheta)],["A",r,r,0,0,1,e.titlePosX+r*Math.cos(middleTheta),e.titlePosY+r*Math.sin(middleTheta)],["A",r,r,0,0,1,e.titlePosX-r*Math.cos(middleTheta),e.titlePosY-r*Math.sin(middleTheta)],["z"]],linePathString=t<=.05?[["M",x,y],["A",1,1,0,0,1,x+1,y+1]]:i.isSelectedLine?[e.MoveTo(e.middleAngle,i.lineBaseRadiusPercent*n),e.ArcTo(n/3,e.middleAngle,e.titleRadius-r)]:[e.MoveTo(e.middleAngle,i.lineBaseRadiusPercent*n),e.ArcTo(n/2,e.middleAngle,e.titleRadius-r)],{slicePathString:slicePathString,linePathString:linePathString,titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.MenuSliceSelectedLine=function(e,t,i){null===i&&(i=MenuSliceCustomization()),i.isSelectedLine=!0;var n=MenuSlice(e,t,i);return{slicePathString:n.slicePathString,linePathString:n.linePathString,titlePosX:n.titlePosX,titlePosY:n.titlePosY}},this.MenuSliceWithoutLine=function(e,t,i){var n=MenuSlice(e,t,i);return{slicePathString:n.slicePathString,linePathString:"",titlePosX:n.titlePosX,titlePosY:n.titlePosY}},this.LineSlice=function(e,t,i){return e.setBaseValue(t,i),r=e.sliceRadius,e.sliceAngle>60&&e.sliceAngle<180?(e.titleRadius=r*(36/e.sliceAngle),e.setTitlePos()):(e.titleRadius=.55*r,e.setTitlePos()),slicePathString=e.sliceAngle<180?[e.MoveToCenter(),e.LineTo(e.startAngle,r),e.LineTo(e.endAngle,r),e.Close()]:180===e.startAngle||0===e.startAngle||-180===e.startAngle||360===e.startAngle?[e.MoveToCenter(),e.LineTo(e.startAngle,r),e.LineTo(e.startAngle,r,e.middleAngle,r),e.LineTo(e.endAngle,r,e.middleAngle,r),e.LineTo(e.endAngle,r),e.Close()]:[e.MoveToCenter(),e.LineTo(e.startAngle,r),e.LineTo(e.middleAngle,r,e.startAngle,r),e.LineTo(e.middleAngle,r,e.endAngle,r),e.LineTo(e.endAngle,r),e.Close()],{slicePathString:slicePathString,linePathString:"",titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.EyeSliceCustomization=function(){var e=new s;return e.titleRadiusPercent=.68,e},this.EyeSlice=function(e,t,i){return null===i&&(i=EyeSliceCustomization()),e.setBaseValue(t,i),r=e.wheelRadius*t*.7,0===t&&(r=.01),startAngle=e.startAngle,endAngle=e.endAngle,180===e.sliceAngle&&(startAngle=e.startAngle+e.sliceAngle/4,endAngle=e.startAngle+e.sliceAngle-e.sliceAngle/4),slicePathString=[e.MoveTo(endAngle,r),e.ArcTo(r,startAngle,r),e.ArcTo(r,endAngle,r),e.Close()],{slicePathString:slicePathString,linePathString:"",titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.WheelSlice=function(e,t,i){var n;return e.setBaseValue(t,i),x=e.centerX,y=e.centerY,r=e.sliceRadius,startTheta=e.startTheta,middleTheta=e.middleTheta,endTheta=e.endTheta,e.sliceAngle<120?(e.titleRadius=.57*r,n=.9):e.sliceAngle<180?(e.titleRadius=.52*r,n=.91):(e.titleRadius=.45*r,n=.873),slicePathString=[e.MoveTo(e.middleAngle,.07*r),["L",.07*r*Math.cos(middleTheta)+.87*r*Math.cos(startTheta)+x,.07*r*Math.sin(middleTheta)+.87*r*Math.sin(startTheta)+y],["A",r*n,r*n,0,0,1,.07*r*Math.cos(middleTheta)+.87*r*Math.cos(endTheta)+x,.07*r*Math.sin(middleTheta)+.87*r*Math.sin(endTheta)+y],e.Close()],linePathString=[e.MoveTo(e.startAngle,r),e.ArcTo(r,e.endAngle,r),e.ArcBackTo(r,e.startAngle,r)],e.setTitlePos(),{slicePathString:slicePathString,linePathString:linePathString,titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.TabSlice=function(e){var t=.9*e.wheelRadius,i=2*t/(360/e.sliceAngle);return x=e.centerX,y=e.centerY,itemIndex=e.itemIndex,titlePosX=x,titlePosY=itemIndex*i+y+i/2-t,slicePathString=[["M",x-i/2,itemIndex*i+y-t],["L",i/2+x,itemIndex*i+y-t],["L",i/2+x,(itemIndex+1)*i+y-t],["L",x-i/2,(itemIndex+1)*i+y-t],["z"]],{slicePathString:slicePathString,linePathString:"",titlePosX:titlePosX,titlePosY:titlePosY}},this.YinYangSlice=function(e,t,i){return e.setBaseValue(t,i),r=e.sliceRadius,slicePathString=[e.MoveToCenter(),e.ArcTo(r/2,e.startAngle,r),e.ArcTo(r,e.endAngle,r),e.ArcBackTo(r/2,0,0),e.Close()],titlePosX=e.getX(e.startAngle,r/2),titlePosY=e.getY(e.startAngle,r/2),{slicePathString:slicePathString,linePathString:slicePathString,titlePosX:titlePosX,titlePosY:titlePosY}},this.WebSlice=function(e,t,i){return e.setBaseValue(t,i),r=e.sliceRadius,e.titleRadius=.55*r,e.setTitlePos(),linePathString=[e.MoveToCenter(),e.LineTo(e.startAngle,1.1*r),e.MoveToCenter(),e.LineTo(e.endAngle,1.1*r),e.MoveTo(e.startAngle,.15*r),e.LineTo(e.endAngle,.15*r),e.MoveTo(e.startAngle,.35*r),e.LineTo(e.endAngle,.35*r),e.MoveTo(e.startAngle,.55*r),e.LineTo(e.endAngle,.55*r),e.MoveTo(e.startAngle,.75*r),e.LineTo(e.endAngle,.75*r),e.MoveTo(e.startAngle,.95*r),e.LineTo(e.endAngle,.95*r),e.Close()],{slicePathString:"",linePathString:linePathString,titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.WinterSliceCustomization=function(){var e=new s;return e.titleRadiusPercent=.85,e.arcRadiusPercent=1,e},this.WinterSlice=function(e,t,i){null===i&&(i=WinterSliceCustomization()),e.setBaseValue(t,i),sliceAngle=e.sliceAngle,parallelAngle=e.startAngle+sliceAngle/4,parallelAngle2=e.startAngle+sliceAngle/4*3,borderAngle1=e.startAngle+sliceAngle/200,borderAngle2=e.startAngle+sliceAngle/2-sliceAngle/200,borderAngle3=e.startAngle+sliceAngle/2+sliceAngle/200,borderAngle4=e.startAngle+sliceAngle-sliceAngle/200;var n=e.sliceRadius*i.arcRadiusPercent;return slicePathString=[e.MoveToCenter(),e.MoveTo(parallelAngle,n/100),e.LineTo(borderAngle1,n/2),e.LineTo(parallelAngle,n-n/100),e.LineTo(borderAngle2,n/2),e.LineTo(parallelAngle,n/100),e.MoveTo(parallelAngle2,n/100),e.LineTo(borderAngle4,n/2),e.LineTo(parallelAngle2,n-n/100),e.LineTo(borderAngle3,n/2),e.LineTo(parallelAngle2,n/100),e.Close()],linePathString=[e.MoveTo(parallelAngle,n),e.LineTo(borderAngle2,n/2),e.MoveTo(borderAngle3,n/2),e.LineTo(parallelAngle2,n)],{slicePathString:slicePathString,linePathString:linePathString,titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.TutorialSliceCustomization=function(){var e=new s;return e.titleRadiusPercent=.6,e.isMoveTo=!1,e.isLineTo=!1,e.isArcTo=!1,e.isArcBackTo=!1,e},this.TutorialSlice=function(e,t,i){return null===i&&(i=TutorialSliceCustomization()),e.setBaseValue(t,i),slicePathString=[],slicePathString.push(e.MoveToCenter()),!0===i.isMoveTo&&slicePathString.push(e.MoveTo(e.middleAngle,e.sliceRadius/4)),i.isLineTo&&slicePathString.push(e.LineTo(e.startAngle,e.sliceRadius)),i.isArcTo&&slicePathString.push(e.ArcTo(e.sliceRadius,e.middleAngle,e.sliceRadius)),i.isArcBackTo&&slicePathString.push(e.ArcBackTo(e.sliceRadius,e.endAngle,e.sliceRadius)),slicePathString.push(e.Close()),linePathString=[e.MoveToCenter(),e.LineTo(e.startAngle,e.sliceRadius),e.ArcTo(e.sliceRadius,e.endAngle,e.sliceRadius),e.Close()],{slicePathString:slicePathString,linePathString:linePathString,titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this},n=function(){this.startAngle=0,this.startTheta=0,this.middleTheta=0,this.endTheta=0;var e=function(e){return e%360*Math.PI/180};return this.NullTransform=function(){return{sliceTransformString:"",lineTransformString:"",titleTransformString:""}},this.MoveMiddleTransform=function(t,i,n,r,a,o,s){var l,c;return function(t,i,n,r,a){this.startAngle=r,this.startTheta=e(startAngle),this.middleTheta=e(startAngle+a/2),this.endTheta=e(startAngle+a)}(0,0,0,r,a),l="t"+(n/10*Math.cos(middleTheta)).toString()+","+(n/10*Math.sin(middleTheta)).toString(),null!==o?c=e(-o):c=e(r-s*a+a/2),{sliceTransformString:l,lineTransformString:l,titleTransformString:"s1,r0,t"+(n/10*Math.cos(c)).toString()+","+(n/10*Math.sin(c)).toString()}},this.RotateTransform=function(){var e="s1,r360";return{sliceTransformString:e,lineTransformString:e,titleTransformString:e}},this.RotateHalfTransform=function(){var e="s1,r90";return{sliceTransformString:e,lineTransformString:e,titleTransformString:e}},this.RotateTitleTransform=function(){return{sliceTransformString:"",lineTransformString:"",titleTransformString:"s1,r360"}},this.ScaleTransform=function(){var e="s1.2";return{sliceTransformString:e,lineTransformString:"",titleTransformString:e}},this.ScaleTitleTransform=function(){return{sliceTransformString:"",lineTransformString:"",titleTransformString:"s1.3"}},this.RotateScaleTransform=function(){var e="r360,s1.3";return{sliceTransformString:e,lineTransformString:"",titleTransformString:e}},this.CustomTransform=function(e,t,i,n,r,a,o,s){var l=s.scaleString+","+s.rotateString;return{sliceTransformString:l,lineTransformString:l,titleTransformString:l}},this.CustomTitleTransform=function(e,t,i,n,r,a,o,s){return{sliceTransformString:"",lineTransformString:"",titleTransformString:s.scaleString+","+s.rotateString}},this},spreader=function(e){var t,i;if(this.wheelnav=e,this.wheelnav.spreaderEnable){this.spreaderHelper=new o,this.spreaderHelper.centerX=this.wheelnav.centerX,this.spreaderHelper.centerY=this.wheelnav.centerY,this.spreaderHelper.navItemCount=this.wheelnav.navItemCount,this.spreaderHelper.navAngle=this.wheelnav.navAngle,this.spreaderHelper.wheelRadius=this.wheelnav.spreaderRadius,this.spreaderHelper.startAngle=this.wheelnav.spreaderStartAngle,this.spreaderHelper.sliceAngle=this.wheelnav.spreaderSliceAngle,t=this.wheelnav,this.animateeffect="bounce",this.animatetime=1500,null!==this.wheelnav.animateeffect&&(this.animateeffect=this.wheelnav.animateeffect),null!==this.wheelnav.animatetime&&(this.animatetime=this.wheelnav.animatetime),this.fontAttr=null!==this.wheelnav.spreaderTitleFont?{font:this.wheelnav.spreaderTitleFont}:{font:"100 32px Impact, Charcoal, sans-serif"},this.spreaderPathIn=this.wheelnav.spreaderPathFunction(this.spreaderHelper,this.wheelnav.spreaderInPercent,this.wheelnav.spreaderPathCustom),this.spreaderPathOut=this.wheelnav.spreaderPathFunction(this.spreaderHelper,this.wheelnav.spreaderOutPercent,this.wheelnav.spreaderPathCustom),i=this.spreaderPathOut,t.initPercent<t.maxPercent&&(i=this.spreaderPathIn),this.spreaderPath=this.wheelnav.raphael.path(i.spreaderPathString),this.spreaderPath.attr(t.spreaderPathAttr),this.spreaderPath.id=t.getSpreaderId(),this.spreaderPath.node.id=this.spreaderPath.id,this.spreaderPath.click((function(){t.spreadWheel()})),this.inTitleWidth=this.wheelnav.spreaderInTitleWidth,this.inTitleHeight=this.wheelnav.spreaderInTitleHeight,this.outTitleWidth=this.wheelnav.spreaderOutTitleWidth,this.outTitleHeight=this.wheelnav.spreaderOutTitleHeight,null!==this.inTitleWidth&&null===this.inTitleHeight&&(this.inTitleHeight=this.inTitleWidth),null===this.inTitleWidth&&null!==this.inTitleHeight&&(this.inTitleWidth=this.inTitleHeight),null!==this.outTitleWidth&&null===this.outTitleHeight&&(this.outTitleHeight=this.outTitleWidth),null===this.outTitleWidth&&null!==this.outTitleHeight&&(this.outTitleWidth=this.outTitleHeight),wheelnavTitle().isImageTitle(this.wheelnav.spreaderOutTitle)&&(null===this.inTitleWidth&&(this.inTitleWidth=32),null===this.inTitleHeight&&(this.inTitleHeight=32),null===this.outTitleWidth&&(this.outTitleWidth=32),null===this.outTitleHeight&&(this.outTitleHeight=32)),inTitle=wheelnavTitle().isPathTitle(this.wheelnav.spreaderInTitle)?new wheelnavTitle(this.wheelnav.spreaderInTitle,this.wheelnav.raphael.raphael):new wheelnavTitle(this.wheelnav.spreaderInTitle),this.inTitleSizeTransform=inTitle.getTitleSizeTransform(this.inTitleWidth,this.inTitleHeight),this.inTitle=inTitle.getTitlePercentAttr(this.spreaderPathIn.titlePosX,this.spreaderPathIn.titlePosY,this.inTitleWidth,this.inTitleHeight),outTitle=wheelnavTitle().isPathTitle(this.wheelnav.spreaderOutTitle)?new wheelnavTitle(this.wheelnav.spreaderOutTitle,this.wheelnav.raphael.raphael):new wheelnavTitle(this.wheelnav.spreaderOutTitle),this.outTitleSizeTransform=outTitle.getTitleSizeTransform(this.outTitleWidth,this.outTitleHeight),this.outTitle=outTitle.getTitlePercentAttr(this.spreaderPathOut.titlePosX,this.spreaderPathOut.titlePosY,this.outTitleWidth,this.outTitleHeight);var n=this.outTitle,r=this.wheelnav.spreaderTitleOutAttr,a=this.outTitleWidth,s=this.outTitleHeight,l=this.outTitleSizeTransform;t.initPercent<t.maxPercent&&(n=this.inTitle,r=this.wheelnav.spreaderTitleInAttr,a=this.inTitleWidth,s=this.inTitleHeight,l=this.inTitleSizeTransform),this.spreaderTitle=wheelnavTitle().isPathTitle(this.wheelnav.spreaderOutTitle)?t.raphael.path(n.path):wheelnavTitle().isImageTitle(this.wheelnav.spreaderOutTitle)?this.wheelnav.raphael.image(n.src,i.titlePosX-a/2,i.titlePosY-s/2,a,s):t.raphael.text(i.titlePosX,i.titlePosY,n.title),this.spreaderTitle.attr(this.fontAttr),this.spreaderTitle.attr(r),this.spreaderTitle.attr({transform:l}),this.spreaderTitle.id=t.getSpreaderTitleId(),this.spreaderTitle.node.id=this.spreaderTitle.id,this.spreaderTitle.click((function(){t.spreadWheel()})),this.setCurrentTransform()}return this},spreader.prototype.setCurrentTransform=function(e){if(this.wheelnav.spreaderEnable){var t,i,n;if(void 0===e||!1===e)currentPath=this.wheelnav.currentPercent>this.wheelnav.minPercent?this.spreaderPathOut.spreaderPathString:this.spreaderPathIn.spreaderPathString,spreaderTransformAttr={path:currentPath},this.spreaderPath.animate(spreaderTransformAttr,this.animatetime,this.animateeffect),this.wheelnav.currentPercent===this.wheelnav.maxPercent?(t=this.outTitle,i=this.wheelnav.spreaderTitleOutAttr,this.spreaderPath.attr(this.wheelnav.spreaderPathOutAttr),n=this.outTitleSizeTransform):(t=this.inTitle,i=this.wheelnav.spreaderTitleInAttr,this.spreaderPath.attr(this.wheelnav.spreaderPathInAttr),n=this.inTitleSizeTransform),wheelnavTitle().isPathTitle(t.title)?(i.path=t.path,i.transform=n):wheelnavTitle().isImageTitle(t.title)?(i.x=t.x,i.y=t.y,i.width=t.width,i.height=t.height,this.spreaderTitle.attr({src:t.src})):(offYOffset=0,"-"===t.title&&(offYOffset=3),i.x=t.x,i.y=t.y-offYOffset,null!==t.title&&this.spreaderTitle.attr({text:t.title})),this.spreaderTitle.animate(i,this.animatetime,this.animateeffect);this.spreaderPath.toFront(),this.spreaderTitle.toFront()}},spreaderPath=function(){return this.NullSpreader=function(e,t){return null===t&&(t=new l),e.setBaseValue(t.spreaderPercent,t),{spreaderPathString:"",titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.PieSpreaderCustomization=function(){var e=new l;return e.spreaderRadius=25,e.arcBaseRadiusPercent=1,e.arcRadiusPercent=1,e.startRadiusPercent=0,e},this.PieSpreader=function(e,t,i){null===i&&(i=PieSpreaderCustomization()),e.setBaseValue(i.spreaderPercent*t,i);var n=e.sliceRadius*i.arcBaseRadiusPercent,r=e.sliceRadius*i.arcRadiusPercent;return spreaderPathString=[],e.StartSpreader(spreaderPathString,e.startAngle,n),spreaderPathString.push(e.ArcTo(r,e.middleAngle,n)),spreaderPathString.push(e.ArcTo(r,e.endAngle,n)),spreaderPathString.push(e.Close()),{spreaderPathString:spreaderPathString,titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.StarSpreaderCustomization=function(){var e=new l;return e.minRadiusPercent=.5,e},this.StarSpreader=function(e,t,i){null===i&&(i=StarSpreaderCustomization()),e.setBaseValue(i.spreaderPercent*t,i),rbase=e.wheelRadius*i.spreaderPercent*i.minRadiusPercent*t,r=e.sliceRadius,spreaderPathString=[],sliceAngle=e.sliceAngle/e.navItemCount,baseAngle=e.navAngle,e.endAngle-e.startAngle<360&&(baseAngle=e.startAngle),e.StartSpreader(spreaderPathString,baseAngle,r);for(var n=0;n<e.navItemCount;n++)startAngle=n*sliceAngle+(baseAngle+sliceAngle/2),middleAngle=startAngle+sliceAngle/2,endAngle=startAngle+sliceAngle,e.endAngle-e.startAngle<360&&n===e.navItemCount-1&&(endAngle=middleAngle),spreaderPathString.push(e.LineTo(startAngle,rbase)),spreaderPathString.push(e.LineTo(middleAngle,r)),spreaderPathString.push(e.LineTo(endAngle,rbase));return spreaderPathString.push(e.Close()),{spreaderPathString:spreaderPathString,titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.AntiStarSpreaderCustomization=function(){var e=new l;return e.minRadiusPercent=.21,e},this.AntiStarSpreader=function(e,t,i){null===i&&(i=AntiStarSpreaderCustomization()),e.setBaseValue(i.spreaderPercent*t,i),rbase=e.wheelRadius*i.spreaderPercent*i.minRadiusPercent*t,r=e.sliceRadius,spreaderPathString=[],sliceAngle=e.sliceAngle/e.navItemCount,baseAngle=e.navAngle,e.endAngle-e.startAngle<360?(baseAngle=e.startAngle,e.StartSpreader(spreaderPathString,baseAngle,rbase)):spreaderPathString.push(e.MoveTo(e.startAngle+(e.navAngle+sliceAngle/2),rbase));for(var n=0;n<e.navItemCount;n++)startAngle=n*sliceAngle+(baseAngle+sliceAngle/2),middleAngle=startAngle+sliceAngle/2,endAngle=startAngle+sliceAngle,e.endAngle-e.startAngle<360&&n===e.navItemCount-1&&(endAngle=middleAngle),spreaderPathString.push(e.LineTo(startAngle,r)),spreaderPathString.push(e.LineTo(middleAngle,rbase)),spreaderPathString.push(e.LineTo(endAngle,r));return spreaderPathString.push(e.Close()),{spreaderPathString:spreaderPathString,titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.FlowerSpreaderCustomization=function(){var e=new l;return e.minRadiusPercent=.63,e.menuRadius=7,e},this.FlowerSpreader=function(e,t,i){null===i&&(i=FlowerSpreaderCustomization()),e.setBaseValue(i.spreaderPercent*t,i),rbase=e.wheelRadius*i.spreaderPercent*i.minRadiusPercent*t,r=e.sliceRadius,spreaderPathString=[],sliceAngle=e.sliceAngle/e.navItemCount,baseAngle=e.navAngle,e.endAngle-e.startAngle<360?(baseAngle=e.startAngle,e.StartSpreader(spreaderPathString,baseAngle,rbase)):spreaderPathString.push(e.MoveTo(e.startAngle+(e.navAngle+sliceAngle/2),rbase));for(var n=0;n<e.navItemCount;n++)startAngle=n*sliceAngle+(baseAngle+sliceAngle/2),middleAngle=startAngle+sliceAngle/2,endAngle=startAngle+sliceAngle,e.endAngle-e.startAngle<360?(0===n&&spreaderPathString.push(e.ArcTo(i.menuRadius,startAngle,rbase)),n===e.navItemCount-1&&(endAngle=middleAngle)):spreaderPathString.push(e.LineTo(startAngle,rbase)),spreaderPathString.push(e.ArcTo(i.menuRadius,endAngle,rbase));return spreaderPathString.push(e.Close()),{spreaderPathString:spreaderPathString,titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.HolderSpreaderCustomization=function(){var e=new l;return e.minRadiusPercent=.5,e.menuRadius=37,e},this.HolderSpreader=function(e,t,i){null===i&&(i=HolderSpreaderCustomization()),e.setBaseValue(i.spreaderPercent*t,i),rbase=e.wheelRadius*i.spreaderPercent*i.minRadiusPercent*t,r=e.sliceRadius,spreaderPathString=[],sliceAngle=e.sliceAngle/e.navItemCount,baseAngle=e.navAngle,e.endAngle-e.startAngle<360?(baseAngle=e.startAngle,e.StartSpreader(spreaderPathString,baseAngle,rbase)):spreaderPathString.push(e.MoveTo(e.startAngle+(e.navAngle+sliceAngle/2),rbase));for(var n=0;n<e.navItemCount;n++)startAngle=n*sliceAngle+(baseAngle+sliceAngle/2),middleAngle=startAngle+sliceAngle/4,endAngle=startAngle+sliceAngle,e.endAngle-e.startAngle<360?n===e.navItemCount-1&&(endAngle=middleAngle):spreaderPathString.push(e.LineTo(startAngle,rbase)),spreaderPathString.push(e.LineTo(startAngle,r)),spreaderPathString.push(e.ArcBackTo(i.menuRadius,middleAngle,rbase)),spreaderPathString.push(e.ArcTo(i.menuRadius,endAngle,r));return spreaderPathString.push(e.Close()),{spreaderPathString:spreaderPathString,titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.LineSpreaderCustomization=function(){var e=new l;return e.minRadiusPercent=.5,e},this.LineSpreader=function(e,t,i){null===i&&(i=LineSpreaderCustomization()),e.setBaseValue(i.spreaderPercent*t,i),rbase=e.wheelRadius*i.spreaderPercent*i.minRadiusPercent*t,r=e.sliceRadius,spreaderPathString=[],sliceAngle=e.sliceAngle/e.navItemCount,baseAngle=e.navAngle,e.endAngle-e.startAngle<360&&(baseAngle=e.startAngle),spreaderPathString.push(e.MoveTo(baseAngle+sliceAngle/2,r));for(var n=0;n<e.navItemCount;n++)startAngle=n*sliceAngle+(baseAngle+sliceAngle/2),endAngle=startAngle+sliceAngle,2===e.navItemCount&&(endAngle-=90),spreaderPathString.push(e.LineTo(startAngle,r)),spreaderPathString.push(e.LineTo(endAngle,r));return spreaderPathString.push(e.Close()),{spreaderPathString:spreaderPathString,titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this},marker=function(e){return this.wheelnav=e,this.wheelnav.markerEnable&&(this.markerHelper=new o,this.markerHelper.centerX=this.wheelnav.centerX,this.markerHelper.centerY=this.wheelnav.centerY,this.markerHelper.navItemCount=this.wheelnav.navItemCount,this.markerHelper.navAngle=this.wheelnav.navAngle,this.markerHelper.wheelRadius=this.wheelnav.wheelRadius*this.wheelnav.maxPercent,this.markerHelper.sliceAngle=this.wheelnav.navItems[0].sliceAngle,this.markerHelper.startAngle=this.markerHelper.navAngle-this.markerHelper.sliceAngle/2,this.animateeffect="bounce",this.animatetime=1500,null!==this.wheelnav.animateeffect&&(this.animateeffect=this.wheelnav.animateeffect),null!==this.wheelnav.animatetime&&(this.animatetime=this.wheelnav.animatetime),this.markerPathMin=this.wheelnav.markerPathFunction(this.markerHelper,this.wheelnav.minPercent,this.wheelnav.markerPathCustom),this.markerPathMax=this.wheelnav.markerPathFunction(this.markerHelper,this.wheelnav.maxPercent,this.wheelnav.markerPathCustom),this.marker=this.wheelnav.raphael.path(this.markerPathMax.markerPathString),this.marker.attr(this.wheelnav.markerAttr),this.marker.id=this.wheelnav.getMarkerId(),this.marker.node.id=this.marker.id),this},marker.prototype.setCurrentTransform=function(e){var t,i;this.wheelnav.markerEnable&&("",t=this.wheelnav.currentPercent===this.wheelnav.maxPercent?this.markerPathMax.markerPathString:this.markerPathMin.markerPathString,void 0!==e?(i=e-this.markerHelper.navAngle,markerTransformAttr={transform:"r,"+i.toString()+","+this.wheelnav.centerX+","+this.wheelnav.centerY,path:t}):markerTransformAttr={path:t},this.marker.animate(markerTransformAttr,this.animatetime,this.animateeffect),this.marker.toFront())},markerPath=function(){return this.NullMarker=function(e,t){return null===t&&(t=new c),e.setBaseValue(t),{markerPathString:"",titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.TriangleMarkerCustomization=function(){var e=new c;return e.arcBaseRadiusPercent=1.09,e.arcRadiusPercent=1.2,e.startRadiusPercent=0,e},this.TriangleMarker=function(e,t,i){null===i&&(i=TriangleMarkerCustomization()),e.setBaseValue(i.markerPercent*t,i);var n=e.sliceRadius*i.arcBaseRadiusPercent,r=e.sliceRadius*i.arcRadiusPercent,a=e.startAngle+.46*e.sliceAngle,o=e.startAngle+.54*e.sliceAngle;return markerPathString=[e.MoveTo(e.navAngle,n),e.LineTo(a,r),e.LineTo(o,r),e.Close()],{markerPathString:markerPathString,titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.PieLineMarkerCustomization=function(){var e=new c;return e.arcBaseRadiusPercent=1,e.arcRadiusPercent=1,e.startRadiusPercent=0,e.sliceAngle=null,e},this.PieLineMarker=function(e,t,i){null===i&&(i=PieLineMarkerCustomization()),e.setBaseValue(i.markerPercent*t,i);var n=e.sliceRadius*i.arcBaseRadiusPercent,r=e.sliceRadius*i.arcRadiusPercent;return null!==i.sliceAngle&&(e.startAngle=e.navAngle-i.sliceAngle/2,e.endAngle=e.navAngle+i.sliceAngle/2),markerPathString=[e.MoveTo(e.startAngle,n),e.ArcTo(r,e.endAngle,n),e.ArcBackTo(r,e.startAngle,n),e.Close()],{markerPathString:markerPathString,titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.MenuMarkerCustomization=function(){var e=new c;return e.menuRadius=40,e.titleRadiusPercent=.63,e.lineBaseRadiusPercent=0,e},this.MenuMarker=function(e,t,i){null===i&&(i=MenuMarkerCustomization()),e.setBaseValue(i.markerPercent*t,i),x=e.centerX,y=e.centerY,e.titleRadius=e.wheelRadius*i.titleRadiusPercent*t,e.setTitlePos();var n=i.menuRadius*t;return t<=.05&&(n=11),middleTheta=e.middleTheta,markerPathString=[["M",e.titlePosX-n*Math.cos(middleTheta),e.titlePosY-n*Math.sin(middleTheta)],["A",n,n,0,0,1,e.titlePosX+n*Math.cos(middleTheta),e.titlePosY+n*Math.sin(middleTheta)],["A",n,n,0,0,1,e.titlePosX-n*Math.cos(middleTheta),e.titlePosY-n*Math.sin(middleTheta)],["z"]],{markerPathString:markerPathString,titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.LineMarkerCustomization=function(){var e=new c;return e.arcBaseRadiusPercent=1.05,e.arcRadiusPercent=1.2,e.startRadiusPercent=0,e},this.LineMarker=function(e,t,i){null===i&&(i=LineMarkerCustomization()),e.setBaseValue(i.markerPercent*t,i);var n=e.sliceRadius*i.arcBaseRadiusPercent,r=e.sliceRadius*i.arcRadiusPercent;return markerPathString=[e.MoveTo(e.navAngle,n),e.LineTo(e.navAngle,r),e.Close()],{markerPathString:markerPathString,titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this.DropMarkerCustomization=function(){var e=new c;return e.dropBaseRadiusPercent=0,e.dropRadiusPercent=.15,e},this.DropMarker=function(e,t,i){null===i&&(i=DropMarkerCustomization()),e.setBaseValue(i.markerPercent*t,i);var n=e.sliceRadius*i.dropBaseRadiusPercent,r=e.startAngle+.2*e.sliceAngle,a=e.startAngle,o=e.startAngle+.8*e.sliceAngle,s=e.startAngle+e.sliceAngle,l=e.sliceRadius*i.dropRadiusPercent;return markerPathString=[e.MoveTo(0,l),e.ArcTo(l,180,l),e.ArcTo(l,360,l),e.MoveTo(e.navAngle,n),e.LineTo(r,l),e.LineTo(a,l),e.LineTo(e.navAngle,1.6*l),e.LineTo(s,l),e.LineTo(o,l),e.Close()],{markerPathString:markerPathString,titlePosX:e.titlePosX,titlePosY:e.titlePosY}},this},a={defaultpalette:["#2D9E46","#F5BE41","#F77604","#D63C22","#006BA6","#92ADAF"],purple:["#4F346B","#623491","#9657D6","#AD74E7","#CBA3F3"],greenred:["#17B92A","#FF3D00","#17B92A","#FF3D00"],greensilver:["#1F700A","#79CC3C","#D4E178","#E6D5C3","#AC875D"],oceanfive:["#00A0B0","#6A4A3C","#CC333F","#EB6841","#EDC951"],garden:["#648A4F","#2B2B29","#DF6126","#FFA337","#F57C85"],gamebookers:["#FF9900","#DCDCDC","#BCBCBC","#3299BB","#727272"],parrot:["#D80351","#F5D908","#00A3EE","#929292","#3F3F3F"],pisycholand:["#FF1919","#FF5E19","#FF9F19","#E4FF19","#29FF19"],makeLOVEnotWAR:["#2C0EF0","#B300FF","#6751F0","#FF006F","#8119FF"],theworldismine:["#F21D1D","#FF2167","#B521FF","#7E2AA8","#000000"],fractalloveone:["#002EFF","#00FFF7","#00FF62","#FFAA00","#FFF700"],fractallovetwo:["#FF9500","#FF0000","#FF00F3","#AA00FF","#002EFF"],fractallove:["#002EFF","#00FFF7","#00FF62","#FFAA00","#F5D908","#FF0000","#FF00F3","#AA00FF"],sprinkles:["#272523","#FFACAC","#FFD700","#00590C","#08006D"],goldenyellow:["#D8B597","#8C4006","#B6690F","#E3C57F","#FFEDBE"],hotaru:["#364C4A","#497C7F","#92C5C0","#858168","#CCBCA5"]}},function(e,t,i){window,e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=4)}([function(e,t,i){var n,r;n=[i(3)],void 0===(r=function(e){function t(n){if(t.is(n,"function"))return i?n():e.on("raphael.DOMload",n);if(t.is(n,E))return t._engine.create[p](t,n.splice(0,3+t.is(n[0],D))).add(n);var r=Array.prototype.slice.call(arguments,0);if(t.is(r[r.length-1],"function")){var a=r.pop();return i?a.call(t._engine.create[p](t,r)):e.on("raphael.DOMload",(function(){a.call(t._engine.create[p](t,r))}))}return t._engine.create[p](t,arguments)}t.version="2.2.0",t.eve=e;var i,n,r,a,o=/[, ]+/,s={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},l=/\{(\d+)\}/g,c="hasOwnProperty",d={doc:document,win:window},h={was:Object.prototype[c].call(d.win,"Raphael"),is:d.win.Raphael},u=function(){this.ca=this.customAttributes={}},p="apply",f="concat",g="ontouchstart"in d.win||d.win.DocumentTouch&&d.doc instanceof DocumentTouch,m="",v=" ",_=String,b="split",w="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[b](v),y={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},x=_.prototype.toLowerCase,C=Math,S=C.max,T=C.min,k=C.abs,A=C.pow,P=C.PI,D="number",E="array",M=Object.prototype.toString,O=(t._ISURL=/^url\(['"]?(.+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),I={NaN:1,Infinity:1,"-Infinity":1},N=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,L=C.round,R=parseFloat,j=parseInt,$=_.prototype.toUpperCase,B=t._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0,class:""},V=t._availableAnimAttrs={blur:D,"clip-rect":"csv",cx:D,cy:D,fill:"colour","fill-opacity":D,"font-size":D,height:D,opacity:D,path:"path",r:D,rx:D,ry:D,stroke:"colour","stroke-opacity":D,"stroke-width":D,transform:"transform",width:D,x:D,y:D},H=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,F={hs:1,rg:1},z=/,?([achlmqrstvxz]),?/gi,U=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,W=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,G=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,q=(t._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),Y=function(e,t){return R(e)-R(t)},Q=function(e){return e},J=t._rectPath=function(e,t,i,n,r){return r?[["M",e+r,t],["l",i-2*r,0],["a",r,r,0,0,1,r,r],["l",0,n-2*r],["a",r,r,0,0,1,-r,r],["l",2*r-i,0],["a",r,r,0,0,1,-r,-r],["l",0,2*r-n],["a",r,r,0,0,1,r,-r],["z"]]:[["M",e,t],["l",i,0],["l",0,n],["l",-i,0],["z"]]},Z=function(e,t,i,n){return null==n&&(n=i),[["M",e,t],["m",0,-n],["a",i,n,0,1,1,0,2*n],["a",i,n,0,1,1,0,-2*n],["z"]]},X=t._getPath={path:function(e){return e.attr("path")},circle:function(e){var t=e.attrs;return Z(t.cx,t.cy,t.r)},ellipse:function(e){var t=e.attrs;return Z(t.cx,t.cy,t.rx,t.ry)},rect:function(e){var t=e.attrs;return J(t.x,t.y,t.width,t.height,t.r)},image:function(e){var t=e.attrs;return J(t.x,t.y,t.width,t.height)},text:function(e){var t=e._getBBox();return J(t.x,t.y,t.width,t.height)},set:function(e){var t=e._getBBox();return J(t.x,t.y,t.width,t.height)}},K=t.mapPath=function(e,t){if(!t)return e;var i,n,r,a,o,s,l;for(r=0,o=(e=Ae(e)).length;r<o;r++)for(a=1,s=(l=e[r]).length;a<s;a+=2)i=t.x(l[a],l[a+1]),n=t.y(l[a],l[a+1]),l[a]=i,l[a+1]=n;return e};if(t._g=d,t.type=d.win.SVGAngle||d.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==t.type){var ee,te=d.doc.createElement("div");if(te.innerHTML='<v:shape adj="1"/>',(ee=te.firstChild).style.behavior="url(#default#VML)",!ee||"object"!=typeof ee.adj)return t.type=m;te=null}function ie(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var i in e)e[c](i)&&(t[i]=ie(e[i]));return t}t.svg=!(t.vml="VML"==t.type),t._Paper=u,t.fn=n=u.prototype=t.prototype,t._id=0,t.is=function(e,t){return"finite"==(t=x.call(t))?!I[c](+e):"array"==t?e instanceof Array:"null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||"array"==t&&Array.isArray&&Array.isArray(e)||M.call(e).slice(8,-1).toLowerCase()==t},t.angle=function(e,i,n,r,a,o){if(null==a){var s=e-n,l=i-r;return s||l?(180+180*C.atan2(-l,-s)/P+360)%360:0}return t.angle(e,i,a,o)-t.angle(n,r,a,o)},t.rad=function(e){return e%360*P/180},t.deg=function(e){return Math.round(180*e/P%360*1e3)/1e3},t.snapTo=function(e,i,n){if(n=t.is(n,"finite")?n:10,t.is(e,E)){for(var r=e.length;r--;)if(k(e[r]-i)<=n)return e[r]}else{var a=i%(e=+e);if(a<n)return i-a;if(a>e-n)return i-a+e}return i},t.createUUID=(r=/[xy]/g,a=function(e){var t=16*C.random()|0;return("x"==e?t:3&t|8).toString(16)},function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(r,a).toUpperCase()}),t.setWindow=function(i){e("raphael.setWindow",t,d.win,i),d.win=i,d.doc=d.win.document,t._engine.initWin&&t._engine.initWin(d.win)};var ne=function(e){if(t.vml){var i,n=/^\s+|\s+$/g;try{var r=new ActiveXObject("htmlfile");r.write("<body>"),r.close(),i=r.body}catch(e){i=createPopup().document.body}var a=i.createTextRange();ne=ce((function(e){try{i.style.color=_(e).replace(n,m);var t=a.queryCommandValue("ForeColor");return"#"+("000000"+(t=(255&t)<<16|65280&t|(16711680&t)>>>16).toString(16)).slice(-6)}catch(e){return"none"}}))}else{var o=d.doc.createElement("i");o.title="Rapha\xebl Colour Picker",o.style.display="none",d.doc.body.appendChild(o),ne=ce((function(e){return o.style.color=e,d.doc.defaultView.getComputedStyle(o,m).getPropertyValue("color")}))}return ne(e)},re=function(){return"hsb("+[this.h,this.s,this.b]+")"},ae=function(){return"hsl("+[this.h,this.s,this.l]+")"},oe=function(){return this.hex},se=function(e,i,n){if(null==i&&t.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(n=e.b,i=e.g,e=e.r),null==i&&t.is(e,"string")){var r=t.getRGB(e);e=r.r,i=r.g,n=r.b}return(e>1||i>1||n>1)&&(e/=255,i/=255,n/=255),[e,i,n]},le=function(e,i,n,r){var a={r:e*=255,g:i*=255,b:n*=255,hex:t.rgb(e,i,n),toString:oe};return t.is(r,"finite")&&(a.opacity=r),a};function ce(e,t,i){return function n(){var r=Array.prototype.slice.call(arguments,0),a=r.join("\u2400"),o=n.cache=n.cache||{},s=n.count=n.count||[];return o[c](a)?(function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return e.push(e.splice(i,1)[0])}(s,a),i?i(o[a]):o[a]):(s.length>=1e3&&delete o[s.shift()],s.push(a),o[a]=e[p](t,r),i?i(o[a]):o[a])}}function de(){return this.hex}function he(e,t){for(var i=[],n=0,r=e.length;r-2*!t>n;n+=2){var a=[{x:+e[n-2],y:+e[n-1]},{x:+e[n],y:+e[n+1]},{x:+e[n+2],y:+e[n+3]},{x:+e[n+4],y:+e[n+5]}];t?n?r-4==n?a[3]={x:+e[0],y:+e[1]}:r-2==n&&(a[2]={x:+e[0],y:+e[1]},a[3]={x:+e[2],y:+e[3]}):a[0]={x:+e[r-2],y:+e[r-1]}:r-4==n?a[3]=a[2]:n||(a[0]={x:+e[n],y:+e[n+1]}),i.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return i}t.color=function(e){var i;return t.is(e,"object")&&"h"in e&&"s"in e&&"b"in e?(i=t.hsb2rgb(e),e.r=i.r,e.g=i.g,e.b=i.b,e.hex=i.hex):t.is(e,"object")&&"h"in e&&"s"in e&&"l"in e?(i=t.hsl2rgb(e),e.r=i.r,e.g=i.g,e.b=i.b,e.hex=i.hex):(t.is(e,"string")&&(e=t.getRGB(e)),t.is(e,"object")&&"r"in e&&"g"in e&&"b"in e?(i=t.rgb2hsl(e),e.h=i.h,e.s=i.s,e.l=i.l,i=t.rgb2hsb(e),e.v=i.b):(e={hex:"none"}).r=e.g=e.b=e.h=e.s=e.v=e.l=-1),e.toString=oe,e},t.hsb2rgb=function(e,t,i,n){var r,a,o,s,l;return this.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(i=e.b,t=e.s,n=e.o,e=e.h),s=(l=i*t)*(1-k((e=(e*=360)%360/60)%2-1)),r=a=o=i-l,le(r+=[l,s,0,0,s,l][e=~~e],a+=[s,l,l,s,0,0][e],o+=[0,0,s,l,l,s][e],n)},t.hsl2rgb=function(e,t,i,n){var r,a,o,s,l;return this.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(i=e.l,t=e.s,e=e.h),(e>1||t>1||i>1)&&(e/=360,t/=100,i/=100),e=(e*=360)%360/60,s=(l=2*t*(i<.5?i:1-i))*(1-k(e%2-1)),r=a=o=i-l/2,le(r+=[l,s,0,0,s,l][e=~~e],a+=[s,l,l,s,0,0][e],o+=[0,0,s,l,l,s][e],n)},t.rgb2hsb=function(e,t,i){var n,r;return e=(i=se(e,t,i))[0],t=i[1],i=i[2],{h:((0==(r=(n=S(e,t,i))-T(e,t,i))?null:n==e?(t-i)/r:n==t?(i-e)/r+2:(e-t)/r+4)+360)%6*60/360,s:0==r?0:r/n,b:n,toString:re}},t.rgb2hsl=function(e,t,i){var n,r,a,o;return e=(i=se(e,t,i))[0],t=i[1],i=i[2],n=((r=S(e,t,i))+(a=T(e,t,i)))/2,{h:((0==(o=r-a)?null:r==e?(t-i)/o:r==t?(i-e)/o+2:(e-t)/o+4)+360)%6*60/360,s:0==o?0:n<.5?o/(2*n):o/(2-2*n),l:n,toString:ae}},t._path2string=function(){return this.join(",").replace(z,"$1")},t._preload=function(e,t){var i=d.doc.createElement("img");i.style.cssText="position:absolute;left:-9999em;top:-9999em",i.onload=function(){t.call(this),this.onload=null,d.doc.body.removeChild(this)},i.onerror=function(){d.doc.body.removeChild(this)},d.doc.body.appendChild(i),i.src=e},t.getRGB=ce((function(e){if(!e||(e=_(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:de};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none",toString:de};!F[c](e.toLowerCase().substring(0,2))&&"#"!=e.charAt()&&(e=ne(e));var i,n,r,a,o,s,l=e.match(O);return l?(l[2]&&(r=j(l[2].substring(5),16),n=j(l[2].substring(3,5),16),i=j(l[2].substring(1,3),16)),l[3]&&(r=j((o=l[3].charAt(3))+o,16),n=j((o=l[3].charAt(2))+o,16),i=j((o=l[3].charAt(1))+o,16)),l[4]&&(s=l[4][b](H),i=R(s[0]),"%"==s[0].slice(-1)&&(i*=2.55),n=R(s[1]),"%"==s[1].slice(-1)&&(n*=2.55),r=R(s[2]),"%"==s[2].slice(-1)&&(r*=2.55),"rgba"==l[1].toLowerCase().slice(0,4)&&(a=R(s[3])),s[3]&&"%"==s[3].slice(-1)&&(a/=100)),l[5]?(s=l[5][b](H),i=R(s[0]),"%"==s[0].slice(-1)&&(i*=2.55),n=R(s[1]),"%"==s[1].slice(-1)&&(n*=2.55),r=R(s[2]),"%"==s[2].slice(-1)&&(r*=2.55),("deg"==s[0].slice(-3)||"\xb0"==s[0].slice(-1))&&(i/=360),"hsba"==l[1].toLowerCase().slice(0,4)&&(a=R(s[3])),s[3]&&"%"==s[3].slice(-1)&&(a/=100),t.hsb2rgb(i,n,r,a)):l[6]?(s=l[6][b](H),i=R(s[0]),"%"==s[0].slice(-1)&&(i*=2.55),n=R(s[1]),"%"==s[1].slice(-1)&&(n*=2.55),r=R(s[2]),"%"==s[2].slice(-1)&&(r*=2.55),("deg"==s[0].slice(-3)||"\xb0"==s[0].slice(-1))&&(i/=360),"hsla"==l[1].toLowerCase().slice(0,4)&&(a=R(s[3])),s[3]&&"%"==s[3].slice(-1)&&(a/=100),t.hsl2rgb(i,n,r,a)):((l={r:i,g:n,b:r,toString:de}).hex="#"+(16777216|r|n<<8|i<<16).toString(16).slice(1),t.is(a,"finite")&&(l.opacity=a),l)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:de}}),t),t.hsb=ce((function(e,i,n){return t.hsb2rgb(e,i,n).hex})),t.hsl=ce((function(e,i,n){return t.hsl2rgb(e,i,n).hex})),t.rgb=ce((function(e,t,i){function n(e){return e+.5|0}return"#"+(16777216|n(i)|n(t)<<8|n(e)<<16).toString(16).slice(1)})),t.getColor=function(e){var t=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},i=this.hsb2rgb(t.h,t.s,t.b);return t.h+=.075,t.h>1&&(t.h=0,t.s-=.2,t.s<=0&&(this.getColor.start={h:0,s:1,b:t.b})),i.hex},t.getColor.reset=function(){delete this.start},t.parsePathString=function(e){if(!e)return null;var i=ue(e);if(i.arr)return be(i.arr);var n={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},r=[];return t.is(e,E)&&t.is(e[0],E)&&(r=be(e)),r.length||_(e).replace(U,(function(e,t,i){var a=[],o=t.toLowerCase();if(i.replace(G,(function(e,t){t&&a.push(+t)})),"m"==o&&a.length>2&&(r.push([t][f](a.splice(0,2))),o="l",t="m"==t?"l":"L"),"r"==o)r.push([t][f](a));else for(;a.length>=n[o]&&(r.push([t][f](a.splice(0,n[o]))),n[o]););})),r.toString=t._path2string,i.arr=be(r),r},t.parseTransformString=ce((function(e){if(!e)return null;var i=[];return t.is(e,E)&&t.is(e[0],E)&&(i=be(e)),i.length||_(e).replace(W,(function(e,t,n){var r=[];x.call(t),n.replace(G,(function(e,t){t&&r.push(+t)})),i.push([t][f](r))})),i.toString=t._path2string,i}));var ue=function e(t){var i=e.ps=e.ps||{};return i[t]?i[t].sleep=100:i[t]={sleep:100},setTimeout((function(){for(var e in i)i[c](e)&&e!=t&&(i[e].sleep--,!i[e].sleep&&delete i[e])})),i[t]};function pe(e,t,i,n,r){return e*(e*(-3*t+9*i-9*n+3*r)+6*t-12*i+6*n)-3*t+3*i}function fe(e,t,i,n,r,a,o,s,l){null==l&&(l=1);for(var c=(l=l>1?1:l<0?0:l)/2,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],u=0,p=0;p<12;p++){var f=c*d[p]+c,g=pe(f,e,i,r,o),m=pe(f,t,n,a,s),v=g*g+m*m;u+=h[p]*C.sqrt(v)}return c*u}function ge(e,t,i,n,r,a,o,s){if(!(S(e,i)<T(r,o)||T(e,i)>S(r,o)||S(t,n)<T(a,s)||T(t,n)>S(a,s))){var l=(e-i)*(a-s)-(t-n)*(r-o);if(l){var c=((e*n-t*i)*(r-o)-(e-i)*(r*s-a*o))/l,d=((e*n-t*i)*(a-s)-(t-n)*(r*s-a*o))/l,h=+c.toFixed(2),u=+d.toFixed(2);if(!(h<+T(e,i).toFixed(2)||h>+S(e,i).toFixed(2)||h<+T(r,o).toFixed(2)||h>+S(r,o).toFixed(2)||u<+T(t,n).toFixed(2)||u>+S(t,n).toFixed(2)||u<+T(a,s).toFixed(2)||u>+S(a,s).toFixed(2)))return{x:c,y:d}}}}function me(e,i,n){var r=t.bezierBBox(e),a=t.bezierBBox(i);if(!t.isBBoxIntersect(r,a))return n?0:[];for(var o=fe.apply(0,e),s=fe.apply(0,i),l=S(~~(o/5),1),c=S(~~(s/5),1),d=[],h=[],u={},p=n?0:[],f=0;f<l+1;f++){var g=t.findDotsAtSegment.apply(t,e.concat(f/l));d.push({x:g.x,y:g.y,t:f/l})}for(f=0;f<c+1;f++)g=t.findDotsAtSegment.apply(t,i.concat(f/c)),h.push({x:g.x,y:g.y,t:f/c});for(f=0;f<l;f++)for(var m=0;m<c;m++){var v=d[f],_=d[f+1],b=h[m],w=h[m+1],y=k(_.x-v.x)<.001?"y":"x",x=k(w.x-b.x)<.001?"y":"x",C=ge(v.x,v.y,_.x,_.y,b.x,b.y,w.x,w.y);if(C){if(u[C.x.toFixed(4)]==C.y.toFixed(4))continue;u[C.x.toFixed(4)]=C.y.toFixed(4);var A=v.t+k((C[y]-v[y])/(_[y]-v[y]))*(_.t-v.t),P=b.t+k((C[x]-b[x])/(w[x]-b[x]))*(w.t-b.t);A>=0&&A<=1.001&&P>=0&&P<=1.001&&(n?p++:p.push({x:C.x,y:C.y,t1:T(A,1),t2:T(P,1)}))}}return p}function ve(e,i,n){e=t._path2curve(e),i=t._path2curve(i);for(var r,a,o,s,l,c,d,h,u,p,f=n?0:[],g=0,m=e.length;g<m;g++){var v=e[g];if("M"==v[0])r=l=v[1],a=c=v[2];else{"C"==v[0]?(r=(u=[r,a].concat(v.slice(1)))[6],a=u[7]):(u=[r,a,r,a,l,c,l,c],r=l,a=c);for(var _=0,b=i.length;_<b;_++){var w=i[_];if("M"==w[0])o=d=w[1],s=h=w[2];else{"C"==w[0]?(o=(p=[o,s].concat(w.slice(1)))[6],s=p[7]):(p=[o,s,o,s,d,h,d,h],o=d,s=h);var y=me(u,p,n);if(n)f+=y;else{for(var x=0,C=y.length;x<C;x++)y[x].segment1=g,y[x].segment2=_,y[x].bez1=u,y[x].bez2=p;f=f.concat(y)}}}}}return f}t.findDotsAtSegment=function(e,t,i,n,r,a,o,s,l){var c=1-l,d=A(c,3),h=A(c,2),u=l*l,p=u*l,f=d*e+3*h*l*i+3*c*l*l*r+p*o,g=d*t+3*h*l*n+3*c*l*l*a+p*s,m=e+2*l*(i-e)+u*(r-2*i+e),v=t+2*l*(n-t)+u*(a-2*n+t),_=i+2*l*(r-i)+u*(o-2*r+i),b=n+2*l*(a-n)+u*(s-2*a+n),w=c*e+l*i,y=c*t+l*n,x=c*r+l*o,S=c*a+l*s,T=90-180*C.atan2(m-_,v-b)/P;return(m>_||v<b)&&(T+=180),{x:f,y:g,m:{x:m,y:v},n:{x:_,y:b},start:{x:w,y:y},end:{x:x,y:S},alpha:T}},t.bezierBBox=function(e,i,n,r,a,o,s,l){t.is(e,"array")||(e=[e,i,n,r,a,o,s,l]);var c=ke.apply(null,e);return{x:c.min.x,y:c.min.y,x2:c.max.x,y2:c.max.y,width:c.max.x-c.min.x,height:c.max.y-c.min.y}},t.isPointInsideBBox=function(e,t,i){return t>=e.x&&t<=e.x2&&i>=e.y&&i<=e.y2},t.isBBoxIntersect=function(e,i){var n=t.isPointInsideBBox;return n(i,e.x,e.y)||n(i,e.x2,e.y)||n(i,e.x,e.y2)||n(i,e.x2,e.y2)||n(e,i.x,i.y)||n(e,i.x2,i.y)||n(e,i.x,i.y2)||n(e,i.x2,i.y2)||(e.x<i.x2&&e.x>i.x||i.x<e.x2&&i.x>e.x)&&(e.y<i.y2&&e.y>i.y||i.y<e.y2&&i.y>e.y)},t.pathIntersection=function(e,t){return ve(e,t)},t.pathIntersectionNumber=function(e,t){return ve(e,t,1)},t.isPointInsidePath=function(e,i,n){var r=t.pathBBox(e);return t.isPointInsideBBox(r,i,n)&&ve(e,[["M",i,n],["H",r.x2+10]],1)%2==1},t._removedFactory=function(t){return function(){e("raphael.log",null,"Rapha\xebl: you are calling to method \u201c"+t+"\u201d of removed object",t)}};var _e=t.pathBBox=function(e){var t=ue(e);if(t.bbox)return ie(t.bbox);if(!e)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var i,n=0,r=0,a=[],o=[],s=0,l=(e=Ae(e)).length;s<l;s++)if("M"==(i=e[s])[0])n=i[1],r=i[2],a.push(n),o.push(r);else{var c=ke(n,r,i[1],i[2],i[3],i[4],i[5],i[6]);a=a[f](c.min.x,c.max.x),o=o[f](c.min.y,c.max.y),n=i[5],r=i[6]}var d=T[p](0,a),h=T[p](0,o),u=S[p](0,a),g=S[p](0,o),m=u-d,v=g-h,_={x:d,y:h,x2:u,y2:g,width:m,height:v,cx:d+m/2,cy:h+v/2};return t.bbox=ie(_),_},be=function(e){var i=ie(e);return i.toString=t._path2string,i},we=t._pathToRelative=function(e){var i=ue(e);if(i.rel)return be(i.rel);t.is(e,E)&&t.is(e&&e[0],E)||(e=t.parsePathString(e));var n=[],r=0,a=0,o=0,s=0,l=0;"M"==e[0][0]&&(o=r=e[0][1],s=a=e[0][2],l++,n.push(["M",r,a]));for(var c=l,d=e.length;c<d;c++){var h=n[c]=[],u=e[c];if(u[0]!=x.call(u[0]))switch(h[0]=x.call(u[0]),h[0]){case"a":h[1]=u[1],h[2]=u[2],h[3]=u[3],h[4]=u[4],h[5]=u[5],h[6]=+(u[6]-r).toFixed(3),h[7]=+(u[7]-a).toFixed(3);break;case"v":h[1]=+(u[1]-a).toFixed(3);break;case"m":o=u[1],s=u[2];default:for(var p=1,f=u.length;p<f;p++)h[p]=+(u[p]-(p%2?r:a)).toFixed(3)}else{h=n[c]=[],"m"==u[0]&&(o=u[1]+r,s=u[2]+a);for(var g=0,m=u.length;g<m;g++)n[c][g]=u[g]}var v=n[c].length;switch(n[c][0]){case"z":r=o,a=s;break;case"h":r+=+n[c][v-1];break;case"v":a+=+n[c][v-1];break;default:r+=+n[c][v-2],a+=+n[c][v-1]}}return n.toString=t._path2string,i.rel=be(n),n},ye=t._pathToAbsolute=function(e){var i=ue(e);if(i.abs)return be(i.abs);if(t.is(e,E)&&t.is(e&&e[0],E)||(e=t.parsePathString(e)),!e||!e.length)return[["M",0,0]];var n=[],r=0,a=0,o=0,s=0,l=0;"M"==e[0][0]&&(o=r=+e[0][1],s=a=+e[0][2],l++,n[0]=["M",r,a]);for(var c,d,h=3==e.length&&"M"==e[0][0]&&"R"==e[1][0].toUpperCase()&&"Z"==e[2][0].toUpperCase(),u=l,p=e.length;u<p;u++){if(n.push(c=[]),(d=e[u])[0]!=$.call(d[0]))switch(c[0]=$.call(d[0]),c[0]){case"A":c[1]=d[1],c[2]=d[2],c[3]=d[3],c[4]=d[4],c[5]=d[5],c[6]=+(d[6]+r),c[7]=+(d[7]+a);break;case"V":c[1]=+d[1]+a;break;case"H":c[1]=+d[1]+r;break;case"R":for(var g=[r,a][f](d.slice(1)),m=2,v=g.length;m<v;m++)g[m]=+g[m]+r,g[++m]=+g[m]+a;n.pop(),n=n[f](he(g,h));break;case"M":o=+d[1]+r,s=+d[2]+a;default:for(m=1,v=d.length;m<v;m++)c[m]=+d[m]+(m%2?r:a)}else if("R"==d[0])g=[r,a][f](d.slice(1)),n.pop(),n=n[f](he(g,h)),c=["R"][f](d.slice(-2));else for(var _=0,b=d.length;_<b;_++)c[_]=d[_];switch(c[0]){case"Z":r=o,a=s;break;case"H":r=c[1];break;case"V":a=c[1];break;case"M":o=c[c.length-2],s=c[c.length-1];default:r=c[c.length-2],a=c[c.length-1]}}return n.toString=t._path2string,i.abs=be(n),n},xe=function(e,t,i,n){return[e,t,i,n,i,n]},Ce=function(e,t,i,n,r,a){return[1/3*e+2/3*i,1/3*t+2/3*n,1/3*r+2/3*i,1/3*a+2/3*n,r,a]},Se=function e(t,i,n,r,a,o,s,l,c,d){var h,u=120*P/180,p=P/180*(+a||0),g=[],m=ce((function(e,t,i){return{x:e*C.cos(i)-t*C.sin(i),y:e*C.sin(i)+t*C.cos(i)}}));if(d)D=d[0],E=d[1],T=d[2],A=d[3];else{t=(h=m(t,i,-p)).x,i=h.y,l=(h=m(l,c,-p)).x,c=h.y,C.cos(P/180*a),C.sin(P/180*a);var v=(t-l)/2,_=(i-c)/2,w=v*v/(n*n)+_*_/(r*r);w>1&&(n*=w=C.sqrt(w),r*=w);var y=n*n,x=r*r,S=(o==s?-1:1)*C.sqrt(k((y*x-y*_*_-x*v*v)/(y*_*_+x*v*v))),T=S*n*_/r+(t+l)/2,A=S*-r*v/n+(i+c)/2,D=C.asin(((i-A)/r).toFixed(9)),E=C.asin(((c-A)/r).toFixed(9));(D=t<T?P-D:D)<0&&(D=2*P+D),(E=l<T?P-E:E)<0&&(E=2*P+E),s&&D>E&&(D-=2*P),!s&&E>D&&(E-=2*P)}var M=E-D;if(k(M)>u){var O=E,I=l,N=c;E=D+u*(s&&E>D?1:-1),g=e(l=T+n*C.cos(E),c=A+r*C.sin(E),n,r,a,0,s,I,N,[E,O,T,A])}M=E-D;var L=C.cos(D),R=C.sin(D),j=C.cos(E),$=C.sin(E),B=C.tan(M/4),V=4/3*n*B,H=4/3*r*B,F=[t,i],z=[t+V*R,i-H*L],U=[l+V*$,c-H*j],W=[l,c];if(z[0]=2*F[0]-z[0],z[1]=2*F[1]-z[1],d)return[z,U,W][f](g);for(var G=[],q=0,Y=(g=[z,U,W][f](g).join()[b](",")).length;q<Y;q++)G[q]=q%2?m(g[q-1],g[q],p).y:m(g[q],g[q+1],p).x;return G},Te=function(e,t,i,n,r,a,o,s,l){var c=1-l;return{x:A(c,3)*e+3*A(c,2)*l*i+3*c*l*l*r+A(l,3)*o,y:A(c,3)*t+3*A(c,2)*l*n+3*c*l*l*a+A(l,3)*s}},ke=ce((function(e,t,i,n,r,a,o,s){var l,c=r-2*i+e-(o-2*r+i),d=2*(i-e)-2*(r-i),h=e-i,u=(-d+C.sqrt(d*d-4*c*h))/2/c,f=(-d-C.sqrt(d*d-4*c*h))/2/c,g=[t,s],m=[e,o];return k(u)>"1e12"&&(u=.5),k(f)>"1e12"&&(f=.5),u>0&&u<1&&(l=Te(e,t,i,n,r,a,o,s,u),m.push(l.x),g.push(l.y)),f>0&&f<1&&(l=Te(e,t,i,n,r,a,o,s,f),m.push(l.x),g.push(l.y)),c=a-2*n+t-(s-2*a+n),h=t-n,u=(-(d=2*(n-t)-2*(a-n))+C.sqrt(d*d-4*c*h))/2/c,f=(-d-C.sqrt(d*d-4*c*h))/2/c,k(u)>"1e12"&&(u=.5),k(f)>"1e12"&&(f=.5),u>0&&u<1&&(l=Te(e,t,i,n,r,a,o,s,u),m.push(l.x),g.push(l.y)),f>0&&f<1&&(l=Te(e,t,i,n,r,a,o,s,f),m.push(l.x),g.push(l.y)),{min:{x:T[p](0,m),y:T[p](0,g)},max:{x:S[p](0,m),y:S[p](0,g)}}})),Ae=t._path2curve=ce((function(e,t){var i=!t&&ue(e);if(!t&&i.curve)return be(i.curve);for(var n=ye(e),r=t&&ye(t),a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=function(e,t,i){var n,r;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"][f](Se[p](0,[t.x,t.y][f](e.slice(1))));break;case"S":"C"==i||"S"==i?(n=2*t.x-t.bx,r=2*t.y-t.by):(n=t.x,r=t.y),e=["C",n,r][f](e.slice(1));break;case"T":"Q"==i||"T"==i?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"][f](Ce(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"][f](Ce(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"][f](xe(t.x,t.y,e[1],e[2]));break;case"H":e=["C"][f](xe(t.x,t.y,e[1],t.y));break;case"V":e=["C"][f](xe(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"][f](xe(t.x,t.y,t.X,t.Y))}return e},l=function(e,t){if(e[t].length>7){e[t].shift();for(var i=e[t];i.length;)d[t]="A",r&&(h[t]="A"),e.splice(t++,0,["C"][f](i.splice(0,6)));e.splice(t,1),v=S(n.length,r&&r.length||0)}},c=function(e,t,i,a,o){e&&t&&"M"==e[o][0]&&"M"!=t[o][0]&&(t.splice(o,0,["M",a.x,a.y]),i.bx=0,i.by=0,i.x=e[o][1],i.y=e[o][2],v=S(n.length,r&&r.length||0))},d=[],h=[],u="",g="",m=0,v=S(n.length,r&&r.length||0);m<v;m++){n[m]&&(u=n[m][0]),"C"!=u&&(d[m]=u,m&&(g=d[m-1])),n[m]=s(n[m],a,g),"A"!=d[m]&&"C"==u&&(d[m]="C"),l(n,m),r&&(r[m]&&(u=r[m][0]),"C"!=u&&(h[m]=u,m&&(g=h[m-1])),r[m]=s(r[m],o,g),"A"!=h[m]&&"C"==u&&(h[m]="C"),l(r,m)),c(n,r,a,o,m),c(r,n,o,a,m);var _=n[m],b=r&&r[m],w=_.length,y=r&&b.length;a.x=_[w-2],a.y=_[w-1],a.bx=R(_[w-4])||a.x,a.by=R(_[w-3])||a.y,o.bx=r&&(R(b[y-4])||o.x),o.by=r&&(R(b[y-3])||o.y),o.x=r&&b[y-2],o.y=r&&b[y-1]}return r||(i.curve=be(n)),r?[n,r]:n}),null,be),Pe=(t._parseDots=ce((function(e){for(var i=[],n=0,r=e.length;n<r;n++){var a={},o=e[n].match(/^([^:]*):?([\d\.]*)/);if(a.color=t.getRGB(o[1]),a.color.error)return null;a.opacity=a.color.opacity,a.color=a.color.hex,o[2]&&(a.offset=o[2]+"%"),i.push(a)}for(n=1,r=i.length-1;n<r;n++)if(!i[n].offset){for(var s=R(i[n-1].offset||0),l=0,c=n+1;c<r;c++)if(i[c].offset){l=i[c].offset;break}l||(l=100,c=r);for(var d=((l=R(l))-s)/(c-n+1);n<c;n++)s+=d,i[n].offset=s+"%"}return i})),t._tear=function(e,t){e==t.top&&(t.top=e.prev),e==t.bottom&&(t.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)}),De=(t._tofront=function(e,t){t.top!==e&&(Pe(e,t),e.next=null,e.prev=t.top,t.top.next=e,t.top=e)},t._toback=function(e,t){t.bottom!==e&&(Pe(e,t),e.next=t.bottom,e.prev=null,t.bottom.prev=e,t.bottom=e)},t._insertafter=function(e,t,i){Pe(e,i),t==i.top&&(i.top=e),t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e},t._insertbefore=function(e,t,i){Pe(e,i),t==i.bottom&&(i.bottom=e),t.prev&&(t.prev.next=e),e.prev=t.prev,t.prev=e,e.next=t},t.toMatrix=function(e,t){var i=_e(e),n={_:{transform:m},getBBox:function(){return i}};return Ee(n,t),n.matrix}),Ee=(t.transformPath=function(e,t){return K(e,De(e,t))},t._extractTransform=function(e,i){if(null==i)return e._.transform;i=_(i).replace(/\.{3}|\u2026/g,e._.transform||m);var n,r,a=t.parseTransformString(i),o=0,s=1,l=1,c=e._,d=new Ie;if(c.transform=a||[],a)for(var h=0,u=a.length;h<u;h++){var p,f,g,v,b,w=a[h],y=w.length,x=_(w[0]).toLowerCase(),C=w[0]!=x,S=C?d.invert():0;"t"==x&&3==y?C?(p=S.x(0,0),f=S.y(0,0),g=S.x(w[1],w[2]),v=S.y(w[1],w[2]),d.translate(g-p,v-f)):d.translate(w[1],w[2]):"r"==x?2==y?(b=b||e.getBBox(1),d.rotate(w[1],b.x+b.width/2,b.y+b.height/2),o+=w[1]):4==y&&(C?(g=S.x(w[2],w[3]),v=S.y(w[2],w[3]),d.rotate(w[1],g,v)):d.rotate(w[1],w[2],w[3]),o+=w[1]):"s"==x?2==y||3==y?(b=b||e.getBBox(1),d.scale(w[1],w[y-1],b.x+b.width/2,b.y+b.height/2),s*=w[1],l*=w[y-1]):5==y&&(C?(g=S.x(w[3],w[4]),v=S.y(w[3],w[4]),d.scale(w[1],w[2],g,v)):d.scale(w[1],w[2],w[3],w[4]),s*=w[1],l*=w[2]):"m"==x&&7==y&&d.add(w[1],w[2],w[3],w[4],w[5],w[6]),c.dirtyT=1,e.matrix=d}e.matrix=d,c.sx=s,c.sy=l,c.deg=o,c.dx=n=d.e,c.dy=r=d.f,1==s&&1==l&&!o&&c.bbox?(c.bbox.x+=+n,c.bbox.y+=+r):c.dirtyT=1}),Me=function(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return 4==e.length?[t,0,e[2],e[3]]:[t,0];case"s":return 5==e.length?[t,1,1,e[3],e[4]]:3==e.length?[t,1,1]:[t,1]}},Oe=t._equaliseTransform=function(e,i){i=_(i).replace(/\.{3}|\u2026/g,e),e=t.parseTransformString(e)||[],i=t.parseTransformString(i)||[];for(var n,r,a,o,s=S(e.length,i.length),l=[],c=[],d=0;d<s;d++){if(a=e[d]||Me(i[d]),o=i[d]||Me(a),a[0]!=o[0]||"r"==a[0].toLowerCase()&&(a[2]!=o[2]||a[3]!=o[3])||"s"==a[0].toLowerCase()&&(a[3]!=o[3]||a[4]!=o[4]))return;for(l[d]=[],c[d]=[],n=0,r=S(a.length,o.length);n<r;n++)n in a&&(l[d][n]=a[n]),n in o&&(c[d][n]=o[n])}return{from:l,to:c}};function Ie(e,t,i,n,r,a){null!=e?(this.a=+e,this.b=+t,this.c=+i,this.d=+n,this.e=+r,this.f=+a):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}t._getContainer=function(e,i,n,r){var a;if(null!=(a=null!=r||t.is(e,"object")?e:d.doc.getElementById(e)))return a.tagName?null==i?{container:a,width:a.style.pixelWidth||a.offsetWidth,height:a.style.pixelHeight||a.offsetHeight}:{container:a,width:i,height:n}:{container:1,x:e,y:i,width:n,height:r}},t.pathToRelative=we,t._engine={},t.path2curve=Ae,t.matrix=function(e,t,i,n,r,a){return new Ie(e,t,i,n,r,a)},function(e){function i(e){return e[0]*e[0]+e[1]*e[1]}function n(e){var t=C.sqrt(i(e));e[0]&&(e[0]/=t),e[1]&&(e[1]/=t)}e.add=function(e,t,i,n,r,a){var o,s,l,c,d=[[],[],[]],h=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],u=[[e,i,r],[t,n,a],[0,0,1]];for(e&&e instanceof Ie&&(u=[[e.a,e.c,e.e],[e.b,e.d,e.f],[0,0,1]]),o=0;o<3;o++)for(s=0;s<3;s++){for(c=0,l=0;l<3;l++)c+=h[o][l]*u[l][s];d[o][s]=c}this.a=d[0][0],this.b=d[1][0],this.c=d[0][1],this.d=d[1][1],this.e=d[0][2],this.f=d[1][2]},e.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new Ie(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},e.clone=function(){return new Ie(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(e,t){this.add(1,0,0,1,e,t)},e.scale=function(e,t,i,n){null==t&&(t=e),(i||n)&&this.add(1,0,0,1,i,n),this.add(e,0,0,t,0,0),(i||n)&&this.add(1,0,0,1,-i,-n)},e.rotate=function(e,i,n){e=t.rad(e),i=i||0,n=n||0;var r=+C.cos(e).toFixed(9),a=+C.sin(e).toFixed(9);this.add(r,a,-a,r,i,n),this.add(1,0,0,1,-i,-n)},e.x=function(e,t){return e*this.a+t*this.c+this.e},e.y=function(e,t){return e*this.b+t*this.d+this.f},e.get=function(e){return+this[_.fromCharCode(97+e)].toFixed(4)},e.toString=function(){return t.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},e.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.split=function(){var e={};e.dx=this.e,e.dy=this.f;var r=[[this.a,this.c],[this.b,this.d]];e.scalex=C.sqrt(i(r[0])),n(r[0]),e.shear=r[0][0]*r[1][0]+r[0][1]*r[1][1],r[1]=[r[1][0]-r[0][0]*e.shear,r[1][1]-r[0][1]*e.shear],e.scaley=C.sqrt(i(r[1])),n(r[1]),e.shear/=e.scaley;var a=-r[0][1],o=r[1][1];return o<0?(e.rotate=t.deg(C.acos(o)),a<0&&(e.rotate=360-e.rotate)):e.rotate=t.deg(C.asin(a)),e.isSimple=!(+e.shear.toFixed(9)||e.scalex.toFixed(9)!=e.scaley.toFixed(9)&&e.rotate),e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate,e.noRotation=!+e.shear.toFixed(9)&&!e.rotate,e},e.toTransformString=function(e){var t=e||this[b]();return t.isSimple?(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[t.dx,t.dy]:m)+(1!=t.scalex||1!=t.scaley?"s"+[t.scalex,t.scaley,0,0]:m)+(t.rotate?"r"+[t.rotate,0,0]:m)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(Ie.prototype);for(var Ne=function(){this.returnValue=!1},Le=function(){return this.originalEvent.preventDefault()},Re=function(){this.cancelBubble=!0},je=function(){return this.originalEvent.stopPropagation()},$e=function(e){var t=d.doc.documentElement.scrollTop||d.doc.body.scrollTop,i=d.doc.documentElement.scrollLeft||d.doc.body.scrollLeft;return{x:e.clientX+i,y:e.clientY+t}},Be=d.doc.addEventListener?function(e,t,i,n){var r=function(e){var t=$e(e);return i.call(n,e,t.x,t.y)};if(e.addEventListener(t,r,!1),g&&y[t]){var a=function(t){for(var r=$e(t),a=t,o=0,s=t.targetTouches&&t.targetTouches.length;o<s;o++)if(t.targetTouches[o].target==e){(t=t.targetTouches[o]).originalEvent=a,t.preventDefault=Le,t.stopPropagation=je;break}return i.call(n,t,r.x,r.y)};e.addEventListener(y[t],a,!1)}return function(){return e.removeEventListener(t,r,!1),g&&y[t]&&e.removeEventListener(y[t],a,!1),!0}}:d.doc.attachEvent?function(e,t,i,n){var r=function(e){e=e||d.win.event;var t=d.doc.documentElement.scrollTop||d.doc.body.scrollTop,r=d.doc.documentElement.scrollLeft||d.doc.body.scrollLeft,a=e.clientX+r,o=e.clientY+t;return e.preventDefault=e.preventDefault||Ne,e.stopPropagation=e.stopPropagation||Re,i.call(n,e,a,o)};return e.attachEvent("on"+t,r),function(){return e.detachEvent("on"+t,r),!0}}:void 0,Ve=[],He=function(t){for(var i,n=t.clientX,r=t.clientY,a=d.doc.documentElement.scrollTop||d.doc.body.scrollTop,o=d.doc.documentElement.scrollLeft||d.doc.body.scrollLeft,s=Ve.length;s--;){if(i=Ve[s],g&&t.touches){for(var l,c=t.touches.length;c--;)if((l=t.touches[c]).identifier==i.el._drag.id){n=l.clientX,r=l.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();var h,u=i.el.node,p=u.nextSibling,f=u.parentNode,m=u.style.display;d.win.opera&&f.removeChild(u),u.style.display="none",h=i.el.paper.getElementByPoint(n,r),u.style.display=m,d.win.opera&&(p?f.insertBefore(u,p):f.appendChild(u)),h&&e("raphael.drag.over."+i.el.id,i.el,h),n+=o,r+=a,e("raphael.drag.move."+i.el.id,i.move_scope||i.el,n-i.el._drag.x,r-i.el._drag.y,n,r,t)}},Fe=function i(n){t.unmousemove(He).unmouseup(i);for(var r,a=Ve.length;a--;)(r=Ve[a]).el._drag={},e("raphael.drag.end."+r.el.id,r.end_scope||r.start_scope||r.move_scope||r.el,n);Ve=[]},ze=t.el={},Ue=w.length;Ue--;)!function(e){t[e]=ze[e]=function(i,n){return t.is(i,"function")&&(this.events=this.events||[],this.events.push({name:e,f:i,unbind:Be(this.shape||this.node||d.doc,e,i,n||this)})),this},t["un"+e]=ze["un"+e]=function(i){for(var n=this.events||[],r=n.length;r--;)n[r].name!=e||!t.is(i,"undefined")&&n[r].f!=i||(n[r].unbind(),n.splice(r,1),!n.length&&delete this.events);return this}}(w[Ue]);ze.data=function(i,n){var r=q[this.id]=q[this.id]||{};if(0==arguments.length)return r;if(1==arguments.length){if(t.is(i,"object")){for(var a in i)i[c](a)&&this.data(a,i[a]);return this}return e("raphael.data.get."+this.id,this,r[i],i),r[i]}return r[i]=n,e("raphael.data.set."+this.id,this,n,i),this},ze.removeData=function(e){return null==e?q[this.id]={}:q[this.id]&&delete q[this.id][e],this},ze.getData=function(){return ie(q[this.id]||{})},ze.hover=function(e,t,i,n){return this.mouseover(e,i).mouseout(t,n||i)},ze.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var We=[];function Ge(){return this.x+v+this.y+v+this.width+" \xd7 "+this.height}ze.drag=function(i,n,r,a,o,s){function l(l){(l.originalEvent||l).preventDefault();var c=l.clientX,h=l.clientY,u=d.doc.documentElement.scrollTop||d.doc.body.scrollTop,p=d.doc.documentElement.scrollLeft||d.doc.body.scrollLeft;if(this._drag.id=l.identifier,g&&l.touches)for(var f,m=l.touches.length;m--;)if(f=l.touches[m],this._drag.id=f.identifier,f.identifier==this._drag.id){c=f.clientX,h=f.clientY;break}this._drag.x=c+p,this._drag.y=h+u,!Ve.length&&t.mousemove(He).mouseup(Fe),Ve.push({el:this,move_scope:a,start_scope:o,end_scope:s}),n&&e.on("raphael.drag.start."+this.id,n),i&&e.on("raphael.drag.move."+this.id,i),r&&e.on("raphael.drag.end."+this.id,r),e("raphael.drag.start."+this.id,o||a||this,l.clientX+p,l.clientY+u,l)}return this._drag={},We.push({el:this,start:l}),this.mousedown(l),this},ze.onDragOver=function(t){t?e.on("raphael.drag.over."+this.id,t):e.unbind("raphael.drag.over."+this.id)},ze.undrag=function(){for(var i=We.length;i--;)We[i].el==this&&(this.unmousedown(We[i].start),We.splice(i,1),e.unbind("raphael.drag.*."+this.id));!We.length&&t.unmousemove(He).unmouseup(Fe),Ve=[]},n.circle=function(e,i,n){var r=t._engine.circle(this,e||0,i||0,n||0);return this.__set__&&this.__set__.push(r),r},n.rect=function(e,i,n,r,a){var o=t._engine.rect(this,e||0,i||0,n||0,r||0,a||0);return this.__set__&&this.__set__.push(o),o},n.ellipse=function(e,i,n,r){var a=t._engine.ellipse(this,e||0,i||0,n||0,r||0);return this.__set__&&this.__set__.push(a),a},n.path=function(e){e&&!t.is(e,"string")&&!t.is(e[0],E)&&(e+=m);var i=t._engine.path(t.format[p](t,arguments),this);return this.__set__&&this.__set__.push(i),i},n.image=function(e,i,n,r,a){var o=t._engine.image(this,e||"about:blank",i||0,n||0,r||0,a||0);return this.__set__&&this.__set__.push(o),o},n.text=function(e,i,n){var r=t._engine.text(this,e||0,i||0,_(n));return this.__set__&&this.__set__.push(r),r},n.set=function(e){!t.is(e,"array")&&(e=Array.prototype.splice.call(arguments,0,arguments.length));var i=new ct(e);return this.__set__&&this.__set__.push(i),i.paper=this,i.type="set",i},n.setStart=function(e){this.__set__=e||this.set()},n.setFinish=function(e){var t=this.__set__;return delete this.__set__,t},n.getSize=function(){var e=this.canvas.parentNode;return{width:e.offsetWidth,height:e.offsetHeight}},n.setSize=function(e,i){return t._engine.setSize.call(this,e,i)},n.setViewBox=function(e,i,n,r,a){return t._engine.setViewBox.call(this,e,i,n,r,a)},n.top=n.bottom=null,n.raphael=t,n.getElementByPoint=function(e,t){var i,n,r,a,o,s,l,c=this.canvas,h=d.doc.elementFromPoint(e,t);if(d.win.opera&&"svg"==h.tagName){var u=(n=(i=c).getBoundingClientRect(),a=(r=i.ownerDocument).body,s=(o=r.documentElement).clientTop||a.clientTop||0,l=o.clientLeft||a.clientLeft||0,{y:n.top+(d.win.pageYOffset||o.scrollTop||a.scrollTop)-s,x:n.left+(d.win.pageXOffset||o.scrollLeft||a.scrollLeft)-l}),p=c.createSVGRect();p.x=e-u.x,p.y=t-u.y,p.width=p.height=1;var f=c.getIntersectionList(p,null);f.length&&(h=f[f.length-1])}if(!h)return null;for(;h.parentNode&&h!=c.parentNode&&!h.raphael;)h=h.parentNode;return h==this.canvas.parentNode&&(h=c),h&&h.raphael?this.getById(h.raphaelid):null},n.getElementsByBBox=function(e){var i=this.set();return this.forEach((function(n){t.isBBoxIntersect(n.getBBox(),e)&&i.push(n)})),i},n.getById=function(e){for(var t=this.bottom;t;){if(t.id==e)return t;t=t.next}return null},n.forEach=function(e,t){for(var i=this.bottom;i;){if(!1===e.call(t,i))return this;i=i.next}return this},n.getElementsByPoint=function(e,t){var i=this.set();return this.forEach((function(n){n.isPointInside(e,t)&&i.push(n)})),i},ze.isPointInside=function(e,i){var n=this.realPath=X[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(n=t.transformPath(n,this.attr("transform"))),t.isPointInsidePath(n,e,i)},ze.getBBox=function(e){if(this.removed)return{};var t=this._;return e?(!t.dirty&&t.bboxwt||(this.realPath=X[this.type](this),t.bboxwt=_e(this.realPath),t.bboxwt.toString=Ge,t.dirty=0),t.bboxwt):((t.dirty||t.dirtyT||!t.bbox)&&(!t.dirty&&this.realPath||(t.bboxwt=0,this.realPath=X[this.type](this)),t.bbox=_e(K(this.realPath,this.matrix)),t.bbox.toString=Ge,t.dirty=t.dirtyT=0),t.bbox)},ze.clone=function(){if(this.removed)return null;var e=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(e),e},ze.glow=function(e){if("text"==this.type)return null;var t={width:((e=e||{}).width||10)+(+this.attr("stroke-width")||1),fill:e.fill||!1,opacity:null==e.opacity?.5:e.opacity,offsetx:e.offsetx||0,offsety:e.offsety||0,color:e.color||"#000"},i=t.width/2,n=this.paper,r=n.set(),a=this.realPath||X[this.type](this);a=this.matrix?K(a,this.matrix):a;for(var o=1;o<i+1;o++)r.push(n.path(a).attr({stroke:t.color,fill:t.fill?t.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(t.width/i*o).toFixed(3),opacity:+(t.opacity/i).toFixed(3)}));return r.insertBefore(this).translate(t.offsetx,t.offsety)};var qe=function(e,i,n,r,a,o,s,l,c){return null==c?fe(e,i,n,r,a,o,s,l):t.findDotsAtSegment(e,i,n,r,a,o,s,l,function(e,t,i,n,r,a,o,s,l){if(!(l<0||fe(e,t,i,n,r,a,o,s)<l)){var c,d=.5,h=1-d;for(c=fe(e,t,i,n,r,a,o,s,h);k(c-l)>.01;)c=fe(e,t,i,n,r,a,o,s,h+=(c<l?1:-1)*(d/=2));return h}}(e,i,n,r,a,o,s,l,c))},Ye=function(e,i){return function(n,r,a){for(var o,s,l,c,d,h="",u={},p=0,f=0,g=(n=Ae(n)).length;f<g;f++){if("M"==(l=n[f])[0])o=+l[1],s=+l[2];else{if(p+(c=qe(o,s,l[1],l[2],l[3],l[4],l[5],l[6]))>r){if(i&&!u.start){if(h+=["C"+(d=qe(o,s,l[1],l[2],l[3],l[4],l[5],l[6],r-p)).start.x,d.start.y,d.m.x,d.m.y,d.x,d.y],a)return h;u.start=h,h=["M"+d.x,d.y+"C"+d.n.x,d.n.y,d.end.x,d.end.y,l[5],l[6]].join(),p+=c,o=+l[5],s=+l[6];continue}if(!e&&!i)return{x:(d=qe(o,s,l[1],l[2],l[3],l[4],l[5],l[6],r-p)).x,y:d.y,alpha:d.alpha}}p+=c,o=+l[5],s=+l[6]}h+=l.shift()+l}return u.end=h,(d=e?p:i?u:t.findDotsAtSegment(o,s,l[0],l[1],l[2],l[3],l[4],l[5],1)).alpha&&(d={x:d.x,y:d.y,alpha:d.alpha}),d}},Qe=Ye(1),Je=Ye(),Ze=Ye(0,1);t.getTotalLength=Qe,t.getPointAtLength=Je,t.getSubpath=function(e,t,i){if(this.getTotalLength(e)-i<1e-6)return Ze(e,t).end;var n=Ze(e,i,1);return t?Ze(n,t).end:n},ze.getTotalLength=function(){var e=this.getPath();if(e)return this.node.getTotalLength?this.node.getTotalLength():Qe(e)},ze.getPointAtLength=function(e){var t=this.getPath();if(t)return Je(t,e)},ze.getPath=function(){var e,i=t._getPath[this.type];if("text"!=this.type&&"set"!=this.type)return i&&(e=i(this)),e},ze.getSubpath=function(e,i){var n=this.getPath();if(n)return t.getSubpath(n,e,i)};var Xe=t.easing_formulas={linear:function(e){return e},"<":function(e){return A(e,1.7)},">":function(e){return A(e,.48)},"<>":function(e){var t=.48-e/1.04,i=C.sqrt(.1734+t*t),n=i-t,r=-i-t,a=A(k(n),1/3)*(n<0?-1:1)+A(k(r),1/3)*(r<0?-1:1)+.5;return 3*(1-a)*a*a+a*a*a},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},elastic:function(e){return e==!!e?e:A(2,-10*e)*C.sin(2*P*(e-.075)/.3)+1},bounce:function(e){var t=7.5625,i=2.75;return e<1/i?t*e*e:e<2/i?t*(e-=1.5/i)*e+.75:e<2.5/i?t*(e-=2.25/i)*e+.9375:t*(e-=2.625/i)*e+.984375}};Xe.easeIn=Xe["ease-in"]=Xe["<"],Xe.easeOut=Xe["ease-out"]=Xe[">"],Xe.easeInOut=Xe["ease-in-out"]=Xe["<>"],Xe["back-in"]=Xe.backIn,Xe["back-out"]=Xe.backOut;var Ke=[],et=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,16)},tt=function i(){for(var n=+new Date,r=0;r<Ke.length;r++){var a=Ke[r];if(!a.el.removed&&!a.paused){var o,s,l=n-a.start,d=a.ms,h=a.easing,u=a.from,p=a.diff,g=a.to,m=(a.t,a.el),_={},b={};if(a.initstatus?(l=(a.initstatus*a.anim.top-a.prev)/(a.percent-a.prev)*d,a.status=a.initstatus,delete a.initstatus,a.stop&&Ke.splice(r--,1)):a.status=(a.prev+(a.percent-a.prev)*(l/d))/a.anim.top,!(l<0))if(l<d){var w=h(l/d);for(var y in u)if(u[c](y)){switch(V[y]){case D:o=+u[y]+w*d*p[y];break;case"colour":o="rgb("+[it(L(u[y].r+w*d*p[y].r)),it(L(u[y].g+w*d*p[y].g)),it(L(u[y].b+w*d*p[y].b))].join(",")+")";break;case"path":o=[];for(var x=0,C=u[y].length;x<C;x++){o[x]=[u[y][x][0]];for(var S=1,T=u[y][x].length;S<T;S++)o[x][S]=+u[y][x][S]+w*d*p[y][x][S];o[x]=o[x].join(v)}o=o.join(v);break;case"transform":if(p[y].real)for(o=[],x=0,C=u[y].length;x<C;x++)for(o[x]=[u[y][x][0]],S=1,T=u[y][x].length;S<T;S++)o[x][S]=u[y][x][S]+w*d*p[y][x][S];else{var k=function(e){return+u[y][e]+w*d*p[y][e]};o=[["m",k(0),k(1),k(2),k(3),k(4),k(5)]]}break;case"csv":if("clip-rect"==y)for(o=[],x=4;x--;)o[x]=+u[y][x]+w*d*p[y][x];break;default:var A=[][f](u[y]);for(o=[],x=m.paper.customAttributes[y].length;x--;)o[x]=+A[x]+w*d*p[y][x]}_[y]=o}m.attr(_),function(t,i,n){setTimeout((function(){e("raphael.anim.frame."+t,i,n)}))}(m.id,m,a.anim)}else{if(function(i,n,r){setTimeout((function(){e("raphael.anim.frame."+n.id,n,r),e("raphael.anim.finish."+n.id,n,r),t.is(i,"function")&&i.call(n)}))}(a.callback,m,a.anim),m.attr(g),Ke.splice(r--,1),a.repeat>1&&!a.next){for(s in g)g[c](s)&&(b[s]=a.totalOrigin[s]);a.el.attr(b),at(a.anim,a.el,a.anim.percents[0],null,a.totalOrigin,a.repeat-1)}a.next&&!a.stop&&at(a.anim,a.el,a.next,null,a.totalOrigin,a.repeat)}}}Ke.length&&et(i)},it=function(e){return e>255?255:e<0?0:e};function nt(e,t,i,n,r,a){var o=3*t,s=3*(n-t)-o,l=1-o-s,c=3*i,d=3*(r-i)-c,h=1-c-d;function u(e){return((l*e+s)*e+o)*e}return function(e,t){var i=function(e,t){var i,n,r,a,c,d;for(r=e,d=0;d<8;d++){if(a=u(r)-e,k(a)<t)return r;if(k(c=(3*l*r+2*s)*r+o)<1e-6)break;r-=a/c}if((r=e)<(i=0))return i;if(r>(n=1))return n;for(;i<n;){if(a=u(r),k(a-e)<t)return r;e>a?i=r:n=r,r=(n-i)/2+i}return r}(e,t);return((h*i+d)*i+c)*i}(e,1/(200*a))}function rt(e,t){var i=[],n={};if(this.ms=t,this.times=1,e){for(var r in e)e[c](r)&&(n[R(r)]=e[r],i.push(R(r)));i.sort(Y)}this.anim=n,this.top=i[i.length-1],this.percents=i}function at(i,n,r,a,s,l){r=R(r);var d,h,u,p,g,m,v=i.ms,w={},y={},x={};if(a)for(S=0,T=Ke.length;S<T;S++){var C=Ke[S];if(C.el.id==n.id&&C.anim==i){C.percent!=r?(Ke.splice(S,1),u=1):h=C,n.attr(C.totalOrigin);break}}else a=+y;for(var S=0,T=i.percents.length;S<T;S++){if(i.percents[S]==r||i.percents[S]>a*i.top){r=i.percents[S],g=i.percents[S-1]||0,v=v/i.top*(r-g),p=i.percents[S+1],d=i.anim[r];break}a&&n.attr(i.anim[i.percents[S]])}if(d){if(h)h.initstatus=a,h.start=new Date-h.ms*a;else{for(var k in d)if(d[c](k)&&(V[c](k)||n.paper.customAttributes[c](k)))switch(w[k]=n.attr(k),null==w[k]&&(w[k]=B[k]),y[k]=d[k],V[k]){case D:x[k]=(y[k]-w[k])/v;break;case"colour":w[k]=t.getRGB(w[k]);var A=t.getRGB(y[k]);x[k]={r:(A.r-w[k].r)/v,g:(A.g-w[k].g)/v,b:(A.b-w[k].b)/v};break;case"path":var P=Ae(w[k],y[k]),E=P[1];for(w[k]=P[0],x[k]=[],S=0,T=w[k].length;S<T;S++){x[k][S]=[0];for(var M=1,O=w[k][S].length;M<O;M++)x[k][S][M]=(E[S][M]-w[k][S][M])/v}break;case"transform":var I=n._,L=Oe(I[k],y[k]);if(L)for(w[k]=L.from,y[k]=L.to,x[k]=[],x[k].real=!0,S=0,T=w[k].length;S<T;S++)for(x[k][S]=[w[k][S][0]],M=1,O=w[k][S].length;M<O;M++)x[k][S][M]=(y[k][S][M]-w[k][S][M])/v;else{var j=n.matrix||new Ie,$={_:{transform:I.transform},getBBox:function(){return n.getBBox(1)}};w[k]=[j.a,j.b,j.c,j.d,j.e,j.f],Ee($,y[k]),y[k]=$._.transform,x[k]=[($.matrix.a-j.a)/v,($.matrix.b-j.b)/v,($.matrix.c-j.c)/v,($.matrix.d-j.d)/v,($.matrix.e-j.e)/v,($.matrix.f-j.f)/v]}break;case"csv":var H=_(d[k])[b](o),F=_(w[k])[b](o);if("clip-rect"==k)for(w[k]=F,x[k]=[],S=F.length;S--;)x[k][S]=(H[S]-w[k][S])/v;y[k]=H;break;default:for(H=[][f](d[k]),F=[][f](w[k]),x[k]=[],S=n.paper.customAttributes[k].length;S--;)x[k][S]=((H[S]||0)-(F[S]||0))/v}var z=d.easing,U=t.easing_formulas[z];if(!U)if((U=_(z).match(N))&&5==U.length){var W=U;U=function(e){return nt(e,+W[1],+W[2],+W[3],+W[4],v)}}else U=Q;if(C={anim:i,percent:r,timestamp:m=d.start||i.start||+new Date,start:m+(i.del||0),status:0,initstatus:a||0,stop:!1,ms:v,easing:U,from:w,diff:x,to:y,el:n,callback:d.callback,prev:g,next:p,repeat:l||i.times,origin:n.attr(),totalOrigin:s},Ke.push(C),a&&!h&&!u&&(C.stop=!0,C.start=new Date-v*a,1==Ke.length))return tt();u&&(C.start=new Date-C.ms*a),1==Ke.length&&et(tt)}e("raphael.anim.start."+n.id,n,i)}}function ot(e){for(var t=0;t<Ke.length;t++)Ke[t].el.paper==e&&Ke.splice(t--,1)}ze.animateWith=function(e,i,n,r,a,o){if(this.removed)return o&&o.call(this),this;var s=n instanceof rt?n:t.animation(n,r,a,o);at(s,this,s.percents[0],null,this.attr());for(var l=0,c=Ke.length;l<c;l++)if(Ke[l].anim==i&&Ke[l].el==e){Ke[c-1].start=Ke[l].start;break}return this},ze.onAnimation=function(t){return t?e.on("raphael.anim.frame."+this.id,t):e.unbind("raphael.anim.frame."+this.id),this},rt.prototype.delay=function(e){var t=new rt(this.anim,this.ms);return t.times=this.times,t.del=+e||0,t},rt.prototype.repeat=function(e){var t=new rt(this.anim,this.ms);return t.del=this.del,t.times=C.floor(S(e,0))||1,t},t.animation=function(e,i,n,r){if(e instanceof rt)return e;!t.is(n,"function")&&n||(r=r||n||null,n=null),e=Object(e),i=+i||0;var a,o,s={};for(o in e)e[c](o)&&R(o)!=o&&R(o)+"%"!=o&&(a=!0,s[o]=e[o]);if(a)return n&&(s.easing=n),r&&(s.callback=r),new rt({100:s},i);if(r){var l=0;for(var d in e){var h=j(d);e[c](d)&&h>l&&(l=h)}!e[l+="%"].callback&&(e[l].callback=r)}return new rt(e,i)},ze.animate=function(e,i,n,r){if(this.removed)return r&&r.call(this),this;var a=e instanceof rt?e:t.animation(e,i,n,r);return at(a,this,a.percents[0],null,this.attr()),this},ze.setTime=function(e,t){return e&&null!=t&&this.status(e,T(t,e.ms)/e.ms),this},ze.status=function(e,t){var i,n,r=[],a=0;if(null!=t)return at(e,this,-1,T(t,1)),this;for(i=Ke.length;a<i;a++)if((n=Ke[a]).el.id==this.id&&(!e||n.anim==e)){if(e)return n.status;r.push({anim:n.anim,status:n.status})}return e?0:r},ze.pause=function(t){for(var i=0;i<Ke.length;i++)Ke[i].el.id!=this.id||t&&Ke[i].anim!=t||!1!==e("raphael.anim.pause."+this.id,this,Ke[i].anim)&&(Ke[i].paused=!0);return this},ze.resume=function(t){for(var i=0;i<Ke.length;i++)if(Ke[i].el.id==this.id&&(!t||Ke[i].anim==t)){var n=Ke[i];!1!==e("raphael.anim.resume."+this.id,this,n.anim)&&(delete n.paused,this.status(n.anim,n.status))}return this},ze.stop=function(t){for(var i=0;i<Ke.length;i++)Ke[i].el.id!=this.id||t&&Ke[i].anim!=t||!1!==e("raphael.anim.stop."+this.id,this,Ke[i].anim)&&Ke.splice(i--,1);return this},e.on("raphael.remove",ot),e.on("raphael.clear",ot),ze.toString=function(){return"Rapha\xebl\u2019s object"};var st,lt,ct=function e(t){if(this.items=[],this.length=0,this.type="set",t)for(var i=0,n=t.length;i<n;i++)!t[i]||t[i].constructor!=ze.constructor&&t[i].constructor!=e||(this[this.items.length]=this.items[this.items.length]=t[i],this.length++)},dt=ct.prototype;for(var ht in dt.push=function(){for(var e,t,i=0,n=arguments.length;i<n;i++)!(e=arguments[i])||e.constructor!=ze.constructor&&e.constructor!=ct||(this[t=this.items.length]=this.items[t]=e,this.length++);return this},dt.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},dt.forEach=function(e,t){for(var i=0,n=this.items.length;i<n;i++)if(!1===e.call(t,this.items[i],i))return this;return this},ze)ze[c](ht)&&(dt[ht]=function(e){return function(){var t=arguments;return this.forEach((function(i){i[e][p](i,t)}))}}(ht));return dt.attr=function(e,i){if(e&&t.is(e,E)&&t.is(e[0],"object"))for(var n=0,r=e.length;n<r;n++)this.items[n].attr(e[n]);else for(var a=0,o=this.items.length;a<o;a++)this.items[a].attr(e,i);return this},dt.clear=function(){for(;this.length;)this.pop()},dt.splice=function(e,t,i){e=e<0?S(this.length+e,0):e,t=S(0,T(this.length-e,t));var n,r=[],a=[],o=[];for(n=2;n<arguments.length;n++)o.push(arguments[n]);for(n=0;n<t;n++)a.push(this[e+n]);for(;n<this.length-e;n++)r.push(this[e+n]);var s=o.length;for(n=0;n<s+r.length;n++)this.items[e+n]=this[e+n]=n<s?o[n]:r[n-s];for(n=this.items.length=this.length-=t-s;this[n];)delete this[n++];return new ct(a)},dt.exclude=function(e){for(var t=0,i=this.length;t<i;t++)if(this[t]==e)return this.splice(t,1),!0},dt.animate=function(e,i,n,r){(t.is(n,"function")||!n)&&(r=n||null);var a,o,s=this.items.length,l=s,c=this;if(!s)return this;r&&(o=function(){!--s&&r.call(c)}),n=t.is(n,"string")?n:o;var d=t.animation(e,i,n,o);for(a=this.items[--l].animate(d);l--;)this.items[l]&&!this.items[l].removed&&this.items[l].animateWith(a,d,d),this.items[l]&&!this.items[l].removed||s--;return this},dt.insertAfter=function(e){for(var t=this.items.length;t--;)this.items[t].insertAfter(e);return this},dt.getBBox=function(){for(var e=[],t=[],i=[],n=[],r=this.items.length;r--;)if(!this.items[r].removed){var a=this.items[r].getBBox();e.push(a.x),t.push(a.y),i.push(a.x+a.width),n.push(a.y+a.height)}return{x:e=T[p](0,e),y:t=T[p](0,t),x2:i=S[p](0,i),y2:n=S[p](0,n),width:i-e,height:n-t}},dt.clone=function(e){e=this.paper.set();for(var t=0,i=this.items.length;t<i;t++)e.push(this.items[t].clone());return e},dt.toString=function(){return"Rapha\xebl\u2018s set"},dt.glow=function(e){var t=this.paper.set();return this.forEach((function(i,n){var r=i.glow(e);null!=r&&r.forEach((function(e,i){t.push(e)}))})),t},dt.isPointInside=function(e,t){var i=!1;return this.forEach((function(n){if(n.isPointInside(e,t))return i=!0,!1})),i},t.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var t={w:e.w,face:{},glyphs:{}},i=e.face["font-family"];for(var n in e.face)e.face[c](n)&&(t.face[n]=e.face[n]);if(this.fonts[i]?this.fonts[i].push(t):this.fonts[i]=[t],!e.svg)for(var r in t.face["units-per-em"]=j(e.face["units-per-em"],10),e.glyphs)if(e.glyphs[c](r)){var a=e.glyphs[r];if(t.glyphs[r]={w:a.w,k:{},d:a.d&&"M"+a.d.replace(/[mlcxtrv]/g,(function(e){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[e]||"M"}))+"z"},a.k)for(var o in a.k)a[c](o)&&(t.glyphs[r].k[o]=a.k[o])}return e},n.getFont=function(e,i,n,r){if(r=r||"normal",n=n||"normal",i=+i||{normal:400,bold:700,lighter:300,bolder:800}[i]||400,t.fonts){var a,o=t.fonts[e];if(!o){var s=new RegExp("(^|\\s)"+e.replace(/[^\w\d\s+!~.:_-]/g,m)+"(\\s|$)","i");for(var l in t.fonts)if(t.fonts[c](l)&&s.test(l)){o=t.fonts[l];break}}if(o)for(var d=0,h=o.length;d<h&&((a=o[d]).face["font-weight"]!=i||a.face["font-style"]!=n&&a.face["font-style"]||a.face["font-stretch"]!=r);d++);return a}},n.print=function(e,i,n,r,a,s,l,c){s=s||"middle",l=S(T(l||0,1),-1),c=S(T(c||1,3),1);var d,h=_(n)[b](m),u=0,p=0,f=m;if(t.is(r,"string")&&(r=this.getFont(r)),r){d=(a||16)/r.face["units-per-em"];for(var g=r.face.bbox[b](o),v=+g[0],w=g[3]-g[1],y=0,x=+g[1]+("baseline"==s?w+ +r.face.descent:w/2),C=0,k=h.length;C<k;C++){if("\n"==h[C])u=0,P=0,p=0,y+=w*c;else{var A=p&&r.glyphs[h[C-1]]||{},P=r.glyphs[h[C]];u+=p?(A.w||r.w)+(A.k&&A.k[h[C]]||0)+r.w*l:0,p=1}P&&P.d&&(f+=t.transformPath(P.d,["t",u*d,y*d,"s",d,d,v,x,"t",(e-v)/d,(i-x)/d]))}}return this.path(f).attr({fill:"#000",stroke:"none"})},n.add=function(e){if(t.is(e,"array"))for(var i,n=this.set(),r=0,a=e.length;r<a;r++)i=e[r]||{},s[c](i.type)&&n.push(this[i.type]().attr(i));return n},t.format=function(e,i){var n=t.is(i,E)?[0][f](i):arguments;return e&&t.is(e,"string")&&n.length-1&&(e=e.replace(l,(function(e,t){return null==n[++t]?m:n[t]}))),e||m},t.fullfill=(st=/\{([^\}]+)\}/g,lt=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(e,t){return String(e).replace(st,(function(e,i){return function(e,t,i){var n=i;return t.replace(lt,(function(e,t,i,r,a){t=t||r,n&&(t in n&&(n=n[t]),"function"==typeof n&&a&&(n=n()))})),n=(null==n||n==i?e:n)+""}(e,i,t)}))}),t.ninja=function(){if(h.was)d.win.Raphael=h.is;else{window.Raphael=void 0;try{delete window.Raphael}catch(e){}}return t},t.st=dt,e.on("raphael.DOMload",(function(){i=!0})),function(e,i,n){null==e.readyState&&e.addEventListener&&(e.addEventListener("DOMContentLoaded",n=function(){e.removeEventListener("DOMContentLoaded",n,!1),e.readyState="complete"},!1),e.readyState="loading"),function i(){/in/.test(e.readyState)?setTimeout(i,9):t.eve("raphael.DOMload")}()}(document),t}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(0)],void 0===(r=function(e){if(!e||e.vml){var t="hasOwnProperty",i=String,n=parseFloat,r=Math,a=r.round,o=r.max,s=r.min,l=r.abs,c=/[, ]+/,d=e.eve,h=" ",u="",p={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},f=/([clmz]),?([^clmz]*)/gi,g=/ progid:\S+Blur\([^\)]+\)/g,m=/-?[^,\s-]+/g,v="position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",_=21600,b={path:1,rect:1,image:1},w={circle:1,ellipse:1},y=function(t,i,n){var r=e.matrix();return r.rotate(-t,.5,.5),{dx:r.x(i,n),dy:r.y(i,n)}},x=function(e,t,i,n,r,a){var o=e._,s=e.matrix,c=o.fillpos,d=e.node,u=d.style,p=1,f="",g=_/t,m=_/i;if(u.visibility="hidden",t&&i){if(d.coordsize=l(g)+h+l(m),u.rotation=a*(t*i<0?-1:1),a){var v=y(a,n,r);n=v.dx,r=v.dy}if(t<0&&(f+="x"),i<0&&(f+=" y")&&(p=-1),u.flip=f,d.coordorigin=n*-g+h+r*-m,c||o.fillsize){var b=d.getElementsByTagName("fill");b=b&&b[0],d.removeChild(b),c&&(v=y(a,s.x(c[0],c[1]),s.y(c[0],c[1])),b.position=v.dx*p+h+v.dy*p),o.fillsize&&(b.size=o.fillsize[0]*l(t)+h+o.fillsize[1]*l(i)),d.appendChild(b)}u.visibility="visible"}};e.toString=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\xebl "+this.version};var C,S=function(e,t,n){for(var r=i(t).toLowerCase().split("-"),a=n?"end":"start",o=r.length,s="classic",l="medium",c="medium";o--;)switch(r[o]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":s=r[o];break;case"wide":case"narrow":c=r[o];break;case"long":case"short":l=r[o]}var d=e.node.getElementsByTagName("stroke")[0];d[a+"arrow"]=s,d[a+"arrowlength"]=l,d[a+"arrowwidth"]=c},T=function(r,l){r.attrs=r.attrs||{};var d=r.node,g=r.attrs,v=d.style,y=b[r.type]&&(l.x!=g.x||l.y!=g.y||l.width!=g.width||l.height!=g.height||l.cx!=g.cx||l.cy!=g.cy||l.rx!=g.rx||l.ry!=g.ry||l.r!=g.r),T=w[r.type]&&(g.cx!=l.cx||g.cy!=l.cy||g.r!=l.r||g.rx!=l.rx||g.ry!=l.ry),A=r;for(var P in l)l[t](P)&&(g[P]=l[P]);if(y&&(g.path=e._getPath[r.type](r),r._.dirty=1),l.href&&(d.href=l.href),l.title&&(d.title=l.title),l.target&&(d.target=l.target),l.cursor&&(v.cursor=l.cursor),"blur"in l&&r.blur(l.blur),(l.path&&"path"==r.type||y)&&(d.path=function(t){var n=/[ahqstv]/gi,r=e._pathToAbsolute;if(i(t).match(n)&&(r=e._path2curve),n=/[clmz]/g,r==e._pathToAbsolute&&!i(t).match(n)){var o=i(t).replace(f,(function(e,t,i){var n=[],r="m"==t.toLowerCase(),o=p[t];return i.replace(m,(function(e){r&&2==n.length&&(o+=n+p["m"==t?"l":"L"],n=[]),n.push(a(e*_))})),o+n}));return o}var s,l,c=r(t);o=[];for(var d=0,g=c.length;d<g;d++){s=c[d],"z"==(l=c[d][0].toLowerCase())&&(l="x");for(var v=1,b=s.length;v<b;v++)l+=a(s[v]*_)+(v!=b-1?",":u);o.push(l)}return o.join(h)}(~i(g.path).toLowerCase().indexOf("r")?e._pathToAbsolute(g.path):g.path),r._.dirty=1,"image"==r.type&&(r._.fillpos=[g.x,g.y],r._.fillsize=[g.width,g.height],x(r,1,1,0,0,0))),"transform"in l&&r.transform(l.transform),T){var D=+g.cx,E=+g.cy,M=+g.rx||+g.r||0,O=+g.ry||+g.r||0;d.path=e.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",a((D-M)*_),a((E-O)*_),a((D+M)*_),a((E+O)*_),a(D*_)),r._.dirty=1}if("clip-rect"in l){var I=i(l["clip-rect"]).split(c);if(4==I.length){I[2]=+I[2]+ +I[0],I[3]=+I[3]+ +I[1];var N=d.clipRect||e._g.doc.createElement("div"),L=N.style;L.clip=e.format("rect({1}px {2}px {3}px {0}px)",I),d.clipRect||(L.position="absolute",L.top=0,L.left=0,L.width=r.paper.width+"px",L.height=r.paper.height+"px",d.parentNode.insertBefore(N,d),N.appendChild(d),d.clipRect=N)}l["clip-rect"]||d.clipRect&&(d.clipRect.style.clip="auto")}if(r.textpath){var R=r.textpath.style;l.font&&(R.font=l.font),l["font-family"]&&(R.fontFamily='"'+l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,u)+'"'),l["font-size"]&&(R.fontSize=l["font-size"]),l["font-weight"]&&(R.fontWeight=l["font-weight"]),l["font-style"]&&(R.fontStyle=l["font-style"])}if("arrow-start"in l&&S(A,l["arrow-start"]),"arrow-end"in l&&S(A,l["arrow-end"],1),null!=l.opacity||null!=l.fill||null!=l.src||null!=l.stroke||null!=l["stroke-width"]||null!=l["stroke-opacity"]||null!=l["fill-opacity"]||null!=l["stroke-dasharray"]||null!=l["stroke-miterlimit"]||null!=l["stroke-linejoin"]||null!=l["stroke-linecap"]){var j=d.getElementsByTagName("fill");if(!(j=j&&j[0])&&(j=C("fill")),"image"==r.type&&l.src&&(j.src=l.src),l.fill&&(j.on=!0),null!=j.on&&"none"!=l.fill&&null!==l.fill||(j.on=!1),j.on&&l.fill){var $=i(l.fill).match(e._ISURL);if($){j.parentNode==d&&d.removeChild(j),j.rotate=!0,j.src=$[1],j.type="tile";var B=r.getBBox(1);j.position=B.x+h+B.y,r._.fillpos=[B.x,B.y],e._preload($[1],(function(){r._.fillsize=[this.offsetWidth,this.offsetHeight]}))}else j.color=e.getRGB(l.fill).hex,j.src=u,j.type="solid",e.getRGB(l.fill).error&&(A.type in{circle:1,ellipse:1}||"r"!=i(l.fill).charAt())&&k(A,l.fill,j)&&(g.fill="none",g.gradient=l.fill,j.rotate=!1)}if("fill-opacity"in l||"opacity"in l){var V=((+g["fill-opacity"]+1||2)-1)*((+g.opacity+1||2)-1)*((+e.getRGB(l.fill).o+1||2)-1);V=s(o(V,0),1),j.opacity=V,j.src&&(j.color="none")}d.appendChild(j);var H=d.getElementsByTagName("stroke")&&d.getElementsByTagName("stroke")[0],F=!1;!H&&(F=H=C("stroke")),(l.stroke&&"none"!=l.stroke||l["stroke-width"]||null!=l["stroke-opacity"]||l["stroke-dasharray"]||l["stroke-miterlimit"]||l["stroke-linejoin"]||l["stroke-linecap"])&&(H.on=!0),("none"==l.stroke||null===l.stroke||null==H.on||0==l.stroke||0==l["stroke-width"])&&(H.on=!1);var z=e.getRGB(l.stroke);H.on&&l.stroke&&(H.color=z.hex),V=((+g["stroke-opacity"]+1||2)-1)*((+g.opacity+1||2)-1)*((+z.o+1||2)-1);var U=.75*(n(l["stroke-width"])||1);if(V=s(o(V,0),1),null==l["stroke-width"]&&(U=g["stroke-width"]),l["stroke-width"]&&(H.weight=U),U&&U<1&&(V*=U)&&(H.weight=1),H.opacity=V,l["stroke-linejoin"]&&(H.joinstyle=l["stroke-linejoin"]||"miter"),H.miterlimit=l["stroke-miterlimit"]||8,l["stroke-linecap"]&&(H.endcap="butt"==l["stroke-linecap"]?"flat":"square"==l["stroke-linecap"]?"square":"round"),"stroke-dasharray"in l){var W={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};H.dashstyle=W[t](l["stroke-dasharray"])?W[l["stroke-dasharray"]]:u}F&&d.appendChild(H)}if("text"==A.type){A.paper.canvas.style.display=u;var G=A.paper.span,q=g.font&&g.font.match(/\d+(?:\.\d*)?(?=px)/);v=G.style,g.font&&(v.font=g.font),g["font-family"]&&(v.fontFamily=g["font-family"]),g["font-weight"]&&(v.fontWeight=g["font-weight"]),g["font-style"]&&(v.fontStyle=g["font-style"]),q=n(g["font-size"]||q&&q[0])||10,v.fontSize=100*q+"px",A.textpath.string&&(G.innerHTML=i(A.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var Y=G.getBoundingClientRect();A.W=g.w=(Y.right-Y.left)/100,A.H=g.h=(Y.bottom-Y.top)/100,A.X=g.x,A.Y=g.y+A.H/2,("x"in l||"y"in l)&&(A.path.v=e.format("m{0},{1}l{2},{1}",a(g.x*_),a(g.y*_),a(g.x*_)+1));for(var Q=["x","y","text","font","font-family","font-weight","font-style","font-size"],J=0,Z=Q.length;J<Z;J++)if(Q[J]in l){A._.dirty=1;break}switch(g["text-anchor"]){case"start":A.textpath.style["v-text-align"]="left",A.bbx=A.W/2;break;case"end":A.textpath.style["v-text-align"]="right",A.bbx=-A.W/2;break;default:A.textpath.style["v-text-align"]="center",A.bbx=0}A.textpath.style["v-text-kern"]=!0}},k=function(t,a,o){t.attrs=t.attrs||{},t.attrs;var s=Math.pow,l="linear",c=".5 .5";if(t.attrs.gradient=a,a=(a=i(a).replace(e._radial_gradient,(function(e,t,i){return l="radial",t&&i&&(t=n(t),i=n(i),s(t-.5,2)+s(i-.5,2)>.25&&(i=r.sqrt(.25-s(t-.5,2))*(2*(i>.5)-1)+.5),c=t+h+i),u}))).split(/\s*\-\s*/),"linear"==l){var d=a.shift();if(d=-n(d),isNaN(d))return null}var p=e._parseDots(a);if(!p)return null;if(t=t.shape||t.node,p.length){t.removeChild(o),o.on=!0,o.method="none",o.color=p[0].color,o.color2=p[p.length-1].color;for(var f=[],g=0,m=p.length;g<m;g++)p[g].offset&&f.push(p[g].offset+h+p[g].color);o.colors=f.length?f.join():"0% "+o.color,"radial"==l?(o.type="gradientTitle",o.focus="100%",o.focussize="0 0",o.focusposition=c,o.angle=0):(o.type="gradient",o.angle=(270-d)%360),t.appendChild(o)}return 1},A=function(t,i){this[0]=this.node=t,t.raphael=!0,this.id=e._oid++,t.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=i,this.matrix=e.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!i.bottom&&(i.bottom=this),this.prev=i.top,i.top&&(i.top.next=this),i.top=this,this.next=null},P=e.el;A.prototype=P,P.constructor=A,P.transform=function(t){if(null==t)return this._.transform;var n,r=this.paper._viewBoxShift,a=r?"s"+[r.scale,r.scale]+"-1-1t"+[r.dx,r.dy]:u;r&&(n=t=i(t).replace(/\.{3}|\u2026/g,this._.transform||u)),e._extractTransform(this,a+t);var o,s=this.matrix.clone(),l=this.skew,c=this.node,d=~i(this.attrs.fill).indexOf("-"),p=!i(this.attrs.fill).indexOf("url(");if(s.translate(1,1),p||d||"image"==this.type)if(l.matrix="1 0 0 1",l.offset="0 0",o=s.split(),d&&o.noRotation||!o.isSimple){c.style.filter=s.toFilter();var f=this.getBBox(),g=this.getBBox(1),m=f.x-g.x,v=f.y-g.y;c.coordorigin=m*-_+h+v*-_,x(this,1,1,m,v,0)}else c.style.filter=u,x(this,o.scalex,o.scaley,o.dx,o.dy,o.rotate);else c.style.filter=u,l.matrix=i(s),l.offset=s.offset();return null!==n&&(this._.transform=n,e._extractTransform(this,n)),this},P.rotate=function(e,t,r){if(this.removed)return this;if(null!=e){if((e=i(e).split(c)).length-1&&(t=n(e[1]),r=n(e[2])),e=n(e[0]),null==r&&(t=r),null==t||null==r){var a=this.getBBox(1);t=a.x+a.width/2,r=a.y+a.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",e,t,r]])),this}},P.translate=function(e,t){return this.removed||((e=i(e).split(c)).length-1&&(t=n(e[1])),e=n(e[0])||0,t=+t||0,this._.bbox&&(this._.bbox.x+=e,this._.bbox.y+=t),this.transform(this._.transform.concat([["t",e,t]]))),this},P.scale=function(e,t,r,a){if(this.removed)return this;if((e=i(e).split(c)).length-1&&(t=n(e[1]),r=n(e[2]),a=n(e[3]),isNaN(r)&&(r=null),isNaN(a)&&(a=null)),e=n(e[0]),null==t&&(t=e),null==a&&(r=a),null==r||null==a)var o=this.getBBox(1);return r=null==r?o.x+o.width/2:r,a=null==a?o.y+o.height/2:a,this.transform(this._.transform.concat([["s",e,t,r,a]])),this._.dirtyT=1,this},P.hide=function(){return!this.removed&&(this.node.style.display="none"),this},P.show=function(){return!this.removed&&(this.node.style.display=u),this},P.auxGetBBox=e.el.getBBox,P.getBBox=function(){var e=this.auxGetBBox();if(this.paper&&this.paper._viewBoxShift){var t={},i=1/this.paper._viewBoxShift.scale;return t.x=e.x-this.paper._viewBoxShift.dx,t.x*=i,t.y=e.y-this.paper._viewBoxShift.dy,t.y*=i,t.width=e.width*i,t.height=e.height*i,t.x2=t.x+t.width,t.y2=t.y+t.height,t}return e},P._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},P.remove=function(){if(!this.removed&&this.node.parentNode){for(var t in this.paper.__set__&&this.paper.__set__.exclude(this),e.eve.unbind("raphael.*.*."+this.id),e._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape),this)this[t]="function"==typeof this[t]?e._removedFactory(t):null;this.removed=!0}},P.attr=function(i,n){if(this.removed)return this;if(null==i){var r={};for(var a in this.attrs)this.attrs[t](a)&&(r[a]=this.attrs[a]);return r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r.transform=this._.transform,r}if(null==n&&e.is(i,"string")){if("fill"==i&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var o=i.split(c),s={},l=0,h=o.length;l<h;l++)(i=o[l])in this.attrs?s[i]=this.attrs[i]:e.is(this.paper.customAttributes[i],"function")?s[i]=this.paper.customAttributes[i].def:s[i]=e._availableAttrs[i];return h-1?s:s[o[0]]}if(this.attrs&&null==n&&e.is(i,"array")){for(s={},l=0,h=i.length;l<h;l++)s[i[l]]=this.attr(i[l]);return s}var u;for(var p in null!=n&&((u={})[i]=n),null==n&&e.is(i,"object")&&(u=i),u)d("raphael.attr."+p+"."+this.id,this,u[p]);if(u){for(p in this.paper.customAttributes)if(this.paper.customAttributes[t](p)&&u[t](p)&&e.is(this.paper.customAttributes[p],"function")){var f=this.paper.customAttributes[p].apply(this,[].concat(u[p]));for(var g in this.attrs[p]=u[p],f)f[t](g)&&(u[g]=f[g])}u.text&&"text"==this.type&&(this.textpath.string=u.text),T(this,u)}return this},P.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&e._tofront(this,this.paper),this},P.toBack=function(){return this.removed||this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),e._toback(this,this.paper)),this},P.insertAfter=function(t){return this.removed||(t.constructor==e.st.constructor&&(t=t[t.length-1]),t.node.nextSibling?t.node.parentNode.insertBefore(this.node,t.node.nextSibling):t.node.parentNode.appendChild(this.node),e._insertafter(this,t,this.paper)),this},P.insertBefore=function(t){return this.removed||(t.constructor==e.st.constructor&&(t=t[0]),t.node.parentNode.insertBefore(this.node,t.node),e._insertbefore(this,t,this.paper)),this},P.blur=function(t){var i=this.node.runtimeStyle,n=i.filter;return n=n.replace(g,u),0!=+t?(this.attrs.blur=t,i.filter=n+h+" progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+t||1.5)+")",i.margin=e.format("-{0}px 0 0 -{0}px",a(+t||1.5))):(i.filter=n,i.margin=0,delete this.attrs.blur),this},e._engine.path=function(e,t){var i=C("shape");i.style.cssText=v,i.coordsize=_+h+_,i.coordorigin=t.coordorigin;var n=new A(i,t),r={fill:"none",stroke:"#000"};e&&(r.path=e),n.type="path",n.path=[],n.Path=u,T(n,r),t.canvas&&t.canvas.appendChild(i);var a=C("skew");return a.on=!0,i.appendChild(a),n.skew=a,n.transform(u),n},e._engine.rect=function(t,i,n,r,a,o){var s=e._rectPath(i,n,r,a,o),l=t.path(s),c=l.attrs;return l.X=c.x=i,l.Y=c.y=n,l.W=c.width=r,l.H=c.height=a,c.r=o,c.path=s,l.type="rect",l},e._engine.ellipse=function(e,t,i,n,r){var a=e.path();return a.attrs,a.X=t-n,a.Y=i-r,a.W=2*n,a.H=2*r,a.type="ellipse",T(a,{cx:t,cy:i,rx:n,ry:r}),a},e._engine.circle=function(e,t,i,n){var r=e.path();return r.attrs,r.X=t-n,r.Y=i-n,r.W=r.H=2*n,r.type="circle",T(r,{cx:t,cy:i,r:n}),r},e._engine.image=function(t,i,n,r,a,o){var s=e._rectPath(n,r,a,o),l=t.path(s).attr({stroke:"none"}),c=l.attrs,d=l.node,h=d.getElementsByTagName("fill")[0];return c.src=i,l.X=c.x=n,l.Y=c.y=r,l.W=c.width=a,l.H=c.height=o,c.path=s,l.type="image",h.parentNode==d&&d.removeChild(h),h.rotate=!0,h.src=i,h.type="tile",l._.fillpos=[n,r],l._.fillsize=[a,o],d.appendChild(h),x(l,1,1,0,0,0),l},e._engine.text=function(t,n,r,o){var s=C("shape"),l=C("path"),c=C("textpath");n=n||0,r=r||0,o=o||"",l.v=e.format("m{0},{1}l{2},{1}",a(n*_),a(r*_),a(n*_)+1),l.textpathok=!0,c.string=i(o),c.on=!0,s.style.cssText=v,s.coordsize=_+h+_,s.coordorigin="0 0";var d=new A(s,t),p={fill:"#000",stroke:"none",font:e._availableAttrs.font,text:o};d.shape=s,d.path=l,d.textpath=c,d.type="text",d.attrs.text=i(o),d.attrs.x=n,d.attrs.y=r,d.attrs.w=1,d.attrs.h=1,T(d,p),s.appendChild(c),s.appendChild(l),t.canvas.appendChild(s);var f=C("skew");return f.on=!0,s.appendChild(f),d.skew=f,d.transform(u),d},e._engine.setSize=function(t,i){var n=this.canvas.style;return this.width=t,this.height=i,t==+t&&(t+="px"),i==+i&&(i+="px"),n.width=t,n.height=i,n.clip="rect(0 "+t+" "+i+" 0)",this._viewBox&&e._engine.setViewBox.apply(this,this._viewBox),this},e._engine.setViewBox=function(t,i,n,r,a){e.eve("raphael.setViewBox",this,this._viewBox,[t,i,n,r,a]);var o,s,l=this.getSize(),c=l.width,d=l.height;return a&&(n*(o=d/r)<c&&(t-=(c-n*o)/2/o),r*(s=c/n)<d&&(i-=(d-r*s)/2/s)),this._viewBox=[t,i,n,r,!!a],this._viewBoxShift={dx:-t,dy:-i,scale:l},this.forEach((function(e){e.transform("...")})),this},e._engine.initWin=function(e){var t=e.document;t.styleSheets.length<31?t.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):t.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");try{!t.namespaces.rvml&&t.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),C=function(e){return t.createElement("<rvml:"+e+' class="rvml">')}}catch(e){C=function(e){return t.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},e._engine.initWin(e._g.win),e._engine.create=function(){var t=e._getContainer.apply(0,arguments),i=t.container,n=t.height,r=t.width,a=t.x,o=t.y;if(!i)throw new Error("VML container not found.");var s=new e._Paper,l=s.canvas=e._g.doc.createElement("div"),c=l.style;return a=a||0,o=o||0,r=r||512,n=n||342,s.width=r,s.height=n,r==+r&&(r+="px"),n==+n&&(n+="px"),s.coordsize="21600000 21600000",s.coordorigin="0 0",s.span=e._g.doc.createElement("span"),s.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",l.appendChild(s.span),c.cssText=e.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",r,n),1==i?(e._g.doc.body.appendChild(l),c.left=a+"px",c.top=o+"px",c.position="absolute"):i.firstChild?i.insertBefore(l,i.firstChild):i.appendChild(l),s.renderfix=function(){},s},e.prototype.clear=function(){e.eve("raphael.clear",this),this.canvas.innerHTML=u,this.span=e._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},e.prototype.remove=function(){for(var t in e.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas),this)this[t]="function"==typeof this[t]?e._removedFactory(t):null;return!0};var D=e.st;for(var E in P)P[t](E)&&!D[t](E)&&(D[E]=function(e){return function(){var t=arguments;return this.forEach((function(i){i[e].apply(i,t)}))}}(E))}}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r;n=[i(0)],void 0===(r=function(e){if(!e||e.svg){var t="hasOwnProperty",i=String,n=parseFloat,r=parseInt,a=Math,o=a.max,s=a.abs,l=a.pow,c=/[, ]+/,d=e.eve,h="",u=" ",p="http://www.w3.org/1999/xlink",f={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},g={};e.toString=function(){return"Your browser supports SVG.\nYou are running Rapha\xebl "+this.version};var m=function n(r,a){if(a)for(var o in"string"==typeof r&&(r=n(r)),a)a[t](o)&&("xlink:"==o.substring(0,6)?r.setAttributeNS(p,o.substring(6),i(a[o])):r.setAttribute(o,i(a[o])));else(r=e._g.doc.createElementNS("http://www.w3.org/2000/svg",r)).style&&(r.style.webkitTapHighlightColor="rgba(0,0,0,0)");return r},v=function(t,r){var c="linear",d=t.id+r,u=.5,p=.5,f=t.node,g=t.paper,v=f.style,b=e._g.doc.getElementById(d);if(!b){if(r=(r=i(r).replace(e._radial_gradient,(function(e,t,i){if(c="radial",t&&i){u=n(t);var r=2*((p=n(i))>.5)-1;l(u-.5,2)+l(p-.5,2)>.25&&(p=a.sqrt(.25-l(u-.5,2))*r+.5)&&.5!=p&&(p=p.toFixed(5)-1e-5*r)}return h}))).split(/\s*\-\s*/),"linear"==c){var w=r.shift();if(w=-n(w),isNaN(w))return null;var y=[0,0,a.cos(e.rad(w)),a.sin(e.rad(w))],x=1/(o(s(y[2]),s(y[3]))||1);y[2]*=x,y[3]*=x,y[2]<0&&(y[0]=-y[2],y[2]=0),y[3]<0&&(y[1]=-y[3],y[3]=0)}var C=e._parseDots(r);if(!C)return null;if(d=d.replace(/[\(\)\s,\xb0#]/g,"_"),t.gradient&&d!=t.gradient.id&&(g.defs.removeChild(t.gradient),delete t.gradient),!t.gradient){b=m(c+"Gradient",{id:d}),t.gradient=b,m(b,"radial"==c?{fx:u,fy:p}:{x1:y[0],y1:y[1],x2:y[2],y2:y[3],gradientTransform:t.matrix.invert()}),g.defs.appendChild(b);for(var S=0,T=C.length;S<T;S++)b.appendChild(m("stop",{offset:C[S].offset?C[S].offset:S?"100%":"0%","stop-color":C[S].color||"#fff","stop-opacity":isFinite(C[S].opacity)?C[S].opacity:1}))}}return m(f,{fill:_(d),opacity:1,"fill-opacity":1}),v.fill=h,v.opacity=1,v.fillOpacity=1,1},_=function(e){if((t=document.documentMode)&&(9===t||10===t))return"url('#"+e+"')";var t,i=document.location;return"url('"+i.protocol+"//"+i.host+i.pathname+i.search+"#"+e+"')"},b=function(e){var t=e.getBBox(1);m(e.pattern,{patternTransform:e.matrix.invert()+" translate("+t.x+","+t.y+")"})},w=function(n,r,a){if("path"==n.type){for(var o,s,l,c,d,u=i(r).toLowerCase().split("-"),p=n.paper,v=a?"end":"start",_=n.node,b=n.attrs,w=b["stroke-width"],y=u.length,x="classic",C=3,S=3,T=5;y--;)switch(u[y]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":x=u[y];break;case"wide":S=5;break;case"narrow":S=2;break;case"long":C=5;break;case"short":C=2}if("open"==x?(C+=2,S+=2,T+=2,l=1,c=a?4:1,d={fill:"none",stroke:b.stroke}):(c=l=C/2,d={fill:b.stroke,stroke:"none"}),n._.arrows?a?(n._.arrows.endPath&&g[n._.arrows.endPath]--,n._.arrows.endMarker&&g[n._.arrows.endMarker]--):(n._.arrows.startPath&&g[n._.arrows.startPath]--,n._.arrows.startMarker&&g[n._.arrows.startMarker]--):n._.arrows={},"none"!=x){var k="raphael-marker-"+x,A="raphael-marker-"+v+x+C+S+"-obj"+n.id;e._g.doc.getElementById(k)?g[k]++:(p.defs.appendChild(m(m("path"),{"stroke-linecap":"round",d:f[x],id:k})),g[k]=1);var P,D=e._g.doc.getElementById(A);D?(g[A]++,P=D.getElementsByTagName("use")[0]):(D=m(m("marker"),{id:A,markerHeight:S,markerWidth:C,orient:"auto",refX:c,refY:S/2}),P=m(m("use"),{"xlink:href":"#"+k,transform:(a?"rotate(180 "+C/2+" "+S/2+") ":h)+"scale("+C/T+","+S/T+")","stroke-width":(1/((C/T+S/T)/2)).toFixed(4)}),D.appendChild(P),p.defs.appendChild(D),g[A]=1),m(P,d);var E=l*("diamond"!=x&&"oval"!=x);a?(o=n._.arrows.startdx*w||0,s=e.getTotalLength(b.path)-E*w):(o=E*w,s=e.getTotalLength(b.path)-(n._.arrows.enddx*w||0)),(d={})["marker-"+v]="url(#"+A+")",(s||o)&&(d.d=e.getSubpath(b.path,o,s)),m(_,d),n._.arrows[v+"Path"]=k,n._.arrows[v+"Marker"]=A,n._.arrows[v+"dx"]=E,n._.arrows[v+"Type"]=x,n._.arrows[v+"String"]=r}else a?(o=n._.arrows.startdx*w||0,s=e.getTotalLength(b.path)-o):(o=0,s=e.getTotalLength(b.path)-(n._.arrows.enddx*w||0)),n._.arrows[v+"Path"]&&m(_,{d:e.getSubpath(b.path,o,s)}),delete n._.arrows[v+"Path"],delete n._.arrows[v+"Marker"],delete n._.arrows[v+"dx"],delete n._.arrows[v+"Type"],delete n._.arrows[v+"String"];for(d in g)if(g[t](d)&&!g[d]){var M=e._g.doc.getElementById(d);M&&M.parentNode.removeChild(M)}}},y={"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},x=function(e,t,n){if(t=y[i(t).toLowerCase()]){for(var r=e.attrs["stroke-width"]||"1",a={round:r,square:r,butt:0}[e.attrs["stroke-linecap"]||n["stroke-linecap"]]||0,o=[],s=t.length;s--;)o[s]=t[s]*r+(s%2?1:-1)*a;m(e.node,{"stroke-dasharray":o.join(",")})}else m(e.node,{"stroke-dasharray":"none"})},C=function(n,a){var l=n.node,d=n.attrs,u=l.style.visibility;for(var f in l.style.visibility="hidden",a)if(a[t](f)){if(!e._availableAttrs[t](f))continue;var g=a[f];switch(d[f]=g,f){case"blur":n.blur(g);break;case"title":var _=l.getElementsByTagName("title");if(_.length&&(_=_[0]))_.firstChild.nodeValue=g;else{_=m("title");var y=e._g.doc.createTextNode(g);_.appendChild(y),l.appendChild(_)}break;case"href":case"target":var C=l.parentNode;if("a"!=C.tagName.toLowerCase()){var T=m("a");C.insertBefore(T,l),T.appendChild(l),C=T}"target"==f?C.setAttributeNS(p,"show","blank"==g?"new":g):C.setAttributeNS(p,f,g);break;case"cursor":l.style.cursor=g;break;case"transform":n.transform(g);break;case"arrow-start":w(n,g);break;case"arrow-end":w(n,g,1);break;case"clip-rect":var k=i(g).split(c);if(4==k.length){n.clip&&n.clip.parentNode.parentNode.removeChild(n.clip.parentNode);var A=m("clipPath"),P=m("rect");A.id=e.createUUID(),m(P,{x:k[0],y:k[1],width:k[2],height:k[3]}),A.appendChild(P),n.paper.defs.appendChild(A),m(l,{"clip-path":"url(#"+A.id+")"}),n.clip=P}if(!g){var D=l.getAttribute("clip-path");if(D){var E=e._g.doc.getElementById(D.replace(/(^url\(#|\)$)/g,h));E&&E.parentNode.removeChild(E),m(l,{"clip-path":h}),delete n.clip}}break;case"path":"path"==n.type&&(m(l,{d:g?d.path=e._pathToAbsolute(g):"M0,0"}),n._.dirty=1,n._.arrows&&("startString"in n._.arrows&&w(n,n._.arrows.startString),"endString"in n._.arrows&&w(n,n._.arrows.endString,1)));break;case"width":if(l.setAttribute(f,g),n._.dirty=1,!d.fx)break;f="x",g=d.x;case"x":d.fx&&(g=-d.x-(d.width||0));case"rx":if("rx"==f&&"rect"==n.type)break;case"cx":l.setAttribute(f,g),n.pattern&&b(n),n._.dirty=1;break;case"height":if(l.setAttribute(f,g),n._.dirty=1,!d.fy)break;f="y",g=d.y;case"y":d.fy&&(g=-d.y-(d.height||0));case"ry":if("ry"==f&&"rect"==n.type)break;case"cy":l.setAttribute(f,g),n.pattern&&b(n),n._.dirty=1;break;case"r":"rect"==n.type?m(l,{rx:g,ry:g}):l.setAttribute(f,g),n._.dirty=1;break;case"src":"image"==n.type&&l.setAttributeNS(p,"href",g);break;case"stroke-width":1==n._.sx&&1==n._.sy||(g/=o(s(n._.sx),s(n._.sy))||1),l.setAttribute(f,g),d["stroke-dasharray"]&&x(n,d["stroke-dasharray"],a),n._.arrows&&("startString"in n._.arrows&&w(n,n._.arrows.startString),"endString"in n._.arrows&&w(n,n._.arrows.endString,1));break;case"stroke-dasharray":x(n,g,a);break;case"fill":var M=i(g).match(e._ISURL);if(M){A=m("pattern");var O=m("image");A.id=e.createUUID(),m(A,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),m(O,{x:0,y:0,"xlink:href":M[1]}),A.appendChild(O),function(t){e._preload(M[1],(function(){var e=this.offsetWidth,i=this.offsetHeight;m(t,{width:e,height:i}),m(O,{width:e,height:i})}))}(A),n.paper.defs.appendChild(A),m(l,{fill:"url(#"+A.id+")"}),n.pattern=A,n.pattern&&b(n);break}var I=e.getRGB(g);if(I.error){if(("circle"==n.type||"ellipse"==n.type||"r"!=i(g).charAt())&&v(n,g)){if("opacity"in d||"fill-opacity"in d){var N=e._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,h));if(N){var L=N.getElementsByTagName("stop");m(L[L.length-1],{"stop-opacity":("opacity"in d?d.opacity:1)*("fill-opacity"in d?d["fill-opacity"]:1)})}}d.gradient=g,d.fill="none";break}}else delete a.gradient,delete d.gradient,!e.is(d.opacity,"undefined")&&e.is(a.opacity,"undefined")&&m(l,{opacity:d.opacity}),!e.is(d["fill-opacity"],"undefined")&&e.is(a["fill-opacity"],"undefined")&&m(l,{"fill-opacity":d["fill-opacity"]});I[t]("opacity")&&m(l,{"fill-opacity":I.opacity>1?I.opacity/100:I.opacity});case"stroke":I=e.getRGB(g),l.setAttribute(f,I.hex),"stroke"==f&&I[t]("opacity")&&m(l,{"stroke-opacity":I.opacity>1?I.opacity/100:I.opacity}),"stroke"==f&&n._.arrows&&("startString"in n._.arrows&&w(n,n._.arrows.startString),"endString"in n._.arrows&&w(n,n._.arrows.endString,1));break;case"gradient":("circle"==n.type||"ellipse"==n.type||"r"!=i(g).charAt())&&v(n,g);break;case"opacity":d.gradient&&!d[t]("stroke-opacity")&&m(l,{"stroke-opacity":g>1?g/100:g});case"fill-opacity":if(d.gradient){(N=e._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,h)))&&(L=N.getElementsByTagName("stop"),m(L[L.length-1],{"stop-opacity":g}));break}default:"font-size"==f&&(g=r(g,10)+"px");var R=f.replace(/(\-.)/g,(function(e){return e.substring(1).toUpperCase()}));l.style[R]=g,n._.dirty=1,l.setAttribute(f,g)}}S(n,a),l.style.visibility=u},S=function(n,a){if("text"==n.type&&(a[t]("text")||a[t]("font")||a[t]("font-size")||a[t]("x")||a[t]("y"))){var o=n.attrs,s=n.node,l=s.firstChild?r(e._g.doc.defaultView.getComputedStyle(s.firstChild,h).getPropertyValue("font-size"),10):10;if(a[t]("text")){for(o.text=a.text;s.firstChild;)s.removeChild(s.firstChild);for(var c,d=i(a.text).split("\n"),u=[],p=0,f=d.length;p<f;p++)c=m("tspan"),p&&m(c,{dy:1.2*l,x:o.x}),c.appendChild(e._g.doc.createTextNode(d[p])),s.appendChild(c),u[p]=c}else for(p=0,f=(u=s.getElementsByTagName("tspan")).length;p<f;p++)p?m(u[p],{dy:1.2*l,x:o.x}):m(u[0],{dy:0});m(s,{x:o.x,y:o.y}),n._.dirty=1;var g=n._getBBox(),v=o.y-(g.y+g.height/2);v&&e.is(v,"finite")&&m(u[0],{dy:v})}},T=function(e){return e.parentNode&&"a"===e.parentNode.tagName.toLowerCase()?e.parentNode:e},k=function(t,i){this[0]=this.node=t,t.raphael=!0,this.id=("0000"+(Math.random()*Math.pow(36,5)<<0).toString(36)).slice(-5),t.raphaelid=this.id,this.matrix=e.matrix(),this.realPath=null,this.paper=i,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!i.bottom&&(i.bottom=this),this.prev=i.top,i.top&&(i.top.next=this),i.top=this,this.next=null},A=e.el;k.prototype=A,A.constructor=k,e._engine.path=function(e,t){var i=m("path");t.canvas&&t.canvas.appendChild(i);var n=new k(i,t);return n.type="path",C(n,{fill:"none",stroke:"#000",path:e}),n},A.rotate=function(e,t,r){if(this.removed)return this;if((e=i(e).split(c)).length-1&&(t=n(e[1]),r=n(e[2])),e=n(e[0]),null==r&&(t=r),null==t||null==r){var a=this.getBBox(1);t=a.x+a.width/2,r=a.y+a.height/2}return this.transform(this._.transform.concat([["r",e,t,r]])),this},A.scale=function(e,t,r,a){if(this.removed)return this;if((e=i(e).split(c)).length-1&&(t=n(e[1]),r=n(e[2]),a=n(e[3])),e=n(e[0]),null==t&&(t=e),null==a&&(r=a),null==r||null==a)var o=this.getBBox(1);return r=null==r?o.x+o.width/2:r,a=null==a?o.y+o.height/2:a,this.transform(this._.transform.concat([["s",e,t,r,a]])),this},A.translate=function(e,t){return this.removed||((e=i(e).split(c)).length-1&&(t=n(e[1])),e=n(e[0])||0,t=+t||0,this.transform(this._.transform.concat([["t",e,t]]))),this},A.transform=function(i){var n=this._;if(null==i)return n.transform;if(e._extractTransform(this,i),this.clip&&m(this.clip,{transform:this.matrix.invert()}),this.pattern&&b(this),this.node&&m(this.node,{transform:this.matrix}),1!=n.sx||1!=n.sy){var r=this.attrs[t]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":r})}return this},A.hide=function(){return this.removed||(this.node.style.display="none"),this},A.show=function(){return this.removed||(this.node.style.display=""),this},A.remove=function(){var t=T(this.node);if(!this.removed&&t.parentNode){var i=this.paper;for(var n in i.__set__&&i.__set__.exclude(this),d.unbind("raphael.*.*."+this.id),this.gradient&&i.defs.removeChild(this.gradient),e._tear(this,i),t.parentNode.removeChild(t),this.removeData(),this)this[n]="function"==typeof this[n]?e._removedFactory(n):null;this.removed=!0}},A._getBBox=function(){if("none"==this.node.style.display){this.show();var e=!0}var t,i=!1;this.paper.canvas.parentElement?t=this.paper.canvas.parentElement.style:this.paper.canvas.parentNode&&(t=this.paper.canvas.parentNode.style),t&&"none"==t.display&&(i=!0,t.display="");var n={};try{n=this.node.getBBox()}catch(e){n={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}finally{n=n||{},i&&(t.display="none")}return e&&this.hide(),n},A.attr=function(i,n){if(this.removed)return this;if(null==i){var r={};for(var a in this.attrs)this.attrs[t](a)&&(r[a]=this.attrs[a]);return r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r.transform=this._.transform,r}if(null==n&&e.is(i,"string")){if("fill"==i&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==i)return this._.transform;for(var o=i.split(c),s={},l=0,h=o.length;l<h;l++)(i=o[l])in this.attrs?s[i]=this.attrs[i]:e.is(this.paper.customAttributes[i],"function")?s[i]=this.paper.customAttributes[i].def:s[i]=e._availableAttrs[i];return h-1?s:s[o[0]]}if(null==n&&e.is(i,"array")){for(s={},l=0,h=i.length;l<h;l++)s[i[l]]=this.attr(i[l]);return s}if(null!=n){var u={};u[i]=n}else null!=i&&e.is(i,"object")&&(u=i);for(var p in u)d("raphael.attr."+p+"."+this.id,this,u[p]);for(p in this.paper.customAttributes)if(this.paper.customAttributes[t](p)&&u[t](p)&&e.is(this.paper.customAttributes[p],"function")){var f=this.paper.customAttributes[p].apply(this,[].concat(u[p]));for(var g in this.attrs[p]=u[p],f)f[t](g)&&(u[g]=f[g])}return C(this,u),this},A.toFront=function(){if(this.removed)return this;var t=T(this.node);t.parentNode.appendChild(t);var i=this.paper;return i.top!=this&&e._tofront(this,i),this},A.toBack=function(){if(this.removed)return this;var t=T(this.node),i=t.parentNode;return i.insertBefore(t,i.firstChild),e._toback(this,this.paper),this.paper,this},A.insertAfter=function(t){if(this.removed||!t)return this;var i=T(this.node),n=T(t.node||t[t.length-1].node);return n.nextSibling?n.parentNode.insertBefore(i,n.nextSibling):n.parentNode.appendChild(i),e._insertafter(this,t,this.paper),this},A.insertBefore=function(t){if(this.removed||!t)return this;var i=T(this.node),n=T(t.node||t[0].node);return n.parentNode.insertBefore(i,n),e._insertbefore(this,t,this.paper),this},A.blur=function(t){var i=this;if(0!=+t){var n=m("filter"),r=m("feGaussianBlur");i.attrs.blur=t,n.id=e.createUUID(),m(r,{stdDeviation:+t||1.5}),n.appendChild(r),i.paper.defs.appendChild(n),i._blur=n,m(i.node,{filter:"url(#"+n.id+")"})}else i._blur&&(i._blur.parentNode.removeChild(i._blur),delete i._blur,delete i.attrs.blur),i.node.removeAttribute("filter");return i},e._engine.circle=function(e,t,i,n){var r=m("circle");e.canvas&&e.canvas.appendChild(r);var a=new k(r,e);return a.attrs={cx:t,cy:i,r:n,fill:"none",stroke:"#000"},a.type="circle",m(r,a.attrs),a},e._engine.rect=function(e,t,i,n,r,a){var o=m("rect");e.canvas&&e.canvas.appendChild(o);var s=new k(o,e);return s.attrs={x:t,y:i,width:n,height:r,rx:a||0,ry:a||0,fill:"none",stroke:"#000"},s.type="rect",m(o,s.attrs),s},e._engine.ellipse=function(e,t,i,n,r){var a=m("ellipse");e.canvas&&e.canvas.appendChild(a);var o=new k(a,e);return o.attrs={cx:t,cy:i,rx:n,ry:r,fill:"none",stroke:"#000"},o.type="ellipse",m(a,o.attrs),o},e._engine.image=function(e,t,i,n,r,a){var o=m("image");m(o,{x:i,y:n,width:r,height:a,preserveAspectRatio:"none"}),o.setAttributeNS(p,"href",t),e.canvas&&e.canvas.appendChild(o);var s=new k(o,e);return s.attrs={x:i,y:n,width:r,height:a,src:t},s.type="image",s},e._engine.text=function(t,i,n,r){var a=m("text");t.canvas&&t.canvas.appendChild(a);var o=new k(a,t);return o.attrs={x:i,y:n,"text-anchor":"middle",text:r,"font-family":e._availableAttrs["font-family"],"font-size":e._availableAttrs["font-size"],stroke:"none",fill:"#000"},o.type="text",C(o,o.attrs),o},e._engine.setSize=function(e,t){return this.width=e||this.width,this.height=t||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},e._engine.create=function(){var t=e._getContainer.apply(0,arguments),i=t&&t.container,n=t.x,r=t.y,a=t.width,o=t.height;if(!i)throw new Error("SVG container not found.");var s,l=m("svg"),c="overflow:hidden;";return n=n||0,r=r||0,m(l,{height:o=o||342,version:1.1,width:a=a||512,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),1==i?(l.style.cssText=c+"position:absolute;left:"+n+"px;top:"+r+"px",e._g.doc.body.appendChild(l),s=1):(l.style.cssText=c+"position:relative",i.firstChild?i.insertBefore(l,i.firstChild):i.appendChild(l)),(i=new e._Paper).width=a,i.height=o,i.canvas=l,i.clear(),i._left=i._top=0,s&&(i.renderfix=function(){}),i.renderfix(),i},e._engine.setViewBox=function(e,t,i,n,r){d("raphael.setViewBox",this,this._viewBox,[e,t,i,n,r]);var a,s,l=this.getSize(),c=o(i/l.width,n/l.height),h=this.top,p=r?"xMidYMid meet":"xMinYMin";for(null==e?(this._vbSize&&(c=1),delete this._vbSize,a="0 0 "+this.width+u+this.height):(this._vbSize=c,a=e+u+t+u+i+u+n),m(this.canvas,{viewBox:a,preserveAspectRatio:p});c&&h;)s="stroke-width"in h.attrs?h.attrs["stroke-width"]:1,h.attr({"stroke-width":s}),h._.dirty=1,h._.dirtyT=1,h=h.prev;return this._viewBox=[e,t,i,n,!!r],this},e.prototype.renderfix=function(){var e,t=this.canvas,i=t.style;try{e=t.getScreenCTM()||t.createSVGMatrix()}catch(i){e=t.createSVGMatrix()}var n=-e.e%1,r=-e.f%1;(n||r)&&(n&&(this._left=(this._left+n)%1,i.left=this._left+"px"),r&&(this._top=(this._top+r)%1,i.top=this._top+"px"))},e.prototype.clear=function(){e.eve("raphael.clear",this);for(var t=this.canvas;t.firstChild;)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=m("desc")).appendChild(e._g.doc.createTextNode("Created with Rapha\xebl "+e.version)),t.appendChild(this.desc),t.appendChild(this.defs=m("defs"))},e.prototype.remove=function(){for(var t in d("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[t]="function"==typeof this[t]?e._removedFactory(t):null};var P=e.st;for(var D in A)A[t](D)&&!P[t](D)&&(P[D]=function(e){return function(){var t=arguments;return this.forEach((function(i){i[e].apply(i,t)}))}}(D))}}.apply(t,n))||(e.exports=r)},function(e,t,i){var n,r,a,o,s,l,c,d,h,u,p,f,g,m;o="hasOwnProperty",s=/[\.\/]/,l=/\s*,\s*/,c=function(e,t){return e-t},d={n:{}},h=function(){for(var e=0,t=this.length;e<t;e++)if(void 0!==this[e])return this[e]},u=function(){for(var e=this.length;--e;)if(void 0!==this[e])return this[e]},p=Object.prototype.toString,f=String,g=Array.isArray||function(e){return e instanceof Array||"[object Array]"==p.call(e)},(m=function(e,t){var i,n=a,o=Array.prototype.slice.call(arguments,2),s=m.listeners(e),l=0,d=[],p={},f=[],g=r;f.firstDefined=h,f.lastDefined=u,r=e,a=0;for(var v=0,_=s.length;v<_;v++)"zIndex"in s[v]&&(d.push(s[v].zIndex),s[v].zIndex<0&&(p[s[v].zIndex]=s[v]));for(d.sort(c);d[l]<0;)if(i=p[d[l++]],f.push(i.apply(t,o)),a)return a=n,f;for(v=0;v<_;v++)if("zIndex"in(i=s[v]))if(i.zIndex==d[l]){if(f.push(i.apply(t,o)),a)break;do{if((i=p[d[++l]])&&f.push(i.apply(t,o)),a)break}while(i)}else p[i.zIndex]=i;else if(f.push(i.apply(t,o)),a)break;return a=n,r=g,f})._events=d,m.listeners=function(e){var t,i,n,r,a,o,l,c,h=g(e)?e:e.split(s),u=d,p=[u],f=[];for(r=0,a=h.length;r<a;r++){for(c=[],o=0,l=p.length;o<l;o++)for(i=[(u=p[o].n)[h[r]],u["*"]],n=2;n--;)(t=i[n])&&(c.push(t),f=f.concat(t.f||[]));p=c}return f},m.separator=function(e){e?(e="["+(e=f(e).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",s=new RegExp(e)):s=/[\.\/]/},m.on=function(e,t){if("function"!=typeof t)return function(){};for(var i=g(e)?g(e[0])?e:[e]:f(e).split(l),n=0,r=i.length;n<r;n++)!function(e){for(var i,n=g(e)?e:f(e).split(s),r=d,a=0,o=n.length;a<o;a++)r=(r=r.n).hasOwnProperty(n[a])&&r[n[a]]||(r[n[a]]={n:{}});for(r.f=r.f||[],a=0,o=r.f.length;a<o;a++)if(r.f[a]==t){i=!0;break}!i&&r.f.push(t)}(i[n]);return function(e){+e==+e&&(t.zIndex=+e)}},m.f=function(e){var t=[].slice.call(arguments,1);return function(){m.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}},m.stop=function(){a=1},m.nt=function(e){var t=g(r)?r.join("."):r;return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(t):t},m.nts=function(){return g(r)?r:r.split(s)},m.off=m.unbind=function(e,t){if(e){var i=g(e)?g(e[0])?e:[e]:f(e).split(l);if(i.length>1)for(var n=0,r=i.length;n<r;n++)m.off(i[n],t);else{i=g(e)?e:f(e).split(s);var a,c,h,u,p,v=[d];for(n=0,r=i.length;n<r;n++)for(u=0;u<v.length;u+=h.length-2){if(h=[u,1],a=v[u].n,"*"!=i[n])a[i[n]]&&h.push(a[i[n]]);else for(c in a)a[o](c)&&h.push(a[c]);v.splice.apply(v,h)}for(n=0,r=v.length;n<r;n++)for(a=v[n];a.n;){if(t){if(a.f){for(u=0,p=a.f.length;u<p;u++)if(a.f[u]==t){a.f.splice(u,1);break}!a.f.length&&delete a.f}for(c in a.n)if(a.n[o](c)&&a.n[c].f){var _=a.n[c].f;for(u=0,p=_.length;u<p;u++)if(_[u]==t){_.splice(u,1);break}!_.length&&delete a.n[c].f}}else for(c in delete a.f,a.n)a.n[o](c)&&a.n[c].f&&delete a.n[c].f;a=a.n}}}else m._events=d={n:{}}},m.once=function(e,t){return m.on(e,(function i(){return m.off(e,i),t.apply(this,arguments)}))},m.version="0.5.0",m.toString=function(){return"You are running Eve 0.5.0"},void 0!==e&&e.exports?e.exports=m:void 0===(n=function(){return m}.apply(t,[]))||(e.exports=n)},function(e,t,i){var n,r;n=[i(0),i(2),i(1)],void 0===(r=function(e){return e}.apply(t,n))||(e.exports=r)}])},function(e,t){e.exports={plus:"M25.979,12.896 19.312,12.896 19.312,6.229 12.647,6.229 12.647,12.896 5.979,12.896 5.979,19.562 12.647,19.562 12.647,26.229 19.312,26.229 19.312,19.562 25.979,19.562z",arrowleft2:"M21.871,9.814 15.684,16.001 21.871,22.188 18.335,25.725 8.612,16.001 18.335,6.276z",edit:"M27.87,7.863L23.024,4.82l-7.889,12.566l4.842,3.04L27.87,7.863zM14.395,21.25l-0.107,2.855l2.527-1.337l2.349-1.24l-4.672-2.936L14.395,21.25zM29.163,3.239l-2.532-1.591c-0.638-0.401-1.479-0.208-1.882,0.43l-0.998,1.588l4.842,3.042l0.999-1.586C29.992,4.481,29.802,3.639,29.163,3.239zM25.198,27.062c0,0.275-0.225,0.5-0.5,0.5h-19c-0.276,0-0.5-0.225-0.5-0.5v-19c0-0.276,0.224-0.5,0.5-0.5h13.244l1.884-3H5.698c-1.93,0-3.5,1.57-3.5,3.5v19c0,1.93,1.57,3.5,3.5,3.5h19c1.93,0,3.5-1.57,3.5-3.5V11.097l-3,4.776V27.062z",trash:"M20.826,5.75l0.396,1.188c1.54,0.575,2.589,1.44,2.589,2.626c0,2.405-4.308,3.498-8.312,3.498c-4.003,0-8.311-1.093-8.311-3.498c0-1.272,1.21-2.174,2.938-2.746l0.388-1.165c-2.443,0.648-4.327,1.876-4.327,3.91v2.264c0,1.224,0.685,2.155,1.759,2.845l0.396,9.265c0,1.381,3.274,2.5,7.312,2.5c4.038,0,7.313-1.119,7.313-2.5l0.405-9.493c0.885-0.664,1.438-1.521,1.438-2.617V9.562C24.812,7.625,23.101,6.42,20.826,5.75zM11.093,24.127c-0.476-0.286-1.022-0.846-1.166-1.237c-1.007-2.76-0.73-4.921-0.529-7.509c0.747,0.28,1.58,0.491,2.45,0.642c-0.216,2.658-0.43,4.923,0.003,7.828C11.916,24.278,11.567,24.411,11.093,24.127zM17.219,24.329c-0.019,0.445-0.691,0.856-1.517,0.856c-0.828,0-1.498-0.413-1.517-0.858c-0.126-2.996-0.032-5.322,0.068-8.039c0.418,0.022,0.835,0.037,1.246,0.037c0.543,0,1.097-0.02,1.651-0.059C17.251,18.994,17.346,21.325,17.219,24.329zM21.476,22.892c-0.143,0.392-0.69,0.95-1.165,1.235c-0.474,0.284-0.817,0.151-0.754-0.276c0.437-2.93,0.214-5.209-0.005-7.897c0.881-0.174,1.708-0.417,2.44-0.731C22.194,17.883,22.503,20.076,21.476,22.892zM11.338,9.512c0.525,0.173,1.092-0.109,1.268-0.633h-0.002l0.771-2.316h4.56l0.771,2.316c0.14,0.419,0.53,0.685,0.949,0.685c0.104,0,0.211-0.017,0.316-0.052c0.524-0.175,0.808-0.742,0.633-1.265l-1.002-3.001c-0.136-0.407-0.518-0.683-0.945-0.683h-6.002c-0.428,0-0.812,0.275-0.948,0.683l-1,2.999C10.532,8.77,10.815,9.337,11.338,9.512z"}},function(e,t,i){(function(e){!function(i,n){var r=function(){var e=null,t={};function i(e){for(var i in e>=334&&e<=360&&(e-=360),t){var n=t[i];if(n.hueRange&&e>=n.hueRange[0]&&e<=n.hueRange[1])return t[i]}return"Color not found"}function n(t){if(null===e)return Math.floor(t[0]+Math.random()*(t[1]+1-t[0]));var i=t[1]||1,n=t[0]||0,r=(e=(9301*e+49297)%233280)/233280;return Math.floor(n+r*(i-n))}function r(e,i,n){var r=n[0][0],a=n[n.length-1][0],o=n[n.length-1][1],s=n[0][1];t[e]={hueRange:i,lowerBounds:n,saturationRange:[r,a],brightnessRange:[o,s]}}function a(e){var t=e[0];0===t&&(t=1),360===t&&(t=359),t/=360;var i=e[1]/100,n=e[2]/100,r=Math.floor(6*t),a=6*t-r,o=n*(1-i),s=n*(1-a*i),l=n*(1-(1-a)*i),c=256,d=256,h=256;switch(r){case 0:c=n,d=l,h=o;break;case 1:c=s,d=n,h=o;break;case 2:c=o,d=n,h=l;break;case 3:c=o,d=s,h=n;break;case 4:c=l,d=o,h=n;break;case 5:c=n,d=o,h=s}return[Math.floor(255*c),Math.floor(255*d),Math.floor(255*h)]}function o(e){var t=e[0],i=e[1]/100,n=e[2]/100,r=(2-i)*n;return[t,Math.round(i*n/(r<1?r:2-r)*1e4)/100,r/2*100]}return function(){r("monochrome",null,[[0,0],[100,0]]),r("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),r("orange",[19,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),r("yellow",[47,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),r("green",[63,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),r("blue",[179,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),r("purple",[258,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),r("pink",[283,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}(),function r(s){if(void 0!==(s=s||{}).seed&&null!==s.seed&&s.seed===parseInt(s.seed,10))e=s.seed;else if("string"===typeof s.seed)e=function(e){for(var t=0,i=0;i!==e.length&&!(t>=Number.MAX_SAFE_INTEGER);i++)t+=e.charCodeAt(i);return t}(s.seed);else{if(void 0!==s.seed&&null!==s.seed)throw new TypeError("The seed value must be an integer or string");e=null}var l,c;if(null!==s.count&&void 0!==s.count){var d=s.count,h=[];for(s.count=null;d>h.length;)e&&s.seed&&(s.seed+=1),h.push(r(s));return s.count=d,h}return function(e,t){switch(t.format){case"hsvArray":return e;case"hslArray":return o(e);case"hsl":var i=o(e);return"hsl("+i[0]+", "+i[1]+"%, "+i[2]+"%)";case"hsla":var n=o(e),r=t.alpha||Math.random();return"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+r+")";case"rgbArray":return a(e);case"rgb":return"rgb("+a(e).join(", ")+")";case"rgba":var s=a(e);r=t.alpha||Math.random();return"rgba("+s.join(", ")+", "+r+")";default:return function(e){var t=a(e);function i(e){var t=e.toString(16);return 1==t.length?"0"+t:t}return"#"+i(t[0])+i(t[1])+i(t[2])}(e)}}([l=function(e){var i=n(function(e){if("number"===typeof parseInt(e)){var i=parseInt(e);if(i<360&&i>0)return[i,i]}if("string"===typeof e)if(t[e]){var n=t[e];if(n.hueRange)return n.hueRange}else if(e.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var r=function(e){e=3===(e=e.replace(/^#/,"")).length?e.replace(/(.)/g,"$1$1"):e;var t=parseInt(e.substr(0,2),16)/255,i=parseInt(e.substr(2,2),16)/255,n=parseInt(e.substr(4,2),16)/255,r=Math.max(t,i,n),a=r-Math.min(t,i,n),o=r?a/r:0;switch(r){case t:return[(i-n)/a%6*60||0,o,r];case i:return[60*((n-t)/a+2)||0,o,r];case n:return[60*((t-i)/a+4)||0,o,r]}}(e)[0];return[r,r]}return[0,360]}(e.hue));i<0&&(i=360+i);return i}(s),c=function(e,t){if("monochrome"===t.hue)return 0;if("random"===t.luminosity)return n([0,100]);var r=function(e){return i(e).saturationRange}(e),a=r[0],o=r[1];switch(t.luminosity){case"bright":a=55;break;case"dark":a=o-10;break;case"light":o=55}return n([a,o])}(l,s),function(e,t,r){var a=function(e,t){for(var n=i(e).lowerBounds,r=0;r<n.length-1;r++){var a=n[r][0],o=n[r][1],s=n[r+1][0],l=n[r+1][1];if(t>=a&&t<=s){var c=(l-o)/(s-a);return c*t+(o-c*a)}}return 0}(e,t),o=100;switch(r.luminosity){case"dark":o=a+20;break;case"light":a=(o+a)/2;break;case"random":a=0,o=100}return n([a,o])}(l,c,s)],s)}}();e&&e.exports&&(t=e.exports=r),t.randomColor=r}()}).call(this,i(48)(e))},function(e,t,i){"use strict";i.r(t);var n=i(5),r=i(6),a=i(0),o=i.n(a),s=i(29),l=i.n(s),c=i(17),d=i(16),h=i(18),u=i(3),p=i(11),f=i(14),g=i(33),m=i(1),v=i(192),_=i(501),b=i(502),w=i(12);function y(){var e=Object(u.a)([""]);return y=function(){return e},e}function x(){var e=Object(u.a)(["\ntext-align: right;\n"]);return x=function(){return e},e}function C(){var e=Object(u.a)(["\ntext-align: left;\n"]);return C=function(){return e},e}function S(){var e=Object(u.a)(["\ncolor: rgb(138, 150, 159);\nfont-weight: normal;\n"]);return S=function(){return e},e}function T(){var e=Object(u.a)(["\n  line-height: 40px;\n  margin-left: 20px;\n  margin-right: 20px;\n  padding-left: 20px;\n  padding-right: 20px;\n  margin-bottom: 1px;\n"]);return T=function(){return e},e}var k=Object(m.a)(w.b)(T()),A=Object(m.a)(k)(S()),P=Object(m.a)(w.a)(C()),D=Object(m.a)(w.a)(x()),E=m.a.button(y()),M=function(e){function t(){var e,i;Object(n.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(i=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={selected:""},i}return Object(h.a)(t,e),Object(r.a)(t,[{key:"selectTarget",value:function(e){e.preventDefault(),this.setState({selected:e.target.value})}},{key:"componentDidMount",value:function(){var e=this.props.candidates;this.state.selected||this.setState({selected:e[0]})}},{key:"render",value:function(){var e=this,t=this.props,i=t.candidates,n=t.name,r=t.source,a=t.doMove,s=t.doCancel;return 0===i.length?o.a.createElement(A,{key:n,columns:2},o.a.createElement(P,null,"Shard cannot be moved, it is on all servers"),o.a.createElement(D,null,o.a.createElement(E,{onClick:function(e){e.preventDefault(),s()}},"Cancel"))):o.a.createElement(A,{key:n,columns:4},o.a.createElement(P,null,"Move Shard: ",n),o.a.createElement(P,null,"From: ",r),o.a.createElement(P,null,"To:",o.a.createElement("select",{onChange:function(t){return e.selectTarget(t)}},i.map((function(e){return o.a.createElement("option",{key:e,value:e},e)})))),o.a.createElement(D,null,o.a.createElement(E,{onClick:function(e){e.preventDefault(),s()}},"Cancel"),o.a.createElement(E,{onClick:function(t){t.preventDefault(),a(e.state.selected)}},"Save")))}}]),t}(a.Component),O=Object(p.b)((function(e,t){var i=e.cluster.shortToServer,n=t.leader,r=t.followers,a=t.name,o=t.source,s=t.doMove,l=t.doCancel;return{candidates:Array.from(i.keys()).filter((function(e){return e.startsWith("DB")})).filter((function(e){return e!==n})).filter((function(e){return-1===r.indexOf(e)})).sort(),name:a,source:o,doMove:s,doCancel:l}}))(M),I=i(8);function N(){var e=Object(u.a)(["\ncolor: rgb(138, 150, 159);\nfont-weight: normal;\n"]);return N=function(){return e},e}function L(){var e=Object(u.a)(["\n  line-height: 40px;\n  margin-left: 20px;\n  margin-right: 20px;\n  padding-left: 20px;\n  padding-right: 20px;\n  margin-bottom: 1px;\n"]);return L=function(){return e},e}function R(){var e=Object(u.a)(["\n  color: #2ecc71;\n  width: 12pt;\n"]);return R=function(){return e},e}function j(){var e=Object(u.a)(["\ntext-align: right;\n"]);return j=function(){return e},e}function $(){var e=Object(u.a)(["\ntext-align: left;\n"]);return $=function(){return e},e}function B(){var e=Object(u.a)(["\n  color: ","\n"]);return B=function(){return e},e}function V(){var e=Object(u.a)(["\n  color: #2ecc71;\n"]);return V=function(){return e},e}var H=m.a.span(V()),F=m.a.span(B(),(function(e){return e.inSync?"#2ecc71":"#FF0000"})),z=Object(m.a)(w.a)($()),U=Object(m.a)(w.a)(j()),W=Object(m.a)(v.a)(R()),G=Object(m.a)(w.b)(L()),q=Object(m.a)(G)(N()),Y=function(e){function t(){var e,i;Object(n.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(i=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={moving:""},i.serverToShortName=function(e){var t=i.props.serverToShort.get(e);return t||e},i.shortNameToServer=function(e){var t=i.props.shortToServer.get(e);return t||e},i}return Object(h.a)(t,e),Object(r.a)(t,[{key:"setMoving",value:function(e){this.setState({moving:e})}},{key:"cancelMove",value:function(){this.setState({moving:""})}},{key:"doMove",value:function(e){var t=this.state.moving;this.props.moveShard(this.shortNameToServer(t),this.shortNameToServer(e)),this.setState({moving:""})}},{key:"render",value:function(){var e=this,t=this.props,i=t.name,n=t.leader,r=t.followers,a=(t.sync,t.CurrentFollowers),s=this.state.moving;return s?o.a.createElement(O,{name:i,leader:n,followers:r,source:s,doMove:this.doMove.bind(this),doCancel:this.cancelMove.bind(this)}):o.a.createElement(q,{key:i,columns:4},o.a.createElement(z,null,i),o.a.createElement(z,null,o.a.createElement(H,{onClick:function(t){t.preventDefault(),e.setMoving(n)},key:n},n)),o.a.createElement(z,null,r.map((function(e,t){return o.a.createElement(F,{key:e,inSync:a.indexOf(e)>-1},t>0?", ":"",e)}))),o.a.createElement(U,null,o.a.createElement(W,null)))}}]),t}(a.Component),Q=Object(p.b)((function(e,t){var i=e.cluster,n=i.shardDistribution,r=i.serverToShort,a=i.shortToServer,o=n[t.collection].Current[t.name].followers;return Object(f.a)({},t,{CurrentFollowers:o,serverToShort:r,shortToServer:a})}),(function(e,t){var i=t.name,n=t.collection;return{moveShard:function(t,r){e(Object(I.f)({collection:n,shard:i,fromServer:t,toServer:r}))}}}))(Y);function J(){var e=Object(u.a)(["\n  width: 12pt;\n  padding: 0px 5px;\n"]);return J=function(){return e},e}function Z(){var e=Object(u.a)(["\n  width: 12pt;\n  padding: 0px 5px;\n"]);return Z=function(){return e},e}function X(){var e=Object(u.a)(["\n  color: #2ecc71;\n  width: 12pt;\n  padding: 0px 5px;\n"]);return X=function(){return e},e}function K(){var e=Object(u.a)(["\ntext-align: right;\n"]);return K=function(){return e},e}function ee(){var e=Object(u.a)(["\ntext-align: left;\n"]);return ee=function(){return e},e}function te(){var e=Object(u.a)(["\n  color: rgb(255, 255, 255);\n  background-color: rgb(51, 51, 51);\n  cursor: pointer;\n"]);return te=function(){return e},e}function ie(){var e=Object(u.a)(["\nborder-bottom-color: rgba(140, 138, 137, 0.247059);\nborder-bottom-width: 1px;\nborder-bottom-style: solid;\nfont-weight: 600;\ncolor: rgb(113, 125, 144);\n"]);return ie=function(){return e},e}function ne(){var e=Object(u.a)(["\n  line-height: 40px;\n  margin-left: 20px;\n  margin-right: 20px;\n  padding-left: 20px;\n  padding-right: 20px;\n  margin-bottom: 1px;\n"]);return ne=function(){return e},e}function re(){var e=Object(u.a)(["\n  font-family: sans-serif;\n  font-size: 16px;\n"]);return re=function(){return e},e}var ae=m.a.div(re()),oe=Object(m.a)(w.b)(ne()),se=Object(m.a)(oe)(ie()),le=Object(m.a)(oe)(te()),ce=Object(m.a)(w.a)(ee()),de=Object(m.a)(w.a)(K()),he=Object(m.a)(v.a)(X()),ue=Object(m.a)(_.a)(Z()),pe=Object(m.a)(b.a)(J()),fe=function(e,t){var i=e.name,n=t.name;return i<n?-1:i>n?1:0},ge=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.selected,i=e.name,n=e.shards,r=e.select,a=e.deselect;return t?o.a.createElement(ae,null,o.a.createElement(le,{onClick:function(e){e.preventDefault(),a()},columns:2},o.a.createElement(ce,null,i),o.a.createElement(de,null,o.a.createElement(he,null),o.a.createElement(pe,null))),o.a.createElement(se,{columns:4},o.a.createElement(ce,null,"Shard"),o.a.createElement(ce,null,"Leader"),o.a.createElement(ce,null,"Followers"),o.a.createElement(de,null,"Sync")),n.sort(fe).map((function(e){return o.a.createElement(Q,Object.assign({key:e.name,collection:i},e))}))):o.a.createElement(ae,null,o.a.createElement(le,{onClick:function(e){e.preventDefault(),r()},columns:2},o.a.createElement(ce,null,i),o.a.createElement(de,null,o.a.createElement(he,null),o.a.createElement(ue,null))))}}]),t}(a.Component),me=Object(p.b)((function(e,t){var i=function(e){for(var t=e.Plan,i=[],n=0,r=Object.entries(t);n<r.length;n++){var a=r[n],o=Object(g.a)(a,2),s=o[0],l=o[1];l.hasOwnProperty("progress")||i.push(Object(f.a)({name:s,sync:!0},l))}return i}(e.cluster.shardDistribution[t.name]);return Object(f.a)({},t,{shards:i})}),(function(e,t){var i=t.name;return{select:function(){e(Object(I.c)(i))},deselect:function(){e(Object(I.h)())}}}))(ge),ve=i(39);function _e(){var e=Object(u.a)(["\n  float: right;\n  background-color: green;\n  color: white;\n"]);return _e=function(){return e},e}var be=m.a.button(_e()),we=function(){function e(t){Object(n.a)(this,e),this.call=t}return Object(r.a)(e,[{key:"execute",value:function(){return this.call()}}]),e}(),ye=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(r.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.fetchShardOverview;ve.a.registerTask("updateShardList",new we(e))}},{key:"componentWillUnmount",value:function(){ve.a.stopTask("updateShardList")}},{key:"render",value:function(){var e=this,t=this.props,i=t.shards,n=t.selected;return o.a.createElement("div",null,i.map((function(e){return o.a.createElement(me,{key:e,name:e,selected:n===e})})),o.a.createElement(be,{onClick:function(t){t.preventDefault(),e.props.rebalanceShards()}},"RebalanceShards"))}}]),t}(a.Component),xe=Object(p.b)((function(e){var t=e.cluster,i=t.shardDistribution,n=t.selected;return{shards:Object.keys(i).sort(),selected:n}}),(function(e){return{rebalanceShards:function(){e(Object(I.g)())},fetchShardOverview:function(){e(Object(I.e)())}}}))(ye),Ce=(i(37),i(40)),Se=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"render",value:function(){l.a.render(o.a.createElement(p.a,{store:Ce.a},o.a.createElement(xe,null)),document.getElementById("content"))}}]),e}();window.ShardsReactView=new Se},function(e,t,i){"use strict";i.r(t);var n=i(5),r=i(6),a=(i(197),i(0)),o=i.n(a),s=i(29),l=i.n(s),c=i(11),d=i(17),h=i(16),u=i(18),p=i(207),f=i(80);i(265);i(498);var g=i(37),m=(i(302),i(187)),v=i(303),_=i(304),b=i(305),w=i(306),y=i(330),x=i(331);function C(e){e.keys().forEach(e),m.each(e.keys(),(function(e){if(".ejs"===e.substring(e.length-4,e.length)){var t=e.substring(2,e.length),n=e.substring(2,e.length-4);window.JST["templates/"+n]=i(54)("./"+t)}}))}i(332),i(334),i(336),i(338),i(340),i(342),i(344),i(346),i(348),i(350),i(352),i(354),i(356),i(358),i(360),i(362),window.JST={},C(i(54)),y.registerLanguage("json",x),window.hljs=y,window.Noty=_,window.ReactDOM=l.a,window.Joi=i(446),window.jQuery=window.$=g,i(447),window._=m,i(448),i(449),window.frontendConfig,i(450),i(451),i(452),i(453),i(454),i(457),i(458),i(459),i(460),C(i(461)),C(i(462)),C(i(463)),window.tippy=i(464),i(465),window.numeral=i(466),window.JSONEditor=p,window.define=window.ace.define,window.aqltemplates=i(467),window.d3=f,i(468),i(469),window.prettyBytes=i(470),window.Dygraph=i(471),i(472),window.moment=i(473),window.sigma=v,window.marked=b,window.CryptoJS=w,i(474),i(475),i(476),i(477),i(478),i(479),i(480),i(481),i(482),i(483),i(484),i(485),i(486),i(487),i(488),i(489),i(490),i(491),i(492),i(493),i(494),window.Raphael=i(495),window.icon=i(496),window.randomColor=i(497);var S=function(e){function t(){return Object(n.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"})}}]),t}(a.Component),T=i(40),k=i(8),A=i(39);l.a.render(o.a.createElement(c.a,{store:T.a},o.a.createElement(S,null)),document.getElementById("root"));var P=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,[{key:"execute",value:function(){T.a.dispatch(Object(k.a)())}}]),e}();window.frontendConfig.isCluster&&A.a.registerTask("healthCheck",new P)}],[[196,1,2]]]);
//# sourceMappingURL=main.1d2a3fc3.chunk.js.map